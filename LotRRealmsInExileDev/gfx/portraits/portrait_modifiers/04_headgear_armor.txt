headgear_armor = {

	usage = game
	selection_behavior = weighted_random
	priority = 4


	## Mag ##

	mag_war_commoners = {#mag
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mag_war_headgear
				range = { 0.0 0.49 } # For the randomness to work correctly
			}
		}
        outfit_tags = { military_outfit }
        weight = {
            base = 0
            modifier = {
                add = 101 # slightly higher than mena
				portrait_wear_helmet_trigger = yes				
                OR = {
                    portrait_commoner_armor_trigger = {
                        CULTURE_INPUT = mag
                    }
                }
            }
        }
	}

	mag_war_nobles = {#mag
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mag_war_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}
        outfit_tags = { military_outfit }
        weight = {
            base = 0
            modifier = {
                add = 101 # slightly higher than mena
				has_afr_dlc_trigger = yes				
                OR = {
                    portrait_low_nobles_armor_trigger = {
                        CULTURE_INPUT = mag
                    }
                    portrait_high_nobles_armor_trigger = {
                        CULTURE_INPUT = mag
                    }
                }
            }
        }
	}



    ## Byzantine ##

    byzantine_war_low_nobles = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = numenorean_war_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
            }
        }
        outfit_tags = { military_outfit }
        weight = {
            base = 0
            modifier = {
                add = 20 # larger than the western war headgear
                portrait_war_nobles_helmet_trigger = {
                    CULTURE_INPUT = byzantine_proxy
                }
            }
        }
    }

    byzantine_war_high_nobles = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = numenorean_war_headgear
 				range = { 0.51 0.99 } # For the randomness to work correctly
            }
        }
        outfit_tags = { military_outfit }
        weight = {
            base = 0
            modifier = {
                add = 50 # larger than the western war headgear
                portrait_war_nobles_helmet_trigger = {
                    CULTURE_INPUT = byzantine_proxy
                }
                portrait_high_nobles_armor_trigger = {
                    CULTURE_INPUT = byzantine_proxy
                }
            }
        }
    }


    ## MENA ##

    mena_war_low_nobles = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = haradrim_war_headgear
                range = { 0.01 0.34 }
            }
        }
        outfit_tags = { military_outfit }
        weight = {
            base = 0
            modifier = {
                add = 20 
                portrait_war_nobles_helmet_trigger = {
                    CULTURE_INPUT = mena_proxy
                }
                OR = {
                    portrait_commoner_armor_trigger = { 
                        CULTURE_INPUT = mena_proxy
                    }
                    portrait_low_nobles_armor_trigger = { 
                        CULTURE_INPUT = mena_proxy
                    }
                }
            }
        }
    }

    mena_war_high_nobles = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = haradrim_war_headgear
                range = { 0.36 0.49 }
            }
        }
        outfit_tags = { military_outfit }
        weight = {
            base = 0
            modifier = {
                add = 50 
                portrait_war_nobles_helmet_trigger = {
                    CULTURE_INPUT = mena_proxy
                }
                portrait_high_nobles_armor_trigger = {
                    CULTURE_INPUT = mena_proxy
                }
            }
        }
    }

    ## DDE Abbasid ##

    east_haradrim_war_low_nobles = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = haradrim_war_headgear
				range = { 0.76 0.89 } # For the randomness to work correctly
            }
        }
        outfit_tags = { military_outfit }
        weight = {
            base = 0
            modifier = {
                add = 50 
                portrait_war_nobles_helmet_trigger = {
                    CULTURE_INPUT = east_haradrim
                }
                OR = {
                    portrait_commoner_armor_trigger = { 
                        CULTURE_INPUT = east_haradrim
                    }
                    portrait_low_nobles_armor_trigger = { 
                        CULTURE_INPUT = east_haradrim
                    }
                }
            }
        }
    }

    east_haradrim_war_high_nobles = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = haradrim_war_headgear
				range = { 0.91 0.99 } # For the randomness to work correctly
            }
        }
        outfit_tags = { military_outfit }
        weight = {
            base = 0
            modifier = {
                add = 50 
                portrait_war_nobles_helmet_trigger = {
                    CULTURE_INPUT = east_haradrim
                }
                portrait_high_nobles_armor_trigger = {
                    CULTURE_INPUT = east_haradrim
                }
            }
        }
    }

    ## Steppe ##

    #steppe_war_low_nobles = {
    #    dna_modifiers = {
    #        accessory = {
    #            mode = add
    #            gene = headgear
    #            template = steppe_war
	#			range = { 0.0 0.49 } # For the randomness to work correctly
    #        }
    #    }
    #    outfit_tags = { military_outfit }
    #    weight = {
    #        base = 0
    #        modifier = {
    #            add = 20 
    #            portrait_war_nobles_helmet_trigger = {
    #                CULTURE_INPUT = steppe_proxy
    #            }
    #            OR = {
    #                portrait_commoner_armor_trigger = { 
    #                    CULTURE_INPUT = steppe_proxy
    #                }
    #                portrait_low_nobles_armor_trigger = { 
    #                    CULTURE_INPUT = steppe_proxy
    #                }
    #            }
    #        }
    #    }
    #}

    #steppe_war_high_nobles = {
    #    dna_modifiers = {
    #        accessory = {
    #            mode = add
    #            gene = headgear
    #            template = steppe_war
	#			range = { 0.51 1.0 } # For the randomness to work correctly 
    #        }
    #    }
    #    outfit_tags = { military_outfit }
    #    weight = {
    #        base = 0
    #        modifier = {
    #            add = 50 
    #            portrait_war_nobles_helmet_trigger = {
    #                CULTURE_INPUT = steppe_proxy
    #            }
    #            portrait_high_nobles_armor_trigger = {
    #                CULTURE_INPUT = steppe_proxy
    #            }
    #        }
    #    }
    #}

	##ep2_steppe_war = {
	#	dna_modifiers = {
	#		accessory = {
	#			mode = add
	#			gene = headgear
	#			template = ep2_steppe_war_nobility
	#			range = { 0 1 } # For the randomness to work correctly
	#		}
	#	}
	#	outfit_tags = { military_outfit }
	#	weight = {
	#		base = 0
	#		modifier = {
	#			add = 60
    #            portrait_war_nobles_helmet_trigger = {
    #                CULTURE_INPUT = 
    #            }
    #            has_ep2_dlc_trigger = yes
	#		}
	#	}
	#}

    ## FP2 Fate of Iberia ##

	pel_war_low_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = pel_war_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}
		outfit_tags = { military_outfit }
		weight = {
			base = 0
			modifier = {
				add = 60 # slightly higher
				has_fp2_dlc_trigger = yes
				portrait_wear_helmet_trigger = yes				
                portrait_war_nobles_helmet_trigger = {
                    CULTURE_INPUT = pel
                }
                portrait_war_nobles_fancy_helmet_trigger = yes
                OR = {
                    portrait_commoner_armor_trigger = { 
                        CULTURE_INPUT = pel
                    }
                    portrait_low_nobles_armor_trigger = { 
                        CULTURE_INPUT = pel
                    }
				}
			}
		}
	}

	pel_war_high_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = pel_war_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}
		outfit_tags = { military_outfit }
		weight = {
			base = 0
			modifier = {
				add = 60 # slightly higher
				has_fp2_dlc_trigger = yes  
				portrait_wear_helmet_trigger = yes
                portrait_war_nobles_helmet_trigger = {
                    CULTURE_INPUT = pel
                }
                portrait_high_nobles_armor_trigger = {
                    CULTURE_INPUT = pel
                }
			}
		}
	}

    thani_hazad_war_low_nobles = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = thani_hazad_war_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
            }
        }
        outfit_tags = { military_outfit }
        weight = {
            base = 0
            modifier = {
                add = 180 # larger than the western war headgear
                has_fp2_dlc_trigger = yes  
				portrait_war_nobles_helmet_trigger = {
                    CULTURE_INPUT = thani_hazad
                }
                OR = {
                    portrait_commoner_armor_trigger = { 
                        CULTURE_INPUT = thani_hazad
                    }
                    portrait_low_nobles_armor_trigger = { 
                        CULTURE_INPUT = thani_hazad
                    }
                }
            }
            # modifier = {
            #     factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
            #     has_ep2_dlc_trigger = yes   
            #     NOR = { 
            #     	portrait_era2_trigger = yes 
            #     	portrait_era3_trigger = yes
            #     } 
            # }
        }
    }

    thani_hazad_war_high_nobles = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = thani_hazad_war_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
            }
        }
        outfit_tags = { military_outfit }
        weight = {
            base = 0
			modifier = {
                add = 180 # larger than the western war headgear
				has_fp2_dlc_trigger = yes  
                portrait_war_nobles_helmet_trigger = {
                    CULTURE_INPUT = thani_hazad
                }
                portrait_high_nobles_armor_trigger = {
                    CULTURE_INPUT = thani_hazad
                }
            }
            # modifier = {
            #     factor = 0       # Should NOT show up if EP2 is active and we're not in the right era
            #     has_ep2_dlc_trigger = yes   
            #     NOR = { 
            #     	portrait_era2_trigger = yes 
            #     	portrait_era3_trigger = yes
            #     } 
            # }
        }
    }

    ## Dunlending ##

	dunlending_war_high = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dunlending_war_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}
		outfit_tags = { military_outfit }
		weight = {
			base = 0
			modifier = {
				add = 110 # slightly higher than northern
				portrait_wear_helmet_trigger = yes
				portrait_gwathiurim_clothing_trigger = yes						
				highest_held_title_tier > tier_duchy
			}
		}
	}

	dunlending_war_low = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dunlending_war_headgear
				range = { 0.1 0.49 } # For the randomness to work correctly
			}
		}
		outfit_tags = { military_outfit }
		weight = {
			base = 0
			modifier = {
				add = 110 # slightly higher than northern
				portrait_wear_helmet_trigger = yes
				portrait_gwathiurim_clothing_trigger = yes						
				OR = {
					highest_held_title_tier = tier_duchy
					highest_held_title_tier = tier_county
				}
			}
		}
	}

	dunlending_war_common = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dunlending_war_headgear
				range = { 0.01 0.25 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 101
                has_fp1_dlc_trigger = yes
				portrait_wear_helmet_trigger = yes
				highest_held_title_tier < tier_county
			}
		}
	}

    ## Mumakani ##

	mumakani_war_low = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mumakani_war_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}
		outfit_tags = { military_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_african_proxy_clothing_trigger = yes						
				OR = {
					highest_held_title_tier = tier_duchy
					highest_held_title_tier = tier_county
				}
			}
		}
	}
	
	mumakani_war_high = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mumakani_war_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}
		outfit_tags = { military_outfit }
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_african_proxy_clothing_trigger = yes						
				OR = {
					highest_held_title_tier > tier_duchy
				}
			}
		}
	}	
	

	dunedain_ranger_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
                template = dunedain_war_headgear
                range = { 0 1 } # For the randomness to work correctly
			}			
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_dunedain_clothing_trigger = yes
			}
		}
	}	

    ## Gondorian ##

    gondorian_war_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gondorian_war_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_gondorian_clothing_trigger = yes

			}
		}
		weight = {
			base = 0
			modifier = {
				add = 101
				portrait_wear_helmet_trigger = yes
 				exists = liege				
				liege.culture = {
					has_clothing_gfx = gondorian_clothing_gfx
				}			
			}
		}
	}
	
	gondorian_war_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gondorian_war_headgear
				range = { 0.26 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 120
				portrait_wear_helmet_trigger = yes
				portrait_gondorian_clothing_trigger = yes
				highest_held_title_tier = tier_county
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 101
				portrait_wear_helmet_trigger = yes
				highest_held_title_tier = tier_county
 				exists = liege				
				liege.culture = {
					has_clothing_gfx = gondorian_clothing_gfx
				}			
			}
		}
	}
	
	gondorian_war_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gondorian_war_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 120
				portrait_wear_helmet_trigger = yes
				OR = {
					portrait_gondorian_clothing_trigger = yes
					portrait_harondorim_clothing_trigger = yes
				}
				highest_held_title_tier = tier_duchy
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 101
				portrait_wear_helmet_trigger = yes
				highest_held_title_tier = tier_duchy
 				exists = liege				
				liege.culture = {
					has_clothing_gfx = gondorian_clothing_gfx
				}			
			}
		}
	}
	
	gondorian_war_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gondorian_war_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 120
				portrait_wear_helmet_trigger = yes
				OR = {
					portrait_gondorian_clothing_trigger = yes
					portrait_harondorim_clothing_trigger = yes
				}
				highest_held_title_tier = tier_kingdom
			}
		}
	}
	
	gondorian_war_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gondorian_war_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}
		outfit_tags = { gondor_war_prince }	
		weight = {
			base = 0
			modifier = {
				add = 120
				portrait_wear_helmet_trigger = yes
				OR = {
					portrait_gondorian_clothing_trigger = yes
					portrait_harondorim_clothing_trigger = yes
				}
				highest_held_title_tier = tier_empire
			}
		}
	}
	
	## Arnorian ##

    arnorian_war_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = arnorian_war_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
            base = 0
            modifier = {
                add = 50 
				OR = {
					portrait_commoner_armor_trigger = {
						 CULTURE_INPUT = arnorian
					}
				}
            }
        }
	}

	arnorian_war_nobility = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = arnorian_war_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
            base = 0
            modifier = {
                add = 50
				OR = {
					portrait_low_nobles_armor_trigger = { 
						CULTURE_INPUT = arnorian
					}
					portrait_high_nobles_armor_trigger = { 
						CULTURE_INPUT = arnorian
					}

				}
            }
        }
	}

	## Uialdain ##

    uialdain_war_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = uialdain_war_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
            base = 0
            modifier = {
                add = 50 
				OR = {
					portrait_commoner_armor_trigger = { 
						 CULTURE_INPUT = uialdain
					}
				}
            }
        }
	}

	uialdain_war_nobility = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = uialdain_war_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
            base = 0
            modifier = {
                add = 50
				OR = {
					portrait_low_nobles_armor_trigger = { 
						CULTURE_INPUT = uialdain
					}
					portrait_high_nobles_armor_trigger = { 
						CULTURE_INPUT = uialdain
					}					
				}
            }
        }
	}


    harondorim_war_commoners = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = harondorim_war_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }	
        weight = {
            base = 0
                modifier = {
                    add = 120
                    portrait_wear_helmet_trigger = yes
                    portrait_harondorim_clothing_trigger = yes
                }
        }
    }
        
    harondorim_war_nobles = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = harondorim_war_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }	
        weight = {
            base = 0
                modifier = {
                    add = 100
                    portrait_wear_helmet_trigger = yes
                    portrait_harondorim_clothing_trigger = yes
                    highest_held_title_tier = tier_county
                }
        }
    }

	northron_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northmen_war_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 20
				portrait_wear_helmet_trigger = yes
				portrait_northern_proxy_clothing_trigger = yes
				portrait_rohirrim_clothing_trigger = no
				portrait_gwathiurim_clothing_trigger = no
			}
			modifier = {
				add = -100
				portrait_wear_helmet_trigger = yes
				portrait_hobbit_clothing_trigger = yes
			}
		}
	}

    rohirrim_commoner_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = rohirrim_war_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				portrait_wear_helmet_trigger = yes
				portrait_rohirrim_clothing_trigger = yes
				highest_held_title_tier <= tier_county
			}
		}
	}

    rohirrim_war_high = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = rohirrim_war_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 110
				portrait_wear_helmet_trigger = yes
				portrait_rohirrim_clothing_trigger = yes
				highest_held_title_tier > tier_county
			}
		}
	}
	
	framling_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = rohirrim_war_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 110
				portrait_wear_helmet_trigger = yes
				portrait_rohirrim_clothing_trigger = yes
				highest_held_title_tier > tier_county
				scope:culture = culture:framling
			}
		}
	}

#	gwathiurim_war = {
#		dna_modifiers = {
#			accessory = {
#				mode = add
#				gene = headgear
#				template = no_headgear
#				range = { 0 1 } # For the randomness to work correctly
#			}
#		}	
#		weight = {
#			base = 0
#			modifier = {
#				add = 101 # slightly higher than northern
#				portrait_wear_helmet_trigger = yes
#				portrait_gwathiurim_clothing_trigger = yes
#			}
#		}
#	}

    woodmen_war = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = woodmen_war_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }	
        weight = {
            base = 0
            modifier = {
                add = 101 # slightly higher than northern
                portrait_wear_helmet_trigger = yes
                portrait_vale_woodmen_clothing_trigger = yes
            }
        }
    }

	dalemen_war_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dale_war_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				NOT = { AND = { government_has_flag = government_is_mercenary  } }
				portrait_wear_helmet_trigger = yes
                OR = {
                    portrait_commoner_armor_trigger = {
                        CULTURE_INPUT = dalemen
                    }
                }		
			}
		}
	}

	dalemen_war_low_nobility = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dale_war_headgear
				range = { 0.26 0.49 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_mail_coif
				template = ep2_western_era3_war_nobility
				range = { 0 1 } # For the randomness to work correctly				
			}						
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				NOT = { AND = { government_has_flag = government_is_mercenary  } }
				portrait_wear_helmet_trigger = yes
                OR = {
                    portrait_low_nobles_armor_trigger = {
                        CULTURE_INPUT = dalemen
                    }
                }	
			}
		}
	}
	
	dale_war_high_nobility = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dale_war_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_mail_coif
				template = ep2_western_era3_war_nobility
				range = { 0 1 } # For the randomness to work correctly				
			}						
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				NOT = { AND = { government_has_flag = government_is_mercenary  } }
				portrait_wear_helmet_trigger = yes
                OR = {
                    portrait_high_nobles_armor_trigger = {
                        CULTURE_INPUT = dalemen
                    }
                }	
			}
		}
	}
	
	dale_war_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dale_war_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = headgear_mail_coif
				template = ep2_western_era3_war_nobility
				range = { 0 1 } # For the randomness to work correctly				
			}			
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				NOT = { AND = { government_has_flag = government_is_mercenary  } }
				portrait_wear_helmet_trigger = yes
                OR = {
                    portrait_royalty_armor_trigger = {
                        CULTURE_INPUT = dalemen
                    }
                }	
			}
		}
	}

	dorwinion_war_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dorwinion_war_headgear
				range = { 0.01 0.25 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				NOT = { AND = { government_has_flag = government_is_mercenary  } }
				portrait_wear_helmet_trigger = yes				
                OR = {
                    portrait_commoner_armor_trigger = {
                        CULTURE_INPUT = dorwinion
                    }
                }				
			}
		}
	}

	dorwinion_war_low_nobility = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dorwinion_war_headgear
				range = { 0.26 0.50 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				NOT = { AND = { government_has_flag = government_is_mercenary  } }
				portrait_wear_helmet_trigger = yes				
                OR = {
                    portrait_low_nobles_armor_trigger = {
                        CULTURE_INPUT = dorwinion
                    }
                }
			}
		}
	}
	
	dorwinion_war_high_nobility = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dorwinion_war_headgear
				range = { 0.51 0.75 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				NOT = { AND = { government_has_flag = government_is_mercenary  } }
				portrait_wear_helmet_trigger = yes				
                OR = {
                    portrait_high_nobles_armor_trigger = {
                        CULTURE_INPUT = dorwinion
                    }
                }
			}
		}
	}
	
	dorwinion_war_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dorwinion_war_headgear
				range = { 0.76 1.0 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				NOT = { AND = { government_has_flag = government_is_mercenary  } }
				portrait_wear_helmet_trigger = yes				
                OR = {
                    portrait_royalty_armor_trigger = {
                        CULTURE_INPUT = dorwinion
                    }
                }
			}
		}
	}

	dorwinion_mercenary = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = uialdain_war_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101 # slightly higher than northern
				government_has_flag = government_is_mercenary 
				portrait_wear_helmet_trigger = yes
				OR = {
					portrait_dorwinion_clothing_trigger = yes
					portrait_dalemen_clothing_trigger = yes
				}	
			}
		}
	}
	
	numenorean_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = numenorean_war_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				portrait_wear_helmet_trigger = yes
				portrait_numenorean_clothing_trigger = yes
			}
		}
	}
	
    umbar_war_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = umbar_war_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_umbar_clothing_trigger = yes
				highest_held_title_tier < tier_county
			}
		}
	}

	umbar_war_low_nobility = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = umbar_war_headgear
				range = { 0.26 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_umbar_clothing_trigger = yes
				highest_held_title_tier = tier_county
			}
		}
	}
	
	umbar_war_high_nobility = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = umbar_war_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_umbar_clothing_trigger = yes
				highest_held_title_tier = tier_duchy
			}
		}
	}

	umbar_war_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = umbar_war_headgear
				range = { 0.75 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_umbar_clothing_trigger = yes
				OR = {
					highest_held_title_tier = tier_kingdom
					highest_held_title_tier = tier_empire
				}	
			}
		}
	}
	
	anbalukkhori_war_low_nobility = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = anbalukkhori_war_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_anbalukkhori_clothing_trigger = yes
				highest_held_title_tier <= tier_county
			}
		}
	}
	
	anbalukkhori_war_high_nobility = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = anbalukkhori_war_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_anbalukkhori_clothing_trigger = yes
				highest_held_title_tier = tier_duchy
			}
		}
	}
	
	anbalukkhori_war_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = anbalukkhori_war_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_anbalukkhori_clothing_trigger = yes
				OR = {
					highest_held_title_tier = tier_kingdom
					highest_held_title_tier = tier_empire
				}	
			}
		}
	}

    bellakari_war_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bellakari_war_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				portrait_wear_helmet_trigger = yes
				portrait_bellakari_clothing_trigger = yes
				highest_held_title_tier < tier_county
			}
		}
		weight = {
			base = 0
            		modifier = {
               		add = 101
				portrait_wear_helmet_trigger = yes
				highest_held_title_tier < tier_county
 				exists = liege				
				liege.culture = {
					has_clothing_gfx = bellakari_clothing_gfx
				}			
			}			
		}
	}

	bellakari_war_nobility = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bellakari_war_headgear
				range = { 0.26 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 150
				portrait_wear_helmet_trigger = yes
				portrait_bellakari_clothing_trigger = yes
				OR = {
					highest_held_title_tier = tier_duchy
					highest_held_title_tier = tier_county
				}
			}
		}
		weight = {
			base = 0
            		modifier = {
               		add = 101
				portrait_wear_helmet_trigger = yes
				OR = {
					highest_held_title_tier = tier_duchy
					highest_held_title_tier = tier_county
				}
 				exists = liege				
				liege.culture = {
					has_clothing_gfx = bellakari_clothing_gfx
				}			
			}			
		}
	}
	
	bellakari_war_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bellakari_war_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 200
				portrait_wear_helmet_trigger = yes
				portrait_bellakari_clothing_trigger = yes
				highest_held_title_tier > tier_duchy
			}
		}
	}
	
	rayan_war_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = rayan_war_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
            modifier = {
                add = 50
				portrait_wear_helmet_trigger = yes				
				OR = {
                    portrait_commoner_armor_trigger = {
                        CULTURE_INPUT = rayan
                    }
                    portrait_low_nobles_armor_trigger = {
                        CULTURE_INPUT = rayan
                    }      					
                }				
            }
		}
	}

 	rayan_war_nobility = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = rayan_war_headgear
				range = { 0.26 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
            modifier = {
                add = 100
				portrait_wear_helmet_trigger = yes				
                portrait_high_nobles_armor_trigger = {
                    CULTURE_INPUT = rayan
                }
            }
		}
	}
	
	rayan_war_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = rayan_war_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
            modifier = {
                add = 100
				portrait_wear_helmet_trigger = yes				
                portrait_royalty_armor_trigger = {
                    CULTURE_INPUT = rayan
                }
            }
		}
	}

    north_haradrim_war_low = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = haradrim_war_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_east_haradrim_clothing_trigger = no
				portrait_wear_helmet_trigger = yes
				portrait_north_haradrim_clothing_trigger = yes
				highest_held_title_tier <= tier_county
			}
		}
	}
	
	north_haradrim_war_high = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = haradrim_war_headgear
				range = { 0.26 0.44 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_east_haradrim_clothing_trigger = no
				portrait_wear_helmet_trigger = yes
				portrait_north_haradrim_clothing_trigger = yes
				OR = {
					highest_held_title_tier = tier_duchy
					highest_held_title_tier = tier_county
				}
			}
		}
	}
	
	north_haradrim_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = haradrim_war_headgear
				range = { 0.46 0.48 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
            modifier = {
                add = 100
				portrait_wear_helmet_trigger = yes				
				portrait_north_haradrim_clothing_trigger = yes
				highest_held_title_tier > tier_duchy
            }
		}
	}	

    south_haradrim_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = haradrim_war_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_south_haradrim_clothing_trigger = yes
			}
		}
	}
	
    nafarati_war_low = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = nafarati_war_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_nafarati_clothing_trigger = yes
				portrait_wear_helmet_trigger = yes
				highest_held_title_tier <= tier_county
			}
		}
	}
	
	nafarati_war_high = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = nafarati_war_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_nafarati_clothing_trigger = yes
				portrait_wear_helmet_trigger = yes
				highest_held_title_tier > tier_county
			}
		}
	}	


	
	#Ioriag#

 	ioriag_mercenary = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ioriag_war_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = special_headgear_generic_mask_01
				template = generic_mask
				range = { 0 1 } # For the randomness to work correctly
			}			
		}	
		weight = {
			base = 0
			modifier = {
				add = 102
				portrait_wear_helmet_trigger = yes
				portrait_rhunnic_clothing_trigger = yes
				government_has_flag = government_is_mercenary 				
				NOT = { portrait_variag_clothing_trigger = yes }				
				culture = {
					AND = {
						has_cultural_pillar = heritage_ioriag
					}
				}				
			}
		}
	}	

 	ioriag_war_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ioriag_war_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = special_headgear_generic_mask_01
				template = generic_mask
				range = { 0 1 } # For the randomness to work correctly
			}					
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				portrait_wear_helmet_trigger = yes
				portrait_rhunnic_clothing_trigger = yes
				highest_held_title_tier <= tier_county				
				NOT = { portrait_variag_clothing_trigger = yes }				
				culture = {
					AND = {
						has_cultural_pillar = heritage_ioriag
					}
				}				
			}
            modifier = {
                add = 200           
                OR = {
                    portrait_commoner_armor_in_army_trigger = { 
                        CULTURE_INPUT = steppe_proxy
                    }
                    portrait_low_nobles_armor_in_army_trigger = { 
                        CULTURE_INPUT = steppe_proxy
                    }
                }
				NOT = { portrait_variag_clothing_trigger = yes }				
				exists = liege				
				liege.culture = {
					has_cultural_pillar = heritage_ioriag
				}					
            }							
		}
	}
	
	ioriag_war_nobility = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ioriag_war_headgear
				range = { 0.26 0.74 } # For the randomness to work correctly
			}
			accessory = {
				mode = add
				gene = special_headgear_generic_mask_01
				template = generic_mask
				range = { 0 1 } # For the randomness to work correctly
			}					
		}	
		weight = {
			base = 0
			modifier = {
				add = 121
				portrait_wear_helmet_trigger = yes
				portrait_rhunnic_clothing_trigger = yes
				NOT = { portrait_variag_clothing_trigger = yes }				
				culture = {
					AND = {
						has_cultural_pillar = heritage_ioriag
					}
				}				
				OR = {
					highest_held_title_tier = tier_duchy
					highest_held_title_tier = tier_county
				}				
			}
            modifier = {
                add = 200           
                portrait_high_nobles_armor_in_army_trigger = {
                    CULTURE_INPUT = steppe_proxy
                } 
				NOT = { portrait_variag_clothing_trigger = yes }
				exists = liege				
				liege.culture = {
					has_cultural_pillar = heritage_ioriag
				}					
            }							
		}
	}
	
	ioriag_war_royalty = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ioriag_war_headgear
				range = { 0.76 1.0 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 200
				portrait_wear_helmet_trigger = yes
				portrait_rhunnic_clothing_trigger = yes
				NOT = { portrait_variag_clothing_trigger = yes }				
				culture = {
					AND = {
						has_cultural_pillar = heritage_ioriag
					}
				}				
				OR = {
					highest_held_title_tier = tier_kingdom
					highest_held_title_tier = tier_empire
				}		
			}
		}
	}
	
    magriag_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = magriag_war_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 500
				portrait_wear_helmet_trigger = yes
				portrait_rhunnic_clothing_trigger = yes
				NOT = { portrait_variag_clothing_trigger = yes }
				culture = {
					AND = {
						has_cultural_pillar = heritage_ioriag
						has_cultural_pillar = ethos_egalitarian						
					}
				}				
			}
		}
	}

	# Igath#

    igath_war_low = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = igath_war_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_rhunnic_clothing_trigger = yes
				culture = {
					AND = {
						has_cultural_pillar = heritage_igath
					}
				}							
				highest_held_title_tier <= tier_county
			}
		}
	}
	
	igath_war_high = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = igath_war_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_rhunnic_clothing_trigger = yes
				culture = {
					AND = {
						has_cultural_pillar = heritage_igath
					}
				}							
				highest_held_title_tier > tier_county
			}
		}
	}	
	
	#VARIAG#

 	variag_war_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = variag_war_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_variag_clothing_trigger = yes
			}
		}
	}
	
	variag_war_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = variag_war_headgear
				range = { 0.26 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 120
				portrait_wear_helmet_trigger = yes
				portrait_variag_clothing_trigger = yes
				highest_held_title_tier = tier_county
			}
		}
	}
	
	variag_war_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = variag_war_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 120
				portrait_wear_helmet_trigger = yes
				portrait_variag_clothing_trigger = yes
				highest_held_title_tier = tier_duchy
			}
		}
	}
	
	variag_war_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = variag_war_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 120
				portrait_wear_helmet_trigger = yes
				portrait_variag_clothing_trigger = yes
				highest_held_title_tier = tier_kingdom
			}
		}
	}
	
	variag_war_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = variag_war_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 120
				portrait_wear_helmet_trigger = yes
				portrait_variag_clothing_trigger = yes
				highest_held_title_tier = tier_empire
			}
		}
	}
	
 	nurniag_war_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = nurniag_war_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_variag_clothing_trigger = yes
				culture = {
					AND = {
						has_cultural_pillar = heritage_ioriag
						has_cultural_pillar = ethos_bureaucratic
					}
				}								
			}
		}
	}
	
	nurniag_war_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = nurniag_war_headgear
				range = { 0.26 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 120
				portrait_wear_helmet_trigger = yes
				portrait_variag_clothing_trigger = yes
				culture = {
					AND = {
						has_cultural_pillar = heritage_ioriag
						has_cultural_pillar = ethos_bureaucratic
					}
				}								
				highest_held_title_tier = tier_county
			}
		}
	}
	
	nurniag_war_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = nurniag_war_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 120
				portrait_wear_helmet_trigger = yes
				portrait_variag_clothing_trigger = yes
				culture = {
					AND = {
						has_cultural_pillar = heritage_ioriag
						has_cultural_pillar = ethos_bureaucratic
					}
				}								
				highest_held_title_tier = tier_duchy
			}
		}
	}
	
	nurniag_war_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = nurniag_war_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 120
				portrait_wear_helmet_trigger = yes
				portrait_variag_clothing_trigger = yes
				culture = {
					AND = {
						has_cultural_pillar = heritage_ioriag
						has_cultural_pillar = ethos_bureaucratic
					}
				}								
				highest_held_title_tier = tier_kingdom
			}
		}
	}
	
	nurniag_war_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = nurniag_war_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 120
				portrait_wear_helmet_trigger = yes
				portrait_variag_clothing_trigger = yes
				culture = {
					AND = {
						has_cultural_pillar = heritage_ioriag
						has_cultural_pillar = ethos_bureaucratic
					}
				}								
				highest_held_title_tier = tier_empire
			}
		}
	}

    khyan_war_low = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = khyan_war_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_khailuza_clothing_trigger = yes
				portrait_wear_helmet_trigger = yes
				highest_held_title_tier <= tier_county
			}
		}
	}
	
	khyan_war_high = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = khyan_war_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_khailuza_clothing_trigger = yes
				portrait_wear_helmet_trigger = yes
				highest_held_title_tier > tier_county
			}
		}
	}

    muranian_war_low = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = muranian_war_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_muranian_clothing_trigger = yes
				portrait_wear_helmet_trigger = yes
				highest_held_title_tier <= tier_county
			}
		}
	}
	
	muranian_war_high = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = muranian_war_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_muranian_clothing_trigger = yes
				portrait_wear_helmet_trigger = yes
				highest_held_title_tier > tier_county
			}
		}
	}

    sirayni_war_low = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sirayni_war_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_sirayni_clothing_trigger = yes
				portrait_wear_helmet_trigger = yes
				highest_held_title_tier <= tier_county
			}
		}
	}
	
	sirayni_war_high = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sirayni_war_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_sirayni_clothing_trigger = yes
				portrait_wear_helmet_trigger = yes
				highest_held_title_tier > tier_county
			}
		}
	}				
	
	#ELVEN#

	elven_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = elven_war_headgear
				range = { 0.0 0.24 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				OR = {
					portrait_elven_clothing_trigger = yes
				}
			}
		}
	}
	
	elven_war_silvan = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = elven_war_headgear
				range = { 0.26 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
                add = 110
				portrait_wear_helmet_trigger = yes
                highest_held_title_tier <= tier_duchy
                OR = {
                    portrait_commoner_armor_trigger = { 
                        CULTURE_INPUT = lasgalendrim
                    }
                    portrait_low_nobles_armor_trigger = { 
                        CULTURE_INPUT = lasgalendrim
                    }
                }
            }
            modifier = {
				add = 200
				portrait_wear_helmet_trigger = yes
				is_elf = yes				
 				exists = liege
				highest_held_title_tier < tier_kingdom				
				liege.culture = {
					has_clothing_gfx = lasgalendrim_clothing_gfx
				}			
			}						
		}
		outfit_tags = { elven_war_silvan }
	}
	
	elven_war_silvan_king = { 
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = elven_high_headgear
				range = { 0.24 0.25 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
                add = 110
				portrait_wear_helmet_trigger = yes
                highest_held_title_tier > tier_duchy
                portrait_high_nobles_armor_trigger = { 
                    CULTURE_INPUT = lasgalendrim
                }
            }
		}
	}
	
	elven_war_noldor = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = elven_war_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 110
				portrait_wear_helmet_trigger = yes
				culture = { has_cultural_pillar = heritage_calaquendi }
			}
            modifier = {
               add = 200
				portrait_wear_helmet_trigger = yes
				is_elf = yes				
 				exists = liege				
				liege.culture = {
					has_clothing_gfx = noldor_clothing_gfx
				}
			}
		}
		outfit_tags = { elven_war_noldor }
	}
	
	elven_war_galadhrim = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = elven_war_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 110
				portrait_wear_helmet_trigger = yes
				culture = { has_cultural_pillar = heritage_lomiquendi }
				NOT = { portrait_lasgalendrim_clothing_trigger = yes }
			}
            modifier = {
               add = 200
				portrait_wear_helmet_trigger = yes
				is_elf = yes				
 				exists = liege				
				liege.culture = {
					has_clothing_gfx = sindar_clothing_gfx
				}			
			}			
		}
	}
	
	
	#dwarf_war = {
	#	dna_modifiers = {
	#		accessory = {
	#			mode = add
	#			gene = headgear
	#			template = dwarf_war
	#			range = { 0 1 } # For the randomness to work correctly
	#		}
	#	}	
	#	weight = {
	#		base = 0
	#		modifier = {
	#			add = 101
	#			portrait_wear_helmet_trigger = yes
	#			portrait_dwarf_clothing_trigger = yes
	#		}
	#	}
	#}

	iron_dwarf_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dwarf_war_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 105
				portrait_wear_helmet_trigger = yes
				portrait_dwarf_clothing_trigger = yes
				portrait_dwarf_bronze_clothing_trigger = no
				portrait_dwarf_gold_clothing_trigger = no
			}
		}
	}

    gold_dwarf_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dwarf_war_headgear
				range = { 0.26 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 105
				portrait_wear_helmet_trigger = yes
				portrait_dwarf_clothing_trigger = yes
				portrait_dwarf_gold_clothing_trigger = yes
			}
		}
	}

    bronze_dwarf_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dwarf_war_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 105
				portrait_wear_helmet_trigger = yes
				portrait_dwarf_clothing_trigger = yes
				portrait_dwarf_bronze_clothing_trigger = yes
			}
		}
	}

	blacklock_dwarf_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dwarf_war_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 110
				portrait_wear_helmet_trigger = yes
				culture = { has_cultural_pillar = heritage_blacklock }
			}
		}
	}

	mordor_orc_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = uruk_war_headgear
				range = { 0.21 0.39 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 105
				portrait_wear_helmet_trigger = yes
				portrait_mordor_uruk_clothing_trigger = yes
			}
		}
	}
	
	dolguldur_orc_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = uruk_war_headgear
				range = { 0.41 0.59 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 105
				portrait_wear_helmet_trigger = yes
				portrait_dolguldur_orc_clothing_trigger = yes
			}
		}
	}
	
	black_troll_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = uruk_war_headgear
				accessory = male_headgear_uruk_isengard_1
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 105
				portrait_black_troll_clothing_trigger = yes
			}
		}
	}
	
	isengard_uruk_helmets = {
		usage = game
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = uruk_war_headgear
				range = { 0.01 0.19 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_wear_helmet_trigger = yes
				portrait_isengard_uruk_clothing_trigger = yes
			}
		}		
	}

    uruk_berserker_helmets = {
		usage = game
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = uruk_war_headgear
				range = { 0.61 0.79 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 120
				AND = {
					has_trait = urukhai_berserker
					OR = {
						portrait_isengard_uruk_clothing_trigger = yes
					}
				}
			}
		}		
	}
	angmarrim_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = angmarrim_war_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 120
				portrait_wear_helmet_trigger = yes
				portrait_angmarrim_clothing_trigger = yes
			}
		}
	}
	
	hobbit_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = hobbit_war_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 120
				portrait_wear_helmet_trigger = yes
				portrait_hobbit_clothing_trigger = yes
			}
		}
	}
	
	#Add circumpolar war headgear
	
	ithilien_ranger_war = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
                template = dunedain_war_headgear
 				range = { 0 1 }
			}			
			accessory = {
				mode = add
				gene = special_headgear_generic_mask_01
                template = generic_mask
 				range = { 0 1 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 120
				portrait_wear_helmet_trigger = yes
				portrait_gondorian_clothing_trigger = yes
				exists = liege
				liege = { primary_title = title:d_forithilien }						
			}
			modifier = {
				add = 120
				portrait_wear_helmet_trigger = yes
				portrait_gondorian_clothing_trigger = yes
				exists = liege
				liege = { primary_title = title:d_laamp_rangers_of_ithilien }						
			}			
			modifier = {
                add = 200
				portrait_wear_helmet_trigger = yes
				portrait_gondorian_clothing_trigger = yes
				has_primary_title = title:d_forithilien				
            }
			modifier = {
                add = 200
				portrait_wear_helmet_trigger = yes
				portrait_gondorian_clothing_trigger = yes
				has_primary_title = title:d_laamp_rangers_of_ithilien			
            }			
		}
	}	
}


# Tags:
# rank_headgear: any headgear that signifies a certain title. crowns, pope hat etc.



headgear = {
	# interface_position = 1
	usage = game
	selection_behavior = weighted_random
	
	## No Headgear ##

	no_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		
		weight = {
			## No headgear for children under 16 ## 
			base = 0
			modifier = {
				add = 1000
				age < 16
			}
			# No headgear for characters with an active Vow of Poverty
			modifier = {
				add = 100
				has_character_modifier = vow_of_poverty_modifier
				# Should still wear armor when going to war
				NOT = { portrait_wear_armor_trigger = yes }
			}
			modifier = { # Saruman no wear hat
				add = 1000
				exists = character:lineofsaruman
				this = character:lineofsaruman
			}
			modifier = { # Remove headgear to avoid clipping with disfigured iron mask
				add = 2000
				has_trait = disfigured
			}
			modifier = {
				add = 2000
				exists = character:lineofsauron #Sauron
				this = character:lineofsauron #Sauron
				has_game_rule = fair_sauron
			}
		}
	}

	## Gondorian ##

	gondorian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gondorian_commoners
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_gondorian_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_gondorian_clothing_spouse_trigger = yes
			}
		}
	}

	gondorian_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gondorian_counts
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_gondorian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_gondorian_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	gondorian_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gondorian_dukes
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_gondorian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_gondorian_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	gondorian_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gondorian_kings
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						OR = {
							portrait_gondorian_clothing_trigger = yes
							portrait_harondorim_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_gondorian_clothing_spouse_trigger = yes
							OR = {
								portrait_gondorian_clothing_spouse_trigger = yes
								portrait_harondorim_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	gondorian_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gondorian_emperors
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						OR = {
							portrait_gondorian_clothing_trigger = yes
							portrait_harondorim_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							OR = {
								portrait_gondorian_clothing_spouse_trigger = yes
								portrait_harondorim_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	gondorian_wing_crown = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = unique_headgear
				range = { 0.30 0.31 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101 # always pick the HRE crown over the western one
				has_primary_title = title:e_gondor
			}
		}
	}
	
	castamiri_wing_crown = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = unique_headgear
				range = { 0.99 1.0 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101 # always pick the HRE crown over the western one
				has_primary_title = title:e_castamir
			}
		}
	}

	## Harondorim ##

	harondorim_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = harondorim_commoners
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_harondorim_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_harondorim_clothing_spouse_trigger = yes
			}
		}
	}

	harondorim_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = harondorim_counts
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_harondorim_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_harondorim_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	harondorim_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = harondorim_dukes
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_harondorim_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_harondorim_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	## Numenorean ##

	numenorean_commoners = {

		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = numenorean_commoners
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_numenorean_clothing_trigger = yes
				portrait_adunai_clothing_trigger = no
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_numenorean_clothing_spouse_trigger = yes
				portrait_adunai_clothing_spouse_trigger = no
			}
		}
	}

	numenorean_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = numenorean_counts
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						OR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_numenorean_clothing_trigger = yes
						portrait_adunai_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_numenorean_clothing_spouse_trigger = yes
							portrait_adunai_clothing_spouse_trigger = no
						}
					}
				}
			}
		}
	}

	numenorean_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = numenorean_dukes
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_numenorean_clothing_trigger = yes
						portrait_adunai_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_numenorean_clothing_spouse_trigger = yes
							portrait_adunai_clothing_spouse_trigger = no
						}
					}
				}
			}
		}
	}

	numenorean_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = numenorean_kings
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_numenorean_clothing_trigger = yes
						portrait_adunai_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_numenorean_clothing_spouse_trigger = yes
							portrait_adunai_clothing_spouse_trigger = no
						}
					}
				}
			}
		}
	}

	numenorean_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = numenorean_emperors
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_numenorean_clothing_trigger = yes
						portrait_adunai_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_numenorean_clothing_spouse_trigger = yes
							portrait_adunai_clothing_spouse_trigger = no
						}
					}
				}

			}
		}
	}


	## Northron ##

	northron_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northron_commoners
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_northron_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_northron_clothing_spouse_trigger = yes
			}
		}
	}

	northron_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northron_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_northron_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_northron_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	northron_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northron_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_northron_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_northron_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	northron_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northron_kings
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_northron_clothing_trigger = yes
						portrait_rohirrim_clothing_trigger = no
						portrait_vale_woodmen_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_northron_clothing_spouse_trigger = yes
							portrait_rohirrim_clothing_spouse_trigger = no
						}
					}
				}
			}
		}
	}

	northron_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = northron_emperors
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_northron_clothing_trigger = yes
						portrait_rohirrim_clothing_trigger = no
						portrait_vale_woodmen_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_northron_clothing_spouse_trigger = yes
							portrait_rohirrim_clothing_spouse_trigger = no
						}
					}
				}
			}
		}
	}

	## Rohirrim ##

	rohirrim_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = unique_headgear
				range = { 0.2 0.21 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier >= tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_rohirrim_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier >= tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_rohirrim_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	## Vale / Woodmen ##

	woodmen_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = woodmen_commoners
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_vale_woodmen_clothing_trigger = yes
			}
			modifier = {
				add = 41 # Slightly higher
				 highest_held_title_tier < tier_duchy
				 NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
				 	government_has_flag = government_is_republic
				 	AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_vale_woodmen_clothing_spouse_trigger = yes
			}
		}
	}

	woodmen_low_nobility = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = woodmen_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				highest_held_title_tier = tier_duchy
				NOR = {
					# has_dynasty = no
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_vale_woodmen_clothing_trigger = yes
			}
		}
	}
	
	woodmen_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = woodmen_kings
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 52 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_vale_woodmen_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_vale_woodmen_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}
	
	woodmen_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = woodmen_emperors
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				highest_held_title_tier = tier_empire
				NOR = {
					AND = { is_ruler = yes government_has_flag = government_is_mercenary  }
					government_has_flag = government_is_republic
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_vale_woodmen_clothing_trigger = yes
			}
		}
	}
	
	## Dalemen ##

	dalemen_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dale_commoners
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_dalemen_clothing_trigger = yes
			}
			modifier = {
				add = 41 # Slightly higher
				 highest_held_title_tier < tier_county
				 NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
				 	government_has_flag = government_is_republic
				 	AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_dalemen_clothing_spouse_trigger = yes
			}
		}
	}

	dalemen_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dale_counts
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				highest_held_title_tier = tier_county
				NOR = {
					# has_dynasty = no
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_dalemen_clothing_trigger = yes
			}
		}
	}
	
	dalemen_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dale_dukes
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				highest_held_title_tier = tier_duchy
				NOR = {
					# has_dynasty = no
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_dalemen_clothing_trigger = yes
			}
		}
	}
	
	dalemen_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dale_kings
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 52 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_dalemen_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_dalemen_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}
	
	dalemen_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dale_emperors
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				highest_held_title_tier = tier_empire
				NOR = {
					AND = { is_ruler = yes government_has_flag = government_is_mercenary  }
					government_has_flag = government_is_republic
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_dalemen_clothing_trigger = yes
			}
		}
	}
	
	## Dorwinionrim ##

	dorwinion_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dorwinion_commoners
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_dorwinion_clothing_trigger = yes
			}
			modifier = {
				add = 41 # Slightly higher
				 highest_held_title_tier < tier_county
				 NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
				 	government_has_flag = government_is_republic
				 	AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_dorwinion_clothing_spouse_trigger = yes
			}
		}
	}

	dorwinion_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dorwinion_counts
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				highest_held_title_tier = tier_county
				NOR = {
					# has_dynasty = no
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_dorwinion_clothing_trigger = yes
			}
		}
	}
	
	dorwinion_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dorwinion_dukes
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				highest_held_title_tier = tier_duchy
				NOR = {
					# has_dynasty = no
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_dorwinion_clothing_trigger = yes
			}
		}
	}
	
	dorwinion_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dorwinion_kings
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 52 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_dorwinion_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_dorwinion_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}
	
	dorwinion_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dorwinion_emperors
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				highest_held_title_tier = tier_empire
				NOR = {
					AND = { is_ruler = yes government_has_flag = government_is_mercenary  }
					government_has_flag = government_is_republic
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_dorwinion_clothing_trigger = yes
			}
		}
	}

	## Gwathiurim ##

	gwathiurim_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gwathiurim_commoners
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_gwathiurim_clothing_trigger = yes
			}
			modifier = {
				add = 41 # Slightly higher
				 highest_held_title_tier < tier_county
				 NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
				 	government_has_flag = government_is_republic
				 	AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_gwathiurim_clothing_spouse_trigger = yes
			}
		}
	}

	gwathiurim_low_nobility = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gwathiurim_low_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				highest_held_title_tier < tier_kingdom
				NOR = {
					# has_dynasty = no
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_gwathiurim_clothing_trigger = yes
			}
		}
	}
	
	gwathiurim_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gwathiurim_kings
				range = { 0 1 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 52 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_gwathiurim_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_gwathiurim_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}
	
	gwathiurim_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gwathiurim_emperors
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				highest_held_title_tier = tier_empire
				NOR = {
					AND = { is_ruler = yes government_has_flag = government_is_mercenary  }
					government_has_flag = government_is_republic
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_gwathiurim_clothing_trigger = yes
			}
		}
	}
	
	## Adunai ##

	adunai_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = adunai_commoners
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_adunai_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_adunai_clothing_spouse_trigger = yes
			}
		}
	}

	adunai_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = adunai_counts
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_adunai_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_adunai_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	adunai_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = adunai_dukes
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_adunai_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_adunai_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	adunai_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = adunai_kings
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_adunai_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_adunai_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	adunai_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = adunai_emperors
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_adunai_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_adunai_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	## Bellakari ##

	bellakari_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bellakari_commoners
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_bellakari_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_bellakari_clothing_spouse_trigger = yes
			}
		}
	}

	bellakari_counts_males = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bellakari_counts
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				is_male = yes
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_bellakari_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_bellakari_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	bellakari_counts_non_fp2_females = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bellakari_counts
				range = { 0 0.65 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				is_female = yes
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_bellakari_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_bellakari_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	bellakari_counts_fp2_females = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bellakari_counts
				range = { 0.7 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				is_female = yes
				has_dlc = "The Fate of Iberia"
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_bellakari_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_bellakari_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	bellakari_dukes_males = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bellakari_dukes
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				is_male = yes
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_bellakari_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier >= tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_bellakari_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	bellakari_dukes_non_fp2_females = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bellakari_dukes
				range = { 0 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				is_female = yes
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_bellakari_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier >= tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_bellakari_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	bellakari_dukes_fp2_females = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bellakari_dukes
				range = { 0.76 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				is_female = yes
				has_dlc = "The Fate of Iberia"
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_bellakari_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier >= tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_bellakari_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	bellakari_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bellakari_kings
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_bellakari_clothing_trigger = yes
					}
					#AND = {
					#	exists = primary_spouse
					#	OR = {
					#		is_ruler = no
					#		highest_held_title_tier = tier_barony
					#	}
					#	primary_spouse = {
					#		OR = {
					#			highest_held_title_tier = tier_kingdom
					#			AND = { is_ruler = yes government_has_flag = government_is_theocracy }
					#		}
					#		NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
					#		NOT = { government_has_flag = government_is_republic }
					#		portrait_bellakari_clothing_spouse_trigger = yes
					#	}
					#}
				}
			}
		}
	}

	bellakari_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bellakari_emperors
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_bellakari_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_bellakari_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	## Rayan ##

	rayan_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = rayan_commoners
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_rayan_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_rayan_clothing_spouse_trigger = yes
			}
		}
	}

	rayan_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = rayan_counts
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_rayan_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_rayan_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	rayan_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = rayan_dukes
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_rayan_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_rayan_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	rayan_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = rayan_kings
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_rayan_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_rayan_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	rayan_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = rayan_emperors
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_rayan_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_rayan_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	## Nafarati ##

	nafarati_high_nobility = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = nafarati_high_nobility
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier >= tier_duchy
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_nafarati_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier >= tier_duchy
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_nafarati_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	## North Haradrim ##

	north_haradrim_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = north_haradrim_commoners
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_north_haradrim_clothing_trigger = yes
				portrait_east_haradrim_clothing_trigger = no
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_north_haradrim_clothing_spouse_trigger = yes
				portrait_east_haradrim_clothing_spouse_trigger = no
			}
		}
	}

	north_haradrim_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = north_haradrim_counts
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_north_haradrim_clothing_trigger = yes
						portrait_east_haradrim_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_north_haradrim_clothing_spouse_trigger = yes
							portrait_east_haradrim_clothing_spouse_trigger = no
						}
					}
				}
			}
		}
	}

	north_haradrim_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = north_haradrim_dukes
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_north_haradrim_clothing_trigger = yes
						portrait_east_haradrim_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_north_haradrim_clothing_spouse_trigger = yes
							portrait_east_haradrim_clothing_spouse_trigger = no
						}
					}
				}
			}
		}
	}

	north_haradrim_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = north_haradrim_kings
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_north_haradrim_clothing_trigger = yes
						portrait_east_haradrim_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_north_haradrim_clothing_spouse_trigger = yes
							portrait_east_haradrim_clothing_spouse_trigger = no
						}
					}
				}
			}
		}
	}

	north_haradrim_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = north_haradrim_emperors
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_north_haradrim_clothing_trigger = yes
						portrait_east_haradrim_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_north_haradrim_clothing_spouse_trigger = yes
							portrait_east_haradrim_clothing_spouse_trigger = no
						}
					}
				}
			}
		}
	}

	## South Haradrim ##

	south_haradrim_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = south_haradrim_commoners
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_south_haradrim_clothing_trigger = yes
				portrait_east_haradrim_clothing_trigger = no
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_south_haradrim_clothing_spouse_trigger = yes
				portrait_east_haradrim_clothing_spouse_trigger = no
			}
		}
	}

	south_haradrim_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = south_haradrim_commoners
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_south_haradrim_clothing_trigger = yes
						portrait_east_haradrim_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_south_haradrim_clothing_spouse_trigger = yes
							portrait_east_haradrim_clothing_spouse_trigger = no
						}
					}
				}
			}
		}
	}

	south_haradrim_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = south_haradrim_dukes
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_south_haradrim_clothing_trigger = yes
						portrait_east_haradrim_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_south_haradrim_clothing_spouse_trigger = yes
							portrait_east_haradrim_clothing_spouse_trigger = no
						}
					}
				}
			}
		}
	}

	south_haradrim_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = south_haradrim_kings
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_south_haradrim_clothing_trigger = yes
						portrait_east_haradrim_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_south_haradrim_clothing_spouse_trigger = yes
							portrait_east_haradrim_clothing_spouse_trigger = no
						}
					}
				}
			}
		}
	}

	south_haradrim_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = south_haradrim_emperors
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_south_haradrim_clothing_trigger = yes
						portrait_east_haradrim_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_south_haradrim_clothing_spouse_trigger = yes
							portrait_east_haradrim_clothing_spouse_trigger = no
						}
					}
				}
			}
		}
	}

	## East Haradrim ##

	east_haradrim_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_haradrim_commoners
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 81
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_east_haradrim_clothing_trigger = yes
			}
			modifier = {
				add = 21
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_east_haradrim_clothing_spouse_trigger = yes
			}
		}
	}

	east_haradrim_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_haradrim_commoners
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_east_haradrim_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_east_haradrim_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	east_haradrim_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_haradrim_dukes
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_east_haradrim_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_east_haradrim_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	east_haradrim_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_haradrim_kings
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_east_haradrim_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_east_haradrim_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	east_haradrim_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = east_haradrim_emperors
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_east_haradrim_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_east_haradrim_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	## Variag ##

	variag_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = variag_commoners
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				OR = {
					portrait_variag_clothing_trigger = yes
					portrait_rhunnic_clothing_trigger = yes
				}
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				OR = {
					portrait_variag_clothing_spouse_trigger = yes
					portrait_rhunnic_clothing_spouse_trigger = yes
				}
			}
		}
	}

	variag_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = variag_commoners
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						OR = {
							portrait_variag_clothing_trigger = yes
							portrait_rhunnic_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							OR = {
								portrait_variag_clothing_spouse_trigger = yes
								portrait_rhunnic_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	variag_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = variag_dukes
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						OR = {
							portrait_variag_clothing_trigger = yes
							portrait_rhunnic_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							OR = {
								portrait_variag_clothing_spouse_trigger = yes
								portrait_rhunnic_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	variag_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = variag_kings
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						OR = {
							portrait_variag_clothing_trigger = yes
							portrait_rhunnic_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							OR = {
								portrait_variag_clothing_spouse_trigger = yes
								portrait_rhunnic_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	variag_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = variag_emperors
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						OR = {
							portrait_variag_clothing_trigger = yes
							portrait_rhunnic_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							OR = {
								portrait_variag_clothing_spouse_trigger = yes
								portrait_rhunnic_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}
	
	## Elves ##

	thranduil = {
		usage = game
		dna_modifiers = {
			accessory = {
				mode = add	
				gene = headgear
				template = unique_headgear
				range = { 0.0 0.01 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				exists = character:lineoforopher3 #Thranduil
				this = character:lineoforopher3 #Thranduil
			}
		}	
	}

	elven_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = elven_commoners
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 81
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_elven_clothing_trigger = yes
			}
			modifier = {
				add = 21
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_elven_clothing_spouse_trigger = yes
			}
		}
	}

	elven_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = elven_commoners
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_elven_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_elven_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	elven_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = elven_dukes
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_elven_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_elven_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	elven_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = elven_kings
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_elven_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_elven_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	elven_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = elven_emperors
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_elven_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_elven_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	## Nazgul ##

	nazgul = {
		usage = game
		dna_modifiers = {
			accessory = {
				mode = add		
				gene = headgear
				template = unique_headgear
				range = { 0.40 0.41 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 500
				has_trait = nazgul
			}
			modifier = {
				add = 2000
				exists = character:lineofsauron #Sauron
				this = character:lineofsauron #Sauron
				has_game_rule = crispy_sauron
			}
		}	
	}
	
	witchking = {
		usage = game
		dna_modifiers = {
			accessory = {
				mode = add		
				gene = headgear
				template = unique_headgear
				range = { 0.5 0.51 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_character_flag =  witchking
			}
		}	
	}
	
	khamul = {
		usage = game
		dna_modifiers = {
			accessory = {
				mode = add		
				gene = headgear
				template = unique_headgear
				range = { 0.6 0.61 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				exists = character:nazgul2 #Khamûl 2nd Nazgul "The Shadow of the East"
				this = character:nazgul2 #Khamûl 2nd Nazgul "The Shadow of the East"
			}
		}
	}
	
	goldenmask = {
		usage = game
		dna_modifiers = {
			accessory = {
				mode = add		
				gene = headgear
				template = unique_headgear
				range = { 0.7 0.71 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				exists = character:goldenking1 #Golden King
				this = character:goldenking1 #Golden King
			}
		}
	}
	
	## Sauron ##

	sauron = {
		usage = game
		dna_modifiers = {
			accessory = {
				mode = add	
				gene = headgear
				template = unique_headgear
				range = { 0.8 0.81 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_character_flag =  is_sauron
			}
		}	
	}

}
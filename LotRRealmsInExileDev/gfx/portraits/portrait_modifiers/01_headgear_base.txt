# Tags:
# rank_headgear: any headgear that signifies a certain title. crowns, pope hat etc.



headgear = {
	# interface_position = 1
	usage = game
	selection_behavior = weighted_random
	priority = 1
	
	## No Headgear ##

	no_headgear = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		
		weight = {
			## No headgear for children under 16 ## 
			base = 0
			modifier = {
				add = 1000
				age < 16
			}
			# No headgear for characters with an active Vow of Poverty
			modifier = {
				add = 100
				has_character_modifier = vow_of_poverty_modifier
				# Should still wear armor when going to war
				NOT = { portrait_wear_armor_trigger = yes }
			}
			modifier = { # Saruman no wear hat
				add = 1000
				exists = character:lineofsaruman
				this = character:lineofsaruman
			}
			modifier = { # Remove headgear to avoid clipping with disfigured iron mask
				add = 2000
				has_trait = disfigured
			}
			modifier = {
				add = 2000
				exists = character:lineofsauron #Sauron
				this = character:lineofsauron #Sauron
				has_game_rule = fair_sauron
			}
			modifier = { 
				add = 1000
				portrait_gondorian_clothing_trigger = yes
				exists = liege
                OR = {
					liege = { 
						primary_title = title:d_forithilien
					}
					liege = { 
						primary_title = title:d_laamp_rangers_of_ithilien
					}
				}
			}	
		}
	}
	
	## AFR ##

	mag_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mag_low_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_mag_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_mag_clothing_spouse_trigger = yes
			}
		}
	}

	mag_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mag_low_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_mag_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_mag_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	mag_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mag_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_mag_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_mag_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	mag_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mag_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_mag_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_mag_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	mag_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mag_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_mag_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_mag_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}
	
	japanese_suieikan = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = womaw_low_headgear
				range = { 0 1 }
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 150
				AND = {
					OR = {
						AND = {
							highest_held_title_tier >= tier_kingdom
							government_has_flag = government_is_feudal
						}
						AND = {
							exists = court_owner
							court_owner = {
								highest_held_title_tier >= tier_kingdom
								culture = { has_cultural_pillar = heritage_womaw }
							}
						}
						culture = { has_cultural_pillar = heritage_womaw }
					}
	                NOT = { portrait_wear_armor_trigger = yes }
					portrait_womaw_clothing_trigger = yes
					scope:age >= 16
				}
			}
		}
	}

	## Gondorian ##

	gondorian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gondorian_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_gondorian_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_gondorian_clothing_spouse_trigger = yes
			}
		}
	}

	gondorian_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gondorian_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_gondorian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_gondorian_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	gondorian_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gondorian_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_gondorian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_gondorian_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	gondorian_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gondorian_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						OR = {
							portrait_gondorian_clothing_trigger = yes
							portrait_harondorim_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_gondorian_clothing_spouse_trigger = yes
							OR = {
								portrait_gondorian_clothing_spouse_trigger = yes
								portrait_harondorim_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	gondorian_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = gondorian_high_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						OR = {
							portrait_gondorian_clothing_trigger = yes
							portrait_harondorim_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							OR = {
								portrait_gondorian_clothing_spouse_trigger = yes
								portrait_harondorim_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	gondorian_wing_crown = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = lotr_unique_headgear
				range = { 0.30 0.31 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101 # always pick the Crown of Gondor crown over the western one
				portrait_crown_of_gondor_trigger = yes
			}
		}
	}
	
	castamiri_wing_crown = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = lotr_unique_headgear
				range = { 0.99 1.0 }
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 102 # always pick the Gilded crown over the Silver one
				has_primary_title = title:e_castamir
			}
		}
	}

	## Harondorim ##

	harondorim_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = harondorim_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_harondorim_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_harondorim_clothing_spouse_trigger = yes
			}
		}
	}

	harondorim_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = harondorim_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_harondorim_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_harondorim_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	harondorim_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = harondorim_high_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_harondorim_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_harondorim_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	## Northron ##

	#northron_commoners = {
	#	dna_modifiers = {
	#		accessory = {
	#			mode = add
	#			gene = headgear
	#			template = northmen_low_headgear
	#			range = { 0 1 } # For the randomness to work correctly
	#		}
	#	}	
	#	weight = {
	#		base = 0
	#		modifier = {
	#			add = 80
	#			has_trait = peasant_leader
	#			OR = {
	#				is_ruler = no
	#				is_leading_faction_type = peasant_faction
	#				AND = {
	#					is_ruler = yes
	#					is_landed = no
	#					OR = {
	#						government_has_flag = government_is_feudal
	#						government_has_flag = government_is_clan
	#						
	#						government_has_flag = government_is_elven
	#						
	#					}
	#				}
	#			}
	#			portrait_northern_proxy_clothing_trigger = yes
	#		}
	#		modifier = {
	#			add = 20
	#			highest_held_title_tier < tier_county
	#			NOR = {
	#				AND = {
	#					exists = primary_spouse
	#					primary_spouse = {
	#						highest_held_title_tier > tier_county
	#					}
	#				}
	#				AND = {
	#					government_has_flag = government_is_republic
	#					primary_title.tier > 1
	#				}
	#				AND = { is_ruler = yes government_has_flag = government_is_theocracy }
	#			}
	#			portrait_northern_proxy_clothing_spouse_trigger = yes
	#		}
	#	}
	#}
	#
	#northron_counts = {
	#	dna_modifiers = {
	#		accessory = {
	#			mode = add
	#			gene = headgear
	#			template = northmen_high_headgear
	#			range = { 0.01 0.49 } # For the randomness to work correctly
	#		}
	#	}	
	#	weight = {
	#		base = 0
	#		modifier = {
	#			add = 50
	#			NAND = {
	#				has_trait = peasant_leader
	#				OR = {
	#					is_ruler = no
	#					is_leading_faction_type = peasant_faction
	#					AND = {
	#						is_ruler = yes
	#						is_landed = no
	#						OR = {
	#							government_has_flag = government_is_feudal
	#							government_has_flag = government_is_clan
	#							
	#							government_has_flag = government_is_elven
	#							
	#						}
	#					}
	#				}
	#			}
	#			OR = {
	#				AND = {
	#					highest_held_title_tier = tier_county
	#					NOR = {
	#						# has_dynasty = no
	#						AND = {
	#							government_has_flag = government_is_republic
	#							primary_title.tier > 1
	#						}
	#						AND = { is_ruler = yes government_has_flag = government_is_theocracy }
	#					}
	#					portrait_northern_proxy_clothing_trigger = yes
	#					portrait_rohirrim_clothing_trigger = no
	#					portrait_vale_woodmen_clothing_trigger = no
	#					portrait_dalemen_clothing_trigger = no						
	#				}
	#				AND = {
	#					exists = primary_spouse
	#					OR = {
	#						is_ruler = no
	#						highest_held_title_tier = tier_barony
	#					}
	#					primary_spouse = {
	#						highest_held_title_tier = tier_county
	#						NOR = {
	#							# has_dynasty = no
	#							AND = {
	#								government_has_flag = government_is_republic
	#								primary_title.tier > 1
	#							}
	#							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
	#						}
	#						portrait_northern_proxy_clothing_spouse_trigger = yes
	#						portrait_rohirrim_clothing_spouse_trigger = no
	#						portrait_vale_woodmen_clothing_spouse_trigger = no	
	#						portrait_dalemen_clothing_spouse_trigger = no								
	#					}
	#				}
	#			}
	#		}
	#	}
	#}
	#
	#northron_dukes = {
	#	dna_modifiers = {
	#		accessory = {
	#			mode = add
	#			gene = headgear
	#			template = northmen_high_headgear
	#			range = { 0.01 0.49 } # For the randomness to work correctly
	#		}
	#	}	
	#	weight = {
	#		base = 0
	#		modifier = {
	#			add = 50
	#			NAND = {
	#				has_trait = peasant_leader
	#				OR = {
	#					is_ruler = no
	#					is_leading_faction_type = peasant_faction
	#					AND = {
	#						is_ruler = yes
	#						is_landed = no
	#						OR = {
	#							government_has_flag = government_is_feudal
	#							government_has_flag = government_is_clan
	#							
	#							government_has_flag = government_is_elven
	#							
	#						}
	#					}
	#				}
	#			}
	#			OR = {
	#				AND = {
	#					OR = {
	#						highest_held_title_tier = tier_duchy
	#						AND = {
	#							government_has_flag = government_is_republic
	#							primary_title.tier > 2
	#						}
	#						AND = { is_ruler = yes government_has_flag = government_is_theocracy }
	#					}
	#					NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
	#					portrait_northern_proxy_clothing_trigger = yes
	#					portrait_rohirrim_clothing_trigger = no
	#					portrait_vale_woodmen_clothing_trigger = no
	#					portrait_dalemen_clothing_trigger = no
	#				}
	#				AND = {
	#					exists = primary_spouse
	#					OR = {
	#						is_ruler = no
	#						highest_held_title_tier = tier_barony
	#					}
	#					primary_spouse = {
	#						OR = {
	#							highest_held_title_tier = tier_duchy
	#							AND = {
	#								government_has_flag = government_is_republic
	#								primary_title.tier > 2
	#							}
	#							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
	#						}
	#						portrait_northern_proxy_clothing_spouse_trigger = yes
	#						portrait_rohirrim_clothing_spouse_trigger = no
	#						portrait_vale_woodmen_clothing_spouse_trigger = no	
	#						portrait_dalemen_clothing_spouse_trigger = no	
	#					}
	#				}
	#			}
	#		}
	#	}
	#}
	#
	#northron_kings = {
	#	dna_modifiers = {
	#		accessory = {
	#			mode = add
	#			gene = headgear
	#			template = northmen_high_headgear
	#			range = { 0.51 0.99 } # For the randomness to work correctly
	#		}
	#	}	
	#	weight = {
	#		base = 0
	#		modifier = {
	#			add = 50
	#			NAND = {
	#				has_trait = peasant_leader
	#				OR = {
	#					is_ruler = no
	#					is_leading_faction_type = peasant_faction
	#					AND = {
	#						is_ruler = yes
	#						is_landed = no
	#						OR = {
	#							government_has_flag = government_is_feudal
	#							government_has_flag = government_is_clan
	#							
	#							government_has_flag = government_is_elven
	#							
	#						}
	#					}
	#				}
	#			}
	#			OR = {
	#				AND = {
	#					OR = {
	#						highest_held_title_tier = tier_kingdom
	#						AND = { is_ruler = yes government_has_flag = government_is_theocracy }
	#					}
	#					NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
	#					NOT = { government_has_flag = government_is_republic }
	#					portrait_northern_proxy_clothing_trigger = yes
	#					portrait_rohirrim_clothing_trigger = no
	#					portrait_vale_woodmen_clothing_trigger = no
	#					portrait_dalemen_clothing_trigger = no						
	#				}
	#				AND = {
	#					exists = primary_spouse
	#					OR = {
	#						is_ruler = no
	#						highest_held_title_tier = tier_barony
	#					}
	#					primary_spouse = {
	#						OR = {
	#							highest_held_title_tier = tier_kingdom
	#							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
	#						}
	#						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
	#						NOT = { government_has_flag = government_is_republic }
	#						portrait_northern_proxy_clothing_spouse_trigger = yes
	#						portrait_rohirrim_clothing_spouse_trigger = no
	#						portrait_vale_woodmen_clothing_spouse_trigger = no	
	#						portrait_dalemen_clothing_spouse_trigger = no								
	#					}
	#				}
	#			}
	#		}
	#	}
	#}
	#
	#northron_emperors = {
	#	dna_modifiers = {
	#		accessory = {
	#			mode = add
	#			gene = headgear
	#			template = northmen_high_headgear
	#			range = { 0.51 0.99 } # For the randomness to work correctly
	#		}
	#	}	
	#	weight = {
	#		base = 0
	#		modifier = {
	#			add = 50
	#			NAND = {
	#				has_trait = peasant_leader
	#				OR = {
	#					is_ruler = no
	#					is_leading_faction_type = peasant_faction
	#					AND = {
	#						is_ruler = yes
	#						is_landed = no
	#						OR = {
	#							government_has_flag = government_is_feudal
	#							government_has_flag = government_is_clan
	#							
	#							government_has_flag = government_is_elven
	#							
	#						}
	#					}
	#				}
	#			}
	#			OR = {
	#				AND = {
	#					OR = {
	#						highest_held_title_tier = tier_empire
	#						AND = { is_ruler = yes government_has_flag = government_is_theocracy }
	#					}
	#					NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
	#					NOT = { government_has_flag = government_is_republic }
	#					portrait_northern_proxy_clothing_trigger = yes
	#				}
	#				AND = {
	#					exists = primary_spouse
	#					OR = {
	#						is_ruler = no
	#						highest_held_title_tier = tier_barony
	#					}
	#					primary_spouse = {
	#						OR = {
	#							highest_held_title_tier = tier_empire
	#							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
	#						}
	#						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
	#						NOT = { government_has_flag = government_is_republic }
	#						portrait_northern_proxy_clothing_spouse_trigger = yes
	#					}
	#				}
	#			}
	#		}
	#	}
	#}

	## Rohirrim ##

	rohirrim_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = rohirrim_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_rohirrim_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_rohirrim_clothing_spouse_trigger = yes
			}
		}
	}
	
	rohirrim_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = rohirrim_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_rohirrim_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_rohirrim_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}
	
	rohirrim_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = rohirrim_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_rohirrim_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_rohirrim_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	rohirrim_kings_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = rohirrim_high_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier >= tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_rohirrim_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier >= tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_rohirrim_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	## Gwathiurim ##

	gwathiurim_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dunlending_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_gwathiurim_clothing_trigger = yes
				NOT = {
					culture = {
						has_cultural_pillar = heritage_danan_lin
					}
				}						
			}
			modifier = {
				add = 41 # Slightly higher
				 highest_held_title_tier < tier_county
				 NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
				 	government_has_flag = government_is_republic
				 	AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_gwathiurim_clothing_spouse_trigger = yes
				NOT = {
					culture = {
						has_cultural_pillar = heritage_danan_lin
					}
				}						
			}
		}
	}

	gwathiurim_low_nobility = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dunlending_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				highest_held_title_tier = tier_duchy
				NOR = {
					# has_dynasty = no
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_gwathiurim_clothing_trigger = yes
				NOT = {
					culture = {
						has_cultural_pillar = heritage_danan_lin
					}
				}						
			}
		}
	}
	
	gwathiurim_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dunlending_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 52 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_gwathiurim_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_gwathiurim_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}
	
	gwathiurim_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dunlending_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				highest_held_title_tier = tier_empire
				NOR = {
					AND = { is_ruler = yes government_has_flag = government_is_mercenary  }
					government_has_flag = government_is_republic
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_gwathiurim_clothing_trigger = yes
			}
		}
	}	

	## Vale / Woodmen ##

	woodmen_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = woodmen_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_vale_woodmen_clothing_trigger = yes
			}
			modifier = {
				add = 41 # Slightly higher
				 highest_held_title_tier < tier_duchy
				 NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
				 	government_has_flag = government_is_republic
				 	AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_vale_woodmen_clothing_spouse_trigger = yes
			}
		}
	}

	woodmen_low_nobility = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = woodmen_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				highest_held_title_tier = tier_duchy
				NOR = {
					# has_dynasty = no
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_vale_woodmen_clothing_trigger = yes
			}
		}
	}
	
	woodmen_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = woodmen_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 52 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_vale_woodmen_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_vale_woodmen_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}
	
	woodmen_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = woodmen_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				highest_held_title_tier = tier_empire
				NOR = {
					AND = { is_ruler = yes government_has_flag = government_is_mercenary  }
					government_has_flag = government_is_republic
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_vale_woodmen_clothing_trigger = yes
			}
		}
	}
	
	## Dalemen ##

	dalemen_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dale_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_dalemen_clothing_trigger = yes
			}
			modifier = {
				add = 71 # Slightly higher
				 highest_held_title_tier < tier_county
				 NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
				 	government_has_flag = government_is_republic
				 	AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_dalemen_clothing_spouse_trigger = yes
			}
		}
	}

	dalemen_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dale_high_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				highest_held_title_tier = tier_county
				NOR = {
					# has_dynasty = no
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_dalemen_clothing_trigger = yes
			}
		}
	}
	
	dalemen_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dale_high_headgear
				range = { 0.26 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 72 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				highest_held_title_tier = tier_duchy
				NOR = {
					# has_dynasty = no
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_dalemen_clothing_trigger = yes
			}
		}
	}
	
	dalemen_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dale_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 72 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_dalemen_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_dalemen_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}
	
	dalemen_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dale_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				highest_held_title_tier = tier_empire
				NOR = {
					AND = { is_ruler = yes government_has_flag = government_is_mercenary  }
					government_has_flag = government_is_republic
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_dalemen_clothing_trigger = yes
			}
		}
	}
	
	## Dorwinionrim ##

	dorwinion_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dorwinion_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_dorwinion_clothing_trigger = yes
			}
			modifier = {
				add = 41 # Slightly higher
				 highest_held_title_tier < tier_county
				 NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
				 	government_has_flag = government_is_republic
				 	AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_dorwinion_clothing_spouse_trigger = yes
			}
		}
	}

	dorwinion_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dorwinion_high_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				highest_held_title_tier = tier_county
				NOR = {
					# has_dynasty = no
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_dorwinion_clothing_trigger = yes
			}
		}
	}
	
	dorwinion_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dorwinion_high_headgear
				range = { 0.26 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				highest_held_title_tier = tier_duchy
				NOR = {
					# has_dynasty = no
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_dorwinion_clothing_trigger = yes
			}
		}
	}
	
	dorwinion_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dorwinion_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}		
		weight = {
			base = 0
			modifier = {
				add = 52 # Slightly higher
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_dorwinion_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_dorwinion_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}
	
	dorwinion_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dorwinion_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 101
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				highest_held_title_tier = tier_empire
				NOR = {
					AND = { is_ruler = yes government_has_flag = government_is_mercenary  }
					government_has_flag = government_is_republic
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_dorwinion_clothing_trigger = yes
			}
		}
	}
	
	## Bellakari ##

	bellakari_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bellakari_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_bellakari_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_bellakari_clothing_spouse_trigger = yes
			}
		}
	}

	bellakari_counts_males = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bellakari_high_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				is_male = yes
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_bellakari_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_bellakari_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	bellakari_counts_females = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bellakari_high_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				is_female = yes
				has_dlc = "The Fate of Iberia"
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_bellakari_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_bellakari_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	bellakari_dukes_males = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bellakari_high_headgear
				range = { 0.26 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				is_male = yes
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_bellakari_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier >= tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_bellakari_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	bellakari_dukes_females = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bellakari_high_headgear
				range = { 0.26 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				is_female = yes
				has_dlc = "The Fate of Iberia"
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_bellakari_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier >= tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_bellakari_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	bellakari_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bellakari_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_bellakari_clothing_trigger = yes
					}
					#AND = {
					#	exists = primary_spouse
					#	OR = {
					#		is_ruler = no
					#		highest_held_title_tier = tier_barony
					#	}
					#	primary_spouse = {
					#		OR = {
					#			highest_held_title_tier = tier_kingdom
					#			AND = { is_ruler = yes government_has_flag = government_is_theocracy }
					#		}
					#		NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
					#		NOT = { government_has_flag = government_is_republic }
					#		portrait_bellakari_clothing_spouse_trigger = yes
					#	}
					#}
				}
			}
		}
	}

	bellakari_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = bellakari_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_bellakari_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_bellakari_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	## Rayan ##

	rayan_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = rayan_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_rayan_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_rayan_clothing_spouse_trigger = yes
			}
			modifier = {
				add = 100
 				portrait_rayan_clothing_trigger = yes
				culture = {
					OR = {
						has_cultural_pillar = ethos_bellicose
						has_cultural_pillar = ethos_stoic						
					}
				}							
			}
			modifier = {
				add = 100
 				portrait_nafarati_clothing_trigger = yes
				culture = {
					AND = {
						has_cultural_pillar = heritage_tulwangi
						has_cultural_pillar = ethos_communal						
					}
				}							
			}						
		}
	}

	rayan_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = rayan_high_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_rayan_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_rayan_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	rayan_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = rayan_high_headgear
				range = { 0.26 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_rayan_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_rayan_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	rayan_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = rayan_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_rayan_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_rayan_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	rayan_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = rayan_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_rayan_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_rayan_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	## Sirayni ##

	sirayni_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sirayni_low_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				OR = {
					portrait_sirayni_clothing_trigger = yes
				}
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				OR = {
					portrait_sirayni_clothing_spouse_trigger = yes
				}
			}
		}
	}

	sirayni_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sirayni_low_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						OR = {
							portrait_sirayni_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							OR = {
								portrait_sirayni_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	sirayni_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sirayni_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						OR = {
							portrait_sirayni_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							OR = {
								portrait_sirayni_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	sirayni_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sirayni_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						OR = {
							portrait_sirayni_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							OR = {
								portrait_sirayni_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	sirayni_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = sirayni_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						OR = {
							portrait_sirayni_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							OR = {
								portrait_sirayni_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}	

	## North Haradrim ##

	north_haradrim_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = haradrim_low_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_north_haradrim_clothing_trigger = yes
				portrait_east_haradrim_clothing_trigger = no
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_north_haradrim_clothing_spouse_trigger = yes
				portrait_east_haradrim_clothing_spouse_trigger = no
			}
		}
	}

	north_haradrim_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = haradrim_high_headgear
				range = { 0.01 0.09 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_north_haradrim_clothing_trigger = yes
						portrait_east_haradrim_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_north_haradrim_clothing_spouse_trigger = yes
							portrait_east_haradrim_clothing_spouse_trigger = no
						}
					}
				}
			}
		}
	}

	north_haradrim_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = haradrim_high_headgear
				range = { 0.11 0.19 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_north_haradrim_clothing_trigger = yes
						portrait_east_haradrim_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_north_haradrim_clothing_spouse_trigger = yes
							portrait_east_haradrim_clothing_spouse_trigger = no
						}
					}
				}
			}
		}
	}

	north_haradrim_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = haradrim_high_headgear
				range = { 0.21 0.29 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_north_haradrim_clothing_trigger = yes
						portrait_east_haradrim_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_north_haradrim_clothing_spouse_trigger = yes
							portrait_east_haradrim_clothing_spouse_trigger = no
						}
					}
				}
			}
		}
	}

	north_haradrim_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = haradrim_high_headgear
				range = { 0.31 0.39 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_north_haradrim_clothing_trigger = yes
						portrait_east_haradrim_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_north_haradrim_clothing_spouse_trigger = yes
							portrait_east_haradrim_clothing_spouse_trigger = no
						}
					}
				}
			}
		}
	}

	## South Haradrim ##

	south_haradrim_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = haradrim_low_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_south_haradrim_clothing_trigger = yes
				portrait_east_haradrim_clothing_trigger = no
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_south_haradrim_clothing_spouse_trigger = yes
				portrait_east_haradrim_clothing_spouse_trigger = no
			}
			modifier = {
				add = -56 # Slightly lower if north african is valid
				portrait_commoner_clothing_trigger = { 
					CULTURE_INPUT = afr_berber
				}
			}
		}
	}

	south_haradrim_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = haradrim_low_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_south_haradrim_clothing_trigger = yes
						portrait_east_haradrim_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_south_haradrim_clothing_spouse_trigger = yes
							portrait_east_haradrim_clothing_spouse_trigger = no
						}
					}
				}
			}
			modifier = {
				add = -36 # Slightly lower if north african is valid
				portrait_commoner_clothing_trigger = { 
					CULTURE_INPUT = afr_berber
				}
			}
		}
	}

	south_haradrim_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = haradrim_high_headgear
				range = { 0.41 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_south_haradrim_clothing_trigger = yes
						portrait_east_haradrim_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_south_haradrim_clothing_spouse_trigger = yes
							portrait_east_haradrim_clothing_spouse_trigger = no
						}
					}
				}
			}
			modifier = {
				add = -36 # Slightly lower if north african is valid
				portrait_commoner_clothing_trigger = { 
					CULTURE_INPUT = afr_berber
				}
			}
		}
	}

	south_haradrim_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = haradrim_high_headgear
				range = { 0.51 0.59 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_south_haradrim_clothing_trigger = yes
						portrait_east_haradrim_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_south_haradrim_clothing_spouse_trigger = yes
							portrait_east_haradrim_clothing_spouse_trigger = no
						}
					}
				}
			}
			modifier = {
				add = -36 # Slightly lower if north african is valid
				portrait_commoner_clothing_trigger = { 
					CULTURE_INPUT = afr_berber
				}
			}
		}
	}

	south_haradrim_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = haradrim_high_headgear
				range = { 0.61 0.69 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_south_haradrim_clothing_trigger = yes
						portrait_east_haradrim_clothing_trigger = no
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_south_haradrim_clothing_spouse_trigger = yes
							portrait_east_haradrim_clothing_spouse_trigger = no
						}
					}
				}
			}
			modifier = {
				add = -36 # Slightly lower if north african is valid
				portrait_commoner_clothing_trigger = { 
					CULTURE_INPUT = afr_berber
				}
			}
		}
	}

	## East Haradrim ##

	east_haradrim_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = haradrim_low_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 81
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_east_haradrim_clothing_trigger = yes
			}
			modifier = {
				add = 21
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_east_haradrim_clothing_spouse_trigger = yes
			}
		}
	}

	east_haradrim_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = haradrim_low_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_east_haradrim_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_east_haradrim_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	east_haradrim_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = haradrim_high_headgear
				range = { 0.71 0.79 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_east_haradrim_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_east_haradrim_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	east_haradrim_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = haradrim_high_headgear
				range = { 0.81 0.89 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_east_haradrim_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_east_haradrim_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	east_haradrim_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = haradrim_high_headgear
				range = { 0.91 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_east_haradrim_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_east_haradrim_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}


	## Nafarati ##

	nafarati_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = nafarati_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_nafarati_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_nafarati_clothing_spouse_trigger = yes
			}
			modifier = {
				add = -56 # Slightly lower if north african is valid
				portrait_commoner_clothing_trigger = { 
					CULTURE_INPUT = afr_berber
				}
			}
		}
	}

	nafarati_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = nafarati_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_nafarati_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_nafarati_clothing_spouse_trigger = yes
						}
					}
				}
			}
			modifier = {
				add = -36 # Slightly lower if north african is valid
				portrait_commoner_clothing_trigger = { 
					CULTURE_INPUT = afr_berber
				}
			}
		}
	}

	nafarati_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = nafarati_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0 
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_nafarati_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_nafarati_clothing_spouse_trigger = yes
						}
					}
				}
			}
			modifier = {
				add = -36 # Slightly lower if north african is valid
				portrait_commoner_clothing_trigger = { 
					CULTURE_INPUT = afr_berber
				}
			}
		}
	}

	nafarati_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = nafarati_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_nafarati_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_nafarati_clothing_spouse_trigger = yes
						}
					}
				}
			}
			modifier = {
				add = -36 # Slightly lower if north african is valid
				portrait_commoner_clothing_trigger = { 
					CULTURE_INPUT = afr_berber
				}
			}
		}
	}

	nafarati_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = nafarati_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_nafarati_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_nafarati_clothing_spouse_trigger = yes
						}
					}
				}
			}
			modifier = {
				add = -36 # Slightly lower if north african is valid
				portrait_commoner_clothing_trigger = { 
					CULTURE_INPUT = afr_berber
				}
			}
		}
	}
	
	## Mumakani ##

	mumakani_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mumakani_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_kirani_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_kirani_clothing_spouse_trigger = yes
			}
		}
	}

	mumakani_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = nafarati_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_kirani_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_kirani_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	mumakani_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mumakani_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0 
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_kirani_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_kirani_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	mumakani_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mumakani_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_kirani_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_kirani_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	mumakani_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = mumakani_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_kirani_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_kirani_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}	

	## Variag ##

	variag_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = variag_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				OR = {
					portrait_variag_clothing_trigger = yes
				}
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				OR = {
					portrait_variag_clothing_spouse_trigger = yes
				}
			}
		}
	}

	variag_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = variag_high_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						OR = {
							portrait_variag_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							OR = {
								portrait_variag_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	variag_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = variag_high_headgear
				range = { 0.26 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						OR = {
							portrait_variag_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							OR = {
								portrait_variag_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	variag_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = variag_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						OR = {
							portrait_variag_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							OR = {
								portrait_variag_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	variag_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = variag_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						OR = {
							portrait_variag_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							OR = {
								portrait_variag_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}
	
	## Nurniag ##

	nurniag_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = nurniag_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
                portrait_variag_clothing_trigger = yes
				culture = {
					AND = {
						has_cultural_pillar = heritage_ioriag
						has_cultural_pillar = ethos_bureaucratic
					}
				}				
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
                portrait_variag_clothing_trigger = yes
				culture = {
					AND = {
						has_cultural_pillar = heritage_ioriag
						has_cultural_pillar = ethos_bureaucratic
					}
				}			
			}
		}
	}

	nurniag_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = nurniag_high_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_variag_clothing_trigger = yes
						culture = {
							AND = {
								has_cultural_pillar = heritage_ioriag
								has_cultural_pillar = ethos_bureaucratic
							}
						}			
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_variag_clothing_trigger = yes
							culture = {
								AND = {
									has_cultural_pillar = heritage_ioriag
									has_cultural_pillar = ethos_bureaucratic
								}
							}			
						}
					}
				}
			}
		}
	}

	nurniag_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = nurniag_high_headgear
				range = { 0.26 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_variag_clothing_trigger = yes
						culture = {
							AND = {
								has_cultural_pillar = heritage_ioriag
								has_cultural_pillar = ethos_bureaucratic
							}
						}			
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_variag_clothing_trigger = yes
							culture = {
								AND = {
									has_cultural_pillar = heritage_ioriag
									has_cultural_pillar = ethos_bureaucratic
								}
							}			
						}
					}
				}
			}
		}
	}

	nurniag_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = nurniag_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_variag_clothing_trigger = yes
						culture = {
							AND = {
								has_cultural_pillar = heritage_ioriag
								has_cultural_pillar = ethos_bureaucratic
							}
						}			
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_variag_clothing_trigger = yes
							culture = {
								AND = {
									has_cultural_pillar = heritage_ioriag
									has_cultural_pillar = ethos_bureaucratic
								}
							}			
						}
					}
				}
			}
		}
	}

	nurniag_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = nurniag_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_variag_clothing_trigger = yes
						culture = {
							AND = {
								has_cultural_pillar = heritage_ioriag
								has_cultural_pillar = ethos_bureaucratic
							}
						}			
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_variag_clothing_trigger = yes
							culture = {
								AND = {
									has_cultural_pillar = heritage_ioriag
									has_cultural_pillar = ethos_bureaucratic
								}
							}			
						}
					}
				}
			}
		}
	}

	## Khyan ##

	khyan_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = khyan_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				OR = {
					portrait_khailuza_clothing_trigger = yes
				}
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				OR = {
					portrait_khailuza_clothing_spouse_trigger = yes
				}
			}
		}
	}

	khyan_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = khyan_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						OR = {
							portrait_khailuza_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							OR = {
								portrait_khailuza_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	khyan_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = khyan_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						OR = {
							portrait_khailuza_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							OR = {
								portrait_khailuza_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	khyan_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = khyan_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						OR = {
							portrait_khailuza_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							OR = {
								portrait_khailuza_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	khyan_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = khyan_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						OR = {
							portrait_khailuza_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							OR = {
								portrait_khailuza_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	## Muranian ##

	muranian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = muranian_low_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				OR = {
					portrait_muranian_clothing_trigger = yes
				}
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				OR = {
					portrait_muranian_clothing_spouse_trigger = yes
				}
			}
		}
	}

	muranian_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = muranian_low_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						OR = {
							portrait_muranian_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							OR = {
								portrait_muranian_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	muranian_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = muranian_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						OR = {
							portrait_muranian_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							OR = {
								portrait_muranian_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	muranian_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = muranian_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						OR = {
							portrait_muranian_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							OR = {
								portrait_muranian_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}

	muranian_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = muranian_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						OR = {
							portrait_muranian_clothing_trigger = yes
						}
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							OR = {
								portrait_muranian_clothing_spouse_trigger = yes
							}
						}
					}
				}
			}
		}
	}		

	## Rhunnic ##

	rhunnic_igath_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = igath_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_rhunnic_clothing_trigger = yes
				culture = {
					AND = {
						has_cultural_pillar = heritage_igath
					}
				}
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_kingdom
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_rhunnic_clothing_spouse_trigger = yes
				culture = {
					AND = {
						has_cultural_pillar = heritage_igath
					}
				}
			}
		}
	}
	
	rhunnic_ioriag_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ioriag_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_rhunnic_clothing_trigger = yes
				culture = {
					AND = {
						has_cultural_pillar = heritage_ioriag
					}
				}
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_kingdom
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_rhunnic_clothing_spouse_trigger = yes
				culture = {
					AND = {
						has_cultural_pillar = heritage_ioriag
					}
				}
			}
		}
	}
		
	rhunnic_magriag_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = magriag_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 81
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_rhunnic_clothing_trigger = yes
				culture = {
					AND = {
						has_cultural_pillar = ethos_egalitarian
						has_cultural_pillar = heritage_ioriag
					}
				}
			}
			modifier = {
				add = 21
				highest_held_title_tier < tier_kingdom
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_rhunnic_clothing_spouse_trigger = yes
				culture = {
					AND = {
						has_cultural_pillar = ethos_egalitarian
						has_cultural_pillar = heritage_ioriag
					}
				}
			}
		}
	}
	
	rhunnic_igath_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = igath_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier > tier_county
						OR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_rhunnic_clothing_trigger = yes
						culture = {
							AND = {
								has_cultural_pillar = heritage_igath
							}
						}						
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_rhunnic_clothing_spouse_trigger = yes
							culture = {
								AND = {
									has_cultural_pillar = heritage_igath
								}
							}							
						}
					}
				}
			}
		}
	}	

	rhunnic_ioriag_nobles = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ioriag_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier > tier_county
						OR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_rhunnic_clothing_trigger = yes
						culture = {
							AND = {
								has_cultural_pillar = heritage_ioriag
							}
						}						
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_rhunnic_clothing_spouse_trigger = yes
							culture = {
								AND = {
									has_cultural_pillar = heritage_ioriag
								}
							}							
						}
					}
				}
			}
		}
	}	

	rhunnic_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ioriag_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_rhunnic_clothing_trigger = yes
						culture = { has_cultural_pillar = ethos_bellicose }
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_rhunnic_clothing_spouse_trigger = yes
							culture = { has_cultural_pillar = ethos_bellicose }
						}
					}
				}
			}
		}
	}

	rhunnic_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = ioriag_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_rhunnic_clothing_trigger = yes
						culture = { has_cultural_pillar = ethos_bellicose }
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_rhunnic_clothing_trigger = yes
							culture = { has_cultural_pillar = ethos_bellicose }
						}
					}
				}
			}
		}
	}

	## Elves ##

	thranduil = {
		usage = game
		dna_modifiers = {
			accessory = {
				mode = add	
				gene = headgear
				template = lotr_unique_headgear
				range = { 0.0 0.01 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				exists = character:lineoforopher3 #Thranduil
				this = character:lineoforopher3 #Thranduil
			}
		}	
	}

	elven_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = elven_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 81
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_elven_clothing_trigger = yes
			}
			modifier = {
				add = 21
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_elven_clothing_spouse_trigger = yes
			}
		}
	}

	elven_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = elven_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_elven_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_elven_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	elven_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = elven_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_elven_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_elven_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	elven_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = elven_high_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_elven_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_elven_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	elven_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = elven_high_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 51
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_elven_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_elven_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	## Nazgul ##

	nazgul = {
		usage = game
		dna_modifiers = {
			accessory = {
				mode = add		
				gene = headgear
				template = lotr_unique_headgear
				range = { 0.40 0.41 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 500
				has_trait = nazgul
			}
			modifier = {
				add = 2000
				exists = character:lineofsauron #Sauron
				this = character:lineofsauron #Sauron
				has_game_rule = crispy_sauron
			}
			modifier = {
				add = 2000
				exists = character:lineofsauron #Sauron
				this = character:lineofsauron #Sauron
				has_character_flag = unknown_sauron_flag
			}
		}	
	}
	
	witchking = {
		usage = game
		dna_modifiers = {
			accessory = {
				mode = add		
				gene = headgear
				template = lotr_unique_headgear
				range = { 0.5 0.51 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_character_flag =  witchking
			}
		}	
	}
	
	khamul = {
		usage = game
		dna_modifiers = {
			accessory = {
				mode = add		
				gene = headgear
				template = lotr_unique_headgear
				range = { 0.6 0.61 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				exists = character:nazgul2 #Khamûl 2nd Nazgul "The Shadow of the East"
				this = character:nazgul2 #Khamûl 2nd Nazgul "The Shadow of the East"
			}
		}
	}
	
	goldenmask = {
		usage = game
		dna_modifiers = {
			accessory = {
				mode = add		
				gene = headgear
				template = lotr_unique_headgear
				range = { 0.7 0.71 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				exists = character:nazgul3 #Golden King
				this = character:nazgul3 #Golden King
			}
		}
	}
	
	## Sauron ##

	sauron = {
		usage = game
		dna_modifiers = {
			accessory = {
				mode = add	
				gene = headgear
				template = lotr_unique_headgear
				range = { 0.8 0.81 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_character_flag =  is_sauron
			}
		}	
	}
	
	#DWARVES#
	
	dwarf_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dwarf_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_dwarf_clothing_trigger = yes
			}
			modifier = {
				add = 41 # Slightly higher
				 highest_held_title_tier < tier_duchy
				 NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
				 	government_has_flag = government_is_republic
				 	AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_dwarf_clothing_spouse_trigger = yes
			}
		}
	}

	dwarf_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dwarf_high_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_dwarf_clothing_trigger = yes
			}
			modifier = {
				add = 41 # Slightly higher
				 highest_held_title_tier = tier_duchy
				 NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier = tier_county
						}
					}
				 	government_has_flag = government_is_republic
				 	AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_dwarf_clothing_spouse_trigger = yes
			}
		}
	}

	##add triggers for blacklock dukes and kings/emperors

	dwarf_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dwarf_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_dwarf_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_dwarf_clothing_trigger = yes
						}
					}
				}
			}
		}
	}
	
	dwarf_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = dwarf_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 100
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_dwarf_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_dwarf_clothing_trigger = yes
						}
					}
				}
			}
		}
	}
	##Hobbits##
		hobbit_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = hobbit_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 0
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_hobbit_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_hobbit_clothing_spouse_trigger = yes
			}
		}
	}
	
	##Circumpolar##
	circumpolar_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = circumpolar_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 0
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_circumpolar_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_circumpolar_clothing_spouse_trigger = yes
			}
		}
	}
	
	circumpolar_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = circumpolar_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						OR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_circumpolar_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_circumpolar_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	circumpolar_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = circumpolar_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_circumpolar_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_circumpolar_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	circumpolar_kings_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = circumpolar_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier >= tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_circumpolar_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_circumpolar_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}
	
	##Angmarrim##
	angmarrim_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = angmarrim_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 0
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_angmarrim_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_angmarrim_clothing_spouse_trigger = yes
			}
		}
	}
	
	angmarrim_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = angmarrim_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						OR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_angmarrim_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_angmarrim_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	angmarrim_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = angmarrim_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_angmarrim_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_angmarrim_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	angmarrim_kings_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = angmarrim_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier >= tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_angmarrim_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_angmarrim_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}	

	## Numenorean ##

	numenorean_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = numenorean_low_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_numenorean_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_numenorean_clothing_spouse_trigger = yes
			}
		}
	}

	numenorean_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = numenorean_low_headgear
				range = { 0.51 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						OR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_numenorean_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_numenorean_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	numenorean_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = numenorean_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_numenorean_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_numenorean_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	numenorean_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = numenorean_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_numenorean_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_numenorean_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	numenorean_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = numenorean_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_numenorean_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_numenorean_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}

	## Anbalukkhori ##

	anbalukkhori_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = anbalukkhori_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_anbalukkhori_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_anbalukkhori_clothing_spouse_trigger = yes
			}
		}
	}

	anbalukkhori_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = anbalukkhori_high_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_anbalukkhori_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_anbalukkhori_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	anbalukkhori_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = anbalukkhori_high_headgear
				range = { 0.26 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_anbalukkhori_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_anbalukkhori_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	anbalukkhori_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = anbalukkhori_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_anbalukkhori_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_anbalukkhori_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	anbalukkhori_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = anbalukkhori_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_anbalukkhori_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_anbalukkhori_clothing_spouse_trigger = yes
						}
					}
				}

			}
		}
	}
	
	## Umbar ##

	umbar_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = umbar_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_umbar_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_umbar_clothing_spouse_trigger = yes
			}
		}
	}

	umbar_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = umbar_high_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_umbar_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_umbar_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	umbar_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = umbar_high_headgear
				range = { 0.26 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_umbar_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_umbar_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	umbar_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = umbar_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_umbar_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_umbar_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	umbar_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = umbar_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_umbar_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_umbar_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}
	
	## Thani_Hazad ##

	thani_hazad_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = thani_hazad_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_thani_hazad_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_thani_hazad_clothing_spouse_trigger = yes
			}
		}
	}

	thani_hazad_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = thani_hazad_high_headgear
				range = { 0.01 0.24 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_thani_hazad_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_thani_hazad_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	thani_hazad_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = thani_hazad_high_headgear
				range = { 0.26 0.49 } # For the randomness to work correctly
			}
		}			
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_thani_hazad_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_thani_hazad_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	thani_hazad_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = thani_hazad_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_thani_hazad_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_thani_hazad_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	thani_hazad_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = thani_hazad_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_thani_hazad_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_thani_hazad_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}
	
	##Arnorian##

	arnorian_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = arnorian_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_arnorian_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_arnorian_clothing_spouse_trigger = yes
			}
		}
	}

	arnorian_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = arnorian_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_arnorian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_arnorian_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	arnorian_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = arnorian_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_arnorian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_arnorian_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	arnorian_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = arnorian_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_arnorian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_arnorian_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	arnorian_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = arnorian_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_arnorian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_arnorian_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}
	
	##Uialdain##
	
	uialdain_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = uialdain_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_arnorian_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_arnorian_clothing_spouse_trigger = yes
			}
		}
	}

	uialdain_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = uialdain_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_arnorian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_arnorian_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	uialdain_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = uialdain_high_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_arnorian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_arnorian_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	uialdain_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = arnorian_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_arnorian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_arnorian_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}

	uialdain_emperors = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = arnorian_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_empire
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_arnorian_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_empire
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_arnorian_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}
	
	## Pel ##

	pel_commoners = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = pel_low_headgear
				range = { 0 1 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 80
				has_trait = peasant_leader
				OR = {
					is_ruler = no
					is_leading_faction_type = peasant_faction
					AND = {
						is_ruler = yes
						is_landed = no
						OR = {
							government_has_flag = government_is_feudal
							government_has_flag = government_is_clan
							
							government_has_flag = government_is_elven
							
						}
					}
				}
				portrait_pel_clothing_trigger = yes
			}
			modifier = {
				add = 20
				highest_held_title_tier < tier_county
				NOR = {
					AND = {
						exists = primary_spouse
						primary_spouse = {
							highest_held_title_tier > tier_county
						}
					}
					AND = {
						government_has_flag = government_is_republic
						primary_title.tier > 1
					}
					AND = { is_ruler = yes government_has_flag = government_is_theocracy }
				}
				portrait_pel_clothing_spouse_trigger = yes
			}
			#modifier = {
			#	add = -56 # Slightly lower if north african is valid
			#	portrait_commoner_clothing_trigger = { 
			#		CULTURE_INPUT = 
			#	}
			#}
		}
	}

	pel_counts = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = pel_high_headgear
				range = { 0.01 0.49 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						highest_held_title_tier = tier_county
						NOR = {
							# has_dynasty = no
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 1
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						portrait_pel_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							highest_held_title_tier = tier_county
							NOR = {
								# has_dynasty = no
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 1
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_pel_clothing_spouse_trigger = yes
						}
					}
				}
			}
			#modifier = {
			#	add = -36 # Slightly lower if north african is valid
			#	portrait_commoner_clothing_trigger = { 
			#		CULTURE_INPUT = 
			#	}
			#}
		}
	}

	pel_dukes = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = pel_high_headgear
				range = { 0.51 0.74 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_duchy
							AND = {
								government_has_flag = government_is_republic
								primary_title.tier > 2
							}
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						portrait_pel_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_duchy
								AND = {
									government_has_flag = government_is_republic
									primary_title.tier > 2
								}
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							portrait_pel_clothing_spouse_trigger = yes
						}
					}
				}
			}
			#modifier = {
			#	add = -36 # Slightly lower if north african is valid
			#	portrait_commoner_clothing_trigger = { 
			#		CULTURE_INPUT = 
			#	}
			#}
		}
	}
	
	pel_kings = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = headgear
				template = pel_high_headgear
				range = { 0.76 0.99 } # For the randomness to work correctly
			}
		}	
		weight = {
			base = 0
			modifier = {
				add = 50
				NAND = {
					has_trait = peasant_leader
					OR = {
						is_ruler = no
						is_leading_faction_type = peasant_faction
						AND = {
							is_ruler = yes
							is_landed = no
							OR = {
								government_has_flag = government_is_feudal
								government_has_flag = government_is_clan
								
								government_has_flag = government_is_elven
								
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							highest_held_title_tier = tier_kingdom
							AND = { is_ruler = yes government_has_flag = government_is_theocracy }
						}
						NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
						NOT = { government_has_flag = government_is_republic }
						portrait_pel_clothing_trigger = yes
					}
					AND = {
						exists = primary_spouse
						OR = {
							is_ruler = no
							highest_held_title_tier = tier_barony
						}
						primary_spouse = {
							OR = {
								highest_held_title_tier = tier_kingdom
								AND = { is_ruler = yes government_has_flag = government_is_theocracy }
							}
							NOT = { AND = { is_ruler = yes government_has_flag = government_is_mercenary  } } # Blocked for mercenaries
							NOT = { government_has_flag = government_is_republic }
							portrait_pel_clothing_spouse_trigger = yes
						}
					}
				}
			}
		}
	}
}
###########################
# SORCERY ACTIVITY VALUES #
###########################

lotr_max_sorcery_morgothic_essence = {
	value = 0 
	if = {
		limit = { has_trait = sorcerer_trait }
		add = 5
		if = { #Death Magic
			limit = { 
				has_trait_xp = {
					trait = sorcerer_trait
					track = death_magic 
					value < 65
				}
			}
			add = 10
		} else_if = {
			limit = {
				has_trait_xp = {
					trait = sorcerer_trait
					track = death_magic 
					value < 100
				}
			}
			add = 15
		} else_if = {
			limit = {
				has_trait_xp = {
					trait = sorcerer_trait
					track = death_magic 
					value >= 100
				}
			}
			add = 20
		}
		if = { #Deception Magic
			limit = { 
				has_trait_xp = {
					trait = sorcerer_trait
					track = deception_magic 
					value < 65
				}
			}
			add = 10
		} else_if = {
			limit = {
				has_trait_xp = {
					trait = sorcerer_trait
					track = deception_magic 
					value < 100
				}
			}
			add = 15
		} else_if = {
			limit = {
				has_trait_xp = {
					trait = sorcerer_trait
					track = deception_magic 
					value >= 100
				}
			}
			add = 20
		}
		if = { #Destruction Magic
			limit = { 
				has_trait_xp = {
					trait = sorcerer_trait
					track = destruction_magic 
					value < 65
				}
			}
			add = 10
		} else_if = {
			limit = {
				has_trait_xp = {
					trait = sorcerer_trait
					track = destruction_magic 
					value < 100
				}
			}
			add = 15
		} else_if = {
			limit = {
				has_trait_xp = {
					trait = sorcerer_trait
					track = destruction_magic 
					value >= 100
				}
			}
			add = 20
		}
	}
	add = {
		value = learning.div3
		ceiling = yes
	}
}

## Costs and Cooldowns

sorcery_activity_base_cost = {
	value = standard_activity_base_cost
}

sorcery_poor_option_cost = {
	value = 0
}

sorcery_normal_option_cost = {
	value = 10
	multiply = activity_cost_scale_by_tier
	multiply = activity_cost_scale_by_era
}

sorcery_good_option_cost = {
	value = 35
	multiply = activity_cost_scale_by_tier
	multiply = activity_cost_scale_by_era
}

sorcery_sorcery_cooldown_time = {
	value = 4
}

## Sorcery Success Chances

sorcery_activity_success_increase_minor_value = 3
sorcery_activity_success_increase_medium_value = 5
sorcery_activity_success_increase_major_value = 10
sorcery_activity_success_increase_massive_value = 15

sorcery_activity_success_decrease_minor_value = {
	value = sorcery_activity_success_increase_minor_value
	multiply = -1
}
sorcery_activity_success_decrease_medium_value = {
	value = sorcery_activity_success_increase_medium_value
	multiply = -1
}
sorcery_activity_success_decrease_major_value = {
	value = sorcery_activity_success_increase_major_value
	multiply = -1
}
sorcery_activity_success_decrease_massive_value = {
	value = sorcery_activity_success_increase_massive_value
	multiply = -1
}

sorcery_success_chance_value = {
	# activity_host = {

	# }
	# GUESTS
	
	activity_location = { add = sorcery_province_reference_value }

	# EVENTS
	if = {
		limit = { exists = var:sorcery_success_chance_event }
		add = {
			value = var:sorcery_success_chance_event
			desc = sorcery_success_chance.events
		}
	}
	min = 10
	max = 95
}

sorcery_success_chance_inverse_value = {
	value = 100
	subtract = sorcery_success_chance_value
}

sorcery_actual_activity_cost = {
	value = sorcery_activity_base_cost
}

sorcery_province_reference_value = {
	value = 0
	if = {
		limit = { has_building_or_higher = wonder_baraddur }
		add = {
			value = 20
			desc = activity_sorcery_barad_dur
		}
	}
	if = {
		limit = { has_building = wonder_minas_ithil_02 }
		add = {
			value = 20
			desc = activity_sorcery_minas_ithil
		}
	}
	if = {
		limit = { has_building = wonder_amon_lanc_02 }
		add = {
			value = 15
			desc = activity_sorcery_dol_guldur
		}
	}
	if = {
		limit = { has_building = wonder_temple_sulereb_02 }
		add = {
			value = 15
			desc = activity_sorcery_temple_sulereb
		}
	}
	if = {
		limit = { has_building = wonder_szrel_kain }
		add = {
			value = 15
			desc = activity_sorcery_szrel_kain
		}
	}
	if = {
		limit = { has_building_or_higher = wonder_carn_dum_01 }
		add = {
			value = 20
			desc = activity_sorcery_carn_dum
		}
	}
	if = {
		limit = { has_building_or_higher = wonder_angrenost_01 }
		add = {
			value = 15
			desc = activity_sorcery_orthanc_evil
		}
	}
	if = {
		limit = { has_building_or_higher = wonder_ardinak_01 }
		add = {
			value = 15
			desc = activity_sorcery_ardinak
		}
	}
	if = {
		limit = { has_building_or_higher = wonder_haven_korlea_01 }
		add = {
			value = 10
			desc = activity_sorcery_haven_korlea
		}
	}
}
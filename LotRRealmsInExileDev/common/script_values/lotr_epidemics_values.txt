######################
# Epidemics
######################

#### OUTBREAK CHANCE ###
# Chance for an outbreak of this intensity to spawn on a province per year
# % from 0-100 inclusive
# root = potential province

### CONTROL VALUES ###
# These should be enough to change the balance of epidemics 

lotr_race_outbreak_chance_epidemics_mult_value = {
	value = 1
	# outbreaks chance for elves and wastelands (wasteland holdings)
	if = {			
		limit = {
			OR = {
				has_holding_type = wastelands_holding
				has_holding_type = ruined_holding
				county.culture = { is_elf_culture = yes }
			}
		}
		multiply = 0
	}
	# outbreaks chance for dwarves
	else_if = {		
		limit = {
			county.culture = { is_dwarf_culture = yes }
		}
		multiply = 0.5
	}
	# outbreaks chance for orcs and goblins	
	else_if = {		
		limit = {
			county.culture = {is_orc_culture = yes }
		}
		multiply = 1.5
	}
	# dwarves immune in lore
	if = {
		limit = {
			AND = {
				county.culture = { is_dwarf_culture = yes }
				has_game_rule = default_ai_behavior
			}
		}
		multiply = 0
	}
}

lotr_race_dwarf_outbreak_chance_epidemics_mult_value = {
	value = 0
	# outbreaks chance for dwarves
	if = {		
		limit = {
			and = {
				county.culture = { is_dwarf_culture = yes }
				NOT = { has_game_rule = default_ai_behavior }
			}	
		}
		add = 1
	}
}

lotr_black_plague_rule_outbreak_chance_epidemics_mult_value = {
	value = 0
	# outbreaks chance for dwarves
	if = {		
		limit = {
			NOT = { has_game_rule = default_ai_behavior }
		}
		add = 1
	}
}

#### SPREAD CHANCE ###
#Controls the spread of the epidemic
#root = potential_province

lotr_race_spread_chance_epidemics_mult_value = {
	value = 1
	# spread chance for elves and wastelands (wasteland holdings)
	if = {
		limit = {
			OR = {
				has_holding_type = wastelands_holding
				has_holding_type = ruined_holding
				county.culture = { is_elf_culture = yes }
			}
		}
		multiply = 0
	}
	# spread chance for dwarves
	else_if = {		
		limit = {
			county.culture = { is_dwarf_culture = yes }
		}
		multiply = 0.5
	}
	# spread chance for orcs and goblins	
	else_if = {
		limit = {
			county.culture = { is_orc_culture = yes }
		}
		multiply = 2
	}
	# spread chance for wastelands (baronies holded by wastelands holder)
	else_if = {
		limit = {
			county.holder = character:k_wastelands_holder
		}
		multiply = 0.7
	}	
	# dwarves immune in lore
	if = {
		limit = {
			AND = {
				county.culture = { is_dwarf_culture = yes }
				has_game_rule = default_ai_behavior
			}
		}
		multiply = 0
	}
}	

lotr_race_dwarf_spread_chance_epidemics_mult_value = {
	value = 1
	# spread chance for wastelands (baronies holded by wastelands holder)
	if = {
		limit = {
			AND = {
				county.culture = { is_dwarf_culture = no }
				NOT = { county.holder = character:k_wastelands_holder }
			}	
		}
		multiply = 0
	}
	# spread chance for wastelands (wasteland holdings)
	else_if = {
		limit = {
			has_holding_type = wastelands_holding
			has_holding_type = ruined_holding
		}
		multiply = 0.05
	}
	
	# spread chance for wastelands (baronies holded by wastelands holder)
	else_if = {
		limit = {
			county.holder = character:k_wastelands_holder
		}
		multiply = 0.2		
	}	
}
lotr_long_winter_spread_chance_epidemics_default_value = {

	if = { #Should only use Apocalyptic, others for redundency
		limit = {
			scope:epidemic = {
				outbreak_intensity = apocalyptic
			}
		}
		add = spread_chance_base_high
	}
	else_if = {
		limit = {
			scope:epidemic = {
				outbreak_intensity = major
			}
		}
		add = spread_chance_base_medium
	}
	else = { #minor
		add = spread_chance_base_low
	}
	
	#less patchy, add
	if = {
		limit = {
			county = {
				any_county_province = {
					any_province_epidemic = {
						this.epidemic_type = scope:epidemic.epidemic_type
					}
				}
			}
		}
		add = spread_increase_add_high
	}
	#Buildings - Denser areas suffer from deprevation more
	add = {
		value = num_buildings
		multiply = spread_increase_mult_low
	}
	#Terrain
	if = { 
		limit = {
			OR = { # Mountains have more severe winter
				terrain = desert_mountains
				terrain = mountains
				terrain = hills
				terrain = taiga
				terrain = arctic
			}
		}
		add = spread_increase_add_high
	}
	else_if = { 
		limit = {
			OR = { # Opens lands have more severe winters
				terrain = wetlands
				terrain = farmlands
				terrain = plains
				terrain = steppe
			}
		}
		add = spread_increase_add_medium
	}
	else_if = {
		limit = {
			OR = { # Forests are often more sheltered than plains, but still northern
				terrain = forest
				terrain = deep_forest
				terrain = mallorn_forest
			}
		}
		add = spread_increase_add_low
	}
	else_if = {
		limit = {
			OR = { # Hot plains have less severe winters
				terrain = floodplains
				terrain = red_desert
				terrain = volcanic_plains
				terrain = savanna
			}
		}
		add = spread_decrease_add_medium
	}
	else_if = {
		limit = {
			OR = { # It shouldn't be snowing
				terrain = jungle
				terrain = desert
				terrain = dune_sea 
				terrain = drylands
				terrain = oasis
				terrain = halls
			}
		}
		add = spread_decrease_add_very_high
	}
}
lotr_long_winter_spread_chance_epidemics_mult_value = {
	value = 10 # for testing
}	

#### CHARACTER INFECTION CHANCE ###
#Monthly chance for an epidemic to infect a character in the province

lotr_character_dwarf_infection_chance_mult_value = {
	value = 1
	if = {
		limit = {
			OR = {
				is_dwarf = no
				has_game_rule = default_ai_behavior
			}
		}
		multiply = 0
	}
}
### Brief: <key> ( database key )
# Localization:
# "great_project_type_<key>"
# "great_project_type_tooltip_<key>"
#
# When the project is ongoing, the default localization keys are 'great_project_name' and 'great_project_name_possessive' which can be overridden with:
# 	* "great_project_name_<key>"
# 	* "great_project_name_possessive_<key>"
# and support these objects for additional context:
#	* GREAT_PROJECT_TYPE
#	* CHARACTER (founder)
#	* PROVINCE (province where the project was founded)
#
<project_key> = {

	# name of the image that will be used for this great project as list and pin icon. uses the project key if left unset.
	# place your images in GREAT_PROJECT_ICON_PATH
	icon = project_key

	# trigger list of paths for the illustrations. The first entry that satisfies the trigger will be used for ongoing Great Projects.
	# define a sensible default with no triggers as last entry for fallback illustrations.
	#
	# Supported scopes:
	# 	root = the funded project (only used for ongoing Great Projects)
	#	scope:province = the province where the project is in
	#	scope:great_project = the funded project
	#	scope:owner = the character who currently owns the project (only used for ongoing Great Projects)
	#	scope:founder = the character who funded the project
	#
	illustration = {
		trigger = { ... }				# trigger that enables specific illustration

		reference = file_path			# complete path of the illustration image
	}

	### Brief: is_shown ( trigger )
	# Is the scoped character able to view this great project in gui?
	#
	# Supported scopes:
	# 	root = the character who would plan this project
	#	scope:province = the province where the project would be planned in
	#	scope:founder = the character who would plan this project
	#
	is_shown = {
		<triggers>
	}

	### Brief: province_filter (filter)
	# Broad selection of which type of provinces can be considered to plan this project in.
	# It will be further filtered by the can_start_planning trigger.
	# Follows the same rules as province_filter in Activities.
	#
	province_filter = capital

	### Brief: province_filter_target (string)
	# if you select a province_filter with a specific target such as landed_title or geographical_region, specify here
	# which target to go for. Follows the same rules as province_filter_target in Activities.
	province_filter_target = ""

	### Brief: can_start_planning ( trigger )
	# Is the scoped character allowed to start planning this great project?
	#
	# Supported scopes:
	# 	root = the character who would plan this project
	#	scope:founder = the character who would plan this project
	#
	can_start_planning = {
		<triggers>
	}

	### Brief: can_cancel ( trigger )
	# Is the scoped character allowed to cancel the project? Note that if they're not the owner they're automatically disqualified no matter what the trigger says.
	#
	# Supported scopes:
	# 	root = the character who's trying to cancel
	#
	can_cancel = {
		<triggers>
	}

	### Brief: is_location_valid ( trigger )
	# Is the scoped character allowed to plan this great project in the specified province?
	# It is recommended that only province-specific checks are made here.
	#
	# Supported scopes:
	# 	root = the character who would plan this project
	#	scope:province = the province where the project would be planned in
	#	scope:founder = the character who would plan this project
	#
	is_location_valid = {
		<triggers>
	}

	### Brief: owner (owner)
	# how does the project determine who owns it? defaults to province_owner
	#	- province_owner_top_liege: top liege of the province where the project is planned
	#	- province_owner: direct owner of the province where the project is planned
	#	- founder_primary_title_owner: holder of the primary title of the founder
	#	- founder_top_liege_title_owner: holder of the primary title of the top liege of the founder
	owner = province_owner_top_liege

	### Brief: is_valid ( trigger )
	# Is the Project still valid? Some events might invalidate a project (e.g. the founder dies, the province to rescue is now doing fine...)
	#
	# Supported scopes:
	# 	root = the funded project
	#	scope:province = the province where the project is in
	#	scope:great_project = the funded project
	#	scope:owner = the character who currently owns the project
	#	scope:founder = the character who funded the project
	#
	is_valid = {
		<triggers>
	}

	### Brief: cost ( scripted cost )
	# How much does this great project cost to plan?
	#
	# Ex: { gold = 500, prestige = 100 }
	#
	# Supported scopes:
	#	root = character who will plan the project
	cost = {
		<scripted_cost>
	}

	### Brief: construction_time ( scripted value int32 )
	# Number of days required to complete the great project. Supports scripted values.
	# Supported scopes:
	# 	root = character who owns the project at the time of starting construction
	#	scope:great_project = the project being planned
	#
	construction_time = 1200

	### Brief: contribution_threshold ( fixed point )
	# Percentage of progress after which optional contributions (if any) cannot be funded anymore.
	# The actual date is calculated from the scripted construction time without taking into account character modifiers.
	#
	contribution_threshold = 50

	### Brief: investor_cooldown ( scripted value int32 )
	# Number of days until potential contributors may start funding project contributions. This system is in place to give the founder a head start in funding contributions.
	# Supported scopes:
	# 	root = character who planned the project
	#	scope:great_project = the project being planned
	#
	contributor_cooldown = 21

	### Brief: on_complete ( effect )
	# Effect fired when great project is completed
	#
	# Available scopes:
	# 	root = the funded project
	#	scope:province = the province where the project is in
	#	scope:great_project = the funded project
	#	scope:owner = the character who currently owns the project 
	#	scope:founder = the character who funded the project
	# 
	on_complete = { }

	### Brief: on_cancel ( effect )
	# Effect fired when great project is destroyed, or when construction (or planning) is canceled
	#
	# Available scopes:
	# 	root = the funded project
	#	scope:province = the province where the project is in
	#	scope:great_project = the funded project
	#	scope:owner = the character who currently owns the project
	#	scope:founder = the character who funded the project
	# 
	on_cancel = { }

	### Brief: on_plan_build ( effect )
	# Effect fired when great project construction is planned - at this stage the project is funded, but all improvements are not
	#
	# Available scopes:
	# 	root = the funded project
	#	scope:province = the province where the project is in
	#	scope:great_project = the funded project
	#	scope:owner = the character who currently owns the project
	#	scope:founder = the character who funded the project
	# 
	on_plan_build = { }

	### Brief: on_start_build ( effect )
	# Effect fired when great project construction starts - at this stage the project and at least all mandatory improvements are funded
	#
	# Available scopes:
	# 	root = the funded project
	#	scope:province = the province where the project is in
	#	scope:great_project = the funded project
	#	scope:owner = the character who currently owns the project
	#	scope:founder = the character who funded the project
	# 
	on_start_build = { }

	### Brief: on_invalidated ( effect )
	# Effect fired when the great project becomes invalid. After the effect fires, the project is removed (on_cancel)
	#
	# Available scopes:
	# 	root = the project that just became invalid
	#	scope:province = the province where the project is in
	#	scope:great_project = the project that just became invalid
	#	scope:owner = the character who currently owns the project
	#	scope:founder = the character who funded the project
	# 
	on_invalidated = { }

	### Brief: invite_interaction ( key )
	# scripted interaction used when inviting characters to contribute to a great project
	# the interaction must use the request_great_project_contribution special interaction type
	#
	# default: request_great_project_contribution_interaction
	#
	invite_interaction = request_great_project_contribution_interaction

	### Brief: allowed_contributor_filter ( bitmask )
	# broad category of rulers who are allowed to invest in contributions for this project. Default is vassals
	#
	# Possible values:
	#	vassals: direct, non-tributary vassals of the owner of the project
	#	tributaries: tributary vassals of the owner of the project
	#	liege: the direct liege of the owner of the project, if any
	#	top_liege: the top liege of the owner of the project, if any
	#	allies: allies of the project owner
	#		Note: can also be added via the House Aspiration type field
	#		can_request_great_project_contributions_from_allies = yes 
	#
	allowed_contributor_filter = {
		vassals = yes
	}

	### Brief: project_contributions ( list of unique keys )
	# List the project contributions that can be funded to complete this project
	#
	# Note: Requires minimum 1 project investment
	#
	project_contributions = {

		### Brief: <key> ( string )
		# Localization:
		# "great_project_type_<great project key>_contribution_<key>"
		# "great_project_type_<great project key>_contribution_<key>_desc"
		#
		# When the project is ongoing, the default localization key is 'great_project_contribution_name' which can be overridden with:
		# 	* "great_project_<great project key>_contribution_name_<contribution key>"
		# which support these objects for additional context:
		#	* GREAT_PROJECT_CONTRIBUTION_TYPE
		#	* GREAT_PROJECT
		#	* CHARACTER (founder)
		#	* PROVINCE (province where the project was founded)
		#
		# All triggers, effects, and costs below supports the following scopes:
		#	root = the contributor character
		#	scope:province = the province where the project is planned in
		#	scope:great_project = the great project itself, will be null before the planning phase
		#	scope:founder = the character who would contribute
		#	scope:owner = the character who planned this project
		#
		<key> = {

			### Brief: is_shown ( trigger )
			# Is the scoped character able to interact with this contribution or view it in gui at all?
			is_shown = {
				<trigger>
			}

			### Brief: show_in_planning_phase ( bool )
			# Show this contribution item in the list of contributions when in the planning phase?
			# Only Optional contributions can be hidden. Default is yes (all contributions are shown)
			#
			show_in_planning_phase = yes

			### Brief: contributor_is_valid ( trigger )
			# Is the scoped character allowed to contribute?
			# Note that we print this in an unevaluated format without scope, so trigger_ifs are not supported without custom descs
			contributor_is_valid = {
				<triggers>
			}

			### Brief: context_allows_contributions ( trigger )
			# Is the scoped character allowed to contribute right now?
			# This trigger is meant to check for contextual variables that may change with time
			#	but are not directly influenced by the potential contributor
			#	(e.g. specific time frames or situation phases )
			context_allows_contributions = {
				<triggers>
			}

			### Brief: cost ( scripted cost )
			# How much does this project investment cost?
			#
			# Ex: { gold = 500, prestige = 100 }
			cost = {
				<scripted_cost>
			}

			### Brief: investor_cooldown ( scripted value int32 )
			# How many days until the character may contribute to another contribution for the same project
			contributor_cooldown = 300

			### Brief: is_required ( bool )
			# Is this project investment required in order to finish related project? 'yes'
			# Or is it optional? 'no'
			#
			# Default is yes
			#
			is_required = yes

			### Brief: on_contribution_funded ( effect )
			# Effect fired when the contribution is funded
			on_contribution_funded = { }

			### Brief: on_complete ( effect )
			# Effect fired when related great project of investment is completed
			on_complete = { }

			### Brief: ai_will_do ( scripted value int32 )
			# How likely is the AI to fund this contribution?
			# Will be picked by weighted random.
			ai_will_do = {}

			# How often should the ai consider if they should fund this contribution, in months. Default is 12 for all tiers, but it is highly recommended to specify rank-based intervals.
			ai_check_interval = 3								

			# How often should the ai consider fund this contribution by tier of top title (in months). '0' means it is never considered. Used instead of 'ai_check_interval'.
			# All tiers are required to be defined.
			ai_check_interval_by_tier = {							
				barony = 0
				county = 10
				duchy = 2
				kingdom = 1
				empire = 1
				hegemony = 1
			}
		}
	}

	### AI

	### Brief: ai_will_do ( scripted value int32 )
	# How likely is the AI to plan this Great Project?
	# Will be picked by weighted random.
	#
	# Available scopes:
	#	root = the Character planning the project
	#		
	ai_will_do = {}

	### Brief: ai_province_filter (filter)
	# Broad selection of which type of provinces can be considered by AI to plan this project in.
	# Follows the same rules as ai_province_filter in Activities. If left unspecified it will be the same as province_filter.
	#
	ai_province_filter = capital

	# How often should the ai consider if they should plan this project, in years. Default is 10 for all tiers, but it is highly recommended to specify rank-based intervals.
	ai_check_interval = 10

	# How often should the ai consider plan this project by tier of top title (in years). '0' means it is never considered. Used instead of 'ai_check_interval'.
	# All tiers are required to be defined.
	ai_check_interval_by_tier = {							
		barony = 0
		county = 10
		duchy = 1
		kingdom = 1
		empire = 1
		hegemony = 1
	}

	# A quick trigger to cheaply filter out non-eligible founders. Checks if the character is adult, their rank and their government type match the filter.
	# A character satisfies a rank check if their primary title is at least the specified one.
	# A character with any of the listed government types will satisfy the requirements. omit the field to avoid checking for government types.
	# Rank assumes Hegemony unless specified
	ai_target_quick_trigger = {
		adult = yes
		rank = hegemony
		government_type = { }
	}


	### GUI and notifications

	# Should this group show in the Great Projects list? Default is yes
	show_in_list = yes

	# Are projects in this category important enough to warrant special notifications? Default is no
	is_important = no

	# General behavior for the project item in the UI. possible values are:
	#	* major_project
	#	* minor_project
	#	* environmental_project
	# environmental_project hides the owner portrait in all related UI. There are no distinctions between major and minor projects as of now.
	group = major

	# Sound that will be played by the notifications when the project completes. Empty by default
	completion_sound_effect = ""
}

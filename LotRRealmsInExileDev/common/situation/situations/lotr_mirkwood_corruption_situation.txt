mirkwood_corruption_situation = {
    gui_window_name = "lotr_window_mirkwood_corruption_situation"
    map_mode = sub_regions
    is_unique = yes
    migration = no

    ### Regions ###
    sub_regions = {
        aradhrynd = {
            icon = "gfx/interface/icons/situations/mirkwood_corruption/mirkwood_situation_the_withering_shade.dds"
            map_color = { 20 60 30 }
            geographical_regions = { custom_aradhrynd }
        }
        taurduin = {
            icon = "gfx/interface/icons/situations/mirkwood_corruption/mirkwood_situation_the_withering_shade.dds"
            map_color = { 25 65 35 }
            geographical_regions = { custom_taurduin }
        }
        taur_nu_fuin = {
            icon = "gfx/interface/icons/situations/mirkwood_corruption/mirkwood_situation_the_withering_shade.dds"
            map_color = { 30 70 40 }
            geographical_regions = { custom_taur_nu_fuin }
        }
        emyn_i_firith = {
            icon = "gfx/interface/icons/situations/mirkwood_corruption/mirkwood_situation_the_withering_shade.dds"
            map_color = { 35 75 45 }
            geographical_regions = { custom_emyn_i_firith }
        }
        nivrim = {
            icon = "gfx/interface/icons/situations/mirkwood_corruption/mirkwood_situation_the_withering_shade.dds"
            map_color = { 40 80 50 }
            geographical_regions = { custom_nivrim }
        }
        dundaedelu = {
            icon = "gfx/interface/icons/situations/mirkwood_corruption/mirkwood_situation_the_withering_shade.dds"
            map_color = { 45 85 55 }
            geographical_regions = { custom_dundaedelu }
        }
        angaladh_rhunen = {
            icon = "gfx/interface/icons/situations/mirkwood_corruption/mirkwood_situation_the_withering_shade.dds"
            map_color = { 50 90 60 }
            geographical_regions = { custom_angaladh_rhunen }
        }
        men_i_naugrim = {
            icon = "gfx/interface/icons/situations/mirkwood_corruption/mirkwood_situation_the_withering_shade.dds"
            map_color = { 55 95 65 }
            geographical_regions = { custom_men_i_naugrim }
        }
        gwath_anglennol = {
            icon = "gfx/interface/icons/situations/mirkwood_corruption/mirkwood_situation_the_withering_shade.dds"
            map_color = { 60 100 70 }
            geographical_regions = { custom_gwath_anglennol }
        }
        taur_e_ndaedlos = {
            icon = "gfx/interface/icons/situations/mirkwood_corruption/mirkwood_situation_the_withering_shade.dds"
            map_color = { 65 105 75 }
            geographical_regions = { custom_taur_e_ndaedlos }
        }
        amon_lanc = {
            icon = "gfx/interface/icons/situations/mirkwood_corruption/mirkwood_situation_the_withering_shade.dds"
            map_color = { 70 110 80 }
            geographical_regions = { custom_amon_lanc }
        }
    }

    ### Participants ###
    participant_groups = {
        ## Limited to The Necromancer, Ruler of Lasgalen, and Radagast for now
        corruption_spreaders = {
            icon = "gfx/interface/icons/situations/mirkwood_corruption/mirkwood_situation_web_of_night.dds"
            require_capital_in_sub_region = no
            require_realm_in_sub_region = no
            require_domain_in_sub_region = no
            is_character_valid = {
                OR = {
                    has_character_flag = unknown_sauron_flag
                    has_character_flag = khamul
                }
                has_title = title:c_amon_lanc
            }
        }
        elves = {
            icon = "gfx/interface/icons/situations/mirkwood_corruption/mirkwood_situation_untainted_wood.dds"
            require_capital_in_sub_region = no
            require_realm_in_sub_region = no
            require_domain_in_sub_region = no
            is_character_valid = {
                has_character_flag = ruler_of_lasgalen
            }

            map_color = { 255 127 80 }
        }

        radagast = {
            icon = "gfx/interface/icons/situations/mirkwood_corruption/mirkwood_situation_untainted_wood.dds"
            require_capital_in_sub_region = no
            require_realm_in_sub_region = no
            require_domain_in_sub_region = no
            is_character_valid = {
                has_character_flag = radagast
            }

            map_color = { 173 216 230 }

        }
    }



    ### On Actions ###
    on_start = {
        save_scope_as = mirkwood_situation
    }
    on_monthly = {
        update_mirkwood_monthly_phase_effect = yes
        mkw_refresh_active_subregions_effect = yes
    }

    on_yearly = {

    }

    ### Phases ###

    phases = { # Untainted Wood, Whispers in the Leaves, The Withering Shade, Shadow’s Grasp, The Web of Night

        untainted_wood = {
            icon = "gfx/interface/icons/situations/mirkwood_corruption/mirkwood_situation_untainted_wood.dds"
            on_start = {}

            future_phases = {
                whispers_in_the_leaves = {}
            }
        }

        whispers_in_the_leaves = {
            icon = "gfx/interface/icons/situations/mirkwood_corruption/mirkwood_situation_whispers_in_the_leaves.dds"
            on_start = {}

            future_phases = {
                untainted_wood = {}
                the_withering_shade = {}
            }
        }

        the_withering_shade = {
            icon = "gfx/interface/icons/situations/mirkwood_corruption/mirkwood_situation_the_withering_shade.dds"
            on_start = {}
            future_phases = {
                whispers_in_the_leaves = {}
                shadows_grasp = {}
            }
        }

        shadows_grasp = {
            icon = "gfx/interface/icons/situations/mirkwood_corruption/mirkwood_situation_shadows_grasp.dds"
            on_start = {}
            future_phases = {
                the_withering_shade = {}
                the_web_of_night = {}
            }
        }

        the_web_of_night = {
            icon = "gfx/interface/icons/situations/mirkwood_corruption/mirkwood_situation_web_of_night.dds"
            on_start = {}
            future_phases = {
                shadows_grasp = {}
            }
        }

    }
}
elven_hope_situation = {

	#window = elven_hope_situation
	gui_window_name = "lotr_window_elven_hope_situation"
	map_mode = sub_regions
	is_unique = no
	migration = no
	
	### Regions ###
	sub_regions = {
		rivendell_lorien = {
			icon = "gfx/interface/icons/situations/elven_hope/imladris_lorien.dds"
			map_color = { 14 122 25 }
			geographical_regions = { middleearth_west_rhovanion_lothlorien middleearth_west_eregion } 
		}
		lindon = {
			icon = "gfx/interface/icons/situations/elven_hope/lindon.dds"
			map_color = { 205 169 0 }
			geographical_regions = { middleearth_west_beleriand } 
		}
		lasgalen = {
			icon = "gfx/interface/icons/situations/elven_hope/greenwood.dds"
			map_color = { 10 47 202 }
			geographical_regions = { middleearth_west_rhovanion_mirkwood }
		}
	}
	
	### Participants ###
	participant_groups = {
		elven_rulers_capital = {
			icon = "gfx/interface/icons/situations/elven_hope/elven_rulers.dds"
			require_capital_in_sub_region = yes
			is_character_valid = {
				has_government = elven_government
				highest_held_title_tier >= tier_county
			}

			# on_join = {
				# if = {
					# limit = {
						# is_ai = no
						# NOT = { has_variable = mpo_the_great_steppe_events_0001_var }
					# }
					# trigger_event = mpo_the_great_steppe.0001
				# }
			# }

			map_color = { 255 127 80 }
		}
		
		elven_rulers_realm = {
			icon = "gfx/interface/icons/situations/elven_hope/elven_rulers_partial.dds"
			require_capital_in_sub_region = no
			require_realm_in_sub_region = yes
			is_character_valid = {
				has_government = elven_government
				highest_held_title_tier >= tier_county
			}

			# on_join = {
				# if = {
					# limit = {
						# is_ai = no
						# NOT = { has_variable = mpo_the_great_steppe_events_0001_var }
					# }
					# trigger_event = mpo_the_great_steppe.0001
				# }
			# }

			map_color = { 255 127 80 }
		}
	}


	### On Actions ###
	on_monthly = {
		update_lorien_phase_effect = yes
		update_lindon_phase_effect = yes
		update_greenwood_phase_effect = yes
		remove_excess_hope_effect = yes
	}
	
	### Phases ###
	start_phase = situation_elven_waning
	
    phases = { # Fading, Waning, Enduring, Renewing, Thriving
		
		situation_elven_fading = {
			icon = "gfx/interface/icons/concept_icons/conceptplacetimelesshalls.dds"
			illustration = "gfx/interface/illustrations/terrain_types/mpo_season_cold_zud.dds"

			# on_start = {
				# scope:situation_sub_region = {
					# save_scope_as = my_subregion
					# every_situation_sub_region_participant_group = {
						# every_situation_group_participant = {
							# trigger_event = mpo_the_great_steppe.0002
						# }
					# }
				# }
			# }

			max_duration_next_phase = random_non_takeover

			future_phases = {
				situation_elven_waning = {
					# takeover_type = points
					# takeover_points = 100
					# catalysts = {
						# catalyst_elven_low_hope = regular_elven_hope_gain
					# }
				}
			}

			modifier_sets = { # ALL EFFECTS PLACEHOLDER
				situation_elven_subject_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_subject.dds"

					elven_rulers_capital = {
						character_modifier = {
							vassal_opinion = 20
						}
					}
				}
				
				situation_elven_military_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_military.dds"
					
					elven_rulers_capital = {
						character_modifier = {
							men_at_arms_maintenance = -0.2
						}
					}
				}
				
				situation_elven_personal_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_character.dds"
					
					elven_rulers_capital = {
						parameters = {
							prowess = 1
						}
					}
				}
			}
		}
		situation_elven_waning = {
			icon = "gfx/interface/icons/concept_icons/gone_westconcept.dds"
			illustration = "gfx/interface/illustrations/terrain_types/mpo_season_severe_drought.dds"

			# on_start = {
				# scope:situation_sub_region = {
					# save_scope_as = my_subregion
					# every_situation_sub_region_participant_group = {
						# every_situation_group_participant = {
							# trigger_event = mpo_the_great_steppe.0002
						# }
					# }
				# }
			# }

			max_duration_next_phase = random_non_takeover

			future_phases = {
				situation_elven_fading = {
					# takeover_type = points
					# takeover_points = 100
					# catalysts = {
						# catalyst_elven_very_low_hope = regular_elven_hope_gain
					# }
				}
				situation_elven_enduring = {
					# takeover_type = points
					# takeover_points = 100
					# catalysts = {
						# catalyst_elven_medium_hope = regular_elven_hope_gain
					# }
				}
			}

			modifier_sets = { # ALL EFFECTS PLACEHOLDER
				situation_elven_subject_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_subject.dds"

					elven_rulers_capital = {
						character_modifier = {
							vassal_opinion = 10
						}
					}
				}
				
				situation_elven_military_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_military.dds"
					
					elven_rulers_capital = {
						character_modifier = {
							men_at_arms_maintenance = -0.3
						}
					}
				}
				
				situation_elven_personal_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_character.dds"
					
					elven_rulers_capital = {
						parameters = {
							prowess = 3
						}
					}
				}
			}
		}
		situation_elven_enduring = {
			icon = "gfx/interface/icons/concept_icons/conceptlorelamps.dds"
			illustration = "gfx/interface/illustrations/terrain_types/mpo_season_abundant_grazing.dds"

			# on_start = {
				# scope:situation_sub_region = {
					# save_scope_as = my_subregion
					# every_situation_sub_region_participant_group = {
						# every_situation_group_participant = {
							# trigger_event = mpo_the_great_steppe.0002
						# }
					# }
				# }
			# }

			max_duration_next_phase = random_non_takeover

			future_phases = {
				situation_elven_waning = {
					# takeover_type = points
					# takeover_points = 100
					# catalysts = {
						# catalyst_elven_low_hope = regular_elven_hope_gain
					# }
				}
				situation_elven_renewing = {
					# takeover_type = points
					# takeover_points = 100
					# catalysts = {
						# catalyst_elven_high_hope = regular_elven_hope_gain
					# }
				}
			}

			modifier_sets = { # ALL EFFECTS PLACEHOLDER
				situation_elven_subject_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_subject.dds"

					elven_rulers_capital = {
						character_modifier = {
							vassal_opinion = 15
						}
					}
				}
				
				situation_elven_military_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_military.dds"
					
					elven_rulers_capital = {
						character_modifier = {
							men_at_arms_maintenance = -0.4
						}
					}
				}
				
				situation_elven_personal_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_character.dds"
					
					elven_rulers_capital = {
						parameters = {
							prowess = 5
						}
					}
				}
			}
		}
		situation_elven_renewing = {
			icon = "gfx/interface/icons/concept_icons/conceptplacevalinor.dds"
			illustration = "gfx/interface/illustrations/terrain_types/mpo_season_blessing_blue_sky.dds"

			# on_start = {
				# scope:situation_sub_region = {
					# save_scope_as = my_subregion
					# every_situation_sub_region_participant_group = {
						# every_situation_group_participant = {
							# trigger_event = mpo_the_great_steppe.0002
						# }
					# }
				# }
			# }

			max_duration_next_phase = random_non_takeover

			future_phases = {
				situation_elven_enduring = {
					# takeover_type = points
					# takeover_points = 100
					# catalysts = {
						# catalyst_elven_medium_hope = regular_elven_hope_gain
					# }
				}
				situation_elven_thriving = {
					# takeover_type = points
					# takeover_points = 100
					# catalysts = {
						# catalyst_elven_very_high_hope = regular_elven_hope_gain
					# }
				}
			}

			modifier_sets = { # ALL EFFECTS PLACEHOLDER
				situation_elven_subject_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_subject.dds"

					elven_rulers_capital = {
						character_modifier = {
							vassal_opinion = 15
						}
					}
				}
				
				situation_elven_military_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_military.dds"
					
					elven_rulers_capital = {
						character_modifier = {
							men_at_arms_maintenance = -0.4
						}
					}
				}
				
				situation_elven_personal_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_character.dds"
					
					elven_rulers_capital = {
						parameters = {
							prowess = 5
						}
					}
				}
			}
		}
		situation_elven_thriving = {
			icon = "gfx/interface/icons/concept_icons/conceptloretwotrees.dds"
			illustration = "gfx/interface/illustrations/terrain_types/mpo_season_everlasting_summer.dds"

			# on_start = {
				# scope:situation_sub_region = {
					# save_scope_as = my_subregion
					# every_situation_sub_region_participant_group = {
						# every_situation_group_participant = {
							# trigger_event = mpo_the_great_steppe.0002
						# }
					# }
				# }
			# }

			max_duration_next_phase = random_non_takeover

			future_phases = {
				situation_elven_renewing = {
					# takeover_type = points
					# takeover_points = 100
					# catalysts = {
						# catalyst_elven_high_hope = regular_elven_hope_gain
					# }
				}
			}

			modifier_sets = { # ALL EFFECTS PLACEHOLDER
				situation_elven_subject_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_subject.dds"

					elven_rulers_capital = {
						character_modifier = {
							vassal_opinion = 50
						}
					}
				}
				
				situation_elven_military_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_military.dds"
					
					elven_rulers_capital = {
						character_modifier = {
							men_at_arms_maintenance = -0.5
						}
					}
				}
				
				situation_elven_personal_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_character.dds"
					
					elven_rulers_capital = {
						parameters = {
							prowess = 10
						}
					}
				}
			}
		}
    }
}

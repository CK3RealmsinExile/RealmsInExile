angmar_wars_situation = {

	gui_window_name = "window_situation"
	gui_participation_window_name = "window_situation_participation"

	map_mode = participant_groups
	is_unique = yes # Only exists once
	migration = no
	# keep_full_history = yes # For testing purposes
	situation_group_type = major
	sort_order = 1

	icon = "gfx/interface/icons/situations/angmar_wars/angmar_wars.dds"
	illustration = "gfx/interface/illustrations/situation_backgrounds/angmar_wars.dds"

	##################################################
	# Regions
	##################################################
	sub_regions = {
		eriador = {
			icon = "gfx/interface/icons/situations/angmar_wars/eriador.dds"
			geographical_regions = { middleearth_west_arnor middleearth_forodwaith middleearth_west_eregion middleearth_west_beleriand }
		}
	}
	
	##################################################
	# On Actions
	##################################################
	# on_monthly = {
	# }

	##################################################
	# Groups
	##################################################
	participant_groups = {
		arnorian_rulers = {
			icon = "gfx/interface/icons/situations/angmar_wars/arnorian_rulers.dds"

			is_character_valid = {
				culture = {
					has_cultural_pillar = heritage_dunedain
				}
			}

			on_join = {
				trigger_event = debug_situation.0003
			}
			on_leave = {
				trigger_event = debug_situation.0004
			}

			map_color = arthedain_blue
		}
		angmar_rulers = {
			icon = "gfx/interface/icons/situations/angmar_wars/angmar_rulers.dds"

			is_character_valid = {
				faith_is_evil = yes
			}

			on_join = {
				trigger_event = debug_situation.0003
			}
			on_leave = {
				trigger_event = debug_situation.0004
			}

			map_color = { 8 36 43 }
		}
		elven_rulers = {
			icon = "gfx/interface/icons/situations/angmar_wars/elven_rulers.dds"

			is_character_valid = {
				is_elf = yes
			}

			on_join = {
				trigger_event = debug_situation.0003
			}
			on_leave = {
				trigger_event = debug_situation.0004
			}

			map_color = sindar
		}
	}
	
	##################################################
	# Phases
	##################################################
	start_phase = angmar_wars_stalemate

	phases = {
		angmar_wars_stalemate = {
			icon = "gfx/interface/icons/situations/angmar_wars/stalemate.dds"

			on_start = {
				scope:situation_sub_region = {
					every_situation_sub_region_participant = {
						trigger_event = debug_situation.0001
					}
				}
			}
			on_end = {
				scope:situation_sub_region = {
					every_situation_sub_region_participant = {
						trigger_event = debug_situation.0002
					}
				}
			}

			future_phases = {
				angmar_wars_arnor_ascendant = {
					takeover_type = points
					takeover_points = 1000

					catalysts = {
						# TEMP
						catalyst_situation_passing_of_time_blessing = medium_the_great_steppe_catalyst_gain
						catalyst_situation_passing_of_time_lucky_chance_blessing = massive_the_great_steppe_catalyst_gain
					}
				}
				angmar_wars_angmar_ascendant = {
					takeover_type = points
					takeover_points = 1000

					catalysts = {
						# TEMP
						catalyst_situation_passing_of_time_blessing = medium_the_great_steppe_catalyst_gain
						catalyst_situation_passing_of_time_lucky_chance_blessing = massive_the_great_steppe_catalyst_gain
					}
				}
			}

			modifier_sets = {
				angmar_wars_stalemate_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_subject.dds"

					all = {
						county_modifier = {
							development_growth_factor = -0.5
						}
					}

					arnorian_rulers = {
						character_modifier = {
							tax_mult = -0.1
						}
						county_modifier = {
							monthly_county_control_growth_factor = -0.1 
						}
						parameters = {
							temp_parameter = yes
						}
					}
					angmar_rulers = {
						character_modifier = {
							tax_mult = -0.1
						}
						county_modifier = {
							monthly_county_control_growth_factor = -0.1 
						}
						parameters = {
							temp_parameter = yes
						}
					}
				}
			}
		}

		angmar_wars_arnor_ascendant = {
			icon = "gfx/interface/icons/situations/angmar_wars/arnor_ascendant.dds"

			max_duration = { years = 10 }

			on_start = {
				scope:situation_sub_region = {
					every_situation_sub_region_participant = {
						trigger_event = debug_situation.0001
					}
				}
			}
			on_end = {
				scope:situation_sub_region = {
					every_situation_sub_region_participant = {
						trigger_event = debug_situation.0002
					}
				}
			}

			future_phases = {
				angmar_wars_stalemate = {}
			}

			modifier_sets = {
				angmar_wars_arnor_ascendant_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_subject.dds"

					all = {
						county_modifier = {
							development_growth_factor = -0.75
						}
					}

					arnorian_rulers = {
						character_modifier = {
							tax_mult = 0.1
						}
						county_modifier = {
							development_growth_factor = 0.5
						}
						parameters = {
							temp_parameter = yes
						}
					}
					angmar_rulers = {
						character_modifier = {
							tax_mult = -0.1
						}
						county_modifier = {
							development_growth_factor = -0.1
						}
						parameters = {
							temp_parameter = yes
						}
					}
				}
			}
		}

		angmar_wars_angmar_ascendant = {
			icon = "gfx/interface/icons/situations/angmar_wars/angmar_ascendant.dds"

			max_duration = { years = 10 }

			on_start = {
				scope:situation_sub_region = {
					every_situation_sub_region_participant = {
						trigger_event = debug_situation.0001
					}
				}
			}
			on_end = {
				scope:situation_sub_region = {
					every_situation_sub_region_participant = {
						trigger_event = debug_situation.0002
					}
				}
			}

			future_phases = {
				angmar_wars_stalemate = {}
			}

			modifier_sets = {
				angmar_wars_angmar_ascendant_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_subject.dds"

					all = {
						county_modifier = {
							development_growth_factor = -0.75
						}
					}

					arnorian_rulers = {
						character_modifier = {
							tax_mult = -0.1
						}
						county_modifier = {
							development_growth_factor = -0.1 
						}
						parameters = {
							temp_parameter = yes
						}
					}
					angmar_rulers = {
						character_modifier = {
							tax_mult = 0.1
						}
						county_modifier = {
							development_growth_factor = 0.5
						}
						parameters = {
							temp_parameter = yes
						}
					}
				}
			}
		}
	}
}

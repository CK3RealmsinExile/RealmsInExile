lotr_ormal_storms = {

	window = the_great_steppe
	gui_window_name = "window_the_great_steppe"
	map_mode = sub_regions

	is_unique = no
	migration = no

	##################################################
	# Regions
	##################################################
	sub_regions = {
		coast_of_ormal = {
			map_color = { 24 155 76 }
			geographical_regions = { special_region_bay_of_ormal_coastal }
		}
	}

	##################################################
	# On Actions
	##################################################
	on_monthly = {
	}
	
	on_yearly = {
		trigger_event = {
			on_action = lotr_ormal_storms_yearly_pulse
		}
	}

	##################################################
	# Groups
	##################################################
	participant_groups = {
		naval_rulers_capital = {
			require_capital_in_sub_region = yes
			is_character_valid = {
				is_orc = no
				is_dwarf = no
				highest_held_title_tier >= tier_county
			}

			map_color = { 255 127 80 }
		}
		
		naval_rulers_realm = {
			require_capital_in_sub_region = no
			require_realm_in_sub_region = yes
			is_character_valid = {
				is_orc = no
				is_dwarf = no
				highest_held_title_tier >= tier_county
			}

			map_color = { 255 127 80 }
		}
		
		landlubber_rulers = { # They're unaware they're part of the situation, this is just so we can apply the fertility modifiers to their counties
			require_realm_in_sub_region = yes
			is_character_valid = {
				OR = {
					is_orc = yes
					is_dwarf = yes
				}
				highest_held_title_tier >= tier_county
			}
			map_color = { 19 111 0 }
		}
	}

	##################################################
	# Phases
	##################################################
	start_phase = situation_ormal_fair_weather_season

	phases = {
		situation_ormal_fair_weather_season = {

			# icon = "gfx/interface/icons/seasons/fair_weather.dds"
			# illustration = "gfx/interface/illustrations/terrain_types/lotr_ormal_season_fair_weather.dds"
			max_duration = { days = 3650 }

			map_province_effect = summer
			map_province_effect_intensity = 0.1

			on_start = {
				scope:situation_sub_region = {
					save_scope_as = my_subregion
					every_situation_sub_region_participant_group = {
						limit = { participant_group_type = naval_rulers_capital }
						every_situation_group_participant = {
							trigger_event = storms_of_ormal.0002
						}
					}
				}
			}

			max_duration_next_phase = random_non_takeover

			future_phases = {
				situation_ormal_changeable_season = {
				}
				situation_ormal_storm_season = {
				}
				situation_ormal_osses_fury_season = {
					takeover_type = points
					takeover_points = 1000
					catalysts = {
						# Passage of time
						catalyst_situation_passing_of_time_osse = medium_ormal_catalyst_gain
						catalyst_situation_passing_of_time_lucky_chance_osse = major_ormal_catalyst_gain
					}
				}
				situation_ormal_uinens_blessing_season = {
					takeover_type = points
					takeover_points = 1000
					catalysts = {
						# Passage of time
						catalyst_situation_passing_of_time_uinen = medium_ormal_catalyst_gain
						catalyst_situation_passing_of_time_lucky_chance_uinen = major_ormal_catalyst_gain
					}
				}
			}

			modifier_sets = {
				situation_ormal_dev_and_tax_effects = {
					icon = "gfx/interface/icons/icon_gold.dds"
					
					naval_rulers_capital = {
						county_modifier = {
							development_growth_factor = ormal_fair_weather_growth_mult_value
							tax_mult = ormal_fair_weather_tax_mult_value
							monthly_county_control_growth_factor = ormal_fair_weather_control_growth_value
						}
					}
					
					naval_rulers_realm = {
						county_modifier = {
							development_growth_factor = ormal_fair_weather_growth_mult_value
							tax_mult = ormal_fair_weather_tax_mult_value
							monthly_county_control_growth_factor = ormal_fair_weather_control_growth_value
						}
					}
				}
					
				situation_ormal_subject_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_subject.dds"

					naval_rulers_capital = {
						character_modifier = {
							vassal_opinion = 20
						}
						parameters = {
							# the_great_steppe_demand_herd_higher_rate = yes
						}
					}
				}
				
				situation_ormal_military_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_military.dds"
					
					naval_rulers_capital = {
						character_modifier = {
							men_at_arms_maintenance = -0.2
						}
					}
				}
				
				situation_ormal_personal_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_character.dds"
					
					naval_rulers_capital = {
						parameters = {
							ormal_cheaper_sailing = yes
						}
					}
				}
			}
		}

		situation_ormal_changeable_season = {
			# icon = "gfx/interface/icons/seasons/changeable.dds"
			# illustration = "gfx/interface/illustrations/terrain_types/lotr_ormal_season_changeable.dds"
			max_duration = { days = 3650 }

			on_start = {
				scope:situation_sub_region = {
					save_scope_as = my_subregion
					every_situation_sub_region_participant_group = {
						limit = { participant_group_type = naval_rulers_capital }
						every_situation_group_participant = {
							trigger_event = storms_of_ormal.0002
						}
					}
				}
			}

			max_duration_next_phase = random_non_takeover

			future_phases = {
				situation_ormal_fair_weather_season = {
				}
				situation_ormal_storm_season = {
				}
				situation_ormal_osses_fury_season = {
					takeover_type = points
					takeover_points = 1000
					catalysts = {
						# Passage of time
						catalyst_situation_passing_of_time_osse = medium_ormal_catalyst_gain
						catalyst_situation_passing_of_time_lucky_chance_osse = major_ormal_catalyst_gain
					}
				}
				situation_ormal_uinens_blessing_season = {
					takeover_type = points
					takeover_points = 1000
					catalysts = {
						# Passage of time
						catalyst_situation_passing_of_time_uinen = medium_ormal_catalyst_gain
						catalyst_situation_passing_of_time_lucky_chance_uinen = major_ormal_catalyst_gain
					}
				}
			}

			modifier_sets = {
				#TBD, should be nothing major as it's a neutral state
			}
		}

		situation_ormal_storm_season = {

			# icon = "gfx/interface/icons/seasons/storm.dds"			
			# illustration = "gfx/interface/illustrations/terrain_types/lotr_ormal_season_storm.dds"
			max_duration = { days = 3650 }
			
			on_start = {
				scope:situation_sub_region = {
					save_scope_as = my_subregion
					every_situation_sub_region_participant_group = {
						limit = { participant_group_type = naval_rulers_capital }
						every_situation_group_participant = {
							trigger_event = storms_of_ormal.0002
						}
					}
				}
			}

			max_duration_next_phase = random_non_takeover

			future_phases = {
				situation_ormal_fair_weather_season = {
				}
				situation_ormal_changeable_season = {
				}
				situation_ormal_osses_fury_season = {
					takeover_type = points
					takeover_points = 1000
					catalysts = {
						# Passage of time
						catalyst_situation_passing_of_time_osse = medium_ormal_catalyst_gain
						catalyst_situation_passing_of_time_lucky_chance_osse = major_ormal_catalyst_gain
					}
				}
				situation_ormal_uinens_blessing_season = {
					takeover_type = points
					takeover_points = 1000
					catalysts = {
						# Passage of time
						catalyst_situation_passing_of_time_uinen = medium_ormal_catalyst_gain
						catalyst_situation_passing_of_time_lucky_chance_uinen = major_ormal_catalyst_gain
					}
				}
			}

			modifier_sets = {
				situation_ormal_dev_and_tax_effects = {
					icon = "gfx/interface/icons/icon_gold.dds"
					
					naval_rulers_capital = {
						county_modifier = {
							development_growth_factor = ormal_storm_growth_mult_value
							tax_mult = ormal_storm_tax_mult_value
							monthly_county_control_growth_factor = ormal_storm_control_growth_value
						}
					}
					
					naval_rulers_realm = {
						county_modifier = {
							development_growth_factor = ormal_storm_growth_mult_value
							tax_mult = ormal_storm_tax_mult_value
							monthly_county_control_growth_factor = ormal_storm_control_growth_value
						}
					}
				}
					
				situation_ormal_subject_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_subject.dds"

					naval_rulers_capital = {
						character_modifier = {
							vassal_opinion = -20
						}
					}
				}
				
				situation_ormal_military_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_military.dds"
					
					naval_rulers_capital = {
						character_modifier = {
							men_at_arms_maintenance = 0.2
						}
					}
				}
			}
		}

		situation_ormal_osses_fury_season = {

			# icon = "gfx/interface/icons/seasons/ossess_fury.dds"			
			# illustration = "gfx/interface/illustrations/terrain_types/lotr_ormal_season_ossess_fury.dds"
			max_duration = { days = 3650 }
			
			on_start = {
				scope:situation_sub_region = {
					save_scope_as = my_subregion
					every_situation_sub_region_participant_group = {
						limit = { participant_group_type = naval_rulers_capital }
						every_situation_group_participant = {
							trigger_event = storms_of_ormal.0002
						}
					}
				}
			}

			max_duration_next_phase = random_non_takeover

			future_phases = {
				situation_ormal_fair_weather_season = {
				}
				situation_ormal_changeable_season = {
				}
				situation_ormal_storm_season = {
				}
				situation_ormal_uinens_blessing_season = {
					takeover_type = points
					takeover_points = 1000
					catalysts = {
						# Passage of time
						catalyst_situation_passing_of_time_uinen = medium_ormal_catalyst_gain
						catalyst_situation_passing_of_time_lucky_chance_uinen = major_ormal_catalyst_gain
					}
				}
			}

			modifier_sets = {
				situation_ormal_dev_and_tax_effects = {
					icon = "gfx/interface/icons/icon_gold.dds"
					
					naval_rulers_capital = {
						county_modifier = {
							development_growth_factor = ormal_osses_fury_growth_mult_value
							tax_mult = ormal_osses_fury_tax_mult_value
							monthly_county_control_growth_factor = ormal_osses_fury_control_growth_value
						}
					}
					
					naval_rulers_realm = {
						county_modifier = {
							development_growth_factor = ormal_osses_fury_growth_mult_value
							tax_mult = ormal_osses_fury_tax_mult_value
							monthly_county_control_growth_factor = ormal_osses_fury_control_growth_value
						}
					}
				}
					
				situation_ormal_subject_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_subject.dds"

					naval_rulers_capital = {
						character_modifier = {
							vassal_opinion = -75
						}
					}
				}
				
				situation_ormal_military_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_military.dds"
					
					naval_rulers_capital = {
						character_modifier = {
							men_at_arms_maintenance = 0.5
						}
					}
				}
			}
		}

		situation_ormal_uinens_blessing_season = {

			# icon = "gfx/interface/icons/seasons/uinens_blessing.dds"			
			# illustration = "gfx/interface/illustrations/terrain_types/lotr_ormal_season_uinens_blessing.dds"
			max_duration = { days = 3650 }
			
			on_start = {
				scope:situation_sub_region = {
					save_scope_as = my_subregion
					every_situation_sub_region_participant_group = {
						limit = { participant_group_type = naval_rulers_capital }
						every_situation_group_participant = {
							trigger_event = storms_of_ormal.0002
						}
					}
				}
			}

			max_duration_next_phase = random_non_takeover

			future_phases = {
				situation_ormal_fair_weather_season = {
				}
				situation_ormal_changeable_season = {
				}
				situation_ormal_storm_season = {
				}
				situation_ormal_osses_fury_season = {
					takeover_type = points
					takeover_points = 1000
					catalysts = {
						# Passage of time
						catalyst_situation_passing_of_time_uinen = medium_ormal_catalyst_gain
						catalyst_situation_passing_of_time_lucky_chance_uinen = major_ormal_catalyst_gain
					}
				}
			}

			modifier_sets = {
				situation_ormal_dev_and_tax_effects = {
					icon = "gfx/interface/icons/icon_gold.dds"
					
					naval_rulers_capital = {
						county_modifier = {
							development_growth_factor = ormal_uinens_blessing_growth_mult_value
							tax_mult = ormal_uinens_blessing_tax_mult_value
							monthly_county_control_growth_factor = ormal_uinens_blessing_control_growth_value
						}
					}
					
					naval_rulers_realm = {
						county_modifier = {
							development_growth_factor = ormal_uinens_blessing_growth_mult_value
							tax_mult = ormal_uinens_blessing_tax_mult_value
							monthly_county_control_growth_factor = ormal_uinens_blessing_control_growth_value
						}
					}
				}
					
				situation_ormal_subject_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_subject.dds"

					naval_rulers_capital = {
						character_modifier = {
							vassal_opinion = 75
						}
					}
				}
				
				situation_ormal_military_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_military.dds"
					
					naval_rulers_capital = {
						character_modifier = {
							men_at_arms_maintenance = -0.5
						}
					}
				}

				situation_ormal_personal_effects = {
					icon = "gfx/interface/icons/situations/situation_modifier_character.dds"
					
					naval_rulers_capital = {
						parameters = {
							ormal_cheaper_sailing = yes
						}
					}
				}
			}
		}
	}
}

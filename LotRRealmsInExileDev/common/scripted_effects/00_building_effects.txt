#####################################################################
# EFFECT LIST
#####################################################################
# !!! Remember to add all new effects with a short description here !!!

#add_next_building_tier_effect
#add_random_building_effect
#add_random_building_variable_effect

#####################################################################
# EFFECTS
#####################################################################

# Builds or upgrades the specified building, e.g. outposts
add_next_building_tier_effect = {
	if = {
		limit = {
			NOT = { has_building_or_higher = $BUILDING$_01 }
		}
		add_building = $BUILDING$_01
	}
	else_if = {
		limit = { has_building = $BUILDING$_01 }
		add_building = $BUILDING$_02
	}
	else_if = {
		limit = { has_building = $BUILDING$_02 }
		add_building = $BUILDING$_03
	}
	else_if = {
		limit = { has_building = $BUILDING$_03 }
		add_building ?= $BUILDING$_04
	}
	else_if = {
		limit = { has_building = $BUILDING$_04 }
		add_building ?= $BUILDING$_05
	}
	else_if = {
		limit = { has_building = $BUILDING$_05 }
		add_building ?= $BUILDING$_06
	}
	else_if = {
		limit = { has_building = $BUILDING$_06 }
		add_building ?= $BUILDING$_07
	}
	else_if = {
		limit = { has_building = $BUILDING$_07 }
		add_building ?= $BUILDING$_08
	}
}

#LotR effects for buildings with =/= 7 tiers

add_next_building_2_tier_effect = {
	if = {
		limit = {
			NOT = { has_building_or_higher = $BUILDING$_01 }
		}
		add_building = $BUILDING$_01
	}
	else_if = {
		limit = { has_building = $BUILDING$_01 }
		add_building = $BUILDING$_02
	}
}

add_next_building_3_tier_effect = {
	if = {
		limit = {
			NOT = { has_building_or_higher = $BUILDING$_01 }
		}
		add_building = $BUILDING$_01
	}
	else_if = {
		limit = { has_building = $BUILDING$_01 }
		add_building = $BUILDING$_02
	}
	else_if = {
		limit = { has_building = $BUILDING$_02 }
		add_building = $BUILDING$_03
	}
}

add_next_building_5_tier_effect = {
	if = {
		limit = {
			NOT = { has_building_or_higher = $BUILDING$_01 }
		}
		add_building = $BUILDING$_01
	}
	else_if = {
		limit = { has_building = $BUILDING$_01 }
		add_building = $BUILDING$_02
	}
	else_if = {
		limit = { has_building = $BUILDING$_02 }
		add_building = $BUILDING$_03
	}
	else_if = {
		limit = { has_building = $BUILDING$_03 }
		add_building ?= $BUILDING$_04
	}
	else_if = {
		limit = { has_building = $BUILDING$_04 }
		add_building ?= $BUILDING$_05
	}
}

add_next_building_7_tier_effect = {
	if = {
		limit = {
			NOT = { has_building_or_higher = $BUILDING$_01 }
		}
		add_building = $BUILDING$_01
	}
	else_if = {
		limit = { has_building = $BUILDING$_01 }
		add_building = $BUILDING$_02
	}
	else_if = {
		limit = { has_building = $BUILDING$_02 }
		add_building = $BUILDING$_03
	}
	else_if = {
		limit = { has_building = $BUILDING$_03 }
		add_building ?= $BUILDING$_04
	}
	else_if = {
		limit = { has_building = $BUILDING$_04 }
		add_building ?= $BUILDING$_05
	}
	else_if = {
		limit = { has_building = $BUILDING$_05 }
		add_building ?= $BUILDING$_06
	}
	else_if = {
		limit = { has_building = $BUILDING$_06 }
		add_building ?= $BUILDING$_07
	}
}

add_next_building_10_tier_effect = {
	if = {
		limit = {
			NOT = { has_building_or_higher = $BUILDING$_01 }
		}
		add_building = $BUILDING$_01
	}
	else_if = {
		limit = { has_building = $BUILDING$_01 }
		add_building = $BUILDING$_02
	}
	else_if = {
		limit = { has_building = $BUILDING$_02 }
		add_building = $BUILDING$_03
	}
	else_if = {
		limit = { has_building = $BUILDING$_03 }
		add_building ?= $BUILDING$_04
	}
	else_if = {
		limit = { has_building = $BUILDING$_04 }
		add_building ?= $BUILDING$_05
	}
	else_if = {
		limit = { has_building = $BUILDING$_05 }
		add_building ?= $BUILDING$_06
	}
	else_if = {
		limit = { has_building = $BUILDING$_06 }
		add_building ?= $BUILDING$_07
	}
	else_if = {
		limit = { has_building = $BUILDING$_07 }
		add_building ?= $BUILDING$_08
	}
	else_if = {
		limit = { has_building = $BUILDING$_08 }
		add_building ?= $BUILDING$_09
	}
	else_if = {
		limit = { has_building = $BUILDING$_09 }
		add_building ?= $BUILDING$_10
	}
}

#### Create Random Building - 2 Part Effect ####

# creates a random building in a holding, limited by innovations and holding level, and weighted to cheapest/lowest level, excludes tribal holdings/buildings, only for use in castle/church/city baronies

# ensure the event/script where this is used checks that a building can be built, based on innovations and holding level, as if noe can be built this effect will do absolutely nada

# 1, sets variable based on fitness of possible buildings
add_random_building_variable_effect = { # Province scope
	province_owner = { save_scope_as = build_owner }
	province_owner = { save_scope_as = holder } #Since building requirements reference scope:holder.
	if = { #LotR - checking the holder is eligible to human buildings
		limit = { province_owner = { lotr_normal_building_trigger = yes } }
		random_list = { # Which building?
			# Generic/Terrain
			10 = { # outposts : Cheap
				trigger = {
					add_random_building_trigger = { BUILDING = outposts } # Generic eligiblity
					generic_recruitment_building_innovations_trigger = { BUILDING = outposts }
				}
				set_variable = {
					name = random_building_variable
					value = 0
					days = 365
				}
			}
			10 = { # logging_camps : Cheap
				trigger = {
					add_random_building_trigger = { BUILDING = logging_camps }
					generic_economic_building_innovation_trigger = { BUILDING = logging_camps }
				}
				set_variable = {
					name = random_building_variable
					value = 1
					days = 365
				}
			}
			10 = { # peat_quarries : Cheap
				trigger = {
					add_random_building_trigger = { BUILDING = peat_quarries }
					generic_economic_building_innovation_trigger = { BUILDING = peat_quarries }
				}
				set_variable = {
					name = random_building_variable
					value = 2
					days = 365
				}
			}
			10 = { # hill_forts : Cheap
				trigger = {
					add_random_building_trigger = { BUILDING = hill_forts }
					generic_fortification_building_innovations_trigger = { BUILDING = hill_forts }
				}
				set_variable = {
					name = random_building_variable
					value = 3
					days = 365
				}
			}
			10 = { # plantations : Cheap
				trigger = {
					add_random_building_trigger = { BUILDING = plantations }
					generic_economic_building_innovation_trigger = { BUILDING = plantations }
				}
				set_variable = {
					name = random_building_variable
					value = 4
					days = 365
				}
			}
			10 = { # quarries : Cheap
				trigger = {
					add_random_building_trigger = { BUILDING = quarries }
					generic_economic_building_innovation_trigger = { BUILDING = quarries }
				}
				set_variable = {
					name = random_building_variable
					value = 5
					days = 365
				}
			}
			10 = { # hunting_grounds : Cheap
				trigger = {
					add_random_building_trigger = { BUILDING = hunting_grounds }
					generic_economic_building_innovation_trigger = { BUILDING = hunting_grounds }
				}
				set_variable = {
					name = random_building_variable
					value = 6
					days = 365
				}
			}
			10 = { # military_camps : Cheap
				trigger = {
					add_random_building_trigger = { BUILDING = military_camps }
					generic_recruitment_building_innovations_trigger = { BUILDING = military_camps }
				}
				set_variable = {
					name = random_building_variable
					value = 7
					days = 365
				}
			}
			10 = { # horse_pastures : Cheap
				trigger = {
					add_random_building_trigger = { BUILDING = horse_pastures }
					generic_recruitment_building_innovations_trigger = { BUILDING = horse_pastures }
				}
				set_variable = {
					name = random_building_variable
					value = 8
					days = 365
				}
			}
			10 = { # hillside_grazing : Cheap
				trigger = {
					add_random_building_trigger = { BUILDING = hillside_grazing }
					generic_recruitment_building_innovations_trigger = { BUILDING = hillside_grazing }
				}
				set_variable = {
					name = random_building_variable
					value = 9
					days = 365
				}
			}
			10 = { # warrior_lodges : Cheap
				trigger = {
					add_random_building_trigger = { BUILDING = warrior_lodges }
					generic_recruitment_building_innovations_trigger = { BUILDING = warrior_lodges }
				}
				set_variable = {
					name = random_building_variable
					value = 10
					days = 365
				}
			}
			2 = { # pastures : Normal
				trigger = {
					add_random_building_trigger = { BUILDING = pastures }
					generic_economic_building_innovation_trigger = { BUILDING = pastures }
				}
				set_variable = {
					name = random_building_variable
					value = 11
					days = 365
				}
			}
			2 = { # ramparts : Normal
				trigger = {
					add_random_building_trigger = { BUILDING = ramparts }
					generic_fortification_building_innovations_trigger = { BUILDING = ramparts }
				}
				set_variable = {
					name = random_building_variable
					value = 12
					days = 365
				}
			}
			2 = { # curtain_walls : Normal
				trigger = {
					add_random_building_trigger = { BUILDING = curtain_walls }
					generic_fortification_building_innovations_trigger = { BUILDING = curtain_walls }
				}
				set_variable = {
					name = random_building_variable
					value = 13
					days = 365
				}
			}
			2 = { # watchtowers : Normal
				trigger = {
					add_random_building_trigger = { BUILDING = watchtowers }
					generic_fortification_building_innovations_trigger = { BUILDING = watchtowers }
				}
				set_variable = {
					name = random_building_variable
					value = 14
					days = 365
				}
			}
			2 = { # cereal_fields : Normal
				trigger = {
					add_random_building_trigger = { BUILDING = cereal_fields }
					generic_economic_building_innovation_trigger = { BUILDING = cereal_fields }
				}
				set_variable = {
					name = random_building_variable
					value = 15
					days = 365
				}
			}
			2 = { # barracks : Normal
				trigger = {
					add_random_building_trigger = { BUILDING = barracks }
					generic_recruitment_building_innovations_trigger = { BUILDING = barracks }
				}
				set_variable = {
					name = random_building_variable
					value = 16
					days = 365
				}
			}
			2 = { # camel_farms : Normal
				trigger = {
					add_random_building_trigger = { BUILDING = camel_farms }
					generic_recruitment_building_innovations_trigger = { BUILDING = camel_farms }
				}
				set_variable = {
					name = random_building_variable
					value = 17
					days = 365
				}
			}
			2 = { # hill_farms : Normal
				trigger = {
					add_random_building_trigger = { BUILDING = hill_farms }
					generic_economic_building_innovation_trigger = { BUILDING = hill_farms }
				}
				set_variable = {
					name = random_building_variable
					value = 18
					days = 365
				}
			}
			2 = { # elephant_pens : Normal
				trigger = {
					add_random_building_trigger = { BUILDING = elephant_pens }
					generic_economic_building_innovation_trigger = { BUILDING = elephant_pens }
				}
				set_variable = {
					name = random_building_variable
					value = 19
					days = 365
				}
			}
			2 = { # common_tradeport : Normal
				trigger = {
					add_random_building_trigger = { BUILDING = common_tradeport }
					# Innovation triggers
					trigger_if = {
						limit = { has_building_or_higher = common_tradeport_01 }
						scope:build_owner.culture = {
							OR = {
								has_innovation = innovation_crop_rotation
								has_cultural_parameter = next_level_trade_ports
							}
						}
					}
					trigger_if = {
						limit = { has_building_or_higher = common_tradeport_02 }
						building_requirement_castle_city_church = { LEVEL = 02 }
						scope:build_owner.culture = {
							OR = {
								has_innovation = innovation_manorialism
								AND = {
									has_innovation = innovation_crop_rotation
									has_cultural_parameter = next_level_trade_ports
								}
							}
						}
					}
					trigger_if = {
						limit = { has_building_or_higher = common_tradeport_04 }
						building_requirement_castle_city_church = { LEVEL = 03 }
						scope:build_owner.culture = {
							OR = {
								has_innovation = innovation_windmills
								AND = {
									has_innovation = innovation_manorialism
									has_cultural_parameter = next_level_trade_ports
								}
							}
						}
					}
					trigger_if = {
						limit = { has_building_or_higher = common_tradeport_06 }
						building_requirement_castle_city_church = { LEVEL = 04 }
						scope:build_owner.culture = {
							OR = {
								has_innovation = innovation_cranes
								AND = {
									has_innovation = innovation_windmills
									has_cultural_parameter = next_level_trade_ports
								}
							}
						}
					}
				}
				set_variable = {
					name = random_building_variable
					value = 20
					days = 365
				}
			}
			2 = { # hospices : Normal
				trigger = {
					add_random_building_trigger = { BUILDING = hospices }
					generic_economic_building_innovation_trigger = { BUILDING = hospices }
				}
				set_variable = {
					name = random_building_variable
					value = 21
					days = 365
				}
			}
			2 = { # qanats : Normal
				trigger = {
					add_random_building_trigger = { BUILDING = qanats }
					building_requirement_castle_city_church = { LEVEL = 01 }
					trigger_if = {
						limit = {
							NOT = {
								has_building_or_higher = qanats_01
							}
						}
						scope:build_owner.culture = {
							has_cultural_parameter = unlocks_qanat_building
						}
					}
					trigger_if = {
						limit = {
							has_building_or_higher = qanats_02
						}
						building_requirement_castle_city_church = { LEVEL = 02 }
					}
					trigger_if = {
						limit = {
							has_building_or_higher = qanats_04
						}
						building_requirement_castle_city_church = { LEVEL = 03 }
					}
					trigger_if = {
						limit = {
							has_building_or_higher = qanats_06
						}
						building_requirement_castle_city_church = { LEVEL = 04 }
					}
				}
				set_variable = {
					name = random_building_variable
					value = 22
					days = 365
				}
			}
			2 = { # murex_farm : Normal
				trigger = {
					add_random_building_trigger = { BUILDING = murex_farm }
					building_requirement_castle_city_church = { LEVEL = 01 }
					county = { NOT = { has_county_modifier = backwater_county_modifier } }
					trigger_if = {
						limit = {
							has_building_or_higher = murex_farm_02
						}
						building_requirement_castle_city_church = { LEVEL = 02 }
					}
					trigger_if = {
						limit = {
							has_building_or_higher = murex_farm_04
						}
						building_requirement_castle_city_church = { LEVEL = 03 }
					}
					trigger_if = {
						limit = {
							has_building_or_higher = murex_farm_06
						}
						building_requirement_castle_city_church = { LEVEL = 03 }
					}
				}
				set_variable = {
					name = random_building_variable
					value = 23
					days = 365
				}
			}
			2 = { # wind_furnace : Normal
				trigger = {
					add_random_building_trigger = { BUILDING = wind_furnace }
					building_requirement_castle_city_church = { LEVEL = 01 }
					trigger_if = {
						limit = {
							has_building_or_higher = wind_furnace_01
						}
						scope:build_owner.culture = {
							has_innovation = innovation_barracks
						}
					}
					trigger_if = {
						limit = {
							has_building_or_higher = wind_furnace_02
						}
						building_requirement_castle_city_church = { LEVEL = 02 }
						scope:build_owner.culture = {
							has_innovation = innovation_burhs
						}
					}
					trigger_if = {
						limit = {
							has_building_or_higher = wind_furnace_04
						}
						building_requirement_castle_city_church = { LEVEL = 03 }
						scope:build_owner.culture = {
							has_innovation = innovation_castle_baileys
						}
					}
					trigger_if = {
						limit = {
							has_building_or_higher = wind_furnace_05
						}
						scope:build_owner.culture = {
							has_innovation = innovation_royal_armory
						}
					}
					trigger_if = {
						limit = {
							has_building_or_higher = wind_furnace_06
						}
						building_requirement_castle_city_church = { LEVEL = 04 }
					}
				}
				set_variable = {
					name = random_building_variable
					value = 24
					days = 365
				}
			}
			2 = { # stables : Normal
				trigger = {
					add_random_building_trigger = { BUILDING = stables }
					generic_recruitment_building_innovations_trigger = { BUILDING = stables }
				}
				set_variable = {
					name = random_building_variable
					value = 25
					days = 365
				}
			}
			2 = { # smiths : Normal
				trigger = {
					add_random_building_trigger = { BUILDING = smiths }
					generic_recruitment_building_innovations_trigger = { BUILDING = smiths }
				}
				set_variable = {
					name = random_building_variable
					value = 26
					days = 365
				}
			}
			1 = { # orchards : Expensive
				trigger = {
					add_random_building_trigger = { BUILDING = orchards }
					generic_economic_building_innovation_trigger = { BUILDING = orchards }
				}
				set_variable = {
					name = random_building_variable
					value = 27
					days = 365
				}
			}
			1 = { # farm_estates : Expensive
				trigger = {
					add_random_building_trigger = { BUILDING = farm_estates }
					generic_economic_building_innovation_trigger = { BUILDING = farm_estates }
				}
				set_variable = {
					name = random_building_variable
					value = 28
					days = 365
				}
			}
			1 = { # regimental_grounds : Expensive
				trigger = {
					add_random_building_trigger = { BUILDING = regimental_grounds }
					generic_recruitment_building_innovations_trigger = { BUILDING = regimental_grounds }
				}
				set_variable = {
					name = random_building_variable
					value = 29
					days = 365
				}
			}
			1 = { # caravanserai : Expensive
				trigger = {
					is_county_capital = yes
					building_caravanserai_requirement_terrain = yes
					scope:build_owner.culture = {
						has_innovation = innovation_guilds
					}
					building_requirement_castle_city_church = { LEVEL = 01 }
					trigger_if = { # if all slots are full, this building type exists already
						limit = { free_building_slots = 0 }
						has_building_or_higher = caravanserai_01
					}
					trigger_if = {
						limit = { has_building_or_higher = caravanserai_01 }
						NOT = {
							has_lesser_building_trigger = { COMPARE = caravanserai }
						}
					}
					# City level triggers
					trigger_if = {
						limit = { has_building_or_higher = caravanserai_02 }
						building_requirement_castle_city_church = { LEVEL = 02 }
					}
					trigger_if = {
						limit = { has_building_or_higher = caravanserai_04 }
						building_requirement_castle_city_church = { LEVEL = 03 }
					}
					trigger_if = {
						limit = { has_building_or_higher = caravanserai_05 }
						scope:build_owner.culture = { has_innovation = innovation_cranes }
					}
					trigger_if = {
						limit = { has_building_or_higher = caravanserai_06 }
						building_requirement_castle_city_church = { LEVEL = 04 }
					}
				}
				set_variable = {
					name = random_building_variable
					value = 30
					days = 365
				}
			}
			1 = { # watermills : Expensive
				trigger = {
					is_county_capital = yes
					building_watermills_requirement_terrain = yes
					scope:build_owner.culture = {
						has_innovation = innovation_windmills
					}
					building_requirement_castle_city_church = { LEVEL = 01 }
					trigger_if = { # if all slots are full, this building type exists already
						limit = { free_building_slots = 0 }
						has_building_or_higher = watermills_01
					}
					trigger_if = {
						limit = { has_building_or_higher = watermills_01 }
						NOT = {
							has_lesser_building_trigger = { COMPARE = watermills }
						}
					}
					# City level triggers
					trigger_if = {
						limit = { has_building_or_higher = watermills_02 }
						building_requirement_castle_city_church = { LEVEL = 02 }
					}
					trigger_if = {
						limit = { has_building_or_higher = watermills_04 }
						building_requirement_castle_city_church = { LEVEL = 03 }
					}
					trigger_if = {
						limit = { has_building_or_higher = watermills_05 }
						scope:build_owner.culture = { has_innovation = innovation_cranes }
					}
					trigger_if = {
						limit = { has_building_or_higher = watermills_06 }
						building_requirement_castle_city_church = { LEVEL = 04 }
					}
				}
				set_variable = {
					name = random_building_variable
					value = 31
					days = 365
				}
			}
			1 = { # windmills : Expensive
				trigger = {
					is_county_capital = yes
					building_windmills_requirement_terrain = yes
					scope:build_owner.culture = {
						has_innovation = innovation_windmills
					}
					building_requirement_castle_city_church = { LEVEL = 01 }
					trigger_if = { # if all slots are full, this building type exists already
						limit = { free_building_slots = 0 }
						has_building_or_higher = windmills_01
					}
					trigger_if = {
						limit = { has_building_or_higher = windmills_01 }
						NOT = {
							has_lesser_building_trigger = { COMPARE = windmills }
						}
					}
					# City level triggers
					trigger_if = {
						limit = { has_building_or_higher = windmills_02 }
						building_requirement_castle_city_church = { LEVEL = 02 }
					}
					trigger_if = {
						limit = { has_building_or_higher = windmills_04 }
						building_requirement_castle_city_church = { LEVEL = 03 }
					}
					trigger_if = {
						limit = { has_building_or_higher = windmills_05 }
						scope:build_owner.culture = { has_innovation = innovation_cranes }
					}
					trigger_if = {
						limit = { has_building_or_higher = windmills_06 }
						building_requirement_castle_city_church = { LEVEL = 04 }
					}
				}
				set_variable = {
					name = random_building_variable
					value = 32
					days = 365
				}
			}
			1 = { # workshops : Expensive
				trigger = {
					add_random_building_trigger = { BUILDING = workshops }
					building_requirement_castle_city_church = { LEVEL = 01 }
					scope:build_owner.culture = {
						has_innovation = innovation_advanced_bowmaking
					}
					trigger_if = {
						limit = {
							has_building_or_higher = workshops_02
						}
						building_requirement_castle_city_church = { LEVEL = 02 }
					}
					trigger_if = {
						limit = {
							has_building_or_higher = workshops_04
						}
						building_requirement_castle_city_church = { LEVEL = 03 }
					}
					trigger_if = {
						limit = {
							has_building_or_higher = workshops_05
						}
						scope:build_owner.culture = {
							has_innovation = innovation_royal_armory
						}
					}
					trigger_if = {
						limit = {
							has_building_or_higher = workshops_06
						}
						building_requirement_castle_city_church = { LEVEL = 04 }
					}
				}
				set_variable = {
					name = random_building_variable
					value = 33
					days = 365
				}
			}
			# Holding Type Specific : Normal
			10 = { # monastic_schools : Normal
				trigger = {
					has_holding_type = church_holding
					trigger_if = { # if all slots are full, this building type exists already
						limit = { free_building_slots = 0 }
						has_building_or_higher = monastic_schools_01
					}
					trigger_if = {
						limit = { has_building_or_higher = monastic_schools_01 }
						NOT = {
							has_lesser_building_trigger = { COMPARE = monastic_schools }
						}
					}
					# Innovation triggers
					trigger_if = {
						limit = { has_building_or_higher = monastic_schools_01 }
						scope:build_owner.culture = { has_innovation = innovation_city_planning }
					}
					trigger_if = {
						limit = { has_building_or_higher = monastic_schools_02 }
						building_requirement_castle_city_church = { LEVEL = 02 }
						scope:build_owner.culture = { has_innovation = innovation_manorialism }
					}
					trigger_if = {
						limit = { has_building_or_higher = monastic_schools_04 }
						building_requirement_castle_city_church = { LEVEL = 03 }
						scope:build_owner.culture = { has_innovation = innovation_windmills }
					}
					trigger_if = {
						limit = { has_building_or_higher = monastic_schools_06 }
						building_requirement_castle_city_church = { LEVEL = 04 }
						scope:build_owner.culture = { has_innovation = innovation_cranes }
					}
				}
				set_variable = {
					name = random_building_variable
					value = 34
					days = 365
				}
			}
			10 = { # guild_halls : Normal
				trigger = {
					has_holding_type = city_holding
					trigger_if = { # if all slots are full, this building type exists already
						limit = { free_building_slots = 0 }
						has_building_or_higher = guild_halls_01
					}
					trigger_if = {
						limit = { has_building_or_higher = guild_halls_01 }
						NOT = {
							has_lesser_building_trigger = { COMPARE = guild_halls }
						}
					}
					# Innovation triggers
					trigger_if = {
						limit = { has_building_or_higher = guild_halls_01 }
						scope:build_owner.culture = {
							OR = {
								has_innovation = innovation_crop_rotation
								has_cultural_parameter = next_level_guild_halls
							}
						}
					}
					trigger_if = {
						limit = { has_building_or_higher = guild_halls_02 }
						OR = {
							AND = {
								building_requirement_castle_city_church = { LEVEL = 02 }
								scope:build_owner.culture = {
									has_innovation = innovation_manorialism
								}
							}
							scope:build_owner.culture = {
								has_cultural_parameter = next_level_guild_halls
								has_innovation = innovation_crop_rotation
							}
						}
					}
					trigger_if = {
						limit = { has_building_or_higher = guild_halls_04 }
						OR = {
							AND = {
								building_requirement_castle_city_church = { LEVEL = 03 }
								scope:build_owner.culture = {
									has_innovation = innovation_guilds
								}
							}
							AND = {
								building_requirement_castle_city_church = { LEVEL = 02 }
								scope:build_owner.culture = {
									has_cultural_parameter = next_level_guild_halls
									has_innovation = innovation_manorialism
								}
							}
						}
					}
					trigger_if = {
						limit = { has_building_or_higher = guild_halls_06 }
						OR = {
							AND = {
								building_requirement_castle_city_church = { LEVEL = 04 }
								scope:build_owner.culture = {
									has_innovation = innovation_cranes
								}
							}
							AND = {
								building_requirement_castle_city_church = { LEVEL = 03 }
								scope:build_owner.culture = {
									has_cultural_parameter = next_level_guild_halls
									has_innovation = innovation_guilds
								}
							}
						}
					}
				}
				set_variable = {
					name = random_building_variable
					value = 35
					days = 365
				}
			}
			10 = { # scriptorium : Normal
				trigger = {
					has_holding_type = church_holding
					scope:build_owner = {
						has_dlc_feature = legends
					}
					trigger_if = { # if all slots are full, this building type exists already
						limit = { free_building_slots = 0 }
						has_building_or_higher = scriptorium_01
					}
					trigger_if = {
						limit = { has_building_or_higher = scriptorium_01 }
						NOT = {
							has_lesser_building_trigger = { COMPARE = scriptorium }
						}
					}
					generic_economic_building_innovation_trigger = { BUILDING = scriptorium }
				}
				set_variable = {
					name = random_building_variable
					value = 36
					days = 365
				}
			}
			10 = { # megalith : Normal
				trigger = {
					has_holding_type = church_holding
					scope:build_owner.faith = {
						has_doctrine_parameter = can_build_megaliths
					}
					trigger_if = { # if all slots are full, this building type exists already
						limit = { free_building_slots = 0 }
						has_building_or_higher = megalith_01
					}
					trigger_if = {
						limit = { has_building_or_higher = megalith_01 }
						NOT = {
							has_lesser_building_trigger = { COMPARE = megalith }
						}
					}
					trigger_if = {
						limit = { has_building_or_higher = megalith_02 }
						scope:build_owner.culture = {
							has_innovation = innovation_city_planning
						}
					}
					trigger_if = {
						limit = { has_building_or_higher = megalith_03 }
						building_requirement_castle_city_church = { LEVEL = 02 }
					}
				}
				set_variable = {
					name = random_building_variable
					value = 37
					days = 365
				}
			}
		}
	}
	else_if = {
		limit = { province_owner = { is_dwarf = yes } }
		random_list = { #Which building ?
			10 = { # Dwarven Ale House : Cheap
				trigger = {
					add_random_lotr_10_building_trigger = { BUILDING = dwarven_ale_house }
					# Holding level triggers
					trigger_if = {
						limit = { has_building_or_higher = dwarven_ale_house_02 }
						has_building_or_higher = dwarven_depths_02
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_ale_house_03 }
						has_building_or_higher = dwarven_depths_03
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_ale_house_04 }
						has_building_or_higher = dwarven_depths_04
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_ale_house_05 }
						has_building_or_higher = dwarven_depths_05
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_ale_house_06 }
						has_building_or_higher = dwarven_depths_06
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_ale_house_07 }
						has_building_or_higher = dwarven_depths_07
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_ale_house_08 }
						has_building_or_higher = dwarven_depths_08
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_ale_house_09 }
						has_building_or_higher = dwarven_depths_09
					}
				}
				set_variable = {
					name = random_building_variable
					value = 38
					days = 365
				}
			}
			10 = { # Dwarven Fungal Farm : Cheap
				trigger = {
					add_random_lotr_10_building_trigger = { BUILDING = dwarven_fungal_farm }
					lotr_dwarven_underground_buildings_requirement_terrain = yes
					#Holding level triggers
					trigger_if = {
						limit = { has_building_or_higher = dwarven_fungal_farm_02 }
						has_building_or_higher = dwarven_depths_02
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_fungal_farm_03 }
						has_building_or_higher = dwarven_depths_03
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_fungal_farm_04 }
						has_building_or_higher = dwarven_depths_04
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_fungal_farm_05 }
						has_building_or_higher = dwarven_depths_05
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_fungal_farm_06 }
						has_building_or_higher = dwarven_depths_06
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_fungal_farm_07 }
						has_building_or_higher = dwarven_depths_07
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_fungal_farm_08 }
						has_building_or_higher = dwarven_depths_08
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_fungal_farm_09 }
						has_building_or_higher = dwarven_depths_09
					}
				}
				set_variable = {
					name = random_building_variable
					value = 39
					days = 365
				}
			}
			10 = { # Dwarven Terrace Farm : Cheap
				trigger = {
					add_random_lotr_10_building_trigger = { BUILDING = dwarven_terrace_farm }
					OR = {
						lotr_dwarven_underground_buildings_requirement_terrain = yes
						lotr_dwarven_hill_buildings_requirement_terrain = yes
					}
					#Holding level triggers
					trigger_if = {
						limit = { has_building_or_higher = dwarven_terrace_farm_02 }
						has_building_or_higher = dwarven_depths_02
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_terrace_farm_03 }
						has_building_or_higher = dwarven_depths_03
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_terrace_farm_04 }
						has_building_or_higher = dwarven_depths_04
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_terrace_farm_05 }
						has_building_or_higher = dwarven_depths_05
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_terrace_farm_06 }
						has_building_or_higher = dwarven_depths_06
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_terrace_farm_07 }
						has_building_or_higher = dwarven_depths_07
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_terrace_farm_08 }
						has_building_or_higher = dwarven_depths_08
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_terrace_farm_09 }
						has_building_or_higher = dwarven_depths_09
					}
				}
				set_variable = {
					name = random_building_variable
					value = 40
					days = 365
				}
			}
			10 = { # Dwarven Quarry : Cheap
				trigger = {
					add_random_lotr_10_building_trigger = { BUILDING = dwarven_quarry }
					lotr_dwarven_underground_buildings_requirement_terrain = yes
					#Holding level triggers
					trigger_if = {
						limit = { has_building_or_higher = dwarven_quarry_02 }
						has_building_or_higher = dwarven_depths_02
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_quarry_03 }
						has_building_or_higher = dwarven_depths_03
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_quarry_04 }
						has_building_or_higher = dwarven_depths_04
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_quarry_05 }
						has_building_or_higher = dwarven_depths_05
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_quarry_06 }
						has_building_or_higher = dwarven_depths_06
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_quarry_07 }
						has_building_or_higher = dwarven_depths_07
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_quarry_08 }
						has_building_or_higher = dwarven_depths_08
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_quarry_09 }
						has_building_or_higher = dwarven_depths_09
					}
				}
				set_variable = {
					name = random_building_variable
					value = 41
					days = 365
				}
			}
			10 = { # Dwarven Crafts : Cheap
				trigger = {
					add_random_lotr_10_building_trigger = { BUILDING = dwarven_crafts }
					lotr_dwarven_underground_buildings_requirement_terrain = yes
					#Holding level triggers
					trigger_if = {
						limit = { has_building_or_higher = dwarven_crafts_02 }
						has_building_or_higher = dwarven_depths_02
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_crafts_03 }
						has_building_or_higher = dwarven_depths_03
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_crafts_04 }
						has_building_or_higher = dwarven_depths_04
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_crafts_05 }
						has_building_or_higher = dwarven_depths_05
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_crafts_06 }
						has_building_or_higher = dwarven_depths_06
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_crafts_07 }
						has_building_or_higher = dwarven_depths_07
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_crafts_08 }
						has_building_or_higher = dwarven_depths_08
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_crafts_09 }
						has_building_or_higher = dwarven_depths_09
					}
				}
				set_variable = {
					name = random_building_variable
					value = 42
					days = 365
				}
			}
			10 = { # Dwarven Toolmaker Guild : Cheap
				trigger = {
					add_random_lotr_10_building_trigger = { BUILDING = dwarven_toolmaker_guild }
					lotr_dwarven_underground_buildings_requirement_terrain = yes
					#Holding level triggers
					trigger_if = {
						limit = { has_building_or_higher = dwarven_toolmaker_guild_02 }
						has_building_or_higher = dwarven_depths_02
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_toolmaker_guild_03 }
						has_building_or_higher = dwarven_depths_03
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_toolmaker_guild_04 }
						has_building_or_higher = dwarven_depths_04
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_toolmaker_guild_05 }
						has_building_or_higher = dwarven_depths_05
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_toolmaker_guild_06 }
						has_building_or_higher = dwarven_depths_06
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_toolmaker_guild_07 }
						has_building_or_higher = dwarven_depths_07
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_toolmaker_guild_08 }
						has_building_or_higher = dwarven_depths_08
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_toolmaker_guild_09 }
						has_building_or_higher = dwarven_depths_09
					}
				}
				set_variable = {
					name = random_building_variable
					value = 43
					days = 365
				}
			}
			10 = { # Dwarven Vaults : Cheap
				trigger = {
					add_random_lotr_10_building_trigger = { BUILDING = dwarven_vaults }
					lotr_dwarven_underground_buildings_requirement_terrain = yes
					#Holding level triggers
					trigger_if = {
						limit = { has_building_or_higher = dwarven_vaults_02 }
						has_building_or_higher = dwarven_depths_02
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_vaults_03 }
						has_building_or_higher = dwarven_depths_03
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_vaults_04 }
						has_building_or_higher = dwarven_depths_04
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_vaults_05 }
						has_building_or_higher = dwarven_depths_05
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_vaults_06 }
						has_building_or_higher = dwarven_depths_06
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_vaults_07 }
						has_building_or_higher = dwarven_depths_07
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_vaults_08 }
						has_building_or_higher = dwarven_depths_08
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_vaults_09 }
						has_building_or_higher = dwarven_depths_09
					}
				}
				set_variable = {
					name = random_building_variable
					value = 44
					days = 365
				}
			}
			10 = { # Dwarven Roads : Cheap
				trigger = {
					add_random_lotr_10_building_trigger = { BUILDING = dwarven_roads }
					lotr_dwarven_underground_buildings_requirement_terrain = yes
					#Holding level triggers
					trigger_if = {
						limit = { has_building_or_higher = dwarven_roads_02 }
						has_building_or_higher = dwarven_depths_02
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_roads_03 }
						has_building_or_higher = dwarven_depths_03
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_roads_04 }
						has_building_or_higher = dwarven_depths_04
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_roads_05 }
						has_building_or_higher = dwarven_depths_05
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_roads_06 }
						has_building_or_higher = dwarven_depths_06
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_roads_07 }
						has_building_or_higher = dwarven_depths_07
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_roads_08 }
						has_building_or_higher = dwarven_depths_08
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_roads_09 }
						has_building_or_higher = dwarven_depths_09
					}
				}
				set_variable = {
					name = random_building_variable
					value = 45
					days = 365
				}
			}
			10 = { # Dwarven Armory : cheap
				trigger = {
					add_random_lotr_10_building_trigger = { BUILDING = dwarven_armory }
					lotr_dwarven_underground_buildings_requirement_terrain = yes
					has_building_or_higher = dwarven_depths_01
					has_building_or_higher = dwarven_toolmaker_guild_01
					#Holding level triggers
					trigger_if = {
						limit = { has_building_or_higher = dwarven_armory_02 }
						has_building_or_higher = dwarven_depths_02
						has_building_or_higher = dwarven_toolmaker_guild_02
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_armory_03 }
						has_building_or_higher = dwarven_depths_03
						has_building_or_higher = dwarven_toolmaker_guild_03
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_armory_04 }
						has_building_or_higher = dwarven_depths_04
						has_building_or_higher = dwarven_toolmaker_guild_04
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_armory_05 }
						has_building_or_higher = dwarven_depths_05
						has_building_or_higher = dwarven_toolmaker_guild_05
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_armory_06 }
						has_building_or_higher = dwarven_depths_06
						has_building_or_higher = dwarven_toolmaker_guild_06
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_armory_07 }
						has_building_or_higher = dwarven_depths_07
						has_building_or_higher = dwarven_toolmaker_guild_07
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_armory_08 }
						has_building_or_higher = dwarven_depths_08
						has_building_or_higher = dwarven_toolmaker_guild_08
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_armory_09 }
						has_building_or_higher = dwarven_depths_09
						has_building_or_higher = dwarven_toolmaker_guild_09
					}
				}
				set_variable = {
					name = random_building_variable
					value = 46
					days = 365
				}
			}
			10 = { # Dwarven HI barracks : cheap
				trigger = {
					add_random_lotr_10_building_trigger = { BUILDING = dwarven_hi_barracks }
					lotr_dwarven_underground_buildings_requirement_terrain = yes
					building_requirement_tribal = no
					has_building_or_higher = dwarven_armory_01
					#Armory level triggers
					trigger_if = {
						limit = { has_building_or_higher = dwarven_hi_barracks_02 }
						has_building_or_higher = dwarven_armory_02
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_hi_barracks_03 }
						has_building_or_higher = dwarven_armory_03
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_hi_barracks_04 }
						has_building_or_higher = dwarven_armory_04
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_hi_barracks_05 }
						has_building_or_higher = dwarven_armory_05
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_hi_barracks_06 }
						has_building_or_higher = dwarven_armory_06
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_hi_barracks_07 }
						has_building_or_higher = dwarven_armory_07
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_hi_barracks_08 }
						has_building_or_higher = dwarven_armory_08
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_hi_barracks_09 }
						has_building_or_higher = dwarven_armory_09
					}
				}
				set_variable = {
					name = random_building_variable
					value = 47
					days = 365
				}
			}
			10 = { # Dwarven Pike barracks : cheap
				trigger = {
					add_random_lotr_10_building_trigger = { BUILDING = dwarven_pike_barracks }
					lotr_dwarven_underground_buildings_requirement_terrain = yes
					building_requirement_tribal = no
					has_building_or_higher = dwarven_armory_01
					#Armory level triggers
					trigger_if = {
						limit = { has_building_or_higher = dwarven_pike_barracks_02 }
						has_building_or_higher = dwarven_armory_02
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_pike_barracks_03 }
						has_building_or_higher = dwarven_armory_03
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_pike_barracks_04 }
						has_building_or_higher = dwarven_armory_04
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_pike_barracks_05 }
						has_building_or_higher = dwarven_armory_05
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_pike_barracks_06 }
						has_building_or_higher = dwarven_armory_06
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_pike_barracks_07 }
						has_building_or_higher = dwarven_armory_07
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_pike_barracks_08 }
						has_building_or_higher = dwarven_armory_08
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_pike_barracks_09 }
						has_building_or_higher = dwarven_armory_09
					}
				}
				set_variable = {
					name = random_building_variable
					value = 48
					days = 365
				}
			}
			10 = { # Dwarven Archer barracks : cheap
				trigger = {
					add_random_lotr_10_building_trigger = { BUILDING = dwarven_archer_barracks }
					lotr_dwarven_underground_buildings_requirement_terrain = yes
					building_requirement_tribal = no
					has_building_or_higher = dwarven_armory_01
					#Armory level triggers
					trigger_if = {
						limit = { has_building_or_higher = dwarven_archer_barracks_02 }
						has_building_or_higher = dwarven_armory_02
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_archer_barracks_03 }
						has_building_or_higher = dwarven_armory_03
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_archer_barracks_04 }
						has_building_or_higher = dwarven_armory_04
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_archer_barracks_05 }
						has_building_or_higher = dwarven_armory_05
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_archer_barracks_06 }
						has_building_or_higher = dwarven_armory_06
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_archer_barracks_07 }
						has_building_or_higher = dwarven_armory_07
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_archer_barracks_08 }
						has_building_or_higher = dwarven_armory_08
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_archer_barracks_09 }
						has_building_or_higher = dwarven_armory_09
					}
				}
				set_variable = {
					name = random_building_variable
					value = 49
					days = 365
				}
			}
			10 = { # Dwarven Skirmisher barracks : cheap
				trigger = {
					add_random_lotr_10_building_trigger = { BUILDING = dwarven_skirmisher_barracks }
					lotr_dwarven_underground_buildings_requirement_terrain = yes
					building_requirement_tribal = no
					has_building_or_higher = dwarven_armory_01
					#Armory level triggers
					trigger_if = {
						limit = { has_building_or_higher = dwarven_skirmisher_barracks_02 }
						has_building_or_higher = dwarven_armory_02
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_skirmisher_barracks_03 }
						has_building_or_higher = dwarven_armory_03
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_skirmisher_barracks_04 }
						has_building_or_higher = dwarven_armory_04
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_skirmisher_barracks_05 }
						has_building_or_higher = dwarven_armory_05
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_skirmisher_barracks_06 }
						has_building_or_higher = dwarven_armory_06
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_skirmisher_barracks_07 }
						has_building_or_higher = dwarven_armory_07
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_skirmisher_barracks_08 }
						has_building_or_higher = dwarven_armory_08
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_skirmisher_barracks_09 }
						has_building_or_higher = dwarven_armory_09
					}
				}
				set_variable = {
					name = random_building_variable
					value = 50
					days = 365
				}
			}
			10 = { # Dwarven Siege Workshops : cheap
				trigger = {
					add_random_lotr_5_building_trigger = { BUILDING = dwarven_siege_workshop }
					lotr_dwarven_underground_buildings_requirement_terrain = yes
					building_requirement_tribal = no
					has_building_or_higher = dwarven_armory_01
					#Armory level triggers
					trigger_if = {
						limit = { has_building_or_higher = dwarven_siege_workshop_02 }
						has_building_or_higher = dwarven_armory_02
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_siege_workshop_03 }
						has_building_or_higher = dwarven_armory_03
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_siege_workshop_04 }
						has_building_or_higher = dwarven_armory_04
					}
				}
				set_variable = {
					name = random_building_variable
					value = 51
					days = 365
				}
			}
			1 = { # Dwarven Hoard : Expensive
				trigger = {
					add_random_lotr_5_building_trigger = { BUILDING = dwarven_hoard }
					has_building_or_higher = dwarven_depths_06
					OR = {
						has_building_or_higher = iron_mines_06
						has_building_or_higher = tin_mines_06
						has_building_or_higher = copper_mines_06
						has_building_or_higher = lead_mines_06
						has_building_or_higher = silver_mines_06
						has_building_or_higher = gold_mines_06
						has_building_or_higher = mithril_mines_06
						has_building_or_higher = quartz_mines_06
						has_building_or_higher = peridot_mines_06
						has_building_or_higher = onyx_mines_06
						has_building_or_higher = amethyst_mines_06
						has_building_or_higher = ruby_mines_06
						has_building_or_higher = sapphire_mines_06
						has_building_or_higher = emerald_mines_06
						has_building_or_higher = diamond_mines_06
					}
					#Holding level triggers
					trigger_if = {
						limit = { has_building_or_higher = dwarven_hoard_01 }
						has_building_or_higher = dwarven_depths_07
						OR = {
							has_building_or_higher = iron_mines_07
							has_building_or_higher = tin_mines_07
							has_building_or_higher = copper_mines_07
							has_building_or_higher = lead_mines_07
							has_building_or_higher = silver_mines_07
							has_building_or_higher = gold_mines_07
							has_building_or_higher = mithril_mines_07
							has_building_or_higher = quartz_mines_07
							has_building_or_higher = peridot_mines_07
							has_building_or_higher = onyx_mines_07
							has_building_or_higher = amethyst_mines_07
							has_building_or_higher = ruby_mines_07
							has_building_or_higher = sapphire_mines_07
							has_building_or_higher = emerald_mines_07
							has_building_or_higher = diamond_mines_07
						}
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_hoard_02 }
						has_building_or_higher = dwarven_depths_08
						OR = {
							has_building_or_higher = iron_mines_08
							has_building_or_higher = tin_mines_08
							has_building_or_higher = copper_mines_08
							has_building_or_higher = lead_mines_08
							has_building_or_higher = silver_mines_08
							has_building_or_higher = gold_mines_08
							has_building_or_higher = mithril_mines_08
							has_building_or_higher = quartz_mines_08
							has_building_or_higher = peridot_mines_08
							has_building_or_higher = onyx_mines_08
							has_building_or_higher = amethyst_mines_08
							has_building_or_higher = ruby_mines_08
							has_building_or_higher = sapphire_mines_08
							has_building_or_higher = emerald_mines_08
							has_building_or_higher = diamond_mines_08
						}
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_hoard_03 }
						has_building_or_higher = dwarven_depths_09
						OR = {
							has_building_or_higher = iron_mines_09
							has_building_or_higher = tin_mines_09
							has_building_or_higher = copper_mines_09
							has_building_or_higher = lead_mines_09
							has_building_or_higher = silver_mines_09
							has_building_or_higher = gold_mines_09
							has_building_or_higher = mithril_mines_09
							has_building_or_higher = quartz_mines_09
							has_building_or_higher = peridot_mines_09
							has_building_or_higher = onyx_mines_09
							has_building_or_higher = amethyst_mines_09
							has_building_or_higher = ruby_mines_09
							has_building_or_higher = sapphire_mines_09
							has_building_or_higher = emerald_mines_09
							has_building_or_higher = diamond_mines_09
						}
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_hoard_04 }
						has_building_or_higher = dwarven_depths_10
						OR = {
							has_building_or_higher = iron_mines_10
							has_building_or_higher = tin_mines_10
							has_building_or_higher = copper_mines_10
							has_building_or_higher = lead_mines_10
							has_building_or_higher = silver_mines_10
							has_building_or_higher = gold_mines_10
							has_building_or_higher = mithril_mines_10
							has_building_or_higher = quartz_mines_10
							has_building_or_higher = peridot_mines_10
							has_building_or_higher = onyx_mines_10
							has_building_or_higher = amethyst_mines_10
							has_building_or_higher = ruby_mines_10
							has_building_or_higher = sapphire_mines_10
							has_building_or_higher = emerald_mines_10
							has_building_or_higher = diamond_mines_10
						}
					}
				}
				set_variable = {
					name = random_building_variable
					value = 52
					days = 365
				}
			}
			1 = { # Dwarven Bank : expensive
				trigger = {
					add_random_lotr_3_building_trigger = { BUILDING = dwarven_bank_economic }
					lotr_dwarven_underground_buildings_requirement_terrain = yes
					building_requirement_tribal = no
					has_building_or_higher = economic_specialization_01
					# Eco spec level triggers
					trigger_if = {
						limit = { has_building_or_higher = dwarven_bank_economic_01 }
						has_building_or_higher = economic_specialization_02
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_bank_economic_02 }
						has_building_or_higher = economic_specialization_03
					}
				}
				set_variable = {
					name = random_building_variable
					value = 53
					days = 365
				}
			}
			1 = { # King's Armory : expensive
				trigger = {
					add_random_lotr_3_building_trigger = { BUILDING = dwarven_kings_armory_military }
					lotr_dwarven_underground_buildings_requirement_terrain = yes
					building_requirement_tribal = no
					has_building_or_higher = military_specialization_01
					# Mili spec level triggers
					trigger_if = {
						limit = { has_building_or_higher = dwarven_kings_armory_military_01 }
						has_building_or_higher = military_specialization_02
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_kings_armory_military_02 }
						has_building_or_higher = military_specialization_03
					}
				}
				set_variable = {
					name = random_building_variable
					value = 54
					days = 365
				}
			}
			1 = { # King's Armory : expensive
				trigger = {
					add_random_lotr_3_building_trigger = { BUILDING = dwarven_grand_library }
					lotr_dwarven_underground_buildings_requirement_terrain = yes
					building_requirement_tribal = no
					has_building_or_higher = glory_specialization_01
					# Glory spec level triggers
					trigger_if = {
						limit = { has_building_or_higher = dwarven_grand_library_01 }
						has_building_or_higher = glory_specialization_02
					}
					trigger_if = {
						limit = { has_building_or_higher = dwarven_grand_library_02 }
						has_building_or_higher = glory_specialization_03
					}
				}
				set_variable = {
					name = random_building_variable
					value = 55
					days = 365
				}
			}
		}
	}
	else_if = {
		limit = { province_owner = { is_elf = yes } }
		random_list = { #Which building ?
			10 = { # Elven Agriculture : Cheap
				trigger = {
					add_random_lotr_7_building_trigger = { BUILDING = elven_agriculture }
					has_building_or_higher = elven_settlement_01
					building_elven_agriculture_requirement_terrain = yes
				}
				set_variable = {
					name = random_building_variable
					value = 56
					days = 365
				}
			}
			10 = { # Elven Port : Cheap
				trigger = {
					add_random_lotr_7_building_trigger = { BUILDING = elven_port }
					building_common_tradeport_requirement_terrain = yes
					has_building_or_higher = elven_settlement_01
				}
				set_variable = {
					name = random_building_variable
					value = 57
					days = 365
				}
			}
			10 = { # Elven Mine : Cheap
				trigger = {
					add_random_lotr_7_building_trigger = { BUILDING = elven_mine }
					building_quarries_requirement_terrain = yes
					has_building_or_higher = elven_settlement_01
				}
				set_variable = {
					name = random_building_variable
					value = 58
					days = 365
				}
			}
			10 = { # Elven Forestry : Cheap
				trigger = {
					add_random_lotr_7_building_trigger = { BUILDING = elven_forestry }
					building_logging_camps_requirement_terrain = yes
					has_building_or_higher = elven_settlement_01
				}
				set_variable = {
					name = random_building_variable
					value = 59
					days = 365
				}
			}
			10 = { # Elven Hunting Grounds : Cheap
				trigger = {
					add_random_lotr_7_building_trigger = { BUILDING = elven_hunting_grounds }
					building_elven_hunting_grounds_requirement_terrain = yes
					has_building_or_higher = elven_settlement_01
				}
				set_variable = {
					name = random_building_variable
					value = 60
					days = 365
				}
			}
			10 = { # Elven Markets : Cheap
				trigger = {
					add_random_lotr_7_building_trigger = { BUILDING = elven_markets }
					has_building_or_higher = elven_settlement_01
				}
				set_variable = {
					name = random_building_variable
					value = 61
					days = 365
				}
			}
			10 = { # Elven Forges : Cheap
				trigger = {
					add_random_lotr_7_building_trigger = { BUILDING = elven_forges }
					has_building_or_higher = elven_settlement_01
				}
				set_variable = {
					name = random_building_variable
					value = 62
					days = 365
				}
			}
			10 = { # Elven Barracks : Cheap
				trigger = {
					add_random_lotr_7_building_trigger = { BUILDING = elven_barracks }
					has_building_or_higher = elven_settlement_01
				}
				set_variable = {
					name = random_building_variable
					value = 63
					days = 365
				}
			}
			10 = { # Elven Fletchers : Cheap
				trigger = {
					add_random_lotr_7_building_trigger = { BUILDING = elven_fletchers }
					has_building_or_higher = elven_settlement_01
				}
				set_variable = {
					name = random_building_variable
					value = 64
					days = 365
				}
			}
			10 = { # Elven Stables : Cheap
				trigger = {
					add_random_lotr_7_building_trigger = { BUILDING = elven_stables }
					has_building_or_higher = elven_settlement_01
				}
				set_variable = {
					name = random_building_variable
					value = 65
					days = 365
				}
			}
			10 = { # Tree Flet : Cheap
				trigger = {
					add_random_lotr_7_building_trigger = { BUILDING = tree_flet }
					has_building_or_higher = elven_settlement_01
				}
				set_variable = {
					name = random_building_variable
					value = 66
					days = 365
				}
			}
			2 = { # Elven Library : Normal
				trigger = {
					add_random_lotr_5_building_trigger = { BUILDING = elven_library }
					has_building_or_higher = elven_settlement_03
				}
				set_variable = {
					name = random_building_variable
					value = 67
					days = 365
				}
			}
			2 = { # Elven Guild : Normal
				trigger = {
					add_random_lotr_5_building_trigger = { BUILDING = elven_guild }
					has_building_or_higher = elven_settlement_03
				}
				set_variable = {
					name = random_building_variable
					value = 68
					days = 365
				}
			}
			2 = { # Elven Embassy : Normal
				trigger = {
					add_random_lotr_5_building_trigger = { BUILDING = elven_embassy }
					has_building_or_higher = elven_settlement_03
				}
				set_variable = {
					name = random_building_variable
					value = 69
					days = 365
				}
			}
			2 = { # Elven Mustering Grounds : Normal
				trigger = {
					add_random_lotr_5_building_trigger = { BUILDING = elven_mustering_grounds }
					has_building_or_higher = elven_settlement_03
				}
				set_variable = {
					name = random_building_variable
					value = 70
					days = 365
				}
			}
			2 = { # Elven Sanctuary : Normal
				trigger = {
					add_random_lotr_5_building_trigger = { BUILDING = elven_sanctuary }
					has_building_or_higher = elven_settlement_03
				}
				set_variable = {
					name = random_building_variable
					value = 71
					days = 365
				}
			}
			1 = { # Elven Citadel : Expensive
				trigger = {
					has_building_or_higher = elven_settlement_06
				}
				set_variable = {
					name = random_building_variable
					value = 72
					days = 365
				}
			}
			1 = { # Hall of Lords : Expensive
				trigger = {
					has_building_or_higher = elven_settlement_06
				}
				set_variable = {
					name = random_building_variable
					value = 73
					days = 365
				}
			}
		}
	}			
}

# 2, builds based on variable
add_random_building_construct_effect = { # Province scope
	if = {
		limit = { has_variable = random_building_variable }
		switch = {
			trigger = var:random_building_variable
			0 = {
				add_next_building_tier_effect = { BUILDING = outposts }
			}
			1 = {
				add_next_building_tier_effect = { BUILDING = logging_camps }
			}
			2 = {
				add_next_building_tier_effect = { BUILDING = peat_quarries }
			}
			3 = {
				add_next_building_tier_effect = { BUILDING = hill_forts }
			}
			4 = {
				add_next_building_tier_effect = { BUILDING = plantations }
			}
			5 = {
				add_next_building_tier_effect = { BUILDING = quarries }
			}
			6 = {
				add_next_building_tier_effect = { BUILDING = hunting_grounds }
			}
			7 = {
				add_next_building_tier_effect = { BUILDING = military_camps }
			}
			8 = {
				add_next_building_tier_effect = { BUILDING = horse_pastures }
			}
			9 = {
				add_next_building_tier_effect = { BUILDING = hillside_grazing }
			}
			10 = {
				add_next_building_tier_effect = { BUILDING = warrior_lodges }
			}
			11 = {
				add_next_building_tier_effect = { BUILDING = pastures }
			}
			12 = {
				add_next_building_tier_effect = { BUILDING = ramparts }
			}
			13 = {
				add_next_building_tier_effect = { BUILDING = curtain_walls }
			}
			14 = {
				add_next_building_tier_effect = { BUILDING = watchtowers }
			}
			15 = {
				add_next_building_tier_effect = { BUILDING = cereal_fields }
			}
			16 = {
				add_next_building_tier_effect = { BUILDING = barracks }
			}
			17 = {
				add_next_building_tier_effect = { BUILDING = camel_farms }
			}
			18 = {
				add_next_building_tier_effect = { BUILDING = hill_farms }
			}
			19 = {
				add_next_building_tier_effect = { BUILDING = elephant_pens }
			}
			20 = {
				add_next_building_tier_effect = { BUILDING = common_tradeport }
			}
			21 = {
				add_next_building_tier_effect = { BUILDING = hospices }
			}
			22 = {
				add_next_building_tier_effect = { BUILDING = qanats }
			}
			23 = {
				add_next_building_tier_effect = { BUILDING = murex_farm }
			}
			24 = {
				add_next_building_tier_effect = { BUILDING = wind_furnace }
			}
			25 = {
				add_next_building_tier_effect = { BUILDING = stables }
			}
			26 = {
				add_next_building_tier_effect = { BUILDING = smiths }
			}
			27 = {
				add_next_building_tier_effect = { BUILDING = orchards }
			}
			28 = {
				add_next_building_tier_effect = { BUILDING = farm_estates }
			}
			29 = {
				add_next_building_tier_effect = { BUILDING = regimental_grounds }
			}
			30 = {
				add_next_building_tier_effect = { BUILDING = caravanserai }
			}
			31 = {
				add_next_building_tier_effect = { BUILDING = windmills }
			}
			32 = {
				add_next_building_tier_effect = { BUILDING = watermills }
			}
			33 = {
				add_next_building_tier_effect = { BUILDING = workshops }
			}
			34 = {
				add_next_building_tier_effect = { BUILDING = monastic_schools }
			}
			35 = {
				add_next_building_tier_effect = { BUILDING = guild_halls }
			}
			36 = {
				add_next_building_tier_effect = { BUILDING = scriptorium }
			}
			37 = {
				add_next_building_tier_effect = { BUILDING = megalith }
			}
			38 = {
				add_next_building_10_tier_effect = { BUILDING = dwarven_ale_house }
			}
			39 = {
				add_next_building_10_tier_effect = { BUILDING = dwarven_fungal_farm }
			}
			40 = {
				add_next_building_10_tier_effect = { BUILDING = dwarven_terrace_farm }
			}
			41 = {
				add_next_building_10_tier_effect = { BUILDING = dwarven_quarry }
			}
			42 = {
				add_next_building_10_tier_effect = { BUILDING = dwarven_crafts }
			}
			43 = {
				add_next_building_10_tier_effect = { BUILDING = dwarven_toolmaker_guild }
			}
			44 = {
				add_next_building_10_tier_effect = { BUILDING = dwarven_vaults }
			}
			45 = {
				add_next_building_10_tier_effect = { BUILDING = dwarven_roads }
			}
			46 = {
				add_next_building_10_tier_effect = { BUILDING = dwarven_armory }
			}
			47 = {
				add_next_building_10_tier_effect = { BUILDING = dwarven_hi_barracks }
			}
			48 = {
				add_next_building_10_tier_effect = { BUILDING = dwarven_pike_barracks }
			}
			49 = {
				add_next_building_10_tier_effect = { BUILDING = dwarven_archer_barracks }
			}
			50 = {
				add_next_building_10_tier_effect = { BUILDING = dwarven_skirmisher_barracks }
			}
			51 = {
				add_next_building_5_tier_effect = { BUILDING = dwarven_siege_workshop }
			}
			52 = {
				add_next_building_3_tier_effect = { BUILDING = dwarven_hoard }
			}
			53 = {
				add_next_building_3_tier_effect = { BUILDING = dwarven_bank_economic }
			}
			54 = {
				add_next_building_3_tier_effect = { BUILDING = dwarven_kings_armory_military }
			}
			55 = {
				add_next_building_3_tier_effect = { BUILDING = dwarven_grand_library }
			}
			56 = {
				add_next_building_7_tier_effect = { BUILDING = elven_agriculture }
			}
			57 = {
				add_next_building_7_tier_effect = { BUILDING = elven_port }
			}
			58 = {
				add_next_building_7_tier_effect = { BUILDING = elven_mine }
			}
			59 = {
				add_next_building_7_tier_effect = { BUILDING = elven_forestry }
			}
			60 = {
				add_next_building_7_tier_effect = { BUILDING = elven_hunting_grounds }
			}
			61 = {
				add_next_building_7_tier_effect = { BUILDING = elven_markets }
			}
			62 = {
				add_next_building_7_tier_effect = { BUILDING = elven_forges }
			}
			63 = {
				add_next_building_7_tier_effect = { BUILDING = elven_barracks }
			}
			64 = {
				add_next_building_7_tier_effect = { BUILDING = elven_fletchers }
			}
			65 = {
				add_next_building_7_tier_effect = { BUILDING = elven_stables }
			}
			66 = {
				add_next_building_7_tier_effect = { BUILDING = tree_flet }
			}
			67 = {
				add_next_building_5_tier_effect = { BUILDING = elven_library }
			}
			68 = {
				add_next_building_5_tier_effect = { BUILDING = elven_guild }
			}
			67 = {
				add_next_building_5_tier_effect = { BUILDING = elven_embassy }
			}
			68 = {
				add_next_building_5_tier_effect = { BUILDING = elven_mustering_grounds }
			}
			69 = {
				add_next_building_5_tier_effect = { BUILDING = elven_sanctuary }
			}
			70 = {
				add_next_building_2_tier_effect = { BUILDING = elven_citadel }
			}
			71 = {
				add_next_building_2_tier_effect = { BUILDING = hall_of_lords }
			}
		}
		remove_variable = random_building_variable
	}
}

# For stuff that has exactly _eight_ levels of upgrades.
destroy_or_downgrade_building_effect = {
	if = {
		limit = { has_building = $BUILDING$_08 }
		remove_building = $BUILDING$_08
		hidden_effect = { add_building = $BUILDING$_07 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_07 }
		remove_building = $BUILDING$_07
		hidden_effect = { add_building = $BUILDING$_06 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_06 }
		remove_building = $BUILDING$_06
		hidden_effect = { add_building = $BUILDING$_05 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_05 }
		remove_building = $BUILDING$_05
		hidden_effect = { add_building = $BUILDING$_04 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_04 }
		remove_building = $BUILDING$_04
		hidden_effect = { add_building = $BUILDING$_03 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_03 }
		remove_building = $BUILDING$_03
		hidden_effect = { add_building = $BUILDING$_02 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_02 }
		remove_building = $BUILDING$_02
		hidden_effect = { add_building = $BUILDING$_01 }
	}
	else = { remove_building = $BUILDING$_01 }
}

# For stuff that has exactly _three_ levels of upgrades.
destroy_or_downgrade_ducal_building_effect = {
	if = {
		limit = { has_building = $BUILDING$_03 }
		remove_building = $BUILDING$_03
		hidden_effect = { add_building = $BUILDING$_02 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_02 }
		remove_building = $BUILDING$_02
		hidden_effect = { add_building = $BUILDING$_01 }
	}
	else = { remove_building = $BUILDING$_01 }
}

# For stuff that has exactly _two_ levels of upgrades.
destroy_or_downgrade_tribal_building_effect = {
	if = {
		limit = { has_building = $BUILDING$_02 }
		remove_building = $BUILDING$_02
		hidden_effect = { add_building = $BUILDING$_01 }
	}
	else = { remove_building = $BUILDING$_01 }
}

# For stuff that has exactly _ten_ levels of upgrades.
destroy_or_downgrade_10_building_effect = {
	if = {
		limit = { has_building = $BUILDING$_10 }
		remove_building = $BUILDING$_10
		hidden_effect = { add_building = $BUILDING$_09 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_09 }
		remove_building = $BUILDING$_09
		hidden_effect = { add_building = $BUILDING$_08 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_08 }
		remove_building = $BUILDING$_08
		hidden_effect = { add_building = $BUILDING$_07 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_07 }
		remove_building = $BUILDING$_07
		hidden_effect = { add_building = $BUILDING$_06 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_06 }
		remove_building = $BUILDING$_06
		hidden_effect = { add_building = $BUILDING$_05 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_05 }
		remove_building = $BUILDING$_05
		hidden_effect = { add_building = $BUILDING$_04 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_04 }
		remove_building = $BUILDING$_04
		hidden_effect = { add_building = $BUILDING$_03 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_03 }
		remove_building = $BUILDING$_03
		hidden_effect = { add_building = $BUILDING$_02 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_02 }
		remove_building = $BUILDING$_02
		hidden_effect = { add_building = $BUILDING$_01 }
	}
	else = { remove_building = $BUILDING$_01 }
}

# For stuff that has exactly _seven_ levels of upgrades.
destroy_or_downgrade_7_building_effect = {
	if = {
		limit = { has_building = $BUILDING$_07 }
		remove_building = $BUILDING$_07
		hidden_effect = { add_building = $BUILDING$_06 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_06 }
		remove_building = $BUILDING$_06
		hidden_effect = { add_building = $BUILDING$_05 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_05 }
		remove_building = $BUILDING$_05
		hidden_effect = { add_building = $BUILDING$_04 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_04 }
		remove_building = $BUILDING$_04
		hidden_effect = { add_building = $BUILDING$_03 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_03 }
		remove_building = $BUILDING$_03
		hidden_effect = { add_building = $BUILDING$_02 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_02 }
		remove_building = $BUILDING$_02
		hidden_effect = { add_building = $BUILDING$_01 }
	}
	else = { remove_building = $BUILDING$_01 }
}

# For stuff that has exactly _five_ levels of upgrades.
destroy_or_downgrade_5_building_effect = {
	if = {
		limit = { has_building = $BUILDING$_05 }
		remove_building = $BUILDING$_05
		hidden_effect = { add_building = $BUILDING$_04 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_04 }
		remove_building = $BUILDING$_04
		hidden_effect = { add_building = $BUILDING$_03 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_03 }
		remove_building = $BUILDING$_03
		hidden_effect = { add_building = $BUILDING$_02 }
	}
	else_if = {
		limit = { has_building = $BUILDING$_02 }
		remove_building = $BUILDING$_02
		hidden_effect = { add_building = $BUILDING$_01 }
	}
	else = { remove_building = $BUILDING$_01 }
}

destroy_random_building_variable_effect = { # Province scope
	save_scope_as = raid_province
	if = {
		limit = { has_variable = destroyed_building_variable }
		remove_variable = destroyed_building_variable
	}
	random_list = { # Which building?
		# Generic/Terrain
		10 = { # outposts : Cheap
			trigger = { has_building_or_higher = outposts_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 0
				months = 1
			}
		}
		10 = { # logging_camps : Cheap
			trigger = { has_building_or_higher = logging_camps_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 1
				months = 1
			}
		}
		10 = { # peat_quarries : Cheap
			trigger = { has_building_or_higher = peat_quarries_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 2
				months = 1
			}
		}
		10 = { # hill_forts : Cheap
			trigger = { has_building_or_higher = hill_forts_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 3
				months = 1
			}
		}
		10 = { # plantations : Cheap
			trigger = { has_building_or_higher = plantations_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 4
				months = 1
			}
		}
		10 = { # quarries : Cheap
			trigger = { has_building_or_higher = quarries_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 5
				months = 1
			}
		}
		10 = { # hunting_grounds : Cheap
			trigger = { has_building_or_higher = hunting_grounds_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 6
				months = 1
			}
		}
		10 = { # military_camps : Cheap
			trigger = { has_building_or_higher = military_camps_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 7
				months = 1
			}
		}
		10 = { # horse_pastures : Cheap
			trigger = { has_building_or_higher = horse_pastures_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 8
				months = 1
			}
		}
		10 = { # hillside_grazing : Cheap
			trigger = { has_building_or_higher = hillside_grazing_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 9
				months = 1
			}
		}
		10 = { # warrior_lodges : Cheap
			trigger = { has_building_or_higher = warrior_lodges_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 10
				months = 1
			}
		}
		2 = { # pastures : Normal
			trigger = { has_building_or_higher = pastures_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 11
				months = 1
			}
		}
		2 = { # ramparts : Normal
			trigger = { has_building_or_higher = ramparts_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 12
				months = 1
			}
		}
		2 = { # curtain_walls : Normal
			trigger = { has_building_or_higher = curtain_walls_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 13
				months = 1
			}
		}
		2 = { # watchtowers : Normal
			trigger = { has_building_or_higher = watchtowers_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 14
				months = 1
			}
		}
		2 = { # cereal_fields : Normal
			trigger = { has_building_or_higher = cereal_fields_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 15
				months = 1
			}
		}
		2 = { # barracks : Normal
			trigger = { has_building_or_higher = barracks_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 16
				months = 1
			}
		}
		2 = { # camel_farms : Normal
			trigger = { has_building_or_higher = camel_farms_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 17
				months = 1
			}
		}
		2 = { # hill_farms : Normal
			trigger = { has_building_or_higher = hill_farms_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 18
				months = 1
			}
		}
		2 = { # elephant_pens : Normal
			trigger = { has_building_or_higher = elephant_pens_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 19
				months = 1
			}
		}
		2 = { # common_tradeport : Normal
			trigger = { has_building_or_higher = common_tradeport_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 20
				months = 1
			}
		}
		2 = { # hospices : Normal
			trigger = { has_building_or_higher = hospices_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 21
				months = 1
			}
		}
		2 = { # qanats : Normal
			trigger = { has_building_or_higher = qanats_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 22
				months = 1
			}
		}
		2 = { # murex_farm : Normal
			trigger = { has_building_or_higher = murex_farm_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 23
				months = 1
			}
		}
		2 = { # wind_furnace : Normal
			trigger = { has_building_or_higher = wind_furnace_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 24
				months = 1
			}
		}
		2 = { # stables : Normal
			trigger = { has_building_or_higher = stables_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 25
				months = 1
			}
		}
		2 = { # smiths : Normal
			trigger = { has_building_or_higher = smiths_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 26
				months = 1
			}
		}
		1 = { # orchards : Expensive
			trigger = { has_building_or_higher = orchards_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 27
				months = 1
			}
		}
		1 = { # farm_estates : Expensive
			trigger = { has_building_or_higher = farm_estates_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 28
				months = 1
			}
		}
		1 = { # regimental_grounds : Expensive
			trigger = { has_building_or_higher = regimental_grounds_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 29
				months = 1
			}
		}
		1 = { # caravanserai : Expensive
			trigger = { has_building_or_higher = caravanserai_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 30
				months = 1
			}
		}
		1 = { # watermills : Expensive
			trigger = { has_building_or_higher = watermills_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 31
				months = 1
			}
		}
		1 = { # windmills : Expensive
			trigger = { has_building_or_higher = windmills_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 32
				months = 1
			}
		}
		1 = { # workshops : Expensive
			trigger = { has_building_or_higher = workshops_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 33
				months = 1
			}
		}
		# Holding Type Specific : Normal
		10 = { # monastic_schools : Normal
			trigger = { has_building_or_higher = monastic_schools_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 21
				months = 1
			}
		}
		10 = { # guild_halls : Normal
			trigger = { has_building_or_higher = guild_halls_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 35
				months = 1
			}
		}
		10 = { # scriptorium : Normal
			trigger = { has_building_or_higher = scriptorium_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 36
				months = 1
			}
		}
		10 = { # megalith : Normal
			trigger = { has_building_or_higher = megalith_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 37
				months = 1
			}
		}
		10 = { #
			trigger = { has_building_or_higher = dwarven_ale_house_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 38
				months = 1
			}
		}
		10 = { #
			trigger = { has_building_or_higher = dwarven_fungal_farm_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 39
				months = 1
			}
		}
		10 = { #
			trigger = { has_building_or_higher = dwarven_fungal_farm_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 40
				months = 1
			}
		}
		10 = { #
			trigger = { has_building_or_higher = dwarven_quarry_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 41
				months = 1
			}
		}
		10 = { #
			trigger = { has_building_or_higher = dwarven_crafts_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 42
				months = 1
			}
		}
		10 = { #
			trigger = { has_building_or_higher = dwarven_toolmaker_guild_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 43
				months = 1
			}
		}
		10 = { #
			trigger = { has_building_or_higher = dwarven_vaults_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 44
				months = 1
			}
		}
		10 = { #
			trigger = { has_building_or_higher = dwarven_roads_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 45
				months = 1
			}
		}
		10 = { #
			trigger = { has_building_or_higher = dwarven_armory_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 46
				months = 1
			}
		}
		10 = { #
			trigger = { has_building_or_higher = dwarven_hi_barracks_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 47
				months = 1
			}
		}
		10 = { #
			trigger = { has_building_or_higher = dwarven_pike_barracks_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 48
				months = 1
			}
		}
		10 = { #
			trigger = { has_building_or_higher = dwarven_archer_barracks_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 49
				months = 1
			}
		}
		10 = { #
			trigger = { has_building_or_higher = dwarven_skirmisher_barracks_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 50
				months = 1
			}
		}
		10 = { #
			trigger = { has_building_or_higher = dwarven_siege_workshop_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 51
				months = 1
			}
		}
		1 = { #
			trigger = { has_building_or_higher = dwarven_hoard_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 52
				months = 1
			}
		}
		1 = { #
			trigger = { has_building_or_higher = dwarven_bank_economic_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 53
				months = 1
			}
		}
		1 = { #
			trigger = { has_building_or_higher = dwarven_kings_armory_military_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 54
				months = 1
			}
		}
		1 = { #
			trigger = { has_building_or_higher = dwarven_grand_library_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 55
				months = 1
			}
		}
		10 = { # Elven Agriculture : Cheap
			trigger = { has_building_or_higher = elven_agriculture_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 56
				months = 1
			}
		}
		10 = { # Elven Port : Cheap
			trigger = { has_building_or_higher = elven_port_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 57
				months = 1
			}
		}
		10 = { # Elven Mine : Cheap
			trigger = { has_building_or_higher = elven_mine_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 58
				months = 1
			}
		}
		10 = { # Elven Forestry : Cheap
			trigger = { has_building_or_higher = elven_forestry_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 59
				months = 1
			}
		}
		10 = { # Elven Hunting Grounds : Cheap
			trigger = { has_building_or_higher = elven_hunting_grounds_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 60
				months = 1
			}
		}
		10 = { # Elven Markets : Cheap
			trigger = { has_building_or_higher = elven_markets_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 61
				months = 1
			}
		}
		10 = { # Elven Forges : Cheap
			trigger = { has_building_or_higher = elven_forges_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 62
				months = 1
			}
		}
		10 = { # Elven Barracks : Cheap
			trigger = { has_building_or_higher = elven_barracks_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 63
				months = 1
			}
		}
		10 = { # Elven Fletchers : Cheap
			trigger = { has_building_or_higher = elven_fletchers_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 64
				months = 1
			}
		}
		10 = { # Elven Stables : Cheap
			trigger = { has_building_or_higher = elven_stables_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 65
				months = 1
			}
		}
		10 = { # Tree Flet : Cheap
			trigger = { has_building_or_higher = tree_flet_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 66
				months = 1
			}
		}
		2 = { # Elven Library : Normal
			trigger = { has_building_or_higher = elven_library_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 67
				months = 1
			}
		}
		2 = { # Elven Guild : Normal
			trigger = { has_building_or_higher = elven_guild_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 68
				months = 1
			}
		}
		2 = { # Elven Embassy : Normal
			trigger = { has_building_or_higher = elven_embassy_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 69
				months = 1
			}
		}
		2 = { # Elven Mustering Grounds : Normal
			trigger = { has_building_or_higher = elven_mustering_grounds_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 70
				months = 1
			}
		}
		2 = { # Elven Sanctuary : Normal
			trigger = { has_building_or_higher = elven_sanctuary_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 71
				months = 1
			}
		}
		1 = { # Elven Citadel : Expensive
			trigger = { has_building_or_higher = elven_citadel_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 72
				months = 1
			}
		}
		1 = { # Hall of Lords : Expensive
			trigger = { has_building_or_higher = hall_of_lords_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 73
				months = 1
			}
		}
	}
}

destroy_random_building_effect = {
	if = {
		limit = { has_variable = destroyed_building_variable }
		switch = {
			trigger = var:destroyed_building_variable
			0 = { # outposts : Cheap
				destroy_or_downgrade_building_effect = { BUILDING = outposts }
			}
			1 = { # logging_camps : Cheap
				destroy_or_downgrade_building_effect = { BUILDING = logging_camps }
			}
			2 = { # peat_quarries : Cheap
				destroy_or_downgrade_building_effect = { BUILDING = peat_quarries }
			}
			3 = { # hill_forts : Cheap
				destroy_or_downgrade_building_effect = { BUILDING = hill_forts }
			}
			4 = { # plantations : Cheap
				destroy_or_downgrade_building_effect = { BUILDING = plantations }
			}
			5 = { # quarries : Cheap
				destroy_or_downgrade_building_effect = { BUILDING = quarries }
			}
			6 = { # hunting_grounds : Cheap
				destroy_or_downgrade_building_effect = { BUILDING = hunting_grounds }
			}
			7 = { # military_camps : Cheap
				destroy_or_downgrade_building_effect = { BUILDING = military_camps }
			}
			8 = { # horse_pastures : Cheap
				destroy_or_downgrade_building_effect = { BUILDING = horse_pastures }
			}
			9 = { # hillside_grazing : Cheap
				destroy_or_downgrade_building_effect = { BUILDING = hillside_grazing }
			}
			10 = { # warrior_lodges : Cheap
				destroy_or_downgrade_building_effect = { BUILDING = warrior_lodges }
			}
			11 = { # pastures : Normal
				destroy_or_downgrade_building_effect = { BUILDING = pastures }
			}
			12 = { # ramparts : Normal
				destroy_or_downgrade_building_effect = { BUILDING = ramparts }
			}
			13 = { # curtain_walls : Normal
				destroy_or_downgrade_building_effect = { BUILDING = curtain_walls }
			}
			14 = { # watchtowers : Normal
				destroy_or_downgrade_building_effect = { BUILDING = watchtowers }
			}
			15 = { # cereal_fields : Normal
				destroy_or_downgrade_building_effect = { BUILDING = cereal_fields }
			}
			16 = { # barracks : Normal
				destroy_or_downgrade_building_effect = { BUILDING = barracks }
			}
			17 = { # camel_farms : Normal
				destroy_or_downgrade_building_effect = { BUILDING = camel_farms }
			}
			18 = { # hill_farms : Normal
				destroy_or_downgrade_building_effect = { BUILDING = hill_farms }
			}
			19 = { # elephant_pens : Normal
				destroy_or_downgrade_building_effect = { BUILDING = elephant_pens }
			}
			20 = { # common_tradeport : Normal
				destroy_or_downgrade_building_effect = { BUILDING = common_tradeport }
			}
			21 = { # hospices : Normal
				destroy_or_downgrade_building_effect = { BUILDING = hospices }
			}
			22 = { # qanats : Normal
				destroy_or_downgrade_building_effect = { BUILDING = qanats }
			}
			23 = { # murex_farm : Normal
				destroy_or_downgrade_building_effect = { BUILDING = murex_farm }
			}
			24 = { # wind_furnace : Normal
				destroy_or_downgrade_building_effect = { BUILDING = wind_furnace }
			}
			25 = { # stables : Normal
				destroy_or_downgrade_building_effect = { BUILDING = stables }
			}
			26 = { # smiths : Normal
				destroy_or_downgrade_building_effect = { BUILDING = smiths }
			}
			27 = { # orchards : Expensive
				destroy_or_downgrade_building_effect = { BUILDING = orchards }
			}
			28 = { # farm_estates : Expensive
				destroy_or_downgrade_building_effect = { BUILDING = farm_estates }
			}
			29 = { # regimental_grounds : Expensive
				destroy_or_downgrade_building_effect = { BUILDING = regimental_grounds }
			}
			30 = { # caravanserai : Expensive
				destroy_or_downgrade_building_effect = { BUILDING = caravanserai }
			}
			31 = { # watermills : Expensive
				destroy_or_downgrade_building_effect = { BUILDING = watermills }
			}
			32 = { # windmills : Expensive
				destroy_or_downgrade_building_effect = { BUILDING = windmills }
			}
			33 = { # workshops : Expensive
				destroy_or_downgrade_building_effect = { BUILDING = workshops }
			}
			# Holding Type Specific : Normal
			34 = { # monastic_schools : Normal
				destroy_or_downgrade_building_effect = { BUILDING = monastic_schools }
			}
			35 = { # guild_halls : Normal
				destroy_or_downgrade_building_effect = { BUILDING = guild_halls }
			}
			36 = { # scriptorium : Normal
				destroy_or_downgrade_building_effect = { BUILDING = scriptorium }
			}
			37 = { # megalith : Normal
				destroy_or_downgrade_building_effect = { BUILDING = megalith }
			}
			38 = {
				destroy_or_downgrade_10_building_effect = { BUILDING = dwarven_ale_house }
			}
			39 = {
				destroy_or_downgrade_10_building_effect = { BUILDING = dwarven_fungal_farm }
			}
			40 = {
				destroy_or_downgrade_10_building_effect = { BUILDING = dwarven_terrace_farm }
			}
			41 = {
				destroy_or_downgrade_10_building_effect = { BUILDING = dwarven_quarry }
			}
			42 = {
				destroy_or_downgrade_10_building_effect = { BUILDING = dwarven_crafts }
			}
			43 = {
				destroy_or_downgrade_10_building_effect = { BUILDING = dwarven_toolmaker_guild }
			}
			44 = {
				destroy_or_downgrade_10_building_effect = { BUILDING = dwarven_vaults }
			}
			45 = {
				destroy_or_downgrade_10_building_effect = { BUILDING = dwarven_roads }
			}
			46 = {
				destroy_or_downgrade_10_building_effect = { BUILDING = dwarven_armory }
			}
			47 = {
				destroy_or_downgrade_10_building_effect = { BUILDING = dwarven_hi_barracks }
			}
			48 = {
				destroy_or_downgrade_10_building_effect = { BUILDING = dwarven_pike_barracks }
			}
			49 = {
				destroy_or_downgrade_10_building_effect = { BUILDING = dwarven_archer_barracks }
			}
			50 = {
				destroy_or_downgrade_10_building_effect = { BUILDING = dwarven_skirmisher_barracks }
			}
			51 = {
				destroy_or_downgrade_5_building_effect = { BUILDING = dwarven_siege_workshop }
			}
			52 = {
				destroy_or_downgrade_ducal_building_effect = { BUILDING = dwarven_hoard }
			}
			53 = {
				destroy_or_downgrade_ducal_building_effect = { BUILDING = dwarven_bank_economic }
			}
			54 = {
				destroy_or_downgrade_ducal_building_effect = { BUILDING = dwarven_kings_armory_military }
			}
			55 = {
				destroy_or_downgrade_ducal_building_effect = { BUILDING = dwarven_grand_library }
			}
			56 = {
				destroy_or_downgrade_7_building_effect = { BUILDING = elven_agriculture }
			}
			57 = {
				destroy_or_downgrade_7_building_effect = { BUILDING = elven_port }
			}
			58 = {
				destroy_or_downgrade_7_building_effect = { BUILDING = elven_mine }
			}
			59 = {
				destroy_or_downgrade_7_building_effect = { BUILDING = elven_forestry }
			}
			60 = {
				destroy_or_downgrade_7_building_effect = { BUILDING = elven_hunting_grounds }
			}
			61 = {
				destroy_or_downgrade_7_building_effect = { BUILDING = elven_markets }
			}
			62 = {
				destroy_or_downgrade_7_building_effect = { BUILDING = elven_forges }
			}
			63 = {
				destroy_or_downgrade_7_building_effect = { BUILDING = elven_barracks }
			}
			64 = {
				destroy_or_downgrade_7_building_effect = { BUILDING = elven_fletchers }
			}
			65 = {
				destroy_or_downgrade_7_building_effect = { BUILDING = elven_stables }
			}
			66 = {
				destroy_or_downgrade_7_building_effect = { BUILDING = tree_flet }
			}
			67 = {
				destroy_or_downgrade_5_building_effect = { BUILDING = elven_library }
			}
			68 = {
				destroy_or_downgrade_5_building_effect = { BUILDING = elven_guild }
			}
			67 = {
				destroy_or_downgrade_5_building_effect = { BUILDING = elven_embassy }
			}
			68 = {
				destroy_or_downgrade_5_building_effect = { BUILDING = elven_mustering_grounds }
			}
			69 = {
				destroy_or_downgrade_5_building_effect = { BUILDING = elven_sanctuary }
			}
			70 = {
				destroy_or_downgrade_tribal_building_effect = { BUILDING = elven_citadel }
			}
			71 = {
				destroy_or_downgrade_tribal_building_effect = { BUILDING = hall_of_lords }
			}
		}
		remove_variable = destroyed_building_variable
	}
}

destroy_or_downgrade_estate_building_2_effect = {
	if = {
		limit = { has_domicile_building = $BUILDING$_02 }
		lower_domicile_building_no_refund = $BUILDING$_02
	}
	else = { remove_domicile_building_no_refund = $BUILDING$_01 }
}

destroy_or_downgrade_estate_building_3_effect = {
	if = {
		limit = { has_domicile_building = $BUILDING$_03 }
		lower_domicile_building_no_refund = $BUILDING$_03
	}
	else_if = {
		limit = { has_domicile_building = $BUILDING$_02 }
		lower_domicile_building_no_refund = $BUILDING$_02
	}
	else = { remove_domicile_building_no_refund = $BUILDING$_01 }
}

destroy_or_downgrade_estate_building_4_effect = {
	if = {
		limit = { has_domicile_building = $BUILDING$_04 }
		lower_domicile_building_no_refund = $BUILDING$_04
	}
	else_if = {
		limit = { has_domicile_building = $BUILDING$_03 }
		lower_domicile_building_no_refund = $BUILDING$_03
	}
	else_if = {
		limit = { has_domicile_building = $BUILDING$_02 }
		lower_domicile_building_no_refund = $BUILDING$_02
	}
	else = { remove_domicile_building_no_refund = $BUILDING$_01 }
}

destroy_or_downgrade_estate_building_5_effect = {
	if = {
		limit = { has_domicile_building = $BUILDING$_05 }
		lower_domicile_building_no_refund = $BUILDING$_05
	}
	else_if = {
		limit = { has_domicile_building = $BUILDING$_04 }
		lower_domicile_building_no_refund = $BUILDING$_04
	}
	else_if = {
		limit = { has_domicile_building = $BUILDING$_03 }
		lower_domicile_building_no_refund = $BUILDING$_03
	}
	else_if = {
		limit = { has_domicile_building = $BUILDING$_02 }
		lower_domicile_building_no_refund = $BUILDING$_02
	}
	else = { remove_domicile_building_no_refund = $BUILDING$_01 }
}

destroy_or_downgrade_estate_building_6_effect = {
	if = {
		limit = { has_domicile_building = $BUILDING$_06 }
		lower_domicile_building_no_refund = $BUILDING$_06
	}
	if = {
		limit = { has_domicile_building = $BUILDING$_05 }
		lower_domicile_building_no_refund = $BUILDING$_05
	}
	if = {
		limit = { has_domicile_building = $BUILDING$_04 }
		lower_domicile_building_no_refund = $BUILDING$_04
	}
	if = {
		limit = { has_domicile_building = $BUILDING$_03 }
		lower_domicile_building_no_refund = $BUILDING$_03
	}
	else_if = {
		limit = { has_domicile_building = $BUILDING$_02 }
		lower_domicile_building_no_refund = $BUILDING$_02
	}
	else = { remove_domicile_building_no_refund = $BUILDING$_01 }
}

destroy_or_downgrade_estate_building_2_4_replacement_effect = {
	if = {
		limit = { has_domicile_building = $BUILDING$_04 }
		lower_domicile_building_no_refund = $BUILDING$_04
	}
	else = {
		lower_domicile_building_no_refund = $BUILDING$_03
	}
}

destroy_or_downgrade_estate_building_2_6_replacement_effect = {
	if = {
		limit = { has_domicile_building = $BUILDING$_06 }
		lower_domicile_building_no_refund = $BUILDING$_06
	}
	else_if = {
		limit = { has_domicile_building = $BUILDING$_05 }
		lower_domicile_building_no_refund = $BUILDING$_05
	}
	else_if = {
		limit = { has_domicile_building = $BUILDING$_04 }
		lower_domicile_building_no_refund = $BUILDING$_04
	}
	else = {
		lower_domicile_building_no_refund = $BUILDING$_03
	}
}

destroy_or_downgrade_estate_building_3_6_replacement_effect = {
	if = {
		limit = { has_domicile_building = $BUILDING$_06 }
		lower_domicile_building_no_refund = $BUILDING$_06
	}
	else_if = {
		limit = { has_domicile_building = $BUILDING$_05 }
		lower_domicile_building_no_refund = $BUILDING$_05
	}
	else = {
		lower_domicile_building_no_refund = $BUILDING$_04
	}
}

destroy_random_estate_building_variable_effect = { # Domicile scope
	save_scope_as = raid_domicile
	if = {
		limit = { has_variable = destroyed_building_variable }
		remove_variable = destroyed_building_variable
	}
	random_list = { # Which building?
		# Generic/Terrain
		10 = { # barracks : Normal
			trigger = { has_domicile_building_or_higher = barracks_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 0
				months = 1
			}
		}
		10 = { # watchtower : Normal
			trigger = { has_domicile_building_or_higher = watchtower_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 1
				months = 1
			}
		}
		10 = { # guardhouse : Normal
			trigger = { has_domicile_building_or_higher = guardhouse_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 2
				months = 1
			}
		}
		10 = { # garden : Normal
			trigger = { has_domicile_building_or_higher = garden_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 3
				months = 1
			}
		}
		10 = { # stable : Normal
			trigger = { has_domicile_building_or_higher = stable_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 4
				months = 1
			}
		}
		10 = { # workshop : Normal
			trigger = { has_domicile_building_or_higher = workshop_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 5
				months = 1
			}
		}
		10 = { # storage : Normal
			trigger = { has_domicile_building_or_higher = storage_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 6
				months = 1
			}
		}
		10 = { # market : Normal
			trigger = { has_domicile_building_or_higher = market_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 7
				months = 1
			}
		}
		10 = { # grazing_land : Normal
			trigger = { has_domicile_building_or_higher = grazing_land_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 8
				months = 1
			}
		}
		10 = { # grain_field : Normal
			trigger = { has_domicile_building_or_higher = grain_field_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 9
				months = 1
			}
		}
		10 = { # living_quarters : Normal
			trigger = { has_domicile_building_or_higher = living_quarters_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 10
				months = 1
			}
		}
		10 = { # vineyard : Normal
			trigger = { has_domicile_building_or_higher = vineyard_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 11
				months = 1
			}
		}
		10 = { # olive : Normal
			trigger = { has_domicile_building_or_higher = olive_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 12
				months = 1
			}
		}
		10 = { # temple : Normal
			trigger = { has_domicile_building_or_higher = temple_small_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 13
				months = 1
			}
		}
		10 = { # grand_solar : Normal
			trigger = { has_domicile_building_or_higher = grand_solar_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 14
				months = 1
			}
		}
		10 = { # cabinet_of_curiosities : Normal
			trigger = { has_domicile_building_or_higher = cabinet_of_curiosities_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 15
				months = 1
			}
		}
		10 = { # reception_hall : Normal
			trigger = { has_domicile_building_or_higher = reception_hall_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 16
				months = 1
			}
		}
		10 = { # prison : Normal
			trigger = { has_domicile_building_or_higher = prison_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 17
				months = 1
			}
		}
		10 = { # courtyard : Normal
			trigger = { has_domicile_building_or_higher = courtyard_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 18
				months = 1
			}
		}
		10 = { # wine_cellar : Normal
			trigger = { has_domicile_building_or_higher = wine_cellar_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 19
				months = 1
			}
		}
		10 = { # guest_room : Normal
			trigger = { has_domicile_building_or_higher = guest_room_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 20
				months = 1
			}
		}
		10 = { # bath : Normal
			trigger = { has_domicile_building_or_higher = bath_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 21
				months = 1
			}
		}
		10 = { # library : Normal
			trigger = { has_domicile_building_or_higher = library_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 22
				months = 1
			}
		}
		10 = { # servants_quarters : Normal
			trigger = { has_domicile_building_or_higher = servants_quarters_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 23
				months = 1
			}
		}
		10 = { # office : Normal
			trigger = { has_domicile_building_or_higher = office_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 24
				months = 1
			}
		}
		10 = { # trophy_room : Normal
			trigger = { has_domicile_building_or_higher = trophy_room_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 25
				months = 1
			}
		}
		10 = { # silk : Normal
			trigger = { has_domicile_building_or_higher = silk_01 }
			set_variable = {
				name = destroyed_building_variable
				value = 26
				months = 1
			}
		}
	}
}

destroy_random_estate_building_effect = {
	if = {
		limit = { has_variable = destroyed_building_variable }
		switch = {
			trigger = var:destroyed_building_variable
			0 = { # barracks : Cheap
				destroy_or_downgrade_estate_building_6_effect = { BUILDING = barracks }
			}
			1 = { # watchtower : Cheap
				destroy_or_downgrade_estate_building_6_effect = { BUILDING = watchtower }
			}
			2 = { # guardhouse : Cheap
				destroy_or_downgrade_estate_building_4_effect = { BUILDING = guardhouse }
			}
			3 = { # garden : Cheap
				if = {
					limit = { has_domicile_building_or_higher = garden_leisure_04 }
					destroy_or_downgrade_estate_building_3_6_replacement_effect = { BUILDING = garden_leisure }
				}
				else_if = {
					limit = { has_domicile_building_or_higher = garden_fruit_04 }
					destroy_or_downgrade_estate_building_3_6_replacement_effect = { BUILDING = garden_fruit }
				}
				else = {
					destroy_or_downgrade_estate_building_3_effect = { BUILDING = garden }
				}
			}
			4 = { # stable : Cheap
				if = {
					limit = { has_domicile_building_or_higher = stable_grand_04 }
					destroy_or_downgrade_estate_building_3_6_replacement_effect = { BUILDING = stable_grand }
				}
				else_if = {
					limit = { has_domicile_building_or_higher = stable_kennel_04 }
					destroy_or_downgrade_estate_building_3_6_replacement_effect = { BUILDING = stable_kennel }
				}
				else_if = {
					limit = { has_domicile_building_or_higher = stable_chariot_04 }
					destroy_or_downgrade_estate_building_3_6_replacement_effect = { BUILDING = stable_chariot }
				}
				else = {
					destroy_or_downgrade_estate_building_3_effect = { BUILDING = stable }
				}
			}
			5 = { # workshop : Cheap
				if = {
					limit = { has_domicile_building_or_higher = workshop_carpenter_03 }
					destroy_or_downgrade_estate_building_2_6_replacement_effect = { BUILDING = workshop_carpenter }
				}
				else_if = {
					limit = { has_domicile_building_or_higher = workshop_mason_03 }
					destroy_or_downgrade_estate_building_2_6_replacement_effect = { BUILDING = workshop_mason }
				}
				else_if = {
					limit = { has_domicile_building_or_higher = workshop_textile_03 }
					destroy_or_downgrade_estate_building_2_6_replacement_effect = { BUILDING = workshop_textile }
				}
				else = {
					destroy_or_downgrade_estate_building_2_effect = { BUILDING = workshop }
				}
			}
			6 = { # storage : Cheap
				if = {
					limit = { has_domicile_building_or_higher = storage_warehouse_03 }
					destroy_or_downgrade_estate_building_2_4_replacement_effect = { BUILDING = storage_warehouse }
				}
				else_if = {
					limit = { has_domicile_building_or_higher = storage_granary_03 }
					destroy_or_downgrade_estate_building_2_4_replacement_effect = { BUILDING = storage_granary }
				}
				else = {
					destroy_or_downgrade_estate_building_2_effect = { BUILDING = storage }
				}
			}
			7 = { # market : Cheap
				destroy_or_downgrade_estate_building_6_effect = { BUILDING = market }
			}
			8 = { # grazing_land : Cheap
				if = {
					limit = { has_domicile_building_or_higher = horse_pasture_04 }
					destroy_or_downgrade_estate_building_3_6_replacement_effect = { BUILDING = horse_pasture }
				}
				else_if = {
					limit = { has_domicile_building_or_higher = camel_pasture_04 }
					destroy_or_downgrade_estate_building_3_6_replacement_effect = { BUILDING = camel_pasture }
				}
				else_if = {
					limit = { has_domicile_building_or_higher = elephant_pasture_04 }
					destroy_or_downgrade_estate_building_3_6_replacement_effect = { BUILDING = elephant_pasture }
				}
				else = {
					destroy_or_downgrade_estate_building_6_effect = { BUILDING = grazing_land }
				}
			}
			9 = { # grain_field : Cheap
				destroy_or_downgrade_estate_building_6_effect = { BUILDING = grain_field }
			}
			10 = { # living_quarters : Cheap
				destroy_or_downgrade_estate_building_4_effect = { BUILDING = living_quarters }
			}
			11 = { # vineyard : Cheap
				destroy_or_downgrade_estate_building_6_effect = { BUILDING = vineyard }
			}
			12 = { # olive : Cheap
				destroy_or_downgrade_estate_building_6_effect = { BUILDING = olive }
			}
			13 = { # temple : Cheap
				if = {
					limit = { has_domicile_building_or_higher = temple_crypt_04 }
					destroy_or_downgrade_estate_building_3_6_replacement_effect = { BUILDING = temple_crypt }
				}
				else_if = {
					limit = { has_domicile_building_or_higher = temple_large_04 }
					destroy_or_downgrade_estate_building_3_6_replacement_effect = { BUILDING = temple_large }
				}
				else_if = {
					limit = { has_domicile_building_or_higher = temple_monastery_04 }
					destroy_or_downgrade_estate_building_3_6_replacement_effect = { BUILDING = temple_monastery }
				}
				else = {
					destroy_or_downgrade_estate_building_3_effect = { BUILDING = temple_small }
				}
			}
			14 = { # grand_solar : Cheap
				destroy_or_downgrade_estate_building_4_effect = { BUILDING = grand_solar }
			}
			15 = { # cabinet_of_curiosities : Cheap
				destroy_or_downgrade_estate_building_3_effect = { BUILDING = cabinet_of_curiosities }
			}
			16 = { # reception_hall : Cheap
				destroy_or_downgrade_estate_building_5_effect = { BUILDING = reception_hall }
			}
			17 = { # prison : Cheap
				destroy_or_downgrade_estate_building_4_effect = { BUILDING = prison }
			}
			18 = { # courtyard : Cheap
				destroy_or_downgrade_estate_building_4_effect = { BUILDING = courtyard }
			}
			19 = { # wine_cellar : Cheap
				destroy_or_downgrade_estate_building_3_effect = { BUILDING = wine_cellar }
			}
			20 = { # guest_room : Cheap
				destroy_or_downgrade_estate_building_6_effect = { BUILDING = guest_room }
			}
			21 = { # bath : Cheap
				destroy_or_downgrade_estate_building_4_effect = { BUILDING = bath }
			}
			22 = { # library : Cheap
				if = {
					limit = { has_domicile_building_or_higher = library_observatory_03 }
					destroy_or_downgrade_estate_building_2_4_replacement_effect = { BUILDING = library_observatory }
				}
				else_if = {
					limit = { has_domicile_building_or_higher = library_education_03 }
					destroy_or_downgrade_estate_building_2_4_replacement_effect = { BUILDING = library_education }
				}
				else = {
					destroy_or_downgrade_estate_building_2_effect = { BUILDING = library }
				}
			}
			23 = { # servants_quarters : Cheap
				destroy_or_downgrade_estate_building_4_effect = { BUILDING = servants_quarters }
			}
			24 = { # office : Cheap
				destroy_or_downgrade_estate_building_4_effect = { BUILDING = office }
			}
			25 = { # trophy_room : Cheap
				destroy_or_downgrade_estate_building_4_effect = { BUILDING = trophy_room }
			}
			26 = { # silk : Cheap
				destroy_or_downgrade_estate_building_6_effect = { BUILDING = silk }
			}
		}
		remove_variable = destroyed_building_variable
	}
}

add_random_economic_building_effect = {
	save_scope_as = building_scope
	custom_tooltip = random_economic_building_tt
	hidden_effect = {
		if = {	
			limit = { province_owner = { lotr_normal_building_trigger = yes } }
			random_list = {
				10 = { # Caravanserai
					trigger = {
						NOT = { has_building_or_higher = caravanserai_01 }
						building_caravanserai_requirement_terrain = yes
						building_requirement_castle_city_church = { LEVEL = 01 }
						culture = {
							has_innovation = innovation_guilds
						}
					}
					add_building = caravanserai_01
				}
				10 = { # Watermills
					trigger = {
						NOT = { has_building_or_higher = watermills_01 }
						building_watermills_requirement_terrain = yes
						building_requirement_castle_city_church = { LEVEL = 01 }
						culture = {
							has_innovation = innovation_windmills
						}
					}
					add_building = watermills_01
				}
				10 = { # Windmills
					trigger = {
						NOT = { has_building_or_higher = windmills_01 }
						building_windmills_requirement_terrain = yes
						building_requirement_castle_city_church = { LEVEL = 01 }
						culture = {
							has_innovation = innovation_windmills
						}
					}
					add_building = windmills_01
				}
				10 = { # Trade Port
					trigger = {
						NOT = { has_building_or_higher = common_tradeport_01 }
						building_common_tradeport_requirement_terrain = yes
						OR = {
							AND = {
								culture = {
									has_cultural_parameter = trade_ports_enabled_for_tribals
								}
								has_building_or_higher = tribe_01
							}
							building_requirement_castle_city_church = { LEVEL = 01 }
						}
					}
					add_building = common_tradeport_01
				}
				10 = { # Pastures
					trigger = {
						NOT = { has_building_or_higher = pastures_01 }
						building_pastures_requirement_terrain = yes
						building_requirement_castle_city_church = { LEVEL = 01 }
					}
					add_building = pastures_01
				}
				10 = { # Hunting Grounds
					trigger = {
						NOT = { has_building_or_higher = hunting_grounds_01 }
						building_hunting_grounds_requirement_terrain = yes
						building_requirement_castle_city_church = { LEVEL = 01 }
					}
					add_building = hunting_grounds_01
				}
				10 = { # Orchards
					trigger = {
						NOT = { has_building_or_higher = orchards_01 }
						building_orchards_requirement_terrain = yes
						building_requirement_castle_city_church = { LEVEL = 01 }
					}
					add_building = orchards_01
				}
				10 = { # Farm Estates
					trigger = {
						NOT = { has_building_or_higher = farm_estates_01 }
						building_farm_estates_requirement_terrain = yes
						building_requirement_castle_city_church = { LEVEL = 01 }
					}
					add_building = farm_estates_01
				}
				10 = { # Cereal Fields
					trigger = {
						NOT = { has_building_or_higher = cereal_fields_01 }
						building_cereal_fields_requirement_terrain = yes
						building_requirement_castle_city_church = { LEVEL = 01 }
					}
					add_building = cereal_fields_01
				}
				10 = { # Logging Camps
					trigger = {
						NOT = { has_building_or_higher = logging_camps_01 }
						building_logging_camps_requirement_terrain = yes
						building_requirement_castle_city_church = { LEVEL = 01 }
					}
					add_building = logging_camps_01
				}
				10 = { # Peat Quarries
					trigger = {
						NOT = { has_building_or_higher = peat_quarries_01 }
						building_peat_quarries_requirement_terrain = yes
						building_requirement_castle_city_church = { LEVEL = 01 }
					}
					add_building = peat_quarries_01
				}
				10 = { # Hill Farms
					trigger = {
						NOT = { has_building_or_higher = hill_farms_01 }
						building_hill_farms_requirement_terrain = yes
						building_requirement_castle_city_church = { LEVEL = 01 }
					}
					add_building = hill_farms_01
				}
				10 = { # Elephant Pens
					trigger = {
						NOT = { has_building_or_higher = elephant_pens_01 }
						building_elephant_pens_requirement_terrain = yes
						building_requirement_castle_city_church = { LEVEL = 01 }
					}
					add_building = elephant_pens_01
				}
				10 = { # Plantations
					trigger = {
						NOT = { has_building_or_higher = plantations_01 }
						building_plantations_requirement_terrain = yes
						building_requirement_castle_city_church = { LEVEL = 01 }
					}
					add_building = plantations_01
				}
				10 = { # Quarries
					trigger = {
						NOT = { has_building_or_higher = quarries_01 }
						building_quarries_requirement_terrain = yes
						building_requirement_castle_city_church = { LEVEL = 01 }
					}
					add_building = quarries_01
				}
				10 = { # Qanats
					trigger = {
						NOT = { has_building_or_higher = qanats_01 }
						building_qanats_requirement_terrain = yes
						building_requirement_castle_city_church = { LEVEL = 01 }
						culture = {
							has_cultural_parameter = unlocks_qanat_building
						}
					}
					add_building = qanats_01
				}
				10 = { # Murex Farms
					trigger = {
						NOT = { has_building_or_higher = murex_farm_01 }
						building_murex_farm_requirement_terrain = yes
						building_requirement_castle_city_church = { LEVEL = 01 }
					}
					add_building = murex_farm_01
				}
				10 = { # Guild Halls - City Specific
					trigger = {
						NOT = { has_building_or_higher = guild_halls_01 }
						has_building_or_higher = city_01
					}
					add_building = guild_halls_01
				}
				10 = { # Monastic Schools - Temple Specific
					trigger = {
						NOT = { has_building_or_higher = monastic_schools_01 }
						has_building_or_higher = temple_01
					}
					add_building = monastic_schools_01
				}
			}
		}
		else_if = {
			limit = { province_owner = { is_dwarf = yes } }
			random_list = { #Which building ?
				10 = { # Dwarven Ale House : Cheap
					trigger = {
						NOT = { has_building_or_higher = dwarven_ale_house_01 }
						has_building_or_higher = dwarven_depths_01
					}
					add_building = dwarven_ale_house_01
				}
				10 = { # Dwarven Fungal Farm : Cheap
					trigger = {
						NOT = { has_building_or_higher = dwarven_fungal_farm_01 }
						lotr_dwarven_underground_buildings_requirement_terrain = yes
					}
					add_building = dwarven_fungal_farm_01
				}
				10 = { # Dwarven Terrace Farm : Cheap
					trigger = {
						NOT = { has_building_or_higher = dwarven_terrace_farm_01 }
						OR = {
							lotr_dwarven_underground_buildings_requirement_terrain = yes
							lotr_dwarven_hill_buildings_requirement_terrain = yes
						}
					}
					add_building = dwarven_terrace_farm_01
				}
				10 = { # Dwarven Quarry : Cheap
					trigger = {
						NOT = { has_building_or_higher =  dwarven_quarry_01 }
						lotr_dwarven_underground_buildings_requirement_terrain = yes
					}
					add_building = dwarven_quarry_01
				}
				10 = { # Dwarven Crafts : Cheap
					trigger = {
						NOT = { has_building_or_higher = dwarven_crafts_01 }
						lotr_dwarven_underground_buildings_requirement_terrain = yes
					}
					add_building = dwarven_crafts_01
				}
				10 = { # Dwarven Toolmaker Guild : Cheap
					trigger = {
						NOT = { has_building_or_higher = dwarven_toolmaker_guild_01 }
						lotr_dwarven_underground_buildings_requirement_terrain = yes
					}
					add_building = dwarven_toolmaker_guild_01
				}
				10 = { # Dwarven Roads : Cheap
					trigger = {
						NOT = { has_building_or_higher = dwarven_roads_01 }
						lotr_dwarven_underground_buildings_requirement_terrain = yes
					}
					add_building = dwarven_roads_01
				}
			}
		}
		else_if = {
			limit = { province_owner = { is_elf = yes } }
			random_list = { #Which building ?
				10 = { # Elven Agriculture : Cheap
					trigger = { 
						NOT = { has_building_or_higher = elven_agriculture_01 }
						building_elven_agriculture_requirement_terrain = yes
					}
					add_building = elven_agriculture_01
				}
				10 = { # Elven Port : Cheap
					trigger = { 
						NOT = { has_building_or_higher = elven_port_01 }
						building_common_tradeport_requirement_terrain = yes
					}
					add_building = elven_port_01
				}
				10 = { # Elven Mine : Cheap
					trigger = { 
						NOT = { has_building_or_higher = elven_mine_01 }
						building_quarries_requirement_terrain = yes
					}
					add_building = elven_mine_01
				}
				10 = { # Elven Forestry : Cheap
					trigger = { 
						NOT = { has_building_or_higher = elven_forestry_01 }
						building_logging_camps_requirement_terrain = yes
					}
					add_building = elven_forestry_01
				}
				10 = { # Elven Hunting Grounds : Cheap
					trigger = {
						NOT = { has_building_or_higher = elven_hunting_grounds_01 }
						building_elven_hunting_grounds_requirement_terrain = yes
					}
					add_building = elven_hunting_grounds_01
				}
				10 = { # Elven Markets : Cheap
					trigger = { NOT = { has_building_or_higher = elven_markets_01 } }
					add_building = elven_markets_01
				}
				10 = { # Elven Forges : Cheap
					trigger = { NOT = { has_building_or_higher = elven_forges_01 } }
					add_building = elven_forges_01
				}
				2 = { # Elven Library : Normal
					trigger = { 
						NOT = { has_building_or_higher = elven_library_01 }
						has_building_or_higher = elven_settlement_03
					}
					add_building = elven_library_01
				}
				2 = { # Elven Guild : Normal
					trigger = { 
						NOT = { has_building_or_higher = elven_guild_01 }
						has_building_or_higher = elven_settlement_03
					}
					add_building = elven_guild_01
				}
				2 = { # Elven Embassy : Normal
					trigger = { 
						NOT = { has_building_or_higher = elven_embassy_01 }
						has_building_or_higher = elven_settlement_03
					}
					add_building = elven_embassy_01
				}	
				2 = { # Elven Sanctuary : Normal
					trigger = { 
						NOT = { has_building_or_higher = elven_sanctuary_01 }
						has_building_or_higher = elven_settlement_03
					}
					add_building = elven_sanctuary_01
				}
				1 = { # Hall of Lords : Expensive
					trigger = { 
						NOT = { has_building_or_higher = hall_of_lords_01 }
						has_building_or_higher = elven_settlement_06
					}
					add_building = hall_of_lords_01
				}
				10 = { # Dwarven Fungal Farm : Cheap
					trigger = {
						NOT = { has_building_or_higher = dwarven_fungal_farm_01 }
						lotr_dwarven_underground_buildings_requirement_terrain = yes
					}
					add_building = dwarven_fungal_farm_01
				}
				10 = { # Dwarven Terrace Farm : Cheap
					trigger = {
						NOT = { has_building_or_higher = dwarven_terrace_farm_01 }
						OR = {
							lotr_dwarven_underground_buildings_requirement_terrain = yes
							lotr_dwarven_hill_buildings_requirement_terrain = yes
						}
					}
					add_building = dwarven_terrace_farm_01
				}
				10 = { # Dwarven Quarry : Cheap
					trigger = {
						NOT = { has_building_or_higher =  dwarven_quarry_01 }
						lotr_dwarven_underground_buildings_requirement_terrain = yes
					}
					add_building = dwarven_quarry_01
				}
				10 = { # Dwarven Crafts : Cheap
					trigger = {
						NOT = { has_building_or_higher = dwarven_crafts_01 }
						lotr_dwarven_underground_buildings_requirement_terrain = yes
					}
					add_building = dwarven_crafts_01
				}
				10 = { # Dwarven Toolmaker Guild : Cheap
					trigger = {
						NOT = { has_building_or_higher = dwarven_toolmaker_guild_01 }
						lotr_dwarven_underground_buildings_requirement_terrain = yes
					}
					add_building = dwarven_toolmaker_guild_01
				}
				10 = { # Dwarven Roads : Cheap
					trigger = {
						NOT = { has_building_or_higher = dwarven_roads_01 }
						lotr_dwarven_underground_buildings_requirement_terrain = yes
					}
					add_building = dwarven_roads_01
				}
			}
		}
	}
}

add_random_fortification_building_effect = {
	save_scope_as = building_scope
	custom_tooltip = random_fortification_building_tt
	hidden_effect = {
		if = {	
			limit = { province_owner = { lotr_normal_building_trigger = yes } }
			random_list = {
				10 = { # Ramparts
					trigger = {
						NOT = { has_building_or_higher = ramparts_01 }
						building_ramparts_requirement_terrain = yes
						building_requirement_castle_city_church = { LEVEL = 01 }
					}
					add_building = ramparts_01
				}
				10 = { # Curtain Walls
					trigger = {
						NOT = { has_building_or_higher = curtain_walls_01 }
						building_curtain_walls_requirement_terrain = yes
						building_requirement_castle_city_church = { LEVEL = 01 }
					}
					add_building = curtain_walls_01
				}
				10 = { # Watchtowers
					trigger = {
						NOT = { has_building_or_higher = watchtowers_01 }
						building_watchtowers_requirement_terrain = yes
						building_requirement_castle_city_church = { LEVEL = 01 }
					}
					add_building = watchtowers_01
				}
				10 = { # Hill Forts
					trigger = {
						NOT = { has_building_or_higher = hill_forts_01 }
						building_hill_forts_requirement_terrain = yes
						building_requirement_castle_city_church = { LEVEL = 01 }
					}
					add_building = hill_forts_01
				}
			}
		}
		else_if = {
			limit = { province_owner = { is_dwarf = yes } }
			random_list = { #Which building ?
				10 = { # Dwarven Vaults : Cheap
					trigger = {
						NOT = { has_building_or_higher = dwarven_vaults_01 }
						has_building_or_higher = dwarven_depths_01
					}
					add_building = dwarven_vaults_01
				}
			}
		}
		else_if = {
			limit = { province_owner = { is_elf = yes } }
			random_list = { #Which building ?
				10 = { # Tree Flet : Cheap
					trigger = { NOT = { has_building_or_higher = tree_flet_01 } }
					add_building = tree_flet_01
				}
				1 = { # Elven Citadel : Expensive
					trigger = { 
						NOT = { has_building_or_higher = elven_citadel_01 }
						has_building_or_higher = elven_settlement_06
					}
					add_building = elven_citadel_01
				}
			}
		}
	}
}

add_random_military_building_effect = {
	save_scope_as = building_scope
	custom_tooltip = random_military_building_tt
	if = {
		limit = { province_owner = { lotr_normal_building_trigger = yes } }
		random_list = {
			10 = { # Wind Furnace
				trigger = {
					NOT = { has_building_or_higher = wind_furnace_01 }
					building_wind_furnace_requirement_terrain = yes
					building_requirement_castle_city_church = { LEVEL = 01 }
				}
				add_building = wind_furnace_01
			}
			10 = { # Workshops
				trigger = {
					NOT = { has_building_or_higher = workshops_01 }
					building_workshops_requirement_terrain = yes
					building_requirement_castle_city_church = { LEVEL = 01 }
					scope:building_scope.county.holder.culture = {
						has_innovation = innovation_advanced_bowmaking
					}
				}
				add_building = workshops_01
			}
			10 = { # Horse Pastures
				trigger = {
					NOT = { has_building_or_higher = horse_pastures_01 }
					building_horse_pastures_requirement_terrain = yes
				}
				add_building = horse_pastures_01
			}
			10 = { # Hillside Grazing
				trigger = {
					NOT = { has_building_or_higher = hillside_grazing_01 }
					building_hillside_grazing_requirement_terrain = yes
				}
				add_building = hillside_grazing_01
			}
			10 = { # Warrior Lodges
				trigger = {
					NOT = { has_building_or_higher = warrior_lodges_01 }
					building_warrior_lodges_requirement_terrain = yes
				}
				add_building = warrior_lodges_01
			}
			10 = { # Military Camps
				trigger = {
					NOT = { has_building_or_higher = military_camps_01 }
					building_military_camps_requirement_terrain = yes
					building_requirement_castle_city_church = { LEVEL = 01 }
				}
				add_building = military_camps_01
			}
			10 = { # Regimental Grounds
				trigger = {
					NOT = { has_building_or_higher = regimental_grounds_01 }
					building_regimental_grounds_requirement_terrain = yes
					building_requirement_castle_city_church = { LEVEL = 01 }
				}
				add_building = regimental_grounds_01
			}
			10 = { # Outposts
				trigger = {
					NOT = { has_building_or_higher = outposts_01 }
					building_outposts_requirement_terrain = yes
					building_requirement_castle_city_church = { LEVEL = 01 }
				}
				add_building = outposts_01
			}
			10 = { # Barracks
				trigger = {
					NOT = { has_building_or_higher = barracks_01 }
					building_barracks_requirement_terrain = yes
					building_requirement_castle_city_church = { LEVEL = 01 }
				}
				add_building = barracks_01
			}
			10 = { # Camel Farms
				trigger = {
					NOT = { has_building_or_higher = camel_farms_01 }
					building_camel_farms_requirement_terrain = yes
					building_requirement_castle_city_church = { LEVEL = 01 }
				}
				add_building = camel_farms_01
			}
			10 = { # Stables
				trigger = {
					NOT = { has_building_or_higher = stables_01 }
					building_stables_requirement_terrain = yes
					building_requirement_castle_city_church = { LEVEL = 01 }
				}
				add_building = stables_01
			}
			10 = { # Smiths
				trigger = {
					NOT = { has_building_or_higher = smiths_01 }
					building_smiths_requirement_terrain = yes
					building_requirement_castle_city_church = { LEVEL = 01 }
				}
				add_building = smiths_01
			}
		}
	}
	else_if = {
		limit = { province_owner = { is_dwarf = yes } }
		random_list = { #Which building ?
			10 = { # Dwarven Armory : cheap
				trigger = {
					NOT = { has_building_or_higher = dwarven_armory_01 }
					lotr_dwarven_underground_buildings_requirement_terrain = yes
					has_building_or_higher = dwarven_depths_01
					has_building_or_higher = dwarven_toolmaker_guild_01
				}
				add_building = dwarven_armory_01
			}
			10 = { # Dwarven HI barracks : cheap
				trigger = {
					NOT = { has_building_or_higher = dwarven_hi_barracks_01 }
					lotr_dwarven_underground_buildings_requirement_terrain = yes
					building_requirement_tribal = no
					has_building_or_higher = dwarven_armory_01
				}
				add_building = dwarven_hi_barracks_01
			}
			10 = { # Dwarven Pike barracks : cheap
				trigger = {
					NOT = { has_building_or_higher = dwarven_pike_barracks_01 }
					lotr_dwarven_underground_buildings_requirement_terrain = yes
					building_requirement_tribal = no
					has_building_or_higher = dwarven_armory_01
				}
				add_building = dwarven_pike_barracks_01
			}
			10 = { # Dwarven Archer barracks : cheap
				trigger = {
					NOT = { has_building_or_higher = dwarven_archer_barracks_01 }
					lotr_dwarven_underground_buildings_requirement_terrain = yes
					building_requirement_tribal = no
					has_building_or_higher = dwarven_armory_01
				}
				add_building = dwarven_archer_barracks_01
			}
			10 = { # Dwarven Skirmisher barracks : cheap
				trigger = {
					NOT = { has_building_or_higher = dwarven_skirmisher_barracks_01 }
					lotr_dwarven_underground_buildings_requirement_terrain = yes
					building_requirement_tribal = no
					has_building_or_higher = dwarven_armory_01
				}
				add_building = dwarven_skirmisher_barracks_01
			}
			10 = { # Dwarven Siege Workshops : cheap
				trigger = {
					NOT = { has_building_or_higher = dwarven_siege_workshop_01 }
					lotr_dwarven_underground_buildings_requirement_terrain = yes
					building_requirement_tribal = no
					has_building_or_higher = dwarven_armory_01
				}
				add_building = dwarven_siege_workshop_01
			}
		}
	}
	else_if = {
		limit = { province_owner = { is_dwarf = yes } }
		random_list = { #Which building ?
			10 = { # Elven Barracks : Cheap
				trigger = { NOT = { has_building_or_higher = elven_barracks_01 } }
				add_building = elven_barracks_01
			}
			10 = { # Elven Fletchers : Cheap
				trigger = { NOT = { has_building_or_higher = elven_fletchers_01 } }
				add_building = elven_fletchers_01
			}
			10 = { # Elven Stables : Cheap
				trigger = { NOT = { has_building_or_higher = elven_stables_01 } }
				add_building = elven_stables_01
			}
			2 = { # Elven Mustering Grounds : Normal
				trigger = { 
					NOT = { has_building_or_higher = elven_mustering_grounds_01 }
					has_building_or_higher = elven_settlement_03
				}
				add_building = elven_mustering_grounds_01
			}
		}
	}
}
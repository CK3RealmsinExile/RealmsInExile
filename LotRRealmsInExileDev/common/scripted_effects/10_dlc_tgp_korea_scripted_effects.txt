
korea_unify_goryeo_reward_effect = { #LotR
	# # Legend Seed
	# gain_heroic_legend_seed_tooltip_effect = yes
	# # Create new titles
	# create_title_and_vassal_change = {
	# 	type = created
	# 	save_scope_as = title_change
	# }
	# title:e_goryeo = {
	# 	change_title_holder = {
	# 		holder = scope:king_of_goryeo
	# 		change = scope:title_change
	# 	}
	# }
	# resolve_title_and_vassal_change = scope:title_change
	# # Destroy old titles
	# title:k_silla = { add_to_list = korea_kingdoms }
	# title:k_baekje = { add_to_list = korea_kingdoms }
	# title:k_goguryeo = { add_to_list = korea_kingdoms }
	# every_in_list = {
	# 	list = korea_kingdoms
	# 	limit = { holder = scope:king_of_goryeo }
	# 	save_scope_as = korean_kingdom 
	# 	scope:king_of_goryeo = { destroy_title = scope:korean_kingdom }
	# }
	# #If owned, annex Balhae.
	# if = {
	# 	limit = { title:k_balhae.holder ?= scope:king_of_goryeo }
	# 	title:k_balhae = { set_de_jure_liege_title = title:e_goryeo }
	# }
	# # Rename Ceremonial throne if relevant
	# title:k_yongson_throne ?= {
	# 	hidden_effect = {
	# 		if = {
	# 			limit = { scope:king_of_goryeo.culture = culture:silla }
	# 			set_title_name = "cn_silla_throne"
	# 		}
	# 	}
	# }
	# # Cultural acceptance (move towards Goryeo culture)
	# every_culture_global = {
	# 	limit = {
	# 		NOT = { this = scope:king_of_goryeo.culture }
	# 		OR = {
	# 			has_cultural_pillar = heritage_buyeo
	# 			has_cultural_pillar = heritage_korean
	# 			any_parent_culture = {
	# 				OR = {
	# 					has_cultural_pillar = heritage_buyeo
	# 					has_cultural_pillar = heritage_korean
	# 				}
	# 			}
	# 		}
	# 		any_culture_county = {
	# 			any_county_province = { geographical_region = world_asia_korea }
	# 		}
	# 	}
	# 	add_to_list = goryeo_cultures
	# }
	# every_in_list = {
	# 	list = goryeo_cultures
	# 	change_cultural_acceptance = {
	# 		target = root.culture
	# 		value = 25
	# 		desc = cultural_acceptance_gain_unify_goryeo
	# 	}
	# }
	# set_global_variable = {
	# 	name = flag_united_the_husamguk
	# }
}

tgp_create_meritocratic_ruling_regent_title_effect = {
	if = {
		limit = {
			has_tgp_dlc_trigger = yes
			# Strictly Independent Empires
			is_independent_ruler = yes
			highest_held_title_tier = tier_empire
			# Validity
			has_realm_law = single_heir_succession_law
			tgp_realm_has_ceremonial_liege_trigger = no
			# Strictly Meritocratic
			government_has_flag = government_is_meritocratic
		}
		custom_description_no_bullet = { text = tgp_create_meritocratic_ruling_regent_title_effect }
		custom_tooltip = {
			text = tgp_create_meritocratic_ruling_regent_title_effect_title_tt
			save_scope_as = founder
			# CREATE CEREMONIAL TITLE (TITULAR)
			# if = { #LotR
			# 	limit = { dynasty = dynasty:korean_wang_goryeo }
			# 	create_dynamic_title = {
			# 		tier = kingdom
			# 		name = k_yongson_throne
			# 	}
			# 	scope:new_title = { set_coa = k_yongson_throne }
			# }
			# else = { #LotR
				create_dynamic_title = {
					tier = kingdom
					name = MERITOCRATIC_CEREMONIAL_LIEGE_TITLE
				}
				scope:new_title = { set_coa = scope:founder.house }
			# } #LotR
			scope:new_title = {
				save_scope_as = monarch_title
				set_definitive_form = yes
				# LINK TITLES
				set_variable = {
					name = ceremonial_title
					value = scope:founder.primary_title
				}
			}
			# GRANT CEREMONIAL TITLE
			create_title_and_vassal_change = {
				type = created
				save_scope_as = change
				add_claim_on_loss = yes
			}
			scope:monarch_title = {
				change_title_holder = {
					holder = scope:founder
					change = scope:change
				}
			}
			resolve_title_and_vassal_change = scope:change
			# SETUP MONARCH SUCCESSION
			scope:monarch_title = { add_title_law = single_heir_succession_law } # Monarchy inherited separately
			# LINK TITLES
			primary_title = {
				save_scope_as = regent_title
				set_variable = {
					name = administrative_ui_special_title
					value = scope:monarch_title
				}
			}
		}
		custom_tooltip = tgp_create_meritocratic_ruling_regent_title_effect_faction_tt
		# SETUP REGENCY SUCCESION
		add_realm_law_skip_effects = meritocratic_regency_succession_law # Regency inherited separately
		hidden_effect = {
			every_player = {
				limit = { top_liege = scope:founder.top_liege }
				send_interface_message = {
					title = tgp_create_meritocratic_ruling_regent_title_message_title
					left_icon = scope:founder
					right_icon = scope:monarch_title
					show_as_tooltip = {
						scope:founder = {
							add_realm_law_skip_effects = meritocratic_regency_succession_law
							get_title = scope:monarch_title
							scope:monarch_title = { add_title_law = single_heir_succession_law }
						}
					}
				}
			}
		}
	}
}
### MORDOR EFFECTS ###

# Kills Sauron and the Nazgul, redistributes their land if Sauron is defeated, destroyed or dies
kill_nazgul_effect = {
	
		character:nazgul1 = {
			hidden_effect = {
				every_held_title = {
					limit = {
						tier > tier_county
					}
					holder = { # Destroy that title
						destroy_title = prev
					}
				}
				every_held_title = { # Distribute excess non-capital counties to new characters
				
					limit = { # For every non-capital county
						tier = tier_county
					}
		
					set_county_faith = faith:sons_of_sauron
		
					save_temporary_scope_as = excess_title
		
					create_character = { # Create a new character to hold the title
						employer = root
						culture = culture:burgulhai
						faith = faith:sons_of_sauron
						gender_female_chance = 0
						after_creation = {
							save_temporary_scope_as = new_holder
						}
					}
					
					create_title_and_vassal_change = { # Define type of title change as a granting of the title
						type = granted
						save_scope_as = title_change
						add_claim_on_loss = no
					}
					
					scope:excess_title = { # Set the new character to be the new holder of the title
						change_title_holder = {
							holder = scope:new_holder
							change = scope:title_change
						}
					}
					
					resolve_title_and_vassal_change = scope:title_change # Take a look at yourself, and then make that... change!
		
					# game_rule_create_spouse_and_children = { CHARACTER = scope:new_holder } # Create a family for the new holder
					
				}
			}
			death = { death_reason = death_nazgul }
		}
		
		character:nazgul2 = {
			hidden_effect = {
				every_held_title = {
					limit = {
						tier > tier_county
					}
					holder = { # Destroy that title
						destroy_title = prev
					}
				}
				every_held_title = { # Distribute excess non-capital counties to new characters
				
					limit = { # For every non-capital county
						tier = tier_county
					}
		
					set_county_faith = faith:sons_of_sauron
		
					save_temporary_scope_as = excess_title
		
					create_character = { # Create a new character to hold the title
						employer = root
						culture = culture:burgulhai
						faith = faith:sons_of_sauron
						gender_female_chance = 0
						after_creation = {
							save_temporary_scope_as = new_holder
						}
					}
					
					create_title_and_vassal_change = { # Define type of title change as a granting of the title
						type = granted
						save_scope_as = title_change
						add_claim_on_loss = no
					}
					
					scope:excess_title = { # Set the new character to be the new holder of the title
						change_title_holder = {
							holder = scope:new_holder
							change = scope:title_change
						}
					}
					
					resolve_title_and_vassal_change = scope:title_change # Take a look at yourself, and then make that... change!
		
					# game_rule_create_spouse_and_children = { CHARACTER = scope:new_holder } # Create a family for the new holder
					
				}
			}
			death = { death_reason = death_nazgul }
		}
		
		character:nazgul4 = {
			hidden_effect = {
				every_held_title = {
					limit = {
						tier > tier_county
					}
					holder = { # Destroy that title
						destroy_title = prev
					}
				}
				every_held_title = { # Distribute excess non-capital counties to new characters
				
					limit = { # For every non-capital county
						tier = tier_county
					}
		
					set_county_faith = faith:sons_of_sauron
		
					save_temporary_scope_as = excess_title
		
					create_character = { # Create a new character to hold the title
						employer = root
						culture = culture:burgulhai
						faith = faith:sons_of_sauron
						gender_female_chance = 0
						after_creation = {
							save_temporary_scope_as = new_holder
						}
					}
					
					create_title_and_vassal_change = { # Define type of title change as a granting of the title
						type = granted
						save_scope_as = title_change
						add_claim_on_loss = no
					}
					
					scope:excess_title = { # Set the new character to be the new holder of the title
						change_title_holder = {
							holder = scope:new_holder
							change = scope:title_change
						}
					}
					
					resolve_title_and_vassal_change = scope:title_change # Take a look at yourself, and then make that... change!
		
					# game_rule_create_spouse_and_children = { CHARACTER = scope:new_holder } # Create a family for the new holder
					
				}
			}
			death = { death_reason = death_nazgul }
		}
		
		character:nazgul5 = {
			hidden_effect = {
				every_held_title = {
					limit = {
						tier > tier_county
					}
					holder = { # Destroy that title
						destroy_title = prev
					}
				}
				every_held_title = { # Distribute excess non-capital counties to new characters
				
					limit = { # For every non-capital county
						tier = tier_county
					}
		
					set_county_faith = faith:sons_of_sauron
		
					save_temporary_scope_as = excess_title
		
					create_character = { # Create a new character to hold the title
						employer = root
						culture = culture:burgulhai
						faith = faith:sons_of_sauron
						gender_female_chance = 0
						after_creation = {
							save_temporary_scope_as = new_holder
						}
					}
					
					create_title_and_vassal_change = { # Define type of title change as a granting of the title
						type = granted
						save_scope_as = title_change
						add_claim_on_loss = no
					}
					
					scope:excess_title = { # Set the new character to be the new holder of the title
						change_title_holder = {
							holder = scope:new_holder
							change = scope:title_change
						}
					}
					
					resolve_title_and_vassal_change = scope:title_change # Take a look at yourself, and then make that... change!
		
					# game_rule_create_spouse_and_children = { CHARACTER = scope:new_holder } # Create a family for the new holder
					
				}
			}
			death = { death_reason = death_nazgul }
		}
		
		character:nazgul6 = {
			hidden_effect = {
				every_held_title = {
					limit = {
						tier > tier_county
					}
					holder = { # Destroy that title
						destroy_title = prev
					}
				}
				every_held_title = { # Distribute excess non-capital counties to new characters
				
					limit = { # For every non-capital county
						tier = tier_county
					}
		
					set_county_faith = faith:sons_of_sauron
		
					save_temporary_scope_as = excess_title
		
					create_character = { # Create a new character to hold the title
						employer = root
						culture = culture:burgulhai
						faith = faith:sons_of_sauron
						gender_female_chance = 0
						after_creation = {
							save_temporary_scope_as = new_holder
						}
					}
					
					create_title_and_vassal_change = { # Define type of title change as a granting of the title
						type = granted
						save_scope_as = title_change
						add_claim_on_loss = no
					}
					
					scope:excess_title = { # Set the new character to be the new holder of the title
						change_title_holder = {
							holder = scope:new_holder
							change = scope:title_change
						}
					}
					
					resolve_title_and_vassal_change = scope:title_change # Take a look at yourself, and then make that... change!
		
					# game_rule_create_spouse_and_children = { CHARACTER = scope:new_holder } # Create a family for the new holder
					
				}
			}
			death = { death_reason = death_nazgul }
		}
		
		character:goldenking1 = {
			hidden_effect = {
				every_held_title = {
					limit = {
						tier = tier_county
					}
					holder = { # Destroy that title
						destroy_title = prev
					}
				}
				every_held_title = { # Distribute excess non-capital counties to new characters
				
					limit = { # For every non-capital county
						tier = tier_county
					}
		
					set_county_faith = faith:faith_kanra
		
					save_temporary_scope_as = excess_title
		
					create_character = { # Create a new character to hold the title
						employer = root
						culture = culture:pust
						faith = faith:faith_kanra
						gender_female_chance = 0
						after_creation = {
							save_temporary_scope_as = new_holder
						}
					}
					
					create_title_and_vassal_change = { # Define type of title change as a granting of the title
						type = granted
						save_scope_as = title_change
						add_claim_on_loss = no
					}
					
					scope:excess_title = { # Set the new character to be the new holder of the title
						change_title_holder = {
							holder = scope:new_holder
							change = scope:title_change
						}
					}
					
					resolve_title_and_vassal_change = scope:title_change # Take a look at yourself, and then make that... change!
		
					# game_rule_create_spouse_and_children = { CHARACTER = scope:new_holder } # Create a family for the new holder
					
				}
			}
			death = { death_reason = death_nazgul }
		}
		
		character:nazgul7 = {
			hidden_effect = {
				every_held_title = {
					limit = {
						tier > tier_county
					}
					holder = { # Destroy that title
						destroy_title = prev
					}
				}
				every_held_title = { # Distribute excess non-capital counties to new characters
				
					limit = { # For every non-capital county
						tier = tier_county
					}
		
					set_county_faith = faith:sons_of_sauron
		
					save_temporary_scope_as = excess_title
		
					create_character = { # Create a new character to hold the title
						employer = root
						culture = culture:burgulhai
						faith = faith:sons_of_sauron
						gender_female_chance = 0
						after_creation = {
							save_temporary_scope_as = new_holder
						}
					}
					
					create_title_and_vassal_change = { # Define type of title change as a granting of the title
						type = granted
						save_scope_as = title_change
						add_claim_on_loss = no
					}
					
					scope:excess_title = { # Set the new character to be the new holder of the title
						change_title_holder = {
							holder = scope:new_holder
							change = scope:title_change
						}
					}
					
					resolve_title_and_vassal_change = scope:title_change # Take a look at yourself, and then make that... change!
		
					# game_rule_create_spouse_and_children = { CHARACTER = scope:new_holder } # Create a family for the new holder
					
				}
			}
			death = { death_reason = death_nazgul }
		}
		
		character:nazgul8 = {
			hidden_effect = {
				every_held_title = {
					limit = {
						tier > tier_county
					}
					holder = { # Destroy that title
						destroy_title = prev
					}
				}
				every_held_title = { # Distribute excess non-capital counties to new characters
				
					limit = { # For every non-capital county
						tier = tier_county
					}
		
					set_county_faith = faith:sons_of_sauron
		
					save_temporary_scope_as = excess_title
		
					create_character = { # Create a new character to hold the title
						employer = root
						culture = culture:burgulhai
						faith = faith:sons_of_sauron
						gender_female_chance = 0
						after_creation = {
							save_temporary_scope_as = new_holder
						}
					}
					
					create_title_and_vassal_change = { # Define type of title change as a granting of the title
						type = granted
						save_scope_as = title_change
						add_claim_on_loss = no
					}
					
					scope:excess_title = { # Set the new character to be the new holder of the title
						change_title_holder = {
							holder = scope:new_holder
							change = scope:title_change
						}
					}
					
					resolve_title_and_vassal_change = scope:title_change # Take a look at yourself, and then make that... change!
		
					# game_rule_create_spouse_and_children = { CHARACTER = scope:new_holder } # Create a family for the new holder
					
				}
			}
			death = { death_reason = death_nazgul }
		}
		
		character:nazgul9 = {
			hidden_effect = {
				every_held_title = {
					limit = {
						tier > tier_county
					}
					holder = { # Destroy that title
						destroy_title = prev
					}
				}
				every_held_title = { # Distribute excess non-capital counties to new characters
				
					limit = { # For every non-capital county
						tier = tier_county
					}
		
					set_county_faith = faith:sons_of_sauron
		
					save_temporary_scope_as = excess_title
		
					create_character = { # Create a new character to hold the title
						employer = root
						culture = culture:burgulhai
						faith = faith:sons_of_sauron
						gender_female_chance = 0
						after_creation = {
							save_temporary_scope_as = new_holder
						}
					}
					
					create_title_and_vassal_change = { # Define type of title change as a granting of the title
						type = granted
						save_scope_as = title_change
						add_claim_on_loss = no
					}
					
					scope:excess_title = { # Set the new character to be the new holder of the title
						change_title_holder = {
							holder = scope:new_holder
							change = scope:title_change
						}
					}
					
					resolve_title_and_vassal_change = scope:title_change # Take a look at yourself, and then make that... change!
		
					# game_rule_create_spouse_and_children = { CHARACTER = scope:new_holder } # Create a family for the new holder
					
				}
			}
			death = { death_reason = death_nazgul }
		}
		
}

# Destroys Lidless Eye religions if Sauron is defeated, destroyed, dies or Saruman takes over
lidless_eye_destroyed_effect = {	
	
	every_living_character = {
		if = {
			limit = {
				OR = {
					faith = faith:lidless_eye
					faith = faith:red_eye_cult
					faith = faith:cult_of_zigur
				}
				OR = {
					has_character_flag = is_saruman
					any_liege_or_above = {
						has_character_flag = is_saruman
					}
				}
				character:lineofsaruman = {
					has_religion = religion:forces_of_evil_religion
				}
			}
			set_character_faith = faith:white_hand_cult
			every_held_title = {
				limit = {
					tier = tier_county
					OR = {
						faith = faith:lidless_eye
						faith = faith:red_eye_cult
						faith = faith:cult_of_zigur
					}					
				}
				set_county_faith = faith:white_hand_cult
			}
		}
		else_if = {
			limit = {
				OR = {
					faith = faith:lidless_eye
					faith = faith:red_eye_cult
					faith = faith:cult_of_zigur
				}
				root.location = { geographical_region = special_mordor_and_surrounding_kingdoms }
				culture = { has_cultural_pillar = heritage_orc }
			}
			set_character_faith = faith:sons_of_sauron
			every_held_title = {
				limit = {
					tier = tier_county
					OR = {
						faith = faith:lidless_eye
						faith = faith:red_eye_cult
						faith = faith:cult_of_zigur
					}					
				}
				set_county_faith = faith:sons_of_sauron
			}
		}
		else_if = {
			limit = {
				OR = {
					faith = faith:lidless_eye
					faith = faith:red_eye_cult
					faith = faith:cult_of_zigur
				}
				NOT = { 
					root.location = { geographical_region = special_mordor_and_surrounding_kingdoms }
				}
				culture = { has_cultural_pillar = heritage_orc }
			}
			set_character_faith = faith:way_of_strength
			every_held_title = {
				limit = {
					tier = tier_county
					OR = {
						faith = faith:lidless_eye
						faith = faith:red_eye_cult
						faith = faith:cult_of_zigur
					}					
				}
				set_county_faith = faith:way_of_strength
			}
		}
		else_if = {
			limit = {
				OR = {
					faith = faith:lidless_eye
					faith = faith:red_eye_cult
					faith = faith:cult_of_zigur
				}
				culture = { has_cultural_pillar = heritage_northern_apysaic }
			}
			set_character_faith = faith:faith_haruze
			every_held_title = {
				limit = {
					tier = tier_county
					OR = {
						faith = faith:lidless_eye
						faith = faith:red_eye_cult
						faith = faith:cult_of_zigur
					}					
				}
				set_county_faith = faith:faith_haruze
			}
		}
		else_if = {
			limit = {
				OR = {
					faith = faith:lidless_eye
					faith = faith:red_eye_cult
					faith = faith:cult_of_zigur
				}
				OR = {
					culture = culture:nurniag 
					culture = { any_parent_culture_or_above = { this = culture:nurniag } }
				}	
			}
			set_character_faith = faith:faith_nurniag
			every_held_title = {
				limit = {
					tier = tier_county
					OR = {
						faith = faith:lidless_eye
						faith = faith:red_eye_cult
						faith = faith:cult_of_zigur
					}					
				}
				set_county_faith = faith:faith_nurniag
			}
		}
		else_if = {
			limit = {
				OR = {
					faith = faith:lidless_eye
					faith = faith:red_eye_cult
					faith = faith:cult_of_zigur
				}
				OR = {
					culture = culture:variag 
					culture = { any_parent_culture_or_above = { this = culture:variag } }
				}
			}
			set_character_faith = faith:faith_khandish_sauronic
			every_held_title = {
				limit = {
					tier = tier_county
					OR = {
						faith = faith:lidless_eye
						faith = faith:red_eye_cult
						faith = faith:cult_of_zigur
					}					
				}
				set_county_faith = faith:faith_khandish_sauronic
			}	
		}
		else_if = {
			limit = {
				OR = {
					faith = faith:lidless_eye
					faith = faith:red_eye_cult
					faith = faith:cult_of_zigur
				}
				OR = {
					culture = { has_cultural_pillar = heritage_ioriag }
					culture = { has_cultural_pillar = heritage_igath }
				}
				NOR = {
					culture = culture:nurniag 
					culture = { any_parent_culture_or_above = { this = culture:nurniag } }
					culture = culture:variag 
					culture = { any_parent_culture_or_above = { this = culture:variag } }
				}
			}
			set_character_faith = faith:faith_kerkassk
			every_held_title = {
				limit = {
					tier = tier_county
					OR = {
						faith = faith:lidless_eye
						faith = faith:red_eye_cult
						faith = faith:cult_of_zigur
					}					
				}
				set_county_faith = faith:faith_kerkassk
			}
		}
		else_if = {
			limit = {
				OR = {
					faith = faith:lidless_eye
					faith = faith:red_eye_cult
					faith = faith:cult_of_zigur
				}
				OR = {
					culture = { has_cultural_pillar = heritage_dunedain }
					culture = { has_cultural_pillar = heritage_northern_adunaic }
				}
				NOT = {
					this = character:mouthofsauron
				}
			}
			set_character_faith = faith:kings_men
			every_held_title = {
				limit = {
					tier = tier_county
					OR = {
						faith = faith:lidless_eye
						faith = faith:red_eye_cult
						faith = faith:cult_of_zigur
					}					
				}
				set_county_faith = faith:kings_men
			}
		}
		else_if = {
			limit = {
				OR = {
					faith = faith:lidless_eye
					faith = faith:red_eye_cult
					faith = faith:cult_of_zigur
				}
				OR = {
					culture = { has_cultural_pillar = heritage_bellakari }
					culture = { has_cultural_pillar = heritage_southern_adunaic }
				}
				NOT = {
					has_title = title:k_abrakhan
				}
			}
			set_character_faith = faith:faith_anballukhor 
			every_held_title = {
				limit = {
					tier = tier_county
					OR = {
						faith = faith:lidless_eye
						faith = faith:red_eye_cult
						faith = faith:cult_of_zigur
					}
				}
				set_county_faith = faith:faith_anballukhor 
			}
		}
		else_if = {
			limit = {
				OR = {
					faith = faith:lidless_eye
					faith = faith:red_eye_cult
					faith = faith:cult_of_zigur
				}
				culture = { has_cultural_pillar = heritage_dunlending }
				
			}
			set_character_faith = faith:faith_dunlending_khrabnazerh
			every_held_title = {
				limit = {
					tier = tier_county
					OR = {
						faith = faith:lidless_eye
						faith = faith:red_eye_cult
						faith = faith:cult_of_zigur
					}					
				}
				set_county_faith = faith:faith_dunlending_khrabnazerh
			}	
		}
		else_if = {
			limit = {
				OR = {
					faith = faith:lidless_eye
					faith = faith:red_eye_cult
					faith = faith:cult_of_zigur
				}
				culture = { has_cultural_pillar = heritage_daen }
				
			}
			set_character_faith = faith:faith_donan
			every_held_title = {
				limit = {
					tier = tier_county
					OR = {
						faith = faith:lidless_eye
						faith = faith:red_eye_cult
						faith = faith:cult_of_zigur
					}					
				}
				set_county_faith = faith:faith_donan
			}	
		}
		else_if = {
			limit = {
				OR = {
					faith = faith:lidless_eye
					faith = faith:red_eye_cult
					faith = faith:cult_of_zigur
				}
				OR = {
					culture = { has_cultural_pillar = heritage_hadorim }
					culture = { has_cultural_pillar = heritage_northron }
				}
			}
			set_character_faith = faith:faith_withered_court
			every_held_title = {
				limit = {
					tier = tier_county
					OR = {
						faith = faith:lidless_eye
						faith = faith:red_eye_cult
						faith = faith:cult_of_zigur
					}					
				}
				set_county_faith = faith:faith_withered_court
			}
		}
		else_if = {
			limit = {
				OR = {
					faith = faith:lidless_eye
					faith = faith:red_eye_cult
					faith = faith:cult_of_zigur
				}
				culture = { has_cultural_pillar = heritage_middle_apysaic }
				
			}
			set_character_faith = faith:faith_kanra
			every_held_title = {
				limit = {
					tier = tier_county
					OR = {
						faith = faith:lidless_eye
						faith = faith:red_eye_cult
						faith = faith:cult_of_zigur
					}					
				}
				set_county_faith = faith:faith_kanra
			}	
		}
		else_if = {
			limit = {
				OR = {
					faith = faith:lidless_eye
					faith = faith:red_eye_cult
					faith = faith:cult_of_zigur
				}
				OR = {
					culture = { has_cultural_pillar = heritage_southern_apysaic }
					culture = { has_cultural_pillar = heritage_tulwangi }
				}
			}
			set_character_faith = faith:faith_vatra
			every_held_title = {
				limit = {
					tier = tier_county
					OR = {
						faith = faith:lidless_eye
						faith = faith:red_eye_cult
						faith = faith:cult_of_zigur
					}					
				}
				set_county_faith = faith:faith_vatra
			}	
		}
		else_if = {
			limit = {
				OR = {
					faith = faith:lidless_eye
					faith = faith:red_eye_cult
					faith = faith:cult_of_zigur
				}
				OR = {
					culture = { has_cultural_pillar = heritage_quendi }
					culture = { has_cultural_pillar = heritage_calaquendi }
					culture = { has_cultural_pillar = heritage_lomiquendi }
				}
			}
			set_character_faith = faith:faith_eldar
			every_held_title = {
				limit = {
					tier = tier_county
					OR = {
						faith = faith:lidless_eye
						faith = faith:red_eye_cult
						faith = faith:cult_of_zigur
					}					
				}
				set_county_faith = faith:faith_eldar
			}
		}
		else_if = {
			limit = {
				OR = {
					faith = faith:lidless_eye
					faith = faith:red_eye_cult
					faith = faith:cult_of_zigur
				}
				culture = { has_cultural_pillar = heritage_moriquendi }
			}
			set_character_faith = faith:faith_moriquendi
			every_held_title = {
				limit = {
					tier = tier_county
					OR = {
						faith = faith:lidless_eye
						faith = faith:red_eye_cult
						faith = faith:cult_of_zigur
					}					
				}
				set_county_faith = faith:faith_moriquendi
			}
		}
		else_if = {
			limit = {
				OR = {
					faith = faith:lidless_eye
					faith = faith:red_eye_cult
					faith = faith:cult_of_zigur
				}
				culture = { has_cultural_pillar = heritage_nafarati }
			}
			set_character_faith = faith:faith_nafar
			every_held_title = {
				limit = {
					tier = tier_county
					OR = {
						faith = faith:lidless_eye
						faith = faith:red_eye_cult
						faith = faith:cult_of_zigur
					}					
				}
				set_county_faith = faith:faith_nafar
			}
		}
		else_if = {
			limit = {
				faith = faith:cult_of_zigur
			}
			set_character_faith = faith:faith_kanra
			every_held_title = {
				limit = {
					tier = tier_county
					OR = {
						faith = faith:lidless_eye
						faith = faith:red_eye_cult
						faith = faith:cult_of_zigur
					}					
				}
				set_county_faith = faith:faith_kanra
			}	
		}
	}

	
	title:k_abrakhan.holder = {
		if = {
			limit = {
				OR = {
					faith = faith:lidless_eye
					faith = faith:red_eye_cult
					faith = faith:cult_of_zigur
				}
			}
			set_character_faith = faith:faith_kanra
			every_held_title = {
				limit = {
					tier = tier_county
					OR = {
						faith = faith:lidless_eye
						faith = faith:red_eye_cult
						faith = faith:cult_of_zigur
					}					
				}
				set_county_faith = faith:faith_kanra 
			}
		}
	}
	
	every_county = {
		limit = {
			OR = {
				faith = faith:lidless_eye
				faith = faith:red_eye_cult
				faith = faith:cult_of_zigur
			}
		}
		set_county_faith = this.holder.faith
	}
	
}

#juke note: putting it here because the code is very very similar
# deconverts white hand and lidless eye characters under saruman once he dies
#to be updated: currently code is directly in the isengard.0700 event for testing
# saruman_destroyed_effect = {
	
# }
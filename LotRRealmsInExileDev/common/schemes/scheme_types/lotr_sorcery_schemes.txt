@laamp_base_contract_phases_per_agent_charge = 1

lotr_search_for_sorcery = {
	# Basic Setup
	skill = intrigue
	desc = lotr_search_for_sorcery_general
	success_desc = "LOTR_SEARCH_FOR_SORCERY_DESC"
	icon = icon_scheme_convert_to_witchcraft
	illustration = "gfx/interface/illustrations/event_scenes/harad_drylands.dds"
	category = personal
	target_type = nothing
	is_secret = no
	is_basic = yes
	
	# Parameters
	speed_per_skill_point = -5
	spymaster_speed_per_skill_point = -10
	success_chance_growth_per_skill_point = 5

	base_progress_goal = 912
	base_maximum_success = 95
	minimum_success = 30
	freeze_scheme_when_traveling = no
	freeze_scheme_when_traveling_target = no

	# Core Triggers
	allow = {
		is_playable_character = yes
		is_imprisoned = no
		is_travelling = no
	}
	valid = {
		is_incapable = no
	}

	odds_prediction = {
		add = lotr_bountig_story_odds_skill_contribution_intrigue_value
		add = lotr_bountig_story_odds_skill_contribution_spymaster_intrigue_value
		min = 0
	}

	# Base Chances
	base_success_chance = {
		base = 0
		
		# Learning modifiers
		modifier = {
			add = {
				value = scope:owner.learning
				multiply = 2
			}
			desc = LOTR_SEARCH_FOR_SORCERY_OWNER_LEARNING
		}
		modifier = {
			trigger = { exists = scope:owner.var:search_for_sorcery_chance }
			add = scope:owner.var:search_for_sorcery_chance
			desc = LOTR_SEARCH_FOR_SORCERY_ADDITIONAL_SUCCESS
		}
	}
	
	# On Actions
	on_start = {
		save_scope_as = scheme
		scheme_owner = { trigger_event = { on_action = lotr_sorcery_intro } }
	}
	on_phase_completed = {
		save_scope_as = scheme
		scheme_owner = { save_scope_as = owner }
		scope:owner = { }
	}
	on_monthly = {
		save_scope_as = scheme
		random = {
			chance = 50
			scheme_owner = { trigger_event = { on_action = lotr_sorcery_ongoing } }
		}
	}
	on_invalidated = { }
}

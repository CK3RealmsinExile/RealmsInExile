##########################################
# Family Attributes for Powerful Families
# Administrative Government
##########################################
# Attributes appear in-game in script order
# So we group them in rough categories

# Skills
diplomatic_envoys = {
	is_shown = {
		house_head ?= {
			government_allows = administrative
			government_has_flag = government_has_powerful_families
			
			NOR = {
				government_has_flag = government_uses_merit_family_aspirations
				government_is_japanese_trigger = yes
			}
		}
	}

	level = {
		powerful_family_top_liege_modifier = {
			diplomacy = 1
			negate_diplomacy_penalty_add = 2
		}

		powerful_family_member_modifier = {
			diplomacy_per_influence_level = 1
		}
		
		ai_score = {
			value = 1
			root ?= {
				dynasty ?= {
					if = {
						limit = { has_dynasty_perk = glory_legacy_1 }
						add = 10
					}
					if = {
						limit = { has_dynasty_perk = ep1_culture_legacy_1 }
						add = 10
					}
				}
				if = {
					limit = { ai_compassion > high_positive_ai_value }
					add = {
						value = ai_compassion
						multiply = 0.05
					}
				}
				if = {
					limit = { ai_sociability > 0 }
					add = {
						value = ai_sociability 
						multiply = 0.05
					}
				}
				if = {
					limit = { ai_honor < 0 }
					add = {
						value = ai_honor 
						multiply = 0.05
					}
				}
			}
		}
	}

	illustration = "gfx/interface/icons/culture_pillars/ethos_egalitarian.dds"
}

martial_fortitude = {
	is_shown = {
		house_head ?= {
			government_allows = administrative
			government_has_flag = government_has_powerful_families
			
			NOR = {
				government_has_flag = government_uses_merit_family_aspirations
				government_is_japanese_trigger = yes
			}
		}
	}

	level = {
		powerful_family_top_liege_modifier = {
			martial = 1
			negate_martial_penalty_add = 2
		}

		powerful_family_member_modifier = {
			martial_per_influence_level = 1
		}
		
		ai_score = {
			value = 1
			root ?= {
				dynasty ?= {
					if = {
						limit = { has_dynasty_perk = warfare_legacy_1 }
						add = 10
					}
					if = {
						limit = { has_dynasty_perk = ce1_heroic_legacy_1 }
						add = 10
					}
				}
				if = {
					limit = {
						ai_has_warlike_personality = yes
					}
					add = 4
				}
				if = {
					limit = { ai_boldness > 0 }
					add = {
						value = ai_boldness
						multiply = 0.05
					}
				}
			}
		}
	}

	illustration = "gfx/interface/icons/culture_pillars/ethos_bellicose.dds"
}

staunch_stewards = {
	is_shown = {
		house_head ?= {
			government_allows = administrative
			government_has_flag = government_has_powerful_families
			
			NOR = {
				government_has_flag = government_uses_merit_family_aspirations
				government_is_japanese_trigger = yes
			}
		}
	}

	level = {
		powerful_family_top_liege_modifier = {
			stewardship = 1
			negate_stewardship_penalty_add = 2
		}
		
		powerful_family_member_modifier = {
			stewardship_per_influence_level = 1
		}
		
		ai_score = {
			value = 1
			root ?= {
				dynasty ?= {
					if = {
						limit = { has_dynasty_perk = law_legacy_1 }
						add = 10
					}
					if = {
						limit = { has_dynasty_perk = fp2_coterie_legacy_1 }
						add = 10
					}
				}
				if = {
					limit = {
						ai_has_economical_boom_personality = yes
					}
					add = 4
				}
				if = {
					limit = { ai_greed > 0 }
					add = {
						value = ai_greed
						multiply = 0.1
					}
				}
				if = {
					limit = { ai_energy > 0 }
					add = {
						value = ai_energy
						multiply = 0.05
					}
				}
				if = {
					limit = { ai_rationality > 0 }
					add = {
						value = ai_rationality
						multiply = 0.05
					}
				}
			}
		}
	}

	illustration = "gfx/interface/icons/culture_pillars/ethos_bureaucratic.dds"
}

masterful_intrigue = {
	is_shown = {
		house_head ?= {
			government_allows = administrative
			government_has_flag = government_has_powerful_families
			
			NOR = {
				government_has_flag = government_uses_merit_family_aspirations
				government_is_japanese_trigger = yes
			}
		}
	}

	level = {
		powerful_family_top_liege_modifier = {
			intrigue = 1
			negate_intrigue_penalty_add = 2
		}

		powerful_family_member_modifier = {
			intrigue_per_influence_level = 1
		}
		
		ai_score = {
			value = 1
			root ?= {
				dynasty ?= {
					if = {
						limit = { has_dynasty_perk = guile_legacy_1 }
						add = 10
					}
					if = {
						limit = { has_dynasty_perk = ep3_administrative_legacy_1 }
						add = 10
					}
				}
				if = {
					limit = { ai_boldness > 0 }
					add = {
						value = ai_boldness
						multiply = 0.1
					}
				}
				if = {
					limit = { ai_honor < 0 }
					add = {
						value = ai_honor
						multiply = -0.1
					}
				}
				if = {
					limit = { ai_rationality < 0 }
					add = {
						value = ai_rationality
						multiply = -0.05
					}
				}
			}
		}
	}

	illustration = "gfx/interface/icons/culture_pillars/ethos_courtly.dds"
}

learned_philosophers = {
	is_shown = {
		house_head ?= {
			government_allows = administrative
			government_has_flag = government_has_powerful_families
			
			NOR = {
				government_has_flag = government_uses_merit_family_aspirations
				government_is_japanese_trigger = yes
			}
		}
	}

	level = {
		powerful_family_top_liege_modifier = {
			learning = 1
			negate_learning_penalty_add = 2
		}

		powerful_family_member_modifier = {
			learning_per_influence_level = 1
		}

		parameters = {
			learned_philosophers = yes
		}
		
		ai_score = {
			value = 1
			root ?= {
				dynasty ?= {
					if = {
						limit = { has_dynasty_perk = erudition_legacy_1 }
						add = 10
					}
				}
				if = {
					limit = {
						ai_has_pious_builder_personality = yes
					}
					add = 4
				}
				if = {
					limit = { ai_rationality > high_positive_ai_value }
					add = {
						value = ai_rationality
						multiply = 0.05
					}
				}
				if = {
					limit = { ai_zeal > 0 }
					add = {
						value = ai_zeal 
						multiply = 0.1
					}
				}
			}
		}
	}

	illustration = "gfx/interface/icons/culture_pillars/ethos_spiritual.dds"
}

# Currencies
political_meddlers = {
	is_shown = {
		house_head ?= {
			government_allows = administrative
			government_has_flag = government_has_powerful_families
			
			NOR = {
				government_has_flag = government_uses_merit_family_aspirations
				government_is_japanese_trigger = yes
			}
		}
	}

	level = {
		powerful_family_top_liege_modifier = {
			monthly_influence_mult = 0.05
		}

		powerful_family_member_modifier = {
			monthly_influence = 0.1
		}
		
		ai_score = {
			value = 1
			root ?= {
				dynasty ?= {
					if = {
						limit = { has_dynasty_perk = law_legacy_1 }
						add = 10
					}
					if = {
						limit = { has_dynasty_perk = ep3_administrative_legacy_1 }
						add = 10
					}
					if = {
						limit = { has_dynasty_perk = ce1_legitimacy_legacy_1 }
						add = 10
					}
				}
				if = {
					limit = {
						ai_has_cautious_personality = yes
					}
					add = 2
				}
				if = {
					limit = { ai_boldness > high_positive_ai_value }
					add = {
						value = ai_boldness
						multiply = 0.05
					}
				}
				if = {
					limit = { ai_greed > very_high_positive_ai_value }
					add = {
						value = ai_greed
						multiply = 0.1
					}
				}
				if = {
					limit = { ai_energy > 0 }
					add = {
						value = ai_energy
						multiply = 0.1
					}
				}
				if = {
					limit = { is_councillor = yes }
					add = 5
				}
			}
		}
	}

	illustration = "gfx/interface/icons/culture_pillars/ethos_egalitarian.dds"
}

tax_assessors = {
	is_shown = {
		house_head ?= {
			government_allows = administrative
			government_has_flag = government_has_powerful_families
			
			NOR = {
				government_has_flag = government_uses_merit_family_aspirations
				government_is_japanese_trigger = yes
			}
		}
	}

	level = {
		powerful_family_top_liege_modifier = {
			administrative_government_tax_contribution_mult = 0.04
		}

		powerful_family_member_modifier = {
			tax_mult = 0.08
		}
		
		ai_score = {
			value = 1
			root ?= {
				dynasty ?= {
					if = {
						limit = { has_dynasty_perk = law_legacy_1 }
						add = 10
					}
					if = {
						limit = { has_dynasty_perk = fp3_khvarenah_legacy_1 }
						add = 10
					}
				}
				if = {
					limit = {
						ai_has_economical_boom_personality = yes
					}
					add = 4
				}
				if = {
					limit = { ai_greed > 0 }
					add = {
						value = ai_greed
						multiply = 0.1
					}
				}
				if = {
					limit = { ai_rationality > 0 }
					add = {
						value = ai_rationality
						multiply = 0.05
					}
				}
				if = {
					limit = { ai_honor > 0 }
					add = {
						value = ai_honor
						multiply = 0.05
					}
				}
			}
		}
	}

	illustration = "gfx/interface/icons/culture_pillars/ethos_bureaucratic.dds"
}

# Military
army_commanders = {
	is_shown = {
		house_head ?= {
			government_allows = administrative
			government_has_flag = government_has_powerful_families
			
			NOR = {
				government_has_flag = government_uses_merit_family_aspirations
				government_is_japanese_trigger = yes
			}
		}
	}

	level = {
		powerful_family_top_liege_modifier = {
			army_damage_mult = 0.05
		}

		powerful_family_member_modifier = {
			advantage = 5
			maa_damage_mult = 0.1
		}
		
		ai_score = {
			value = 1
			root ?= {
				dynasty ?= {
					if = {
						limit = { has_dynasty_perk = glory_legacy_1 }
						add = 10
					}
					if = {
						limit = { has_dynasty_perk = warfare_legacy_1 }
						add = 10
					}
					if = {
						limit = { has_dynasty_perk = fp1_adventure_legacy_1 }
						add = 10
					}
				}
				if = {
					limit = {
						ai_has_warlike_personality = yes
					}
					add = 4
				}
				if = {
					limit = { ai_energy > 0 }
					add = {
						value = ai_energy
						multiply = 0.1
					}
				}
			}
		}
	}

	illustration = "gfx/interface/icons/culture_pillars/ethos_bellicose.dds"
}

army_quartermasters = {
	is_shown = {
		house_head ?= {
			government_allows = administrative
			government_has_flag = government_has_powerful_families
			
			NOR = {
				government_has_flag = government_uses_merit_family_aspirations
				government_is_japanese_trigger = yes
			}
		}
	}

	level = {
		powerful_family_top_liege_modifier = {
			men_at_arms_recruitment_cost = -0.1
		}

		powerful_family_member_modifier = {
			men_at_arms_title_cap = 1
			men_at_arms_title_limit = 1
		}
		
		ai_score = {
			value = 1
			root ?= {
				dynasty ?= {
					if = {
						limit = { has_dynasty_perk = warfare_legacy_1 }
						add = 10
					}
					if = {
						limit = { has_dynasty_perk = fp1_pillage_legacy_1 }
						add = 10
					}
				}
				if = {
					limit = {
						ai_has_warlike_personality = yes
					}
					add = 4
				}
				if = {
					limit = { ai_sociability > 0 }
					add = {
						value = ai_sociability
						multiply = 0.1
					}
				}
			}
		}
	}

	illustration = "gfx/interface/icons/culture_pillars/ethos_stoic.dds"
}

tactical_besiegers = {
	is_shown = {
		house_head ?= {
			government_allows = administrative
			government_has_flag = government_has_powerful_families
			
			NOR = {
				government_has_flag = government_uses_merit_family_aspirations
				government_is_japanese_trigger = yes
			}
		}
	}

	level = {
		powerful_family_top_liege_modifier = {
			army_siege_value_mult = 0.05
			siege_weapon_recruitment_cost_mult = -0.15
		}

		powerful_family_member_modifier = {
			maa_siege_value_mult = 0.15
			siege_weapon_maintenance_mult = -0.2
		}
		
		ai_score = {
			value = 1
			root ?= {
				dynasty ?= {
					if = {
						limit = { has_dynasty_perk = warfare_legacy_1 }
						add = 10
					}
				}
				if = {
					limit = {
						ai_has_warlike_personality = yes
					}
					add = 4
				}
				if = {
					limit = { ai_rationality > 0 }
					add = {
						value = ai_rationality
						multiply = 0.1
					}
				}
			}
		}
	}

	illustration = "gfx/interface/icons/culture_pillars/ethos_stoic.dds"
}

# Schemes
confident_schemers = {
	is_shown = {
		house_head ?= {
			government_allows = administrative
			government_has_flag = government_has_powerful_families
			
			NOR = {
				government_has_flag = government_uses_merit_family_aspirations
				government_is_japanese_trigger = yes
			}
		}
	}

	level = {
		powerful_family_top_liege_modifier = {
			max_hostile_schemes_add = 1
		}

		powerful_family_member_modifier = {
			owned_hostile_scheme_success_chance_max_add = 10
			owned_hostile_scheme_success_chance_growth_add = 2
		}
		
		ai_score = {
			value = 1
			root ?= {
				dynasty ?= {
					if = {
						limit = { has_dynasty_perk = guile_legacy_1 }
						add = 10
					}
				}
				if = {
					limit = {
						ai_has_cautious_personality = yes
					}
					add = 2
				}
				if = {
					limit = { ai_honor < 0 }
					add = {
						value = ai_honor
						multiply = -0.1
					}
				}
				if = {
					limit = { ai_greed > 0 }
					add = {
						value = ai_greed
						multiply = 0.1
					}
				}
			}
		}
	}

	illustration = "gfx/interface/icons/culture_pillars/ethos_courtly.dds"
}

charismatic_socialites = {
	is_shown = {
		house_head ?= {
			government_allows = administrative
			government_has_flag = government_has_powerful_families
			
			NOR = {
				government_has_flag = government_uses_merit_family_aspirations
				government_is_japanese_trigger = yes
			}
		}
	}

	level = {
		powerful_family_top_liege_modifier = {
			max_personal_schemes_add = 1
		}

		powerful_family_member_modifier = {
			owned_personal_scheme_success_chance_max_add = 10
			owned_personal_scheme_success_chance_growth_add = 2
		}
		
		ai_score = {
			value = 1
			root ?= {
				dynasty ?= {
					if = {
						limit = { has_dynasty_perk = kin_legacy_1 }
						add = 10
					}
					if = {
						limit = { has_dynasty_perk = blood_legacy_1 }
						add = 10
					}
					if = {
						limit = { has_dynasty_perk = fp2_coterie_legacy_1 }
						add = 10
					}
					if = {
						limit = { has_dynasty_perk = ep2_activities_legacy_2 }
						add = 10
					}
				}
				if = {
					limit = { ai_compassion > 0 }
					add = {
						value = ai_compassion
						multiply = 0.1
					}
				}
				if = {
					limit = { ai_sociability > 0 }
					add = {
						value = ai_sociability 
						multiply = 0.05
					}
				}
			}
		}
	}

	illustration = "gfx/interface/icons/culture_pillars/ethos_courtly.dds"
}

# Other
respected_despots = {
	is_shown = {
		house_head ?= {
			government_allows = administrative
			government_has_flag = government_has_powerful_families
			
			NOR = {
				government_has_flag = government_uses_merit_family_aspirations
				government_is_japanese_trigger = yes
			}
		}
	}

	level = {
		powerful_family_top_liege_modifier = {
			monthly_prestige_gain_per_dread_mult = 0.001
			dread_decay_mult = -0.2
		}

		powerful_family_member_modifier = {
			dread_baseline_add = 10
			knight_effectiveness_per_dread = 0.005
		}
		
		ai_score = {
			value = 1
			root ?= {
				dynasty ?= {
					if = {
						limit = { has_dynasty_perk = guile_legacy_1 }
						add = 10
					}
					if = {
						limit = { has_dynasty_perk = ce1_legitimacy_legacy_1 }
						add = 10
					}
					if = {
						limit = { has_dynasty_perk = fp1_pillage_legacy_1 }
						add = 10
					}
				}
				if = {
					limit = { ai_compassion < 0 }
					add = {
						value = ai_compassion
						multiply = -0.1
					}
				}
				if = {
					limit = { ai_boldness > 0 }
					add = {
						value = ai_boldness
						multiply = 0.1
					}
				}
				if = {
					limit = { ai_honor < 0 }
					add = {
						value = ai_honor
						multiply = -0.1
					}
				}
			}
		}
	}

	illustration = "gfx/interface/icons/culture_pillars/ethos_stoic.dds"
}

lofty_architects = {
	is_shown = {
		house_head ?= {
			government_allows = administrative
			government_has_flag = government_has_powerful_families
			
			NOR = {
				government_has_flag = government_uses_merit_family_aspirations
				government_is_japanese_trigger = yes
			}
		}
	}

	level = {
		powerful_family_top_liege_modifier = {
			holding_build_gold_cost = -0.1
		}

		powerful_family_member_modifier = {
			build_speed = -0.1
			build_gold_cost = -0.1
			domicile_build_gold_cost = -0.1
		}
		
		ai_score = {
			value = 1
			root ?= {
				dynasty ?= {
					if = {
						limit = { has_dynasty_perk = law_legacy_1 }
						add = 10
					}
					if = {
						limit = { has_dynasty_perk = fp2_urbanism_legacy_1 }
						add = 10
					}
				}
				if = {
					limit = {
						ai_has_economical_boom_personality = yes
					}
					add = 4
				}
				if = {
					limit = { ai_rationality > 0 }
					add = {
						value = ai_rationality
						multiply = 0.1
					}
				}
			}
		}
	}

	illustration = "gfx/interface/icons/culture_pillars/ethos_bureaucratic.dds"
}

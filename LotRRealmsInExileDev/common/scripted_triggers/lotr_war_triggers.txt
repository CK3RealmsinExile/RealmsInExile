dwarf_and_goblin_underground_county_cb_trigger = {
	trigger_if = {
		limit = { scope:target ?= { title_province ?= { terrain = halls } } }
		scope:attacker ?= {
			OR = {
				is_dwarf = yes
				is_orc = yes
				is_istari = yes
				is_nazgul = yes
				is_sauron = yes
			}
		}
		scope:defender ?= {
			OR = {
				is_dwarf = yes
				is_orc = yes
				is_istari = yes
				is_nazgul = yes
				is_sauron = yes
			}
		}
	}
}

dwarf_and_goblin_underground_duchy_cb_trigger = {
	trigger_if = {
		limit = { NOT = { exists = scope:target } }
		always = no
	}
	trigger_if = {
		limit = {
			scope:target.holder = scope:defender
			scope:target ?= { any_de_jure_county ?= { title_province ?= { terrain = halls } } }
		}
		scope:attacker ?= {
			OR = {
				is_dwarf = yes
				is_orc = yes
				is_istari = yes
				is_nazgul = yes
				is_sauron = yes
			}
		}
		scope:defender ?= {
			OR = {
				is_dwarf = yes
				is_orc = yes
				is_istari = yes
				is_nazgul = yes
				is_sauron = yes
			}
		}
	}
}

underground_cb_trigger = {
	scope:attacker ?= {
		any_sub_realm_county ?= {
			any_neighboring_county ?= {
				OR = {
					holder = scope:defender
					holder = { is_vassal_or_below_of = scope:defender }
				}
			}
		}
	}
}

lotr_TH_struggle_balan_lai_defend_other_balan_lai = {
	trigger_if = {
		limit = {
			scope:defender = {
				any_character_struggle = { 
					is_struggle_type = thani_hazad_struggle 
					involvement = involved
					is_struggle_phase = struggle_thani_hazad_phase_confederation
				} 
				has_trait = balan_lai_member
			}
		}
		always = yes
	}
	trigger_else = { always = no }
}

lotr_TH_struggle_not_at_war_with_scoped_balan_lai_member = {
	has_trait = balan_lai_member
	is_independent_ruler = yes # Should be independent
	NOR = { # Shouldn't already be in a war with defender/attacker
		is_at_war_with = scope:defender
		is_at_war_with = scope:attacker
	}
	NOR = { # Shouldn't be a vassal of either of the participants
		is_vassal_or_below_of = scope:attacker
		is_vassal_or_below_of = scope:attacker
	}
}
#Triggers for great buildings of LOTR
#these should work for character scopes

#Mandala Worthiness Triggers — applied from second tier Aspect and first tier Capital Temple Complex

has_miner_trait_level_trigger = {
	trigger_if = {
		limit = { $TIER$ = 05 }
		custom_tooltip = {
			text = rite_of_mahal_tier_5_miner
			has_trait_xp = {
				trait = lifestyle_miner
				track = prospector
				value >= mandala_pilgrim_xp_last_tier_value
			}
		}
	}
	trigger_else_if = {
		limit = { $TIER$ = 04 }
		custom_tooltip = {
			text = rite_of_mahal_tier_4_miner
			has_trait_xp = {
				trait = lifestyle_miner
				track = prospector
				value >= mandala_pilgrim_xp_third_tier_value
			}
		}	
	}
	trigger_else_if = {
		limit = { $TIER$ = 03 }
		custom_tooltip = {
			text = rite_of_mahal_tier_3_miner
			has_trait_xp = {
				trait = lifestyle_miner
				track = prospector
				value >= mandala_pilgrim_xp_second_tier_value
			}
		}	
	}
	trigger_else_if = {
		limit = { $TIER$ = 02 }
		custom_tooltip = {
			text = rite_of_mahal_tier_2_miner
			has_trait_xp = {
				trait = lifestyle_miner
				track = prospector
				value >= mandala_pilgrim_xp_first_tier_value
			}
		}	
	}
	trigger_else = {
		custom_tooltip = {
			text = rite_of_mahal_tier_1_miner
			has_trait = lifestyle_miner
		}
	}
}

dwarven_second_tier_trigger = {
	has_miner_trait_level_trigger = { TIER = 02 }
	custom_tooltip = {
		text = rite_of_mahal_creation_artifacts_t2
		has_variable = num_commissioned_artifacts
		var:num_commissioned_artifacts >= num_creation_dwarven_commissioned_artifacts_t2
	}
	trigger_if = {
		limit = { is_ai = no }
		gold >= creation_mandala_stashed_gold_t2
	}	
}

dwarven_third_tier_trigger = {
	has_miner_trait_level_trigger = { TIER = 03 }
	custom_tooltip = {
		text = rite_of_mahal_creation_artifacts_t3
		has_variable = num_commissioned_artifacts
		var:num_commissioned_artifacts >= num_creation_dwarven_commissioned_artifacts_t3
	}
	trigger_if = {
		limit = { is_ai = no }
		gold >= creation_mandala_stashed_gold_t3
	}
	trigger_if = {
		limit = { is_ai = no }
		custom_tooltip = {
			text = rite_of_worthiness_creation_house_size_t3
			house = {
				any_house_member = { count >= num_creation_mandala_house_size_t3 }
			}
		}
	}
}

dwarven_fourth_tier_trigger = {
	has_miner_trait_level_trigger = { TIER = 04 }
	custom_tooltip = {
		text = rite_of_mahal_creation_artifacts_t4
		has_variable = num_commissioned_artifacts
		var:num_commissioned_artifacts >= num_creation_dwarven_commissioned_artifacts_t4
	}
	trigger_if = {
		limit = { is_ai = no }
		gold >= creation_mandala_stashed_gold_t4
	}
}

dwarven_fifth_tier_trigger = {
	has_miner_trait_level_trigger = { TIER = 05 }
	custom_tooltip = {
		text = rite_of_mahal_creation_artifacts_t5
		has_variable = num_commissioned_artifacts
		var:num_commissioned_artifacts >= num_creation_dwarven_commissioned_artifacts_t5
	}
	trigger_if = {
		limit = { is_ai = no }
		gold >= creation_mandala_stashed_gold_t5
	}
}
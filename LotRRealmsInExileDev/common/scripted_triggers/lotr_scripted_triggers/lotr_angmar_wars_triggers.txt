### General Triggers ###

is_in_angmar_wars = { # Character scope
	any_character_situation = {
		situation_type = angmar_wars_situation
	}
}

is_arnorian_ruler = { # Character scope
	any_character_situation = {
		situation_type = angmar_wars_situation
		any_situation_sub_region = {
			any_situation_sub_region_participant_group = {
				participant_group_type = arnorian_rulers
				participant_group_has_character = root
			}
		}
	}
}

is_angmar_ruler = { # Character scope
	any_character_situation = {
		situation_type = angmar_wars_situation
		any_situation_sub_region = {
			any_situation_sub_region_participant_group = {
				participant_group_type = angmar_rulers
				participant_group_has_character = root
			}
		}
	}
}

is_elven_ruler = { # Character scope
	any_character_situation = {
		situation_type = angmar_wars_situation
		any_situation_sub_region = {
			any_situation_sub_region_participant_group = {
				participant_group_type = elven_rulers
				participant_group_has_character = root
			}
		}
	}
}

is_neutral_ruler = { # Character scope
	any_character_situation = {
		situation_type = angmar_wars_situation
		any_situation_sub_region = {
			any_situation_sub_region_participant_group = {
				participant_group_type = neutral_rulers
				participant_group_has_character = root
			}
		}
	}
}

is_arnor_aligned = {
	OR = {
		is_arnorian_ruler = yes
		is_elven_ruler = yes
	}
}

is_angmar_aligned = {
	OR = {
		is_angmar_ruler
	}
}

angmar_wars_is_opposite_side = { # From character scope, takes CHARACTER = comparison
	if = {
		limit = {
			is_angmar_aligned = yes
		}
		$CHARACTER$ = {
			is_arnor_aligned = yes
		}
	}
	else_if = {
		limit = {
			is_arnor_aligned = yes
		}
		$CHARACTER$ = {
			is_angmar_aligned = yes
		}
	}
	else = {
		always = no # For neutrals and such
	}
}

angmar_wars_allowed_cbs_trigger = { # From CB triggers, takes scope:attacker and scope:defender

	# Attack and Defender are on opposite sides of situation
	NOR = {
		AND = {
			scope:attacker = { is_arnor_aligned = yes }
			scope:defender = { is_angmar_aligned = yes }
		}
		AND = {
			scope:attacker = { is_angmar_aligned = yes }
			scope:defender = { is_arnor_aligned = yes }
		}
	}

}

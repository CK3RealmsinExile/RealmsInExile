lotr_can_have_brigands_camp_purpose_trigger = {
	custom_tooltip = {
		text = lotr_can_have_brigands_camp_purpose_trigger.tt.explanation
		NAND = {
			OR = {
				is_elf = yes
				is_istari = yes
			}
			faith_is_good = yes
		}
	}
}

lotr_valid_for_contracts = {
	has_variable = lotr_story_content
}

lotr_can_recruit_in_laamp = {
	cannot_be_killed = no
	is_wastelands = no
	#Elves won't take on evil characters
	trigger_if = {
		limit = { ROOT = { is_elf = yes } }
		faith_is_evil = no
	}
	#Elves won't join just any camp
	trigger_else = {
		is_elf = no
	}
	
	#Orcs only take on evil characters or other Orcs
	trigger_if = {
		limit = { ROOT = { is_orc = yes } }
		OR = {
			faith_is_evil = yes
			is_orc = yes
		}
		#AI Orcs only take on other Orcs
		trigger_if = {
			limit = { is_ai = yes }
			is_orc = yes
		}
	}
	#Only evil characters or Orcs will take on Orcs
	trigger_if = {
		limit = { is_orc = yes }
		ROOT = {
			OR = {
				faith_is_evil = yes
				is_orc = yes
			}
		}
		trigger_if = {
			limit = { ROOT = { is_ai = yes } }
			ROOT = { is_orc = yes }
		}
	}
}

lotr_location_can_spawn_laamp_courtiers = {
	NOT = { location.culture = culture:wastelands }
	trigger_if = {
		limit = { ROOT = { is_elf = yes } }
		location = {
			faith_is_evil = no
			is_orc = no
		}
	}
	trigger_if = {
		limit = { ROOT = { is_orc = yes } }
		location = {
			OR = {
				faith_is_evil = yes
				is_orc = yes
			}
		}
		trigger_if = {
			limit = { ROOT = { is_ai = yes } }
			is_orc = yes
		}
	}
}

lotr_appropriate_contract_employer_trigger = {
	is_wastelands = no
	trigger_if = {
		limit = { $CHARACTER$ =  { faith_is_evil = yes } }
		NOR = {
			is_elf = yes
			is_maiar = yes
		}
	}
	trigger_else = {
		NOR = {
			is_orc = yes
			is_undead = yes
			is_maiar_fallen = yes
		}
	}
	
	trigger_if = {
		limit = { 
			$CHARACTER$ = { 
				OR = {
					is_elf = yes 
					is_maiar = yes
				}
			}
		}
		NOR = {
			faith_is_evil = yes
			is_orc = yes
			is_maiar_fallen = yes
			is_undead = yes
		}
	}
	trigger_if = {
		limit = { 
			$CHARACTER$ = { 
				OR = {
					is_orc = yes
					is_maiar_fallen = yes
					is_undead = yes
				}
			}
		}
		faith_is_evil = yes
		NOR = {
			is_elf = yes
			is_maiar = yes
		}
	}
}

lotr_laamp_can_visit_location = {
	trigger_if = { #Wastelands
		limit = { 
			location = {
				OR = {
					has_holding_type = wastelands_holding
					has_holding_type = ruined_holding
				}
			}
		}
		always = no
	}
	trigger_else_if = { #Men & Hobbits
		limit = { 
			location.culture = {
				OR = { 
					is_human_culture = yes 
					is_hobbit_culture = yes
				}
			}
		}
		trigger_if = { 
			limit = { location = { faith_is_evil = no } }
			NOT = {
				is_orc = yes
			}
		}
		trigger_else = {
			NOT = {
				is_elf = yes
			}
		}
		trigger_if = {
			limit = { is_ai = yes }
			NOT = {
				is_orc = yes
			}
		}
	}
	trigger_else_if = { #Dwarves
		limit = { location.culture = { is_dwarf_culture = yes } }
		trigger_if = { 
			limit = { location = { faith_is_evil = no } }
			NOT = {
				is_orc = yes
			}
		}
		trigger_else = {
			NOT = {
				is_elf = yes
			}
		}
		trigger_if = {
			limit = { is_ai = yes }
			NOT = {
				is_orc = yes
			}
		}
		trigger_if = {
			limit = {
				NOR = {
					is_dwarf = yes
					is_istari = yes
				}
			}
			custom_tooltip = {
				text = need_one_racial_patron
				any_contact = { is_dwarf = yes } #Have a Dwarven patron
			}
		}
	}
	trigger_else_if = { #Orcs
		limit = { location.culture = { is_orc_culture = yes } }
		NOT = { is_elf = yes }
		faith_is_evil = yes
		trigger_if = {
			limit = { is_ai = yes }
			OR = {
				is_orc = yes
				is_undead = yes
				is_maiar_fallen = yes
			}
		}
	}
	trigger_else_if = { #Druedain
		limit = { location.culture = { is_druedain_culture = yes } }
		trigger_if = { 
			limit = { location = { faith_is_evil = no } }
			NOT = {
				is_orc = yes
			}
		}
		trigger_else = {
			NOT = {
				is_elf = yes
			}
		}
		trigger_if = {
			limit = { is_ai = yes }
			NOT = {
				is_orc = yes
			}
		}
		trigger_if = {
			limit = {
				NOR = {
					is_druedain = yes
					is_istari = yes
				}
			}
			custom_tooltip = {
				text = need_one_racial_patron
				any_contact = { is_druedain = yes } #Have a Druadan patron
			}
		}
	}
	trigger_else_if = { #Elves
		limit = { location.culture = { is_elf_culture = yes } }
		NOT = { faith_is_evil = yes }
		NOT = { is_orc = yes }
		trigger_if = {
			limit = {
				is_elf = no
				is_maiar = no
				NAND = {
					location.county.holder.top_liege = title:k_imladris.holder
					culture = culture:dunedain_ranger
				}
			}
			custom_tooltip = {
				text = need_one_racial_patron
				any_contact = { is_elf = yes } #Have an Elven patron
			}
		}
	}
	trigger_else = { always = no }
}

lotr_valid_laamp_contract_foe_trigger = {
	is_ai = yes
	cannot_be_killed = no
	is_lotr_adult = yes
	# Make sure they're at home if possible.
	NOR = {
		is_travelling = yes
		is_commanding_army = yes
		is_imprisoned = yes
	}
	NOR = {
		# Filter out anything that might look odd.
		trigger_if = {
			limit = { exists = scope:task_contract.task_contract_employer }	
			has_any_good_relationship_with_character_trigger = { CHARACTER = scope:task_contract.task_contract_employer }
		}
		trigger_if = {
			limit = { exists = scope:task_contract }
			has_any_good_relationship_with_character_trigger = { CHARACTER = scope:task_contract.task_contract_employer }
		} trigger_else_if = {
			limit = { exists = scope:employer }
			has_any_good_relationship_with_character_trigger = { CHARACTER = scope:employer }
		} trigger_else = { always = no }
		# Plus don't include anything connected to a player.
		save_temporary_scope_as = char_temp
		any_player = {
			OR = {
				this = scope:char_temp
				is_close_or_extended_family_of = scope:char_temp
				is_consort_of = scope:char_temp
			}
		}
	}
	# And check their location is valid.
	trigger_if = {
		limit = { exists = scope:task_contract }
		in_diplomatic_range = scope:task_contract.task_contract_employer
	} trigger_else_if = {
		limit = { exists = scope:employer }
		in_diplomatic_range = scope:employer
	} trigger_else = { always = no }
}
		
disable_interaction_for_bountig_trigger = {
	trigger_if = {
		limit = { scope:recipient = character:bountigmedlokan }
		custom_tooltip = {
			text = owns_a_story_trigger
			scope:recipient = {
				NOT = { owns_story_of_type = story_cycle_bountig_medlokan }
			}
		}
	}
}
task_orc_default_1 = { # Warchief’s Tithe
	default_task = yes
	position = councillor_orc_1

	task_type = task_type_general
	task_progress = task_progress_infinite

	asset = {
		icon = "gfx/interface/icons/council_task_types/task_collect_taxes.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}

	council_owner_modifier = {
		name = task_collect_taxes_modifier
		domain_tax_mult = 1
		scale = steward_collect_taxes_total_scale
	}

	effect_desc = {
		desc = task_collect_taxes_effect_desc
		triggered_desc = {
			trigger = { liege = { has_perk = tax_man_perk } }
			desc = task_collect_taxes_tax_man_bonus_desc
		}
		triggered_desc = {
			trigger = {
				councillor_liege_has_erudition_legacy_5_perk = yes
			}
			desc = task_collect_taxes_erudition_bonus_desc
		}
		triggered_desc = {
			trigger = {
				councillor_liege_has_family_business_bonus = yes
			}
			desc = task_collect_taxes_family_business_bonus_desc
		}
		triggered_desc = {
			trigger = {
				councillor_liege_has_consulted_house_bonus = yes
			}
			desc = task_collect_taxes_consulted_house_bonus_desc
		}
		desc = {
			desc = council_task_possible_side_effects
			triggered_desc = {
				trigger = {
					stewardship > mediocre_skill_rating
				}
				desc = task_collect_taxes_extra_taxes
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					liege = {
						any_sub_realm_county = {
							steward_task_county_corruption_county_trigger = yes
						}
					}	
				}
				desc = task_collect_taxes_county_corruption
			}
		}
	}

	monthly_on_action = task_orc_default_1_effects

	ai_will_do = {
		value = 1 # Always a good backup
		
		if = { # Very greedy rulers prefer this over increasing Acceptance, in most cases
			limit = {
				scope:councillor_liege.ai_greed > 0
			}
			add = {
				value = scope:councillor_liege.ai_greed
				divide = 5
			}
		}
		
		if = {
			# Wealth Focused characters like this
			limit = {
				scope:councillor_liege = {
					has_focus = stewardship_wealth_focus
				}
			}
			add = 15
		}
		
		if = {
			# And those with the Tax Man perk
			limit = {
				scope:councillor_liege = {
					has_perk = tax_man_perk
				}
			}
			add = 15
		}
		if = {
			limit = {
				scope:councillor_liege.primary_title.tier >= tier_duchy
				scope:councillor_liege.gold < 100
			}
			add = 500
		}
		else_if = {
			limit = {
				scope:councillor_liege.gold < 10
			}
			add = 500
		}
		if = { # Conquerors want more money
			limit = {
				scope:councillor_liege = {
					ai_has_conqueror_personality = yes
				}
			}
			add = 500
		}
	}
}

task_orc_1_develop_county = { #Develop county
	position = councillor_orc_1

	task_type = task_type_county
	county_target = realm
	ai_county_target = domain
	task_progress = task_progress_value
	task_current_value = scope:councillor_liege.steward_develop_county_current_progress
	task_max_value = 100
	highlight_own_realm = yes

	asset = {
		icon = "gfx/interface/icons/council_task_types/task_develop_county.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}

	effect_desc = {
		desc = task_develop_county_complete_effect_desc
		desc = task_develop_county_effect_desc
		desc = {
			desc = council_task_possible_side_effects
			triggered_desc = {
				trigger = {
					stewardship > mediocre_skill_rating
					trigger_if = {
						limit = {
							exists = scope:county
						}
						scope:county = {
							NOT = { has_county_modifier = steward_task_efficient_taxation_modifier }
						}
					}
				}
				desc = task_develop_county_efficient_taxation
			}
			triggered_desc = {
				trigger = {
					stewardship > mediocre_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							county_control < full_county_control
						}
					}
				}
				desc = task_develop_county_increased_control
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							NOT = { has_county_modifier = steward_settler_resistance_modifier }
						}
					}
				}
				desc = task_develop_county_increased_control
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							NOT = { has_county_modifier = steward_construction_slowdown_modifier }
						}
					}
				}
				desc = task_develop_county_slow_construction
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							NOT = { has_county_modifier = steward_population_mismanaged_modifier }
						}
					}
				}
				desc = task_develop_county_loss_of_opinion
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							county_control > low_county_control
						}
					}
				}
				desc = task_develop_county_loss_of_control
			}
		}
	}

	# TOTAL PROGRESS MUST MATCH THE TOTAL OF THE COUNTY MODIFIERS BELOW
		# Add all new progress values to the script value steward_develop_county_total
		# Note that for Develop County, the County Modifiers apply the actual values, while progress is for player info only
	progress = {
		value = 0
		add = {
			value = steward_develop_county_base
			desc = STEWARD_PROGRESS_BASE
		}
		add = {
			value = scope:councillor.steward_develop_county_monthly_increase
			desc = SCALED_COUNCILLOR_STEWARDSHIP_VALUE
		}
		if = {
			limit = {
				scope:councillor_liege = { has_perk = planned_cultivation_perk }
			}
			add = {
				value = scope:councillor.steward_develop_county_perk_bonus_monthly_increase
				desc = DEVELOP_COUNTY_PERK_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_erudition_legacy_5_perk = yes
			}
			add = {
				value = scope:councillor.steward_develop_county_erudition_bonus_monthly_increase
				desc = ERUDITION_DYNASTY_PERK_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_family_business_bonus = yes
			}
			add = {
				value = scope:councillor.steward_develop_county_family_business_monthly_increase
				desc = FAMILY_BUSINESS_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_consulted_house_bonus = yes
			}
			add = {
				value = scope:councillor.steward_develop_county_consulted_house_monthly_increase
				desc = CONSULTED_HOUSE_BONUS_VALUE
			}
		}

		# Relation Bonuses/Penalties
		if = { # Friend
			limit = {
				scope:councillor_liege = {
					has_relation_friend = scope:councillor
					NOT = { has_relation_best_friend = scope:councillor }
				}
			}
			add = {
				value = scope:councillor.steward_develop_county_monthly_increase_friend_bonus
				desc = COUNCILLOR_IS_YOUR_FRIEND
			}
		}
		if = { # Best Friend
			limit = {
				scope:councillor_liege = {
					has_relation_best_friend = scope:councillor
				}
			}
			add = {
				value = scope:councillor.steward_develop_county_monthly_increase_best_friend_bonus
				desc = COUNCILLOR_IS_YOUR_BEST_FRIEND
			}
		}
		if = { # Rival
			limit = {
				scope:councillor_liege = {
					has_relation_rival = scope:councillor
					NOT = { has_relation_nemesis = scope:councillor }
				}
			}
			add = {
				value = scope:councillor.steward_develop_county_monthly_increase_rival_bonus
				desc = COUNCILLOR_IS_YOUR_RIVAL
			}
		}
		if = { # Nemesis
			limit = {
				scope:councillor_liege = {
					has_relation_nemesis = scope:councillor
				}
			}
			add = {
				value = scope:councillor.steward_develop_county_monthly_increase_nemesis_bonus
				desc = COUNCILLOR_IS_YOUR_NEMESIS
			}
		}
		if = { #Tribal penalty
			limit = {
				scope:councillor_liege = {
					should_apply_tribal_development_penalty_trigger = yes	
				}
			}
			add = {
				value = scope:councillor.steward_develop_county_tribal_penalty
				desc = DEVELOP_COUNTY_TRIBAL_PENALTY_VALUE
			}
		}	
		if = { # Development reduces the speed.
			limit = {
				exists = scope:county
				scope:county = {
					development_level > 0
				}
			}
			add = {
				value = scope:county.current_development_penalty
				desc = STEWARD_CURRENT_DEVELOPMENT_PENALTY
			}
		}
		
		if = {
			limit = { exists = scope:county }
			multiply = {
				value = scope:county.development_rate_modifier
				desc = STEWARD_COUNTY_SPEED_MODIFIERS
			}
		}

        # Royal Architect
        if = {
            limit = {
                scope:councillor_liege = { has_character_modifier = employer_booner_royal_architect_2_modifier }
                OR = {
                    target_is_vassal_or_below = scope:target_character
                    this = scope:target_character
                }
            }
            multiply = {
                value = 1.1
                desc = employer_booner_royal_architect_2_modifier
            }
        }
        else_if = {
            limit = {
                scope:councillor_liege = { has_character_modifier = employer_booner_royal_architect_3_modifier }
                OR = {
                    target_is_vassal_or_below = scope:target_character
                    this = scope:target_character
                }
            }
            multiply = {
                value = 1.1
                desc = employer_booner_royal_architect_3_modifier
            }
        }
	}
	full_progress = steward_develop_county_full_progress
	custom_other_loc = STEWARD_COUNTY_SPEED_OTHER

	potential_county = {
		OR = {
			scope:county = {
				development_level < max_development_level
				title_province = { has_holding_type = settlement_holding }
				trigger_if = {
					limit = {
						scope:councillor_liege = {
							is_ai = yes
							exists = capital_county
						}
					}
					OR = {
						this = scope:councillor_liege.capital_county
						AND = {
							holder = scope:councillor_liege
							title_province = {
								OR = {
									terrain = oasis
									terrain = farmlands
									terrain = floodplains
								}
							}
						}
					}
					OR = {
						scope:councillor_liege = {
							has_character_flag = vassal_directive_improve_development
							vassal_is_valid_and_follows_directive_trigger = { VASSAL = this LIEGE = liege }
						}
						culture = scope:councillor_liege.culture
						culture = {
							cultural_acceptance = { target = scope:councillor_liege.culture value >= 50 }
						}
						scope:councillor_liege = {
							primary_title.tier < tier_duchy
						}
						AND = {
							scope:councillor_liege = {
								has_character_flag = agenda_towards_deescalation
							}
							NOT = {
								culture = scope:councillor_liege.culture
							}
						}
					}
				}
			}
			scope:county = {
				development_level < max_development_level
				trigger_if = {
					limit = {
						scope:councillor_liege = {
							is_ai = yes
							exists = capital_county
						}
					}
					OR = {
						this = scope:councillor_liege.capital_county
						AND = {
							holder = scope:councillor_liege
							title_province = {
								OR = {
									terrain = oasis
									terrain = farmlands
									terrain = floodplains
								}
							}
						}
					}
					OR = {
						culture = scope:councillor_liege.culture
						culture = {
							cultural_acceptance = { target = scope:councillor_liege.culture value >= 50 }
						}
						scope:councillor_liege = {
							primary_title.tier < tier_duchy
						}
						AND = {
							scope:councillor_liege = {
								has_character_flag = agenda_towards_deescalation
							}
							NOT = {
								culture = scope:councillor_liege.culture
							}
						}
					}
				}
			}
		}
	}

	county_modifier = {
		name = steward_develop_county_modifier
		development_growth = 100
		holding_build_speed = -7
		#holding_build_gold_cost = -1
		build_speed = -7
		#build_gold_cost = -1
		scale = { value = steward_develop_county_total divide = 100 }
	}

	county_modifier = {
		name = steward_develop_county_current_development_modifier
		development_growth = 100
		scale = { value = scope:councillor.current_development_penalty divide = 100 }
	}

	county_modifier = {
		name = steward_develop_county_tribal_penalty_modifier
		development_growth = 100
		scale = {
			value = 0
			if = {
				limit = {
					scope:councillor_liege = {
						should_apply_tribal_development_penalty_trigger = yes
					}
				}
				value = scope:councillor.steward_develop_county_tribal_penalty
				divide = 100
			}
		}
	}

	on_start_task_county = {
		# save current development_level for catalyst purpose
		if = {
			limit = { exists = scope:county }
			scope:county = {
				set_variable = {
					name = current_development_level
					value = development_level
				}
			}
		}
	}

	on_finish_task_county = {
		if = {
			limit = {
				OR = {
					AND = {
						exists = scope:county
						scope:county = {
							development_level = max_development_level
						}
					}
					scope:councillor_liege = {
						is_ai = yes
					}
				}
			}
			start_default_task = yes
		}
	}

	monthly_on_action = task_develop_county_side_effects

	on_monthly_county = {
		scope:councillor_liege = {
			# Check development level progress
			if = {
				limit = {
					exists = scope:county
					exists = scope:county.var:current_development_level
					scope:county = {
						floored_development_value > floored_current_development_value
					}
				}
				scope:county = {
					set_variable = {
						name = current_development_level
						value = development_level
					}
				}
				
				scope:councillor_liege = {
					if = { # Try to make relevant AI's focus on Acceptance
						limit = {
							exists = primary_title
							primary_title.tier >= tier_kingdom
							any_sub_realm_county = {
								culture = {
									cultural_acceptance = { target = scope:councillor_liege.culture value < 52 }
								}
							}
							NOT = {
								has_focus = stewardship_domain_focus
							}
						}
						add_character_flag = {
							flag = no_ai_increase_development
							years = 15
						}
					}
					else = {
						add_character_flag = {
							flag = no_ai_increase_development
							years = 5
						}
					}
				}
				
				# Struggle Catalyst
				if = {
					limit = {
						exists = scope:county
						# target someone from diff faith or culture
						scope:county = {
							NAND = {
								faith = scope:councillor_liege.faith
								culture = scope:councillor_liege.culture
							}
						}

						any_character_struggle = {
							involvement = involved
							phase_has_catalyst = catalyst_improve_development_vassal_diff_faith_culture
						}
					}
					scope:councillor_liege = {
						every_character_struggle = {
							involvement = involved
							activate_struggle_catalyst = {
								catalyst = catalyst_improve_development_vassal_diff_faith_culture
								character = scope:councillor_liege
							}
						}
					}
					# Struggle Parameter
					if = {
						limit = {
							NOT = { scope:county.culture  = scope:councillor_liege.culture }
							any_character_struggle = {
								involvement = involved
								has_struggle_phase_parameter = gain_acceptance_when_developing_other_culture_county
							}
						}
						scope:county.culture = {
							save_scope_as = current_culture
							change_cultural_acceptance = {
								target = scope:councillor_liege.culture
								value =	miniscule_cultural_acceptance_value
								desc = cultural_acceptance_gain_from_phase_effects
							}
						}
					}

				}
			}
			else_if = { # fallback for previous save: the effect would trigger a month later
				limit = {
					exists = scope:county
				}
				scope:county = {
					set_variable = {
						name = current_development_level
						value = development_level
					}
				}
			}
		}
	}

	ai_will_do = {
		value = 0
		if = {
			limit = {
				any_held_county = {
					title_province = { has_holding_type = settlement_holding }
				}
			}
			add = 1500
		}
		if = {
			limit = {
				scope:councillor = {
					is_performing_council_task = task_develop_county
				}
			}
			add = 10000 # Always keep going if this is already chosen
		}
		if = {
			# Don't do this too often
			limit = {
				scope:councillor_liege = { has_character_flag = no_ai_increase_development }
			}
			multiply = 0
		}
		else_if = {
			limit = {
				scope:councillor_liege.gold >= steward_increase_development_value
			}
			add = 300
		}
		if = {
			limit = {
				scope:councillor_liege.gold < 10
			}
			multiply = 0
		}
		
		# AI directive
		if = {
			limit = {
				scope:councillor_liege = {
					has_character_flag = vassal_directive_improve_development
					vassal_is_valid_and_follows_directive_trigger = { VASSAL = this LIEGE = liege }
				}
			}
			add = 50000
		}
	}
}

task_orc_1_diplomacy_1 = { # Ravage the Land
	position = councillor_orc_1

	task_type = task_type_county
	county_target = realm
	ai_county_target = realm
	task_progress = task_progress_percentage
	restart_on_finish = yes
	highlight_own_realm = yes

	asset = {
		icon = "gfx/interface/icons/army_status/army_status_raiding.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}
	
	effect_desc = {
		desc = {
			triggered_desc = {
				trigger = {
					scope:councillor_liege = { is_orc = yes }
				}
				desc = task_ravage_the_land_effect_desc_1_orc
			}
			desc = task_ravage_the_land_effect_desc_2
			desc = task_ravage_the_land_effect_desc_3
		}

		desc = {
			desc = council_task_possible_side_effects
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							NOT = { has_county_modifier = steward_armed_peasants_county_modifier }
						}
					}
				}
				desc = task_ravage_the_land_armed_peasants
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county.title_province = {
							NOT = { has_province_modifier = steward_lack_of_tribute_province_modifier }
						}
					}
				}
				desc = task_ravage_the_land_lack_of_tribute
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county.title_province = {
							NOT = { has_province_modifier = steward_levy_desertion_province_modifier }
						}
					}
				}
				desc = task_ravage_the_land_levy_desertion
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_ravage_the_land_wounded_steward
			}
		}
	}

	progress = {
		value = 0
		add = {
			value = steward_ravage_the_land_base
			desc = STEWARD_PROGRESS_BASE
		}
		add = {
			value = scope:councillor.steward_ravage_the_land_monthly_increase_stewardship
			desc = SCALED_COUNCILLOR_STEWARDSHIP_VALUE
		}
		add = {
			value = scope:councillor.steward_ravage_the_land_monthly_increase_martial
			desc = SCALED_COUNCILLOR_MARTIAL_VALUE
		}

		add = steward_ravage_the_land_contextual_bonuses
		
		if = { # Development reduces the speed. Should be the last non-multiply modifier applied to avoid negative values
			limit = {
				exists = scope:county
				scope:county = {
					development_level > 0
				}
			}
			add = {
				value = scope:county.ravage_the_land_development_penalty
				multiply = 0.5 # Half the normal impact from development... we're slashing and burning here!
				desc = STEWARD_RAVAGE_THE_LAND_DEVELOPMENT_PENALTY
			}
		}
		
		# Conversion speed game rules
		if = {
			limit = {
				has_game_rule = slower_culture_conversion_speed
			}
			multiply = {
				value = slower_game_rule_value
				desc = GAME_RULE_SLOWER_REASON
			}
		}
		if = {
			limit = {
				has_game_rule = significantly_slower_culture_conversion_speed
			}
			multiply = {
				value = significantly_slower_game_rule_value
				desc = GAME_RULE_SIGNIFICANTLY_SLOWER_REASON
			}
		}
		if = {
			limit = {
				has_game_rule = significantly_faster_culture_conversion_speed
			}
			multiply = {
				value = significantly_faster_game_rule_value
				desc = GAME_RULE_SIGNIFICANTLY_FASTER_REASON
			}
		}
		if = {
			limit = {
				has_game_rule = faster_culture_conversion_speed
			}
			multiply = {
				value = faster_game_rule_value
				desc = GAME_RULE_FASTER_REASON
			}
		}
	}

	potential_county = {
		scope:county = {
			custom_tooltip = {
				text = county_holder_is_not_orcish
				holder = { 
					OR = {
						is_maiar_fallen = yes
						is_nazgul = yes
						is_evil_istari = yes
					}
				}
			}
		}
		trigger_if = {
			limit = {
				scope:councillor_liege = { is_ai = yes }
			}
			NOT = { scope:councillor_liege = { restricted_culture = yes } }
			OR = {
				NOT = {
					scope:county.culture = {
						cultural_acceptance = { target = scope:councillor_liege.culture value >= 50 }
					}
				}
				scope:councillor_liege.culture = { # All AI's are motivated to spread new Hybrid/Divergent cultures
					OR = {
						is_hybrid_culture = yes
						is_divergent_culture = yes
					}
					any_parent_culture = {
						this = scope:county.culture
					}
				}
			}
			OR = {
				is_independent_ruler = yes
				scope:councillor_liege.primary_title.tier > tier_county
				scope:councillor_liege.culture = { # All AI's are motivated to spread new Hybrid/Divergent cultures
					OR = {
						is_hybrid_culture = yes
						is_divergent_culture = yes
					}
					any_parent_culture = {
						this = scope:county.culture
					}
				}
			}
			OR = {
				scope:county = {
					any_neighboring_county = {
						culture = scope:councillor_liege.culture # The AI only wants to convert counties bordering their own culture
					}
				}
				
				AND = {
					NOT = {
						scope:county = {
							any_neighboring_county = {
								culture = scope:councillor_liege.culture # The AI only wants to convert counties bordering their own culture
							}
						}
					}
				}
			}
		}
		trigger_if = { #LotR - AI should not seek to convert the Nurnoth
			limit = {
				scope:councillor_liege = {
					is_ai = yes
				}
			}
			NOT = { faith = faith:faith_nurn_slave }
		}
	}

	on_start_task_county = {
	}

	on_cancel_task_county = {
	}

	on_finish_task_county = {
		scope:county = {
			if = {
				limit = {
					NOT = {
						scope:councillor_liege.culture = {
							is_hybrid_culture = yes
							any_parent_culture = {
								this = scope:county.culture
							}
						}
					}
				}
				culture = {
					change_cultural_acceptance = {
						target = scope:councillor_liege.culture
						value = culture_conversion_acceptance_impact
						desc = cultural_acceptance_loss_promote_culture
					}
				}
			}
			if = {
				limit = {
					scope:councillor_liege = {
						is_orc = yes
					}
				}
				set_county_culture = scope:councillor_liege.culture
			}
			else_if = {
				limit = {
					scope:councillor_liege = {
						is_evil_istari = yes
					}
					scope:county = { is_orc = no }
				}
				set_county_culture = culture:isengard_urukhai
			}
			else_if = {
				limit = {
					scope:councillor_liege = {
						AND = {
							OR = {
								is_maiar_fallen = yes
								is_nazgul = yes
							}
							capital_county = title:c_amon_lanc
						}
					}
					scope:county = { is_orc = no }
				}
				set_county_culture = culture:kazgumhoth
			}
			else_if = {
				limit = {
					scope:councillor_liege = {
						is_maiar_fallen = yes
					}
					scope:county = { is_orc = no }
				}
				set_county_culture = culture:morlughai
			}
			else_if = {
				limit = {
					scope:councillor_liege = {
						is_nazgul = yes
					}
					scope:county = { is_orc = no }
				}
				set_county_culture = culture:ungurhai
			}
			set_county_faith = scope:councillor_liege.faith
			change_development_level = this.half_county_development_reduction
			remove_county_modifier = plundered_thorins_tomb_arkenstone_modifier
			remove_county_modifier = plundered_thorins_tomb_orcrist_modifier
			remove_county_modifier = thorins_tomb_modifier
			every_county_province = { barony = { generate_coa = yes } }
		}

		scope:councillor = {
			start_default_task = yes
		}
	}

	monthly_on_action = task_ravage_the_land_side_effects

	ai_will_do = {
		value = 0
		if = {
			limit = { scope:councillor_liege = { restricted_culture = yes } }
			multiply = 0
		}
		if = { # If your big boss is neither an orc nor an evil immortal, dont do this
			limit = {
				scope:councillor_liege.top_liege = {
					NOR = {
						is_orc = yes
						AND = {
							cannot_be_killed = yes
							faith_is_good = no
						}
					}
				}
			}
			multiply = 0
		}
		if = {
			limit = {
				scope:councillor = {
					is_performing_council_task = task_ravage_the_land
				}
			}
			add = 10000 # Always keep going if this is already chosen
		}
		else_if = { # Juke note: tweak this if orcs get too trigger happy. Also, didnt inclue sauron/nazgul/saruman for now
			limit = {
				scope:councillor_liege = {
					is_orc = yes
					any_realm_county = {
						culture = {
							is_orc_culture = no
						}
					}
				}
			}
			add = 200
		}

		# Motivate the AI with an escalation agenda to take this task
		if = {
			limit = {
				has_character_flag = agenda_towards_escalation
			}
			add = 500
		}
		else_if = {
			limit = {
				has_character_flag = agenda_towards_deescalation
			}
			add = -250
		}
		if = {
			# Don't do this too often
			limit = {
				scope:councillor_liege = {
					has_character_flag = no_ai_culture_convert
					NOT = { # ignore it if in Hostility with escalation
						has_character_flag = agenda_towards_escalation
					}
				}
			}
			multiply = 0
		}
		if = {
			# Interrupt this task if you're bankrupt
			limit = {
				scope:councillor_liege = {
					gold < -50
				}
			}
			multiply = 0
		}
	}
}
 
task_orc_1_martial_1 = { # March of Iron
	position = councillor_orc_1

	task_type = task_type_general
	task_progress = task_progress_infinite

	asset = {
		icon = "gfx/interface/icons/council_task_types/task_organize_levies.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}

	council_owner_modifier = {
		name = task_boost_knights_modifier

		knight_effectiveness_mult = 1
		scale = {
			value = marshal_knights_overtime_boost_scale
			divide = 100
		}
	}
	
	council_owner_modifier = {
		name = task_boost_maa_modifier

		skirmishers_damage_mult = 1
		skirmishers_toughness_mult = 1
		pikemen_damage_mult = 1
		pikemen_toughness_mult = 1
		heavy_infantry_damage_mult = 1
		heavy_infantry_toughness_mult = 1

		archers_damage_mult = 1
		archers_toughness_mult = 1

		light_cavalry_damage_mult = 1
		light_cavalry_toughness_mult = 1
		heavy_cavalry_damage_mult = 1
		heavy_cavalry_toughness_mult = 1

		archer_cavalry_damage_mult = 1
		archer_cavalry_toughness_mult = 1
		camel_cavalry_damage_mult = 1
		camel_cavalry_toughness_mult = 1
		elephant_cavalry_damage_mult = 1
		elephant_cavalry_toughness_mult = 1

		siege_weapon_damage_mult = 1
		siege_weapon_toughness_mult = 1
		
		scale = {
			value = marshal_maa_overtime_boost_scale
			divide = 100
		}
	}
	
	on_start_task = {
		set_variable = { 
			name = marshal_maa_overtime_boost
			value = 0 
		}
		if = {
			limit = {
				any_task_contract = {
					has_task_contract_type = laamp_help_train_commanders_contract
					NOT = {	task_contract_target = scope:councillor_liege }
				}
				any_player = {
					is_landless_adventurer = yes
					is_within_diplo_range = { CHARACTER = scope:councillor }
					any_character_task_contract = {
						has_task_contract_type = laamp_help_train_commanders_contract
						count <= council_task_contracts_limit_value
					}
					can_create_task_contract = {
						type_name = laamp_help_train_commanders_contract
						employer = scope:councillor
					}
					save_temporary_scope_as = player_laamp
				}
			}
			scope:player_laamp = {
				create_task_contract = {
					task_contract_type = laamp_help_train_commanders_contract
					task_contract_tier = scope:councillor.task_contract_tier_value
					location = scope:councillor.councillor_task_target
					task_contract_employer = scope:councillor
					target = scope:councillor_liege
				}
			}
		}
	}

	on_cancel_task = {
		remove_variable = marshal_maa_overtime_boost
	}

	monthly_on_action = train_commanders_monthly_on_action

	on_monthly = {
		if = {
			limit = {
				has_variable = marshal_maa_overtime_boost
				martial > var:marshal_maa_overtime_boost 
			}
			change_variable = {
				name = marshal_maa_overtime_boost
				add = 1
			}
		}
	}

    effect_desc = {
		### Commander Improvement
		desc = task_train_commanders_maa_boost_effect_desc

		desc = task_train_commanders_effect_desc
		triggered_desc = {
			trigger = {
				councillor_liege_has_erudition_legacy_5_perk = yes
			}
			desc = task_train_commanders_commander_erudition_bonus_desc
		}
		triggered_desc = {
			trigger = {
				councillor_liege_has_family_business_bonus = yes
			}
			desc = task_train_commanders_commander_family_business_bonus_desc
		}
		triggered_desc = {
			trigger = {
				councillor_liege_has_consulted_house_bonus = yes
			}
			desc = task_train_commanders_commander_consulted_house_bonus_desc
		}
		triggered_desc = {
			trigger = {
				scope:councillor_liege = { has_character_modifier = employer_booner_master_of_horse_2_modifier }
			}
			desc = task_train_commanders_master_of_horse_2_bonus_desc
		}
		triggered_desc = {
			trigger = {
				scope:councillor_liege = { has_character_modifier = employer_booner_master_of_horse_3_modifier }
			}
			desc = task_train_commanders_master_of_horse_3_bonus_desc
		}

		desc = {
			desc = council_task_possible_side_effects
			triggered_desc = {
				trigger = {
					scope:councillor_liege = {
						any_active_accolade = {
							OR = {
								has_accolade_parameter = accolade_train_commanders_bonus
								has_accolade_parameter = accolade_train_commanders_bonus_high
							}
						}
					}
				}
				desc = task_train_commanders_acclaimed_knight_drills_hastiludes
			}
			triggered_desc = {
				trigger = {
					martial > mediocre_skill_rating
				}
				desc = task_train_commanders_commander_learns_from_commander
			}
			triggered_desc = {
				trigger = {
					martial > mediocre_skill_rating
				}
				desc = task_train_commanders_knight_improved
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_train_commanders_commander_wounded
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_train_commanders_commander_maimed
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_train_commanders_commander_killed
			}
		}
	}
 
	ai_will_do = {
		value = 0

		#AI does it when they have enough gold
		if = {
			limit = {
				scope:councillor_liege = {
					gold > ai_war_chest_desired_gold_value
					number_of_maa_regiments >= 1
				}
			}
			add = martial
		}

		#AI keeps doing it once it started except if it will go in debt during a war
		if = {
			limit = {
				is_performing_council_task = task_train_commanders
			}
			add = martial
		}
		
		# AI directive
		if = {
			limit = {
				scope:councillor_liege = {
					has_character_flag = vassal_directive_train_commanders
					vassal_is_valid_and_follows_directive_trigger = { VASSAL = this LIEGE = liege }
				}
			}
			add = 10000
		}
	}
}

task_orc_1_martial_2 = { # Iron Grip
	position = councillor_orc_1

	task_type = task_type_county
	county_target = realm
	ai_county_target = domain
	task_progress = task_progress_value
	task_current_value = scope:councillor_liege.marshal_increase_control_current_progress
	task_max_value = 100 # Highest possible county control
	highlight_own_realm = yes
	restart_on_finish = yes # If it "finishes" by removing a corruption modifier, there'll still be control to regain

	asset = {
		icon = "gfx/interface/icons/council_task_types/task_increase_control.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}

	effect_desc = {
		desc = task_increase_control_effect_desc
		desc = {
			desc = council_task_possible_side_effects
			triggered_desc = {
				trigger = {
					scope:councillor_liege = {
						any_active_accolade = {
							has_accolade_parameter = accolade_increase_control_bonus
						}
					}
				}
				desc = task_increase_control_acclaimed_knight_subdues_peasantry
			}
			triggered_desc = {
				trigger = {
					martial > mediocre_skill_rating
				}
				desc = task_increase_control_increase_opinion
			}
			triggered_desc = {
				trigger = {
					martial > mediocre_skill_rating
				}
				desc = task_increase_control_baron_opinion_increase
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_increase_control_lose_opinion
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_increase_control_lose_control
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_increase_control_baron_opinion_loss
			}
		}
	}
	
	# TOTAL PROGRESS MUST MATCH THE TOTAL OF THE COUNTY MODIFIERS BELOW
		# Add all new progress values to the script value marshal_increase_control_total
		# Note that for Increase Control, the County Modifiers apply the actual values, while progress is for player info only
	progress = {
		value = 0
		add = {
			value = marshal_increase_control_base
			desc = INCREASE_CONTROL_BASE
		}
		add = {
			value = scope:councillor.marshal_increase_county_control_monthly_change
			desc = SCALED_COUNCILLOR_MARTIAL_VALUE
		}
		# Relation Bonuses/Penalties
		if = { # Friend
			limit = {
				scope:councillor_liege = {
					has_relation_friend = scope:councillor
					NOT = { has_relation_best_friend = scope:councillor }
				}
			}
			add = {
				value = scope:councillor.marshal_increase_control_monthly_increase_friend_bonus
				desc = COUNCILLOR_IS_YOUR_FRIEND
			}
		}
		if = { # Best Friend
			limit = {
				scope:councillor_liege = {
					has_relation_best_friend = scope:councillor
				}
			}
			add = {
				value = scope:councillor.marshal_increase_control_monthly_increase_best_friend_bonus
				desc = COUNCILLOR_IS_YOUR_BEST_FRIEND
			}
		}
		if = { # Rival
			limit = {
				scope:councillor_liege = {
					has_relation_rival = scope:councillor
					NOT = { has_relation_nemesis = scope:councillor }
				}
			}
			add = {
				value = scope:councillor.marshal_increase_control_monthly_increase_rival_bonus
				desc = COUNCILLOR_IS_YOUR_RIVAL
			}
		}
		if = { # Nemesis
			limit = {
				scope:councillor_liege = {
					has_relation_nemesis = scope:councillor
				}
			}
			add = {
				value = scope:councillor.marshal_increase_control_monthly_increase_nemesis_bonus
				desc = COUNCILLOR_IS_YOUR_NEMESIS
			}
		}
		if = {
			limit = {
				scope:councillor_liege = { has_perk = strict_organization_perk }
			}
			add = {
				value = scope:councillor.marshal_increase_county_control_perk_bonus_monthly_change
				desc = INCREASE_CONTROL_PERK_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_erudition_legacy_5_perk = yes
			}
			add = {
				value = scope:councillor.marshal_increase_county_control_erudition_bonus_monthly_change
				desc = ERUDITION_DYNASTY_PERK_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_family_business_bonus = yes
			}
			add = {
				value = scope:councillor.marshal_increase_county_control_family_business_bonus_monthly_change
				desc = FAMILY_BUSINESS_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_consulted_house_bonus = yes
			}
			add = {
				value = scope:councillor.marshal_increase_county_control_consulted_house_bonus_monthly_change
				desc = CONSULTED_HOUSE_BONUS_VALUE
			}
		}
		if = {
			limit = {
				scope:councillor = { has_character_modifier = event_bonus_to_county_control }
			}
			add = {
				value = scope:councillor.marshal_increase_county_control_experience_bonus_monthly_change
				desc = INCREASE_COUNTY_CONTROL_EXPERIENCE_BONUS_VALUE
			}
		}
		if = {
			limit = { exists = scope:county }
			multiply = {
				value = scope:county.monthly_county_control_growth_factor
				desc = MARSHAL_COUNTY_SPEED_MODIFIERS
			}
		}
		if = {
			limit = {
				exists = scope:county
				scope:county = { has_county_modifier = petition_liege_county_control_modifier }
			}
			add = {
				value = scope:councillor.petition_liege_county_control_modifier_value
				desc = MARSHAL_INCREASE_CONTROL_LOCAL_COUNTY_MODIFIERS
			}
		}
		#EP3
		if = {
			limit = {
				scope:councillor_liege = {
					employs_court_position = court_jester_court_position
					court_position:court_jester_court_position = {
						has_character_flag = famous_mime_control
					}
				}
			}
			add = {
				value = scope:councillor_liege.court_position:court_jester_court_position.marshal_court_jester_contribution_value
				desc = MARSHAL_INCREASE_CONTROL_MIME_MODIFIER
			}
		}
	}

	full_progress = marshal_increase_control_full_progress
	custom_other_loc = MARSHAL_COUNTY_SPEED_OTHER

	potential_county = {
		scope:county = {
			custom_description = {
				text = potential_county_control_task_trigger
				OR = {
					has_county_corruption_trigger = yes
					county_control < full_county_control
				}
			}
			# If the growth factor is 0, no amount of trying to control helps
			# (happens when the county is under siege/occupied most likely)
			monthly_county_control_growth_factor > 0
		}
	}

	county_modifier = {
		name = marshal_increase_control_modifier
		monthly_county_control_growth_add = 1
		scale = marshal_increase_control_total
	}

	on_start_task_county = {
		#spawn a task contract
		if = {
			limit = {
				scope:councillor_liege = {
					is_independent_ruler = yes					
				}
				any_player = {
					is_landless_adventurer = yes
					is_within_diplo_range = { CHARACTER = scope:councillor }
					any_character_task_contract = {
						has_task_contract_type = laamp_help_increase_control_contract
						count <= council_task_contracts_limit_value
					}
					can_create_task_contract = {
						type_name = laamp_help_increase_control_contract
						employer = scope:councillor
					}
					save_temporary_scope_as = player_laamp
				}
			}
			scope:player_laamp = {
				create_task_contract = {
					task_contract_type = laamp_help_increase_control_contract
					task_contract_tier = scope:councillor.task_contract_tier_value
					location = scope:county.title_province
					task_contract_employer = scope:councillor
					target = scope:councillor.liege
					destination = scope:county.title_province
					save_scope_as = task_contract					
				}
			}
		}
	}
	on_finish_task_county = {
		if = {
			limit = {
				scope:county = {
					has_county_corruption_trigger = yes
				}
			}
			scope:county = {
				marshal_remove_random_county_corruption_modifier_effect = yes
				change_county_control = -25
			}
		}
	}

	monthly_on_action = increase_control_monthly_on_action

	on_monthly_county = {
		random = {
			chance = scope:councillor.marshal_remove_county_corruption_chance
			scope:county = {
				marshal_remove_random_county_corruption_modifier_effect = yes
			}
		}
	}

	ai_will_do = {
		value = 1000 # Highest prio
		if = { # Keep doing Organize levies if you're at war
			limit = {
				scope:councillor_liege = {
					is_at_war = no
				}
			}
			add = 19000
		}
		if = { # Keep doing Organize levies if you're at war
			limit = {
				is_performing_council_task = task_organize_levies
				scope:councillor_liege = {
					is_at_war = yes
				}
			}
			add = -1000
		}
		if = { # Stop doing this if Organize levies could help you lose less gold during a war
			limit = {
				NOT = {
					is_performing_council_task = task_organize_levies
				}
				scope:councillor_liege = {
					is_at_war = yes
					monthly_character_income < monthly_character_expenses
				}
			}
			add = -1000
		}
	}
}

task_orc_1_martial_3 = { # Hunt for Plunder
	position = councillor_orc_1

	task_type = task_type_general
	task_progress = task_progress_infinite

	asset = {
		icon = "gfx/interface/icons/council_task_types/task_train_commanders.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}

	council_owner_modifier = {
		name = task_kurultai_raider_modifier
		hostile_county_attrition_raiding = -0.01
		max_loot_mult = 0.01
		scale = hunt_for_plunder_loot_final_value
	}

	council_owner_modifier = {
		name = task_kurultai_raider_modifier
		raid_speed = 0.01
		movement_speed_land_raiding = 0.01
		scale = hunt_for_plunder_raid_final_value
	}

	effect_desc = {
		desc = task_orc_1_martial_3_effect_desc 
		desc = task_orc_1_martial_3_raid_speed_desc
		desc = task_orc_1_martial_3_attrition_desc
		desc = task_orc_1_martial_3_raiding_desc
	}

	monthly_on_action = task_orc_default_1_effects

	ai_will_do = {
		value = 500
		if = {
			limit = {
				scope:councillor = { highest_skill = martial }
			}
			add = 500
		}
	}
}

### ------------------------------------------ ###

task_orc_default_2 = { # Warchief’s Tithe
	default_task = yes
	position = councillor_orc_2

	asset = {
		icon = "gfx/interface/icons/council_task_types/task_collect_taxes.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}

	council_owner_modifier = {
		name = task_collect_taxes_modifier
		domain_tax_mult = 1
		scale = steward_collect_taxes_total_scale
	}

	task_type = task_type_general
	task_progress = task_progress_infinite

	effect_desc = {
		desc = task_collect_taxes_effect_desc
		triggered_desc = {
			trigger = { liege = { has_perk = tax_man_perk } }
			desc = task_collect_taxes_tax_man_bonus_desc
		}
		triggered_desc = {
			trigger = {
				councillor_liege_has_erudition_legacy_5_perk = yes
			}
			desc = task_collect_taxes_erudition_bonus_desc
		}
		triggered_desc = {
			trigger = {
				councillor_liege_has_family_business_bonus = yes
			}
			desc = task_collect_taxes_family_business_bonus_desc
		}
		triggered_desc = {
			trigger = {
				councillor_liege_has_consulted_house_bonus = yes
			}
			desc = task_collect_taxes_consulted_house_bonus_desc
		}
		desc = {
			desc = council_task_possible_side_effects
			triggered_desc = {
				trigger = {
					stewardship > mediocre_skill_rating
				}
				desc = task_collect_taxes_extra_taxes
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					liege = {
						any_sub_realm_county = {
							steward_task_county_corruption_county_trigger = yes
						}
					}	
				}
				desc = task_collect_taxes_county_corruption
			}
		}
	}

	monthly_on_action = task_orc_default_1_effects

	ai_will_do = {
		value = 1 # Always a good backup
		
		if = { # Very greedy rulers prefer this over increasing Acceptance, in most cases
			limit = {
				scope:councillor_liege.ai_greed > 0
			}
			add = {
				value = scope:councillor_liege.ai_greed
				divide = 5
			}
		}
		
		if = {
			# Wealth Focused characters like this
			limit = {
				scope:councillor_liege = {
					has_focus = stewardship_wealth_focus
				}
			}
			add = 15
		}
		
		if = {
			# And those with the Tax Man perk
			limit = {
				scope:councillor_liege = {
					has_perk = tax_man_perk
				}
			}
			add = 15
		}
		if = {
			limit = {
				scope:councillor_liege.primary_title.tier >= tier_duchy
				scope:councillor_liege.gold < 100
			}
			add = 500
		}
		else_if = {
			limit = {
				scope:councillor_liege.gold < 10
			}
			add = 500
		}
		if = { # Conquerors want more money
			limit = {
				scope:councillor_liege = {
					ai_has_conqueror_personality = yes
				}
			}
			add = 500
		}
	}
}

task_orc_2_develop_county = { #Develop county
	position = councillor_orc_2

	task_type = task_type_county
	county_target = realm
	ai_county_target = domain
	task_progress = task_progress_value
	task_current_value = scope:councillor_liege.steward_develop_county_current_progress
	task_max_value = 100
	highlight_own_realm = yes

	asset = {
		icon = "gfx/interface/icons/council_task_types/task_develop_county.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}

	effect_desc = {
		desc = task_develop_county_complete_effect_desc
		desc = task_develop_county_effect_desc
		desc = {
			desc = council_task_possible_side_effects
			triggered_desc = {
				trigger = {
					stewardship > mediocre_skill_rating
					trigger_if = {
						limit = {
							exists = scope:county
						}
						scope:county = {
							NOT = { has_county_modifier = steward_task_efficient_taxation_modifier }
						}
					}
				}
				desc = task_develop_county_efficient_taxation
			}
			triggered_desc = {
				trigger = {
					stewardship > mediocre_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							county_control < full_county_control
						}
					}
				}
				desc = task_develop_county_increased_control
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							NOT = { has_county_modifier = steward_settler_resistance_modifier }
						}
					}
				}
				desc = task_develop_county_increased_control
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							NOT = { has_county_modifier = steward_construction_slowdown_modifier }
						}
					}
				}
				desc = task_develop_county_slow_construction
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							NOT = { has_county_modifier = steward_population_mismanaged_modifier }
						}
					}
				}
				desc = task_develop_county_loss_of_opinion
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							county_control > low_county_control
						}
					}
				}
				desc = task_develop_county_loss_of_control
			}
		}
	}

	# TOTAL PROGRESS MUST MATCH THE TOTAL OF THE COUNTY MODIFIERS BELOW
		# Add all new progress values to the script value steward_develop_county_total
		# Note that for Develop County, the County Modifiers apply the actual values, while progress is for player info only
	progress = {
		value = 0
		add = {
			value = steward_develop_county_base
			desc = STEWARD_PROGRESS_BASE
		}
		add = {
			value = scope:councillor.steward_develop_county_monthly_increase
			desc = SCALED_COUNCILLOR_STEWARDSHIP_VALUE
		}
		if = {
			limit = {
				scope:councillor_liege = { has_perk = planned_cultivation_perk }
			}
			add = {
				value = scope:councillor.steward_develop_county_perk_bonus_monthly_increase
				desc = DEVELOP_COUNTY_PERK_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_erudition_legacy_5_perk = yes
			}
			add = {
				value = scope:councillor.steward_develop_county_erudition_bonus_monthly_increase
				desc = ERUDITION_DYNASTY_PERK_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_family_business_bonus = yes
			}
			add = {
				value = scope:councillor.steward_develop_county_family_business_monthly_increase
				desc = FAMILY_BUSINESS_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_consulted_house_bonus = yes
			}
			add = {
				value = scope:councillor.steward_develop_county_consulted_house_monthly_increase
				desc = CONSULTED_HOUSE_BONUS_VALUE
			}
		}

		# Relation Bonuses/Penalties
		if = { # Friend
			limit = {
				scope:councillor_liege = {
					has_relation_friend = scope:councillor
					NOT = { has_relation_best_friend = scope:councillor }
				}
			}
			add = {
				value = scope:councillor.steward_develop_county_monthly_increase_friend_bonus
				desc = COUNCILLOR_IS_YOUR_FRIEND
			}
		}
		if = { # Best Friend
			limit = {
				scope:councillor_liege = {
					has_relation_best_friend = scope:councillor
				}
			}
			add = {
				value = scope:councillor.steward_develop_county_monthly_increase_best_friend_bonus
				desc = COUNCILLOR_IS_YOUR_BEST_FRIEND
			}
		}
		if = { # Rival
			limit = {
				scope:councillor_liege = {
					has_relation_rival = scope:councillor
					NOT = { has_relation_nemesis = scope:councillor }
				}
			}
			add = {
				value = scope:councillor.steward_develop_county_monthly_increase_rival_bonus
				desc = COUNCILLOR_IS_YOUR_RIVAL
			}
		}
		if = { # Nemesis
			limit = {
				scope:councillor_liege = {
					has_relation_nemesis = scope:councillor
				}
			}
			add = {
				value = scope:councillor.steward_develop_county_monthly_increase_nemesis_bonus
				desc = COUNCILLOR_IS_YOUR_NEMESIS
			}
		}
		if = { #Tribal penalty
			limit = {
				scope:councillor_liege = {
					should_apply_tribal_development_penalty_trigger = yes	
				}
			}
			add = {
				value = scope:councillor.steward_develop_county_tribal_penalty
				desc = DEVELOP_COUNTY_TRIBAL_PENALTY_VALUE
			}
		}	
		if = { # Development reduces the speed.
			limit = {
				exists = scope:county
				scope:county = {
					development_level > 0
				}
			}
			add = {
				value = scope:county.current_development_penalty
				desc = STEWARD_CURRENT_DEVELOPMENT_PENALTY
			}
		}
		
		if = {
			limit = { exists = scope:county }
			multiply = {
				value = scope:county.development_rate_modifier
				desc = STEWARD_COUNTY_SPEED_MODIFIERS
			}
		}

        # Royal Architect
        if = {
            limit = {
                scope:councillor_liege = { has_character_modifier = employer_booner_royal_architect_2_modifier }
                OR = {
                    target_is_vassal_or_below = scope:target_character
                    this = scope:target_character
                }
            }
            multiply = {
                value = 1.1
                desc = employer_booner_royal_architect_2_modifier
            }
        }
        else_if = {
            limit = {
                scope:councillor_liege = { has_character_modifier = employer_booner_royal_architect_3_modifier }
                OR = {
                    target_is_vassal_or_below = scope:target_character
                    this = scope:target_character
                }
            }
            multiply = {
                value = 1.1
                desc = employer_booner_royal_architect_3_modifier
            }
        }
	}
	full_progress = steward_develop_county_full_progress
	custom_other_loc = STEWARD_COUNTY_SPEED_OTHER

	potential_county = {
		OR = {
			scope:county = {
				development_level < max_development_level
				title_province = { has_holding_type = settlement_holding }
				trigger_if = {
					limit = {
						scope:councillor_liege = {
							is_ai = yes
							exists = capital_county
						}
					}
					OR = {
						this = scope:councillor_liege.capital_county
						AND = {
							holder = scope:councillor_liege
							title_province = {
								OR = {
									terrain = oasis
									terrain = farmlands
									terrain = floodplains
								}
							}
						}
					}
					OR = {
						scope:councillor_liege = {
							has_character_flag = vassal_directive_improve_development
							vassal_is_valid_and_follows_directive_trigger = { VASSAL = this LIEGE = liege }
						}
						culture = scope:councillor_liege.culture
						culture = {
							cultural_acceptance = { target = scope:councillor_liege.culture value >= 50 }
						}
						scope:councillor_liege = {
							primary_title.tier < tier_duchy
						}
						AND = {
							scope:councillor_liege = {
								has_character_flag = agenda_towards_deescalation
							}
							NOT = {
								culture = scope:councillor_liege.culture
							}
						}
					}
				}
			}
			scope:county = {
				development_level < max_development_level
				trigger_if = {
					limit = {
						scope:councillor_liege = {
							is_ai = yes
							exists = capital_county
						}
					}
					OR = {
						this = scope:councillor_liege.capital_county
						AND = {
							holder = scope:councillor_liege
							title_province = {
								OR = {
									terrain = oasis
									terrain = farmlands
									terrain = floodplains
								}
							}
						}
					}
					OR = {
						culture = scope:councillor_liege.culture
						culture = {
							cultural_acceptance = { target = scope:councillor_liege.culture value >= 50 }
						}
						scope:councillor_liege = {
							primary_title.tier < tier_duchy
						}
						AND = {
							scope:councillor_liege = {
								has_character_flag = agenda_towards_deescalation
							}
							NOT = {
								culture = scope:councillor_liege.culture
							}
						}
					}
				}
			}
		}
	}

	county_modifier = {
		name = steward_develop_county_modifier
		development_growth = 100
		holding_build_speed = -7
		#holding_build_gold_cost = -1
		build_speed = -7
		#build_gold_cost = -1
		scale = { value = steward_develop_county_total divide = 100 }
	}

	county_modifier = {
		name = steward_develop_county_current_development_modifier
		development_growth = 100
		scale = { value = scope:councillor.current_development_penalty divide = 100 }
	}

	county_modifier = {
		name = steward_develop_county_tribal_penalty_modifier
		development_growth = 100
		scale = {
			value = 0
			if = {
				limit = {
					scope:councillor_liege = {
						should_apply_tribal_development_penalty_trigger = yes
					}
				}
				value = scope:councillor.steward_develop_county_tribal_penalty
				divide = 100
			}
		}
	}

	on_start_task_county = {
		# save current development_level for catalyst purpose
		if = {
			limit = { exists = scope:county }
			scope:county = {
				set_variable = {
					name = current_development_level
					value = development_level
				}
			}
		}
	}

	on_finish_task_county = {
		if = {
			limit = {
				OR = {
					AND = {
						exists = scope:county
						scope:county = {
							development_level = max_development_level
						}
					}
					scope:councillor_liege = {
						is_ai = yes
					}
				}
			}
			start_default_task = yes
		}
	}

	monthly_on_action = task_develop_county_side_effects

	on_monthly_county = {
		scope:councillor_liege = {
			# Check development level progress
			if = {
				limit = {
					exists = scope:county
					exists = scope:county.var:current_development_level
					scope:county = {
						floored_development_value > floored_current_development_value
					}
				}
				scope:county = {
					set_variable = {
						name = current_development_level
						value = development_level
					}
				}
				
				scope:councillor_liege = {
					if = { # Try to make relevant AI's focus on Acceptance
						limit = {
							exists = primary_title
							primary_title.tier >= tier_kingdom
							any_sub_realm_county = {
								culture = {
									cultural_acceptance = { target = scope:councillor_liege.culture value < 52 }
								}
							}
							NOT = {
								has_focus = stewardship_domain_focus
							}
						}
						add_character_flag = {
							flag = no_ai_increase_development
							years = 15
						}
					}
					else = {
						add_character_flag = {
							flag = no_ai_increase_development
							years = 5
						}
					}
				}
				
				# Struggle Catalyst
				if = {
					limit = {
						exists = scope:county
						# target someone from diff faith or culture
						scope:county = {
							NAND = {
								faith = scope:councillor_liege.faith
								culture = scope:councillor_liege.culture
							}
						}

						any_character_struggle = {
							involvement = involved
							phase_has_catalyst = catalyst_improve_development_vassal_diff_faith_culture
						}
					}
					scope:councillor_liege = {
						every_character_struggle = {
							involvement = involved
							activate_struggle_catalyst = {
								catalyst = catalyst_improve_development_vassal_diff_faith_culture
								character = scope:councillor_liege
							}
						}
					}
					# Struggle Parameter
					if = {
						limit = {
							NOT = { scope:county.culture  = scope:councillor_liege.culture }
							any_character_struggle = {
								involvement = involved
								has_struggle_phase_parameter = gain_acceptance_when_developing_other_culture_county
							}
						}
						scope:county.culture = {
							save_scope_as = current_culture
							change_cultural_acceptance = {
								target = scope:councillor_liege.culture
								value =	miniscule_cultural_acceptance_value
								desc = cultural_acceptance_gain_from_phase_effects
							}
						}
					}

				}
			}
			else_if = { # fallback for previous save: the effect would trigger a month later
				limit = {
					exists = scope:county
				}
				scope:county = {
					set_variable = {
						name = current_development_level
						value = development_level
					}
				}
			}
		}
	}

	ai_will_do = {
		value = 0
		if = {
			limit = {
				any_held_county = {
					title_province = { has_holding_type = settlement_holding }
				}
			}
			add = 1500
		}
		if = {
			limit = {
				scope:councillor = {
					is_performing_council_task = task_develop_county
				}
			}
			add = 10000 # Always keep going if this is already chosen
		}
		if = {
			# Don't do this too often
			limit = {
				scope:councillor_liege = { has_character_flag = no_ai_increase_development }
			}
			multiply = 0
		}
		else_if = {
			limit = {
				scope:councillor_liege.gold >= steward_increase_development_value
			}
			add = 300
		}
		if = {
			limit = {
				scope:councillor_liege.gold < 10
			}
			multiply = 0
		}
		
		# AI directive
		if = {
			limit = {
				scope:councillor_liege = {
					has_character_flag = vassal_directive_improve_development
					vassal_is_valid_and_follows_directive_trigger = { VASSAL = this LIEGE = liege }
				}
			}
			add = 50000
		}
	}
}

task_orc_2_diplomacy_1 = { # Ravage the Land
	position = councillor_orc_2

	task_type = task_type_county
	county_target = realm
	ai_county_target = realm
	task_progress = task_progress_percentage
	restart_on_finish = yes
	highlight_own_realm = yes

	asset = {
		icon = "gfx/interface/icons/army_status/army_status_raiding.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}
	
	effect_desc = {
		desc = {
			triggered_desc = {
				trigger = {
					scope:councillor_liege = { is_orc = yes }
				}
				desc = task_ravage_the_land_effect_desc_1_orc
			}
			desc = task_ravage_the_land_effect_desc_2
			desc = task_ravage_the_land_effect_desc_3
		}

		desc = {
			desc = council_task_possible_side_effects
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							NOT = { has_county_modifier = steward_armed_peasants_county_modifier }
						}
					}
				}
				desc = task_ravage_the_land_armed_peasants
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county.title_province = {
							NOT = { has_province_modifier = steward_lack_of_tribute_province_modifier }
						}
					}
				}
				desc = task_ravage_the_land_lack_of_tribute
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county.title_province = {
							NOT = { has_province_modifier = steward_levy_desertion_province_modifier }
						}
					}
				}
				desc = task_ravage_the_land_levy_desertion
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_ravage_the_land_wounded_steward
			}
		}
	}

	progress = {
		value = 0
		add = {
			value = steward_ravage_the_land_base
			desc = STEWARD_PROGRESS_BASE
		}
		add = {
			value = scope:councillor.steward_ravage_the_land_monthly_increase_stewardship
			desc = SCALED_COUNCILLOR_STEWARDSHIP_VALUE
		}
		add = {
			value = scope:councillor.steward_ravage_the_land_monthly_increase_martial
			desc = SCALED_COUNCILLOR_MARTIAL_VALUE
		}

		add = steward_ravage_the_land_contextual_bonuses
		
		if = { # Development reduces the speed. Should be the last non-multiply modifier applied to avoid negative values
			limit = {
				exists = scope:county
				scope:county = {
					development_level > 0
				}
			}
			add = {
				value = scope:county.ravage_the_land_development_penalty
				multiply = 0.5 # Half the normal impact from development... we're slashing and burning here!
				desc = STEWARD_RAVAGE_THE_LAND_DEVELOPMENT_PENALTY
			}
		}
		
		# Conversion speed game rules
		if = {
			limit = {
				has_game_rule = slower_culture_conversion_speed
			}
			multiply = {
				value = slower_game_rule_value
				desc = GAME_RULE_SLOWER_REASON
			}
		}
		if = {
			limit = {
				has_game_rule = significantly_slower_culture_conversion_speed
			}
			multiply = {
				value = significantly_slower_game_rule_value
				desc = GAME_RULE_SIGNIFICANTLY_SLOWER_REASON
			}
		}
		if = {
			limit = {
				has_game_rule = significantly_faster_culture_conversion_speed
			}
			multiply = {
				value = significantly_faster_game_rule_value
				desc = GAME_RULE_SIGNIFICANTLY_FASTER_REASON
			}
		}
		if = {
			limit = {
				has_game_rule = faster_culture_conversion_speed
			}
			multiply = {
				value = faster_game_rule_value
				desc = GAME_RULE_FASTER_REASON
			}
		}
	}

	potential_county = {
		scope:county = {
			custom_tooltip = {
				text = county_is_already_orcish
				is_orc = no
			}	
			custom_tooltip = {
				text = county_holder_is_not_orcish
				holder = { 
					OR = {
						is_orc = yes
						is_maiar_fallen = yes
						is_nazgul = yes
						is_evil_istari = yes
					}
				}
			}
			custom_tooltip = {
				text = county_culture_matches_a_liege_or_above
				NOT = {
					scope:councillor_liege = {
						any_liege_or_above = {
							culture = scope:county.culture
						}
					}
				}
			}
		}
		trigger_if = {
			limit = {
				scope:councillor_liege = { is_ai = yes }
			}
			NOT = { scope:councillor_liege = { restricted_culture = yes } }
			OR = {
				NOT = {
					scope:county.culture = {
						cultural_acceptance = { target = scope:councillor_liege.culture value >= 50 }
					}
				}
				scope:councillor_liege.culture = { # All AI's are motivated to spread new Hybrid/Divergent cultures
					OR = {
						is_hybrid_culture = yes
						is_divergent_culture = yes
					}
					any_parent_culture = {
						this = scope:county.culture
					}
				}
			}
			OR = {
				is_independent_ruler = yes
				scope:councillor_liege.primary_title.tier > tier_county
				scope:councillor_liege.culture = { # All AI's are motivated to spread new Hybrid/Divergent cultures
					OR = {
						is_hybrid_culture = yes
						is_divergent_culture = yes
					}
					any_parent_culture = {
						this = scope:county.culture
					}
				}
			}
			OR = {
				scope:county = {
					any_neighboring_county = {
						culture = scope:councillor_liege.culture # The AI only wants to convert counties bordering their own culture
					}
				}
				
				AND = {
					NOT = {
						scope:county = {
							any_neighboring_county = {
								culture = scope:councillor_liege.culture # The AI only wants to convert counties bordering their own culture
							}
						}
					}
				}
			}
		}
		trigger_if = { #LotR - AI should not seek to convert the Nurnoth
			limit = {
				scope:councillor_liege = {
					is_ai = yes
				}
			}
			NOT = { faith = faith:faith_nurn_slave }
		}
	}

	on_start_task_county = {
	}

	on_cancel_task_county = {
	}

	on_finish_task_county = {
		scope:county = {
			if = {
				limit = {
					NOT = {
						scope:councillor_liege.culture = {
							is_hybrid_culture = yes
							any_parent_culture = {
								this = scope:county.culture
							}
						}
					}
				}
				culture = {
					change_cultural_acceptance = {
						target = scope:councillor_liege.culture
						value = culture_conversion_acceptance_impact
						desc = cultural_acceptance_loss_promote_culture
					}
				}
			}
			if = {
				limit = {
					scope:councillor_liege = {
						is_orc = yes
					}
				}
				set_county_culture = scope:councillor_liege.culture
			}
			else_if = {
				limit = {
					scope:councillor_liege = {
						is_evil_istari = yes
					}
					scope:county = { is_orc = no }
				}
				set_county_culture = culture:isengard_urukhai
			}
			else_if = {
				limit = {
					scope:councillor_liege = {
						AND = {
							OR = {
								is_maiar_fallen = yes
								is_nazgul = yes
							}
							capital_county = title:c_amon_lanc
						}
					}
					scope:county = { is_orc = no }
				}
				set_county_culture = culture:kazgumhoth
			}
			else_if = {
				limit = {
					scope:councillor_liege = {
						is_maiar_fallen = yes
					}
					scope:county = { is_orc = no }
				}
				set_county_culture = culture:morlughai
			}
			else_if = {
				limit = {
					scope:councillor_liege = {
						is_nazgul = yes
					}
					scope:county = { is_orc = no }
				}
				set_county_culture = culture:ungurhai
			}
			set_county_faith = scope:councillor_liege.faith
			change_development_level = this.half_county_development_reduction
			remove_county_modifier = plundered_thorins_tomb_arkenstone_modifier
			remove_county_modifier = plundered_thorins_tomb_orcrist_modifier
			remove_county_modifier = thorins_tomb_modifier
			every_county_province = { barony = { generate_coa = yes } }
		}

		scope:councillor = {
			start_default_task = yes
		}
	}

	monthly_on_action = task_ravage_the_land_side_effects

	ai_will_do = {
		value = 0
		if = {
			limit = { scope:councillor_liege = { restricted_culture = yes } }
			multiply = 0
		}
		if = { # If your big boss is neither an orc nor an evil immortal, dont do this
			limit = {
				scope:councillor_liege.top_liege = {
					NOR = {
						is_orc = yes
						AND = {
							cannot_be_killed = yes
							faith_is_good = no
						}
					}
				}
			}
			multiply = 0
		}
		if = {
			limit = {
				scope:councillor = {
					is_performing_council_task = task_ravage_the_land
				}
			}
			add = 10000 # Always keep going if this is already chosen
		}
		else_if = { # Juke note: tweak this if orcs get too trigger happy. Also, didnt inclue sauron/nazgul/saruman for now
			limit = {
				scope:councillor_liege = {
					is_orc = yes
					any_realm_county = {
						culture = {
							is_orc_culture = no
						}
					}
				}
			}
			add = 200
		}

		# Motivate the AI with an escalation agenda to take this task
		if = {
			limit = {
				has_character_flag = agenda_towards_escalation
			}
			add = 500
		}
		else_if = {
			limit = {
				has_character_flag = agenda_towards_deescalation
			}
			add = -250
		}
		if = {
			# Don't do this too often
			limit = {
				scope:councillor_liege = {
					has_character_flag = no_ai_culture_convert
					NOT = { # ignore it if in Hostility with escalation
						has_character_flag = agenda_towards_escalation
					}
				}
			}
			multiply = 0
		}
		if = {
			# Interrupt this task if you're bankrupt
			limit = {
				scope:councillor_liege = {
					gold < -50
				}
			}
			multiply = 0
		}
	}
}
 
task_orc_2_martial_1 = { # March of Iron
	position = councillor_orc_2

	task_type = task_type_general
	task_progress = task_progress_infinite

	asset = {
		icon = "gfx/interface/icons/council_task_types/task_organize_levies.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}

	council_owner_modifier = {
		name = task_boost_knights_modifier

		knight_effectiveness_mult = 1
		scale = {
			value = marshal_knights_overtime_boost_scale
			divide = 100
		}
	}
	
	council_owner_modifier = {
		name = task_boost_maa_modifier

		skirmishers_damage_mult = 1
		skirmishers_toughness_mult = 1
		pikemen_damage_mult = 1
		pikemen_toughness_mult = 1
		heavy_infantry_damage_mult = 1
		heavy_infantry_toughness_mult = 1

		archers_damage_mult = 1
		archers_toughness_mult = 1

		light_cavalry_damage_mult = 1
		light_cavalry_toughness_mult = 1
		heavy_cavalry_damage_mult = 1
		heavy_cavalry_toughness_mult = 1

		archer_cavalry_damage_mult = 1
		archer_cavalry_toughness_mult = 1
		camel_cavalry_damage_mult = 1
		camel_cavalry_toughness_mult = 1
		elephant_cavalry_damage_mult = 1
		elephant_cavalry_toughness_mult = 1

		siege_weapon_damage_mult = 1
		siege_weapon_toughness_mult = 1
		
		scale = {
			value = marshal_maa_overtime_boost_scale
			divide = 100
		}
	}
	
	on_start_task = {
		set_variable = { 
			name = marshal_maa_overtime_boost
			value = 0 
		}
		if = {
			limit = {
				any_task_contract = {
					has_task_contract_type = laamp_help_train_commanders_contract
					NOT = {	task_contract_target = scope:councillor_liege }
				}
				any_player = {
					is_landless_adventurer = yes
					is_within_diplo_range = { CHARACTER = scope:councillor }
					any_character_task_contract = {
						has_task_contract_type = laamp_help_train_commanders_contract
						count <= council_task_contracts_limit_value
					}
					can_create_task_contract = {
						type_name = laamp_help_train_commanders_contract
						employer = scope:councillor
					}
					save_temporary_scope_as = player_laamp
				}
			}
			scope:player_laamp = {
				create_task_contract = {
					task_contract_type = laamp_help_train_commanders_contract
					task_contract_tier = scope:councillor.task_contract_tier_value
					location = scope:councillor.councillor_task_target
					task_contract_employer = scope:councillor
					target = scope:councillor_liege
				}
			}
		}
	}

	on_cancel_task = {
		remove_variable = marshal_maa_overtime_boost
	}

	monthly_on_action = train_commanders_monthly_on_action

	on_monthly = {
		if = {
			limit = {
				has_variable = marshal_maa_overtime_boost
				martial > var:marshal_maa_overtime_boost 
			}
			change_variable = {
				name = marshal_maa_overtime_boost
				add = 1
			}
		}
	}


    effect_desc = {
		### Commander Improvement
		desc = task_train_commanders_maa_boost_effect_desc

		desc = task_train_commanders_effect_desc
		triggered_desc = {
			trigger = {
				councillor_liege_has_erudition_legacy_5_perk = yes
			}
			desc = task_train_commanders_commander_erudition_bonus_desc
		}
		triggered_desc = {
			trigger = {
				councillor_liege_has_family_business_bonus = yes
			}
			desc = task_train_commanders_commander_family_business_bonus_desc
		}
		triggered_desc = {
			trigger = {
				councillor_liege_has_consulted_house_bonus = yes
			}
			desc = task_train_commanders_commander_consulted_house_bonus_desc
		}
		triggered_desc = {
			trigger = {
				scope:councillor_liege = { has_character_modifier = employer_booner_master_of_horse_2_modifier }
			}
			desc = task_train_commanders_master_of_horse_2_bonus_desc
		}
		triggered_desc = {
			trigger = {
				scope:councillor_liege = { has_character_modifier = employer_booner_master_of_horse_3_modifier }
			}
			desc = task_train_commanders_master_of_horse_3_bonus_desc
		}

		desc = {
			desc = council_task_possible_side_effects
			triggered_desc = {
				trigger = {
					scope:councillor_liege = {
						any_active_accolade = {
							OR = {
								has_accolade_parameter = accolade_train_commanders_bonus
								has_accolade_parameter = accolade_train_commanders_bonus_high
							}
						}
					}
				}
				desc = task_train_commanders_acclaimed_knight_drills_hastiludes
			}
			triggered_desc = {
				trigger = {
					martial > mediocre_skill_rating
				}
				desc = task_train_commanders_commander_learns_from_commander
			}
			triggered_desc = {
				trigger = {
					martial > mediocre_skill_rating
				}
				desc = task_train_commanders_knight_improved
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_train_commanders_commander_wounded
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_train_commanders_commander_maimed
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_train_commanders_commander_killed
			}
		}
	}
 
	ai_will_do = {
		value = 0

		#AI does it when they have enough gold
		if = {
			limit = {
				scope:councillor_liege = {
					gold > ai_war_chest_desired_gold_value
					number_of_maa_regiments >= 1
				}
			}
			add = martial
		}

		#AI keeps doing it once it started except if it will go in debt during a war
		if = {
			limit = {
				is_performing_council_task = task_train_commanders
			}
			add = martial
		}
		
		# AI directive
		if = {
			limit = {
				scope:councillor_liege = {
					has_character_flag = vassal_directive_train_commanders
					vassal_is_valid_and_follows_directive_trigger = { VASSAL = this LIEGE = liege }
				}
			}
			add = 10000
		}
	}
}

task_orc_2_martial_2 = { # Iron Grip
	position = councillor_orc_2

	task_type = task_type_county
	county_target = realm
	ai_county_target = domain
	task_progress = task_progress_value
	task_current_value = scope:councillor_liege.marshal_increase_control_current_progress
	task_max_value = 100 # Highest possible county control
	highlight_own_realm = yes
	restart_on_finish = yes # If it "finishes" by removing a corruption modifier, there'll still be control to regain

	asset = {
		icon = "gfx/interface/icons/council_task_types/task_increase_control.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}

	effect_desc = {
		desc = task_increase_control_effect_desc
		desc = {
			desc = council_task_possible_side_effects
			triggered_desc = {
				trigger = {
					scope:councillor_liege = {
						any_active_accolade = {
							has_accolade_parameter = accolade_increase_control_bonus
						}
					}
				}
				desc = task_increase_control_acclaimed_knight_subdues_peasantry
			}
			triggered_desc = {
				trigger = {
					martial > mediocre_skill_rating
				}
				desc = task_increase_control_increase_opinion
			}
			triggered_desc = {
				trigger = {
					martial > mediocre_skill_rating
				}
				desc = task_increase_control_baron_opinion_increase
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_increase_control_lose_opinion
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_increase_control_lose_control
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_increase_control_baron_opinion_loss
			}
		}
	}
	
	# TOTAL PROGRESS MUST MATCH THE TOTAL OF THE COUNTY MODIFIERS BELOW
		# Add all new progress values to the script value marshal_increase_control_total
		# Note that for Increase Control, the County Modifiers apply the actual values, while progress is for player info only
	progress = {
		value = 0
		add = {
			value = marshal_increase_control_base
			desc = INCREASE_CONTROL_BASE
		}
		add = {
			value = scope:councillor.marshal_increase_county_control_monthly_change
			desc = SCALED_COUNCILLOR_MARTIAL_VALUE
		}
		# Relation Bonuses/Penalties
		if = { # Friend
			limit = {
				scope:councillor_liege = {
					has_relation_friend = scope:councillor
					NOT = { has_relation_best_friend = scope:councillor }
				}
			}
			add = {
				value = scope:councillor.marshal_increase_control_monthly_increase_friend_bonus
				desc = COUNCILLOR_IS_YOUR_FRIEND
			}
		}
		if = { # Best Friend
			limit = {
				scope:councillor_liege = {
					has_relation_best_friend = scope:councillor
				}
			}
			add = {
				value = scope:councillor.marshal_increase_control_monthly_increase_best_friend_bonus
				desc = COUNCILLOR_IS_YOUR_BEST_FRIEND
			}
		}
		if = { # Rival
			limit = {
				scope:councillor_liege = {
					has_relation_rival = scope:councillor
					NOT = { has_relation_nemesis = scope:councillor }
				}
			}
			add = {
				value = scope:councillor.marshal_increase_control_monthly_increase_rival_bonus
				desc = COUNCILLOR_IS_YOUR_RIVAL
			}
		}
		if = { # Nemesis
			limit = {
				scope:councillor_liege = {
					has_relation_nemesis = scope:councillor
				}
			}
			add = {
				value = scope:councillor.marshal_increase_control_monthly_increase_nemesis_bonus
				desc = COUNCILLOR_IS_YOUR_NEMESIS
			}
		}
		if = {
			limit = {
				scope:councillor_liege = { has_perk = strict_organization_perk }
			}
			add = {
				value = scope:councillor.marshal_increase_county_control_perk_bonus_monthly_change
				desc = INCREASE_CONTROL_PERK_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_erudition_legacy_5_perk = yes
			}
			add = {
				value = scope:councillor.marshal_increase_county_control_erudition_bonus_monthly_change
				desc = ERUDITION_DYNASTY_PERK_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_family_business_bonus = yes
			}
			add = {
				value = scope:councillor.marshal_increase_county_control_family_business_bonus_monthly_change
				desc = FAMILY_BUSINESS_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_consulted_house_bonus = yes
			}
			add = {
				value = scope:councillor.marshal_increase_county_control_consulted_house_bonus_monthly_change
				desc = CONSULTED_HOUSE_BONUS_VALUE
			}
		}
		if = {
			limit = {
				scope:councillor = { has_character_modifier = event_bonus_to_county_control }
			}
			add = {
				value = scope:councillor.marshal_increase_county_control_experience_bonus_monthly_change
				desc = INCREASE_COUNTY_CONTROL_EXPERIENCE_BONUS_VALUE
			}
		}
		if = {
			limit = { exists = scope:county }
			multiply = {
				value = scope:county.monthly_county_control_growth_factor
				desc = MARSHAL_COUNTY_SPEED_MODIFIERS
			}
		}
		if = {
			limit = {
				exists = scope:county
				scope:county = { has_county_modifier = petition_liege_county_control_modifier }
			}
			add = {
				value = scope:councillor.petition_liege_county_control_modifier_value
				desc = MARSHAL_INCREASE_CONTROL_LOCAL_COUNTY_MODIFIERS
			}
		}
		#EP3
		if = {
			limit = {
				scope:councillor_liege = {
					employs_court_position = court_jester_court_position
					court_position:court_jester_court_position = {
						has_character_flag = famous_mime_control
					}
				}
			}
			add = {
				value = scope:councillor_liege.court_position:court_jester_court_position.marshal_court_jester_contribution_value
				desc = MARSHAL_INCREASE_CONTROL_MIME_MODIFIER
			}
		}
	}

	full_progress = marshal_increase_control_full_progress
	custom_other_loc = MARSHAL_COUNTY_SPEED_OTHER

	potential_county = {
		scope:county = {
			custom_description = {
				text = potential_county_control_task_trigger
				OR = {
					has_county_corruption_trigger = yes
					county_control < full_county_control
				}
			}
			# If the growth factor is 0, no amount of trying to control helps
			# (happens when the county is under siege/occupied most likely)
			monthly_county_control_growth_factor > 0
		}
	}

	county_modifier = {
		name = marshal_increase_control_modifier
		monthly_county_control_growth_add = 1
		scale = marshal_increase_control_total
	}

	on_start_task_county = {
		#spawn a task contract
		if = {
			limit = {
				scope:councillor_liege = {
					is_independent_ruler = yes					
				}
				any_player = {
					is_landless_adventurer = yes
					is_within_diplo_range = { CHARACTER = scope:councillor }
					any_character_task_contract = {
						has_task_contract_type = laamp_help_increase_control_contract
						count <= council_task_contracts_limit_value
					}
					can_create_task_contract = {
						type_name = laamp_help_increase_control_contract
						employer = scope:councillor
					}
					save_temporary_scope_as = player_laamp
				}
			}
			scope:player_laamp = {
				create_task_contract = {
					task_contract_type = laamp_help_increase_control_contract
					task_contract_tier = scope:councillor.task_contract_tier_value
					location = scope:county.title_province
					task_contract_employer = scope:councillor
					target = scope:councillor.liege
					destination = scope:county.title_province
					save_scope_as = task_contract					
				}
			}
		}
	}
	on_finish_task_county = {
		if = {
			limit = {
				scope:county = {
					has_county_corruption_trigger = yes
				}
			}
			scope:county = {
				marshal_remove_random_county_corruption_modifier_effect = yes
				change_county_control = -25
			}
		}
	}

	monthly_on_action = increase_control_monthly_on_action

	on_monthly_county = {
		random = {
			chance = scope:councillor.marshal_remove_county_corruption_chance
			scope:county = {
				marshal_remove_random_county_corruption_modifier_effect = yes
			}
		}
	}

	ai_will_do = {
		value = 1000 # Highest prio
		if = { # Keep doing Organize levies if you're at war
			limit = {
				scope:councillor_liege = {
					is_at_war = no
				}
			}
			add = 19000
		}
		if = { # Keep doing Organize levies if you're at war
			limit = {
				is_performing_council_task = task_organize_levies
				scope:councillor_liege = {
					is_at_war = yes
				}
			}
			add = -1000
		}
		if = { # Stop doing this if Organize levies could help you lose less gold during a war
			limit = {
				NOT = {
					is_performing_council_task = task_organize_levies
				}
				scope:councillor_liege = {
					is_at_war = yes
					monthly_character_income < monthly_character_expenses
				}
			}
			add = -1000
		}
	}
}

task_orc_2_martial_3 = { # Hunt for Plunder
	position = councillor_orc_2

	task_type = task_type_general
	task_progress = task_progress_infinite

	asset = {
		icon = "gfx/interface/icons/council_task_types/task_train_commanders.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}

	council_owner_modifier = {
		name = task_kurultai_raider_modifier
		hostile_county_attrition_raiding = -0.01
		max_loot_mult = 0.01
		scale = hunt_for_plunder_loot_final_value
	}

	council_owner_modifier = {
		name = task_kurultai_raider_modifier
		raid_speed = 0.01
		movement_speed_land_raiding = 0.01
		scale = hunt_for_plunder_raid_final_value
	}

	effect_desc = {
		desc = task_orc_1_martial_3_effect_desc 
		desc = task_orc_1_martial_3_raid_speed_desc
		desc = task_orc_1_martial_3_attrition_desc
		desc = task_orc_1_martial_3_raiding_desc
	}

	monthly_on_action = task_orc_default_1_effects

	ai_will_do = {
		value = 500
		if = {
			limit = {
				scope:councillor = { highest_skill = martial }
			}
			add = 500
		}
	}
}

### ------------------------------------------ ###

task_orc_default_3 = { # Warchief’s Tithe
	default_task = yes
	position = councillor_orc_3

	task_type = task_type_general
	task_progress = task_progress_infinite

	asset = {
		icon = "gfx/interface/icons/council_task_types/task_collect_taxes.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}

	council_owner_modifier = {
		name = task_collect_taxes_modifier
		domain_tax_mult = 1
		scale = steward_collect_taxes_total_scale
	}

	effect_desc = {
		desc = task_collect_taxes_effect_desc
		triggered_desc = {
			trigger = { liege = { has_perk = tax_man_perk } }
			desc = task_collect_taxes_tax_man_bonus_desc
		}
		triggered_desc = {
			trigger = {
				councillor_liege_has_erudition_legacy_5_perk = yes
			}
			desc = task_collect_taxes_erudition_bonus_desc
		}
		triggered_desc = {
			trigger = {
				councillor_liege_has_family_business_bonus = yes
			}
			desc = task_collect_taxes_family_business_bonus_desc
		}
		triggered_desc = {
			trigger = {
				councillor_liege_has_consulted_house_bonus = yes
			}
			desc = task_collect_taxes_consulted_house_bonus_desc
		}
		desc = {
			desc = council_task_possible_side_effects
			triggered_desc = {
				trigger = {
					stewardship > mediocre_skill_rating
				}
				desc = task_collect_taxes_extra_taxes
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					liege = {
						any_sub_realm_county = {
							steward_task_county_corruption_county_trigger = yes
						}
					}	
				}
				desc = task_collect_taxes_county_corruption
			}
		}
	}

	monthly_on_action = task_orc_default_1_effects

	ai_will_do = {
		value = 1 # Always a good backup
		
		if = { # Very greedy rulers prefer this over increasing Acceptance, in most cases
			limit = {
				scope:councillor_liege.ai_greed > 0
			}
			add = {
				value = scope:councillor_liege.ai_greed
				divide = 5
			}
		}
		
		if = {
			# Wealth Focused characters like this
			limit = {
				scope:councillor_liege = {
					has_focus = stewardship_wealth_focus
				}
			}
			add = 15
		}
		
		if = {
			# And those with the Tax Man perk
			limit = {
				scope:councillor_liege = {
					has_perk = tax_man_perk
				}
			}
			add = 15
		}
		if = {
			limit = {
				scope:councillor_liege.primary_title.tier >= tier_duchy
				scope:councillor_liege.gold < 100
			}
			add = 500
		}
		else_if = {
			limit = {
				scope:councillor_liege.gold < 10
			}
			add = 500
		}
		if = { # Conquerors want more money
			limit = {
				scope:councillor_liege = {
					ai_has_conqueror_personality = yes
				}
			}
			add = 500
		}
	}
}

task_orc_3_develop_county = { #Develop county
	position = councillor_orc_3

	task_type = task_type_county
	county_target = realm
	ai_county_target = domain
	task_progress = task_progress_value
	task_current_value = scope:councillor_liege.steward_develop_county_current_progress
	task_max_value = 100
	highlight_own_realm = yes

	asset = {
		icon = "gfx/interface/icons/council_task_types/task_develop_county.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}

	effect_desc = {
		desc = task_develop_county_complete_effect_desc
		desc = task_develop_county_effect_desc
		desc = {
			desc = council_task_possible_side_effects
			triggered_desc = {
				trigger = {
					stewardship > mediocre_skill_rating
					trigger_if = {
						limit = {
							exists = scope:county
						}
						scope:county = {
							NOT = { has_county_modifier = steward_task_efficient_taxation_modifier }
						}
					}
				}
				desc = task_develop_county_efficient_taxation
			}
			triggered_desc = {
				trigger = {
					stewardship > mediocre_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							county_control < full_county_control
						}
					}
				}
				desc = task_develop_county_increased_control
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							NOT = { has_county_modifier = steward_settler_resistance_modifier }
						}
					}
				}
				desc = task_develop_county_increased_control
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							NOT = { has_county_modifier = steward_construction_slowdown_modifier }
						}
					}
				}
				desc = task_develop_county_slow_construction
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							NOT = { has_county_modifier = steward_population_mismanaged_modifier }
						}
					}
				}
				desc = task_develop_county_loss_of_opinion
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							county_control > low_county_control
						}
					}
				}
				desc = task_develop_county_loss_of_control
			}
		}
	}

	# TOTAL PROGRESS MUST MATCH THE TOTAL OF THE COUNTY MODIFIERS BELOW
		# Add all new progress values to the script value steward_develop_county_total
		# Note that for Develop County, the County Modifiers apply the actual values, while progress is for player info only
	progress = {
		value = 0
		add = {
			value = steward_develop_county_base
			desc = STEWARD_PROGRESS_BASE
		}
		add = {
			value = scope:councillor.steward_develop_county_monthly_increase
			desc = SCALED_COUNCILLOR_STEWARDSHIP_VALUE
		}
		if = {
			limit = {
				scope:councillor_liege = { has_perk = planned_cultivation_perk }
			}
			add = {
				value = scope:councillor.steward_develop_county_perk_bonus_monthly_increase
				desc = DEVELOP_COUNTY_PERK_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_erudition_legacy_5_perk = yes
			}
			add = {
				value = scope:councillor.steward_develop_county_erudition_bonus_monthly_increase
				desc = ERUDITION_DYNASTY_PERK_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_family_business_bonus = yes
			}
			add = {
				value = scope:councillor.steward_develop_county_family_business_monthly_increase
				desc = FAMILY_BUSINESS_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_consulted_house_bonus = yes
			}
			add = {
				value = scope:councillor.steward_develop_county_consulted_house_monthly_increase
				desc = CONSULTED_HOUSE_BONUS_VALUE
			}
		}

		# Relation Bonuses/Penalties
		if = { # Friend
			limit = {
				scope:councillor_liege = {
					has_relation_friend = scope:councillor
					NOT = { has_relation_best_friend = scope:councillor }
				}
			}
			add = {
				value = scope:councillor.steward_develop_county_monthly_increase_friend_bonus
				desc = COUNCILLOR_IS_YOUR_FRIEND
			}
		}
		if = { # Best Friend
			limit = {
				scope:councillor_liege = {
					has_relation_best_friend = scope:councillor
				}
			}
			add = {
				value = scope:councillor.steward_develop_county_monthly_increase_best_friend_bonus
				desc = COUNCILLOR_IS_YOUR_BEST_FRIEND
			}
		}
		if = { # Rival
			limit = {
				scope:councillor_liege = {
					has_relation_rival = scope:councillor
					NOT = { has_relation_nemesis = scope:councillor }
				}
			}
			add = {
				value = scope:councillor.steward_develop_county_monthly_increase_rival_bonus
				desc = COUNCILLOR_IS_YOUR_RIVAL
			}
		}
		if = { # Nemesis
			limit = {
				scope:councillor_liege = {
					has_relation_nemesis = scope:councillor
				}
			}
			add = {
				value = scope:councillor.steward_develop_county_monthly_increase_nemesis_bonus
				desc = COUNCILLOR_IS_YOUR_NEMESIS
			}
		}
		if = { #Tribal penalty
			limit = {
				scope:councillor_liege = {
					should_apply_tribal_development_penalty_trigger = yes	
				}
			}
			add = {
				value = scope:councillor.steward_develop_county_tribal_penalty
				desc = DEVELOP_COUNTY_TRIBAL_PENALTY_VALUE
			}
		}	
		if = { # Development reduces the speed.
			limit = {
				exists = scope:county
				scope:county = {
					development_level > 0
				}
			}
			add = {
				value = scope:county.current_development_penalty
				desc = STEWARD_CURRENT_DEVELOPMENT_PENALTY
			}
		}
		
		if = {
			limit = { exists = scope:county }
			multiply = {
				value = scope:county.development_rate_modifier
				desc = STEWARD_COUNTY_SPEED_MODIFIERS
			}
		}

        # Royal Architect
        if = {
            limit = {
                scope:councillor_liege = { has_character_modifier = employer_booner_royal_architect_2_modifier }
                OR = {
                    target_is_vassal_or_below = scope:target_character
                    this = scope:target_character
                }
            }
            multiply = {
                value = 1.1
                desc = employer_booner_royal_architect_2_modifier
            }
        }
        else_if = {
            limit = {
                scope:councillor_liege = { has_character_modifier = employer_booner_royal_architect_3_modifier }
                OR = {
                    target_is_vassal_or_below = scope:target_character
                    this = scope:target_character
                }
            }
            multiply = {
                value = 1.1
                desc = employer_booner_royal_architect_3_modifier
            }
        }
	}
	full_progress = steward_develop_county_full_progress
	custom_other_loc = STEWARD_COUNTY_SPEED_OTHER

	potential_county = {
		OR = {
			scope:county = {
				development_level < max_development_level
				title_province = { has_holding_type = settlement_holding }
				trigger_if = {
					limit = {
						scope:councillor_liege = {
							is_ai = yes
							exists = capital_county
						}
					}
					OR = {
						this = scope:councillor_liege.capital_county
						AND = {
							holder = scope:councillor_liege
							title_province = {
								OR = {
									terrain = oasis
									terrain = farmlands
									terrain = floodplains
								}
							}
						}
					}
					OR = {
						scope:councillor_liege = {
							has_character_flag = vassal_directive_improve_development
							vassal_is_valid_and_follows_directive_trigger = { VASSAL = this LIEGE = liege }
						}
						culture = scope:councillor_liege.culture
						culture = {
							cultural_acceptance = { target = scope:councillor_liege.culture value >= 50 }
						}
						scope:councillor_liege = {
							primary_title.tier < tier_duchy
						}
						AND = {
							scope:councillor_liege = {
								has_character_flag = agenda_towards_deescalation
							}
							NOT = {
								culture = scope:councillor_liege.culture
							}
						}
					}
				}
			}
			scope:county = {
				development_level < max_development_level
				trigger_if = {
					limit = {
						scope:councillor_liege = {
							is_ai = yes
							exists = capital_county
						}
					}
					OR = {
						this = scope:councillor_liege.capital_county
						AND = {
							holder = scope:councillor_liege
							title_province = {
								OR = {
									terrain = oasis
									terrain = farmlands
									terrain = floodplains
								}
							}
						}
					}
					OR = {
						culture = scope:councillor_liege.culture
						culture = {
							cultural_acceptance = { target = scope:councillor_liege.culture value >= 50 }
						}
						scope:councillor_liege = {
							primary_title.tier < tier_duchy
						}
						AND = {
							scope:councillor_liege = {
								has_character_flag = agenda_towards_deescalation
							}
							NOT = {
								culture = scope:councillor_liege.culture
							}
						}
					}
				}
			}
		}
	}

	county_modifier = {
		name = steward_develop_county_modifier
		development_growth = 100
		holding_build_speed = -7
		#holding_build_gold_cost = -1
		build_speed = -7
		#build_gold_cost = -1
		scale = { value = steward_develop_county_total divide = 100 }
	}

	county_modifier = {
		name = steward_develop_county_current_development_modifier
		development_growth = 100
		scale = { value = scope:councillor.current_development_penalty divide = 100 }
	}

	county_modifier = {
		name = steward_develop_county_tribal_penalty_modifier
		development_growth = 100
		scale = {
			value = 0
			if = {
				limit = {
					scope:councillor_liege = {
						should_apply_tribal_development_penalty_trigger = yes
					}
				}
				value = scope:councillor.steward_develop_county_tribal_penalty
				divide = 100
			}
		}
	}

	on_start_task_county = {
		# save current development_level for catalyst purpose
		if = {
			limit = { exists = scope:county }
			scope:county = {
				set_variable = {
					name = current_development_level
					value = development_level
				}
			}
		}
	}

	on_finish_task_county = {
		if = {
			limit = {
				OR = {
					AND = {
						exists = scope:county
						scope:county = {
							development_level = max_development_level
						}
					}
					scope:councillor_liege = {
						is_ai = yes
					}
				}
			}
			start_default_task = yes
		}
	}

	monthly_on_action = task_develop_county_side_effects

	on_monthly_county = {
		scope:councillor_liege = {
			# Check development level progress
			if = {
				limit = {
					exists = scope:county
					exists = scope:county.var:current_development_level
					scope:county = {
						floored_development_value > floored_current_development_value
					}
				}
				scope:county = {
					set_variable = {
						name = current_development_level
						value = development_level
					}
				}
				
				scope:councillor_liege = {
					if = { # Try to make relevant AI's focus on Acceptance
						limit = {
							exists = primary_title
							primary_title.tier >= tier_kingdom
							any_sub_realm_county = {
								culture = {
									cultural_acceptance = { target = scope:councillor_liege.culture value < 52 }
								}
							}
							NOT = {
								has_focus = stewardship_domain_focus
							}
						}
						add_character_flag = {
							flag = no_ai_increase_development
							years = 15
						}
					}
					else = {
						add_character_flag = {
							flag = no_ai_increase_development
							years = 5
						}
					}
				}
				
				# Struggle Catalyst
				if = {
					limit = {
						exists = scope:county
						# target someone from diff faith or culture
						scope:county = {
							NAND = {
								faith = scope:councillor_liege.faith
								culture = scope:councillor_liege.culture
							}
						}

						any_character_struggle = {
							involvement = involved
							phase_has_catalyst = catalyst_improve_development_vassal_diff_faith_culture
						}
					}
					scope:councillor_liege = {
						every_character_struggle = {
							involvement = involved
							activate_struggle_catalyst = {
								catalyst = catalyst_improve_development_vassal_diff_faith_culture
								character = scope:councillor_liege
							}
						}
					}
					# Struggle Parameter
					if = {
						limit = {
							NOT = { scope:county.culture  = scope:councillor_liege.culture }
							any_character_struggle = {
								involvement = involved
								has_struggle_phase_parameter = gain_acceptance_when_developing_other_culture_county
							}
						}
						scope:county.culture = {
							save_scope_as = current_culture
							change_cultural_acceptance = {
								target = scope:councillor_liege.culture
								value =	miniscule_cultural_acceptance_value
								desc = cultural_acceptance_gain_from_phase_effects
							}
						}
					}

				}
			}
			else_if = { # fallback for previous save: the effect would trigger a month later
				limit = {
					exists = scope:county
				}
				scope:county = {
					set_variable = {
						name = current_development_level
						value = development_level
					}
				}
			}
		}
	}

	ai_will_do = {
		value = 0
		if = {
			limit = {
				any_held_county = {
					title_province = { has_holding_type = settlement_holding }
				}
			}
			add = 1500
		}
		if = {
			limit = {
				scope:councillor = {
					is_performing_council_task = task_develop_county
				}
			}
			add = 10000 # Always keep going if this is already chosen
		}
		if = {
			# Don't do this too often
			limit = {
				scope:councillor_liege = { has_character_flag = no_ai_increase_development }
			}
			multiply = 0
		}
		else_if = {
			limit = {
				scope:councillor_liege.gold >= steward_increase_development_value
			}
			add = 300
		}
		if = {
			limit = {
				scope:councillor_liege.gold < 10
			}
			multiply = 0
		}
		
		# AI directive
		if = {
			limit = {
				scope:councillor_liege = {
					has_character_flag = vassal_directive_improve_development
					vassal_is_valid_and_follows_directive_trigger = { VASSAL = this LIEGE = liege }
				}
			}
			add = 50000
		}
	}
}

task_orc_3_diplomacy_1 = { # Ravage the Land
	position = councillor_orc_3

	task_type = task_type_county
	county_target = realm
	ai_county_target = realm
	task_progress = task_progress_percentage
	restart_on_finish = yes
	highlight_own_realm = yes

	asset = {
		icon = "gfx/interface/icons/army_status/army_status_raiding.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}
	
	effect_desc = {
		desc = {
			triggered_desc = {
				trigger = {
					scope:councillor_liege = { is_orc = yes }
				}
				desc = task_ravage_the_land_effect_desc_1_orc
			}
			desc = task_ravage_the_land_effect_desc_2
			desc = task_ravage_the_land_effect_desc_3
		}

		desc = {
			desc = council_task_possible_side_effects
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							NOT = { has_county_modifier = steward_armed_peasants_county_modifier }
						}
					}
				}
				desc = task_ravage_the_land_armed_peasants
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county.title_province = {
							NOT = { has_province_modifier = steward_lack_of_tribute_province_modifier }
						}
					}
				}
				desc = task_ravage_the_land_lack_of_tribute
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county.title_province = {
							NOT = { has_province_modifier = steward_levy_desertion_province_modifier }
						}
					}
				}
				desc = task_ravage_the_land_levy_desertion
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_ravage_the_land_wounded_steward
			}
		}
	}

	progress = {
		value = 0
		add = {
			value = steward_ravage_the_land_base
			desc = STEWARD_PROGRESS_BASE
		}
		add = {
			value = scope:councillor.steward_ravage_the_land_monthly_increase_stewardship
			desc = SCALED_COUNCILLOR_STEWARDSHIP_VALUE
		}
		add = {
			value = scope:councillor.steward_ravage_the_land_monthly_increase_martial
			desc = SCALED_COUNCILLOR_MARTIAL_VALUE
		}

		add = steward_ravage_the_land_contextual_bonuses
		
		if = { # Development reduces the speed. Should be the last non-multiply modifier applied to avoid negative values
			limit = {
				exists = scope:county
				scope:county = {
					development_level > 0
				}
			}
			add = {
				value = scope:county.ravage_the_land_development_penalty
				multiply = 0.5 # Half the normal impact from development... we're slashing and burning here!
				desc = STEWARD_RAVAGE_THE_LAND_DEVELOPMENT_PENALTY
			}
		}
		
		# Conversion speed game rules
		if = {
			limit = {
				has_game_rule = slower_culture_conversion_speed
			}
			multiply = {
				value = slower_game_rule_value
				desc = GAME_RULE_SLOWER_REASON
			}
		}
		if = {
			limit = {
				has_game_rule = significantly_slower_culture_conversion_speed
			}
			multiply = {
				value = significantly_slower_game_rule_value
				desc = GAME_RULE_SIGNIFICANTLY_SLOWER_REASON
			}
		}
		if = {
			limit = {
				has_game_rule = significantly_faster_culture_conversion_speed
			}
			multiply = {
				value = significantly_faster_game_rule_value
				desc = GAME_RULE_SIGNIFICANTLY_FASTER_REASON
			}
		}
		if = {
			limit = {
				has_game_rule = faster_culture_conversion_speed
			}
			multiply = {
				value = faster_game_rule_value
				desc = GAME_RULE_FASTER_REASON
			}
		}
	}

	potential_county = {
		scope:county = {
			custom_tooltip = {
				text = county_is_already_orcish
				is_orc = no
			}	
			custom_tooltip = {
				text = county_holder_is_not_orcish
				holder = { 
					OR = {
						is_orc = yes
						is_maiar_fallen = yes
						is_nazgul = yes
						is_evil_istari = yes
					}
				}
			}
			custom_tooltip = {
				text = county_culture_matches_a_liege_or_above
				NOT = {
					scope:councillor_liege = {
						any_liege_or_above = {
							culture = scope:county.culture
						}
					}
				}
			}
		}
		trigger_if = {
			limit = {
				scope:councillor_liege = { is_ai = yes }
			}
			NOT = { scope:councillor_liege = { restricted_culture = yes } }
			OR = {
				NOT = {
					scope:county.culture = {
						cultural_acceptance = { target = scope:councillor_liege.culture value >= 50 }
					}
				}
				scope:councillor_liege.culture = { # All AI's are motivated to spread new Hybrid/Divergent cultures
					OR = {
						is_hybrid_culture = yes
						is_divergent_culture = yes
					}
					any_parent_culture = {
						this = scope:county.culture
					}
				}
			}
			OR = {
				is_independent_ruler = yes
				scope:councillor_liege.primary_title.tier > tier_county
				scope:councillor_liege.culture = { # All AI's are motivated to spread new Hybrid/Divergent cultures
					OR = {
						is_hybrid_culture = yes
						is_divergent_culture = yes
					}
					any_parent_culture = {
						this = scope:county.culture
					}
				}
			}
			OR = {
				scope:county = {
					any_neighboring_county = {
						culture = scope:councillor_liege.culture # The AI only wants to convert counties bordering their own culture
					}
				}
				
				AND = {
					NOT = {
						scope:county = {
							any_neighboring_county = {
								culture = scope:councillor_liege.culture # The AI only wants to convert counties bordering their own culture
							}
						}
					}
				}
			}
		}
		trigger_if = { #LotR - AI should not seek to convert the Nurnoth
			limit = {
				scope:councillor_liege = {
					is_ai = yes
				}
			}
			NOT = { faith = faith:faith_nurn_slave }
		}
	}

	on_start_task_county = {
	}

	on_cancel_task_county = {
	}

	on_finish_task_county = {
		scope:county = {
			if = {
				limit = {
					NOT = {
						scope:councillor_liege.culture = {
							is_hybrid_culture = yes
							any_parent_culture = {
								this = scope:county.culture
							}
						}
					}
				}
				culture = {
					change_cultural_acceptance = {
						target = scope:councillor_liege.culture
						value = culture_conversion_acceptance_impact
						desc = cultural_acceptance_loss_promote_culture
					}
				}
			}
			if = {
				limit = {
					scope:councillor_liege = {
						is_orc = yes
					}
				}
				set_county_culture = scope:councillor_liege.culture
			}
			else_if = {
				limit = {
					scope:councillor_liege = {
						is_evil_istari = yes
					}
					scope:county = { is_orc = no }
				}
				set_county_culture = culture:isengard_urukhai
			}
			else_if = {
				limit = {
					scope:councillor_liege = {
						AND = {
							OR = {
								is_maiar_fallen = yes
								is_nazgul = yes
							}
							capital_county = title:c_amon_lanc
						}
					}
					scope:county = { is_orc = no }
				}
				set_county_culture = culture:kazgumhoth
			}
			else_if = {
				limit = {
					scope:councillor_liege = {
						is_maiar_fallen = yes
					}
					scope:county = { is_orc = no }
				}
				set_county_culture = culture:morlughai
			}
			else_if = {
				limit = {
					scope:councillor_liege = {
						is_nazgul = yes
					}
					scope:county = { is_orc = no }
				}
				set_county_culture = culture:ungurhai
			}
			set_county_faith = scope:councillor_liege.faith
			change_development_level = this.half_county_development_reduction
			remove_county_modifier = plundered_thorins_tomb_arkenstone_modifier
			remove_county_modifier = plundered_thorins_tomb_orcrist_modifier
			remove_county_modifier = thorins_tomb_modifier
			every_county_province = { barony = { generate_coa = yes } }
		}

		scope:councillor = {
			start_default_task = yes
		}
	}

	monthly_on_action = task_ravage_the_land_side_effects

	ai_will_do = {
		value = 0
		if = {
			limit = { scope:councillor_liege = { restricted_culture = yes } }
			multiply = 0
		}
		if = { # If your big boss is neither an orc nor an evil immortal, dont do this
			limit = {
				scope:councillor_liege.top_liege = {
					NOR = {
						is_orc = yes
						AND = {
							cannot_be_killed = yes
							faith_is_good = no
						}
					}
				}
			}
			multiply = 0
		}
		if = {
			limit = {
				scope:councillor = {
					is_performing_council_task = task_ravage_the_land
				}
			}
			add = 10000 # Always keep going if this is already chosen
		}
		else_if = { # Juke note: tweak this if orcs get too trigger happy. Also, didnt inclue sauron/nazgul/saruman for now
			limit = {
				scope:councillor_liege = {
					is_orc = yes
					any_realm_county = {
						culture = {
							is_orc_culture = no
						}
					}
				}
			}
			add = 200
		}

		# Motivate the AI with an escalation agenda to take this task
		if = {
			limit = {
				has_character_flag = agenda_towards_escalation
			}
			add = 500
		}
		else_if = {
			limit = {
				has_character_flag = agenda_towards_deescalation
			}
			add = -250
		}
		if = {
			# Don't do this too often
			limit = {
				scope:councillor_liege = {
					has_character_flag = no_ai_culture_convert
					NOT = { # ignore it if in Hostility with escalation
						has_character_flag = agenda_towards_escalation
					}
				}
			}
			multiply = 0
		}
		if = {
			# Interrupt this task if you're bankrupt
			limit = {
				scope:councillor_liege = {
					gold < -50
				}
			}
			multiply = 0
		}
	}
}

task_orc_3_martial_1 = { # March of Iron
	position = councillor_orc_3

	task_type = task_type_general
	task_progress = task_progress_infinite

	asset = {
		icon = "gfx/interface/icons/council_task_types/task_organize_levies.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}

	council_owner_modifier = {
		name = task_boost_knights_modifier

		knight_effectiveness_mult = 1
		scale = {
			value = marshal_knights_overtime_boost_scale
			divide = 100
		}
	}
	
	council_owner_modifier = {
		name = task_boost_maa_modifier

		skirmishers_damage_mult = 1
		skirmishers_toughness_mult = 1
		pikemen_damage_mult = 1
		pikemen_toughness_mult = 1
		heavy_infantry_damage_mult = 1
		heavy_infantry_toughness_mult = 1

		archers_damage_mult = 1
		archers_toughness_mult = 1

		light_cavalry_damage_mult = 1
		light_cavalry_toughness_mult = 1
		heavy_cavalry_damage_mult = 1
		heavy_cavalry_toughness_mult = 1

		archer_cavalry_damage_mult = 1
		archer_cavalry_toughness_mult = 1
		camel_cavalry_damage_mult = 1
		camel_cavalry_toughness_mult = 1
		elephant_cavalry_damage_mult = 1
		elephant_cavalry_toughness_mult = 1

		siege_weapon_damage_mult = 1
		siege_weapon_toughness_mult = 1
		
		scale = {
			value = marshal_maa_overtime_boost_scale
			divide = 100
		}
	}
	
	on_start_task = {
		set_variable = { 
			name = marshal_maa_overtime_boost
			value = 0 
		}
		if = {
			limit = {
				any_task_contract = {
					has_task_contract_type = laamp_help_train_commanders_contract
					NOT = {	task_contract_target = scope:councillor_liege }
				}
				any_player = {
					is_landless_adventurer = yes
					is_within_diplo_range = { CHARACTER = scope:councillor }
					any_character_task_contract = {
						has_task_contract_type = laamp_help_train_commanders_contract
						count <= council_task_contracts_limit_value
					}
					can_create_task_contract = {
						type_name = laamp_help_train_commanders_contract
						employer = scope:councillor
					}
					save_temporary_scope_as = player_laamp
				}
			}
			scope:player_laamp = {
				create_task_contract = {
					task_contract_type = laamp_help_train_commanders_contract
					task_contract_tier = scope:councillor.task_contract_tier_value
					location = scope:councillor.councillor_task_target
					task_contract_employer = scope:councillor
					target = scope:councillor_liege
				}
			}
		}
	}

	on_cancel_task = {
		remove_variable = marshal_maa_overtime_boost
	}

	monthly_on_action = train_commanders_monthly_on_action

	on_monthly = {
		if = {
			limit = {
				has_variable = marshal_maa_overtime_boost
				martial > var:marshal_maa_overtime_boost 
			}
			change_variable = {
				name = marshal_maa_overtime_boost
				add = 1
			}
		}
	}


    effect_desc = {
		### Commander Improvement
		desc = task_train_commanders_maa_boost_effect_desc

		desc = task_train_commanders_effect_desc
		triggered_desc = {
			trigger = {
				councillor_liege_has_erudition_legacy_5_perk = yes
			}
			desc = task_train_commanders_commander_erudition_bonus_desc
		}
		triggered_desc = {
			trigger = {
				councillor_liege_has_family_business_bonus = yes
			}
			desc = task_train_commanders_commander_family_business_bonus_desc
		}
		triggered_desc = {
			trigger = {
				councillor_liege_has_consulted_house_bonus = yes
			}
			desc = task_train_commanders_commander_consulted_house_bonus_desc
		}
		triggered_desc = {
			trigger = {
				scope:councillor_liege = { has_character_modifier = employer_booner_master_of_horse_2_modifier }
			}
			desc = task_train_commanders_master_of_horse_2_bonus_desc
		}
		triggered_desc = {
			trigger = {
				scope:councillor_liege = { has_character_modifier = employer_booner_master_of_horse_3_modifier }
			}
			desc = task_train_commanders_master_of_horse_3_bonus_desc
		}

		desc = {
			desc = council_task_possible_side_effects
			triggered_desc = {
				trigger = {
					scope:councillor_liege = {
						any_active_accolade = {
							OR = {
								has_accolade_parameter = accolade_train_commanders_bonus
								has_accolade_parameter = accolade_train_commanders_bonus_high
							}
						}
					}
				}
				desc = task_train_commanders_acclaimed_knight_drills_hastiludes
			}
			triggered_desc = {
				trigger = {
					martial > mediocre_skill_rating
				}
				desc = task_train_commanders_commander_learns_from_commander
			}
			triggered_desc = {
				trigger = {
					martial > mediocre_skill_rating
				}
				desc = task_train_commanders_knight_improved
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_train_commanders_commander_wounded
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_train_commanders_commander_maimed
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_train_commanders_commander_killed
			}
		}
	}
 
	ai_will_do = {
		value = 0

		#AI does it when they have enough gold
		if = {
			limit = {
				scope:councillor_liege = {
					gold > ai_war_chest_desired_gold_value
					number_of_maa_regiments >= 1
				}
			}
			add = martial
		}

		#AI keeps doing it once it started except if it will go in debt during a war
		if = {
			limit = {
				is_performing_council_task = task_train_commanders
			}
			add = martial
		}
		
		# AI directive
		if = {
			limit = {
				scope:councillor_liege = {
					has_character_flag = vassal_directive_train_commanders
					vassal_is_valid_and_follows_directive_trigger = { VASSAL = this LIEGE = liege }
				}
			}
			add = 10000
		}
	}
}

task_orc_3_martial_2 = { # Iron Grip
	position = councillor_orc_3

	task_type = task_type_county
	county_target = realm
	ai_county_target = domain
	task_progress = task_progress_value
	task_current_value = scope:councillor_liege.marshal_increase_control_current_progress
	task_max_value = 100 # Highest possible county control
	highlight_own_realm = yes
	restart_on_finish = yes # If it "finishes" by removing a corruption modifier, there'll still be control to regain

	asset = {
		icon = "gfx/interface/icons/council_task_types/task_increase_control.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}

	effect_desc = {
		desc = task_increase_control_effect_desc
		desc = {
			desc = council_task_possible_side_effects
			triggered_desc = {
				trigger = {
					scope:councillor_liege = {
						any_active_accolade = {
							has_accolade_parameter = accolade_increase_control_bonus
						}
					}
				}
				desc = task_increase_control_acclaimed_knight_subdues_peasantry
			}
			triggered_desc = {
				trigger = {
					martial > mediocre_skill_rating
				}
				desc = task_increase_control_increase_opinion
			}
			triggered_desc = {
				trigger = {
					martial > mediocre_skill_rating
				}
				desc = task_increase_control_baron_opinion_increase
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_increase_control_lose_opinion
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_increase_control_lose_control
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_increase_control_baron_opinion_loss
			}
		}
	}
	
	# TOTAL PROGRESS MUST MATCH THE TOTAL OF THE COUNTY MODIFIERS BELOW
		# Add all new progress values to the script value marshal_increase_control_total
		# Note that for Increase Control, the County Modifiers apply the actual values, while progress is for player info only
	progress = {
		value = 0
		add = {
			value = marshal_increase_control_base
			desc = INCREASE_CONTROL_BASE
		}
		add = {
			value = scope:councillor.marshal_increase_county_control_monthly_change
			desc = SCALED_COUNCILLOR_MARTIAL_VALUE
		}
		# Relation Bonuses/Penalties
		if = { # Friend
			limit = {
				scope:councillor_liege = {
					has_relation_friend = scope:councillor
					NOT = { has_relation_best_friend = scope:councillor }
				}
			}
			add = {
				value = scope:councillor.marshal_increase_control_monthly_increase_friend_bonus
				desc = COUNCILLOR_IS_YOUR_FRIEND
			}
		}
		if = { # Best Friend
			limit = {
				scope:councillor_liege = {
					has_relation_best_friend = scope:councillor
				}
			}
			add = {
				value = scope:councillor.marshal_increase_control_monthly_increase_best_friend_bonus
				desc = COUNCILLOR_IS_YOUR_BEST_FRIEND
			}
		}
		if = { # Rival
			limit = {
				scope:councillor_liege = {
					has_relation_rival = scope:councillor
					NOT = { has_relation_nemesis = scope:councillor }
				}
			}
			add = {
				value = scope:councillor.marshal_increase_control_monthly_increase_rival_bonus
				desc = COUNCILLOR_IS_YOUR_RIVAL
			}
		}
		if = { # Nemesis
			limit = {
				scope:councillor_liege = {
					has_relation_nemesis = scope:councillor
				}
			}
			add = {
				value = scope:councillor.marshal_increase_control_monthly_increase_nemesis_bonus
				desc = COUNCILLOR_IS_YOUR_NEMESIS
			}
		}
		if = {
			limit = {
				scope:councillor_liege = { has_perk = strict_organization_perk }
			}
			add = {
				value = scope:councillor.marshal_increase_county_control_perk_bonus_monthly_change
				desc = INCREASE_CONTROL_PERK_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_erudition_legacy_5_perk = yes
			}
			add = {
				value = scope:councillor.marshal_increase_county_control_erudition_bonus_monthly_change
				desc = ERUDITION_DYNASTY_PERK_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_family_business_bonus = yes
			}
			add = {
				value = scope:councillor.marshal_increase_county_control_family_business_bonus_monthly_change
				desc = FAMILY_BUSINESS_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_consulted_house_bonus = yes
			}
			add = {
				value = scope:councillor.marshal_increase_county_control_consulted_house_bonus_monthly_change
				desc = CONSULTED_HOUSE_BONUS_VALUE
			}
		}
		if = {
			limit = {
				scope:councillor = { has_character_modifier = event_bonus_to_county_control }
			}
			add = {
				value = scope:councillor.marshal_increase_county_control_experience_bonus_monthly_change
				desc = INCREASE_COUNTY_CONTROL_EXPERIENCE_BONUS_VALUE
			}
		}
		if = {
			limit = { exists = scope:county }
			multiply = {
				value = scope:county.monthly_county_control_growth_factor
				desc = MARSHAL_COUNTY_SPEED_MODIFIERS
			}
		}
		if = {
			limit = {
				exists = scope:county
				scope:county = { has_county_modifier = petition_liege_county_control_modifier }
			}
			add = {
				value = scope:councillor.petition_liege_county_control_modifier_value
				desc = MARSHAL_INCREASE_CONTROL_LOCAL_COUNTY_MODIFIERS
			}
		}
		#EP3
		if = {
			limit = {
				scope:councillor_liege = {
					employs_court_position = court_jester_court_position
					court_position:court_jester_court_position = {
						has_character_flag = famous_mime_control
					}
				}
			}
			add = {
				value = scope:councillor_liege.court_position:court_jester_court_position.marshal_court_jester_contribution_value
				desc = MARSHAL_INCREASE_CONTROL_MIME_MODIFIER
			}
		}
	}

	full_progress = marshal_increase_control_full_progress
	custom_other_loc = MARSHAL_COUNTY_SPEED_OTHER

	potential_county = {
		scope:county = {
			custom_description = {
				text = potential_county_control_task_trigger
				OR = {
					has_county_corruption_trigger = yes
					county_control < full_county_control
				}
			}
			# If the growth factor is 0, no amount of trying to control helps
			# (happens when the county is under siege/occupied most likely)
			monthly_county_control_growth_factor > 0
		}
	}

	county_modifier = {
		name = marshal_increase_control_modifier
		monthly_county_control_growth_add = 1
		scale = marshal_increase_control_total
	}

	on_start_task_county = {
		#spawn a task contract
		if = {
			limit = {
				scope:councillor_liege = {
					is_independent_ruler = yes					
				}
				any_player = {
					is_landless_adventurer = yes
					is_within_diplo_range = { CHARACTER = scope:councillor }
					any_character_task_contract = {
						has_task_contract_type = laamp_help_increase_control_contract
						count <= council_task_contracts_limit_value
					}
					can_create_task_contract = {
						type_name = laamp_help_increase_control_contract
						employer = scope:councillor
					}
					save_temporary_scope_as = player_laamp
				}
			}
			scope:player_laamp = {
				create_task_contract = {
					task_contract_type = laamp_help_increase_control_contract
					task_contract_tier = scope:councillor.task_contract_tier_value
					location = scope:county.title_province
					task_contract_employer = scope:councillor
					target = scope:councillor.liege
					destination = scope:county.title_province
					save_scope_as = task_contract					
				}
			}
		}
	}
	on_finish_task_county = {
		if = {
			limit = {
				scope:county = {
					has_county_corruption_trigger = yes
				}
			}
			scope:county = {
				marshal_remove_random_county_corruption_modifier_effect = yes
				change_county_control = -25
			}
		}
	}

	monthly_on_action = increase_control_monthly_on_action

	on_monthly_county = {
		random = {
			chance = scope:councillor.marshal_remove_county_corruption_chance
			scope:county = {
				marshal_remove_random_county_corruption_modifier_effect = yes
			}
		}
	}

	ai_will_do = {
		value = 1000 # Highest prio
		if = { # Keep doing Organize levies if you're at war
			limit = {
				scope:councillor_liege = {
					is_at_war = no
				}
			}
			add = 19000
		}
		if = { # Keep doing Organize levies if you're at war
			limit = {
				is_performing_council_task = task_organize_levies
				scope:councillor_liege = {
					is_at_war = yes
				}
			}
			add = -1000
		}
		if = { # Stop doing this if Organize levies could help you lose less gold during a war
			limit = {
				NOT = {
					is_performing_council_task = task_organize_levies
				}
				scope:councillor_liege = {
					is_at_war = yes
					monthly_character_income < monthly_character_expenses
				}
			}
			add = -1000
		}
	}
}

task_orc_3_martial_3 = { # Hunt for Plunder
	position = councillor_orc_3

	task_type = task_type_general
	task_progress = task_progress_infinite

	asset = {
		icon = "gfx/interface/icons/council_task_types/task_train_commanders.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}

	council_owner_modifier = {
		name = task_kurultai_raider_modifier
		hostile_county_attrition_raiding = -0.01
		max_loot_mult = 0.01
		scale = hunt_for_plunder_loot_final_value
	}

	council_owner_modifier = {
		name = task_kurultai_raider_modifier
		raid_speed = 0.01
		movement_speed_land_raiding = 0.01
		scale = hunt_for_plunder_raid_final_value
	}

	effect_desc = {
		desc = task_orc_1_martial_3_effect_desc #Martial skill tooltip
		desc = task_orc_1_martial_3_raid_speed_desc
		desc = task_orc_1_martial_3_attrition_desc
		desc = task_orc_1_martial_3_raiding_desc
	}

	monthly_on_action = task_orc_default_1_effects

	ai_will_do = {
		value = 500
		if = {
			limit = {
				scope:councillor = { highest_skill = martial }
			}
			add = 500
		}
	}
}

### ------------------------------------------ ###

task_orc_default_4 = { # Warchief’s Tithe
	default_task = yes
	position = councillor_orc_4

	task_type = task_type_general
	task_progress = task_progress_infinite

	asset = {
		icon = "gfx/interface/icons/council_task_types/task_collect_taxes.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}

	council_owner_modifier = {
		name = task_collect_taxes_modifier
		domain_tax_mult = 1
		scale = steward_collect_taxes_total_scale
	}

	effect_desc = {
		desc = task_collect_taxes_effect_desc
		triggered_desc = {
			trigger = { liege = { has_perk = tax_man_perk } }
			desc = task_collect_taxes_tax_man_bonus_desc
		}
		triggered_desc = {
			trigger = {
				councillor_liege_has_erudition_legacy_5_perk = yes
			}
			desc = task_collect_taxes_erudition_bonus_desc
		}
		triggered_desc = {
			trigger = {
				councillor_liege_has_family_business_bonus = yes
			}
			desc = task_collect_taxes_family_business_bonus_desc
		}
		triggered_desc = {
			trigger = {
				councillor_liege_has_consulted_house_bonus = yes
			}
			desc = task_collect_taxes_consulted_house_bonus_desc
		}
		desc = {
			desc = council_task_possible_side_effects
			triggered_desc = {
				trigger = {
					stewardship > mediocre_skill_rating
				}
				desc = task_collect_taxes_extra_taxes
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					liege = {
						any_sub_realm_county = {
							steward_task_county_corruption_county_trigger = yes
						}
					}	
				}
				desc = task_collect_taxes_county_corruption
			}
		}
	}

	monthly_on_action = task_orc_default_1_effects

	ai_will_do = {
		value = 1 # Always a good backup
		
		if = { # Very greedy rulers prefer this over increasing Acceptance, in most cases
			limit = {
				scope:councillor_liege.ai_greed > 0
			}
			add = {
				value = scope:councillor_liege.ai_greed
				divide = 5
			}
		}
		
		if = {
			# Wealth Focused characters like this
			limit = {
				scope:councillor_liege = {
					has_focus = stewardship_wealth_focus
				}
			}
			add = 15
		}
		
		if = {
			# And those with the Tax Man perk
			limit = {
				scope:councillor_liege = {
					has_perk = tax_man_perk
				}
			}
			add = 15
		}
		if = {
			limit = {
				scope:councillor_liege.primary_title.tier >= tier_duchy
				scope:councillor_liege.gold < 100
			}
			add = 500
		}
		else_if = {
			limit = {
				scope:councillor_liege.gold < 10
			}
			add = 500
		}
		if = { # Conquerors want more money
			limit = {
				scope:councillor_liege = {
					ai_has_conqueror_personality = yes
				}
			}
			add = 500
		}
	}
}

task_orc_4_develop_county = { #Develop county
	position = councillor_orc_4

	task_type = task_type_county
	county_target = realm
	ai_county_target = domain
	task_progress = task_progress_value
	task_current_value = scope:councillor_liege.steward_develop_county_current_progress
	task_max_value = 100
	highlight_own_realm = yes

	asset = {
		icon = "gfx/interface/icons/council_task_types/task_develop_county.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}

	effect_desc = {
		desc = task_develop_county_complete_effect_desc
		desc = task_develop_county_effect_desc
		desc = {
			desc = council_task_possible_side_effects
			triggered_desc = {
				trigger = {
					stewardship > mediocre_skill_rating
					trigger_if = {
						limit = {
							exists = scope:county
						}
						scope:county = {
							NOT = { has_county_modifier = steward_task_efficient_taxation_modifier }
						}
					}
				}
				desc = task_develop_county_efficient_taxation
			}
			triggered_desc = {
				trigger = {
					stewardship > mediocre_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							county_control < full_county_control
						}
					}
				}
				desc = task_develop_county_increased_control
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							NOT = { has_county_modifier = steward_settler_resistance_modifier }
						}
					}
				}
				desc = task_develop_county_increased_control
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							NOT = { has_county_modifier = steward_construction_slowdown_modifier }
						}
					}
				}
				desc = task_develop_county_slow_construction
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							NOT = { has_county_modifier = steward_population_mismanaged_modifier }
						}
					}
				}
				desc = task_develop_county_loss_of_opinion
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							county_control > low_county_control
						}
					}
				}
				desc = task_develop_county_loss_of_control
			}
		}
	}

	# TOTAL PROGRESS MUST MATCH THE TOTAL OF THE COUNTY MODIFIERS BELOW
		# Add all new progress values to the script value steward_develop_county_total
		# Note that for Develop County, the County Modifiers apply the actual values, while progress is for player info only
	progress = {
		value = 0
		add = {
			value = steward_develop_county_base
			desc = STEWARD_PROGRESS_BASE
		}
		add = {
			value = scope:councillor.steward_develop_county_monthly_increase
			desc = SCALED_COUNCILLOR_STEWARDSHIP_VALUE
		}
		if = {
			limit = {
				scope:councillor_liege = { has_perk = planned_cultivation_perk }
			}
			add = {
				value = scope:councillor.steward_develop_county_perk_bonus_monthly_increase
				desc = DEVELOP_COUNTY_PERK_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_erudition_legacy_5_perk = yes
			}
			add = {
				value = scope:councillor.steward_develop_county_erudition_bonus_monthly_increase
				desc = ERUDITION_DYNASTY_PERK_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_family_business_bonus = yes
			}
			add = {
				value = scope:councillor.steward_develop_county_family_business_monthly_increase
				desc = FAMILY_BUSINESS_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_consulted_house_bonus = yes
			}
			add = {
				value = scope:councillor.steward_develop_county_consulted_house_monthly_increase
				desc = CONSULTED_HOUSE_BONUS_VALUE
			}
		}

		# Relation Bonuses/Penalties
		if = { # Friend
			limit = {
				scope:councillor_liege = {
					has_relation_friend = scope:councillor
					NOT = { has_relation_best_friend = scope:councillor }
				}
			}
			add = {
				value = scope:councillor.steward_develop_county_monthly_increase_friend_bonus
				desc = COUNCILLOR_IS_YOUR_FRIEND
			}
		}
		if = { # Best Friend
			limit = {
				scope:councillor_liege = {
					has_relation_best_friend = scope:councillor
				}
			}
			add = {
				value = scope:councillor.steward_develop_county_monthly_increase_best_friend_bonus
				desc = COUNCILLOR_IS_YOUR_BEST_FRIEND
			}
		}
		if = { # Rival
			limit = {
				scope:councillor_liege = {
					has_relation_rival = scope:councillor
					NOT = { has_relation_nemesis = scope:councillor }
				}
			}
			add = {
				value = scope:councillor.steward_develop_county_monthly_increase_rival_bonus
				desc = COUNCILLOR_IS_YOUR_RIVAL
			}
		}
		if = { # Nemesis
			limit = {
				scope:councillor_liege = {
					has_relation_nemesis = scope:councillor
				}
			}
			add = {
				value = scope:councillor.steward_develop_county_monthly_increase_nemesis_bonus
				desc = COUNCILLOR_IS_YOUR_NEMESIS
			}
		}
		if = { #Tribal penalty
			limit = {
				scope:councillor_liege = {
					should_apply_tribal_development_penalty_trigger = yes	
				}
			}
			add = {
				value = scope:councillor.steward_develop_county_tribal_penalty
				desc = DEVELOP_COUNTY_TRIBAL_PENALTY_VALUE
			}
		}	
		if = { # Development reduces the speed.
			limit = {
				exists = scope:county
				scope:county = {
					development_level > 0
				}
			}
			add = {
				value = scope:county.current_development_penalty
				desc = STEWARD_CURRENT_DEVELOPMENT_PENALTY
			}
		}
		
		if = {
			limit = { exists = scope:county }
			multiply = {
				value = scope:county.development_rate_modifier
				desc = STEWARD_COUNTY_SPEED_MODIFIERS
			}
		}

        # Royal Architect
        if = {
            limit = {
                scope:councillor_liege = { has_character_modifier = employer_booner_royal_architect_2_modifier }
                OR = {
                    target_is_vassal_or_below = scope:target_character
                    this = scope:target_character
                }
            }
            multiply = {
                value = 1.1
                desc = employer_booner_royal_architect_2_modifier
            }
        }
        else_if = {
            limit = {
                scope:councillor_liege = { has_character_modifier = employer_booner_royal_architect_3_modifier }
                OR = {
                    target_is_vassal_or_below = scope:target_character
                    this = scope:target_character
                }
            }
            multiply = {
                value = 1.1
                desc = employer_booner_royal_architect_3_modifier
            }
        }
	}
	full_progress = steward_develop_county_full_progress
	custom_other_loc = STEWARD_COUNTY_SPEED_OTHER

	potential_county = {
		OR = {
			scope:county = {
				development_level < max_development_level
				title_province = { has_holding_type = settlement_holding }
				trigger_if = {
					limit = {
						scope:councillor_liege = {
							is_ai = yes
							exists = capital_county
						}
					}
					OR = {
						this = scope:councillor_liege.capital_county
						AND = {
							holder = scope:councillor_liege
							title_province = {
								OR = {
									terrain = oasis
									terrain = farmlands
									terrain = floodplains
								}
							}
						}
					}
					OR = {
						scope:councillor_liege = {
							has_character_flag = vassal_directive_improve_development
							vassal_is_valid_and_follows_directive_trigger = { VASSAL = this LIEGE = liege }
						}
						culture = scope:councillor_liege.culture
						culture = {
							cultural_acceptance = { target = scope:councillor_liege.culture value >= 50 }
						}
						scope:councillor_liege = {
							primary_title.tier < tier_duchy
						}
						AND = {
							scope:councillor_liege = {
								has_character_flag = agenda_towards_deescalation
							}
							NOT = {
								culture = scope:councillor_liege.culture
							}
						}
					}
				}
			}
			scope:county = {
				development_level < max_development_level
				trigger_if = {
					limit = {
						scope:councillor_liege = {
							is_ai = yes
							exists = capital_county
						}
					}
					OR = {
						this = scope:councillor_liege.capital_county
						AND = {
							holder = scope:councillor_liege
							title_province = {
								OR = {
									terrain = oasis
									terrain = farmlands
									terrain = floodplains
								}
							}
						}
					}
					OR = {
						culture = scope:councillor_liege.culture
						culture = {
							cultural_acceptance = { target = scope:councillor_liege.culture value >= 50 }
						}
						scope:councillor_liege = {
							primary_title.tier < tier_duchy
						}
						AND = {
							scope:councillor_liege = {
								has_character_flag = agenda_towards_deescalation
							}
							NOT = {
								culture = scope:councillor_liege.culture
							}
						}
					}
				}
			}
		}
	}

	county_modifier = {
		name = steward_develop_county_modifier
		development_growth = 100
		holding_build_speed = -7
		#holding_build_gold_cost = -1
		build_speed = -7
		#build_gold_cost = -1
		scale = { value = steward_develop_county_total divide = 100 }
	}

	county_modifier = {
		name = steward_develop_county_current_development_modifier
		development_growth = 100
		scale = { value = scope:councillor.current_development_penalty divide = 100 }
	}

	county_modifier = {
		name = steward_develop_county_tribal_penalty_modifier
		development_growth = 100
		scale = {
			value = 0
			if = {
				limit = {
					scope:councillor_liege = {
						should_apply_tribal_development_penalty_trigger = yes
					}
				}
				value = scope:councillor.steward_develop_county_tribal_penalty
				divide = 100
			}
		}
	}

	on_start_task_county = {
		# save current development_level for catalyst purpose
		if = {
			limit = { exists = scope:county }
			scope:county = {
				set_variable = {
					name = current_development_level
					value = development_level
				}
			}
		}
	}

	on_finish_task_county = {
		if = {
			limit = {
				OR = {
					AND = {
						exists = scope:county
						scope:county = {
							development_level = max_development_level
						}
					}
					scope:councillor_liege = {
						is_ai = yes
					}
				}
			}
			start_default_task = yes
		}
	}

	monthly_on_action = task_develop_county_side_effects

	on_monthly_county = {
		scope:councillor_liege = {
			# Check development level progress
			if = {
				limit = {
					exists = scope:county
					exists = scope:county.var:current_development_level
					scope:county = {
						floored_development_value > floored_current_development_value
					}
				}
				scope:county = {
					set_variable = {
						name = current_development_level
						value = development_level
					}
				}
				
				scope:councillor_liege = {
					if = { # Try to make relevant AI's focus on Acceptance
						limit = {
							exists = primary_title
							primary_title.tier >= tier_kingdom
							any_sub_realm_county = {
								culture = {
									cultural_acceptance = { target = scope:councillor_liege.culture value < 52 }
								}
							}
							NOT = {
								has_focus = stewardship_domain_focus
							}
						}
						add_character_flag = {
							flag = no_ai_increase_development
							years = 15
						}
					}
					else = {
						add_character_flag = {
							flag = no_ai_increase_development
							years = 5
						}
					}
				}
				
				# Struggle Catalyst
				if = {
					limit = {
						exists = scope:county
						# target someone from diff faith or culture
						scope:county = {
							NAND = {
								faith = scope:councillor_liege.faith
								culture = scope:councillor_liege.culture
							}
						}

						any_character_struggle = {
							involvement = involved
							phase_has_catalyst = catalyst_improve_development_vassal_diff_faith_culture
						}
					}
					scope:councillor_liege = {
						every_character_struggle = {
							involvement = involved
							activate_struggle_catalyst = {
								catalyst = catalyst_improve_development_vassal_diff_faith_culture
								character = scope:councillor_liege
							}
						}
					}
					# Struggle Parameter
					if = {
						limit = {
							NOT = { scope:county.culture  = scope:councillor_liege.culture }
							any_character_struggle = {
								involvement = involved
								has_struggle_phase_parameter = gain_acceptance_when_developing_other_culture_county
							}
						}
						scope:county.culture = {
							save_scope_as = current_culture
							change_cultural_acceptance = {
								target = scope:councillor_liege.culture
								value =	miniscule_cultural_acceptance_value
								desc = cultural_acceptance_gain_from_phase_effects
							}
						}
					}

				}
			}
			else_if = { # fallback for previous save: the effect would trigger a month later
				limit = {
					exists = scope:county
				}
				scope:county = {
					set_variable = {
						name = current_development_level
						value = development_level
					}
				}
			}
		}
	}

	ai_will_do = {
		value = 0
		if = {
			limit = {
				any_held_county = {
					title_province = { has_holding_type = settlement_holding }
				}
			}
			add = 1500
		}
		if = {
			limit = {
				scope:councillor = {
					is_performing_council_task = task_develop_county
				}
			}
			add = 10000 # Always keep going if this is already chosen
		}
		if = {
			# Don't do this too often
			limit = {
				scope:councillor_liege = { has_character_flag = no_ai_increase_development }
			}
			multiply = 0
		}
		else_if = {
			limit = {
				scope:councillor_liege.gold >= steward_increase_development_value
			}
			add = 300
		}
		if = {
			limit = {
				scope:councillor_liege.gold < 10
			}
			multiply = 0
		}
		
		# AI directive
		if = {
			limit = {
				scope:councillor_liege = {
					has_character_flag = vassal_directive_improve_development
					vassal_is_valid_and_follows_directive_trigger = { VASSAL = this LIEGE = liege }
				}
			}
			add = 50000
		}
	}
}

task_orc_4_diplomacy_1 = { # Ravage the Land
	position = councillor_orc_4

	task_type = task_type_county
	county_target = realm
	ai_county_target = realm
	task_progress = task_progress_percentage
	restart_on_finish = yes
	highlight_own_realm = yes

	asset = {
		icon = "gfx/interface/icons/army_status/army_status_raiding.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}
	
	effect_desc = {
		desc = {
			triggered_desc = {
				trigger = {
					scope:councillor_liege = { is_orc = yes }
				}
				desc = task_ravage_the_land_effect_desc_1_orc
			}
			desc = task_ravage_the_land_effect_desc_2
			desc = task_ravage_the_land_effect_desc_3
		}

		desc = {
			desc = council_task_possible_side_effects
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county = {
							NOT = { has_county_modifier = steward_armed_peasants_county_modifier }
						}
					}
				}
				desc = task_ravage_the_land_armed_peasants
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county.title_province = {
							NOT = { has_province_modifier = steward_lack_of_tribute_province_modifier }
						}
					}
				}
				desc = task_ravage_the_land_lack_of_tribute
			}
			triggered_desc = {
				trigger = {
					stewardship < high_skill_rating
					trigger_if = {
						limit = { exists = scope:county }
						scope:county.title_province = {
							NOT = { has_province_modifier = steward_levy_desertion_province_modifier }
						}
					}
				}
				desc = task_ravage_the_land_levy_desertion
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_ravage_the_land_wounded_steward
			}
		}
	}

	progress = {
		value = 0
		add = {
			value = steward_ravage_the_land_base
			desc = STEWARD_PROGRESS_BASE
		}
		add = {
			value = scope:councillor.steward_ravage_the_land_monthly_increase_stewardship
			desc = SCALED_COUNCILLOR_STEWARDSHIP_VALUE
		}
		add = {
			value = scope:councillor.steward_ravage_the_land_monthly_increase_martial
			desc = SCALED_COUNCILLOR_MARTIAL_VALUE
		}

		add = steward_ravage_the_land_contextual_bonuses
		
		if = { # Development reduces the speed. Should be the last non-multiply modifier applied to avoid negative values
			limit = {
				exists = scope:county
				scope:county = {
					development_level > 0
				}
			}
			add = {
				value = scope:county.ravage_the_land_development_penalty
				multiply = 0.5 # Half the normal impact from development... we're slashing and burning here!
				desc = STEWARD_RAVAGE_THE_LAND_DEVELOPMENT_PENALTY
			}
		}
		
		# Conversion speed game rules
		if = {
			limit = {
				has_game_rule = slower_culture_conversion_speed
			}
			multiply = {
				value = slower_game_rule_value
				desc = GAME_RULE_SLOWER_REASON
			}
		}
		if = {
			limit = {
				has_game_rule = significantly_slower_culture_conversion_speed
			}
			multiply = {
				value = significantly_slower_game_rule_value
				desc = GAME_RULE_SIGNIFICANTLY_SLOWER_REASON
			}
		}
		if = {
			limit = {
				has_game_rule = significantly_faster_culture_conversion_speed
			}
			multiply = {
				value = significantly_faster_game_rule_value
				desc = GAME_RULE_SIGNIFICANTLY_FASTER_REASON
			}
		}
		if = {
			limit = {
				has_game_rule = faster_culture_conversion_speed
			}
			multiply = {
				value = faster_game_rule_value
				desc = GAME_RULE_FASTER_REASON
			}
		}
	}

	potential_county = {
		scope:county = {
			custom_tooltip = {
				text = county_is_already_orcish
				is_orc = no
			}	
			custom_tooltip = {
				text = county_holder_is_not_orcish
				holder = { 
					OR = {
						is_orc = yes
						is_maiar_fallen = yes
						is_nazgul = yes
						is_evil_istari = yes
					}
				}
			}
			custom_tooltip = {
				text = county_culture_matches_a_liege_or_above
				NOT = {
					scope:councillor_liege = {
						any_liege_or_above = {
							culture = scope:county.culture
						}
					}
				}
			}
		}
		trigger_if = {
			limit = {
				scope:councillor_liege = { is_ai = yes }
			}
			NOT = { scope:councillor_liege = { restricted_culture = yes } }
			OR = {
				NOT = {
					scope:county.culture = {
						cultural_acceptance = { target = scope:councillor_liege.culture value >= 50 }
					}
				}
				scope:councillor_liege.culture = { # All AI's are motivated to spread new Hybrid/Divergent cultures
					OR = {
						is_hybrid_culture = yes
						is_divergent_culture = yes
					}
					any_parent_culture = {
						this = scope:county.culture
					}
				}
			}
			OR = {
				is_independent_ruler = yes
				scope:councillor_liege.primary_title.tier > tier_county
				scope:councillor_liege.culture = { # All AI's are motivated to spread new Hybrid/Divergent cultures
					OR = {
						is_hybrid_culture = yes
						is_divergent_culture = yes
					}
					any_parent_culture = {
						this = scope:county.culture
					}
				}
			}
			OR = {
				scope:county = {
					any_neighboring_county = {
						culture = scope:councillor_liege.culture # The AI only wants to convert counties bordering their own culture
					}
				}
				
				AND = {
					NOT = {
						scope:county = {
							any_neighboring_county = {
								culture = scope:councillor_liege.culture # The AI only wants to convert counties bordering their own culture
							}
						}
					}
				}
			}
		}
		trigger_if = { #LotR - AI should not seek to convert the Nurnoth
			limit = {
				scope:councillor_liege = {
					is_ai = yes
				}
			}
			NOT = { faith = faith:faith_nurn_slave }
		}
	}

	on_start_task_county = {
	}

	on_cancel_task_county = {
	}

	on_finish_task_county = {
		scope:county = {
			if = {
				limit = {
					NOT = {
						scope:councillor_liege.culture = {
							is_hybrid_culture = yes
							any_parent_culture = {
								this = scope:county.culture
							}
						}
					}
				}
				culture = {
					change_cultural_acceptance = {
						target = scope:councillor_liege.culture
						value = culture_conversion_acceptance_impact
						desc = cultural_acceptance_loss_promote_culture
					}
				}
			}
			if = {
				limit = {
					scope:councillor_liege = {
						is_orc = yes
					}
				}
				set_county_culture = scope:councillor_liege.culture
			}
			else_if = {
				limit = {
					scope:councillor_liege = {
						is_evil_istari = yes
					}
					scope:county = { is_orc = no }
				}
				set_county_culture = culture:isengard_urukhai
			}
			else_if = {
				limit = {
					scope:councillor_liege = {
						AND = {
							OR = {
								is_maiar_fallen = yes
								is_nazgul = yes
							}
							capital_county = title:c_amon_lanc
						}
					}
					scope:county = { is_orc = no }
				}
				set_county_culture = culture:kazgumhoth
			}
			else_if = {
				limit = {
					scope:councillor_liege = {
						is_maiar_fallen = yes
					}
					scope:county = { is_orc = no }
				}
				set_county_culture = culture:morlughai
			}
			else_if = {
				limit = {
					scope:councillor_liege = {
						is_nazgul = yes
					}
					scope:county = { is_orc = no }
				}
				set_county_culture = culture:ungurhai
			}
			set_county_faith = scope:councillor_liege.faith
			change_development_level = this.half_county_development_reduction
			remove_county_modifier = plundered_thorins_tomb_arkenstone_modifier
			remove_county_modifier = plundered_thorins_tomb_orcrist_modifier
			remove_county_modifier = thorins_tomb_modifier
			every_county_province = { barony = { generate_coa = yes } }
		}

		scope:councillor = {
			start_default_task = yes
		}
	}

	monthly_on_action = task_ravage_the_land_side_effects

	ai_will_do = {
		value = 0
		if = {
			limit = { scope:councillor_liege = { restricted_culture = yes } }
			multiply = 0
		}
		if = { # If your big boss is neither an orc nor an evil immortal, dont do this
			limit = {
				scope:councillor_liege.top_liege = {
					NOR = {
						is_orc = yes
						AND = {
							cannot_be_killed = yes
							faith_is_good = no
						}
					}
				}
			}
			multiply = 0
		}
		if = {
			limit = {
				scope:councillor = {
					is_performing_council_task = task_ravage_the_land
				}
			}
			add = 10000 # Always keep going if this is already chosen
		}
		else_if = { # Juke note: tweak this if orcs get too trigger happy. Also, didnt inclue sauron/nazgul/saruman for now
			limit = {
				scope:councillor_liege = {
					is_orc = yes
					any_realm_county = {
						culture = {
							is_orc_culture = no
						}
					}
				}
			}
			add = 200
		}

		# Motivate the AI with an escalation agenda to take this task
		if = {
			limit = {
				has_character_flag = agenda_towards_escalation
			}
			add = 500
		}
		else_if = {
			limit = {
				has_character_flag = agenda_towards_deescalation
			}
			add = -250
		}
		if = {
			# Don't do this too often
			limit = {
				scope:councillor_liege = {
					has_character_flag = no_ai_culture_convert
					NOT = { # ignore it if in Hostility with escalation
						has_character_flag = agenda_towards_escalation
					}
				}
			}
			multiply = 0
		}
		if = {
			# Interrupt this task if you're bankrupt
			limit = {
				scope:councillor_liege = {
					gold < -50
				}
			}
			multiply = 0
		}
	}
}

task_orc_4_martial_1 = { # March of Iron
	position = councillor_orc_4

	task_type = task_type_general
	task_progress = task_progress_infinite

	asset = {
		icon = "gfx/interface/icons/council_task_types/task_organize_levies.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}

	council_owner_modifier = {
		name = task_boost_knights_modifier

		knight_effectiveness_mult = 1
		scale = {
			value = marshal_knights_overtime_boost_scale
			divide = 100
		}
	}

	council_owner_modifier = {
		name = task_boost_maa_modifier

		skirmishers_damage_mult = 1
		skirmishers_toughness_mult = 1
		pikemen_damage_mult = 1
		pikemen_toughness_mult = 1
		heavy_infantry_damage_mult = 1
		heavy_infantry_toughness_mult = 1

		archers_damage_mult = 1
		archers_toughness_mult = 1

		light_cavalry_damage_mult = 1
		light_cavalry_toughness_mult = 1
		heavy_cavalry_damage_mult = 1
		heavy_cavalry_toughness_mult = 1

		archer_cavalry_damage_mult = 1
		archer_cavalry_toughness_mult = 1
		camel_cavalry_damage_mult = 1
		camel_cavalry_toughness_mult = 1
		elephant_cavalry_damage_mult = 1
		elephant_cavalry_toughness_mult = 1

		siege_weapon_damage_mult = 1
		siege_weapon_toughness_mult = 1
		
		scale = {
			value = marshal_maa_overtime_boost_scale
			divide = 100
		}
	}
	
	on_start_task = {
		set_variable = { 
			name = marshal_maa_overtime_boost
			value = 0 
		}
		if = {
			limit = {
				any_task_contract = {
					has_task_contract_type = laamp_help_train_commanders_contract
					NOT = {	task_contract_target = scope:councillor_liege }
				}
				any_player = {
					is_landless_adventurer = yes
					is_within_diplo_range = { CHARACTER = scope:councillor }
					any_character_task_contract = {
						has_task_contract_type = laamp_help_train_commanders_contract
						count <= council_task_contracts_limit_value
					}
					can_create_task_contract = {
						type_name = laamp_help_train_commanders_contract
						employer = scope:councillor
					}
					save_temporary_scope_as = player_laamp
				}
			}
			scope:player_laamp = {
				create_task_contract = {
					task_contract_type = laamp_help_train_commanders_contract
					task_contract_tier = scope:councillor.task_contract_tier_value
					location = scope:councillor.councillor_task_target
					task_contract_employer = scope:councillor
					target = scope:councillor_liege
				}
			}
		}
	}

	on_cancel_task = {
		remove_variable = marshal_maa_overtime_boost
	}

	monthly_on_action = train_commanders_monthly_on_action

	on_monthly = {
		if = {
			limit = {
				has_variable = marshal_maa_overtime_boost
				martial > var:marshal_maa_overtime_boost 
			}
			change_variable = {
				name = marshal_maa_overtime_boost
				add = 1
			}
		}
	}
	
    effect_desc = {
		### Commander Improvement
		desc = task_train_commanders_maa_boost_effect_desc

		desc = task_train_commanders_effect_desc
		triggered_desc = {
			trigger = {
				councillor_liege_has_erudition_legacy_5_perk = yes
			}
			desc = task_train_commanders_commander_erudition_bonus_desc
		}
		triggered_desc = {
			trigger = {
				councillor_liege_has_family_business_bonus = yes
			}
			desc = task_train_commanders_commander_family_business_bonus_desc
		}
		triggered_desc = {
			trigger = {
				councillor_liege_has_consulted_house_bonus = yes
			}
			desc = task_train_commanders_commander_consulted_house_bonus_desc
		}
		triggered_desc = {
			trigger = {
				scope:councillor_liege = { has_character_modifier = employer_booner_master_of_horse_2_modifier }
			}
			desc = task_train_commanders_master_of_horse_2_bonus_desc
		}
		triggered_desc = {
			trigger = {
				scope:councillor_liege = { has_character_modifier = employer_booner_master_of_horse_3_modifier }
			}
			desc = task_train_commanders_master_of_horse_3_bonus_desc
		}

		desc = {
			desc = council_task_possible_side_effects
			triggered_desc = {
				trigger = {
					scope:councillor_liege = {
						any_active_accolade = {
							OR = {
								has_accolade_parameter = accolade_train_commanders_bonus
								has_accolade_parameter = accolade_train_commanders_bonus_high
							}
						}
					}
				}
				desc = task_train_commanders_acclaimed_knight_drills_hastiludes
			}
			triggered_desc = {
				trigger = {
					martial > mediocre_skill_rating
				}
				desc = task_train_commanders_commander_learns_from_commander
			}
			triggered_desc = {
				trigger = {
					martial > mediocre_skill_rating
				}
				desc = task_train_commanders_knight_improved
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_train_commanders_commander_wounded
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_train_commanders_commander_maimed
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_train_commanders_commander_killed
			}
		}
	}
 
	ai_will_do = {
		value = 0

		#AI does it when they have enough gold
		if = {
			limit = {
				scope:councillor_liege = {
					gold > ai_war_chest_desired_gold_value
					number_of_maa_regiments >= 1
				}
			}
			add = martial
		}

		#AI keeps doing it once it started except if it will go in debt during a war
		if = {
			limit = {
				is_performing_council_task = task_train_commanders
			}
			add = martial
		}
		
		# AI directive
		if = {
			limit = {
				scope:councillor_liege = {
					has_character_flag = vassal_directive_train_commanders
					vassal_is_valid_and_follows_directive_trigger = { VASSAL = this LIEGE = liege }
				}
			}
			add = 10000
		}
	}
}

task_orc_4_martial_2 = { # Iron Grip
	position = councillor_orc_4

	task_type = task_type_county
	county_target = realm
	ai_county_target = domain
	task_progress = task_progress_value
	task_current_value = scope:councillor_liege.marshal_increase_control_current_progress
	task_max_value = 100 # Highest possible county control
	highlight_own_realm = yes
	restart_on_finish = yes # If it "finishes" by removing a corruption modifier, there'll still be control to regain

	asset = {
		icon = "gfx/interface/icons/council_task_types/task_increase_control.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}

	effect_desc = {
		desc = task_increase_control_effect_desc
		desc = {
			desc = council_task_possible_side_effects
			triggered_desc = {
				trigger = {
					scope:councillor_liege = {
						any_active_accolade = {
							has_accolade_parameter = accolade_increase_control_bonus
						}
					}
				}
				desc = task_increase_control_acclaimed_knight_subdues_peasantry
			}
			triggered_desc = {
				trigger = {
					martial > mediocre_skill_rating
				}
				desc = task_increase_control_increase_opinion
			}
			triggered_desc = {
				trigger = {
					martial > mediocre_skill_rating
				}
				desc = task_increase_control_baron_opinion_increase
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_increase_control_lose_opinion
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_increase_control_lose_control
			}
			triggered_desc = {
				trigger = {
					martial < high_skill_rating
				}
				desc = task_increase_control_baron_opinion_loss
			}
		}
	}
	
	# TOTAL PROGRESS MUST MATCH THE TOTAL OF THE COUNTY MODIFIERS BELOW
		# Add all new progress values to the script value marshal_increase_control_total
		# Note that for Increase Control, the County Modifiers apply the actual values, while progress is for player info only
	progress = {
		value = 0
		add = {
			value = marshal_increase_control_base
			desc = INCREASE_CONTROL_BASE
		}
		add = {
			value = scope:councillor.marshal_increase_county_control_monthly_change
			desc = SCALED_COUNCILLOR_MARTIAL_VALUE
		}
		# Relation Bonuses/Penalties
		if = { # Friend
			limit = {
				scope:councillor_liege = {
					has_relation_friend = scope:councillor
					NOT = { has_relation_best_friend = scope:councillor }
				}
			}
			add = {
				value = scope:councillor.marshal_increase_control_monthly_increase_friend_bonus
				desc = COUNCILLOR_IS_YOUR_FRIEND
			}
		}
		if = { # Best Friend
			limit = {
				scope:councillor_liege = {
					has_relation_best_friend = scope:councillor
				}
			}
			add = {
				value = scope:councillor.marshal_increase_control_monthly_increase_best_friend_bonus
				desc = COUNCILLOR_IS_YOUR_BEST_FRIEND
			}
		}
		if = { # Rival
			limit = {
				scope:councillor_liege = {
					has_relation_rival = scope:councillor
					NOT = { has_relation_nemesis = scope:councillor }
				}
			}
			add = {
				value = scope:councillor.marshal_increase_control_monthly_increase_rival_bonus
				desc = COUNCILLOR_IS_YOUR_RIVAL
			}
		}
		if = { # Nemesis
			limit = {
				scope:councillor_liege = {
					has_relation_nemesis = scope:councillor
				}
			}
			add = {
				value = scope:councillor.marshal_increase_control_monthly_increase_nemesis_bonus
				desc = COUNCILLOR_IS_YOUR_NEMESIS
			}
		}
		if = {
			limit = {
				scope:councillor_liege = { has_perk = strict_organization_perk }
			}
			add = {
				value = scope:councillor.marshal_increase_county_control_perk_bonus_monthly_change
				desc = INCREASE_CONTROL_PERK_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_erudition_legacy_5_perk = yes
			}
			add = {
				value = scope:councillor.marshal_increase_county_control_erudition_bonus_monthly_change
				desc = ERUDITION_DYNASTY_PERK_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_family_business_bonus = yes
			}
			add = {
				value = scope:councillor.marshal_increase_county_control_family_business_bonus_monthly_change
				desc = FAMILY_BUSINESS_BONUS_VALUE
			}
		}
		if = {
			limit = {
				councillor_liege_has_consulted_house_bonus = yes
			}
			add = {
				value = scope:councillor.marshal_increase_county_control_consulted_house_bonus_monthly_change
				desc = CONSULTED_HOUSE_BONUS_VALUE
			}
		}
		if = {
			limit = {
				scope:councillor = { has_character_modifier = event_bonus_to_county_control }
			}
			add = {
				value = scope:councillor.marshal_increase_county_control_experience_bonus_monthly_change
				desc = INCREASE_COUNTY_CONTROL_EXPERIENCE_BONUS_VALUE
			}
		}
		if = {
			limit = { exists = scope:county }
			multiply = {
				value = scope:county.monthly_county_control_growth_factor
				desc = MARSHAL_COUNTY_SPEED_MODIFIERS
			}
		}
		if = {
			limit = {
				exists = scope:county
				scope:county = { has_county_modifier = petition_liege_county_control_modifier }
			}
			add = {
				value = scope:councillor.petition_liege_county_control_modifier_value
				desc = MARSHAL_INCREASE_CONTROL_LOCAL_COUNTY_MODIFIERS
			}
		}
		#EP3
		if = {
			limit = {
				scope:councillor_liege = {
					employs_court_position = court_jester_court_position
					court_position:court_jester_court_position = {
						has_character_flag = famous_mime_control
					}
				}
			}
			add = {
				value = scope:councillor_liege.court_position:court_jester_court_position.marshal_court_jester_contribution_value
				desc = MARSHAL_INCREASE_CONTROL_MIME_MODIFIER
			}
		}
	}

	full_progress = marshal_increase_control_full_progress
	custom_other_loc = MARSHAL_COUNTY_SPEED_OTHER

	potential_county = {
		scope:county = {
			custom_description = {
				text = potential_county_control_task_trigger
				OR = {
					has_county_corruption_trigger = yes
					county_control < full_county_control
				}
			}
			# If the growth factor is 0, no amount of trying to control helps
			# (happens when the county is under siege/occupied most likely)
			monthly_county_control_growth_factor > 0
		}
	}

	county_modifier = {
		name = marshal_increase_control_modifier
		monthly_county_control_growth_add = 1
		scale = marshal_increase_control_total
	}

	on_start_task_county = {
		#spawn a task contract
		if = {
			limit = {
				scope:councillor_liege = {
					is_independent_ruler = yes					
				}
				any_player = {
					is_landless_adventurer = yes
					is_within_diplo_range = { CHARACTER = scope:councillor }
					any_character_task_contract = {
						has_task_contract_type = laamp_help_increase_control_contract
						count <= council_task_contracts_limit_value
					}
					can_create_task_contract = {
						type_name = laamp_help_increase_control_contract
						employer = scope:councillor
					}
					save_temporary_scope_as = player_laamp
				}
			}
			scope:player_laamp = {
				create_task_contract = {
					task_contract_type = laamp_help_increase_control_contract
					task_contract_tier = scope:councillor.task_contract_tier_value
					location = scope:county.title_province
					task_contract_employer = scope:councillor
					target = scope:councillor.liege
					destination = scope:county.title_province
					save_scope_as = task_contract					
				}
			}
		}
	}
	on_finish_task_county = {
		if = {
			limit = {
				scope:county = {
					has_county_corruption_trigger = yes
				}
			}
			scope:county = {
				marshal_remove_random_county_corruption_modifier_effect = yes
				change_county_control = -25
			}
		}
	}

	monthly_on_action = increase_control_monthly_on_action

	on_monthly_county = {
		random = {
			chance = scope:councillor.marshal_remove_county_corruption_chance
			scope:county = {
				marshal_remove_random_county_corruption_modifier_effect = yes
			}
		}
	}

	ai_will_do = {
		value = 1000 # Highest prio
		if = { # Keep doing Organize levies if you're at war
			limit = {
				scope:councillor_liege = {
					is_at_war = no
				}
			}
			add = 19000
		}
		if = { # Keep doing Organize levies if you're at war
			limit = {
				is_performing_council_task = task_organize_levies
				scope:councillor_liege = {
					is_at_war = yes
				}
			}
			add = -1000
		}
		if = { # Stop doing this if Organize levies could help you lose less gold during a war
			limit = {
				NOT = {
					is_performing_council_task = task_organize_levies
				}
				scope:councillor_liege = {
					is_at_war = yes
					monthly_character_income < monthly_character_expenses
				}
			}
			add = -1000
		}
	}
}

task_orc_4_martial_3 = { # Hunt for Plunder
	position = councillor_orc_4

	asset = {
		icon = "gfx/interface/icons/council_task_types/task_train_commanders.dds"
		background = "gfx/interface/buttons/button_round_bg.dds"
		frame = "gfx/interface/buttons/button_round_frame.dds"
		glow = "gfx/particles/halo.dds"
	}

	council_owner_modifier = {
		name = task_kurultai_raider_modifier
		hostile_county_attrition_raiding = -0.01
		max_loot_mult = 0.01
		scale = hunt_for_plunder_loot_final_value
	}

	council_owner_modifier = {
		name = task_kurultai_raider_modifier
		raid_speed = 0.01
		movement_speed_land_raiding = 0.01
		scale = hunt_for_plunder_raid_final_value
	}

	task_type = task_type_general
	task_progress = task_progress_infinite

	effect_desc = {
		desc = task_orc_1_martial_3_effect_desc 
		desc = task_orc_1_martial_3_raid_speed_desc
		desc = task_orc_1_martial_3_attrition_desc
		desc = task_orc_1_martial_3_raiding_desc
	}

	monthly_on_action = task_orc_default_1_effects

	ai_will_do = {
		value = 500
		if = {
			limit = {
				scope:councillor = { highest_skill = martial }
			}
			add = 500
		}
	}
}

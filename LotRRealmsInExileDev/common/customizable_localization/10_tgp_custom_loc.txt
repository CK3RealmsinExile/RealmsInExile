BecomeTributaryInteractionName = {
	type = character
	text = {
		trigger = { primary_title.tier = tier_hegemony }
		localization_key = BECOME_TRIBUTARY_INTERACTION_NAME_HEGEMONY
	}
	text = {
		fallback = yes
		localization_key = BECOME_TRIBUTARY_INTERACTION_NAME_FALLBACK
	}
}

SubjectStanding = {
	type = character
	text = {
		trigger = {
			is_tributary = yes
			suzerain = { government_has_flag = government_is_celestial }
		}
		localization_key = SUBJECT_STANDING_IMPERIAL_GRACE_CONCEPT
	}
	text = {
		trigger = { # On a current tribute mission to China
			scope:overlord_scope ?= { government_has_flag = government_is_celestial }
		}
		localization_key = SUBJECT_STANDING_IMPERIAL_GRACE_CONCEPT
	}
	text = {
		fallback = yes
		localization_key = SUBJECT_STANDING_CONCEPT
	}
}

SubjectStandingIcon = {
	type = character
	text = {
		trigger = {
			is_tributary = yes
			suzerain = { government_has_flag = government_is_celestial }
		}
		localization_key = IMPERIAL_GRACE_ICON
	}
	text = {
		trigger = { # On a current tribute mission to China
			scope:overlord_scope ?= { government_has_flag = government_is_celestial }
		}
		localization_key = IMPERIAL_GRACE_ICON
	}
	text = {
		fallback = yes
		localization_key = null # No icon for generic Subject Standing yet
	}
}

CelestialTributaryRequest = {
	type = character
	text = {
		trigger = { scope:ask ?= flag:trade }
		localization_key = CELESTIAL_TRIBUTARY_REQUEST_TRADE
	}
	text = {
		trigger = { scope:ask ?= flag:marriage }
		localization_key = CELESTIAL_TRIBUTARY_REQUEST_MARRIAGE
	}
	text = {
		trigger = { scope:ask ?= flag:politics }
		localization_key = CELESTIAL_TRIBUTARY_REQUEST_POLITICS
	}
	text = {
		fallback = yes
		localization_key = CELESTIAL_TRIBUTARY_REQUEST_GENERIC
	}
}

GetReligiousFigurineName = {
	type = province
	# text = { #LotR
	# 	trigger = {
	# 		faith = {
	# 			OR = {
	# 				AND = {
	# 					religion = religion:buddhism_religion
	# 					prev.culture = { has_cultural_pillar = heritage_japonic }
	# 				}
	# 				AND = {
	# 					religion = religion:shintoism_religion
	# 					has_doctrine =  tenet_eastern_syncretism
	# 				}
	# 			}
	# 		}
	# 	}
	# 	localization_key = jizo_statue
	# }
	text = {
		fallback = yes
		localization_key = religious_statuette
	}
}

SubjectStandingLoss = {
	type = character
	text = {
		trigger = {
			overlord = {
				any_character_situation = {
					situation_current_phase = situation_dynastic_cycle_phase_stability		
				}
			}
		}
		localization_key = IMPERIAL_GRACE_LOSS_STABILITY
	}
	text = {
		trigger = {
			overlord = {
				any_character_situation = {
					situation_current_phase = situation_dynastic_cycle_phase_stability_expansion		
				}
			}
		}
		localization_key = IMPERIAL_GRACE_LOSS_STABILITY_EXPANSION
	}
	text = {
		trigger = {
			overlord = {
				any_character_situation = {
					situation_current_phase = situation_dynastic_cycle_phase_stability_advancement		
				}
			}
		}
		localization_key = IMPERIAL_GRACE_LOSS_STABILITY_ADVANCEMENT
	}
	text = {
		trigger = {
			overlord = {
				any_character_situation = {
					situation_current_phase = situation_dynastic_cycle_phase_instability		
				}
			}
		}
		localization_key = IMPERIAL_GRACE_LOSS_INSTABILITY
	}
	text = {
		trigger = {
			overlord = {
				any_character_situation = {
					situation_current_phase = situation_dynastic_cycle_phase_instability_conquest		
				}
			}
		}
		localization_key = IMPERIAL_GRACE_LOSS_INSTABILITY_CONQUEST
	}
	text = {
		trigger = {
			overlord = {
				any_character_situation = {
					situation_current_phase = situation_dynastic_cycle_phase_chaos		
				}
			}
		}
		localization_key = IMPERIAL_GRACE_LOSS_CHAOS
	}
}

SealOfInvestitureChance = {
	type = character
	text = {
		trigger = {	tribute_mission_chance_to_receive_seal_of_investiture = -1 }
		localization_key = IMPERIAL_GRACE_PLAYER_CHOICE_SEAL_OF_INVESTITURE
	}
	text = {
		trigger = {	tribute_mission_chance_to_receive_seal_of_investiture <= 0 }
		localization_key = IMPERIAL_GRACE_NO_CHANCE_SEAL_OF_INVESTITURE
	}
	text = {
		trigger = {	tribute_mission_chance_to_receive_seal_of_investiture >= 1.0 }
		localization_key = IMPERIAL_GRACE_WILL_GET_SEAL_OF_INVESTITURE
	}
	text = {
		trigger = {	tribute_mission_chance_to_receive_seal_of_investiture > 0.75 }
		localization_key = IMPERIAL_GRACE_HIGH_CHANCE_SEAL_OF_INVESTITURE
	}
	text = {
		trigger = {	tribute_mission_chance_to_receive_seal_of_investiture > 0.50 }
		localization_key = IMPERIAL_GRACE_MEDIUM_CHANCE_SEAL_OF_INVESTITURE
	}
	text = {
		fallback = yes
		localization_key = IMPERIAL_GRACE_SMALL_CHANCE_SEAL_OF_INVESTITURE
	}
}

GetInviteToMovementFlavor = {
	type = character
	text = {
		trigger = {
			top_participant_group:dynastic_cycle ?= {
				OR = {
					participant_group_type = hegemon_ruler
					participant_group_type = pro_hegemon_movement
				}
			}
		}
		localization_key = invite_to_join_movement_pro_hegemon_movement
	}
	text = {
		trigger = {
            top_participant_group:dynastic_cycle ?= {
                participant_group_type = expansion_movement
            }
		}
		localization_key = invite_to_join_movement_expansion_movement
	}
	text = {
		trigger = {
			top_participant_group:dynastic_cycle ?= {
				participant_group_type = advancement_movement
			}
		}
		localization_key = invite_to_join_movement_advancement_movement
	}
	text = {
		trigger = {
			top_participant_group:dynastic_cycle ?= {
				participant_group_type = conservative_movement
			}
		}
		localization_key = invite_to_join_movement_conservative_movement
	}
	text = {
		trigger = {
			top_participant_group:dynastic_cycle ?= {
				participant_group_type = undecided_movement
			}
		}
		localization_key = invite_to_join_movement_undecided_movement
	}
	### FALLBACK
	text = {
		trigger = { always = no }
		localization_key = invite_to_join_movement_fallback
		fallback = yes
	}
}

GetMyMovement = {
	type = character
	text = {
		trigger = {
			top_participant_group:dynastic_cycle ?= {
				OR = {
					participant_group_type = hegemon_ruler
					participant_group_type = pro_hegemon_movement
				}
			}
		}
		localization_key = my_pro_hegemon_movement
	}
	text = {
		trigger = {
			top_participant_group:dynastic_cycle ?= {
				participant_group_type = expansion_movement
			}
		}
		localization_key = my_expansion_movement
	}
	text = {
		trigger = {
			top_participant_group:dynastic_cycle ?= {
				participant_group_type = advancement_movement
			}
		}
		localization_key = my_advancement_movement
	}
	text = {
		trigger = {
			top_participant_group:dynastic_cycle ?= {
				participant_group_type = conservative_movement
			}
		}
		localization_key = my_conservative_movement
	}
	text = {
		trigger = {
			top_participant_group:dynastic_cycle ?= {
				participant_group_type = undecided_movement
			}
		}
		localization_key = my_undecided_movement
	}
	### FALLBACK
	text = {
		trigger = { always = no }
		localization_key = my_movement_fallback
		fallback = yes
	}	
}

GetMyMovementNoTooltip = {
	parent = GetMyMovement
	suffix = "_no_tooltip"
}

GetMyMovementShort = {
	type = character
	text = {
		trigger = {
			top_participant_group:dynastic_cycle ?= {
				OR = {
					participant_group_type = hegemon_ruler
					participant_group_type = pro_hegemon_movement
				}
			}
		}
		localization_key = my_pro_hegemon_movement_short
	}
	text = {
		trigger = {
			top_participant_group:dynastic_cycle ?= {
				participant_group_type = expansion_movement
			}
		}
		localization_key = my_expansion_movement_short
	}
	text = {
		trigger = {
			top_participant_group:dynastic_cycle ?= {
				participant_group_type = advancement_movement
			}
		}
		localization_key = my_advancement_movement_short
	}
	text = {
		trigger = {
			top_participant_group:dynastic_cycle ?= {
				participant_group_type = conservative_movement
			}
		}
		localization_key = my_conservative_movement_short
	}
	text = {
		trigger = {
			top_participant_group:dynastic_cycle ?= {
				participant_group_type = undecided_movement
			}
		}
		localization_key = my_undecided_movement_short
	}
	### FALLBACK
	text = {
		trigger = { always = no }
		localization_key = my_movement_fallback
		fallback = yes
	}	
}

OrdinalChineseConquest = { # the 'nd' in 2nd, 'rd' in 3rd, etc
	type = landed_title

	text = {
		trigger = {
			exists = var:num_of_grand_campaign_projects
			OR = {
				var:num_of_grand_campaign_projects = 1
				var:num_of_grand_campaign_projects = 21
				var:num_of_grand_campaign_projects = 31
				var:num_of_grand_campaign_projects = 41
				var:num_of_grand_campaign_projects = 51
				var:num_of_grand_campaign_projects = 61
				var:num_of_grand_campaign_projects = 71
				var:num_of_grand_campaign_projects = 81
				var:num_of_grand_campaign_projects = 91
			}
		}
		localization_key = OrdinalChineseConquestST
	}

	text = {
		trigger = {
			exists = var:num_of_grand_campaign_projects
			OR = {
				var:num_of_grand_campaign_projects = 2
				var:num_of_grand_campaign_projects = 22
				var:num_of_grand_campaign_projects = 32
				var:num_of_grand_campaign_projects = 42
				var:num_of_grand_campaign_projects = 52
				var:num_of_grand_campaign_projects = 62
				var:num_of_grand_campaign_projects = 72
				var:num_of_grand_campaign_projects = 82
				var:num_of_grand_campaign_projects = 92
			}
		}
		localization_key = OrdinalChineseConquestND
	}

	text = {
		trigger = {
			exists = var:num_of_grand_campaign_projects
			OR = {
				var:num_of_grand_campaign_projects = 3
				var:num_of_grand_campaign_projects = 23
				var:num_of_grand_campaign_projects = 33
				var:num_of_grand_campaign_projects = 43
				var:num_of_grand_campaign_projects = 53
				var:num_of_grand_campaign_projects = 63
				var:num_of_grand_campaign_projects = 73
				var:num_of_grand_campaign_projects = 83
				var:num_of_grand_campaign_projects = 93
			}
		}
		localization_key = OrdinalChineseConquestRD
	}

	text = {
		trigger = {
			OR = {
				NOT = { exists = var:num_of_grand_campaign_projects }
				var:num_of_grand_campaign_projects ?= 0
			}
		}
		localization_key = OrdinalChineseConquest_zero
	}

	text = {
		trigger = { always = yes }
		localization_key = OrdinalChineseConquestFallback
	}
}

GetCeremonialLiegeOrLiegeTitle = {
	type = character

	text = {
		trigger = { tgp_realm_has_ceremonial_liege_trigger = yes }
		localization_key = ceremonial_liege_title_from_any_vassal
	}

	text = {
		localization_key = top_liege_title_from_any_vassal
		fallback = yes
	}
}

GetCeremonialLiegeOrLiegeTitlePossessive = {
	parent = GetCeremonialLiegeOrLiegeTitle
	suffix = "_possessive"
}

GetCulturallyAppropriateMarriageReference = {
	type = character
	random_valid = yes

	text = {
		trigger = {
			faith.religion = {
				is_in_family = rf_abrahamic
			}
		}
		localization_key = holy_matrimony
	}
	text = {
		trigger = {
			faith.religion = {
				is_in_family = rf_abrahamic
			}
		}
		localization_key = blessed_union
	}
	text = {
		trigger = {
			faith.religion = {
				is_in_family = rf_eastern
			}
		}
		localization_key = harmonious_union
	}
	text = {
		trigger = {
			faith.religion = {
				is_in_family = rf_eastern
			}
		}
		localization_key = auspicious_wedlock
	}
	text = {
		localization_key = matrimony
	}
}

GetCouncillorForDisasterRecovery = {
	type = character

	text = {
		trigger = { government_has_flag = government_is_nomadic }
		localization_key = councillor_is_available_for_disaster_recovery_kurultai
	}
	text = {
		trigger = { government_has_flag = government_is_landless_adventurer }
		localization_key = councillor_is_available_for_disaster_recovery_entourage
	}
	text = {
		trigger = { tgp_has_access_to_ministry_trigger = yes }
		localization_key = councillor_is_available_for_disaster_recovery_minister_of_works
	}
	text = {
		fallback = yes
		localization_key = councillor_is_available_for_disaster_recovery_steward
	}
}

GetRealmRank = {
	type = character

	text = {
		trigger = { highest_held_title_tier >= tier_empire }
		localization_key = imperial_court
	}
	text = {
		trigger = { highest_held_title_tier = tier_kingdom }
		localization_key = royal_court
	}
	text = {
		fallback = yes
		localization_key = realm
	}
}

GetMeritRank = {
	type = character

	text = {
		trigger = { merit_level = 9 }
		localization_key = merit_rank_1_gloss
	}
	text = {
		trigger = { merit_level = 8 }
		localization_key = merit_rank_2_gloss
	}
	text = {
		trigger = { merit_level = 7 }
		localization_key = merit_rank_3_gloss
	}
	text = {
		trigger = { merit_level = 6 }
		localization_key = merit_rank_4_gloss
	}
	text = {
		trigger = { merit_level = 5 }
		localization_key = merit_rank_5_gloss
	}
	text = {
		trigger = { merit_level = 4 }
		localization_key = merit_rank_6_gloss
	}
	text = {
		trigger = { merit_level = 3 }
		localization_key = merit_rank_7_gloss
	}
	text = {
		trigger = { merit_level = 2 }
		localization_key = merit_rank_8_gloss
	}
	text = {
		trigger = { merit_level = 1 }
		localization_key = merit_rank_9_gloss
	}
	text = {
		localization_key = merit_rank_none_gloss
	}
}

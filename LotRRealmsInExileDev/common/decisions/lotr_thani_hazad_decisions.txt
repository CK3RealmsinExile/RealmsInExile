### Thâni-Hazâd Decisions ###

decision_anbalkumagan_empire = { #  
	title = decision_anbalkumagan_empire
	picture = "gfx/interface/illustrations/decisions/decision_adunai_01.dds"
	major = yes
	ai_goal = no
	ai_check_interval = 12
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}

	selection_tooltip = decision_anbalkumagan_empire_tooltip
	desc = decision_anbalkumagan_empire_desc
	confirm_text = decision_anbalkumagan_empire_confirm

	is_shown = {
		is_landed = yes
		has_title = title:k_an_balkumagan
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:anbalkumagan_empire
			}
		}
	}

	is_valid = {
		has_title = title:k_an_balkumagan
		is_independent_ruler = yes
		completely_controls = title:k_tulwang
		completely_controls = title:k_kharadune
		prestige_level >= very_high_prestige_level
	}

	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
	}

	cost = { gold = { value = 200 } }

	effect = {
		get_title = title:e_anbalkumagan
		title:k_an_balkumagan = {
			set_de_jure_liege_title = title:e_anbalkumagan
		}
		title:k_tulwang = {
			set_de_jure_liege_title = title:e_anbalkumagan
		}
		title:k_kharadune = {
			set_de_jure_liege_title = title:e_anbalkumagan
		}
		root.capital_county = {
			change_development_level = 3
		}
		title:e_thani_hazad = {
			set_title_name = e_thani_hazad_southern_province
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:anbalkumagan_empire
		}
	}
}

decision_integrate_tulwang = {
	title = decision_integrate_tulwang_title
	picture = "gfx/interface/illustrations/decisions/decision_adunai_01.dds"
	major = yes
	ai_goal = no
	ai_check_interval = 12
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	
	selection_tooltip = decision_integrate_tulwang_tooltip
	desc = decision_integrate_tulwang_desc
	confirm_text = decision_integrate_tulwang_confirm
	
	is_shown = {
		is_landed = yes
		OR = {
			has_title = title:e_thani_hazad
			has_title = title:e_pharazain
			has_title = title:e_numenor_in_exile
		}
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:integrate_tulwang_decision
			}
		}
	}
	
	is_valid = {
		OR = {
			has_title = title:e_thani_hazad
			has_title = title:e_pharazain
			has_title = title:e_numenor_in_exile
		}
		is_independent_ruler = yes
		completely_controls = title:k_tulwang
		prestige_level >= medium_prestige_level
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
	}
	
	cost = { gold = { value = 200 } }
	
	effect = {
		if = {
			limit = { primary_title = title:e_thani_hazad }
			title:k_tulwang = { set_de_jure_liege_title = title:e_thani_hazad }
		} 
		else_if = {
			limit = { primary_title = title:e_pharazain }
			title:k_tulwang = { set_de_jure_liege_title = title:e_pharazain }
		}
		else_if = {
			limit = { primary_title = title:e_numenor_in_exile }
			title:k_tulwang = { set_de_jure_liege_title = title:e_numenor_in_exile }
		}
		title:c_khorsaj = {
			change_development_level = 2
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:integrate_tulwang_decision
		}
	}
}

decision_form_sea_dragon_host = {
	title = decision_form_sea_dragon_host
	picture = "gfx/interface/illustrations/decisions/decision_mardruak_01.dds"
	major = yes
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_form_sea_dragon_host_tooltip
	desc = decision_form_sea_dragon_host_desc
	confirm_text = decision_form_sea_dragon_host_confirm
	is_shown = {
		faith = faith:faith_nlkum_kadir
		# is_target_in_global_variable_list = {
		# 	name = unavailable_unique_decisions
		# 	target = flag:decision_margoz_election_choice_szreldor
		# }

		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_form_sea_dragon_host
			}
		}
	}
	is_valid = { # rule a small realm only on the coasts and be an aclaimed and wealthy pirate
		trigger_if = {
			# limit = {
			# 	is_ai = no
			# }
			highest_held_title_tier < tier_kingdom
			custom_tooltip = {
				text = realm_size_below_15_sea_dragon_decision
				realm_size <= 15
			}
			custom_tooltip = {
				text = have_only_sea_counties_sea_dragon_decision
				NOT = {
					any_sub_realm_county = { is_coastal_county = no }
				}
			}
			prestige_level >= high_prestige_level
		}	
	}			
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	cost = {
		# prestige = 500
		gold = 10000
		piety = 1000
	}
	effect = {
		if = {
			limit = {
				is_alive = yes
				is_landed = yes
			}
			house = {
				add_house_modifier = {
					modifier = legacy_of_sea_drakes
				}
			}
			get_title = title:e_sea_dragon_host
			set_primary_title_to = title:e_sea_dragon_host
			root.dynasty = {
				add_dynasty_prestige = 2000
			}

			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_form_sea_dragon_host
			}

			custom_tooltip = {
				text = decision_sea_dragon_host_formation
			}
		}
	}
}

decision_conquest_of_pel = {
	title = decision_conquest_of_pel
	picture = "gfx/interface/illustrations/decisions/decision_pel_01.dds"
	major = yes
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_conquest_of_pel_tooltip
	desc = decision_conquest_of_pel_desc
	confirm_text = decision_conquest_of_pel_confirm
	is_shown = {
		culture = { has_cultural_pillar = heritage_magri }

		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_conquest_of_pel
			}
		}
	}
	is_valid = { # rule a small realm only on the coasts and be an aclaimed and wealthy pirate
			has_title = title:k_pel
			prestige_level >= high_prestige_level	
	}			
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	cost = {
		# prestige = 500
		gold = 150
		# piety = 1000
	}
	effect = {
		if = {
			limit = {
				is_alive = yes
				is_landed = yes
			}
			# house = {
			# 	add_house_modifier = {
			# 		modifier = legacy_of_sea_drakes
			# 	}
			# }
			# get_title = title:e_sea_dragon_host
			# set_primary_title_to = title:e_sea_dragon_host
			root.dynasty = {
				add_dynasty_prestige = 500
			}

			title:k_pel = {
				set_title_name = cn_pel_magrin
			}

			trigger_event = {
				id = lotr_thani_hazad.0002
				days = 1
			}

			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_conquest_of_pel
			}

			# custom_tooltip = {
			# 	text = decision_sea_dragon_host_formation
			# }
		}
	}
}

## Seregul Decisions ##

decision_stabalise_pel = {	
	title = decision_stabalise_pel
	picture = "gfx/interface/illustrations/decisions/decision_castle.dds"
	major = yes
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}

	is_shown = {
		current_year >= 7000 # During war of the Ring
		is_independent_ruler = yes
		has_title = title:k_pel

		not = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_stabalise_pel
			}
		}
	}

	is_valid = {
		custom_tooltip = {
            text = stabalised_pel
        }
		
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
	}

	effect = {
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_stabalise_pel
		}
		
		root = { 
			trigger_event = { 
				id = lotr_thani_hazad.5301
			} 
		}
	}
}

decision_beat_mag = {	
	title = decision_beat_mag
	picture = "gfx/interface/illustrations/decisions/decision_castle.dds"
	major = yes
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}

	is_shown = {
		current_year >= 7000 # During war of the Ring
		is_independent_ruler = yes
		has_title = title:k_pel

		not = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_beat_mag
			}
		}
	}

	is_valid = {
		custom_tooltip = {
            text = beat_mag
        }
		
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
	}

	effect = {
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_beat_mag
		}
		
		root = { 
			trigger_event = { 
				id = lotr_thani_hazad.5201
			} 
		}
	}
}

decision_beat_bandits = {	
	title = decision_beat_bandits
	picture = "gfx/interface/illustrations/decisions/decision_castle.dds"
	major = yes
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}

	is_shown = {
		current_year >= 7000 # During war of the Ring
		is_independent_ruler = yes
		has_title = title:k_pel

		not = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_beat_bandits
		}
	}

	is_valid = {
		custom_tooltip = {
            text = beat_mag
        }
		
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
	}

	effect = {
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_beat_bandits
		}
		
		root = { 
			trigger_event = { 
				id = lotr_thani_hazad.5202
			} 
		}
	}
}

decision_beat_barasi = {	
	title = decision_beat_barasi
	picture = "gfx/interface/illustrations/decisions/decision_castle.dds"
	major = yes
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}

	is_shown = {
		current_year >= 7000 # During war of the Ring
		is_independent_ruler = yes
		has_title = title:k_pel

		not = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_beat_barasi
			}
		}
	}

	is_valid = {
		custom_tooltip = {
            text = beat_mag
        }
		
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
	}

	effect = {
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_beat_barasi
		}
		
		root = { 
			trigger_event = { 
				id = lotr_thani_hazad.5104
			} 
		}
	}
}



## Storm Host invasion of Bellakar Decisions ##

decision_murder_bellakar = {	
	title = decision_murder_bellakar
	picture = "gfx/interface/illustrations/decisions/decision_castle.dds"
	major = yes
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}

	is_shown = {
		current_year >= 7000 # Durin war of the Ring
		is_independent_ruler = yes
		has_title = title:e_thon_an_kharlokh
		NOT = { has_title = title:e_bellakar }
		title:e_bellakar = { is_title_created = yes }
		exists = title:e_bellakar.holder

		not = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_murder_bellakar
			}
		}
		NAND = {
			is_ai = yes
			max_military_strength < 3000
		}
	}

	is_valid = {
		custom_tooltip = {
            text = bellakar_invasion
            is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
                target = flag:recieved_murder_bellakar_order
            }
        }
		NOT = { has_truce = title:e_bellakar.holder }
		NOT = { is_allied_to = title:e_bellakar.holder }
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
	}

	effect = {
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_murder_bellakar
		}
		start_war = {
			casus_belli = invade_bellakar_cb
			target = title:e_bellakar.holder
			target_title = title:e_bellakar
		}
		root = { trigger_event = { id = lotr_thani_hazad.2010 days = { 210 365 }  } }
	}
}

## Imrazôr event chain capstone decision ##

decision_summon_princes_imrazor = {	
	title = decision_summon_princes_imrazor
	picture = "gfx/interface/illustrations/decisions/decision_call_meeting_of_the_balan_lai.dds"
	major = yes
	ai_goal = yes
	selection_tooltip = decision_summon_princes_imrazor_tooltip
	desc = decision_summon_princes_imrazor_desc
	confirm_text = decision_summon_princes_imrazor_confirm

	is_shown = {
		has_trait = balan_lai_member
		has_character_flag = abduct_seregul
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_summon_princes_imrazor
			}
		}
	}

	is_valid = {
		is_imprisoned = no
	}

	effect = {
		custom_tooltip = decision_summon_princes_imrazor.tt
		custom_tooltip = imrazor_vote_in_favour
		custom_tooltip = imrazor_vote_against
		trigger_event = lotr_thani_hazad.3022 # The Great Council
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_summon_princes_imrazor
		}
	}
	
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
}

### Balan-lai decisions ###

decision_ask_to_join_balan_lai = {	
	title = decision_ask_to_join_balan_lai
	picture = "gfx/interface/illustrations/decisions/decision_ask_to_join_balan_lai.dds"
	major = yes
	ai_goal = yes
	selection_tooltip = decision_ask_to_join_balan_lai_tooltip
	desc = decision_ask_to_join_balan_lai_desc
	confirm_text = decision_ask_to_join_balan_lai_confirm

	is_shown = {
		capital_province ?= { geographical_region = middleearth_thani_hazad_struggle_region }
		OR = { # Kharadunaim or Kharadunaim-descendant
			culture = culture:kharadunaim
			culture = { any_parent_culture_or_above = { this = culture:kharadunaim } }
		}
		NOT = { has_trait = balan_lai_member }
	}

	is_valid = {
		capital_province ?= { geographical_region = middleearth_thani_hazad_struggle_region }
		OR = { # Kharadunaim or Kharadunaim-descendant
			culture = culture:kharadunaim
			custom_tooltip = {
				text = decision_ask_to_join_balan_lai_culture_derived_from_karadunaim
				culture = { any_parent_culture_or_above = { this = culture:kharadunaim } }
			}
		}
		is_independent_ruler = yes
		custom_tooltip = {
			text = decision_ask_to_join_balan_lai_mispir_not_in_realm
			NOT = { any_realm_county = { this = title:c_mispir } }
		}
		any_balan_lai_member = {
			percent > 0.5
			opinion = {
				target = root
				value > 50
			}
		}
	}

	cost = {
		gold = {
			value = 150
			if = {
				limit = {
					is_ai = yes
				}
				multiply = 0
			}
		}
		prestige = {
			value = 300
			if = {
				limit = {
					is_ai = yes
				}
				multiply = 0
			}
		}
	}

	effect = {
		custom_tooltip = decision_ask_to_join_balan_lai_effect
		custom_tooltip = decision_ask_to_join_balan_lai_effect2
		save_scope_as = potential_joiner
		random_balan_lai_member = {
			trigger_event = lotr_thani_hazad.9010
		}
	}

	cooldown = { years = 10 }
	
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
}

decision_expel_from_balan_lai = {	
	title = decision_expel_from_balan_lai
	picture = "gfx/interface/illustrations/decisions/decision_expel_from_balan_lai.dds"
	ai_goal = yes
	selection_tooltip = decision_expel_from_balan_lai_tooltip
	desc = decision_expel_from_balan_lai_desc
	confirm_text = decision_expel_from_balan_lai_confirm

	is_shown = {
		has_trait = balan_lai_member
	}

	is_valid = {
		is_imprisoned = no
	}

	cost = {
		gold = {
			value = 150
			if = {
				limit = {
					is_ai = yes
				}
				multiply = 0
			}
		}
		prestige = {
			value = 300
			if = {
				limit = {
					is_ai = yes
				}
				multiply = 0
			}
		}
	}

	effect = {
		custom_tooltip = attempt_a_unanimous_vote_to_expel_a_member
	}

	cooldown = { years = 10 }
	
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
}

# decision_call_meeting_of_the_balan_lai = {	
# 	title = decision_call_meeting_of_the_balan_lai
# 	picture = "gfx/interface/illustrations/decisions/decision_call_meeting_of_the_balan_lai.dds"
# 	major = yes
# 	ai_goal = yes
# 	selection_tooltip = decision_call_meeting_of_the_balan_lai_tooltip
# 	desc = decision_call_meeting_of_the_balan_lai_desc
# 	confirm_text = decision_call_meeting_of_the_balan_lai_confirm

# 	is_shown = {
# 		has_trait = balan_lai_member
# 	}

# 	is_valid = {
# 		is_adult = yes
# 		is_imprisoned = no
# 	}

# 	widget = {
# 		gui = "decision_view_widget_petition_liege"
# 		controller = decision_option_list_controller
# 		decision_to_second_step_button = "CHOOSE_DISCUSSION_TOPIC_NEXT_STEP_BUTTON"

# 		### General
# 		item = { # Review Northern Tithe
# 			value = balan_lai_military_training
# 			is_valid = {
# 				is_adult = yes
# 			}
# 			current_description = balan_lai_northern_tithe_desc
# 			localization = decision_balan_lai_northern_tithe
# 			icon = "gfx/interface/icons/message_feed/mercenary.dds"
# 			ai_chance = { value = 0 } # Currently unused
# 		}
# 		item = { # Invest in buildings
# 			value = balan_lai_building
# 			is_valid = {
# 				is_adult = yes
# 			}
# 			current_description = balan_lai_building_desc
# 			localization = decision_balan_lai_building
# 			icon = "gfx/interface/icons/message_feed/building.dds"
# 			ai_chance = { value = 0 } # Currently unused
# 		}
# 		item = { # Invest in law and order
# 			value = balan_lai_control
# 			is_valid = {
# 				is_adult = yes
# 			}
# 			current_description = balan_lai_control_desc
# 			localization = decision_balan_lai_control
# 			icon = "gfx/interface/icons/message_feed/control.dds"
# 			ai_chance = { value = 0 } # Currently unused
# 		}
# 		item = { # Joint training exercises
# 			value = balan_lai_military_training
# 			is_valid = {
# 				is_adult = yes
# 			}
# 			current_description = balan_lai_military_training_desc
# 			localization = decision_balan_lai_military_training
# 			icon = "gfx/interface/icons/message_feed/martial.dds"
# 			ai_chance = { value = 0 } # Currently unused
# 		}
# 		item = { # Faith conversion efforts
# 			value = balan_lai_faith_conversion
# 			is_valid = {
# 				is_adult = yes
# 			}
# 			current_description = balan_lai_faith_conversion_desc
# 			localization = decision_balan_lai_faith_conversion
# 			icon = "gfx/interface/icons/message_feed/religious.dds"
# 			ai_chance = { value = 0 } # Currently unused
# 		}
# 		item = { # Cultural conversion efforts
# 			value = balan_lai_culture_conversion
# 			is_valid = {
# 				is_adult = yes
# 			}
# 			current_description = balan_lai_culture_conversion_desc
# 			localization = decision_balan_lai_culture_conversion
# 			icon = "gfx/interface/icons/message_feed/council.dds"
# 			ai_chance = { value = 0 } # Currently unused
# 		}
# 	}

# 	effect = {
# 		custom_tooltip = call_the_council
# 	}

# 	cooldown = { years = 5 }
	
# 	ai_potential = {
# 		always = yes
# 	}

# 	ai_will_do = {
# 		base = 100
# 	}
# }


struggle_thani_hazad_dissolution = {
	major = yes
	title = struggle_thani_hazad_dissolution
	picture = "gfx/interface/illustrations/decisions/struggle_thani_hazad_dissolution.dds"
	extra_picture = "gfx/interface/illustrations/struggle_decision_buttons/struggle_thani_hazad_dissolution_button.dds"
	confirm_click_sound = "event:/DLC/FP2/SFX/UI/fp2_struggle_ending_decision_confirm"
	desc = struggle_thani_hazad_dissolution_description
	selection_tooltip = struggle_thani_hazad_dissolution_select_tooltip
	is_invisible = yes
	sort_order = 80

	is_valid = {
		custom_tooltip = {
			text = struggle_thani_hazad_dissolution_valid_tooltip
			any_character_struggle = {
				involvement = involved
				is_struggle_type = thani_hazad_struggle
				is_struggle_phase = struggle_thani_hazad_phase_disintegration
			}
		}
		trigger_if = { #Interloper
			limit = {
				any_character_struggle = {
					involvement = interloper
					is_struggle_type = thani_hazad_struggle
				}
			}
			custom_tooltip = {
				text = struggle_thani_hazad_dissolution_valid_tooltip_interloper
				any_county_in_region = {
					region = middleearth_thani_hazad_struggle_region
					OR = {
						holder = { is_vassal_or_below_of = root }
						holder = root
					}
					percent >= 0.6
				}
			}
		}
	}

	cost = {
		prestige = 2000
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {
		if = {
			limit = {
				any_character_struggle = {
					involvement = involved
					is_struggle_type = thani_hazad_struggle
				}
			}
			custom_tooltip = {
				text = struggle_thani_hazad_dissolution_effect_involved
			}
		} else_if = {
			limit = {
				any_character_struggle = {
					involvement = interloper
					is_struggle_type = thani_hazad_struggle
				}
			}
			get_title = title:e_thani_hazad
			custom_tooltip = {
				text = struggle_thani_hazad_struggle_ends
				struggle:thani_hazad_struggle = { end_struggle = yes }
			}
		}
	}
	
	ai_check_interval = 36
	ai_potential = { always = no }
	ai_will_do = { base = 100 }
}

struggle_thani_hazad_confederation = {
	major = yes
	title = struggle_thani_hazad_confederation
	picture = "gfx/interface/illustrations/decisions/struggle_thani_hazad_confederation.dds"
	extra_picture = "gfx/interface/illustrations/struggle_decision_buttons/struggle_thani_hazad_confederation_button.dds"
	confirm_click_sound = "event:/DLC/FP2/SFX/UI/fp2_struggle_ending_decision_confirm"
	desc = struggle_thani_hazad_confederation_description
	selection_tooltip = struggle_thani_hazad_confederation_select_tooltip
	is_invisible = yes
	sort_order = 80

	is_valid = {
		custom_tooltip = {
			text = struggle_thani_hazad_confederation_valid_tooltip
			any_character_struggle = {
				involvement = involved
				is_struggle_type = thani_hazad_struggle
				is_struggle_phase = struggle_thani_hazad_phase_confederation
			}
		}
		trigger_if = { #Involved
			limit = {
				any_character_struggle = {
					involvement = involved
					is_struggle_type = thani_hazad_struggle
				}
			}
			is_independent_ruler = yes
			culture:kharadunaim = { save_temporary_scope_as = kharadunaimculture } # Used for tooltipping
			custom_tooltip = {
				text = struggle_thani_hazad_confederation_valid_culture_tooltip
				OR = {
					culture = culture:kharadunaim
					culture = { any_parent_culture_or_above = { this = culture:kharadunaim } }
				}
			}
			custom_tooltip = {
				text = struggle_thani_hazad_confederation_valid_modifier_tooltip
				NOT = { dynasty = { has_dynasty_modifier = old_order_triumphant_th_struggle_modifier } }
			}
			prestige_level >= 3
			dynasty = { dynasty_prestige_level >= 5 }
		}
		trigger_if = { #Interloper
			limit = {
				any_character_struggle = {
					involvement = interloper
					is_struggle_type = thani_hazad_struggle
				}
			}
			custom_tooltip = {
				text = struggle_thani_hazad_confederation_valid_tooltip_interloper
				any_county_in_region = {
					region = middleearth_thani_hazad_struggle_region
					OR = {
						holder = { is_vassal_or_below_of = root }
						holder = root
					}
					percent >= 0.7
				}
			}
		}
	}

	cost = {
		prestige = 2500
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {
		if = {
			limit = {
				any_character_struggle = {
					involvement = involved
					is_struggle_type = thani_hazad_struggle
				}
			}
			dynasty = { add_dynasty_modifier = old_order_triumphant_th_struggle_modifier }
			dynasty = { add_dynasty_prestige = 3000 }
			dynasty = { add_dynasty_prestige_level = 1 }
			struggle:thani_hazad_struggle = {
				change_struggle_phase = struggle_thani_hazad_phase_confederation	
			}
		} else_if = {
			limit = {
				any_character_struggle = {
					involvement = interloper
					is_struggle_type = thani_hazad_struggle
				}
			}
			get_title = title:e_thani_hazad
			custom_tooltip = {
				text = struggle_thani_hazad_struggle_ends
				struggle:thani_hazad_struggle = { end_struggle = yes }
			}
		}
	}
	
	ai_check_interval = 36
	ai_potential = { always = no }
	ai_will_do = { base = 100 }
}

struggle_thani_hazad_unification = {
	major = yes
	title = struggle_thani_hazad_unification
	picture = "gfx/interface/illustrations/decisions/struggle_thani_hazad_unification.dds"
	extra_picture = "gfx/interface/illustrations/struggle_decision_buttons/struggle_thani_hazad_unification_button.dds"
	confirm_click_sound = "event:/DLC/FP2/SFX/UI/fp2_struggle_ending_decision_confirm"
	desc = struggle_thani_hazad_unification_description
	selection_tooltip = struggle_thani_hazad_unification_select_tooltip
	is_invisible = yes
	sort_order = 80

	is_valid = {
		custom_tooltip = {
			text = struggle_thani_hazad_unification_valid_tooltip
			any_character_struggle = {
				involvement = involved
				is_struggle_type = thani_hazad_struggle
				is_struggle_phase = struggle_thani_hazad_phase_unification
			}
		}
		###
		#
		#	Add 2 scripted effects/triggers. 
		#
		#	One set should represent the Balan-Lai uniting
		#	another set should represent Balan-Lai being united conventional way (i.e., one big strong ruler)
		#
		###
		trigger_if = { #Interloper
			limit = {
				any_character_struggle = {
					involvement = interloper
					is_struggle_type = thani_hazad_struggle
				}
			}
			custom_tooltip = {
				text = struggle_thani_hazad_unification_valid_tooltip_interloper
				any_county_in_region = {
					region = middleearth_thani_hazad_struggle_region
					OR = {
						holder = { is_vassal_or_below_of = root }
						holder = root
					}
					percent >= 0.8
				}
			}
		}
		trigger_if = { #Involved
			limit = {
				any_character_struggle = {
					involvement = involved
					is_struggle_type = thani_hazad_struggle
				}
			}
			prestige_level >= 5
			completely_controls_region = custom_mannish_thani_hazad # TEMP | Rework/Finesse more
		}
	}

	cost = {
		prestige = 2000
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {
		if = { # Involved
			limit = {
				any_character_struggle = {
					involvement = involved
					is_struggle_type = thani_hazad_struggle
				}
			}
			get_title = title:e_thani_hazad
			title:e_thani_hazad = { add_title_law = balan_lai_elective_succession_law }
		} else_if = {  # Interloper
			limit = {
				any_character_struggle = {
					involvement = interloper
					is_struggle_type = thani_hazad_struggle
				}
			}
			get_title = title:e_thani_hazad
			custom_tooltip = {
				text = struggle_thani_hazad_struggle_ends
				struggle:thani_hazad_struggle = { end_struggle = yes }
			}
		}
	}
	
	ai_check_interval = 36
	ai_potential = { always = no }
	ai_will_do = { base = 100 }
}
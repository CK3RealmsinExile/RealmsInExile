#############################
### Stewardship decisions ###
#############################

decision_increase_stewards_power = {
	sort_order = 25
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_minas_tirith_01.dds"
	}
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {				
					has_primary_title = title:k_gondor_steward
				}
				desc = decision_increase_stewards_power_steward_desc
			}
			desc = decision_increase_stewards_power_desc
		}
	}

	decision_group_type = realms_in_exile_stewards
	
	selection_tooltip = decision_increase_stewards_power_tooltip
	confirm_text = decision_increase_stewards_power_confirm
	
	ai_goal = no
	ai_check_interval = 12
	ai_potential = {
		always = yes
	}
	is_shown = {
		is_gondor = yes
		is_independent_ruler = yes
		is_landed = yes
		NOT = {
			is_ruling_steward = yes
		}
	}
	is_valid = {
		NOT = {
			has_character_flag = lotr_stewards_changed_stewards_power
		}
		prestige_level >= medium_prestige_level
	}
	cost = {
		prestige = 10000 #This should not be cheep
	}
	cooldown = {
		year = 100
	}
	effect = {
		custom_tooltip = decision_increase_stewards_power_tt
		add_legitimacy = 50

		every_court_position_holder = {
			limit = {
				is_steward_of_gondor = yes
			}
			save_scope_as = current_steward
			add_opinion = {
				modifier = lotr_steward_increase_power_opinion
				target = root
			}
		}

		if = { # Implementing Lvl 2 - Dedicated Regent
			limit = {
				global_var:lotr_stewards_power_level = {
					value = 1
				}
			}
			scope:current_steward = {
				create_title_and_vassal_change = {
					type = created
					save_scope_as = title_change
					add_claim_on_loss = yes
				}
				title:d_gondor_steward = {
					change_title_holder = {
						holder = scope:current_steward
						change = scope:title_change
					}
				}
				resolve_title_and_vassal_change = scope:title_change
			}
		}
		if = { # Implementing LvL 3 - Familial Grant
			limit = {
				global_var:lotr_stewards_power_level = {
					value = 1
				}
			}
			scope:current_steward = {
				dynasty = {
					add_dynasty_modifier = {
						modifier = steward_of_gondor_dynasty_modifier
					}
				}
			}
		}
		lotr_steward_increase_power_effect = yes
	}
}

decision_decrease_stewards_power = {
	sort_order = 24
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_minas_tirith_01.dds"
	}
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {				
					has_primary_title = title:k_gondor_steward
				}
				desc = decision_decrease_stewards_power_steward_desc
			}
			desc = decision_decrease_stewards_power_desc
		}
	}

	decision_group_type = realms_in_exile_stewards
	
	selection_tooltip = decision_decrease_stewards_power_tooltip
	confirm_text = decision_decrease_stewards_power_confirm
	
	ai_goal = no
	ai_check_interval = 12
	ai_potential = {
		always = yes
	}
	is_shown = {
		is_gondor = yes
		is_independent_ruler = yes
		is_landed = yes
		NOt = {
			is_ruling_steward = yes
		}
	}
	is_valid = {
		NOT = {
			has_character_flag = lotr_stewards_changed_stewards_power
		}
		prestige_level >= medium_prestige_level
	}
	cost = {
		prestige = 10000
	}
	cooldown = {
		year = 100
	}
	effect = {
		custom_tooltip = decision_decrease_stewards_power_tt
		add_legitimacy = -50
		# add current steward opinon
		lotr_steward_decrease_power_effect = yes
	}
	# AI value
	ai_goal = yes
	ai_potential = { always = yes }
	ai_will_do = { base = 100 }
}

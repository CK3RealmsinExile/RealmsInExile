decision_form_powa_kingdom = {
	sort_order = 25
	title = decision_form_powa_kingdom_title
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_harad_03.dds"
	}

	decision_group_type = realms_in_exile_major

	ai_check_interval = 12
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_form_powa_kingdom_tooltip
	desc = decision_form_powa_kingdom_desc
	confirm_text = decision_form_powa_kingdom_confirm
	
	is_shown = {
		dynasty ?= dynasty:dynasty_latantee
		has_variable = powan_unification
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_form_powa_kingdom
			}
		}
	}

	is_valid = {
		trigger_if = { #Triggers for diplo route
			limit = {
				has_variable = powan_unification
				var:powan_unification = flag:diplomacy
			}
			prestige_level >= 3
			trigger_if = {
				limit = { has_title = title:k_poa }
				custom_tooltip = {
					text = decision_form_powa_kingdom_diplo_trigger_tt
					decision_unite_poa_value_normalized >= 50
				}
			} trigger_else = {
				custom_tooltip = {
					text = decision_form_powa_kingdom_diplo_trigger_tt
					decision_unite_poa_value_normalized >= 80
				}
				
			}
		} trigger_else = { #Triggers for martial route
			custom_tooltip = {
				text = decision_form_powa_kingdom_effect_tt_2
				title:k_poa = {
					any_de_jure_county_holder = {
						percent >= 0.5
						OR = {
							this = root
							is_vassal_or_below_of = root
						}
					}
				}
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	effect = {
		change_government = feudal_government
		set_primary_title_to = title:k_poa
		custom_tooltip = {
			text = decision_form_powa_kingdom_effect_tt_1
			random = {
				chance = 60
				title:k_poa = {
					every_de_jure_county_holder = {
						limit = { 
							is_independent_ruler = no
							top_liege = root
						}
						change_government = feudal_government
						every_held_county = {
							title_province = { set_holding_type = castle_holding }
						}
					}
				}
			}
		}
		title:c_tul_poac.title_province = {
			add_special_building = wonder_tul_poac_monument_01
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_form_powa_kingdom
		}
		trigger_event = sirayn.1004
		every_held_county = {
			title_province = { set_holding_type = castle_holding }
		}
	}
}

decision_make_powa_mercantile_center = {
	sort_order = 25
	title = decision_make_powa_mercantile_center_title
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_harad_03.dds"
	}

	decision_group_type = realms_in_exile_major

	ai_check_interval = 12
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_make_powa_mercantile_center_tooltip
	desc = decision_make_powa_mercantile_center_desc
	confirm_text = decision_make_powa_mercantile_center_confirm
	
	is_shown = {
		dynasty ?= dynasty:dynasty_latantee
		has_variable = powan_unification
		is_target_in_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_form_powa_kingdom
		}
	}

	is_valid = {
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_make_powa_mercantile_center
			}
		}
		has_trait = lifestyle_trans_haradric_merchant
		has_trait_xp = {
			trait = lifestyle_trans_haradric_merchant
			value >= 50
		}
		custom_tooltip = {
			text = decision_make_powa_mercantile_center_effect_tt_1
			any_neighboring_top_liege_realm_owner = {
				count >= 5
				OR = {
					root = { has_hook = prev }
					has_relation_friend = root
					has_relation_lover = root
					is_tributary_of_suzerain_or_above = root
				}
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	effect = {
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_make_powa_mercantile_center
		}
		title:c_tul_poac.title_province = {
			hidden_effect = { remove_building = wonder_tul_poac_monument_01 }
			add_special_building = wonder_tul_poac_monument_02
			
		}
		title:c_tul_poac = {
			add_county_modifier = {
				modifier = powan_unification_county_modifier
				years = 15
			}
		}
		dynasty ?= {
			add_dynasty_modifier = {
				modifier = powan_unification_dynasty_modifier
			}
		}
		trigger_event = sirayn.1005
	}
}

decision_choose_new_tayee_patron = {
	ai_check_interval = 12
	picture = {reference = "gfx/interface/illustrations/decisions/fp3/fp3_decision_foundation.dds"}

	decision_group_type = realms_in_exile_minor
	
	cooldown = { years = 30 }

	is_shown = {
		faith = {
			has_doctrine = tenet_sirayn_syncretism
		}
		is_landed = yes
	}
	
	is_valid_showing_failures_only = {
		OR = {
			faith.religion = religion:sirayn_religion
			faith.religion = religion:harshandatt_religion
		}
	}

	is_valid = {
		
	}
	
	widget = {
		gui = "decision_view_widget_generic_multichoice_with_effects"
		controller = decision_option_list_controller
		decision_to_second_step_button = "CHOOSE_TAYEE_FAITH"
		show_from_start = yes

		# Personality traits get 5 points. All faiths get 10 points for having counties of them. All other weightings are at your, yes, your, discretion
		
		### Mirsaya
		item = {
			value = choose_mirsaya
			is_valid = {
				NOT = { faith = faith:faith_mirsaya }
			}
			current_description = choose_mirsaya_desc
			localization = choose_mirsaya_name
			icon = "gfx/interface/icons/faith/custom_sirayn_mirsaya.dds"
			ai_chance = {
				value = 10 # Traditional head of pantheon = higher base value
				if = {
					limit = {
							has_trait = calm
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = honest
					}
					add = 5
				}
				if = {
					limit = {
						any_sub_realm_county = {
							faith = faith:faith_mirsaya
						}
					}
					add = 10
				}
			}
		}
		### Num
		item = {
			value = choose_num
			is_valid = {
				NOT = { faith = faith:faith_num }
			}
			current_description = choose_num_desc
			localization = choose_num_name
			icon = "gfx/interface/icons/faith/custom_sirayn_num.dds"
			ai_chance = {
				value = 0
				if = {
					limit = {
							has_trait = diligent
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = arrogant
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = just
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = zealous
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = stubborn
					}
					add = 5
				}
				if = { # Scholars follow the scholar faith
					limit = {
							has_trait = scholar
					}
					add = 20
				}
				if = { # Might as well make the HoF relevant
					limit = {
						exists = title:d_gabbaz_balahask.holder
						opinion = {
							target = title:d_gabbaz_balahask.holder
							value > 50
						}
					}
					add = 20
				}
				if = {
					limit = {
						any_sub_realm_county = {
							faith = faith:faith_num
						}
					}
					add = 10
				}
			}
		}
		### Lalit
		item = {
			value = choose_lalit
			is_valid = {
				NOT = { faith = faith:faith_lalit }
			}
			current_description = choose_lalit_desc
			localization = choose_lalit_name
			icon = "gfx/interface/icons/faith/custom_sirayn_lalit.dds"
			ai_chance = {
				value = 0
				if = {
					limit = {
							has_trait = forgiving
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = generous
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = gregarious
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = humble
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = trusting
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = compassionate
					}
					add = 5
				}
				if = {
					limit = {
						any_sub_realm_county = {
							faith = faith:faith_lalit
						}
					}
					add = 10
				}
			}
		}
		### Vinaleem
		item = {
			value = choose_vinaleem
			is_valid = {
				NOT = { faith = faith:faith_vinaleem }
			}
			current_description = choose_vinaleem_desc
			localization = choose_vinaleem_name
			icon = "gfx/interface/icons/faith/custom_sirayn_vinaleem.dds"
			ai_chance = {
				value = 0
				if = {
					limit = {
							has_trait = lustful
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = gluttonous
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = fickle
					}
					add = 5
				}
				if = { # Seducers follow the seducer faith
					limit = {
							has_trait = seducer
					}
					add = 20
				}
				if = {
					limit = {
						any_sub_realm_county = {
							faith = faith:faith_vinaleem
						}
					}
					add = 10
				}
			}
		}

		### Markur
		item = {
			value = choose_markur
			is_valid = {
				NOT = { faith = faith:faith_markur }
			}
			current_description = choose_markur_desc
			localization = choose_markur_name
			icon = "gfx/interface/icons/faith/custom_sirayn_markur.dds"
			ai_chance = {
				value = 0
				if = {
					limit = {
							has_trait = shy
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = patient
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = temperate
					}
					add = 5
				}
				if = {
					limit = {
						any_sub_realm_county = {
							faith = faith:faith_markur
						}
					}
					add = 10
				}
			}
		}
		### Garauda
		item = {
			value = choose_sirayn_garauda
			is_valid = {
				NOT = { faith = faith:faith_sirayn_garauda }
			}
			current_description = choose_sirayn_garauda_desc
			localization = choose_sirayn_garauda_name
			icon = "gfx/interface/icons/faith/custom_sirayn_garauda.dds"
			ai_chance = {
				value = 0
				if = {
					limit = {
							has_trait = diligent
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = content
					}
					add = 5
				}
				if = {
					limit = {
						any_sub_realm_county = {
							faith = faith:faith_sirayn_garauda
						}
					}
					add = 10
				}
			}
		}
		### Yom
		item = {
			value = choose_yom
			is_valid = {
				NOT = { faith = faith:faith_yom }
			}
			current_description = choose_yom_desc
			localization = choose_yom_name
			icon = "gfx/interface/icons/faith/custom_sirayn_yom.dds"
			ai_chance = {
				value = 0
				if = {
					limit = {
							has_trait = vengeful
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = paranoid
					}
					add = 5
				}
				if = { # Witches follow the witch faith
					limit = {
							has_trait = witch
					}
					add = 50
				}
				if = { # To show reactionary sentiment
					limit = {
						any_sub_realm_county = {
							faith = faith:faith_arienism
						}
					}
					add = 20
				}
				if = {
					limit = {
						any_sub_realm_county = {
							faith = faith:faith_yom
						}
					}
					add = 10
				}
				
			}
		}
		### Ulokan
		item = {
			value = choose_ulokan
			is_valid = {
				NOT = { faith = faith:faith_ulokan }
			}
			current_description = choose_ulokan_desc
			localization = choose_ulokan_name
			icon = "gfx/interface/icons/faith/custom_sirayn_ulokan.dds"
			ai_chance = {
				value = 0
				if = {
					limit = {
							has_trait = fickle
					}
					add = 5
				}
				if = { # Mariners follow the mariner faith
					limit = {
							has_trait = lifestyle_mariner
					}
					add = 40
				}
				if = { # Lynerians are always coastal
					limit = {
						OR = {
							culture = culture:lynerian
							culture = { any_parent_culture_or_above = { this = culture:lynerian } }
						}
					}
					add = 50
				}
				if = {
					limit = {
						any_sub_realm_county = {
							faith = faith:faith_ulokan
						}
					}
					add = 10
				}
			}
		}
		### Anhur
		item = {
			value = choose_anhur
			is_valid = {
				NOT = { faith = faith:faith_anhur }
				liege.capital_county.title_province ?= {
							geographical_region = middleearth_harad_bayoformal_harshandatt
					}
			}
			current_description = choose_anhur_desc
			localization = choose_anhur_name
			icon = "gfx/interface/icons/faith/custom_harshandatt_anhur.dds"
			ai_chance = {
				value = 0
				if = { # Really only a thing among communities with Muranian influence
					limit = {
						OR = {
							culture = culture:muranian
							culture = { any_parent_culture_or_above = { this = culture:muranian } }
						}
					}
					add = 50
				}
				if = {
					limit = {
						any_sub_realm_county = {
							faith = faith:faith_anhur
						}
					}
					add = 10
				}
			}
		}
		### Shyra
		item = {
			value = choose_shyra
			is_valid = {
				NOT = { faith = faith:faith_shyra }
			}
			current_description = choose_shyra_desc
			localization = choose_shyra_name
			icon = "gfx/interface/icons/faith/custom_sirayn_shyra.dds"
			ai_chance = {
				value = 0
				if = {
					limit = {
							has_trait = sadistic
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = arrogant
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = vengeful
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = brave
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = wrathful
					}
					add = 5
				}
				if = { # Bulgans go unga bunga
					limit = {
						OR = {
							culture = culture:bulgan
						}
					}
					add = 30
				}
				if = {
					limit = {
						any_sub_realm_county = {
							faith = faith:faith_shyra
						}
					}
					add = 10
				}
			}
		}
		### Taimaraud
		item = {
			value = choose_taimaraud
			is_valid = {
				NOT = { faith = faith:faith_taimaraud }
			}
			current_description = choose_taimaraud_desc
			localization = choose_taimaraud_name
			icon = "gfx/interface/icons/faith/custom_sirayn_taimaraud.dds"
			ai_chance = {
				value = -10 # Shouldn't be popular
				if = {
					limit = {
							has_trait = eccentric
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = temperate
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = callous
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = just
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = vengeful
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = deceitful
					}
					add = 5
				}
				if = {
					limit = {
							has_trait = cynical
					}
					add = 5
				}
				if = { # Schemers follow the schemer faith
					limit = {
							has_trait = schemer
					}
					add = 20
				}
				if = {
					limit = {
						any_sub_realm_county = {
							faith = faith:faith_taimaraud
						}
					}
					add = 10
				}
			}
		}
	}

	effect = {
		if = {
			limit = { scope:choose_markur = yes }
			
			if = {
				limit = {
					capital_county.faith = faith
				}
				capital_county = { set_county_faith = faith:faith_markur }
			}
			show_as_tooltip = { set_character_faith = faith:faith_markur }
			hidden_effect = {
				set_character_faith_with_conversion = faith:faith_markur
			}
			faith:faith_markur = {
				change_fervor = {
					value = 5
					desc = fervor_gain_sirayn_fervor
				}
			}
		}
		else_if = {
			limit = { scope:choose_sirayn_garauda = yes  }
			
			if = {
				limit = {
					capital_county.faith = faith
				}
				capital_county = { set_county_faith = faith:faith_sirayn_garauda }
			}
			show_as_tooltip = { set_character_faith = faith:faith_sirayn_garauda }
			hidden_effect = {
				set_character_faith_with_conversion = faith:faith_sirayn_garauda
			}
			faith:faith_sirayn_garauda = {
				change_fervor = {
					value = 5
					desc = fervor_gain_sirayn_fervor
				}
			}
		}
		else_if = {
			limit = { scope:choose_mirsaya = yes  }
			
			if = {
				limit = {
					capital_county.faith = faith
				}
				capital_county = { set_county_faith = faith:faith_mirsaya }
			}
			show_as_tooltip = { set_character_faith = faith:faith_mirsaya }
			hidden_effect = {
				set_character_faith_with_conversion = faith:faith_mirsaya
			}
			faith:faith_mirsaya = {
				change_fervor = {
					value = 5
					desc = fervor_gain_sirayn_fervor
				}
			}
		}
		else_if = {
			limit = { scope:choose_num = yes  }
			
			if = {
				limit = {
					capital_county.faith = faith
				}
				capital_county = { set_county_faith = faith:faith_num }
			}
			show_as_tooltip = { set_character_faith = faith:faith_num }
			hidden_effect = {
				set_character_faith_with_conversion = faith:faith_num
			}
			faith:faith_num = {
				change_fervor = {
					value = 5
					desc = fervor_gain_sirayn_fervor
				}
			}
		}
		else_if = {
			limit = { scope:choose_lalit = yes  }
			
			if = {
				limit = {
					capital_county.faith = faith
				}
				capital_county = { set_county_faith = faith:faith_lalit }
			}
			show_as_tooltip = { set_character_faith = faith:faith_lalit }
			hidden_effect = {
				set_character_faith_with_conversion = faith:faith_lalit
			}
			faith:faith_lalit = {
				change_fervor = {
					value = 5
					desc = fervor_gain_sirayn_fervor
				}
			}
		}
		else_if = {
			limit = { scope:choose_vinaleem = yes  }
			
			if = {
				limit = {
					capital_county.faith = faith
				}
				capital_county = { set_county_faith = faith:faith_vinaleem }
			}
			show_as_tooltip = { set_character_faith = faith:faith_vinaleem }
			hidden_effect = {
				set_character_faith_with_conversion = faith:faith_vinaleem
			}
			faith:faith_vinaleem = {
				change_fervor = {
					value = 5
					desc = fervor_gain_sirayn_fervor
				}
			}
		}
		else_if = {
			limit = { scope:choose_yom = yes  }
			
			if = {
				limit = {
					capital_county.faith = faith
				}
				capital_county = { set_county_faith = faith:faith_yom }
			}
			show_as_tooltip = { set_character_faith = faith:faith_yom }
			hidden_effect = {
				set_character_faith_with_conversion = faith:faith_yom
			}
			faith:faith_yom = {
				change_fervor = {
					value = 5
					desc = fervor_gain_sirayn_fervor
				}
			}
		}
		else_if = {
			limit = { scope:choose_ulokan = yes  }
			
			if = {
				limit = {
					capital_county.faith = faith
				}
				capital_county = { set_county_faith = faith:faith_ulokan }
			}
			show_as_tooltip = { set_character_faith = faith:faith_ulokan }
			hidden_effect = {
				set_character_faith_with_conversion = faith:faith_ulokan
			}
			faith:faith_ulokan = {
				change_fervor = {
					value = 5
					desc = fervor_gain_sirayn_fervor
				}
			}
		}
		else_if = {
			limit = { scope:choose_anhur = yes  }
			
			if = {
				limit = {
					capital_county.faith = faith
				}
				capital_county = { set_county_faith = faith:faith_anhur }
			}
			show_as_tooltip = { set_character_faith = faith:faith_anhur }
			hidden_effect = {
				set_character_faith_with_conversion = faith:faith_anhur
			}
			faith:faith_anhur = {
				change_fervor = {
					value = 5
					desc = fervor_gain_sirayn_fervor
				}
			}
		}
		else_if = {
			limit = { scope:choose_shyra = yes  }
			
			if = {
				limit = {
					capital_county.faith = faith
				}
				capital_county = { set_county_faith = faith:faith_shyra }
			}
			show_as_tooltip = { set_character_faith = faith:faith_shyra }
			hidden_effect = {
				set_character_faith_with_conversion = faith:faith_shyra
			}
			faith:faith_shyra = {
				change_fervor = {
					value = 5
					desc = fervor_gain_sirayn_fervor
				}
			}
		}
		else_if = {
			limit = { scope:choose_shyra = yes  }
			
			if = {
				limit = {
					capital_county.faith = faith
				}
				capital_county = { set_county_faith = faith:faith_shyra }
			}
			show_as_tooltip = { set_character_faith = faith:faith_shyra }
			hidden_effect = {
				set_character_faith_with_conversion = faith:faith_shyra
			}
			faith:faith_shyra = {
				change_fervor = {
					value = 5
					desc = fervor_gain_sirayn_fervor
				}
			}
		}
		else_if = {
			limit = { scope:choose_taimaraud = yes  }
			
			if = {
				limit = {
					capital_county.faith = faith
				}
				capital_county = { set_county_faith = faith:faith_taimaraud }
			}
			show_as_tooltip = { set_character_faith = faith:faith_taimaraud }
			hidden_effect = {
				set_character_faith_with_conversion = faith:faith_taimaraud
			}
			faith:faith_taimaraud = {
				change_fervor = {
					value = 5
					desc = fervor_gain_sirayn_fervor
				}
			}
		}
		capital_county = {
			add_county_modifier = {
				modifier = religious_settler_influx
				years = 10
			}
		}
	}
	
	cost = {
		piety = {
			value = major_piety_value
		}
	}
	
	ai_potential = {
		highest_held_title_tier >= tier_county
		is_landed = yes
		is_at_war = no
	}

	ai_will_do = {
		base = 20
		
		modifier = {
			add = {
				value = ai_zeal
				multiply = -0.5
			}
		}
		
		modifier = {
			add = -20
			has_trait = craven
		}
		
		modifier = {
			add = 20
			has_trait = ambitious
		}
	}
}
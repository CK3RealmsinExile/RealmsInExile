### MORDOR DECISIONS ###

decision_strengthen_mordor_defences = {
	title = decision_strengthen_mordor_defences
	picture = {
		reference = "gfx/interface/illustrations/event_scenes/volcanic_plains.dds"
	}
	
	ai_goal = yes
	selection_tooltip = decision_strengthen_mordor_defences_tooltip
	desc = decision_strengthen_mordor_defences_desc
	confirm_text = decision_strengthen_mordor_defences_confirm
	
	cost = {
		gold = 200
	}

	decision_group_type = realms_in_exile_major
	
	is_shown = {
		# has_character_flag = witchking_strengthen_defences
		has_title = title:e_mordor
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:strengthen_mordor_defences
			}
		}
	}

	is_valid = {
		has_title = title:e_mordor
		completely_controls = title:c_minas_ithil
		title:c_minas_ithil.title_province = {
			fort_level >= 20
			building_max_garrison >= 2000
		}
		completely_controls = title:c_morannon
		title:c_morannon.title_province = {
			fort_level >= 20
			building_max_garrison >= 2000
		}
		completely_controls = title:c_nargil
		title:c_nargil.title_province = {
			fort_level >= 15
			building_max_garrison >= 1000
		}
	}

	is_valid_showing_failures_only = {
		is_adult = yes
		is_available = yes
		is_at_war = no
	}
	
	effect = {	
		title:c_minas_ithil = {
			change_development_level = 5
		}
		# title:c_minas_ithil.title_province = {
		# 	add_building_if_possible = { BUILDING = hill_forts_04 } 
		# 	add_building_if_possible = { BUILDING = furnaces_02 }
		# }
		title:c_morannon = {
			change_development_level = 5
		}
		# title:c_morannon.title_province = {
		# 	add_building_if_possible = { BUILDING = curtain_walls_05 } 
		# 	add_building_if_possible = { BUILDING = slave_mines_01 }
		# }
		add_character_modifier = {
			modifier = mordor_secured
			years = 20
		}
		trigger_event = {
			id = mordor.1001
			days = 1
		}	
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:strengthen_mordor_defences
		}		
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 50
	}
}

decision_despoil_ithilien = {
	title = decision_despoil_ithilien
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_dol_guldur_desecrate.dds"
	}
	
	ai_goal = yes
	selection_tooltip = decision_despoil_ithilien_tooltip
	desc = decision_despoil_ithilien_desc
	confirm_text = decision_despoil_ithilien_confirm
	
	cost = {
		prestige = 500
		piety = 250
	}

	decision_group_type = realms_in_exile_major
	
	is_shown = {
		# has_character_flag = witchking_despoil_ithilien
		has_title = title:e_mordor
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_despoil_ithilien
			}
		}
	}

	is_valid = {

		title:k_ithilien = {
			any_de_jure_county = {
				holder = root
				title_province = {
					has_building_or_higher = logging_camps_01
				}
				count = 4
			}
		}

		# completely_controls = title:c_othnir
		# title:c_othnir.title_province = {
		# 	has_building_or_higher = logging_camps_01
		# }

		# completely_controls = title:c_curedain
		# title:c_curedain.title_province = {
		# 	has_building_or_higher = logging_camps_01
		# }

		# completely_controls = title:c_faedur
		# title:c_faedur.title_province = {
		# 	has_building_or_higher = logging_camps_01
		# }

		# completely_controls = title:c_coruvegil
		# title:c_coruvegil.title_province = {
		# 	has_building_or_higher = logging_camps_01
		# }
		#title:c_coruvegil = { development_level >= 1 }
		dread >= 50
	}

	is_valid_showing_failures_only = {
		is_adult = yes
		is_available = yes
		is_at_war = no
	}
	
	effect = {	
		# title:c_othnir.title_province = {
		# 	set_holding_type = castle_holding
		# 	add_building_if_possible = { BUILDING = logging_camps_01 }
		# }
		# title:c_curedain.title_province = {
		# 	set_holding_type = castle_holding
		# 	add_building_if_possible = { BUILDING = logging_camps_01 }
		# }
		# title:c_coruvegil.title_province = {
		# 	set_holding_type = castle_holding
		# 	add_building_if_possible = { BUILDING = logging_camps_01 }
		# }
		# title:c_faedur.title_province = {
		# 	set_holding_type = castle_holding
		# 	add_building_if_possible = { BUILDING = logging_camps_01 }
		# }
		add_dread = major_dread_gain
		add_short_term_gold = 200
		title:k_ithilien = {
			every_de_jure_county = {
				limit = { 
					NOT = {
						duchy = title:d_minas_ithil
					}
					OR = {
						holder.top_liege = root
						any_neighboring_county = {
							holder.top_liege = root
						}
					}
				}
				change_development_level = -2
			}
		}
		add_character_modifier = {
			modifier = timber_of_ithilien
			years = 5
		}
		trigger_event = {
			id = mordor.1007
			days = 1
		}	
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_despoil_ithilien
		}		
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 50
	}
}

decision_new_breed_of_orcs = {
	title = decision_new_breed_of_orcs
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_orcs_02.dds"
	}
	
	ai_goal = yes
	selection_tooltip = decision_new_breed_of_orcs_tooltip
	desc = decision_new_breed_of_orcs_desc
	confirm_text = decision_new_breed_of_orcs_confirm
	
	cost = {
		gold = 500
	}

	decision_group_type = realms_in_exile_major
	
	is_shown = {
		has_title = title:e_mordor
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:new_breed_of_orcs
			}
		}
	}

	is_valid = {
		has_title = title:e_mordor
		completely_controls = title:c_minas_ithil
		completely_controls = title:c_morannon

		current_military_strength >= 20000 # 20k troops
	}

	is_valid_showing_failures_only = {
		is_adult = yes
		is_available = yes
		is_at_war = no
	}
	
	effect = {	
		custom_tooltip = decision_new_breed_of_orcs_tt
		root.culture = { 
			add_innovation ?= innovation_bombard
			add_innovation ?= innovation_standing_armies
		}
		trigger_event = {
			id = mordor.1002
			days = 1
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:new_breed_of_orcs
		}			
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 50
	}
}

decision_reorganize_nurn = {
	title = decision_reorganize_nurn
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_nazgul_01.dds"
	}
	
	ai_goal = yes
	selection_tooltip = decision_reorganize_nurn_tooltip
	desc = decision_reorganize_nurn_desc
	confirm_text = decision_reorganize_nurn_confirm
	
	cost = {
		prestige = massive_prestige_value
		piety = massive_piety_value
	}

	decision_group_type = realms_in_exile_major
	
	is_shown = {
		has_title = title:e_mordor
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:reorganize_nurn
			}
		}
	}

	is_valid = {
		has_title = title:e_mordor
		completely_controls = title:k_nurn
		custom_tooltip = {
			text = all_nurniags_are_cowed_tt
			title:k_nurn = {
				any_de_jure_county_holder = {
					OR = {
						# Fake limit
						primary_title.tier < tier_duchy #Ignore counts
						this = root # Ignore you
						culture != culture:nurniag # Only look at Nurniags
						
						# All Nurniag duchy or above rulers -
						has_dread_level_towards = { # are terrified of you
							target = root
							level = 2
						}
						opinion = { # Love you
							target = root
							value >= 80
					}
					}
					count = all
				}
			}
		}
	}

	is_valid_showing_failures_only = {
		is_adult = yes
		is_available = yes
		is_at_war = no
	}
	
	effect = {
		custom_tooltip = decision_reorganize_nurn_tt
		trigger_event = {
			id = mordor.1003
			days = 1
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:reorganize_nurn
		}			
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 50
	}
}

decision_develop_industry = {
	title = decision_develop_industry
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_nazgul_01.dds"
	}
	
	ai_goal = yes
	selection_tooltip = decision_develop_industry_tooltip
	desc = decision_develop_industry_desc
	confirm_text = decision_develop_industy_confirm
	
	cost = {
		gold = 400
	}

	decision_group_type = realms_in_exile_major
	
	is_shown = {
		has_title = title:e_mordor
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:develop_industry
			}
		}
	}

	is_valid = {
		has_title = title:e_mordor
		completely_controls = title:k_gorgoroth
		monthly_character_income >= 30
		any_sub_realm_barony = {
			kingdom = title:k_gorgoroth
			title_province = {
				OR = {
					has_building_or_higher = slave_mines_04
					has_building_or_higher = slave_farms_04
					has_building_or_higher = furnaces_04
				}
			}
			count = 5
		}
		title:k_gorgoroth = {
			any_de_jure_county = {
				development_level = 10
				percent = 0.5
			}
		}
	}

	is_valid_showing_failures_only = {
		is_adult = yes
		is_available = yes
		is_at_war = no
	}
	
	effect = {
		title:k_gorgoroth = {
			every_de_jure_county = {
				limit = {
					development_level >= 6
				}
				add_county_modifier = {
					modifier = industrial_boom
					years = 10
				}
				title_province = {
					add_province_modifier = {
						modifier = industrial_boom_province_modifier
						years = 10
					}
				}
			}
		}
		trigger_event = {
			id = mordor.1003 # Replace
			days = 1
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:develop_industry
		}			
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 50
	}
}

decision_return_of_sauron = {
	title = decision_return_of_sauron
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_mordor_02.dds"
	}
	
	ai_goal = yes
	selection_tooltip = decision_return_of_sauron_tooltip
	desc = decision_return_of_sauron_desc
	confirm_text = decision_return_of_sauron_confirm
	
	cost = {
		prestige = massive_prestige_value
		piety = massive_piety_value
		gold = 500
	}

	decision_group_type = realms_in_exile_major
	
	is_shown = {
		#has_character_flag = witchking_return_of_sauron
		has_character_flag = witchking_long_winter
		has_title = title:e_mordor
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:return_of_sauron
			}
		}
	}

	is_valid = {
		has_title = title:e_mordor
		completely_controls = title:e_mordor
		prestige_level >= 5
		custom_tooltip = {
			text = morgul_host_raised
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:new_breed_of_orcs
			}
		}
		custom_tooltip = {
			text = mordor_defences_strengthened
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:strengthen_mordor_defences
			}
		}
		custom_tooltip = {
			text = ithilien_despoiled
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_despoil_ithilien
			}
		}
		custom_tooltip = {
			text = slave_economy_reorganized
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:reorganize_nurn
			}
		}

		monthly_character_income >= 50
	}

	is_valid_showing_failures_only = {
		is_adult = yes
		is_available = yes
		is_at_war = no
	}
	
	effect = {	
		custom_tooltip = decision_return_of_sauron_tt
		character:lineofsauron = {
			trigger_event = {
				id = mordor.1006
				days = 1
			}
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:return_of_sauron
		}			
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 50
	}
}

decision_sauron_reveal_yourself = {
	title = decision_sauron_reveal_yourself
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_mordor_02.dds"
	}
	
	ai_goal = no
	selection_tooltip = decision_sauron_reveal_yourself_tooltip
	desc = decision_sauron_reveal_yourself_desc
	confirm_text = decision_sauron_reveal_yourself_confirm
	
	decision_group_type = realms_in_exile_minor
	
	is_shown = {
		has_character_flag = unknown_sauron_flag
	}
	
	is_valid = {
		has_title = title:c_amon_lanc
	}
	
	effect = {
		hidden_effect = { change_first_name = "Sauron" }
		give_nickname = nick_the_deceiver_sauron
		custom_tooltip = decision_sauron_reveal_yourself_tt
		remove_character_flag = unknown_sauron_flag
		trigger_event = mordor.1013
		every_neighboring_realm_same_rank_owner = {
			trigger_event = { id = mordor.1014 days = 2 }
		}
		title:k_lasgalen.holder = { trigger_event = { id = mordor.1014 days = 2 } }
		title:k_lothlorien.holder =  { trigger_event = { id = mordor.1014 days = 2 } }
	}
	ai_potential = {
		always = yes
	}
	ai_check_interval = 0
	ai_will_do = {
		base = 0
	}
}
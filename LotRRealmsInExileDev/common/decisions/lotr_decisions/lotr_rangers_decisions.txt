### Eradan Decisions ###

# Travel to Bree at Aragorn's behest
decision_eradan_bree = {
	sort_order = 100
	title = decision_eradan_bree
	picture = {
		reference ="gfx/interface/illustrations/decisions/decision_breeland.dds"
	}
	selection_tooltip = decision_eradan_bree_tooltip
	desc = decision_eradan_bree_desc
	confirm_text = decision_eradan_bree_confirm

	decision_group_type = realms_in_exile_minor

	is_shown = {
		is_landless_adventurer = yes
		has_character_flag = eradan_delay_bree
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_eradan_bree
			}
		}
	}
		
	is_valid = {
		is_at_war = no
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
	}
	
	effect = {
		custom_tooltip = decision_eradan_bree.tt
		
		start_travel_plan = { #Travel to Bree
			destination = title:c_bree.title_province
			players_use_planner = no
			on_arrival_event = rangers.0401
		}
		hidden_effect = { #give free caravan master
			if = {
				limit = { NOT = { employs_court_position = travel_leader_court_position } }
				create_character = {
					template = foreign_architect_template
					employer = root
					save_scope_as = caravan_master
				}
				appoint_court_position = {
					recipient = scope:caravan_master
					court_position = travel_leader_court_position
				}
			}
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_eradan_bree
		}
	}

	# AI value
	ai_goal = yes
	ai_potential = { always = yes }
	ai_will_do = { base = 100 }
}

### Regain lost story contracts ###
decision_continue_adventure_eradan = {
	sort_order = 100
	title = decision_continue_adventure_eradan
	picture = {
		reference ="gfx/interface/illustrations/decisions/decision_eagles_01.dds"
	}
	selection_tooltip = decision_continue_adventure_eradan_tooltip
	desc = decision_continue_adventure_eradan_desc
	confirm_text = decision_continue_adventure_eradan_confirm

	decision_group_type = realms_in_exile_minor
	
	sort_order = 1000

	is_shown = {
		is_landless_adventurer = yes
		is_travelling = no
		OR = {
			has_character_flag = eradan_ready_for_rhunlest
			has_character_flag = eradan_ready_for_barrows
			has_character_flag = eradan_ready_for_imladris
			has_character_flag = eradan_ready_for_ettenmoors
			has_character_flag = eradan_ready_for_gundabad
		}
		NOR = {
			root.domicile.domicile_location = province:4775 # Sarn Ford
			root.domicile.domicile_location = province:4749 # Bree
			root.domicile.domicile_location = province:4645 # Barrow-downs
			root.domicile.domicile_location = province:4337 # Imladris
		}
	}
		
	is_valid = {
		is_at_war = no
		is_travelling = no
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
	}
	
	effect = {
		custom_tooltip = decision_continue_adventure_eradan_tt
		
		if = {
			limit = { has_character_flag = eradan_ready_for_rhunlest }
			hidden_effect = {
				root = {
					create_task_contract = {
						task_contract_type = lotr_eradan_contract_fornost
						task_contract_employer = title:d_northern_dunedain.holder
						location = title:c_rhunlest.title_province
						task_contract_tier = 4
						save_scope_as = created_contract
					}
				}
			}
		}
		else_if = {
			limit = { has_character_flag = eradan_ready_for_barrows }
			hidden_effect = {
				root = {
					create_task_contract = {
						task_contract_type = lotr_eradan_contract_barrowdowns
						task_contract_employer = title:c_adandor.holder
						location = title:c_dol_daergorthad.title_province
						task_contract_tier = 4
						save_scope_as = created_contract
					}
				}
			}
		}
		else_if = {
			limit = { has_character_flag = eradan_ready_for_imladris }
			hidden_effect = {
				root = {
					create_task_contract = {
						task_contract_type = lotr_eradan_contract_rivendell
						task_contract_employer = title:c_imladris.holder
						location = title:c_imladris.title_province
						task_contract_tier = 4
						save_scope_as = created_contract
					}
				}
			}
		}
		else_if = {
			limit = { has_character_flag = eradan_ready_for_ettenmoors }
			hidden_effect = {
				root = {
					create_task_contract = {
						task_contract_type = lotr_eradan_contract_ettenmoors
						task_contract_employer = title:c_imladris.holder
						location = title:c_ettenmoors.title_province
						task_contract_tier = 4
						save_scope_as = created_contract
					}
				}
			}
		}
		else_if = {
			limit = { has_character_flag = eradan_ready_for_gundabad }
			hidden_effect = {
				root = {
					create_task_contract = {
						task_contract_type = lotr_eradan_contract_gundabad
						task_contract_employer = title:c_imladris.holder
						location = title:c_gundabad.title_province
						task_contract_tier = 4
						save_scope_as = created_contract
					}
				}
			}
		}
	}

	# AI value
	ai_goal = yes
	ai_potential = { always = yes }
	ai_will_do = { base = 100 }
}

#### Talk to Locals: Sarn Ford ###

decision_talk_to_locals_sarnford = {
	sort_order = 300
	title = decision_talk_to_locals_sarnford
	picture = {
		reference ="gfx/interface/illustrations/event_scenes/carrock.dds"
	}
	selection_tooltip = decision_talk_to_locals_sarnford_tooltip
	desc = decision_talk_to_locals_sarnford_desc
	confirm_text = decision_talk_to_locals_sarnford_confirm

	decision_group_type = realms_in_exile_minor

	is_shown = {
		is_landless_adventurer = yes
		has_character_flag = eradan_locals_sarnford
		is_travelling = no
		root.domicile.domicile_location = province:4775 # Sarn Ford
	}
		
	is_valid = {
		is_at_war = no
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
	}
	
	effect = {
		custom_tooltip = decision_talk_to_locals_sarnford_tt
		trigger_event = rangers.0701
	}

	# AI value
	ai_goal = yes
	ai_potential = { always = yes }
	ai_will_do = { base = 100 }
}

### Talk to Locals: Bree ###

decision_talk_to_locals_bree = {
	sort_order = 300
	title = decision_talk_to_locals_bree
	picture = {
		reference ="gfx/interface/illustrations/decisions/decision_bree_02.dds"
	}
	selection_tooltip = decision_talk_to_locals_bree_tooltip
	desc = decision_talk_to_locals_bree_desc
	confirm_text = decision_talk_to_locals_bree_confirm

	decision_group_type = realms_in_exile_minor

	is_shown = {
		is_landless_adventurer = yes
		has_character_flag = eradan_locals_bree
		is_travelling = no
		root.domicile.domicile_location = province:4749 # Bree
	}
		
	is_valid = {
		is_at_war = no
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
	}
	
	effect = {
		custom_tooltip = decision_talk_to_locals_bree_tt
		trigger_event = rangers.0711
	}

	# AI value
	ai_goal = yes
	ai_potential = { always = yes }
	ai_will_do = { base = 100 }
}

### Talk to Locals: Imladris ###

decision_talk_to_locals_imladris = {
	sort_order = 300
	title = decision_talk_to_locals_imladris
	picture = {
		reference ="gfx/interface/illustrations/decisions/decision_council_of_elrond_01.dds"
	}
	selection_tooltip = decision_talk_to_locals_imladris_tooltip
	desc = decision_talk_to_locals_imladris_desc
	confirm_text = decision_talk_to_locals_imladris_confirm

	decision_group_type = realms_in_exile_minor
	
	is_shown = {
		is_landless_adventurer = yes
		has_character_flag = eradan_locals_imladris
		is_travelling = no
		root.domicile.domicile_location = province:4337 # Rivendell
	}
		
	is_valid = {
		is_at_war = no
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
	}
	
	effect = {
		custom_tooltip = decision_talk_to_locals_imladris_tt
		trigger_event = rangers.0721
	}

	# AI value
	ai_goal = yes
	ai_potential = { always = yes }
	ai_will_do = { base = 100 }
}
### Rhovanion Decisions ###
 
decision_restore_rhovanion = {
	title = decision_restore_rhovanion
	picture = "gfx/interface/illustrations/decisions/decision_rhovanion_01.dds"
	major = yes
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_restore_rhovanion_tooltip
	desc = decision_restore_rhovanion_desc
	confirm_text = decision_restore_rhovanion_confirm
	is_shown = { # Available only to those with the cultural tradition symbolized the scattered heirs to the Kingdom of Rhovanion who still remember it
		culture = { 
			has_cultural_tradition = tradition_a_scattered_people 
			has_cultural_pillar = heritage_northron
		}
		
		is_independent_ruler = yes
		
		NOR = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_restore_rhovanion
			}		
			#has_title = title:k_dale # The Kings of Dale have no interest in reviving Rhovanion
			#has_title = title:k_dorwinion # The Realm-Masters of Dale have no interest in reviving Rhovanion
		}
	}
	
	is_valid = {
		prestige_level >= high_prestige_level
		completely_controls = title:d_heahand # Completely controls the old heartland of the Kingdom
		completely_controls = title:d_east_bight
		realm_size >= 25
		highest_held_title_tier < tier_kingdom
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	effect = {
		get_title = title:k_rhovanion
		custom_tooltip = rhovanion_formation_drift_tooltip

		root.dynasty = {
			add_dynasty_modifier = {
				modifier = heir_of_vidugavia
				years = 50
			}
		}
		
		province:3826 = {
			add_special_building_slot = wonder_high_hall_alcisbaurg
		}

		# Removed 'Scattered People' and add 'A People Reforged'
		root.culture = {
			custom_tooltip = {
				text = decision_remove_rhovannorim_tradition_1
				remove_culture_tradition = tradition_a_scattered_people
			}
		}
		root.culture = {
			custom_tooltip = {
				text = decision_rhovannorim_new_tradition_1
				add_culture_tradition = tradition_a_people_reforged
			}
		}

		if = {
			limit = { government_has_flag = government_is_tribal }
			convert_whole_realm_to_feudalism_effect = yes
			add_realm_law_skip_effects = crown_authority_1
			root.dynasty = {
				add_dynasty_prestige = 500
			}
		}
		else_if = {
			limit = { 
				OR = {
					government_has_flag = government_is_clan
					government_has_flag = government_is_feudal
				}
			}
			root.dynasty = {
				add_dynasty_prestige = 500
			}
			if = {
				limit ={
					NOR = {
						has_realm_law = crown_authority_2
						has_realm_law = crown_authority_3
					}
				}
				add_realm_law_skip_effects = crown_authority_3
			}
			add_piety = 1000
			add_prestige = 1000
		}

		hidden_effect = {
			title:d_heahand = {
				set_de_jure_liege_title = title:k_rhovanion
			}
			title:d_east_bight = {
				set_de_jure_liege_title = title:k_rhovanion
			}
			if = {
				limit = {
					completely_controls = title:d_anthardor
				}
				title:d_anthardor = {
					set_de_jure_liege_title = title:k_rhovanion
				}
			}
			if = {
				limit = {
					completely_controls = title:d_sunnarinna
				}
				title:d_sunnarinna = {
					set_de_jure_liege_title = title:k_rhovanion
				}
			}
			if = {
				limit = {
					completely_controls = title:d_rinnavuld
				}
				title:d_rinnavuld = {
					set_de_jure_liege_title = title:k_rhovanion
				}
			}
			title:k_rhovanion = {
				set_de_jure_liege_title = title:e_rhovanion
			}
		}
		
		set_primary_title_to = title:k_rhovanion

		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_restore_rhovanion
		}
		title:k_rhovanion.holder = {
			save_scope_as = vidugavia_heir
		}
		if = { # Lords of Bridle and Wind | Achievement
			limit = {
				is_ai = no
				NOT = { exists = global_var:lotr_achievement_11 }
				realms_achievements_enabled = yes
			}
			set_global_variable = lotr_achievement_11
		}
	}
}

decision_reclaim_rhovanion_plains = {
	title = decision_reclaim_rhovanion_plains
	picture = "gfx/interface/illustrations/decisions/decision_rhovanion_02.dds"
	major = yes
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_reclaim_rhovanion_plains_tooltip
	desc = decision_reclaim_rhovanion_plains_desc
	confirm_text = decision_reclaim_rhovanion_plains_confirm
	is_shown = {
		culture = { 
			has_cultural_tradition = tradition_a_people_reforged
			has_cultural_pillar = heritage_northron
		}
		
		is_independent_ruler = yes
		
		NOR = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_reclaim_rhovanion_plains
			}
		}
	}
	
	is_valid = {
		prestige_level >= very_high_prestige_level
		completely_controls_region = custom_plains_rhovanion
		highest_held_title_tier < tier_empire
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	effect = {
		get_title = title:e_rhovanion
		root.dynasty = {
			add_dynasty_prestige_level = 1
		}
		add_prestige = 2500

		add_character_modifier = {
			modifier = savior_of_rhovanion
		}

		# Removed 'Scattered People' and add 'A People Reforged'
		root.culture = {
			custom_tooltip = {
				text = decision_remove_rhovannorim_tradition_2
				remove_culture_tradition = tradition_a_people_reforged
			}
		}
		root.culture = {
			custom_tooltip = {
				text = decision_rhovannorim_new_tradition_2
				add_culture_tradition = tradition_the_people_of_the_plains
			}
		}

		# every_county = { # JAMIE PLEASE HELP ME - Vector
		# 	custom = rhovanion_resettlement_culture_counties_custom
		# 	any_county_in_region = {
		# 		region = custom_plains_rhovanion
		# 		if = {
		# 			limit = {
		# 				OR = {
		# 					holder = root
		# 					holder.top_liege = root
		# 				}
		# 				culture = { 
		# 					OR = {
		# 						has_cultural_pillar = heritage_igath
		# 						has_cultural_pillar = heritage_ioriag
		# 						has_culture_pillar = heritage_northron
		# 					}
		# 				}
		# 			}
					
		# 		random = {
		# 			chance = 50
		# 			set_county_culture = root.culture
		# 		}
		# 		}
		# 	}
		# }

		hidden_effect = {
			if = {	
				limit = {
					root.culture = culture:rhovannic
				}
				title:e_rhovanion = {
					set_capital_county = title:c_alcisbaurg
				}
			}
		}

		
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_reclaim_rhovanion_plains
		}

		#trigger_event = {
		#	id = rhovanion.0102
		#	days = 1
		#}
	}
}
### Gondor Decisions ###

decision_gondor_regnal_names = {
	sort_order = 25
	title = decision_gondor_regnal_names
	picture = "gfx/interface/illustrations/decisions/decision_minas_tirith_01.dds"
	major = yes
	ai_goal = no
	ai_check_interval = 12
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_gondor_regnal_names_tooltip
	desc = decision_gondor_regnal_names_desc
	confirm_text = decision_gondor_regnal_names_confirm
	
	is_shown = {
		culture = { has_cultural_pillar = heritage_dunedain }
		has_title = title:e_gondor
		is_male = yes
		NOT = {
			has_character_flag = has_regnal_name
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	effect = {
		custom_tooltip = decision_gondor_regnal_names_tooltip
		trigger_event = {
			id = gondor.1100
		}	
	}
}

decision_gondorian_renaissance = { # Little Gondorian Renaissance post Mordor Destroyed
	sort_order = 22
	picture = "gfx/interface/illustrations/decisions/decision_minas_tirith_01.dds"
	desc = decision_gondorian_renaissance_desc
	selection_tooltip = decision_gondorian_renaissance_tooltip
	confirm_text = decision_gondorian_renaissance_confirm
	major = yes
	ai_goal = yes

	is_shown = {
		current_year >= 6083

		culture = { has_cultural_pillar = heritage_dunedain }
		OR = {
			is_gondor = yes
			has_primary_title = title:e_numenor_in_exile
			has_primary_title = title:e_reunitedkingdom
		}
		faith_is_good = yes

		is_ruler = yes
		is_landed = yes
		culture = {
			has_cultural_era_or_later = culture_era_late_medieval
		}
		NOT = {  #Can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_gondorian_renaissance
			}
		}
		#highest_held_title_tier = 4 #Kings and Emperors only.
		NOR = {
			government_has_flag = government_is_theocracy
			government_has_flag = government_is_clan
			government_has_flag = government_is_tribal
		}
	}
	
	is_valid = {
		#Must control the royal provinces and vanquish the threat of Umbar
		completely_controls_region = custom_gondorian_heartlands
		completely_controls = title:k_umbar

		custom_tooltip = {
			text = dark_lord_is_gone.tt
			OR = {
				character:lineofsauron = {
					is_alive = no
				}
				character:lineofsauron = {
					is_landed = no
				}
			}
			#title:e_mordor.holder ?= {
			#	NOT = { faith.religion = { is_in_family = rf_forcesofevil } }
			#}
		}
		
		prestige_level >= 4
		learning >= 15
		NOT = { has_realm_law = crown_authority_0 }
		NOT = { has_realm_law = crown_authority_1 }

		#Must have basic innovations:
		#root.culture = {
		#	has_innovation = innovation_royal_prerogative
		#	has_innovation = innovation_knighthood
		#	has_innovation = innovation_windmills
		#}
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_at_war = no
	}

	cost = {
		gold = 800
		prestige = 5000
	}

	effect = {
		gondorian_renaissance_scripted_effect = yes
		if = {
			limit = { # Minor News
				has_game_rule = all_news
			}
			every_player = { #Global News Announcement
				trigger_event = news_event.0024
			}
		}

		trigger_event = gondor.3601 # Gondorian Renaissance flavour event

		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_gondorian_renaissance
			}
		}
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 15
		ai_value_modifier = {
			ai_boldness = 1.0
		}
	}
}

decision_claim_gondor_kingship = { # Allows native Gondorians to restore the Kingdom of Gondor and claim the throne in case Aragorn doesn't come back
	sort_order = 21
	picture = "gfx/interface/illustrations/decisions/decision_minas_tirith_01.dds"
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {				
					has_primary_title = title:e_gondor_steward
				}
				desc = decision_claim_gondor_kingship_stewards_desc
			}
		desc = decision_claim_gondor_kingship_desc
		}
	}
	
	selection_tooltip = decision_claim_gondor_kingship_tooltip
	confirm_text = decision_claim_gondor_kingship_confirm
	major = yes
	ai_goal = no
	ai_check_interval = 12
	ai_potential = {
		always = yes
	}
	is_shown = {
		has_title = title:e_gondor_steward
		current_year >= 6083 # After Earnur's Death
		is_independent_ruler = yes
		is_landed = yes
		#has_trait = ambitious # Maybe only for ambitious Gondorians?
		NOR = {  #Can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_claim_gondor_kingship
			}
			is_target_in_global_variable_list = { # If Aragorn has returned to Gondor... disable
				name = unavailable_unique_decisions
				target = flag:aragorn_returned_to_gondor
			}
			is_target_in_global_variable_list = { # If the Reunited Kingdom has formed... disable
				name = unavailable_unique_decisions
				target = flag:decision_reunited_kingdom
			}
			title:e_reunitedkingdom = {
				is_title_created = yes # If the Reunited Kingdom somehow exists but the decision WASN'T taken... disable
			}
			title:e_numenor_in_exile = {
				is_title_created = yes # If Numenor-in-Exile somehow exists but the decision WASN'T taken... disable
			}
			title:e_castamir = {
				is_title_created = yes # If there is a King of Gondor already, you can claim it the traditional way
			}
			title:e_gondor = {
				OR = {
					is_title_created = yes # If there is a King of Gondor already, you can claim it the traditional way
					is_titular = no # If Gondor is no longer titular... disable
				}
			}
		}
	}

	is_valid = {
		#custom_tooltip = gondor_kingship_tt_basic
		has_title = title:e_gondor_steward
		trigger_if = { # Hidden if fulfilled, to make it less crowded
			limit = {
				NOT = {
					government_has_flag = government_is_feudal
				}
			}
			government_has_flag = government_is_feudal
		}
		trigger_if = { # Hidden if fulfilled, to make it less crowded
			limit = {
				NOT = {
					culture = { has_cultural_pillar = heritage_dunedain }
				}
			}
			culture = { has_cultural_pillar = heritage_dunedain }
		}
		trigger_if = { # Hidden if fulfilled, to make it less crowded
			limit = {
				NOT = {
					faith.religion = religion:dunedain_religion
				}
			}
			faith.religion = religion:dunedain_religion
		}
		#sub_realm_size >= 75
		#highest_held_title_tier >= tier_kingdom
		legitimacy_level >= 5
		prestige_level >= 3
		completely_controls_region = custom_gondorian_heartlands # Juke note: Should cover the important bits
		any_powerful_vassal = {
			count = all
			OR = {
				opinion = {
					target = root
					value >= 80
				}
				#root = { has_strong_hook = prev } # Throws errors
			}
		}
		trigger_if = {
			limit = {
				house = house:house_gondorstewards
			}
			custom_tooltip = {
				text = gondor_kingship_tt_extra_requirement
				OR = {
					has_trait = ambitious
					has_trait = arrogant
					has_trait = arbitrary
				}
			}
		}
		#any_vassal = {
		#	count = all
		#	OR = {
		#		opinion = {
		#			target = root
		#			value >= 75
		#		}
		#		# root = { has_strong_hook = prev }
		#	}
		#}
	
		### Dynamic Requirements
		# by Juke
		# Must aquire a certain amount of "Points
		# Some requirements count as multiple points and are duplicate
		
		custom_tooltip = gondor_kingship_tt_points
		calc_true_if = { # Dynamic Requirements
			amount >= 5
			
			### 3 Points
			# Anarion or Isildur Dynasty
			custom_description = {
				text = gondor_kingship_tt_dynasty
				subject = character:lineofanarion1
				object = character:lineisildur0
				OR = {
					dynasty = character:lineofanarion1.dynasty
					dynasty = character:lineisildur0.dynasty
				}
			}
			custom_tooltip = {
				text = gondor_kingship_tt_hidden
				OR = {
					dynasty = character:lineofanarion1.dynasty
					dynasty = character:lineisildur0.dynasty
				}
			}
			custom_tooltip = {
				text = gondor_kingship_tt_hidden
				OR = {
					dynasty = character:lineofanarion1.dynasty
					dynasty = character:lineisildur0.dynasty
				}
			}
			
			# Anarion legend completed on mythical level
			trigger_if = {
				limit = { 
					has_dlc_feature = legends
					is_ai = no
				}
				custom_tooltip = {
					text = finished_anarion_legend_tt
					house = { has_house_modifier = heirs_of_anarion_modifier }
				}
				custom_tooltip = {
					text = gondor_kingship_tt_hidden
					house = { has_house_modifier = heirs_of_anarion_modifier }
				}
				custom_tooltip = {
					text = gondor_kingship_tt_hidden
					house = { has_house_modifier = heirs_of_anarion_modifier }
				}
			}
			
			# Your Dynasty killed Sauron
			custom_tooltip = {
				text = gondor_kingship_tt_dark_lord
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:decision_destroy_mordor
				}
				dynasty = { has_variable = this_dynasty_killed_sauron }
			}
			custom_tooltip = {
				text = gondor_kingship_tt_hidden
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:decision_destroy_mordor
				}
				dynasty = { has_variable = this_dynasty_killed_sauron }
			}
			custom_tooltip = {
				text = gondor_kingship_tt_hidden
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:decision_destroy_mordor
				}
				dynasty = { has_variable = this_dynasty_killed_sauron }
			}
			
			### 2 Points
			# You arent, but your Mum/Dad was Anarion or Isildur Dynasty
			custom_description = {
				text = gondor_kingship_tt_parents_dynasty
				subject = character:lineofanarion1
				object = character:lineisildur0
				NOR = {
					dynasty = character:lineofanarion1.dynasty
					dynasty = character:lineisildur0.dynasty
				}
				any_parent ?= {
					OR = {
						dynasty ?= character:lineofanarion1.dynasty
						dynasty ?= character:lineisildur0.dynasty
					}
				}
			}
			custom_tooltip = {
				text = gondor_kingship_tt_hidden
				NOR = {
					dynasty = character:lineofanarion1.dynasty
					dynasty = character:lineisildur0.dynasty
				}
				any_parent ?= {
					OR = {
						dynasty ?= character:lineofanarion1.dynasty
						dynasty ?= character:lineisildur0.dynasty
					}
				}
			}
			
			# You have a claim on the Kingship
			custom_tooltip = {
				text = gondor_kingship_tt_claim_on_kingship
				any_claim = {
					OR = {
						this = title:e_gondor
						this = title:e_castamir # Included to avoid weirdness (Though it may cause weirdness? I dunno)
					}
				}
			}
			
			# Osgiliath restored (At least level 4 on both sides)
			custom_tooltip = {
				text = gondor_kingship_tt_osgiliath
				completely_controls = title:c_osgiliath
				province:202 = { has_building_or_higher = wonder_osgiliath_05 }
				province:203 = { has_building_or_higher = wonder_osgiliath_05 }
			}
			custom_tooltip = {
				text = gondor_kingship_tt_hidden
				completely_controls = title:c_osgiliath
				province:202 = { has_building_or_higher = wonder_osgiliath_05 }
				province:203 = { has_building_or_higher = wonder_osgiliath_05 }
			}
			
			### 1 Point
			# Minas Ithil rebuilt and cleansed
			custom_tooltip = {
				text = gondor_kingship_tt_minas_ithil
				completely_controls = title:c_minas_ithil
				title:c_minas_ithil = {
					NOR = {
						has_county_modifier = morgul_corruption_modifier
						has_county_modifier = fading_morgul_corruption_modifier
					}
				}
				province:226 = { has_building_or_higher = wonder_minas_ithil_03 }
			}
			
			# Dynasty has high level of splendor
			custom_tooltip = {
				text = gondor_kingship_tt_dynasty_prestige
				dynasty = { dynasty_prestige_level >= 8 }
			}
			
			# Living Legend level of Prestige
			custom_tooltip = {
				text = gondor_kingship_tt_prestige_level_5
				prestige_level >= 5
			}
			
			# High blood tier
			custom_tooltip = {
				text = gondor_kingship_tt_numenorean_blood
				has_trait_rank = {
					trait = blood_of_numenor
					rank >= 4
				}
			}
			
			# Reclaimed 2+ Gondorian Provinces
			custom_tooltip = {
				text = gondor_kingship_tt_integrated_provinces_1
				dynasty = {
					exists = var:reintegrated_provinces_counter
					var:reintegrated_provinces_counter >= 2
				}
			}
			
			# Reclaimed 3+ Gondorian Provinces
			custom_tooltip = {
				text = gondor_kingship_tt_integrated_provinces_2
				dynasty = {
					exists = var:reintegrated_provinces_counter
					var:reintegrated_provinces_counter >= 3
				}
			}
			
			# Reclaimed 4+ Gondorian Provinces
			custom_tooltip = {
				text = gondor_kingship_tt_integrated_provinces_3
				dynasty = {
					exists = var:reintegrated_provinces_counter
					var:reintegrated_provinces_counter >= 4
				}
			}
		}
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_at_war = no
	}

	cost = {
		gold = 800
		prestige = 5000
	}

	effect = {
		show_as_tooltip = {
			stewards_claim_gondor_kingship_effect = yes
		}
			trigger_event = gondor.3700
	}

	ai_will_do = {
		base = 100
		ai_value_modifier = {
			ai_boldness = 1.0
		}
	}
}

### League of Pelargir Decisions ###
decision_league_of_pelargir = {
	sort_order = 70
	title = decision_league_of_pelargir
	picture = "gfx/interface/illustrations/decisions/decision_minas_tirith_01.dds"
	major = yes
	ai_goal = no
	ai_check_interval = 72
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_league_of_pelargir_tooltip
	desc = decision_league_of_pelargir_desc
	confirm_text = decision_league_of_pelargir_confirm
	
	is_shown = {
		is_ruler = yes
		is_landed = yes
		culture = { has_cultural_pillar = heritage_dunedain }
		has_title = title:d_pelargir
		NOR = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:league_of_pelargir_decision
			}
			is_gondor = yes
			has_title = title:e_numenor_in_exile
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	is_valid = {
		is_independent_ruler = yes
		completely_controls_region = custom_pelargir_league
		prestige_level >= very_high_prestige_level
	}
	
	effect = {
		if = { # Lebenexit | Achievement
			limit = {
				NOT = { exists = global_var:lotr_achievement_57 }
				is_ai = no
				realms_achievements_enabled = yes
				primary_title = title:k_lebennin
			}
			set_global_variable = lotr_achievement_57
		}
		create_title_and_vassal_change = {
			type = created
			save_scope_as = change
			add_claim_on_loss = no
		}
		title:k_pelargir = {
			change_title_holder = {
				holder = root
				change = scope:change
			}
		}
		title:d_pelargir = {
			set_de_jure_liege_title = title:k_pelargir
		}
		title:d_lebennivet = {
			set_de_jure_liege_title = title:k_pelargir
		}
		title:d_tolfalas = {
			set_de_jure_liege_title = title:k_pelargir
		}
		title:d_annun = {
			set_de_jure_liege_title = title:k_pelargir
		}
		title:d_laergaladrin = {
			set_de_jure_liege_title = title:k_pelargir
		}
		title:d_harithilien = {
			set_de_jure_liege_title = title:k_pelargir
		}
		resolve_title_and_vassal_change = scope:change
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:league_of_pelargir_decision
		}
		title:c_pelargir = {
			change_development_level = 5
		}
		title:d_pelargir = {
			change_development_level = 3
		}
		title:k_pelargir = {
			set_de_jure_liege_title = title:e_numenor_colonies
		}
		destroy_title = title:k_lebennin
		custom_tooltip = league_of_pelargir_decision
	}
}

decision_colonial_belfalas = {
	sort_order = 67
	title = decision_colonial_belfalas
	picture = "gfx/interface/illustrations/decisions/decision_minas_tirith_01.dds"
	major = yes
	ai_goal = no
	ai_check_interval = 72
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_colonial_belfalas_tooltip
	desc = decision_colonial_belfalas_desc
	confirm_text = decision_colonial_belfalas_confirm
	
	is_shown = {
		is_ruler = yes
		is_landed = yes
		culture = { has_cultural_pillar = heritage_dunedain }
		has_title = title:k_pelargir
		is_target_in_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:league_of_pelargir_decision
		}
		NOT = {
			is_target_in_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:colonial_belfalas_decision
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	is_valid = {
		is_independent_ruler = yes
		completely_controls = title:k_belfalas
		prestige_level >= 3
	}
	
	effect = {
		title:k_belfalas = {
			set_de_jure_liege_title = title:e_numenor_colonies
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:colonial_belfalas_decision
		}
	}
}

decision_colonial_umbar = {
	sort_order = 66
	title = decision_colonial_umbar
	picture = "gfx/interface/illustrations/decisions/decision_minas_tirith_01.dds"
	major = yes
	ai_goal = no
	ai_check_interval = 72
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_colonial_umbar_tooltip
	desc = decision_colonial_umbar_desc
	confirm_text = decision_colonial_umbar_confirm
	
	is_shown = {
		is_ruler = yes
		is_landed = yes
		culture = { has_cultural_pillar = heritage_dunedain }
		has_title = title:k_pelargir
		is_target_in_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:league_of_pelargir_decision
		}
		NOT = {
			is_target_in_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:colonial_umbar_decision
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	is_valid = {
		is_independent_ruler = yes
		completely_controls = title:k_umbar
		prestige_level >= 3
	}
	
	effect = {
		title:k_umbar = {
			set_de_jure_liege_title = title:e_numenor_colonies
		}
		title:c_umbar = {
			change_development_level = 5
		}
		title:d_umbar = {
			change_development_level = 3
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:colonial_umbar_decision
		}
	}
}

decision_colonial_harnen = {
	sort_order = 65
	title = decision_colonial_harnen
	picture = "gfx/interface/illustrations/decisions/decision_near_harad_01.dds"
	major = yes
	ai_goal = no
	ai_check_interval = 72
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_colonial_harnen_tooltip
	desc = decision_colonial_harnen_desc
	confirm_text = decision_colonial_harnen_confirm
	
	is_shown = {
		is_ruler = yes
		is_landed = yes
		culture = { has_cultural_pillar = heritage_dunedain }
		has_title = title:k_pelargir
			AND = {
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:league_of_pelargir_decision
				}
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:harnen_kingdom_decision
				}
			NOT = {
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:colonial_harnen_decision
				}
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	is_valid = {
		is_independent_ruler = yes
		completely_controls = title:k_mirlond
		completely_controls = title:d_harfalas
		prestige_level >= 3
	}
	
	effect = {
		title:k_mirlond = {
			set_de_jure_liege_title = title:e_numenor_colonies
		}
		title:d_harfalas = {
			set_de_jure_liege_title = title:k_mirlond
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:colonial_harnen_decision
		}
	}
}

## Destroy Mordor ##
decision_destroy_mordor = {
	sort_order = 100
	title = decision_destroy_mordor
	picture = "gfx/interface/illustrations/decisions/decision_gondor_01.dds"
	major = yes
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
		modifier = { # AI will be less keen if Mordor is weaker
			factor = 0.5
			root.total_strength < title:e_mordor.holder.total_strength
		}
	}
	selection_tooltip = decision_destroy_mordor_tooltip
	desc = decision_destroy_mordor_desc
	confirm_text = decision_destroy_mordor_confirm
	
	cooldown = { years = 20 }

	is_shown = {
		is_ai = no
		is_ruler = yes
		is_landed = yes
		OR = {
			is_gondor = yes
			has_primary_title = title:e_numenor_in_exile
			has_primary_title = title:e_reunitedkingdom
		}	
		lotr_numenor_culture_trigger = yes
		exists = title:e_mordor.holder
		NOR = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_destroy_mordor
			}
			has_title = title:e_mordor
		}
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
		NOR = {
			has_truce = title:e_mordor.holder
		}
		custom_description = {
			text = faith_is_evil
			subject = this
			faith_is_evil = no
		}
	}
	is_valid = {
		prestige_level >= very_high_prestige_level
		completely_controls_region = custom_gondorian_heartlands
		is_independent_ruler = yes
		#lotr_armies_are_outnumbered = no	#juke note: commented out, unlocalizd trigger and theres no reason to lock the player from trying to defeat sauron even if they are outnumbered
	}
	effect = {
		play_music_cue = lotr_cue_gondor
		custom_tooltip = destroy_mordor_decision
		trigger_event = {
			id = gondor.2100
		}
		# add_to_global_variable_list = {
		# 	name = unavailable_unique_decisions
		# 	target = flag:decision_destroy_mordor
		# }
	}
}

decision_destroy_mordor_AI = {
	sort_order = 100
	title = decision_destroy_mordor
	picture = "gfx/interface/illustrations/decisions/decision_gondor_01.dds"
	major = yes
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_destroy_mordor_tooltip
	desc = decision_destroy_mordor_desc
	confirm_text = decision_destroy_mordor_confirm
	
	cooldown = { years = 20 }

	is_shown = {
		is_ai = yes
		#always = no #JUKE NOTE: (temporarily) removing band-aid fix for gondor agression for testing purposes
		#current_year > 7058
		is_ruler = yes
		is_landed = yes
		OR = {
			has_primary_title = title:e_gondor_steward
			has_primary_title = title:e_gondor
			has_primary_title = title:e_reunitedkingdom
		}	
		lotr_numenor_culture_trigger = yes
		exists = title:e_mordor.holder
		title:e_mordor.holder = character:lineofsauron
		NOR = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_destroy_mordor
			}
			has_title = title:e_mordor
		}
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
		NOR = {
			has_truce = title:e_mordor.holder
		}
		custom_description = {
			text = faith_is_evil
			subject = this
			faith_is_evil = no
		}
		# lotr_armies_are_outnumbered = no
	}
	is_valid = {
		completely_controls = title:d_emyn_arnen
		completely_controls = title:d_forithilien
		completely_controls = title:d_harithilien
		completely_controls = title:d_minas_ithil
		completely_controls = title:d_minas_tirith
		completely_controls = title:d_doranorien
		completely_controls = title:k_lebennin
		completely_controls = title:k_belfalas
		
		# can_declare_war = {
		# 	casus_belli = minor_religious_war
		# 	claimant = root
		# 	defender = title:e_mordor.holder
		# }
	}
	effect = {
		custom_tooltip = destroy_mordor_decision
		trigger_event = {
			id = gondor.2100
		}
		add_gold = 700
	}
	# cost = {
	# 	gold = 300
	# }
}

decision_search_orthanc = {
	title = decision_search_orthanc
	picture = "gfx/interface/illustrations/decisions/decision_orthanc.dds"
	major = yes
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
		
	desc = decision_search_orthanc_desc
	selection_tooltip = decision_search_orthanc_desc_tooltip
	confirm_text = decision_search_orthanc_confirm
		
	is_shown = {
		current_year >= 7000
		culture = { has_cultural_pillar = heritage_dunedain }
		is_landed = yes
		OR = {
			is_gondor = yes
			has_primary_title = title:e_arnor
			has_primary_title = title:e_numenor_in_exile
			has_primary_title = title:e_reunitedkingdom
		}
		completely_controls = title:c_isengard
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_search_orthanc
			}
		}
	}
	is_valid = {
		completely_controls = title:c_isengard
	}
	effect = {
		trigger_event = {
			id = gondor.2200
		}
		add_prestige = major_prestige_gain
		add_to_global_variable_list = {
            name = unavailable_unique_decisions
            target = flag:decision_search_orthanc
        }
	}
}

## Capital Decisions ##
# decision_osgiliath_capital = { # Unused #Trig commented out 23/8/24 since not used
# 	sort_order = 85
# 	title = decision_osgiliath_capital
# 	picture = "gfx/interface/illustrations/decisions/decision_minas_tirith_01.dds"
# 	major = no
# 	ai_goal = yes
# 	ai_potential = {
# 		always = yes
# 	}
# 	ai_will_do = {
# 		base = 100
# 	}
# 	selection_tooltip = decision_osgiliath_capital_tooltip
# 	desc = decision_osgiliath_capital_desc
# 	confirm_text = decision_osgiliath_capital_confirm
# 	is_valid_showing_failures_only = {
# 		is_imprisoned = no
# 		is_available_adult = yes
# 		is_at_war = no
# 	}
# 	is_shown = {
# 		is_ruler = yes
# 		is_landed = yes
# 		OR = {
# 			is_gondor = yes
# 			has_primary_title = title:e_numenor_in_exile
# 		}
# 		has_title = title:c_osgiliath
# 		NOT = {
# 			is_target_in_global_variable_list = {
# 				name = unavailable_unique_decisions
# 				target = flag:decision_osgiliath_capital
# 			}
# 		}
# 		always = no # Juke Note: See decision_new_capital
# 	}
# 	is_valid = {
# 		is_ruler = yes
# 		is_landed = yes
# 		has_title = title:c_osgiliath
# 		completely_controls = title:d_minas_ithil
# 		completely_controls = title:d_emyn_arnen
# 		completely_controls = title:d_forithilien
# 		province:202 = { has_building = wonder_osgiliath_05 }
# 		province:203 = { has_building = wonder_osgiliath_05 }
# 	}
# 	effect = {
# 		set_realm_capital = title:c_osgiliath
# 		title:e_gondor = {
# 			set_capital_county = title:c_osgiliath
# 		}
# 		title:e_gondor_steward = {
# 			set_capital_county = title:c_osgiliath
# 		}
# 		title:e_castamir = {
# 			set_capital_county = title:c_osgiliath
# 		}
# 		title:c_osgiliath = {
# 			change_development_level = 7
# 		}
# 		title:d_minas_tirith = {
# 			change_development_level = 3
# 		}
# 		title:d_emyn_arnen = {
# 			change_development_level = 3
# 		}
# 		title:c_osgiliath = {
# 			set_county_culture = root.culture
# 			set_county_faith = root.faith
# 		}
# 		add_to_global_variable_list = {
# 			name = unavailable_unique_decisions
# 			target = flag:decision_osgiliath_capital
# 		}
# 	}
# }

decision_emyn_arnen_capital = {
	sort_order = 85
	title = decision_emyn_arnen_capital
	picture = "gfx/interface/illustrations/decisions/decision_minas_tirith_01.dds"
	major = yes
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_emyn_arnen_capital_tooltip
	desc = decision_emyn_arnen_capital_desc
	confirm_text = decision_emyn_arnen_capital_confirm
	is_shown = {
		current_year >= 6035
		OR = {
			has_primary_title = title:e_gondor
			has_primary_title = title:k_ithilien
			has_primary_title = title:e_gondor_steward
			has_primary_title = title:e_castamir
			has_primary_title = title:e_reunitedkingdom
			has_primary_title = title:e_numenor_in_exile
			has_primary_title = title:e_numenor_colonies
		}
		completely_controls = title:c_emyn_arnen
		faith_is_good = yes
		culture = { has_cultural_pillar = heritage_dunedain }
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_emyn_arnen_capital
			}
		}
	}
	is_valid = {
		is_ruler = yes
		is_landed = yes
		completely_controls = title:k_ithilien
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	cost = {
		gold = 250
	}
	effect = {
		custom_tooltip = decision_move_capital_emyn_arnen
		title:k_ithilien = {
			set_capital_county = title:c_emyn_arnen
		}
		hidden_effect = {
			if = {
				limit = {
					primary_title = title:k_ithilien
					has_title = title:c_emyn_arnen
				}
				set_realm_capital = title:c_emyn_arnen
			}
			else_if = {
				limit = {
					OR = {
						primary_title = title:e_gondor
						primary_title = title:e_gondor_steward
					}
				}
				get_title = title:c_emyn_arnen
			}		
			else_if = {
				limit = {
					title:k_ithilien.holder = {
						liege = root
						has_title = title:c_emyn_arnen
					}
				}
				title:k_ithilien.holder = {
					set_realm_capital = title:c_emyn_arnen
				}
			}
			else_if = {
				limit = {
					title:k_ithilien.holder = {
						liege = ROOT
						NOT = { has_title = title:c_emyn_arnen }
						completely_controls = title:c_emyn_arnen
					}
				}
				title:k_ithilien.holder = {
					get_title = title:c_emyn_arnen 
					set_realm_capital = title:c_emyn_arnen
				}
			}
		}
		province:236 = {
			add_special_building_slot = wonder_palace_of_ithilien
		}
		title:d_emyn_arnen = {
			change_development_level = 2
		}
		title:c_emyn_arnen = {
			change_development_level = 6
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_emyn_arnen_capital
		}
		add_prestige = 500
	}
}

decision_calenardhon_claim = {
	sort_order = 81
	title = decision_calenardhon_claim
	picture = "gfx/interface/illustrations/decisions/decision_edoras_01.dds"
	major = yes
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}

	selection_tooltip = decision_calenardhon_claim_tooltip
	desc = decision_calenardhon_claim_desc
	confirm_text = decision_calenardhon_claim_confirm
	
	is_shown = {
		current_year >= 6543
		is_ruler = yes
		is_landed = yes
		OR = {
			is_gondor = yes
			has_primary_title = title:e_reunitedkingdom
		}
		
		# OR = {
		# 	has_title = title:e_gondor
		# 	has_title = title:e_gondor_steward
		# 	has_title = title:e_castamir
		# }	
		exists = title:k_rohan.holder
		title:k_rohan.holder ?= {
			NOT = { 
				any_liege_or_above = {
					this = root
				}
			}
		}
		NOR = {
			has_title = title:k_rohan
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_calenardhon_claim
			}
			title:k_rohan.holder = {
				OR = {
					AND = {
						culture = culture:rohirrim
						faith_is_evil = no
						is_independent_ruler = yes
					}
					culture = { has_cultural_pillar = heritage_dunedain }
					AND = {
						dynasty = dynasty:100 # The House of Eorl still holds Rohan
						faith_is_evil = no
						is_independent_ruler = yes
					}
				}
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
		NOT = {
			has_truce = title:k_rohan.holder		
		}
	}

	is_valid = {
		is_independent_ruler = yes
		# completely_controls = title:e_gondor
		# prestige_level >= very_high_prestige_level
		OR = {
			is_gondor = yes
			has_primary_title = title:e_reunitedkingdom
		}
		# OR = {
		# 	has_title = title:e_gondor
		# 	has_title = title:e_gondor_steward
		# 	has_title = title:e_castamir
		# }
	}	

	effect = {
		custom_tooltip = press_calenardhon_claim_tooltip
		trigger_event = {
			id = gondor.2400
			days = 1
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_calenardhon_claim
		}
	}
}

# Invite Elves to Edhellond
decision_invite_elves_edhellond = {
	sort_order = 35
	# TEXT + PICTURE
	picture = "gfx/interface/illustrations/decisions/decision_mithlond_02.dds"
	title = decision_invite_elves_edhellond
	selection_tooltip = decision_invite_elves_edhellond_tooltip
	desc = decision_invite_elves_edhellond_desc
	confirm_text = decision_invite_elves_edhellond_confirm
	major = yes

	# SHOWN
	is_shown = {
		is_landed = yes
		current_year >= 6013
		
		#faith = faith:faith_edain
		faith.religion = religion:dunedain_religion #juke note: dont bully heretics
		
		# If Anfalas player controlled, apply decision restrictions as normal. If not, allow ruler to land them
		trigger_if = {
			limit = {
				title:c_edhellond.holder = { is_ai = yes }
			}
			title:c_edhellond = { holder.top_liege = root }
		} 
		trigger_else = {
			has_title = title:c_edhellond
		}
		
		NOR = {
			title:c_edhellond = {
				county_is_elven = yes
			}
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:invite_elves_edhellond
			}
		}
	}

	# IS_VALID
	is_valid = {
		custom_tooltip = {
			text = LOTR_FRIENDS_WITH_ELVEN_KING_TRIGGER
			any_independent_ruler = { 
				has_relation_friend = root
				is_elf = yes
				is_in_valinor = no
				highest_held_title_tier >= tier_kingdom
			}
		}

		trigger_if = {
			limit = {
				title:c_edhellond.holder = { is_ai = yes }
			}
			prestige_level >= 4
		} 
		trigger_else = {
			prestige_level >= 3
		}

		knows_language = language_sindarin
	}

	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}

	#COST
	cost = {
		gold = 350
		prestige = 1000
		piety = 750
	}

	# EFFECT
	effect = {
		custom_tooltip = decision_invite_elves_edhellond_effect_tooltip
		
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:invite_elves_edhellond
		}
		trigger_event = {
			id = gondor.2800
			days = { 15 30 }
		}
	}

	# AI
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
}

decision_elevate_edhellond = { # Aragorn decides to elevate Edhellond into a kingdom/sanctuary type thing for the elves
	picture = "gfx/interface/illustrations/event_scenes/armenelos.dds"
	title = decision_elevate_edhellond
	selection_tooltip = decision_elevate_edhellond_tooltip
	desc = decision_elevate_edhellond_desc
	confirm_text = decision_elevate_edhellond_confirm
	major = yes

	# COOLDOWN
	cooldown = {
		years = 25 
	}

	# SHOWN
	is_shown = {
		faith_is_evil = no
		is_landed = yes
		exists = title:d_edhellond.holder

		title:c_edhellond = { holder.top_liege = root }
		
		is_target_in_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:invite_elves_edhellond
		}
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:elves_edhellond_kingdom
			}
		}
	}

	# IS VALID
	is_valid = {
		faith = faith:faith_edain
		prestige_level >= 4
		knows_language = language_sindarin
		# title:d_edhellond.holder ?= {
		has_relation_friend = title:d_edhellond.holder
		# }
	}

	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}

	#COST
	cost = {
		prestige = 1250
		gold = 500
		piety = 350
	}

	#EFFECT
	effect = {
		title:d_edhellond.holder ?= {
			trigger_event = {
				id = gondor.2801
				days = { 15 30 }
			}
		}
	}

	# AI
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
}

# Form a semi-permanent alliance with Bellakar, renewable after a ruler dies
decision_gondor_x_bellakar = {
	sort_order = 65
	picture = "gfx/interface/illustrations/decisions/decision_arnor_01.dds"
	title = decision_gondor_x_bellakar
	selection_tooltip = decision_gondor_x_bellakar_tooltip
	desc = decision_gondor_x_bellakar_desc
	confirm_text = decision_gondor_x_bellakar_confirm
	major = yes

	# SHOWN
	is_shown = {
		OR = {
			has_title = title:e_gondor
			AND = {
				has_title = title:e_reunitedkingdom
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:decision_solidify_reunited_kingdom
				}
			}
		}
		current_year >= 5470
		OR = {
			AND = {
				exists = title:e_bellakar.holder
				in_diplomatic_range = title:e_bellakar.holder
			}
			AND = {
				exists = title:e_pharazain.holder
				in_diplomatic_range = title:e_pharazain.holder
			}
		}
		faith_is_good = yes
		OR = {
			dynasty = dynasty:dynasty_elros
			dynasty = dynasty:dynasty_elendil
			dynasty = dynasty:dynasty_anarion
		}

		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:bellakar_x_gondor
			}
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:gondor_x_bellakar
			}
		}
		trigger_if = {
			limit = {
				exists = title:e_pharazain.holder
			}
			NOT = {
				is_allied_to = title:e_pharazain.holder
			}
		}
		trigger_else = {
			trigger_if = {
				limit = {
					exists = title:e_bellakar.holder
				}
				NOT = {
					is_allied_to = title:e_bellakar.holder
				}
			}
		}
	}

	# IS VALID
	is_valid = {
		prestige_level >= 4
		sauron_is_alive = yes
		trigger_if = {
			limit = {
				exists = title:e_pharazain.holder
			}
			title:e_pharazain.holder = { faith_is_good = yes }
		}
		trigger_else = {
			title:e_bellakar.holder = { faith_is_good = yes }
		}
		custom_tooltip = {
			text = decision_gondor_x_bellakar_custom_tooltip_a
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:reclaim_harondor_decision
			}
		}
		custom_tooltip = {
			text = decision_gondor_x_bellakar_custom_tooltip_b
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:reclaim_umbar_decision
			}
		}
	}

	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}

	#EFFECT
	effect = { # make an alliance between Gondor x Bellakar for next ~150 years or something idk
		play_music_cue = lotr_cue_beacons
		custom_tooltip = decision_gondor_x_bellakar_custom_effect
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:gondor_x_bellakar
		}
		if = {
			limit = {
				exists = title:e_pharazain.holder
			}
			title:e_pharazain.holder = {
				trigger_event = {
					id = gondor.2950
					days = { 15 30 }
				}
			}
		}
		else = {
			title:e_bellakar.holder = {
				trigger_event = {
					id = gondor.2950
					days = { 15 30 }
				}
			}
		}
	}

	# AI
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
}

################################################
### The Reunited Kingdom & Related Decisions ###
################################################
decision_reunited_kingdom = {
	sort_order = 99
	# TEXT
	title = decision_reunited_kingdom
	picture = "gfx/interface/illustrations/decisions/decision_fornost_02.dds"
	selection_tooltip = decision_reunited_kingdom_tooltip
	desc = decision_reunited_kingdom_desc
	confirm_text = decision_reunited_kingdom_confirm
	major = yes

	# IS_SHOWN
	is_shown = {
		current_year >= 4035 # Is only shown if bookmark is after the two kingdoms split
		
		OR = {
			has_title = title:e_gondor_steward
			has_title = title:e_gondor
			has_title = title:e_castamir
		}
		has_title = title:e_arnor
		NOT = { has_title = title:e_reunitedkingdom }

		OR = {
			dynasty = dynasty:dynasty_elros
			dynasty = dynasty:dynasty_elendil
			dynasty = dynasty:dynasty_anarion
		}

		highest_held_title_tier >= tier_empire
		
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_reunited_kingdom
			}
		}
	}
	
	# IS_VALID
	is_valid = {
		prestige_level >= very_high_prestige_level
		
		OR = {
			has_title = title:e_gondor_steward
			has_title = title:e_gondor
			has_title = title:e_castamir
		}
		has_title = title:e_arnor
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	# EFFECT 
	effect = {
		get_title = title:e_reunitedkingdom
		set_primary_title_to = title:e_reunitedkingdom

		trigger_event = gondor.3602   # Proclaim the Reunited Kingdom flavour
		
		add_prestige = 1500
		dynasty = { add_dynasty_prestige = 1000 }
		hidden_effect = {
			title:e_gondor_steward = {
				every_in_de_jure_hierarchy = {
					limit = { tier = tier_kingdom }
					set_de_jure_liege_title = title:e_gondor
				}
			}
			title:e_castamir = {
				every_in_de_jure_hierarchy = {
					limit = { tier = tier_kingdom }
					set_de_jure_liege_title = title:e_gondor
				}
			}
			create_title_and_vassal_change = {
				type = returned
				save_scope_as = change
				add_claim_on_loss = no
			}
			title:e_gondor = {
				change_title_holder = {
					holder = root
					change = scope:change
				}
			}
			title:e_gondor.holder = {
				every_held_title = {
					add_title_law = male_preference_law # To stop the house of Telcontar from losing the throne immediately if Eldarion dies
				}
			}
			resolve_title_and_vassal_change = scope:change
			destroy_title = title:e_gondor_steward
			destroy_title = title:e_castamir
		}

		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_reunited_kingdom
		}
	}

	# AI
	ai_goal = yes
	ai_potential = { always = yes }
	ai_will_do = { base = 100 }
}

decision_solidify_reunited_kingdom = {
	sort_order = 98
	# TEXT
	title = decision_solidify_reunited_kingdom
	picture = "gfx/interface/illustrations/decisions/decision_fornost_02.dds"
	selection_tooltip = decision_solidify_reunited_kingdom_tooltip
	desc = decision_solidify_reunited_kingdom_desc
	confirm_text = decision_solidify_reunited_kingdom_confirm
	major = yes

	# IS_SHOWN
	is_shown = {
		has_title = title:e_reunitedkingdom

		highest_held_title_tier >= tier_empire
		
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_solidify_reunited_kingdom
			}
		}
	}
	
	# IS_VALID
	is_valid = {
		prestige_level >= 5
		custom_tooltip = {
			text = control_percentage_of_gondor_desc
			title:e_gondor = {
				any_de_jure_county = {
					percent > 0.9
					holder.top_liege = root
				}
			}
		}
		custom_tooltip = {
			text = control_percentage_of_arnor_desc
			title:e_arnor = {
				any_de_jure_county = {
					percent > 0.9
					holder.top_liege = root
				}
			}
		}
		# Add Realm Size requirement
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	# EFFECT 
	effect = {
		hidden_effect = {
			every_realm_de_jure_kingdom = {
				if = {
					limit = {
						OR = {
							empire = title:e_gondor
							empire = title:e_arnor
						}
					}
					set_de_jure_liege_title = title:e_reunitedkingdom
				}
			}
			title:k_isengard = {
				set_de_jure_liege_title = title:e_reunitedkingdom
			}
			title:k_shire = {
				set_de_jure_liege_title = title:e_reunitedkingdom
			}
			if = {
				limit = {
					is_target_in_global_variable_list = {
						name = unavailable_unique_decisions
						target = flag:decision_integrate_the_northern_provinces
					}
				}
				title:k_angmar = { set_de_jure_liege_title = title:e_reunitedkingdom }
				title:k_forochel = { set_de_jure_liege_title = title:e_reunitedkingdom }
			}
		}
		trigger_event = gondor.3603   # Solidify the Reunited Kingdom flavour

		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_solidify_reunited_kingdom
		}
	}

	# AI
	ai_goal = yes
	ai_potential = { always = yes }
	ai_will_do = { base = 100 }
}

decision_reunify_dunedain = {
	sort_order = 97
	# TEXT
	title = decision_reunify_dunedain
	picture = "gfx/interface/illustrations/decisions/decision_fornost_02.dds"
	selection_tooltip = decision_reunify_dunedain_tooltip
	desc = decision_reunify_dunedain_desc
	confirm_text = decision_reunify_dunedain_confirm
	major = yes

	# IS_SHOWN
	is_shown = {
		has_title = title:e_reunitedkingdom

		highest_held_title_tier >= tier_empire
		
		is_target_in_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_solidify_reunited_kingdom
		}
		culture = { has_cultural_pillar = heritage_dunedain }
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_reunify_dunedain
			}
		}
	}
	
	# IS_VALID
	is_valid = {
		prestige_level >= 5
		piety_level >= 4
		completely_controls_region = custom_gondorian_heartlands
		completely_controls_region = middleearth_west_arnor
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	# EFFECT 
	effect = {
		if = { # Last King of the Elder Days | Achievement
			limit = { 
				is_ai = no
				NOT = { exists = global_var:lotr_achievement_26 }
				realms_achievements_enabled = yes
				root = character:lineisildur42
				age < 151
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:decision_destroy_mordor
				}
			}
			set_global_variable = lotr_achievement_26
		}
		culture:dunedain = {
			culture:dunedain = { save_temporary_scope_as = dunedain_culture }
			culture:gondorian = { save_temporary_scope_as = gondorian_culture }
			culture:arnorian = { save_temporary_scope_as = arnorian_culture }
			# Needs to be above the 'custom_tooltip'
			custom_tooltip = decision_reunify_dunedain_get_innovations
			hidden_effect = {
				reset_culture_creation_date = yes
				get_all_innovations_from = culture:gondorian
				get_all_innovations_from = culture:arnorian
				set_culture_pillar = language_westron
			}
		}
		trigger_event = gondor.3604   # Restore Dunedain Identity flavour

		set_culture = culture:dunedain
		
		if = { #juke note: this code should be refined so it works with multiple spouses, though its unlikely to happen
			limit = { 
				any_spouse = { 
					is_landed = no 
					OR = {
						culture = culture:gondorian
						culture = culture:arnorian
						culture = culture:dunedain_ranger
					}
				} 
			}
			every_spouse = {
				limit = {
					is_landed = no
					OR = {
						culture = culture:gondorian
						culture = culture:arnorian
						culture = culture:dunedain_ranger
					}
				}
				if = {
					limit = { is_ai = yes }
					set_culture = culture:dunedain
				}
			}
		}
		if = {
			limit = {
				any_close_family_member = {
					is_landed = no
					NOT = { is_spouse_of = root }
					culture = { has_cultural_pillar = heritage_dunedain }
				}
			}
			every_close_family_member = {
				limit = {
					is_landed = no
					NOT = { is_spouse_of = root }
					culture = { has_cultural_pillar = heritage_dunedain }
				}
				custom = all_unlanded_family_members
				if = {
					limit = { is_ai = yes }
					set_culture = culture:dunedain
				}
			}
		}
		if = {
			limit = {
				any_child = {
					culture = { has_cultural_pillar = heritage_dunedain }
				}
			}
			every_child = {
				limit = {
					NOT = { 
						culture = { has_cultural_pillar = heritage_dunedain }
					}
				}
				custom = all_children_custom
				if = {
					limit = { is_ai = yes }
					set_culture = culture:dunedain
				}
			}
		}

		#Convert appropriate vassals, and their family
		if = {
			limit = {
				any_vassal_or_below = {
					OR = {
						culture = culture:gondorian
						culture = culture:arnorian
						culture = culture:dunedain_ranger
					}
				}
			}
			every_vassal_or_below = {
				custom = decision_reunify_dunedain_vassals_custom
				limit = {
					OR = {
						culture = culture:gondorian
						culture = culture:arnorian
						culture = culture:dunedain_ranger
					}
				}
				if = {
					limit = { is_ai = yes }
					set_culture = culture:dunedain
				}
				# else = { trigger_event = rohan.0002 }
				hidden_effect = {
					if = {
						limit = { 
							any_spouse = { 
								is_landed = no
								OR = {
									culture = culture:gondorian
									culture = culture:arnorian
									culture = culture:dunedain_ranger
								}
							} 
						}
						every_spouse = {
							limit = {
								is_landed = no
								OR = {
									culture = culture:gondorian
									culture = culture:arnorian
									culture = culture:dunedain_ranger
								}
							}
							if = {
								limit = { is_ai = yes }
								set_culture = culture:dunedain
							}
							# else = { trigger_event = rohan.0002 }
						}
					}
					if = {
						limit = {
							any_close_family_member = {
								is_landed = no
								NOT = { is_spouse_of = prev }
								OR = {
									culture = culture:gondorian
									culture = culture:arnorian
									culture = culture:dunedain_ranger
								}
							}
						}
						every_close_family_member = {
							limit = {
								is_landed = no
								NOT = { is_spouse_of = prev }
								OR = {
									culture = culture:gondorian
									culture = culture:arnorian
									culture = culture:dunedain_ranger
								}
							}
							custom = all_unlanded_family_members
							if = {
								limit = { is_ai = yes }
								set_culture = culture:dunedain
							}
							# else = { trigger_event = rohan.0002 }
						}
					}
					if = {
						limit = {
							any_child = {
								OR = {
									culture = culture:gondorian
									culture = culture:arnorian
									culture = culture:dunedain_ranger
								}
							}
						}
						every_child = {
							limit = {
								OR = {
									culture = culture:gondorian
									culture = culture:arnorian
									culture = culture:dunedain_ranger
								}
							}
							custom = all_children_custom
							if = {
								limit = { is_ai = yes }
								set_culture = culture:dunedain
							}
							# else = { trigger_event = rohan.0002 }
						}
					}
					if = {
						limit = {
							any_vassal_or_below = {
								OR = {
									culture = culture:gondorian
									culture = culture:arnorian
									culture = culture:dunedain_ranger
								}
							}
						}
						every_vassal_or_below = {
							custom = decision_reunify_dunedain_vassals_custom
							limit = {
								OR = {
									culture = culture:gondorian
									culture = culture:arnorian
									culture = culture:dunedain_ranger
								}
							}
							if = {
								limit = { is_ai = yes }
								set_culture = culture:dunedain
							}
							# else = { trigger_event = rohan.0002 }
							hidden_effect = {
								if = {
									limit = { 
										any_spouse = { 
											is_landed = no 
											OR = {
												culture = culture:gondorian
												culture = culture:arnorian
												culture = culture:dunedain_ranger
											}
										} 
									}
									every_spouse = {
										limit = {
											is_landed = no
											OR = {
												culture = culture:gondorian
												culture = culture:arnorian
												culture = culture:dunedain_ranger
											}
										}
										if = {
											limit = { is_ai = yes }
											set_culture = culture:dunedain
										}
										# else = { trigger_event = rohan.0002 }
									}
								}
								if = {
									limit = {
										any_close_family_member = {
											is_landed = no
											NOT = { is_spouse_of = prev }
											OR = {
												culture = culture:gondorian
												culture = culture:arnorian
												culture = culture:dunedain_ranger
											}
										}
									}
									every_close_family_member = {
										limit = {
											is_landed = no
											NOT = { is_spouse_of = prev }
											OR = {
												culture = culture:gondorian
												culture = culture:arnorian
												culture = culture:dunedain_ranger
											}
										}
										custom = all_unlanded_family_members
										if = {
											limit = { is_ai = yes }
											set_culture = culture:dunedain
										}
										# else = { trigger_event = rohan.0002 }
									}
								}
								if = {
									limit = {
										any_child = {
											OR = {
												culture = culture:gondorian
												culture = culture:arnorian
												culture = culture:dunedain_ranger
											}
										}
									}
									every_child = {
										limit = {
											OR = {
												culture = culture:gondorian
												culture = culture:arnorian
												culture = culture:dunedain_ranger
											}
										}
										custom = all_children_custom
										if = {
											limit = { is_ai = yes }
											set_culture = culture:dunedain
										}
										# else = { trigger_event = rohan.0002 }
									}
								}
							}
						}
					}
				}
			}
		}

		hidden_effect = {
			every_county_in_region = {
				region = custom_gondorian_heartlands
				limit = { 
					OR = {
						holder = root
						holder.top_liege = root
					}
					OR = {
						culture = culture:gondorian
						culture = culture:arnorian
						culture = culture:dunedain_ranger
					}
				}
				random = {
					chance = 90
					set_county_culture = culture:dunedain
				}
			}

			#Flip Counties
			every_sub_realm_county = {
				limit = {
					OR = {
						holder = root
						holder.top_liege = root
					}
					OR = {
						culture = culture:gondorian
						culture = culture:arnorian
						culture = culture:dunedain_ranger
					}
					NOT = { title_province = { geographical_region = custom_gondorian_heartlands } }

				}
				random = {
					chance = 60
					set_county_culture = culture:dunedain
				}
			}
		}

		culture:dunedain = {
			add_innovation = innovation_lords_of_the_westlands
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_reunify_dunedain
		}
	}

	# AI
	ai_goal = yes
	ai_potential = { always = yes }
	ai_will_do = { base = 100 }
}

decision_reclaim_royal_lineage = {
	sort_order = 200
	desc = decision_reclaim_royal_lineage_desc
	picture = "gfx/interface/illustrations/decisions/decision_minas_tirith_02.dds"
	major = yes
	selection_tooltip = decision_reclaim_royal_lineage_tooltip
	confirm_text = decision_reclaim_royal_lineage_confirm
	
	is_shown = {
		is_landed = yes
		faith_is_good = yes
		OR = { # Ensures at least one option is still available
			dynasty = dynasty:dynasty_aranbor
			dynasty = dynasty:dynasty_silivnir
		}
	}
	
	is_valid = {
		culture = { has_cultural_pillar = heritage_dunedain }
		faith.religion = religion:dunedain_religion
		prestige_level >= 5
		has_title = title:e_arnor
		trigger_if = {
			limit = { 
				has_dlc_feature = legends
				is_ai = no
			}
			custom_tooltip = {
				text = finished_isildur_legend_tt
				house = { has_house_modifier = heirs_of_isildur_modifier }
			}
		}
		trigger_else = {
			legitimacy_level = 5
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
		is_independent_ruler = yes
	}
	
	effect = {
		play_music_cue = lotr_cue_gondor
		if = {		# Aranbor
			limit = {
				dynasty = dynasty:dynasty_aranbor
			}
			custom_tooltip = reclaim_royal_lineage_aranbor_tooltip
			dynasty:dynasty_aranbor = { save_scope_as = cadet_dynasty }
			character:lineofaranbor3 = { save_scope_as = royal_ancestor }
		}
		else_if = {		# Silivnir
			limit = {
				dynasty = dynasty:dynasty_silivnir
			}
			custom_tooltip = reclaim_royal_lineage_silivnir_tooltip
			dynasty:dynasty_silivnir = { save_scope_as = cadet_dynasty }
			character:lineofsilivnir1 = { save_scope_as = royal_ancestor }
		}
		reclaim_royal_lineage_effect = yes
		add_unpressed_claim = title:e_gondor
	}
	
	cost = {
		gold = {
			if = {
				limit = {
					is_ai = no
				}
				value = 2000
			}
			else = {
				value = 1
			}
		}
		prestige = {
			if = {
				limit = {
					is_ai = no
				}
				value = 1000
			}
			else = {
				value = 1
			}
		}
	}
	
	ai_goal = yes
	
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 1000
	}
}

## Numenor in Exile ##
decision_numenor_in_exile = {
	sort_order = 100
	title = decision_numenor_in_exile
	picture = "gfx/interface/illustrations/decisions/decision_fornost_02.dds"
	major = yes
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
	selection_tooltip = decision_numenor_in_exile_tooltip
	desc = decision_numenor_in_exile_desc
	confirm_text = decision_numenor_in_exile_confirm
	is_shown = {
		# Juke note: Commented this out as we already check for being numenorean, an emperor, and controlling a sufficient amount of lands. This just arbitrarily restricts it so custom empires, non-dunedain gondor and others cant use it.
		#OR = { # Is one of the Numenorean Successor States!
		#	is_gondor = yes
		#	has_title = title:k_an_balkumagan # Just to be safe
		#	has_primary_title = title:e_bellakar
		#	has_primary_title = title:e_thani_hazad
		#	has_title = title:k_umbar # Just to be safe
		#	has_primary_title = title:e_umbar
		#	has_primary_title = title:e_arnor
		#	has_primary_title = title:e_reunitedkingdom
		#	has_primary_title = title:e_adunaim
		#	has_primary_title = title:e_thon_an_kharlokh
		#}
		
		lotr_has_numenorean_culture_trigger = yes # Only a Numenorean culture can claim the mantle of successor to Numenor!
		
		highest_held_title_tier >= tier_empire # Only an imperial rank can hope to claim the mantle of successor to Numenor!
		
		lotr_numenor_in_exile_decision_show_trigger = yes # Must control three of the Numenorean successor-realms to appear!
		
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_numenor_in_exile
			}
		}
	}
	
	is_valid = {
		prestige_level >= very_high_prestige_level
		completely_controls_region = middleearth_haradwaith_umbar
		completely_controls_region = custom_bellakar
		completely_controls_region = custom_gondorian_heartlands
		completely_controls_region = custom_anbalkumagan
		completely_controls_region = custom_colonial_minhiriath
		completely_controls_region = custom_mannish_thani_hazad
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	effect = {
		if = { # Heirs of Westernesse | Achievement
			limit = { 
				NOT = { exists = global_var:lotr_achievement_62 }
				is_ai = no
				realms_achievements_enabled = yes
			}
			set_global_variable = lotr_achievement_62
		}
		get_title = title:e_numenor_in_exile
		
		#every_realm_de_jure_empire = { #This needs to be looked at
		#	limit = { completely_controls = yes }
		#	transfer_vassals = title:e_numenor_in_exile
		#}
		title:e_numenor_in_exile = {
			set_capital_county = root.primary_title.title_capital_county
		}
		
		hidden_effect = {
			every_realm_de_jure_kingdom = {
				if = {
					limit = {
						OR = {
							empire = title:e_thani_hazad
							empire = title:e_umbar
							empire = title:e_pharazain
							empire = title:e_bellakar
							empire = title:e_gondor
							empire = title:e_gondor_steward
							empire = title:e_castamir
							empire = title:e_arnor
							empire = title:e_reunitedkingdom
							empire = title:e_numenor_colonies
						}
					}
					set_de_jure_liege_title = title:e_numenor_in_exile
				}
			}
		}
		
		if = {
			limit = {
				has_title = title:e_thani_hazad
			}
			destroy_title = title:e_thani_hazad
		}
		if = {
			limit = {
				has_title = title:e_umbar
			}
			destroy_title = title:e_umbar
		}
		if = {
			limit = {
				has_title = title:e_bellakar
			}
			destroy_title = title:e_bellakar
		}
		if = {
			limit = {
				has_title = title:e_gondor
			}
			destroy_title = title:e_gondor
		}
		if = {
			limit = {
				has_title = title:e_gondor_steward
			}
			destroy_title = title:e_gondor_steward
		}
		if = {
			limit = {
				has_title = title:e_castamir
			}
			destroy_title = title:e_castamir
		}
		if = {
			limit = {
				has_title = title:e_arnor
			}
			destroy_title = title:e_arnor
		}
		if = {
			limit = {
				has_title = title:e_reunitedkingdom
			}
			destroy_title = title:e_reunitedkingdom
		}
		if = {
			limit = {
				has_title = title:e_numenor_colonies
			}
			destroy_title = title:e_numenor_colonies
		}
		
		trigger_event = {
			id = gondor.3500
			days = 1
		}
		
		set_primary_title_to = title:e_numenor_in_exile

		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_numenor_in_exile
		}
		if = {
			limit = { root.culture = { NOT = { has_innovation = innovation_numenorean_architecture_01 } } }
			root.culture = { add_innovation = innovation_numenorean_architecture_01 }
		}
		if = {
			limit = { root.culture = { NOT = { has_innovation = innovation_numenorean_architecture_02 } } }
			root.culture = { add_innovation = innovation_numenorean_architecture_02 }
		}
		if = {
			limit = { root.culture = { NOT = { has_innovation = innovation_numenorean_architecture_03 } } }
			root.culture = { add_innovation = innovation_numenorean_architecture_03 }
		}
		if = {
			limit = { has_dlc_feature = legends }
			create_legend_seed = {
				type = legitimizing
				quality = illustrious
				chronicle = new_title
				properties = {
					title = root.primary_title
					founder = root
				}
			}
		}
	}
}

## Proclaim New Capital Decision ##
decision_new_capital = {
	sort_order = 2000
	picture = "gfx/interface/illustrations/decisions/decision_minas_tirith_02.dds"
	major = no
	selection_tooltip = decision_new_capital_tooltip
	title = {
		first_valid = {
			triggered_desc = {
				trigger = {
					dynasty = dynasty:dynasty_tumakveh
				}
				desc = decision_new_capital.t.invocate
			}
			triggered_desc = {
				trigger = {
					has_primary_title = title:e_gondor_steward
				}
				desc = decision_new_capital.t.steward
			}
			triggered_desc = {
				trigger = {
					primary_title = title:k_ithilien
				}
				desc = decision_new_capital.t.prince
			}
			triggered_desc = {
				trigger = {
					has_primary_title = title:e_numenor_in_exile
				}
				desc = decision_new_capital.t.nie
			}
			triggered_desc = {
				trigger = {
					OR = {
						has_primary_title = title:e_gondor
						has_primary_title = title:e_arnor
						has_primary_title = title:e_castamir
						has_primary_title = title:e_reunitedkingdom
						
						has_primary_title = title:e_umbar
						has_primary_title = title:e_adunaim
						has_primary_title = title:e_pharazain
						has_primary_title = title:e_bellakar
					}
				}
				desc = decision_new_capital.t.king
			}
			desc = decision_new_capital.t.fallback
		}
		
	}
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					OR = {
						has_primary_title = title:e_gondor_steward
						has_primary_title = title:e_gondor
					}
				}
				desc = decision_new_capital.desc.gondor
			}
			triggered_desc = {
				trigger = {
					has_primary_title = title:e_castamir
				}
				desc = decision_new_capital.desc.castamir
			}
			triggered_desc = {
				trigger = {
					has_primary_title = title:e_arnor
				}
				desc = decision_new_capital.desc.arnor
			}
			triggered_desc = {
				trigger = {
					has_primary_title = title:e_reunitedkingdom
				}
				desc = decision_new_capital.desc.rk
			}
			triggered_desc = {
				trigger = {
					has_primary_title = title:e_numenor_in_exile
				}
				desc = decision_new_capital.desc.nie
			}
			desc = decision_new_capital.desc.fallback
		}
		
	}
	confirm_text = decision_new_capital_confirm
	
	cooldown = { years = 10 }

	is_shown = {
		is_ai = no # AI handled differently
		is_landed = yes
		lotr_has_numenorean_culture_trigger = yes
		
		### Handled in the individual show_x_capital_trigger
		#highest_held_title_tier = tier_empire	
		#OR = {
		#	has_primary_title = title:e_gondor_steward
		#	has_primary_title = title:e_gondor
		#	has_primary_title = title:e_castamir
		#	has_primary_title = title:e_arnor
		#	has_primary_title = title:e_numenor_in_exile
		#	has_primary_title = title:e_reunitedkingdom
		#	has_primary_title = title:k_ithilien
		#	has_primary_title = title:k_anorien
		#	has_primary_title = title:k_arthedain
		#	has_primary_title = title:k_cardolan
		#}
		OR = { # Ensures at least one option is still available
			show_osgiliath_capital_trigger = yes
			show_minas_tirith_capital_trigger = yes
			show_minas_ithil_capital_trigger = yes
			show_emyn_arnen_capital_trigger = yes
			show_pelargir_capital_trigger = yes
			show_dol_amroth_capital_trigger = yes
			show_methir_capital_trigger = yes
			show_mirlond_capital_trigger = yes
			show_ramlond_capital_trigger = yes
			show_umbar_capital_trigger = yes
			show_annuminas_capital_trigger = yes
			show_fornost_capital_trigger = yes
			show_tharbad_capital_trigger = yes
			show_thalion_capital_trigger = yes
			show_cameth_brin_capital_trigger = yes
			show_nilulonde_capital_trigger = yes
			show_korlea_capital_trigger = yes
			show_tariketh_an_kharat_capital_trigger = yes
			show_khorsaj_capital_trigger = yes
			show_tol_uialgaer_capital_trigger = yes
		}
	}
	
	is_valid = {
		lotr_has_numenorean_culture_trigger = yes
		prestige_level >= medium_prestige_level
		OR = {
			trigger_if = {
				limit = { show_osgiliath_capital_trigger = yes }
				valid_osgiliath_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_minas_tirith_capital_trigger = yes }
				valid_minas_tirith_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_minas_ithil_capital_trigger = yes }
				valid_minas_ithil_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_emyn_arnen_capital_trigger = yes }
				valid_emyn_arnen_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_pelargir_capital_trigger = yes }
				valid_pelargir_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_dol_amroth_capital_trigger = yes }
				valid_dol_amroth_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_methir_capital_trigger = yes }
				valid_methir_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_mirlond_capital_trigger = yes }
				valid_mirlond_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_ramlond_capital_trigger = yes }
				valid_ramlond_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_umbar_capital_trigger = yes }
				valid_umbar_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_annuminas_capital_trigger = yes }
				valid_annuminas_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_fornost_capital_trigger = yes }
				valid_fornost_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_tharbad_capital_trigger = yes }
				valid_tharbad_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_thalion_capital_trigger = yes }
				valid_thalion_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_cameth_brin_capital_trigger = yes }
				valid_cameth_brin_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_nilulonde_capital_trigger = yes }
				valid_nilulonde_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_korlea_capital_trigger = yes }
				valid_korlea_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_tariketh_an_kharat_capital_trigger = yes }
				valid_tariketh_an_kharat_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_khorsaj_capital_trigger = yes }
				valid_khorsaj_capital_trigger = yes
			}
			trigger_if = {
				limit = { show_tol_uialgaer_capital_trigger = yes }
				valid_tol_uialgaer_capital_trigger = yes
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	
	widget = {
		gui = "decision_view_widget_option_list_generic"
		controller = decision_option_list_controller
		decision_to_second_step_button = "decision_new_capital.second_step"
		
		item = {	# Fallback
			value = new_capital_fallback
			localization = decision_new_capital.tt.new_capital_fallback
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { always = no }
			is_valid = { always = no }
			ai_chance = { value = 100 }
		}
		
		item = {	# Osgiliath
			value = new_capital_osgiliath
			localization = decision_new_capital.tt.new_capital_osgiliath
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_osgiliath_capital_trigger = yes }
			is_valid = { valid_osgiliath_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Minas Tirith
			value = new_capital_minas_tirith
			localization = decision_new_capital.tt.new_capital_minas_tirith
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_minas_tirith_capital_trigger = yes }
			is_valid = { valid_minas_tirith_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Minas Ithil
			value = new_capital_minas_ithil
			localization = decision_new_capital.tt.new_capital_minas_ithil
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_minas_ithil_capital_trigger = yes }
			is_valid = { valid_minas_ithil_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Emyn Arnen
			value = new_capital_emyn_arnen
			localization = decision_new_capital.tt.new_capital_emyn_arnen
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_emyn_arnen_capital_trigger = yes }
			is_valid = { valid_emyn_arnen_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Pelargir
			value = new_capital_pelargir
			localization = decision_new_capital.tt.new_capital_pelargir
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_pelargir_capital_trigger = yes }
			is_valid = { valid_pelargir_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Dol Amroth
			value = new_capital_dol_amroth
			localization = decision_new_capital.tt.new_capital_dol_amroth
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_dol_amroth_capital_trigger = yes }
			is_valid = { valid_dol_amroth_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Methir
			value = new_capital_methir
			localization = decision_new_capital.tt.new_capital_methir
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_methir_capital_trigger = yes }
			is_valid = { valid_methir_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Mirlond
			value = new_capital_mirlond
			localization = decision_new_capital.tt.new_capital_mirlond
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_mirlond_capital_trigger = yes }
			is_valid = { valid_mirlond_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Ramlond
			value = new_capital_ramlond
			localization = decision_new_capital.tt.new_capital_ramlond
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_ramlond_capital_trigger = yes }
			is_valid = { valid_ramlond_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Umbar
			value = new_capital_umbar
			localization = decision_new_capital.tt.new_capital_umbar
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_umbar_capital_trigger = yes }
			is_valid = { valid_umbar_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Annúminas
			value = new_capital_annuminas
			localization = decision_new_capital.tt.new_capital_annuminas
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_annuminas_capital_trigger = yes }
			is_valid = { valid_annuminas_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Fornost
			value = new_capital_fornost
			localization = decision_new_capital.tt.new_capital_fornost
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_fornost_capital_trigger = yes }
			is_valid = { valid_fornost_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Tharbad
			value = new_capital_tharbad
			localization = decision_new_capital.tt.new_capital_tharbad
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_tharbad_capital_trigger = yes }
			is_valid = { valid_tharbad_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Thalion
			value = new_capital_thalion
			localization = decision_new_capital.tt.new_capital_thalion
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_thalion_capital_trigger = yes }
			is_valid = { valid_thalion_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Cameth Brin
			value = new_capital_cameth_brin
			localization = decision_new_capital.tt.new_capital_cameth_brin
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_cameth_brin_capital_trigger = yes }
			is_valid = { valid_cameth_brin_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Nilulonde
			value = new_capital_nilulonde
			localization = decision_new_capital.tt.new_capital_nilulonde
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_nilulonde_capital_trigger = yes }
			is_valid = { valid_nilulonde_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Korlea
			value = new_capital_korlea
			localization = decision_new_capital.tt.new_capital_korlea
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_korlea_capital_trigger = yes }
			is_valid = { valid_korlea_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Tariketh an Kharat
			value = new_capital_tariketh_an_kharat
			localization = decision_new_capital.tt.new_capital_tariketh_an_kharat
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_tariketh_an_kharat_capital_trigger = yes }
			is_valid = { valid_tariketh_an_kharat_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Khorsaj
			value = new_capital_khorsaj
			localization = decision_new_capital.tt.new_capital_khorsaj
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_khorsaj_capital_trigger = yes }
			is_valid = { valid_khorsaj_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
		item = {	# Tol Uialgaer
			value = new_capital_tol_uialgaer
			localization = decision_new_capital.tt.new_capital_tol_uialgaer
			icon = "gfx/interface/icons/message_feed/titles.dds"
			is_shown = { show_tol_uialgaer_capital_trigger = yes }
			is_valid = { valid_tol_uialgaer_capital_trigger = yes }
			ai_chance = { value = 100 }
		}
	}
	
	effect = {
		if = {		# Fallback
			limit = { scope:new_capital_fallback = yes }
			custom_tooltip = new_capital_fallback_effect.tt
		}
		else_if = {		# Osgiliath
			limit = { scope:new_capital_osgiliath = yes }
			set_realm_capital = title:c_osgiliath
			primary_title = { set_capital_county = title:c_osgiliath }
			title:k_anorien = {  set_capital_county = title:c_osgiliath }
			title:d_minas_tirith = {  set_capital_county = title:c_osgiliath }
		}
		else_if = {	# Minas Tirith
			limit = { scope:new_capital_minas_tirith = yes }
			set_realm_capital = title:c_minas_tirith
			primary_title = { set_capital_county = title:c_minas_tirith }
			title:k_anorien = {  set_capital_county = title:c_minas_tirith }
			title:d_minas_tirith = {  set_capital_county = title:c_minas_tirith }
		}
		else_if = {	# Minas Ithil
			limit = { scope:new_capital_minas_ithil = yes }
			set_realm_capital = title:c_minas_ithil
			primary_title = { set_capital_county = title:c_minas_ithil }
			if = {
				limit = {
					NOT = { title:k_ithilien = root.primary_title }
				}
				title:k_ithilien = { set_capital_county = title:c_minas_ithil }
			}
		}
		else_if = {	# Emyn Arnen
			limit = { scope:new_capital_emyn_arnen = yes }
			set_realm_capital = title:c_emyn_arnen
			primary_title = { set_capital_county = title:c_emyn_arnen }
			if = {
				limit = {
					NOT = { title:k_ithilien = root.primary_title }
				}
				title:k_ithilien = { set_capital_county = title:c_emyn_arnen }
			}
		}
		else_if = {	# Pelargir
			limit = { scope:new_capital_pelargir = yes }
			set_realm_capital = title:c_pelargir
			primary_title = { set_capital_county = title:c_pelargir }
		}
		else_if = {	# Dol Amroth
			limit = { scope:new_capital_dol_amroth = yes }
			set_realm_capital = title:c_dol_amroth
			primary_title = { set_capital_county = title:c_dol_amroth }
		}
		else_if = {	# Methir
			limit = { scope:new_capital_methir = yes }
			set_realm_capital = title:c_methir
			primary_title = { set_capital_county = title:c_methir }
		}
		else_if = {	# Mirlond
			limit = { scope:new_capital_mirlond = yes }
			set_realm_capital = title:c_mirlond
			primary_title = { set_capital_county = title:c_mirlond }
		}
		else_if = {	# Ramlond
			limit = { scope:new_capital_ramlond = yes }
			set_realm_capital = title:c_ramlond
			primary_title = { set_capital_county = title:c_ramlond }
		}
		else_if = {	# Umbar
			limit = { scope:new_capital_umbar = yes }
			set_realm_capital = title:c_umbar
			primary_title = { set_capital_county = title:c_umbar }
		}
		else_if = {	# Annúminas
			limit = { scope:new_capital_annuminas = yes }
			set_realm_capital = title:c_annuminas
			primary_title = { set_capital_county = title:c_annuminas }
			if = {
				limit = {
					NOT = { title:k_arthedain = root.primary_title }
				}
				title:k_arthedain = {  set_capital_county = title:c_annuminas }
			}
		}
		else_if = {	# Fornost
			limit = { scope:new_capital_fornost = yes }
			set_realm_capital = title:c_fornost
			primary_title = { set_capital_county = title:c_fornost }
			if = {
				limit = {
					NOT = { title:k_arthedain = root.primary_title }
				}
				title:k_arthedain = {  set_capital_county = title:c_fornost }
			}
		}
		else_if = {	# Tharbad
			limit = { scope:new_capital_tharbad = yes }
			set_realm_capital = title:c_tharbad
			primary_title = { set_capital_county = title:c_tharbad }
			if = {
				limit = {
					NOT = { title:k_cardolan = root.primary_title }
				}
				title:k_cardolan = { set_capital_county = title:c_tharbad }
			}
			title:d_minhiriath = { set_capital_county = title:c_tharbad }
		}
		else_if = {	# Thalion
			limit = { scope:new_capital_thalion = yes }
			set_realm_capital = title:c_thalion
			primary_title = { set_capital_county = title:c_thalion }
			if = {
				limit = {
					NOT = { title:k_cardolan = root.primary_title }
				}
				title:k_cardolan = { set_capital_county = title:c_thalion }
			}
			title:d_minhiriath = { set_capital_county = title:c_thalion }
		}
		else_if = {	# Cameth Brin
			limit = { scope:new_capital_cameth_brin = yes }
			set_realm_capital = title:c_cameth_brin
			primary_title = { set_capital_county = title:c_cameth_brin }
		}
		else_if = {	# Nilulonde
			limit = { scope:new_capital_nilulonde = yes }
			set_realm_capital = title:c_nilulonde
			primary_title = { set_capital_county = title:c_nilulonde }
		}
		else_if = {	# Korlea
			limit = { scope:new_capital_korlea = yes }
			set_realm_capital = title:c_korlea
			primary_title = { set_capital_county = title:c_korlea }
		}
		else_if = {	# Tariketh an Kharat
			limit = { scope:new_capital_tariketh_an_kharat = yes }
			set_realm_capital = title:c_tariketh_an_kharat
			primary_title = { set_capital_county = title:c_tariketh_an_kharat }
		}
		else_if = {	# Khorsaj
			limit = { scope:new_capital_khorsaj = yes }
			set_realm_capital = title:c_khorsaj
			primary_title = { set_capital_county = title:c_khorsaj }
		}
		else_if = {	# Tol Uialgaer
			limit = { scope:new_capital_tol_uialgaer = yes }
			set_realm_capital = title:c_tol_uialgaer
			primary_title = { set_capital_county = title:c_tol_uialgaer }
		}
		
		else = {
			
		}
	}
	
	cost = {
		gold = 150
	}
	
	ai_potential = {
		always = no
	}
	
	ai_check_interval = 150
}

## Dejure Province Restoration ##
decision_restore_gondor_province = {
	sort_order = 200
	title = {
		first_valid = {
			triggered_desc = {
				trigger = {
					OR = {
						has_primary_title = title:e_gondor_steward
						has_primary_title = title:e_gondor
						has_primary_title = title:e_castamir
					}
				}
				desc = decision_restore_gondor_province.gondorian
			}
			triggered_desc = {
				trigger = {
					OR = {
						has_primary_title = title:e_reunitedkingdom
						has_primary_title = title:e_arnor
					}
				}
				desc = decision_restore_gondor_province.dunedain
			}
			desc = decision_restore_gondor_province.numenorean
		}
		
	}
	picture = "gfx/interface/illustrations/decisions/decision_minas_tirith_02.dds"
	major = yes
	selection_tooltip = decision_restore_gondor_province_tooltip
	desc = decision_restore_gondor_province_desc
	confirm_text = decision_restore_gondor_province_confirm
	
	is_shown = {
		is_landed = yes
		highest_held_title_tier = tier_empire
		OR = {
			#is_gondor = yes
			has_title = title:e_gondor_steward
			has_title = title:e_gondor
			has_title = title:e_castamir
			has_title = title:e_numenor_in_exile
			AND = {
				has_title = title:e_reunitedkingdom
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:decision_solidify_reunited_kingdom
				}
			}
		}
		OR = { # Ensures at least one option is still available
			show_harondor_trigger = yes
			show_harnendor_trigger = yes
			show_andrast_trigger = yes
			show_umbar_trigger = yes
			show_calenardhon_trigger = yes
			show_dor_rhunen_trigger = yes
			show_enedhwaith_trigger = yes
			show_eregion_trigger = yes
		}
	}
	
	is_valid = {
		lotr_has_numenorean_culture_trigger = yes
		prestige_level >= high_prestige_level
		OR = {
			trigger_if = { # Harondor
				limit = { show_harondor_trigger = yes }
				completely_controls = title:k_harondor
			}
			trigger_if = { # Harnendor
				limit = { show_harnendor_trigger = yes }
				completely_controls = title:k_mirlond
			}
			trigger_if = { # Andrast
				limit = { show_andrast_trigger = yes }
				completely_controls = title:k_andrast
			}
			trigger_if = { # Umbar
				limit = { show_umbar_trigger = yes }
				completely_controls = title:k_umbar
			}
			trigger_if = { # Calenardhon
				limit = { show_calenardhon_trigger = yes }
				completely_controls_region = middleearth_west_rohan
			}
			trigger_if = { # Dór Rhunen
				limit = { show_dor_rhunen_trigger = yes }
				completely_controls = title:k_south_rhovanion
			}
			trigger_if = { # Enedhwaith - RK/NiE Only
				limit = { show_enedhwaith_trigger = yes }
				AND = {
					completely_controls = title:k_druwaith
					completely_controls = title:k_enedhwaith
					completely_controls = title:k_dunland
				}
			}
			trigger_if = { # Eregion - RK/NiE Only
				limit = { show_eregion_trigger = yes }
				completely_controls = title:k_eregion
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	widget = {
		gui = "decision_view_widget_option_list_generic"
		controller = decision_option_list_controller
		decision_to_second_step_button = "decision_restore_gondor_province.second_step"
		
		item = {	# Fallback - Displayed if no others available
			value = reintegrate_province_fallback
			localization = decision_restore_gondor_province.tt.fallback
			icon = "gfx/interface/icons/message_feed/conciliation.dds"
			is_shown = { always = no }
			is_valid = { always = no }
			ai_chance = {
				value = 100
			}
		}
		
		item = {	# Harondor
			value = reintegrate_province_harondor
			current_description = decision_restore_gondor_province.tt.harondor_desc
			localization = decision_restore_gondor_province.tt.harondor
			icon = "gfx/interface/icons/message_feed/conciliation.dds"
			is_shown = { show_harondor_trigger = yes }
			is_valid = {
				completely_controls = title:k_harondor
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Harnendor
			value = reintegrate_province_harnendor
			current_description = decision_restore_gondor_province.tt.harnendor_desc
			localization = decision_restore_gondor_province.tt.harnendor
			icon = "gfx/interface/icons/message_feed/steward_job.dds"
			is_shown = { show_harnendor_trigger = yes }
			is_valid = {
				completely_controls = title:k_mirlond
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Andrast
			value = reintegrate_province_andrast
			current_description = decision_restore_gondor_province.tt.andrast_desc
			localization = decision_restore_gondor_province.tt.andrast
			icon = "gfx/interface/icons/message_feed/gondorian_clansmen.dds"
			is_shown = { show_andrast_trigger = yes }
			is_valid = {
				completely_controls = title:k_andrast
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Umbar
			value = reintegrate_province_umbar
			current_description = decision_restore_gondor_province.tt.umbar_desc
			localization = decision_restore_gondor_province.tt.umbar
			icon = "gfx/interface/icons/message_feed/compass_light.dds"
			is_shown = { show_umbar_trigger = yes }
			is_valid = {
				completely_controls = title:k_umbar
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Calenardhon
			value = reintegrate_province_calenardhon
			current_description = decision_restore_gondor_province.tt.calenardhon_desc
			localization = decision_restore_gondor_province.tt.calenardhon
			icon = "gfx/interface/icons/message_feed/helmingas_warriors.dds"
			is_shown = { show_calenardhon_trigger = yes }
			is_valid = {
				completely_controls_region = middleearth_west_rohan
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Dor Rhúnen
			value = reintegrate_province_dor_rhunen
			current_description = decision_restore_gondor_province.tt.dor_rhunen_desc
			localization = decision_restore_gondor_province.tt.dor_rhunen
			icon = "gfx/interface/icons/message_feed/harondorim_rangers.dds"
			is_shown = { show_dor_rhunen_trigger = yes }
			is_valid = {
				completely_controls = title:k_south_rhovanion
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Enedhwaith	- RK/NiE Only
			value = reintegrate_province_enedhwaith
			current_description = decision_restore_gondor_province.tt.enedhwaith_desc
			localization = decision_restore_gondor_province.tt.enedhwaith
			icon = "gfx/interface/icons/message_feed/generic_neutral_effect.dds"
			is_shown = { show_enedhwaith_trigger = yes }
			is_valid = {
				completely_controls = title:k_druwaith
				completely_controls = title:k_enedhwaith
				completely_controls = title:k_dunland
			}
			ai_chance = {
				value = 100
			}
		}
		item = {	# Eregion		- RK/NiE Only
			value = reintegrate_province_eregion
			current_description = decision_restore_gondor_province.tt.eregion_desc
			localization = decision_restore_gondor_province.tt.eregion
			icon = "gfx/interface/icons/message_feed/a_catch_all_councillor_icon.dds"
			is_shown = { show_eregion_trigger = yes }
			is_valid = {
				completely_controls = title:k_eregion
			}
			ai_chance = {
				value = 100
			}
		}
	}
	
	effect = {
		play_music_cue = lotr_cue_gondor
		if = {		# Fallback - Displays as effect if no others available
			limit = {
				scope:reintegrate_province_fallback = yes
			}
			custom_tooltip = restore_province_fallback_effect.tt
		}
		else_if = {		# Harondor
			limit = {
				scope:reintegrate_province_harondor = yes
			}
			custom_tooltip = reclaim_harondor_decision
			root = { save_scope_as = new_ruler }
			title:k_harondor = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_harondor = {
				change_development_level = 3
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:reclaim_harondor_decision
			}
			trigger_event = gondor.1000
			save_scope_as = restorer
			# Send event to other players
			every_player = { # TBD: proper news event
				limit = {
					NOT = { this = root }
					culture = {
						OR = {
							has_cultural_pillar = heritage_daen_coentis
							has_cultural_pillar = heritage_daen_lintis
							has_cultural_pillar = heritage_danan_lin
							has_cultural_pillar = heritage_northern_apysaic
							has_cultural_pillar = heritage_dunedain
							has_cultural_pillar = heritage_northern_adunaic
							has_cultural_pillar = heritage_hadorim
						}
					}
				}
				trigger_event = gondor.1001
			}
		}
		else_if = {		# Harnendor
			limit = {
				scope:reintegrate_province_harnendor = yes
			}
			custom_tooltip = reclaim_harnendor_decision
			root = { save_scope_as = new_ruler }
			title:k_mirlond = {
				set_appropriate_de_jure_liege = yes
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:reclaim_harnendor_decision
			}
		}
		else_if = {	# Andrast
			limit = {
				scope:reintegrate_province_andrast = yes
			}
			custom_tooltip = integrate_andrast_decision
			root = { save_scope_as = new_ruler }
			title:k_andrast = {
				set_appropriate_de_jure_liege = yes
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:integrate_andrast_decision
			}
			title:k_andrast = {
				change_development_level = 3
			}
			save_scope_as = restorer
			trigger_event = gondor.1002
		}
		else_if = {	# Umbar
			limit = {
				scope:reintegrate_province_umbar = yes
			}
			custom_tooltip = reclaim_umbar_decision
			root = { save_scope_as = new_ruler }
			title:k_umbar = {
				set_appropriate_de_jure_liege = yes
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:reclaim_umbar_decision
			}
			if = {
				limit = {
					NOT = { has_character_flag = had_nickname_event }
				}
				give_nickname = nick_southernvictor
				add_character_flag = had_nickname_event
			}
			save_scope_as = restorer
			trigger_event = gondor.1003
		}
		else_if = {	# Calenardhon
			limit = {
				scope:reintegrate_province_calenardhon = yes
			}
			custom_tooltip = integrate_calenardhon_decision
			root = { save_scope_as = new_ruler }
			title:k_rohan = {
				set_appropriate_de_jure_liege = yes
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:integrate_calenardhon_decision
			}
				
			trigger_event = gondor.2500
			save_scope_as = restorer
			# Send event to other players
			every_player = { # TBD: proper news event
				limit = {
					NOT = { this = root }
					culture = {
						OR = {
							has_cultural_pillar = heritage_daen_coentis
							has_cultural_pillar = heritage_daen_lintis
							has_cultural_pillar = heritage_danan_lin
							has_cultural_pillar = heritage_northern_apysaic
							has_cultural_pillar = heritage_dunedain
							has_cultural_pillar = heritage_northern_adunaic
							has_cultural_pillar = heritage_hadorim
							has_cultural_pillar = heritage_northron
						}
					}
				}
				trigger_event = gondor.2501
			}
			
			if = {
				limit = { 
					NOT = { exists = global_var:lotr_achievement_09 }
					is_ai = no
					realms_achievements_enabled = yes
				}
				set_global_variable = lotr_achievement_09
			}
		}
		else_if = {	# Dor Rhúnen
			limit = {
				scope:reintegrate_province_dor_rhunen = yes
			}
			custom_tooltip = reclaim_dor_rhunen_decision
			root = { save_scope_as = new_ruler }
			title:k_south_rhovanion = {
				set_appropriate_de_jure_liege = yes
			}
	
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:reclaim_dor_rhunen_decision
			}
			if = {
				limit = {
					NOT = { has_character_flag = had_nickname_event }
				}
				give_nickname = nick_romendacil
				add_character_flag = had_nickname_event
			}
			save_scope_as = restorer
			trigger_event = gondor.2700
		}
		else_if = {	# Enedhwaith	- RK/NiE Only
			limit = {
				scope:reintegrate_province_enedhwaith = yes
			}
			custom_tooltip = claim_enedhwaith_decision
			root = { save_scope_as = new_ruler }
			title:k_druwaith = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_enedhwaith = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_dunland = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_druwaith = {
				change_development_level = 3
			}
			title:k_enedhwaith = {
				change_development_level = 3
			}
			title:k_dunland = {
				change_development_level = 3
			}
			
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_claim_enedhwaith
			}
		}
		else_if = {	# Eregion		- RK/NiE Only
			limit = {
				scope:reintegrate_province_eregion = yes
			}
			custom_tooltip = integrate_eregion_decision
			root = { save_scope_as = new_ruler }
			title:k_eregion = {
				set_appropriate_de_jure_liege = yes
			}
			title:k_eregion = {
				change_development_level = 3
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_integrate_eregion
			}
		}
		
		else = {
			
		}

		if = { # Everydacil | Achievement 
			limit = {
				NOT = { exists = global_var:lotr_achievement_54 }
				is_ai = no
				realms_achievements_enabled = yes
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:integrate_calenardhon_decision
				}
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:reclaim_dor_rhunen_decision
				}
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:reclaim_umbar_decision
				}
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:integrate_andrast_decision
				}
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:reclaim_harnendor_decision
				}
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:reclaim_harondor_decision
				}
			}
			set_global_variable = lotr_achievement_54
		}
		
		hidden_effect = {
			dynasty = {
				if = {
					limit = {
						exists = var:reintegrated_provinces_counter
					}
					change_variable = {
						name = reintegrated_provinces_counter
						add = 1
					}
				}
				else = {
					set_variable = {
						name = reintegrated_provinces_counter
						value = 1
					}
				}
			}
		}
	}
	
	cost = {
		gold = {
			if = {
				limit = {
					is_ai = no
				}
				value = 250
			}
			else = {
				value = 1
			}
		}
		prestige = {
			if = {
				limit = {
					is_ai = no
				}
				value = 500
			}
			else = {
				value = 1
			}
		}
	}
	
	ai_goal = yes
	
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 1000
	}
}

## Watch on Mordor decisions ##

decision_recreate_watch_on_mordor = {
	title = decision_recreate_watch_on_mordor
	picture = "gfx/interface/illustrations/decisions/decision_barad_dur_01.dds"
	major = yes
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
		
	desc = decision_recreate_watch_on_mordor_desc
	selection_tooltip = decision_recreate_watch_on_mordor_desc_tooltip
	confirm_text = decision_recreate_watch_on_mordor_confirm
		
	is_shown = {
		#current_year >= 3000
		culture = { has_cultural_pillar = heritage_dunedain }
		is_landed = yes
		OR = {
			has_primary_title = title:e_gondor
			has_primary_title = title:e_gondor_steward
			has_primary_title = title:e_arnor
			has_primary_title = title:e_numenor_in_exile
			has_primary_title = title:e_reunitedkingdom
			has_primary_title = title:e_bellakar
			has_primary_title = title:e_castamir
		}
		NOR = {
			exists = title:e_mordor.holder
			exists = title:d_watch_on_mordor.holder
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_recreate_watch_on_mordor
			}
		}
	}
	is_valid = {
		completely_controls = title:c_morannon
		completely_controls = title:c_durthang
		completely_controls = title:c_cirith_ungol
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
	}
	cost = {
		gold = 100
	}
	effect = {
		trigger_event = {
			id = gondor.4001
		}
		add_prestige = major_prestige_gain
		add_to_global_variable_list = {
            name = unavailable_unique_decisions
            target = flag:decision_recreate_watch_on_mordor
        }
		remove_list_global_variable = {
   		name = unavailable_unique_decisions
   			target = flag:decision_abandon_watch_on_mordor
		}
	}
}


decision_abandon_watch_on_mordor = {
	title = decision_abandon_watch_on_mordor
	picture = "gfx/interface/illustrations/decisions/decision_barad_dur_01.dds"
	major = yes
	ai_goal = yes
	ai_potential = { 
		always = no
	}
	ai_will_do = { 
		base = 0
	}
	
	desc = decision_abandon_watch_on_mordor_desc
	selection_tooltip = decision_abandon_watch_on_mordor_desc_tooltip
	confirm_text = decision_abandon_watch_on_mordor_confirm
		
	is_shown = {
		#current_year >= 3000
		culture = { has_cultural_pillar = heritage_dunedain }
		is_landed = yes
		exists = title:d_watch_on_mordor.holder
		OR = {
			has_primary_title = title:e_gondor
			has_primary_title = title:e_gondor_steward
			has_primary_title = title:e_arnor
			has_primary_title = title:e_numenor_in_exile
			has_primary_title = title:e_reunitedkingdom
			has_primary_title = title:e_bellakar
			has_primary_title = title:e_castamir
		}
		NOR = {
			exists = title:e_mordor.holder
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_abandon_watch_on_mordor
			}
		}
	}
	is_valid = {
		exists = title:d_watch_on_mordor.holder
		completely_controls = title:c_morannon # The Commander of the Watch has to be your vasall
		completely_controls = title:c_durthang # otherwise players could destroy a watch that someone else established
		completely_controls = title:c_cirith_ungol
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
	}
	cost = {
		prestige = 500
	}
	effect = {
		custom_tooltip = decision_abandon_watch_on_mordor_custom_desc
		trigger_event = {
			id = gondor.4002
		}
		add_to_global_variable_list = {
            name = unavailable_unique_decisions
            target = flag:decision_abandon_watch_on_mordor
        }
		remove_list_global_variable = {
			name = unavailable_unique_decisions
   			target = flag:decision_recreate_watch_on_mordor
		}
	}
}




## Arnor Decision ##
decision_adopt_arnorian_culture = {
	sort_order = 97
	# TEXT
	title = decision_adopt_arnorian_culture
	picture = "gfx/interface/illustrations/decisions/decision_fornost_02.dds"
	selection_tooltip = decision_adopt_arnorian_culture_tooltip
	desc = decision_adopt_arnorian_culture_desc
	confirm_text = decision_adopt_arnorian_culture_confirm
	ai_check_interval = 60
	# IS_SHOWN
	is_shown = {
		has_culture = culture:dunedain_ranger
		capital_province = { geographical_region = middleearth_west_arnor }
	}
	
	# IS_VALID
	is_valid = {
		root.realm_size >= 20
	}
	is_valid_showing_failures_only = {
		is_imprisoned = no
		is_available_adult = yes
		is_at_war = no
	}
	
	# EFFECT 
	effect = {

		play_music_cue = lotr_cue_gondor
		set_culture = culture:arnorian
		
		if = { #juke note: this code should be refined so it works with multiple spouses, though its unlikely to happen
			limit = { 
				any_spouse = { 
					is_landed = no 
					culture = culture:dunedain_ranger
				} 
			}
			every_spouse = {
				limit = {
					is_landed = no
					culture = culture:dunedain_ranger
				}
				if = {
					limit = { is_ai = yes }
					set_culture = culture:arnorian
				}
			}
		}
		if = {
			limit = {
				any_close_family_member = {
					is_landed = no
					NOT = { is_spouse_of = root }
					culture = culture:dunedain_ranger
				}
			}
			every_close_family_member = {
				limit = {
					is_landed = no
					NOT = { is_spouse_of = root }
					culture = culture:dunedain_ranger
				}
				custom = all_unlanded_family_members
				if = {
					limit = { is_ai = yes }
					set_culture = culture:arnorian
				}
			}
		}
		if = {
			limit = {
				any_child = {
					culture = culture:dunedain_ranger
				}
			}
			every_child = {
				limit = {
					NOT = { 
						culture = culture:dunedain_ranger
					}
				}
				custom = all_children_custom
				if = {
					limit = { is_ai = yes }
					set_culture = culture:arnorian
				}
			}
		}

		#Convert appropriate vassals, and their family
		if = {
			limit = {
				any_vassal_or_below = {
					culture = culture:dunedain_ranger
				}
			}
			every_vassal_or_below = {
				custom = decision_adopt_arnorian_culture_vassal_custom
				limit = {
					culture = culture:dunedain_ranger
				}
				if = {
					limit = { is_ai = yes }
					set_culture = culture:arnorian
				}
				hidden_effect = {
					if = {
						limit = { 
							any_spouse = { 
								is_landed = no
								culture = culture:dunedain_ranger
							} 
						}
						every_spouse = {
							limit = {
								is_landed = no
								culture = culture:dunedain_ranger
							}
							if = {
								limit = { is_ai = yes }
								set_culture = culture:arnorian
							}
						}
					}
					if = {
						limit = {
							any_close_family_member = {
								is_landed = no
								NOT = { is_spouse_of = prev }
								culture = culture:dunedain_ranger
							}
						}
						every_close_family_member = {
							limit = {
								is_landed = no
								NOT = { is_spouse_of = prev }
								culture = culture:dunedain_ranger
							}
							custom = all_unlanded_family_members
							if = {
								limit = { is_ai = yes }
								set_culture = culture:arnorian
							}
						}
					}
					if = {
						limit = {
							any_child = {
								culture = culture:dunedain_ranger
							}
						}
						every_child = {
							limit = {
								culture = culture:dunedain_ranger
							}
							custom = all_children_custom
							if = {
								limit = { is_ai = yes }
								set_culture = culture:arnorian
							}
						}
					}
					if = {
						limit = {
							any_vassal_or_below = {
								culture = culture:dunedain_ranger
							}
						}
						every_vassal_or_below = {
							custom = decision_reunify_dunedain_vassals_custom
							limit = {
								culture = culture:dunedain_ranger
							}
							if = {
								limit = { is_ai = yes }
								set_culture = culture:arnorian
							}
							hidden_effect = {
								if = {
									limit = { 
										any_spouse = { 
											is_landed = no 
											culture = culture:dunedain_ranger
										} 
									}
									every_spouse = {
										limit = {
											is_landed = no
											culture = culture:dunedain_ranger
										}
										if = {
											limit = { is_ai = yes }
											set_culture = culture:arnorian
										}
									}
								}
								if = {
									limit = {
										any_close_family_member = {
											is_landed = no
											NOT = { is_spouse_of = prev }
											culture = culture:dunedain_ranger
										}
									}
									every_close_family_member = {
										limit = {
											is_landed = no
											NOT = { is_spouse_of = prev }
											culture = culture:dunedain_ranger
										}
										custom = all_unlanded_family_members
										if = {
											limit = { is_ai = yes }
											set_culture = culture:arnorian
										}
									}
								}
								if = {
									limit = {
										any_child = {
											culture = culture:dunedain_ranger
										}
									}
									every_child = {
										limit = {
											culture = culture:dunedain_ranger
										}
										custom = all_children_custom
										if = {
											limit = { is_ai = yes }
											set_culture = culture:arnorian
										}
									}
								}
							}
						}
					}
				}
			}
		}

		#Flip Counties
		every_county = {
			custom = decision_adopt_arnorian_culture_province_custom
			limit = {
				OR = {
					holder = root
					holder.top_liege = root
				}
				culture = culture:dunedain_ranger
			}
			set_county_culture = culture:arnorian
		}
	}

	# AI
	ai_goal = no
	ai_potential = { always = no }
	ai_will_do = { base = 100 }
}

decision_integrate_the_northern_provinces = {
	title = decision_integrate_the_northern_provinces
	picture = "gfx/interface/illustrations/decisions/decision_rhudaur_02.dds"
	major = yes
	selection_tooltip = decision_integrate_the_northern_provinces_tooltip
	desc = decision_integrate_the_northern_provinces_desc
	confirm_text = decision_integrate_the_northern_provinces_confirm

	
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}

	is_shown = {
		is_independent_ruler = yes
		
		lotr_has_numenorean_culture_trigger = yes
		
		OR = {
			has_title = title:e_arnor
			AND = {
				has_title = title:e_reunitedkingdom
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:decision_solidify_reunited_kingdom
				}
			}
			AND = {
				has_title = title:e_numenor_in_exile
				is_target_in_global_variable_list = {
					name = unavailable_unique_decisions
					target = flag:decision_numenor_in_exile
				}
			}
		}
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_integrate_the_northern_provinces
			}
		}
	}

	is_valid = {
        completely_controls_region = custom_lowlands_angmar
        completely_controls = title:k_forochel
    }

    is_valid_showing_failures_only = {
        is_imprisoned = no
        is_available_adult = yes
        is_at_war = no
    }

	effect = {
		trigger_event = {
			id = gondor.3600
			days = 1
		}
		dynasty = { add_dynasty_prestige = 500 }
		hidden_effect = {
			if = {
				limit = {
					has_title = title:e_reunitedkingdom
					is_target_in_global_variable_list = {
						name = unavailable_unique_decisions
						target = flag:decision_solidify_reunited_kingdom
					}
				}
				title:k_angmar = { set_de_jure_liege_title = title:e_reunitedkingdom }
				title:k_forochel = { set_de_jure_liege_title = title:e_reunitedkingdom }
			}
			else_if = {
				limit = { has_title = title:e_numenor_in_exile }
				title:k_angmar = { set_de_jure_liege_title = title:e_numenor_in_exile }
				title:k_forochel = { set_de_jure_liege_title = title:e_numenor_in_exile }
			}
			else = {
				title:k_angmar = { set_de_jure_liege_title = title:e_arnor }
				title:k_forochel = { set_de_jure_liege_title = title:e_arnor }
			}	
		}	
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:decision_integrate_the_northern_provinces
		}
	}	
}

decision_rebuild_royal_road = {
	title = decision_rebuild_royal_road
	picture = "gfx/interface/illustrations/decisions/decision_castle.dds"
	major = yes
	selection_tooltip = decision_rebuild_royal_road_tooltip
	desc = decision_rebuild_royal_road_desc
	confirm_text = decision_rebuild_royal_road_confirm
	
	ai_goal = yes
	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}

	is_shown = {
		current_year >= 6000 #the road has fallen into disrepair
		#is_independent_ruler = yes
		
		OR = {
			has_title = title:e_arnor
			has_title = title:e_reunitedkingdom
			has_title = title:e_numenor_in_exile
			has_title = title:e_gondor
			has_title = title:e_gondor_steward
			has_title = title:e_numenor_colonies
			has_title = title:e_enedhwaith
			has_title = title:e_castamir
			has_title = title:e_adunaim
			has_title = title:k_cardolan
			has_title = title:k_arthedain
			has_title = title:k_enedhwaith
			has_title = title:k_rohan
			#has_title = title:k_gondor
		}
		OR = {
			lotr_has_numenorean_culture_trigger = yes
			is_dwarf = yes
		}
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_rebuild_royal_road
			}
		}
	}
	
	is_valid = {
		calc_true_if = { # Need control of roughly 70% of the road
			amount >= 10
			
			completely_controls = title:c_tharbad
			completely_controls = title:c_harabad
			completely_controls = title:c_larcnoc
			completely_controls = title:c_thalion
			completely_controls = title:c_adandor
			completely_controls = title:c_maerndor
			completely_controls = title:c_andrath
			completely_controls = title:c_cardhbain
			completely_controls = title:c_tormcaladach
			completely_controls = title:c_gapofrohan
			completely_controls = title:c_fornost
			completely_controls = title:c_riverwatch
			completely_controls = title:c_bree
			completely_controls = title:c_galtrev

		}
    }
	
    is_valid_showing_failures_only = {
        is_imprisoned = no
        is_available_adult = yes
        is_at_war = no
    }
	
	effect = {
		add_prestige = 1000
		dynasty = { add_dynasty_prestige = 500 }
		#add_dynasty_modifier = royal_road_rebuilt
		trigger_event = gondor.5001
		
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:decision_rebuild_royal_road
			}
		}
	}
	
	cost = {
		gold = 800
	}

}
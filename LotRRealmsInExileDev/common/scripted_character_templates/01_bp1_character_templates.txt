##################################################
# #BP1 Templates

#doppelganger
bp1_doppelganger_template = {
	#General
	age = root.age
	faith = root.capital_province.faith
#	culture = root.culture
	random_culture = {
		root.culture = {
			trigger = {
				root_culture_allowed = yes
			}
		}
		root.capital_county.culture = {
			trigger = {
				capital_culture_trigger = yes
			}
		}
		culture:isengard_dunlending = {
			trigger = {
				isengard_dunlending_trigger = yes
			}
		}
		culture:isengard_urukhai = {
			trigger = {
				isengard_urukhai_trigger = yes
			}
		}
		culture:morlughai = {
			trigger = {
				morlughai_trigger = yes
			}
		}
		culture:black_numenorean = {
			trigger = {
				black_numenorean_trigger = yes
			}
		}
		culture:pust = {
			trigger = {
				pust_trigger = yes
			}
		}
	} # Ensure they have the same ethnicity as root
	dynasty = none
	#Misc
	random_traits = yes
	gender_female_chance = root_self_based_female_chance

	after_creation = {
		copy_inheritable_appearance_from = root
		set_culture = root.capital_province.culture # Make them a local
		random_list = { # We generally want there to be a chance that either you or a spouse falls in love with this person
			50 = {
				# Try to set the sexuality to be the same as ROOT's so they are likely to cause drama with lovers
				if = {
					limit = {
						root = { has_sexuality = asexual }
					}
					set_sexuality = asexual
				}
				else_if = {
					limit = {
						root = { has_sexuality = bisexual }
					}
					set_sexuality = bisexual
				}
				else_if = {
					limit = {
						root = { has_sexuality = heterosexual }
					}
					set_sexuality = heterosexual
				}
				else_if = {
					limit = {
						root = { has_sexuality = homosexual }
					}
					set_sexuality = homosexual
				}
			}
			50 = {
				# Make them a threat to everyone
				set_sexuality = bisexual
			}
		}
		if = {
			limit = {
				root = { has_trait = beauty_good_2 }
			}
			add_trait = beauty_good_3
		}
		else_if = {
			limit = {
				root = { has_trait = beauty_good_1 }
			}
			add_trait = beauty_good_2
		}
		else_if = {
			limit = {
				root = { has_trait = beauty_good_3 }
			}
			random_list = {
				33 = { add_trait = beauty_bad_1 }
				33 = { add_trait = beauty_bad_2 }
				33 = { add_trait = beauty_bad_3 }
			}
		}
		else = {
			add_trait = beauty_good_1
		}
		if = {
			limit = { is_elf = yes }
			replace_unelven_traits = yes
		}
	}
}

#beautiful bisexual
bp1_bisexual_partner_template = {
	#General
	age = { 20 35 }
	faith = root.faith
#	culture = root.culture
	random_culture = {
		root.culture = {
			trigger = {
				root_culture_allowed = yes
			}
		}
		root.capital_county.culture = {
			trigger = {
				capital_culture_trigger = yes
			}
		}
		culture:isengard_dunlending = {
			trigger = {
				isengard_dunlending_trigger = yes
			}
		}
		culture:isengard_urukhai = {
			trigger = {
				isengard_urukhai_trigger = yes
			}
		}
		culture:morlughai = {
			trigger = {
				morlughai_trigger = yes
			}
		}
		culture:black_numenorean = {
			trigger = {
				black_numenorean_trigger = yes
			}
		}
		culture:pust = {
			trigger = {
				pust_trigger = yes
			}
		}
	}
	dynasty = none
	#Misc
	random_traits = yes
	gender_female_chance = root_self_based_female_chance

	after_creation = {
		set_sexuality = bisexual
		random_list = {
			20 = {
				add_trait = beauty_good_3
			}
			30 = {
				add_trait = beauty_good_2
			}
			50 = {
				add_trait = beauty_good_1
			}
		}
		if = {
			limit = { is_elf = yes }
			change_age = { 100 6950 }
			replace_unelven_traits = yes
		}
		if = {
			limit = { is_dwarf = yes }
			change_age = { 65 180 }
		}
		# LotR: The Dúnedain preserved the blood
        if = {
			limit = {
				current_year < 5500
				culture ?= {	
                    has_cultural_pillar = heritage_dunedain 
				}
			}
			random_list = {
				25 = { add_trait = blood_of_numenor_6 }
				35 = { add_trait = blood_of_numenor_5 }
				25 = { add_trait = blood_of_numenor_4 }
				15 = { add_trait = blood_of_numenor_3 }
			}
		}
		
        ### Low Blood ###

        if = { 
			limit = {
                OR = {

                    # LotR: Gondor-adjacent cultures and southern realms

                    AND = { 		
                        current_year < 5500
						culture ?= {
							OR = { 
								has_cultural_pillar = heritage_bellakari 
								has_cultural_pillar = heritage_northern_adunaic 
								has_cultural_pillar = heritage_southern_adunaic                 
							}
						}
                    }
                    
                    # LotR: Blood of westerness preserved in the north 
                    
                    AND = {				
                        current_year >= 5500 
						culture ?= {
							OR = {	
                            	any_parent_culture_or_above = { this = culture:arnorian }
								this = culture:dunedain 
							} 
                        }
                    }                    
                }                
			}
			random_list = {
				25 = { add_trait = blood_of_numenor_4 }
				35 = { add_trait = blood_of_numenor_3 }
				25 = { add_trait = blood_of_numenor_2 }
				15 = { add_trait = blood_of_numenor_1 }
			}
		}

        ### Fadded Blood ###

		# LotR: The blessings of Númenor faded quicker in Gondor and the south
		if = {
			limit = {
				current_year >= 5500
				OR = {
					culture ?= {
						OR = {
							this = culture:bellakarani
							this = culture:kharadunaim
							has_cultural_pillar = heritage_dunedain
							any_parent_culture_or_above = { this = culture:kharadunaim }
							any_parent_culture_or_above = { this = culture:bellakarani }
							any_parent_culture_or_above = { this = culture:gondorian }    
						}
					}              
				}
			}
			random = {
				chance = 35
				add_trait = blood_of_numenor_1 
			}
		}
	}
}

@weight_up_ai_select_province_small = 10
@weight_up_ai_select_province_medium = 50
@weight_up_ai_select_province_large = 250
@weight_up_ai_select_province_massive = 500

@feast_cost_gold_low = tiny_gold_value
@feast_cost_gold_medium = medium_gold_value
@feast_cost_gold_high = major_gold_value

activity_sorcery = {
	is_shown = { #TODO
		has_trait = sorcerer_trait
		is_playable_character = yes
		is_in_valinor = no
	}

	can_start_showing_failures_only = {
		is_available_adult = yes
		trigger_if = {
			limit = { has_variable = spell_selected }
			custom_tooltip = {
				text = activity_sorcery_select_spell_trigger
				var:spell_selected != flag:default
			}
		} 
		trigger_else = {
			custom_tooltip = {
				text = activity_sorcery_select_spell_trigger
				always = no
			}
		}

	}

	is_valid = { #TODO
	}
	
	on_host_death = { #TODO
	}

	on_invalidated = { #TODO
	}

	###################
	# PARAMETERS
	###################

	is_single_location = yes

	province_filter = all
	ai_province_filter = all

	max_route_deviation_mult = 1.0

	is_location_valid = { #TODO
		OR = { #Generic check
			province_owner ?= { faith_is_evil = yes }
			province_owner ?= title:k_wastelands.holder
		}
		OR = { #Checking for specific provinces
			AND = {
				this = title:c_barad_dur.title_province
				title:c_barad_dur.title_province = { has_building_or_higher = wonder_baraddur }
			}
			AND = {
				this = title:c_amon_lanc.title_province
				title:c_amon_lanc.title_province = { has_building = wonder_amon_lanc_02 }
			}
			AND = {
				this = title:c_minas_ithil.title_province
				title:c_minas_ithil.title_province = { has_building = wonder_minas_ithil_02 } 
			}
			AND = {
				this = title:c_nabal_mayzri.title_province
				title:c_nabal_mayzri.title_province = { has_building = wonder_temple_sulereb_02 } 
			}
			AND = {
				this = title:c_carn_dum.title_province
				title:c_carn_dum.title_province = { has_building_or_higher = wonder_carn_dum_01 } 
			}
			AND = {
				this = title:c_isengard.title_province
				title:c_isengard.title_province = { has_building_or_higher = wonder_angrenost_01 } 
			}
			AND = {
				this = title:c_korlea.title_province
				title:c_korlea.title_province = { has_building_or_higher = wonder_haven_korlea_01 } 
			}
			AND = {
				this = title:c_ardinak.title_province
				title:c_ardinak.title_province = { has_building_or_higher = wonder_ardinak_01 } 
			}
		}
	}

	province_description = { #TODO
		desc = activity_sorcery_province_desc
		# +++ / triple plus good
		triggered_desc = { #Barad-dur
			trigger = { has_building_or_higher = wonder_baraddur }
			desc = activity_sorcery_barad_dur
		}
		triggered_desc = { #Minas Ithil
			trigger = { has_building = wonder_minas_ithil_02 }
			desc = activity_sorcery_minas_ithil
		}
		triggered_desc = { #Dol Guldur
			trigger = { has_building = wonder_amon_lanc_02 }
			desc = activity_sorcery_dol_guldur
		}
		triggered_desc = { #Obsidian Temple
			trigger = { has_building = wonder_temple_sulereb_02 }
			desc = activity_sorcery_temple_sulereb
		}
		triggered_desc = { #Szrel-Kain
			trigger = { has_building = wonder_szrel_kain }
			desc = activity_sorcery_szrel_kain
		}
		triggered_desc = { #Carn Dum
			trigger = { has_building_or_higher = wonder_carn_dum_01 }
			desc = activity_sorcery_carn_dum
		}
		triggered_desc = { #Evil Isengard
			trigger = { has_building_or_higher = wonder_angrenost_01 }
			desc = activity_sorcery_orthanc_evil
		}
		triggered_desc = { #Haven of Korlea
			trigger = { has_building_or_higher = wonder_haven_korlea_01 }
			desc = activity_sorcery_haven_korlea
		}
		triggered_desc = { #Ardinak
			trigger = { has_building_or_higher = wonder_ardinak_01 }
			desc = activity_sorcery_ardinak
		}

		# + / single plus good
		triggered_desc = { # Is your capital
			trigger = { this.county = scope:host.capital_county }
			desc = activity_sorcery_capital_province
		}

		
		# -- / double minus bad
		triggered_desc = { # Elven Province
			trigger = { county = { has_county_modifier = elven_homeland_county_modifier } }
			desc = activity_sorcery_elven_province
		}
	}

	# max_province_icons = 5

	province_score = { #TODO
		value = 0

		# +++ / triple plus good
		if = {
			limit = { has_building_or_higher = wonder_baraddur }
			add = 10
		}
		if = {
			limit = { has_building = wonder_minas_ithil_02 }
			add = 10
		}
		if = {
			limit = { has_building = wonder_amon_lanc_02 }
			add = 10
		}
		if = {
			limit = { has_building = wonder_temple_sulereb_02 }
			add = 10
		}
		if = {
			limit = { has_building = wonder_szrel_kain }
			add = 10
		}
		if = {
			limit = { has_building_or_higher = wonder_carn_dum_01 }
			add = 10
		}
		if = {
			limit = { has_building_or_higher = wonder_angrenost_01 }
			add = 10
		}
		if = {
			limit = { has_building_or_higher = wonder_ardinak_01 }
			add = 10
		}
		if = {
			limit = { has_building_or_higher = wonder_haven_korlea_01 }
			add = 10
		}

	}

	cooldown = { years = 20 }

	# desc is only shown in debug AI watch window
	ai_will_do = { #TODO
		add = {
			value = 30
			desc = "Base"
		}
	}

	###################
	# GUEST HANDLING
	###################

	allow_zero_guest_invites = yes

	max_guests = 1

	guest_invite_rules = {
		defaults = {
			1 = activity_invite_rule_sorcerer_apprentice
		}
	}

	can_be_activity_guest = {
		is_lotr_adult = yes
		is_healthy = yes
		in_diplomatic_range = scope:host
		has_relation_master_sorcerer = scope:host
	}

	host_intents = {
		intents = { #TODO. Intents should be a list of all possible spells
			### Death Spells ###
			life_extension_intent
			raise_undead_host_intent
			pestilence_intent
			blighting_lands_intent
			### Destruction Spells ###
			illusion_intent
			fair_visage_intent
			enfeeblement_intent
			dark_influence_intent
			### Deception Spells ###
			dark_empowerment_intent
			invoke_watchers_intent
			endless_hordes_intent
			dark_beasts_intent
		}
		default = life_extension_intent
	}

	guest_intents = {
		intents = { reduce_stress_intent }
		default = reduce_stress_intent
	}

	guest_join_chance = {
		base = 10
		base_activity_modifier = yes

		# Scripted Modifiers
		activity_guest_shared_ai_accept_modifier = yes 
		activity_guest_feast_ai_accept_modifier = yes
	}

	special_guests = {
		
		sorcery_sacrifice = { #Murder guest, localization changes for host
			is_required = no

			is_shown = {
				always = yes
			}

			can_pick = {
				NOT = { this = scope:host }
				cannot_be_killed = no
			}
			
			ai_will_do = {
				value = 100
			}
		}
	}

	travel_entourage_selection = { #TODO
		weight = {
			value = standard_travel_entourage_additions
		}
		max = 18
		invite_rule_order = 3
	}

	cost = { #TODO
		gold = 100
	}

	ui_predicted_cost = { #TODO
		gold = 100
	}

	###################
	# OPTIONS
	###################
	# special_option_category = special_type

	options = {
		death_spell_level = {
			death_spell_level_1 = {
				default = yes
				
				is_shown = {
					OR = {
						has_activity_intent = life_extension_intent
						has_activity_intent = raise_undead_host_intent
						has_activity_intent = pestilence_intent
						has_activity_intent = blighting_lands_intent
					}
				}

				is_valid = { always = yes }

				ai_will_do = { value = 100 }
			}
			death_spell_level_2 = {
				is_shown = { always = yes }

				is_valid = { always = yes }

				ai_will_do = { value = 100 }
			}
			death_spell_level_3 = {
				is_shown = { always = yes }

				is_valid = { always = yes }

				ai_will_do = { value = 100 }
			}
		}
		destruction_spell_level = {
			destruction_spell_level_1 = {
				default = yes

				is_shown = { always = yes }

				is_valid = { always = yes }

				ai_will_do = { value = 100 }
			}
			destruction_spell_level_2 = {
				is_shown = { always = yes }

				is_valid = { always = yes }

				ai_will_do = { value = 100 }
			}
			destruction_spell_level_3 = {
				is_shown = { always = yes }

				is_valid = { always = yes }

				ai_will_do = { value = 100 }
			}
		}
		deception_spell_level = {
			deception_spell_level_1 = {
				default = yes

				is_shown = { always = yes }

				is_valid = { always = yes }

				ai_will_do = { value = 100 }
			}
			deception_spell_level_2 = {
				is_shown = { always = yes }

				is_valid = { always = yes }

				ai_will_do = { value = 100 }
			}
			deception_spell_level_3 = {
				is_shown = { always = yes }

				is_valid = { always = yes }

				ai_will_do = { value = 100 }
			}
		}
	}

	###################
	# PHASES
	###################

	max_guest_arrival_delay_time = { months = 8 }

	phases = {
		# Meal.
		sorcery_preparation_phase = {		
			order = 1
			is_predefined = yes

			is_shown = { always = yes } #TODO
			is_valid = { #TODO
			}

			on_enter_phase = {
			}

			on_phase_active = { #TODO
				scope:activity = { progress_activity_phase_after = { weeks = 6 } }
				scope:activity.special_guest:sorcery_sacrifice = {
					save_scope_as = sacrifice
				}
				scope:host = { 
					trigger_event = { on_action = sorcery_on_action days = 7 }
				}
				scope:host = { 
					trigger_event = { on_action = sorcery_on_action days = 14 }
				}
				scope:host = { 
					trigger_event = { on_action = sorcery_on_action days = 21 }
				}
				scope:host = { 
					trigger_event = { on_action = sorcery_on_action days = 28 }
				}
				scope:host = { 
					trigger_event = { on_action = sorcery_on_action days = 35 }
				}
			}
			
			on_weekly_pulse = { #TODO
			}
		}

		# Toast.
		sorcery_aftermath_phase = {
			order = 2
			is_predefined = yes

			on_enter_phase = { #TODO
				scope:activity = { progress_activity_phase_after = { days = 1 } }
			}

			on_phase_active = { #TODO
				# scope:activity = { progress_activity_phase_after = { days = 2 } }
				# scope:host = { add_prestige  = 10000 }
				scope:activity = { progress_activity_phase_after = { days = 2 } }
			}
			
			on_weekly_pulse = { #TODO
			}

			on_end = { #TODO
				scope:host = { trigger_event = { id = lotr_sorcery_ritual.0100 days = 2 } }
			}
		}
	}

	ai_check_interval = 60

	ai_will_select_province = { #TODO
		value = 0
	}

	###################
	# ACTIVITY-SPECIFIC PULSES
	###################
	
	pulse_actions = {
		entries = { #TODO
		}
		chance_of_no_event = 5
	}
	
	on_start = { #TODO
		set_variable = {
			name = sorcery_success_chance
			value = sorcery_success_chance_value
		}
	}
	
	on_enter_passive_state = { } #TODO

	# Effects run when the activity completes after its last phase
	# root = character in this phase
	# scope:activity = the activity
	# scope:host = host of the activity
	on_complete = { } #TODO

	###################
	# GRAPHICS
	###################

	### Plug in widgets
	activity_window_widgets = { # DONE
		sorcery_success_chance = "activity_plugin_widgets_summary"
		artifact_rewards = "activity_plugin_widgets_conclusion"
		trait_rewards = "activity_plugin_widgets_conclusion"
	}

	window_characters = {
		
		guest = { #TODO
			camera = camera_event_right

			effect = { } #TODO

			scripted_animation = { } #TODO
		}
		
		host = { #TODO
			camera = camera_event_center
			
			effect = { } #TODO

			scripted_animation = { } #TODO
		}
	}

	map_entity = {
		trigger = {
			activity_location.culture = {
				OR = {
					has_graphical_mena_culture_group_trigger = yes
					has_graphical_steppe_culture_group_trigger = yes
					has_graphical_african_culture_group_trigger = yes
				}
			}
		}
		reference = "building_mena_feast_01_entity"
	}

	map_entity = {
		trigger = {
			activity_location.culture = {
				has_graphical_india_culture_group_trigger = yes
			}
		}
		reference = "building_indian_feast_01_entity"
	}
	
	map_entity = "building_western_feast_01_entity"

	# Travel
	background = { # Bridge
		trigger = {
			OR = {
				NOT = {
					scope:host.location = scope:activity.activity_location
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest.location
					NOT = {
						scope:activity.special_guest:honorary_guest.location ?= scope:activity.activity_location
					}
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest_regular.location
					NOT = {
						scope:activity.special_guest:honorary_guest_regular.location ?= scope:activity.activity_location
					}
				}
			}
			scope:host.location = {
				is_riverside_province = yes
				geographical_region = world_europe
				OR = {
					terrain = farmlands
					terrain = plains
					terrain = mountains
					terrain = hills
				}
			}
		}
		texture = "gfx/interface/illustrations/event_scenes/ep2_travel_bridge.dds"
		environment = "environment_travel_bridge"
		ambience = "event:/SFX/Events/Backgrounds/mountains_day"
	}
	
	background = { # Farmland, settled
		trigger = {
			OR = {
				NOT = {
					scope:host.location = scope:activity.activity_location
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest.location
					NOT = {
						scope:activity.special_guest:honorary_guest.location ?= scope:activity.activity_location
					}
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest_regular.location
					NOT = {
						scope:activity.special_guest:honorary_guest_regular.location ?= scope:activity.activity_location
					}
				}
			}
			scope:host.location = {
				terrain = farmlands
				exists = province_owner
			}
		}
		texture = "gfx/interface/illustrations/event_scenes/ep2_travel_farm.dds"
		environment = "environment_travel_farmlands"
		ambience = "event:/SFX/Events/Backgrounds/fields_farms_day"
	}
	background = { # Farmland, unsettled
		trigger = {
			OR = {
				NOT = {
					scope:host.location = scope:activity.activity_location
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest.location
					NOT = {
						scope:activity.special_guest:honorary_guest.location ?= scope:activity.activity_location
					}
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest_regular.location
					NOT = {
						scope:activity.special_guest:honorary_guest_regular.location ?= scope:activity.activity_location
					}
				}
			}
			scope:host.location = {
				terrain = farmlands
				NOT = { exists = province_owner }
			}
		}
		texture = "gfx/interface/illustrations/event_scenes/farms.dds"
		environment = "environment_event_farms"
		ambience = "event:/SFX/Events/Backgrounds/fields_farms_day"
	}
	background = { #Desert, settled
		trigger = {
			OR = {
				NOT = {
					scope:host.location = scope:activity.activity_location
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest.location
					NOT = {
						scope:activity.special_guest:honorary_guest.location ?= scope:activity.activity_location
					}
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest_regular.location
					NOT = {
						scope:activity.special_guest:honorary_guest_regular.location ?= scope:activity.activity_location
					}
				}
			}
			scope:host.location = {
				graphical_wilderness_desert_trigger = yes
				exists = province_owner
			}
		}
		texture = "gfx/interface/illustrations/event_scenes/ep2_travel_desert.dds"
		environment = "environment_travel_desert"
		ambience = "event:/SFX/Events/Backgrounds/desert_day"
	}
	background = { #Desert, unsettled
		trigger = {
			OR = {
				NOT = {
					scope:host.location = scope:activity.activity_location
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest.location
					NOT = {
						scope:activity.special_guest:honorary_guest.location ?= scope:activity.activity_location
					}
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest_regular.location
					NOT = {
						scope:activity.special_guest:honorary_guest_regular.location ?= scope:activity.activity_location
					}
				}
			}
			scope:host.location = {
				graphical_wilderness_desert_trigger = yes
				NOT = { exists = province_owner }
			}
		}
		texture = "gfx/interface/illustrations/event_scenes/desert.dds"
		environment = "environment_event_bp1_desert"
		ambience = "event:/SFX/Events/Backgrounds/desert_day"
	}
	background = { #forest snowy
		trigger = {
			OR = {
				NOT = {
					scope:host.location = scope:activity.activity_location
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest.location
					NOT = {
						scope:activity.special_guest:honorary_guest.location ?= scope:activity.activity_location
					}
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest_regular.location
					NOT = {
						scope:activity.special_guest:honorary_guest_regular.location ?= scope:activity.activity_location
					}
				}
			}
			scope:host.location ?= { hunt_snowy_forest_trigger = yes }
		}
		texture = "gfx/interface/illustrations/event_scenes/ep2_hunt_snowy_forest.dds"
		environment = "environment_hunt_snowy_forest"
		ambience = "event:/SFX/Events/Backgrounds/mountains_day"
	}
	background = { #forest_pine
		trigger = {
			OR = {
				NOT = {
					scope:host.location = scope:activity.activity_location
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest.location
					NOT = {
						scope:activity.special_guest:honorary_guest.location ?= scope:activity.activity_location
					}
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest_regular.location
					NOT = {
						scope:activity.special_guest:honorary_guest_regular.location ?= scope:activity.activity_location
					}
				}
			}
			scope:host.location = {
				graphical_wilderness_forest_pine_trigger = yes
			}
		}
		texture = "gfx/interface/illustrations/event_scenes/forest_pine.dds"
		environment = "environment_event_forest_pine"
		ambience = "event:/SFX/Events/Backgrounds/coniferous_forest_day"
	}
	background = { #forest
		trigger = {
			OR = {
				NOT = {
					scope:host.location = scope:activity.activity_location
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest.location
					NOT = {
						scope:activity.special_guest:honorary_guest.location ?= scope:activity.activity_location
					}
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest_regular.location
					NOT = {
						scope:activity.special_guest:honorary_guest_regular.location ?= scope:activity.activity_location
					}
				}
			}
			scope:host.location = {
				graphical_wilderness_forest_trigger = yes
			}
		}
		texture = "gfx/interface/illustrations/event_scenes/forest.dds"
		environment = "environment_event_forest"
		ambience = "event:/SFX/Events/Backgrounds/deciduous_forest_day"
	}
	background = { #mountains, settled
		trigger = {
			OR = {
				NOT = {
					scope:host.location = scope:activity.activity_location
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest.location
					NOT = {
						scope:activity.special_guest:honorary_guest.location ?= scope:activity.activity_location
					}
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest_regular.location
					NOT = {
						scope:activity.special_guest:honorary_guest_regular.location ?= scope:activity.activity_location
					}
				}
			}
			scope:host.location = {
				graphical_wilderness_mountains_trigger = yes
				exists = province_owner
			}
		}
		texture = "gfx/interface/illustrations/event_scenes/ep2_travel_mountains.dds"
		environment = "environment_travel_mountain_settlement"
		ambience = "event:/SFX/Events/Backgrounds/mountains_day"
	}
	background = { #mountains, unsettled
		trigger = {
			OR = {
				NOT = {
					scope:host.location = scope:activity.activity_location
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest.location
					NOT = {
						scope:activity.special_guest:honorary_guest.location ?= scope:activity.activity_location
					}
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest_regular.location
					NOT = {
						scope:activity.special_guest:honorary_guest_regular.location ?= scope:activity.activity_location
					}
				}
			}
			scope:host.location = {
				graphical_wilderness_mountains_trigger = yes
				NOT = { exists = province_owner }
			}
		}
		texture = "gfx/interface/illustrations/event_scenes/mountains.dds"
		environment = "environment_event_mountains"
		ambience = "event:/SFX/Events/Backgrounds/mountains_day"
	}
	background = { #steppe, settled
		trigger = {
			OR = {
				NOT = {
					scope:host.location = scope:activity.activity_location
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest.location
					NOT = {
						scope:activity.special_guest:honorary_guest.location ?= scope:activity.activity_location
					}
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest_regular.location
					NOT = {
						scope:activity.special_guest:honorary_guest_regular.location ?= scope:activity.activity_location
					}
				}
			}
			scope:host.location = {
				graphical_wilderness_steppe_trigger = yes
				exists = province_owner
			}
		}
		texture = "gfx/interface/illustrations/event_scenes/ep2_travel_steppe.dds"
		environment = "environment_travel_steppe_settlement"
		ambience = "event:/SFX/Events/Backgrounds/steppe_day"
	}
	background = { #steppe, unsettled
		trigger = {
			OR = {
				NOT = {
					scope:host.location = scope:activity.activity_location
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest.location
					NOT = {
						scope:activity.special_guest:honorary_guest.location ?= scope:activity.activity_location
					}
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest_regular.location
					NOT = {
						scope:activity.special_guest:honorary_guest_regular.location ?= scope:activity.activity_location
					}
				}
			}
			scope:host.location = {
				graphical_wilderness_steppe_trigger = yes
				NOT = { exists = province_owner }
			}
		}
		texture = "gfx/interface/illustrations/event_scenes/steppe.dds"
		environment = "environment_event_steppe"
		ambience = "event:/SFX/Events/Backgrounds/steppe_day"
	}
	background = { #drylands (formerly desert)
		trigger = {
			OR = {
				NOT = {
					scope:host.location = scope:activity.activity_location
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest.location
					NOT = {
						scope:activity.special_guest:honorary_guest.location ?= scope:activity.activity_location
					}
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest_regular.location
					NOT = {
						scope:activity.special_guest:honorary_guest_regular.location ?= scope:activity.activity_location
					}
				}
			}
			scope:host.location = {
				graphical_drylands_trigger = yes
			}
		}
		texture = "gfx/interface/illustrations/event_scenes/drylands.dds"
		environment = "environment_event_desert"
		ambience = "event:/SFX/Events/Backgrounds/desert_day"
	}
	background = { #wetlands
		trigger = {
			OR = {
				NOT = {
					scope:host.location = scope:activity.activity_location
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest.location
					NOT = {
						scope:activity.special_guest:honorary_guest.location ?= scope:activity.activity_location
					}
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest_regular.location
					NOT = {
						scope:activity.special_guest:honorary_guest_regular.location ?= scope:activity.activity_location
					}
				}
			}
			scope:host.location = {
				graphical_wilderness_wetlands_trigger = yes
			}
		}
		texture = "gfx/interface/illustrations/event_scenes/bp1_wetlands.dds"
		environment = "environment_event_bp1_wetlands" 
		ambience = "event:/SFX/Events/Backgrounds/deciduous_forest_day"
	}
	background = { #jungle
		trigger = {
			OR = {
				NOT = {
					scope:host.location = scope:activity.activity_location
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest.location
					NOT = {
						scope:activity.special_guest:honorary_guest.location ?= scope:activity.activity_location
					}
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest_regular.location
					NOT = {
						scope:activity.special_guest:honorary_guest_regular.location ?= scope:activity.activity_location
					}
				}
			}
			scope:host.location = {
				graphical_wilderness_jungle_trigger = yes
			}
		}
		texture = "gfx/interface/illustrations/event_scenes/bp1_jungle.dds"
		environment = "environment_event_bp1_jungle"
		ambience = "event:/SFX/Events/Backgrounds/deciduous_forest_day"
	}
	background = { #plains, settled
		trigger = {
			OR = {
				NOT = {
					scope:host.location = scope:activity.activity_location
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest.location
					NOT = {
						scope:activity.special_guest:honorary_guest.location ?= scope:activity.activity_location
					}
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest_regular.location
					NOT = {
						scope:activity.special_guest:honorary_guest_regular.location ?= scope:activity.activity_location
					}
				}
			}
			scope:host.location = {
				graphical_plains_trigger = yes
				exists = province_owner
			}
		}
		texture = "gfx/interface/illustrations/event_scenes/ep2_travel_hills.dds"
		environment = "environment_travel_hills_settlement"
		ambience = "event:/SFX/Events/Backgrounds/fields_farms_day"
	}
	background = { #plains, unsettled
		trigger = {
			OR = {
				NOT = {
					scope:host.location = scope:activity.activity_location
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest.location
					NOT = {
						scope:activity.special_guest:honorary_guest.location ?= scope:activity.activity_location
					}
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest_regular.location
					NOT = {
						scope:activity.special_guest:honorary_guest_regular.location ?= scope:activity.activity_location
					}
				}
			}
			scope:host.location = {
				graphical_plains_trigger = yes
				NOT = { exists = province_owner }
			}
		}
		texture = "gfx/interface/illustrations/event_scenes/bp1_plains.dds"
		environment = "environment_event_bp1_plains"
		ambience = "event:/SFX/Events/Backgrounds/fields_farms_day"
	}
	background = { #hills, settled
		trigger = {
			OR = {
				NOT = {
					scope:host.location = scope:activity.activity_location
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest.location
					NOT = {
						scope:activity.special_guest:honorary_guest.location ?= scope:activity.activity_location
					}
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest_regular.location
					NOT = {
						scope:activity.special_guest:honorary_guest_regular.location ?= scope:activity.activity_location
					}
				}
			}
			scope:host.location = {
				graphical_hills_trigger = yes
				exists = province_owner
			}
		}
		texture = "gfx/interface/illustrations/event_scenes/ep2_travel_hills.dds"
		environment = "environment_travel_hills_settlement"
		ambience = "event:/SFX/Events/Backgrounds/fields_farms_day"
	}
	background = { #hills, unsettled
		trigger = {
			OR = {
				NOT = {
					scope:host.location = scope:activity.activity_location
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest.location
					NOT = {
						scope:activity.special_guest:honorary_guest.location ?= scope:activity.activity_location
					}
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest_regular.location
					NOT = {
						scope:activity.special_guest:honorary_guest_regular.location ?= scope:activity.activity_location
					}
				}
			}
			scope:host.location = {
				graphical_hills_trigger = yes
				NOT = { exists = province_owner }
			}
		}
		texture = "gfx/interface/illustrations/event_scenes/bp1_hills.dds"
		environment = "environment_event_bp1_hills"
		ambience = "event:/SFX/Events/Backgrounds/fields_farms_day"
	}
	background = { #sea
		trigger = {
			OR = {
				NOT = {
					scope:host.location = scope:activity.activity_location
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest.location
					NOT = {
						scope:activity.special_guest:honorary_guest.location ?= scope:activity.activity_location
					}
				}
				AND = {
					exists = scope:activity.special_guest:honorary_guest_regular.location
					NOT = {
						scope:activity.special_guest:honorary_guest_regular.location ?= scope:activity.activity_location
					}
				}
			}
			scope:host.location = {
				is_sea_province = yes
			}
		}
		texture = "gfx/interface/illustrations/event_scenes/fp1_ocean.dds"
		environment = "environment_event_fp1_ocean"
		ambience = "event:/DLC/FP1/SFX/Events/event_ocean_longship"
	}

	### End Travel ###
	background = {	# FP1
		trigger = {
			activity_location.county.title_province = { has_building = wonder_minas_ithil_02 }
		}
		texture = "gfx/interface/illustrations/event_scenes/temple_dwarven.dds"
		environment = "environment_event_alley"
		ambience = "event:/SFX/Events/Backgrounds/city_alley_night"
	}
}

maglor_khazad_dum_on_action = {
	effect = {
		if = {
			limit = { current_travel_plan ?= { current_location = province:4337 } } # Rivendell
			if = {
				limit = { has_royal_court = yes }
				title:k_imladris.holder = { trigger_event = maglor_event_chain.0054 }
				trigger_event = maglor_event_chain.0053
			}
			if = {
				limit = { has_royal_court = no } # Fallback if no RC
				title:k_imladris.holder = { trigger_event = maglor_event_chain.0055 }
				trigger_event = maglor_event_chain.0053
			}
		}
		if = {
			limit = { current_travel_plan ?= { current_location = province:4913 } } # Endless Stairs
			trigger_event = maglor_event_chain.0056
		}
		if = {
			limit = { current_travel_plan ?= { current_location = province:4351 } }
			trigger_event = maglor_event_chain.0060
		}
	}
}

imrazor_firsttrip_on_action = {
	effect = {
		if = {
			limit = { current_travel_plan ?= { current_location = province:5458 } } # Ûruloni
			title:c_uruloni.holder.top_liege = { trigger_event = lotr_thani_hazad.3030 }
		}
		if = {
			limit = { current_travel_plan ?= { current_location = province:5526 } } # Azarîdeth
			title:c_azarideth.holder.top_liege = { trigger_event = lotr_thani_hazad.3031 }
		}
	}
}

imrazor_secondtrip_on_action = {
	effect = {
		if = {
			limit = { current_travel_plan ?= { current_location = province:5497 } } # Inzilloni
			title:c_inzilloni.holder.top_liege = { trigger_event = lotr_thani_hazad.3032 }
		}
		if = {
			limit = { current_travel_plan ?= { current_location = province:5532 } } # Holzôreth
			title:c_holzoreth.holder.top_liege = { trigger_event = lotr_thani_hazad.3033 }
		}
	}
}

imrazor_thirdtrip_on_action = {
	effect = {
		if = {
			limit = { current_travel_plan ?= { current_location = province:5401 } } # Gimileth
			title:c_gimileth.holder.top_liege = { trigger_event = lotr_thani_hazad.3034 }
		}
	}
}

imrazor_fourthtrip_on_action = {
	effect = {
		if = {
			limit = { current_travel_plan ?= { current_location = province:5342 } } # Karasalas
			trigger_event = lotr_thani_hazad.3013
		}
		if = {
			limit = { current_travel_plan ?= { current_location = province:5331 } } # Alsarias
			trigger_event = lotr_thani_hazad.3013
		}
	}
}

imrazor_fifthtrip_on_action = {
	effect = {
		if = {
			limit = { current_travel_plan ?= { current_location = province:5411 } } # Arpêl
			title:k_pel.holder = { trigger_event = lotr_thani_hazad.3035 }
		}
	}
}

lotr_on_travel_plan_movement = {
	effect = {
		if = { #LotR
			limit = {
				any_maa_regiment = { is_maa_type = laamp_settler_maa }
				current_travel_plan = { is_travel_with_domicile = yes }
				current_travel_plan.current_location = { has_holding = yes }
				NOT = { current_travel_plan.current_location = { has_holding_type = wastelands_holding } }
				NOT = { current_travel_plan.current_location = { has_variable = no_more_settlers } }
			}
			random_maa_regiment = {
				limit = { is_maa_type = laamp_settler_maa }
				change_maa_troops_count = 50
			}
			current_travel_plan.current_location = { set_variable = { name = no_more_settlers value = yes months = 6 } }
		}
		if = { #LotR One does not simply walk into Mordor | Achievement
			limit = {
				realms_achievements_enabled = yes
				is_ai = no
				NOT = { exists = global_var:lotr_achievement_19 }
				root.location = province:620
			}
			set_global_variable = lotr_achievement_19
		}
	}
}

lotr_on_travel_plan_complete = {
	effect = {
		if = { #LotR One does not simply walk into Mordor | Achievement
			limit = {
				realms_achievements_enabled = yes
				is_ai = no
				NOT = { exists = global_var:lotr_achievement_19 }
				root.location = province:620
			}
			set_global_variable = lotr_achievement_19
		}
		if = { # I’m going on an adventure! | Achievement
			limit = {
				NOT = { exists = global_var:lotr_achievement_02 }
				realms_achievements_enabled = yes
				is_ai = no
				is_hobbit = yes
				has_trait_xp = {
					trait = lifestyle_traveler
					track = travel
					value = 100
				}
				has_trait_xp = {
					trait = lifestyle_traveler
					track = danger
					value = 100
				}
			}
			set_global_variable = lotr_achievement_02
		}
	}
}

lotr_on_visited_grand_city = {
	events = {
		delay = { days = 1 }
		lotr_travel_events_cities.1010
		lotr_travel_events_cities.1020
		lotr_travel_events_cities.1030
		lotr_travel_events_cities.1040
		lotr_travel_events_cities.1050
	}
}
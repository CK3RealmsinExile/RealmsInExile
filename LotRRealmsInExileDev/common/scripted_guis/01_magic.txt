display_magic_capacity = {
	scope = character
	is_shown = {
		can_cast_spells_trigger = yes
	}
	effect = {
        custom_tooltip = magic_capacity
	}
}

can_do_sorcery = {
	is_shown = {
		always = yes
	}
	is_valid = {
		OR = {
			is_sorcerer = yes
			has_trait = nazgul
			is_evil_istari = yes
			has_trait = maiar
		}
		NOT = {
			has_character_modifier = practiced_sorcery_recently
		}
	}
}

select_call_the_horde = {
	is_valid = {
		always = yes
	}
	effect = {
		set_variable = {
			name = selected_spell
			value = flag:call_the_horde
		}
	}
}
select_mark_of_war = {
	is_valid = {
		always = yes
	}
	effect = {
		set_variable = {
			name = selected_spell
			value = flag:mark_of_war
		}
	}
}
select_assemble_the_warchiefs = {
	is_valid = {
		always = yes
	}
	effect = {
		set_variable = {
			name = selected_spell
			value = flag:assemble_the_warchiefs
		}
	}
}
select_rise_the_dead = {
	is_valid = {
		always = yes
	}
	effect = {
		set_variable = {
			name = selected_spell
			value = flag:rise_the_dead
		}
	}
}
select_invoke_watchers = {
	is_valid = {
		always = yes
	}
	effect = {
		set_variable = {
			name = selected_spell
			value = flag:invoke_watchers
		}
	}
}
select_summon_being_of_darkness = {
	is_valid = {
		NOT = { has_character_modifier = fell_beast_mount_modifier }
	}
	effect = {
		set_variable = {
			name = selected_spell
			value = flag:summon_being_of_darkness
		}
	}
}
select_cracks_of_the_earth = {
	is_valid = {
		always = yes
	}
	effect = {
		set_variable = {
			name = selected_spell
			value = flag:cracks_of_the_earth
		}
	}
}
select_dark_vitality = {
	is_valid = {
		always = yes
	}
	effect = {
		set_variable = {
			name = selected_spell
			value = flag:dark_vitality
		}
	}
}
select_words_of_power = {
	is_valid = {
		is_at_war = yes
	}
	effect = {
		set_variable = {
			name = selected_spell
			value = flag:words_of_power
		}
	}
}
select_forge_morgul_weapons = {
	is_valid = {
		NOT = { has_character_modifier = morgul_weapons }
	}
	effect = {
		set_variable = {
			name = selected_spell
			value = flag:forge_morgul_weapons
		}
	}
}
select_purse_them_relentlessly = {
	is_valid = {
		OR = {
			has_trait = nazgul
		}
	}
	effect = {
		set_variable = {
			name = selected_spell
			value = flag:purse_them_relentlessly
		}
	}
}
select_black_breath = {
	is_valid = {
		OR = {
			has_trait = nazgul
			has_trait = maiar
		}
	}
	effect = {
		set_variable = {
			name = selected_spell
			value = flag:black_breath
		}
	}
}
select_nazgul_restoration = {
	is_valid = {
		OR = {
			has_trait = nazgul
			has_trait = maiar
		}
	}
	effect = {
		set_variable = {
			name = selected_spell
			value = flag:nazgul_restoration
		}
	}
}
select_ambassador_of_darkness = {
	is_valid = {
		has_trait = maiar
	}
	effect = {
		set_variable = {
			name = selected_spell
			value = flag:ambassador_of_darkness
		}
	}
}
select_shapeshifting = {
	is_valid = {
		has_trait = maiar
	}
	effect = {
		set_variable = {
			name = selected_spell
			value = flag:shapeshifting
		}
	}
}
select_reveal_the_secrets = {
	is_valid = {
		has_trait = maiar
	}
	effect = {
		set_variable = {
			name = selected_spell
			value = flag:reveal_the_secrets
		}
	}
}
select_cast_the_darkness = {
	is_valid = {
		has_trait = maiar
	}
	effect = {
		set_variable = {
			name = selected_spell
			value = flag:cast_the_darkness
		}
	}
}
select_abnormal_winter = {
	is_valid = {
		has_trait = maiar
	}
	effect = {
		set_variable = {
			name = selected_spell
			value = flag:abnormal_winter
		}
	}
}
select_the_plague = {
	is_valid = {
		has_trait = maiar
	}
	effect = {
		set_variable = {
			name = selected_spell
			value = flag:the_plague
		}
	}
}

unselect_spell = {	
	effect = {
		remove_variable = selected_spell
	}
}

unselect_location = {	
	effect = {
		remove_variable = ritual_location
		remove_variable = selected_spell
	}
}

select_location = {
	effect = {
		trigger_event = evil.0001
	}
}

########################### CASTING EFFECTS #######################

cast_call_the_horde = {
	is_valid = {
		NOT = { var:ritual_location = flag:no_location }
	}
	effect = {
		if = {limit = {exists = var:temple var:temple = 4}
			remove_short_term_gold = {
				value = 250
			}
		}
		else = {
			add_piety = {
				value = -250
				if = {limit = {exists = var:temple var:temple = 2} multiply = 0.8 subtract = 1}
			}
		}
		set_variable = {name = low_mod value = 0}
		set_variable = {name = high_mod value = 0}
		if = {
			limit = {exists = var:temple var:temple = 5}
			set_variable = {name = low_mod value = -10}
		}
		else_if = {
			limit = {exists = var:temple var:temple = 3}
			set_variable = {name = high_mod value = 10}
		}
		
		if = {
			limit = { var:ritual_location = flag:holy_site_1 }
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 4
			}
		}
		else = {
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 5
			}
		}

		switch = {
			trigger = var:ritual_location
			
			flag:sacred_place = {
				random_list = {
					25 = {	# Failure
						desc = evil.0022.a
						modifier = {add = var:low_mod}
						trigger_event = {
							id = evil.0122
							days = { 15 30 }
						}
						
						set_variable = {name = spell_result value = 0}
					}
					50 = {	# Success
						desc = evil.0023.a
						trigger_event = {
							id = evil.0123
							days = { 15 30 }
						}
						if = {
							limit = {root.faith = faith:melkorite}
							spawn_army = {
								men_at_arms = {
									type = abrazanim_legion 
									stacks = 12
								}
								location = capital_province
								inheritable = no
								name = black_numenorean_event_troops
							}
						}
						if = {
							random_list = {
								1 = {
									spawn_army = {
										men_at_arms = {
											type = guard_of_abrakhan 
											stacks = 10
										}
										men_at_arms = {
											type = risen_carrion 
											stacks = 6
										}
										location = capital_province
										inheritable = no
										name = decision_guard_of_abrakhan_troops
									}
									spawn_army = {
										men_at_arms = {
											type = guard_of_abrakhan 
											stacks = 10
										}
										men_at_arms = {
											type = risen_carrion 
											stacks = 6
										}
										location = capital_province
										inheritable = no
										name = decision_guard_of_abrakhan_troops
									}
								}
								1 = {
									spawn_army = {
										men_at_arms = {
											type = desert_screamers 
											stacks = 8
										}
										men_at_arms = {
											type = desert_screamers 
											stacks = 8
										}
										men_at_arms = {
											type = risen_carrion 
											stacks = 2
										}
										men_at_arms = {
											type = giant_scorpions 
											stacks = 1
										}
										location = capital_province
										inheritable = no
										name = haradrim_event_troops
									}
									spawn_army = {
										men_at_arms = {
											type = desert_screamers 
											stacks = 8
										}
										men_at_arms = {
											type = desert_screamers 
											stacks = 8
										}
										men_at_arms = {
											type = risen_carrion 
											stacks = 2
										}
										men_at_arms = {
											type = giant_scorpions 
											stacks = 1
										}
										location = capital_province
										inheritable = no
										name = haradrim_event_troops
									}
								}
							}
						}
						if = {
							limit = { root.faith = faith:white_hand_cult }
							random_list = {
								1 = {
									spawn_army = {
										men_at_arms = {
											type = urukhai_fighting 
											stacks = 10
										}
										men_at_arms = {
											type = urukhai_crossbowmen  
											stacks = 6
										}
										men_at_arms = {
										type = urukhai_pikemen
										stacks = 6
										}
										men_at_arms = {
											type = urukhai_berserker
											stacks = 1
										}
										men_at_arms = {
											type = urukhai_berserker
											stacks = 1
										}
										location = capital_province
										inheritable = no
										name = urukhai_event_troops
									}
								}
								1 = {
									spawn_army = {
										men_at_arms = {
											type = dunlending_huscarl 
											stacks = 8
										}
										men_at_arms = {
											type = dunlending_longbowmen 
											stacks = 4
										}
										men_at_arms = {
											type = dunlending_outriders
											stacks = 4
										}
										location = capital_province
										inheritable = no
										name = wildmen_event_troops
									}
								}
							}
						}
						if = {
							limit = { root.faith = faith:way_of_strength }
							spawn_army = {
								men_at_arms = {
									type = urukhai_fighting 
									stacks = 8
								}
								men_at_arms = {
									type = urukhai_crossbowmen 
									stacks = 4
								}
								men_at_arms = {
									type = mountainorc_warriors 
									stacks = 4
								}
								men_at_arms = {
									type = orc_warriors 
									stacks = 10
								}
								location = capital_province
								inheritable = no
								name = orc_event_troops
							}
						}
						if = {
							limit = {
								OR = {
									root.faith = faith:lidless_eye
									root.faith = faith:sons_of_sauron
									root.faith = faith:red_eye_cult
								}
							}
							random_list = {
								1 = {
									spawn_army = {
										men_at_arms = {
											type = urukhai_fighting 
											stacks = 8
										}
										men_at_arms = {
											type = urukhai_crossbowmen 
											stacks = 4
										}
										men_at_arms = {
											type = mountainorc_warriors 
											stacks = 4
										}
										men_at_arms = {
											type = orc_warriors 
											stacks = 10
										}
										location = capital_province
										inheritable = no
										name = orc_event_troops
									}
								}
								1 = {
									spawn_army = {
										men_at_arms = {
											type = serpent_guard 
											stacks = 8
										}
										men_at_arms = {
											type = desert_javelineers
											stacks = 8
										}
										men_at_arms = {
											type = haradrim_raiders
											stacks = 4
										}
										men_at_arms = {
											type = war_mumak
											stacks = 2
										}
										location = capital_province
										inheritable = no
										name = haradrim_event_troops
									}
								}
							}
						}
					}
					25 = {	# Critical success
						modifier = {add = var:high_mod}
						desc = evil.0024.a
						trigger_event = {
							id = evil.0124
							days = { 15 30 }
						}
						if = {
							limit = { root.faith = faith:melkorite }
							spawn_army = {
								men_at_arms = {
									type = abrazanim_legion 
									stacks = 13
								}
								location = capital_province
								inheritable = no
								name = black_numenorean_event_troops
							}
						}
						if = {
							random_list = {
								1 = {
									spawn_army = {
										men_at_arms = {
											type = guard_of_abrakhan 
											stacks = 11
										}
										men_at_arms = {
											type = risen_carrion 
											stacks = 7
										}
										location = capital_province
										inheritable = no
										name = decision_guard_of_abrakhan_troops
									}
									spawn_army = {
										men_at_arms = {
											type = guard_of_abrakhan 
											stacks = 11
										}
										men_at_arms = {
											type = risen_carrion 
											stacks = 7
										}
										location = capital_province
										inheritable = no
										name = decision_guard_of_abrakhan_troops
									}
								}
								1 = {
									spawn_army = {
										men_at_arms = {
											type = desert_screamers 
											stacks = 9
										}
										men_at_arms = {
											type = desert_screamers 
											stacks = 9
										}
										men_at_arms = {
											type = risen_carrion 
											stacks = 3
										}
										men_at_arms = {
											type = giant_scorpions 
											stacks = 2
										}
										location = capital_province
										inheritable = no
										name = haradrim_event_troops
									}
									spawn_army = {
										men_at_arms = {
											type = desert_screamers 
											stacks = 9
										}
										men_at_arms = {
											type = desert_screamers 
											stacks = 9
										}
										men_at_arms = {
											type = risen_carrion 
											stacks = 3
										}
										men_at_arms = {
											type = giant_scorpions 
											stacks = 2
										}
										location = capital_province
										inheritable = no
										name = haradrim_event_troops
									}
								}
							}
						}
						if = {
							limit = {root.faith = faith:white_hand_cult}
							random_list = {
								1 = {
									spawn_army = {
										men_at_arms = {
											type = urukhai_fighting 
											stacks = 11
										}
										men_at_arms = {
											type = urukhai_crossbowmen  
											stacks = 7
										}
										men_at_arms = {
											type = urukhai_pikemen
											stacks = 7
										}
										men_at_arms = {
											type = urukhai_berserker
											stacks = 2
										}
										men_at_arms = {
											type = urukhai_berserker
											stacks = 2
										}
										location = capital_province
										inheritable = no
										name = urukhai_event_troops
									}
								}
								1 = {
									spawn_army = {
										men_at_arms = {
											type = dunlending_huscarl 
											stacks = 9
										}
										men_at_arms = {
											type = dunlending_longbowmen 
											stacks = 5
										}
										men_at_arms = {
											type = dunlending_outriders
											stacks = 5
										}
										location = capital_province
										inheritable = no
										name = wildmen_event_troops
									}
								}
							}
						}
						if = {
							limit = {root.faith = faith:way_of_strength}
							spawn_army = {
								men_at_arms = {
									type = urukhai_fighting 
									stacks = 9
								}
								men_at_arms = {
									type = urukhai_crossbowmen 
									stacks = 5
								}
								men_at_arms = {
									type = mountainorc_warriors 
									stacks = 5
								}
								men_at_arms = {
									type = orc_warriors 
									stacks = 11
								}
								location = capital_province
								inheritable = no
								name = orc_event_troops
							}
						}
						if = {
							limit = {
								OR = {
									root.faith = faith:lidless_eye
									root.faith = faith:sons_of_sauron
									root.faith = faith:red_eye_cult
								}
							}
							random_list = {
								1 = {
									spawn_army = {
										men_at_arms = {
											type = urukhai_fighting 
											stacks = 9
										}
										men_at_arms = {
											type = urukhai_crossbowmen 
											stacks = 5
										}
										men_at_arms = {
											type = mountainorc_warriors 
											stacks = 5
										}
										men_at_arms = {
											type = orc_warriors 
											stacks = 11
										}
										location = capital_province
										inheritable = no
										name = orc_event_troops
									}
								}
								1 = {
									spawn_army = {
										men_at_arms = {
											type = serpent_guard 
											stacks = 9
										}
										men_at_arms = {
											type = desert_javelineers
											stacks = 9
										}
										men_at_arms = {
											type = haradrim_raiders
											stacks = 5
										}
										men_at_arms = {
											type = war_mumak
											stacks = 3
										}
										location = capital_province
										inheritable = no
										name = haradrim_event_troops
									}
								}
							}
						}
					}
				}
			}
			flag:wilds = {
				random_list = {
					25 = {	# Critical Failure
						desc = evil.0021.a
						trigger_event = {
							id = evil.0121
							days = { 15 30 }
						}
						add_character_modifier = {
							modifier = critical_failure_call_the_order
							years = 3
						}
					}
					75 = {	# Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 15 30 }
						}
						
					}
					75 = {	# Success
						desc = evil.0023.a
						trigger_event = {
							id = evil.0123
							days = { 15 30 }
						}
						if = {
							limit = {root.faith = faith:melkorite}
							spawn_army = {
								men_at_arms = {
									type = abrazanim_legion 
									stacks = 12
								}
								location = capital_province
								inheritable = no
								name = black_numenorean_event_troops
							}
						}
						if = {
							random_list = {
								1 = {
									spawn_army = {
										men_at_arms = {
											type = guard_of_abrakhan 
											stacks = 10
										}
										men_at_arms = {
											type = risen_carrion 
											stacks = 6
										}
										location = capital_province
										inheritable = no
										name = decision_guard_of_abrakhan_troops
									}
									spawn_army = {
										men_at_arms = {
											type = guard_of_abrakhan 
											stacks = 10
										}
										men_at_arms = {
											type = risen_carrion 
											stacks = 6
										}
										location = capital_province
										inheritable = no
										name = decision_guard_of_abrakhan_troops
									}
								}
								1 = {
									spawn_army = {
										men_at_arms = {
											type = desert_screamers 
											stacks = 8
										}
										men_at_arms = {
											type = desert_screamers 
											stacks = 8
										}
										men_at_arms = {
											type = risen_carrion 
											stacks = 2
										}
										men_at_arms = {
											type = giant_scorpions 
											stacks = 1
										}
										location = capital_province
										inheritable = no
										name = haradrim_event_troops
									}
									spawn_army = {
										men_at_arms = {
											type = desert_screamers 
											stacks = 8
										}
										men_at_arms = {
											type = desert_screamers 
											stacks = 8
										}
										men_at_arms = {
											type = risen_carrion 
											stacks = 2
										}
										men_at_arms = {
											type = giant_scorpions 
											stacks = 1
										}
										location = capital_province
										inheritable = no
										name = haradrim_event_troops
									}
								}
							}
						}
						if = {
							limit = {root.faith = faith:white_hand_cult}
							random_list = {
								1 = {
									spawn_army = {
										men_at_arms = {
											type = urukhai_fighting 
											stacks = 10
										}
										men_at_arms = {
											type = urukhai_crossbowmen  
											stacks = 6
										}
										men_at_arms = {
											type = urukhai_pikemen
											stacks = 6
										}
										men_at_arms = {
											type = urukhai_berserker
											stacks = 1
										}
										men_at_arms = {
											type = urukhai_berserker
											stacks = 1
										}
										location = capital_province
										inheritable = no
										name = urukhai_event_troops
									}
								}
								1 = {
									spawn_army = {
										men_at_arms = {
											type = dunlending_huscarl 
											stacks = 8
										}
										men_at_arms = {
											type = dunlending_longbowmen 
											stacks = 4
										}
										men_at_arms = {
											type = dunlending_outriders
											stacks = 4
										}
										location = capital_province
										inheritable = no
										name = wildmen_event_troops
									}
								}
							}
						}
						if = {
							limit = {root.faith = faith:way_of_strength}
							spawn_army = {
								men_at_arms = {
									type = urukhai_fighting 
									stacks = 8
								}
								men_at_arms = {
									type = urukhai_crossbowmen 
									stacks = 4
								}
								men_at_arms = {
									type = mountainorc_warriors 
									stacks = 4
								}
								men_at_arms = {
									type = orc_warriors 
									stacks = 10
								}
								location = capital_province
								inheritable = no
								name = orc_event_troops
							}
						}
						if = {
							limit = {
								OR = {
									root.faith = faith:lidless_eye
									root.faith = faith:sons_of_sauron
									root.faith = faith:red_eye_cult
								}
							}
							random_list = {
								1 = {
									spawn_army = {
										men_at_arms = {
											type = urukhai_fighting 
											stacks = 8
										}
										men_at_arms = {
											type = urukhai_crossbowmen 
											stacks = 4
										}
										men_at_arms = {
											type = mountainorc_warriors 
											stacks = 4
										}
										men_at_arms = {
											type = orc_warriors 
											stacks = 10
										}
										location = capital_province
										inheritable = no
										name = orc_event_troops
									}
								}
								1 = {
									spawn_army = {
										men_at_arms = {
											type = serpent_guard 
											stacks = 8
										}
										men_at_arms = {
											type = desert_javelineers
											stacks = 8
										}
										men_at_arms = {
											type = haradrim_raiders
											stacks = 4
										}
										men_at_arms = {
											type = war_mumak
											stacks = 2
										}
										location = capital_province
										inheritable = no
										name = haradrim_event_troops
									}
								}
							}
						}
					}
					25 = {	# Critical Success
						desc = evil.0024.a
						trigger_event = {
							id = evil.0124
							days = { 15 30 }
						}
						if = {
							limit = {root.faith = faith:melkorite}
							spawn_army = {
								men_at_arms = {
									type = abrazanim_legion 
									stacks = 13
								}
								location = capital_province
								inheritable = no
								name = black_numenorean_event_troops
							}
						}
						if = {
							random_list = {
								1 = {
									spawn_army = {
										men_at_arms = {
											type = guard_of_abrakhan 
											stacks = 11
										}
										men_at_arms = {
											type = risen_carrion 
											stacks = 7
										}
										location = capital_province
										inheritable = no
										name = decision_guard_of_abrakhan_troops
									}
									spawn_army = {
										men_at_arms = {
											type = guard_of_abrakhan 
											stacks = 11
										}
										men_at_arms = {
											type = risen_carrion 
											stacks = 8
										}
										location = capital_province
										inheritable = no
										name = decision_guard_of_abrakhan_troops
									}
								}
								1 = {
									spawn_army = {
										men_at_arms = {
											type = desert_screamers 
											stacks = 9
										}
										men_at_arms = {
											type = desert_screamers 
											stacks = 9
										}
										men_at_arms = {
											type = risen_carrion 
											stacks = 3
										}
										men_at_arms = {
											type = giant_scorpions 
											stacks = 2
										}
										location = capital_province
										inheritable = no
										name = haradrim_event_troops
									}
									spawn_army = {
										men_at_arms = {
											type = desert_screamers 
											stacks = 9
										}
										men_at_arms = {
											type = desert_screamers 
											stacks = 9
										}
										men_at_arms = {
											type = risen_carrion 
											stacks = 3
										}
										men_at_arms = {
											type = giant_scorpions 
											stacks = 2
										}
										location = capital_province
										inheritable = no
										name = haradrim_event_troops
									}
								}
							}
						}
						if = {
							limit = { root.faith = faith:white_hand_cult }
							random_list = {
								1 = {
									spawn_army = {
										men_at_arms = {
											type = urukhai_fighting 
											stacks = 11
										}
										men_at_arms = {
											type = urukhai_crossbowmen  
											stacks = 7
										}
										men_at_arms = {
											type = urukhai_pikemen
											stacks = 7
										}
										men_at_arms = {
											type = urukhai_berserker
											stacks = 2
										}
										men_at_arms = {
											type = urukhai_berserker
											stacks = 2
										}
										location = capital_province
										inheritable = no
										name = urukhai_event_troops
									}
								}
								1 = {
									spawn_army = {
										men_at_arms = {
											type = dunlending_huscarl 
											stacks = 9
										}
										men_at_arms = {
											type = dunlending_longbowmen 
											stacks = 5
										}
										men_at_arms = {
											type = dunlending_outriders
											stacks = 5
										}
										location = capital_province
										inheritable = no
										name = wildmen_event_troops
									}
								}
							}
						}
						if = {
							limit = {root.faith = faith:way_of_strength}
							spawn_army = {
								men_at_arms = {
									type = urukhai_fighting 
									stacks = 9
								}
								men_at_arms = {
									type = urukhai_crossbowmen 
									stacks = 5
								}
								men_at_arms = {
									type = mountainorc_warriors 
									stacks = 5
								}
								men_at_arms = {
									type = orc_warriors 
									stacks = 11
								}
								location = capital_province
								inheritable = no
								name = orc_event_troops
							}
						}
						if = {
							limit = {
								OR = {
									root.faith = faith:lidless_eye
									root.faith = faith:sons_of_sauron
									root.faith = faith:red_eye_cult
								}
							}
							random_list = {
								1 = {
									spawn_army = {
										men_at_arms = {
											type = urukhai_fighting 
											stacks = 9
										}
										men_at_arms = {
											type = urukhai_crossbowmen 
											stacks = 5
										}
										men_at_arms = {
											type = mountainorc_warriors 
											stacks = 5
										}
										men_at_arms = {
											type = orc_warriors 
											stacks = 11
										}
										location = capital_province
										inheritable = no
										name = orc_event_troops
									}
								}
								1 = {
									spawn_army = {
										men_at_arms = {
											type = serpent_guard 
											stacks = 9
										}
										men_at_arms = {
											type = desert_javelineers
											stacks = 9
										}
										men_at_arms = {
											type = haradrim_raiders
											stacks = 5
										}
										men_at_arms = {
											type = war_mumak
											stacks = 3
										}
										location = capital_province
										inheritable = no
										name = haradrim_event_troops
									}
								}
							}
						}
					}
				}
			}
			flag:home = {
				random_list = {
					50 = {	# Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 15 30 }
						}
					}
					50 = {	# success
						desc = evil.0023.a
						trigger_event = {
							id = evil.0123
							days = { 15 30 }
						}
						if = {
							limit = {root.faith = faith:melkorite}
							spawn_army = {
								men_at_arms = {
									type = abrazanim_legion 
									stacks = 12
								}
								location = capital_province
								inheritable = no
								name = black_numenorean_event_troops
							}
						}
						if = {
							random_list = {
								1 = {
									spawn_army = {
										men_at_arms = {
											type = guard_of_abrakhan 
											stacks = 10
										}
										men_at_arms = {
											type = risen_carrion 
											stacks = 6
										}
										location = capital_province
										inheritable = no
										name = decision_guard_of_abrakhan_troops
									}
									spawn_army = {
										men_at_arms = {
											type = guard_of_abrakhan 
											stacks = 10
										}
										men_at_arms = {
											type = risen_carrion 
											stacks = 6
										}
										location = capital_province
										inheritable = no
										name = decision_guard_of_abrakhan_troops
									}
								}
								1 = {
									spawn_army = {
										men_at_arms = {
											type = desert_screamers 
											stacks = 8
										}
										men_at_arms = {
											type = desert_screamers 
											stacks = 8
										}
										men_at_arms = {
											type = risen_carrion 
											stacks = 2
										}
										men_at_arms = {
											type = giant_scorpions 
											stacks = 1
										}
										location = capital_province
										inheritable = no
										name = haradrim_event_troops
									}
									spawn_army = {
										men_at_arms = {
											type = desert_screamers 
											stacks = 8
										}
										men_at_arms = {
											type = desert_screamers 
											stacks = 8
										}
										men_at_arms = {
											type = risen_carrion 
											stacks = 2
										}
										men_at_arms = {
											type = giant_scorpions 
											stacks = 1
										}
										location = capital_province
										inheritable = no
										name = haradrim_event_troops
									}
								}
							}
						}
						if = {
							limit = {root.faith = faith:white_hand_cult}
							random_list = {
								1 = {
									spawn_army = {
										men_at_arms = {
											type = urukhai_fighting 
											stacks = 10
										}
										men_at_arms = {
											type = urukhai_crossbowmen  
											stacks = 6
										}
										men_at_arms = {
											type = urukhai_pikemen
											stacks = 6
										}
										men_at_arms = {
											type = urukhai_berserker
											stacks = 1
										}
										men_at_arms = {
											type = urukhai_berserker
											stacks = 1
										}
										location = capital_province
										inheritable = no
										name = urukhai_event_troops
									}
								}
								1 = {
									spawn_army = {
										men_at_arms = {
											type = dunlending_huscarl 
											stacks = 8
										}
										men_at_arms = {
											type = dunlending_longbowmen 
											stacks = 4
										}
										men_at_arms = {
											type = dunlending_outriders
											stacks = 4
										}
										location = capital_province
										inheritable = no
										name = wildmen_event_troops
									}
								}
							}
						}
						if = {
							limit = {root.faith = faith:way_of_strength}
							spawn_army = {
								men_at_arms = {
									type = urukhai_fighting 
									stacks = 8
								}
								men_at_arms = {
									type = urukhai_crossbowmen 
									stacks = 4
								}
								men_at_arms = {
									type = mountainorc_warriors 
									stacks = 4
								}
								men_at_arms = {
									type = orc_warriors 
									stacks = 10
								}
								location = capital_province
								inheritable = no
								name = orc_event_troops
							}
						}
						if = {
							limit = {
								OR = {
									root.faith = faith:lidless_eye
									root.faith = faith:sons_of_sauron
									root.faith = faith:red_eye_cult
								}
							}
							random_list = {
								1 = {
									spawn_army = {
										men_at_arms = {
											type = urukhai_fighting 
											stacks = 8
										}
										men_at_arms = {
											type = urukhai_crossbowmen 
											stacks = 4
										}
										men_at_arms = {
											type = mountainorc_warriors 
											stacks = 4
										}
										men_at_arms = {
											type = orc_warriors 
											stacks = 10
										}
										location = capital_province
										inheritable = no
										name = orc_event_troops
									}
								}
								1 = {
									spawn_army = {
										men_at_arms = {
											type = serpent_guard 
											stacks = 8
										}
										men_at_arms = {
											type = desert_javelineers
											stacks = 8
										}
										men_at_arms = {
											type = haradrim_raiders
											stacks = 4
										}
										men_at_arms = {
											type = war_mumak
											stacks = 2
										}
										location = capital_province
										inheritable = no
										name = haradrim_event_troops
									}
								}
							}
						}
					}
				}
			}	      
		}
	}
}

# Also called Invigorate the Horde
cast_mark_of_war = {
	is_valid = {
		NOT = { var:ritual_location = flag:no_location }
	}
	effect = {
		if = {limit = {exists = var:temple var:temple = 4}
			remove_short_term_gold = {
				value = 250
			}
		}
		else = {
			add_piety = {
				value = -250
				if = {limit = {exists = var:temple var:temple = 2} multiply = 0.8 subtract = 1}
			}
		}
		
		set_variable = {name = low_mod value = 0}
		set_variable = {name = high_mod value = 0}
		if = {
			limit = {exists = var:temple var:temple = 5}
			set_variable = {name = low_mod value = -10}
		}
		else_if = {
			limit = {exists = var:temple var:temple = 3}
			set_variable = {name = high_mod value = 10}
		}

		if = {
			limit = { var:ritual_location = flag:holy_site_1 }
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 4
			}
		}
		else = {
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 5
			}
		}
		switch = {
			trigger = var:ritual_location
			
			flag:sacred_place = {
				random_list = {
					25 = {	# Failure
						desc = evil.0022.a
						modifier = {add = var:low_mod}
						trigger_event = {
							id = evil.0122
							days = { 15 30 }
						}
					}
					50 = {	# Success
						desc = evil.0023.a
						trigger_event = {
							id = evil.0223
							days = { 15 30 }
						}
						if = {
							limit = {
								OR = {
									root.faith = faith:lidless_eye
									root.faith = faith:sons_of_sauron
									root.faith = faith:red_eye_cult
								}
							}
							add_character_modifier = {
								modifier = red_eye_mark_modifier
								years = 4
							}
						}
						else_if = {
							limit = {root.faith = faith:white_hand_cult}
							add_character_modifier = {
								modifier = great_white_hand_mark_modifier
								years = 4
							}
						}
						else = {
							add_character_modifier = {
								modifier = great_invigoreted_troops_modifier
								years = 4
							}
						}	
					}
					25 = {	# Critical success
						desc = evil.0024.a
						modifier = {add = var:high_mod}
						trigger_event = {
							id = evil.0224
							days = { 15 30 }
						}
						if = {
							limit = {
								OR = {
									root.faith = faith:lidless_eye
									root.faith = faith:sons_of_sauron
									root.faith = faith:red_eye_cult
								}
							}
							add_character_modifier = {
								modifier = red_eye_mark_modifier
								years = 5
							}
						}
						else_if = {
							limit = {root.faith = faith:white_hand_cult}
							add_character_modifier = {
								modifier = great_white_hand_mark_modifier
								years = 5
							}
						}
						else = {
							add_character_modifier = {
								modifier = great_invigoreted_troops_modifier
								years = 5
							}
						}	
					}
				}
			}
			flag:wilds = {
				random_list = {
					25 = {	# Critical Failure
						desc = evil.0021.a
						increase_wounds_no_death_effect = { REASON = accident }
						trigger_event = {
							id = evil.0121
							days = { 15 30 }
						}
					}
					75 = {	# Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 15 30 }
						}
					}
					75 = {	# success
						desc = evil.0023.a
						trigger_event = {
							id = evil.0223
							days = { 15 30 }
						}
						if = {
							limit = {
								OR = {
									root.faith = faith:lidless_eye
									root.faith = faith:sons_of_sauron
									root.faith = faith:red_eye_cult
								}
							}
							add_character_modifier = {
								modifier = red_eye_mark_modifier
								years = 4
							}
						}
						else_if = {
							limit = {root.faith = faith:white_hand_cult}
							add_character_modifier = {
								modifier = great_white_hand_mark_modifier
								years = 4
							}
						}
						else = {
							add_character_modifier = {
								modifier = great_invigoreted_troops_modifier
								years = 4
							}
						}	
					}
					25 = {	# Critical success
						desc = evil.0024.a
						trigger_event = {
							id = evil.0224
							days = { 15 30 }
						}
						if = {
							limit = {
								OR = {
									root.faith = faith:lidless_eye
									root.faith = faith:sons_of_sauron
									root.faith = faith:red_eye_cult
								}
							}
							add_character_modifier = {
								modifier = red_eye_mark_modifier
								years = 5
							}
						}
						else_if = {
							limit = {root.faith = faith:white_hand_cult}
							add_character_modifier = {
								modifier = great_white_hand_mark_modifier
								years = 5
							}
						}
						else = {
							add_character_modifier = {
								modifier = great_invigoreted_troops_modifier
								years = 5
							}
						}	
					}
				}
			}
			flag:home = {
				random_list = {
					50 = {	# Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 15 30 }
						}
					}
					50 = {	# success
						desc = evil.0023.a
						trigger_event = {
							id = evil.0223
							days = { 15 30 }
						}
						if = {
							limit = {
								OR = {
									root.faith = faith:lidless_eye
									root.faith = faith:sons_of_sauron
									root.faith = faith:red_eye_cult
								}
							}
							add_character_modifier = {
								modifier = red_eye_mark_modifier
								years = 4
							}
						}
						else_if = {
							limit = {root.faith = faith:white_hand_cult}
							add_character_modifier = {
								modifier = great_white_hand_mark_modifier
								years = 4
							}
						}
						else = {
							add_character_modifier = {
								modifier = great_invigoreted_troops_modifier
								years = 4
							}
						}	
					}
				}
			}
		}	
	}
}

#Also called assemble the warlords
cast_assemble_the_warchiefs = {
	is_valid = {
		NOT = { var:ritual_location = flag:no_location }
	}
	effect = {		
		if = {
			limit = { var:ritual_location = flag:holy_site_1 }
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 4
			}
		}
		else = {
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 5
			}
		}
		if = {limit = {exists = var:temple var:temple = 4}
			remove_short_term_gold = {
				value = 250
			}
		}
		else = {
			add_piety = {
				value = -250
				if = {limit = {exists = var:temple var:temple = 2} multiply = 0.8 subtract = 1}
			}
		}
		
		set_variable = {name = low_mod value = 0}
		set_variable = {name = high_mod value = 0}
		if = {
			limit = {exists = var:temple var:temple = 5}
			set_variable = {name = low_mod value = -10}
		}
		else_if = {
			limit = {exists = var:temple var:temple = 3}
			set_variable = {name = high_mod value = 10}
		}
		
		switch = {
			trigger = var:ritual_location
			flag:sacred_place = {
				random_list = {
					25 = {	# Failure
						modifier = {add = var:low_mod}
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 15 30 }
						}
					}
					50 = {	# success
						desc = evil.0023.a
						hidden_effect = {
							create_knight = yes
							create_knight = yes
							create_knight = yes
						}
						custom_tooltip = assemble_the_warchiefs.success
						trigger_event = {
							id = evil.0323
							days = { 15 30 }
						}
					}
					25 = {	# Critical success
						modifier = {add = var:high_mod}
						desc = evil.0024.a
						hidden_effect = {
							create_knight = yes
							create_knight = yes
							create_knight = yes
							create_knight = yes
						}
						custom_tooltip = assemble_the_warchiefs.critical_success
						trigger_event = {
							id = evil.0324
							days = { 15 30 }
						}
					}
				}
			}
			flag:wilds = {
				random_list = {
					25 = {	# Critical Failure
						desc = evil.0021.a
						every_courtier = {
							limit = { prowess >= 12 }
							add_prowess_skill = -1
						}
						trigger_event = {
							id = evil.0121
							days = { 15 30 }
						}
					}
					75 = {	# Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 15 30 }
						}
					}
					75 = {	# success
						desc = evil.0023.a
						hidden_effect = {
							create_knight = yes
							create_knight = yes
							create_knight = yes
						}
						custom_tooltip = assemble_the_warchiefs.success
						trigger_event = {
							id = evil.0323
							days = { 15 30 }
						}
					}
					25 = {	# Critical Success
						desc = evil.0024.a
						hidden_effect = {
							create_knight = yes
							create_knight = yes
							create_knight = yes
							create_knight = yes
						}
						custom_tooltip = assemble_the_warchiefs.critical_success
						trigger_event = {
							id = evil.0324
							days = { 15 30 }
						}
					}
				}
			}
			flag:home = {
				random_list = {
					50 = {	# Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 15 30 }
						}
					}
					50 = {	# Success
						desc = evil.0023.a
						hidden_effect = {
							create_knight = yes
							create_knight = yes
							create_knight = yes
						}
						custom_tooltip = assemble_the_warchiefs.success
						trigger_event = {
							id = evil.0323
							days = { 15 30 }
						}
					}
				}
			}
		}
	}
}

# Raise the dead
cast_rise_the_dead = {
	is_valid = {
		NOT = { var:ritual_location = flag:no_location }
	}

	effect = {
		set_variable = {name = low_mod value = 0}
		set_variable = {name = high_mod value = 0}
		if = {
			limit = {exists = var:temple var:temple = 5}
			set_variable = {name = low_mod value = -10}
		}
		else_if = {
			limit = {exists = var:temple var:temple = 3}
			set_variable = {name = high_mod value = 10}
		}
		
		if = {limit = {exists = var:temple var:temple = 4}
			remove_short_term_gold = {
				value = 300
			}
		}
		else = {
			add_piety = {
				value = -300
				if = {limit = {exists = var:temple var:temple = 2} multiply = 0.8 subtract = 1}
			}
		}

		if = {
			limit = { var:ritual_location = flag:holy_site_1 }
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 4
			}
		}
		else = {
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 5
			}
		}
		switch = {
			trigger = var:ritual_location
			flag:sacred_place = {
				random_list = {
					25 = {	# Failure
						desc = evil.0022.a
						modifier = {add = var:low_mod}
						trigger_event = {
							id = evil.0122
							days = { 15 30 }
						}
					}
					50 = {	# Success
						desc = evil.0023.a
						trigger_event = {
							id = evil.0423
							days = { 15 30 }
						}
						spawn_army = {
							men_at_arms = {
								type = unburied_wights
								stacks = 1
							}
							men_at_arms = {
								type = unburied_wights
								stacks = 1
							}
							men_at_arms = {
								type = blighted_trappers 
								stacks = 12
							}
							location = capital_province
							inheritable = no
							uses_supply = no
							name = wight_event_troops
						}							
					}
					25 = {	# Critical Success
						desc = evil.0024.a
						modifier = {add = var:high_mod}
						trigger_event = {
							id = evil.0424
							days = { 15 30 }
						}
						spawn_army = {
							men_at_arms = {
								type = unburied_wights
								stacks = 2
							}
							men_at_arms = {
								type = unburied_wights
								stacks = 2
							}
							men_at_arms = {
								type = blighted_trappers 
								stacks = 14
							}
							location = capital_province
							inheritable = no
							uses_supply = no
							name = wight_event_troops
						}
					}
				}
			}
			flag:wilds = {
				random_list = {
					25 = {	# Critical Failure
						desc = evil.0021.a
						trigger_event = {
							id = evil.0121
							days = { 15 30 }
						}						
						add_character_modifier = {
							modifier = critical_failure_rise_the_dead
							years = 3
						}
					}
					75 = {	# Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 15 30 }
						}
					}
					75 = {	# Success
						desc = evil.0023.a
						trigger_event = {
							id = evil.0423
							days = { 15 30 }
						}
						spawn_army = {
							men_at_arms = {
								type = unburied_wights
								stacks = 1
							}
							men_at_arms = {
								type = unburied_wights
								stacks = 1
							}
							men_at_arms = {
								type = blighted_trappers 
								stacks = 12
							}
							location = capital_province
							inheritable = no
							uses_supply = no
							name = wight_event_troops
						}
					}
					25 = {	# Critical Success
						desc = evil.0024.a
						trigger_event = {
							id = evil.0424
							days = { 15 30 }
						}
						spawn_army = {
							men_at_arms = {
								type = unburied_wights
								stacks = 2
							}
							men_at_arms = {
								type = unburied_wights
								stacks = 2
							}
							men_at_arms = {
								type = blighted_trappers 
								stacks = 14
							}
							location = capital_province
							inheritable = no
							uses_supply = no
							name = wight_event_troops
						}
					}
				}
			}
			flag:home = {
				random_list = {
					50 = {	# Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 15 30 }
						}
					}
					50 = {	# Success
						desc = evil.0023.a
						trigger_event = {
							id = evil.0423
							days = { 15 30 }
						}
						spawn_army = {
							men_at_arms = {
								type = unburied_wights
								stacks = 1
							}
							men_at_arms = {
								type = unburied_wights
								stacks = 1
							}
							men_at_arms = {
								type = blighted_trappers 
								stacks = 12
							}
							location = capital_province
							inheritable = no
							uses_supply = no
							name = wight_event_troops
						}
					}
				}
			}
		}
	}
}

# Also called invoke sigils
cast_invoke_watchers = {
	is_valid = {
		NOT = { var:ritual_location = flag:no_location }
	}
	effect = {
		set_variable = {name = low_mod value = 0}
		set_variable = {name = high_mod value = 0}
		if = {
			limit = {exists = var:temple var:temple = 5}
			set_variable = {name = low_mod value = -10}
		}
		else_if = {
			limit = {exists = var:temple var:temple = 3}
			set_variable = {name = high_mod value = 10}
		}

		if = {
			limit = { var:ritual_location = flag:holy_site_1 }
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 4
			}
		}
		else = {
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 5
			}
		}

		if = {limit = {exists = var:temple var:temple = 4}
			remove_short_term_gold = {
				value = 400
			}
		}
		else = {
			add_piety = {
				value = -400
				if = {limit = {exists = var:temple var:temple = 2} multiply = 0.8 subtract = 1}
			}
		}
		
		switch = {
			trigger = var:ritual_location
			flag:sacred_place = {
				random_list = {
					25 = {	# Failure
						desc = evil.0022.a
						modifier = {add = var:low_mod}
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					50 = {	# Success
						desc = evil.0023.a
						capital_province = {
							add_province_modifier = {
								modifier = watchers_modifier
								years = 5
							}
						}
						trigger_event = {
							id = evil.0523
							days = { 10 30 }
						}
					}
					25 = {	# Critical success
						modifier = {add = var:high_mod}
						desc = evil.0024.a
						capital_province = {
							add_province_modifier = {
								modifier = watchers_modifier
								years = 6
							}
						}
						trigger_event = {
							id = evil.0524
							days = { 10 30 }
						}
					}
				}
			}
			flag:wilds = {
				random_list = {
					25 = {	# Critical Failure
						desc = evil.0021.a
						trigger_event = {
							id = evil.0121
							days = { 10 30 }
						}
					}
					75 = {	# Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					75 = {	# success
						desc = evil.0023.a
						capital_province = {
							add_province_modifier = {
								modifier = watchers_modifier
								years = 5
							}
						}
						trigger_event = {
							id = evil.0523
							days = { 10 30 }
						}
					}
					25 = {	# Critical Success
						desc = evil.0024.a
						capital_province = {
							add_province_modifier = {
								modifier = watchers_modifier
								years = 6
							}
						}
						trigger_event = {
							id = evil.0524
							days = { 10 30 }
						}
					}
				}
			}
			flag:home = {
				random_list = {
					50 = {	# Failure							
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					50 = {	# success				
						desc = evil.0023.a
						capital_province = {
							add_province_modifier = {
								modifier = watchers_modifier
								years = 5
							}
						}
						trigger_event = {
							id = evil.0523
							days = { 10 30 }
						}
					}
				}
			}
		}
	}
}

cast_summon_being_of_darkness = {
	is_valid = {
		NOT = { var:ritual_location = flag:no_location }
	}
	effect = {
		set_variable = {name = low_mod value = 0}
		set_variable = {name = high_mod value = 0}
		if = {
			limit = {exists = var:temple var:temple = 5}
			set_variable = {name = low_mod value = -10}
		}
		else_if = {
			limit = {exists = var:temple var:temple = 3}
			set_variable = {name = high_mod value = 10}
		}

		if = {
			limit = { var:ritual_location = flag:holy_site_1 }
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 4
			}
		}
		else = {
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 5
			}
		}

		if = {limit = {exists = var:temple var:temple = 4}
			remove_short_term_gold = {
				value = 500
			}
		}
		else = {
			add_piety = {
				value = -500
				if = {limit = {exists = var:temple var:temple = 2} multiply = 0.8 subtract = 1}
			}
		}
		switch = {
			trigger = var:ritual_location
			flag:sacred_place = {
				random_list = {
					25 = {	# Failure
						modifier = {add = var:low_mod}
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					50 = {	# success
						desc = evil.0023.a
						trigger_event = {
							id = evil.0623
							days = { 10 30 }
						}
						add_character_modifier = {
							modifier = fell_beast_mount_modifier
							years = 5
						}
						if = {
							limit = {has_character_modifier = drake_mount_modifier}
							remove_character_modifier = drake_mount_modifier
						}
					}
					25 = {	# Critical success
						modifier = {add = var:high_mod}
						desc = evil.0024.a
						trigger_event = {
							id = evil.0624
							days = { 10 30 }
						}							
						add_character_modifier = {
							modifier = fell_beast_mount_modifier
							years = 6
						}
						if = {
							limit = {has_character_modifier = drake_mount_modifier}
							remove_character_modifier = drake_mount_modifier
						}
					}
				}
			}
			flag:wilds = {
				random_list = {
					25 = {	# Critical Failure
						desc = evil.0021.a
						trigger_event = {
							id = evil.0121
							days = { 10 30 }
						}							
						if = {
							limit = {has_character_modifier = drake_mount_modifier}
							remove_character_modifier = drake_mount_modifier
						}
						add_character_modifier = {
							modifier = critical_failure_being_of_darkness
							years = 5
						}
					}
					75 = {	# Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					75 = {	# success
						desc = evil.0023.a
						trigger_event = {
							id = evil.0623
							days = { 10 30 }
						}
						add_character_modifier = {
							modifier = fell_beast_mount_modifier
							years = 5
						}
						if = {
							limit = {has_character_modifier = drake_mount_modifier}
							remove_character_modifier = drake_mount_modifier
						}
					}
					25 = {	# Critical Success
						desc = evil.0024.a
						trigger_event = {
							id = evil.0624
							days = { 10 30 }
						}
						add_character_modifier = {
							modifier = fell_beast_mount_modifier
							years = 6
						}
						if = {
							limit = {has_character_modifier = drake_mount_modifier}
							remove_character_modifier = drake_mount_modifier
						}
					}
				}
			}
			flag:home = {
				random_list = {
					50 = {	# Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					50 = {	# success
						desc = evil.0023.a
						trigger_event = {
							id = evil.0623
							days = { 10 30 }
						}
						add_character_modifier = {
							modifier = fell_beast_mount_modifier
							years = 5
						}
						if = {
							limit = {has_character_modifier = drake_mount_modifier}
							remove_character_modifier = drake_mount_modifier
						}
					}
				}
			}
		}		
	}
}

cast_cracks_of_the_earth = {
	is_valid = {
		NOT = { var:ritual_location = flag:no_location }
	}
	effect = {
		set_variable = {name = low_mod value = 0}
		set_variable = {name = high_mod value = 0}
		if = {
			limit = {exists = var:temple var:temple = 5}
			set_variable = {name = low_mod value = -10}
		}
		else_if = {
			limit = {exists = var:temple var:temple = 3}
			set_variable = {name = high_mod value = 10}
		}

		if = {
			limit = { var:ritual_location = flag:holy_site_1 }
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 4
			}
		}
		else = {
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 5
			}
		}

		if = {limit = {exists = var:temple var:temple = 4}
			remove_short_term_gold = {
				value = 600
			}
		}
		else = {
			add_piety = {
				value = -600
				if = {limit = {exists = var:temple var:temple = 2} multiply = 0.8 subtract = 1}
			}
		}
		switch = {
			trigger = var:ritual_location
			flag:sacred_place = {
				random_list = {
					25 = {	 # Failure
						modifier = {add = var:low_mod}
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					50 = {	#success
						desc = evil.0023.a
						trigger_event = {
							id = evil.0723
							days = { 10 30 }
						}
						capital_county = {
							if = {
								limit = {
									holder.top_liege = root.liege
									NOT = {has_county_modifier = cracks_of_the_earth_modifier}
								}
								add_county_modifier = {
									modifier = cracks_of_the_earth_modifier
									years = 5
								}
							}
							every_neighboring_county = {
								if = {
									limit = {
										holder.top_liege = root.liege
										NOT = {has_county_modifier = cracks_of_the_earth_modifier}
									}
									add_county_modifier = {
										modifier = cracks_of_the_earth_modifier
										years = 5
									}
								}
							}
						}
					}
					25 = {	#Critical success
						modifier = {add = var:high_mod}
						desc = evil.0024.a
						trigger_event = {
							id = evil.0724
							days = { 10 30 }
						}
						capital_county = {
							if = {
								limit = {
									holder.top_liege = root.liege
									NOT = {has_county_modifier = cracks_of_the_earth_modifier}
								}
								add_county_modifier = {
									modifier = cracks_of_the_earth_modifier
									years = 6
								}
							}
							every_neighboring_county = {
								if = {
									limit = {
										holder.top_liege = root.liege
										NOT = {has_county_modifier = cracks_of_the_earth_modifier}
									}
									add_county_modifier = {
										modifier = cracks_of_the_earth_modifier
										years = 6
									}
								}
							}
						}
					}		
				}
			}
			flag:wilds = {
				random_list = {
					25 = {	 #Critical Failure
						desc = evil.0021.a
						trigger_event = {
							id = evil.0121
							days = { 10 30 }
						}
						capital_province = {
							add_province_modifier = {
								modifier = critical_failure_cracks_of_the_earth
								years = 5
							}
						}
					}
					75 = {	 #Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					75 = {	 #success
						desc = evil.0023.a
						trigger_event = {
							id = evil.0723
							days = { 10 30 }
						}
						capital_county = {
							if = {
								limit = {
									holder.top_liege = root.liege
									NOT = {has_county_modifier = cracks_of_the_earth_modifier}
								}
								add_county_modifier = {
									modifier = cracks_of_the_earth_modifier
									years = 5
								}
							}
							every_neighboring_county = {
								if = {
									limit = {
										holder.top_liege = root.liege
										NOT = {has_county_modifier = cracks_of_the_earth_modifier}
									}
									add_county_modifier = {
										modifier = cracks_of_the_earth_modifier
										years = 5
									}
								}
							}
						}
					}
					25 = {	 #Critical Success
						desc = evil.0024.a
						trigger_event = {
							id = evil.0724
							days = { 10 30 }
						}
						capital_county = {
							if = {
								limit = {
									holder.top_liege = root.liege
									NOT = {has_county_modifier = cracks_of_the_earth_modifier}
								}
								add_county_modifier = {
									modifier = cracks_of_the_earth_modifier
									years = 6
								}
							}
							every_neighboring_county = {
								if = {
									limit = {
										holder.top_liege = root.liege
										NOT = {has_county_modifier = cracks_of_the_earth_modifier}
									}
									add_county_modifier = {
										modifier = cracks_of_the_earth_modifier
										years = 6
									}
								}
							}
						}
					}
				}
			}
			flag:home = {
				random_list = {
					50 = {	 #Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					50 = {	 #success
						desc = evil.0023.a
						trigger_event = {
							id = evil.0723
							days = { 10 30 }
						}
						capital_county = {
							if = {
								limit = {
									holder.top_liege = root.liege
									NOT = {has_county_modifier = cracks_of_the_earth_modifier}
								}
								add_county_modifier = {
									modifier = cracks_of_the_earth_modifier
									years = 5
								}
							}
							every_neighboring_county = {
								if = {
									limit = {
										holder.top_liege = root.liege
										NOT = {has_county_modifier = cracks_of_the_earth_modifier}
									}
									add_county_modifier = {
										modifier = cracks_of_the_earth_modifier
										years = 5
									}
								}
							}
						}
					}
				}
			}
		}		
	}
}

cast_dark_vitality = {
	is_valid = {
		NOT = { var:ritual_location = flag:no_location }
	}
	effect = {	
		set_variable = {name = low_mod value = 0}
		set_variable = {name = high_mod value = 0}
		if = {
			limit = {exists = var:temple var:temple = 5}
			set_variable = {name = low_mod value = -10}
		}
		else_if = {
			limit = {exists = var:temple var:temple = 3}
			set_variable = {name = high_mod value = 10}
		}

		if = {
			limit = { var:ritual_location = flag:holy_site_1 }
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 4
			}
		}
		else = {
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 5
			}
		}

		if = {limit = {exists = var:temple var:temple = 4}
			remove_short_term_gold = {
				value = 200
			}
		}
		else = {
			add_piety = {
				value = -200
				if = {limit = {exists = var:temple var:temple = 2} multiply = 0.8 subtract = 1}
			}
		}

		switch = {
			trigger = var:ritual_location
			flag:sacred_place = {
				random_list = {
					25 = {	 # Failure
						modifier = {add = var:low_mod}
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					50 = {	#success
						desc = evil.0023.a
						trigger_event = {
							id = evil.0823
							days = { 10 30 }
						}
						every_courtier_or_guest = {
							limit = {
								age < 100
								NOT = {is_close_family_of = root}
							}
							save_scope_as = righty
						}
						if = {
							limit = {
								scope:righty = {
									exists = yes
								}
							}
						}
						else = {
							create_character = {
								template = servant_character
								dynasty = none
								location = root.capital_province
								save_scope_as = righty
							}
						}
						scope:righty = {
							death = {
								killer = root
								death_reason = death_murder
							}
						}
						add_character_modifier = {
							modifier = dark_vitality_modifier
							years = 10
						}
					}
					25 = {	#Critical success
						modifier = {add = var:high_mod}
						desc = evil.0024.a
						trigger_event = {
							id = evil.0824
							days = { 10 30 }
						}
						every_courtier_or_guest = {
							limit = {
								age < 100
								NOT = {is_close_family_of = root}
							}
							save_scope_as = righty
						}
						if = {
							limit = {
								scope:righty = {
									exists = yes
								}
							}
						}
						else = {
							create_character = {
								template = servant_character
								dynasty = none
								location = root.capital_province
								save_scope_as = righty
							}
						}
						scope:righty = {
							death = {
								killer = root
								death_reason = death_murder
							}
						}
						add_character_modifier = {
							modifier = dark_vitality_modifier
							years = 10
						}
					}		
				}
			}
			flag:wilds = {
				random_list = {
					25 = {	 #Critical Failure
						desc = evil.0021.a
						trigger_event = {
							id = evil.0121
							days = { 10 30 }
						}
						every_courtier_or_guest = {
							limit = {
								age < 100
								NOT = {is_close_family_of = root}
							}
							save_scope_as = righty
						}
						if = {
							limit = {
								scope:righty = {
									exists = yes
								}
							}
						}
						else = {
							create_character = {
								template = servant_character
								dynasty = none
								location = root.capital_province
								save_scope_as = righty
							}
						}
						scope:righty = {
							death = {
								killer = root
								death_reason = death_murder
							}
						}
						add_character_modifier = {						
							modifier = critical_failure_dark_vitality
							years = 5						
						}
					}
					75 = {	 #Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
						every_courtier_or_guest = {
							limit = {
								age < 100
								NOT = {is_close_family_of = root}
							}
							save_scope_as = righty
						}
						if = {
							limit = {
								scope:righty = {
									exists = yes
								}
							}
						}
						else = {
							create_character = {
								template = servant_character
								dynasty = none
								location = root.capital_province
								save_scope_as = righty
							}
						}
						scope:righty = {
							death = {
								killer = root
								death_reason = death_murder
							}
						}
					}
					75 = {	 #success
						desc = evil.0023.a
						trigger_event = {
							id = evil.0823
							days = { 10 30 }
						}
						every_courtier_or_guest = {
							limit = {
								age < 100
								NOT = {is_close_family_of = root}
							}
							save_scope_as = righty
						}
						if = {
							limit = {
								scope:righty = {
									exists = yes
								}
							}
						}
						else = {
							create_character = {
								template = servant_character
								dynasty = none
								location = root.capital_province
								save_scope_as = righty
							}
						}
						scope:righty = {
							death = {
								killer = root
								death_reason = death_murder
							}
						}
						add_character_modifier = {
							modifier = dark_vitality_modifier
							years = 10
						}
					}
					25 = {	 #Critical Success
						desc = evil.0024.a
						trigger_event = {
							id = evil.0824
							days = { 10 30 }
						}
						every_courtier_or_guest = {
							limit = {
								age < 100
								NOT = {is_close_family_of = root}
							}
							save_scope_as = righty
						}
						if = {
							limit = {
								scope:righty = {
									exists = yes
								}
							}
						}
						else = {
							create_character = {
								template = servant_character
								dynasty = none
								location = root.capital_province
								save_scope_as = righty
							}
						}
						scope:righty = {
							death = {
								killer = root
								death_reason = death_murder
							}
						}
						add_character_modifier = {
							modifier = dark_vitality_modifier
							years = 12
						}
					}
				}
			}
			flag:home = {
				random_list = {
					50 = {	 #Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}						
						every_courtier_or_guest = {
							limit = {
								age < 100
								NOT = {is_close_family_of = root}
							}
							save_scope_as = righty
						}
						if = {
							limit = {
								scope:righty = {
									exists = yes
								}
							}
						}
						else = {
							create_character = {
								template = servant_character
								dynasty = none
								location = root.capital_province
								save_scope_as = righty
							}
						}
						scope:righty = {
							death = {
								killer = root
								death_reason = death_murder
							}
						}
					}
					50 = {	 #success
						desc = evil.0023.a
						trigger_event = {
							id = evil.0823
							days = { 10 30 }
						}
						every_courtier_or_guest = {
							limit = {
								age < 100
								NOT = {is_close_family_of = root}
							}
							save_scope_as = righty
						}
						if = {
							limit = {
								scope:righty = {
									exists = yes
								}
							}
						}
						else = {
							create_character = {
								template = servant_character
								dynasty = none
								location = root.capital_province
								save_scope_as = righty
							}
						}
						scope:righty = {
							death = {
								killer = root
								death_reason = death_murder
							}
						}
						add_character_modifier = {
							modifier = dark_vitality_modifier
							years = 10
						}
					}
				}
			}
		}		
	}
}

cast_words_of_power = {
	is_valid = {
		NOT = { var:ritual_location = flag:no_location }
	}
	effect = {	
		set_variable = {name = low_mod value = 0}
		set_variable = {name = high_mod value = 0}
		if = {
			limit = {exists = var:temple var:temple = 5}
			set_variable = {name = low_mod value = -10}
		}
		else_if = {
			limit = {exists = var:temple var:temple = 3}
			set_variable = {name = high_mod value = 10}
		}

		if = {
			limit = { var:ritual_location = flag:holy_site_1 }
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 4
			}
		}
		else = {
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 5
			}
		}
		if = {limit = {exists = var:temple var:temple = 4}
			remove_short_term_gold = {
				value = 300
			}
		}
		else = {
			add_piety = {
				value = -300
				if = {limit = {exists = var:temple var:temple = 2} multiply = 0.8 subtract = 1}
			}
		}

		switch = {
			trigger = var:ritual_location
			flag:sacred_place = {
				random_list = {
					25 = {	 # Failure
						modifier = {add = var:low_mod}
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					50 = {	#success
						desc = evil.0023.a
						trigger_event = {
							id = evil.0923
							days = { 10 30 }
						}
						random_character_war = {
							if = {
								limit = {root = {is_at_war_as_attacker = yes}}
            					casus_belli = {
									every_target_title = {
										if = {
											limit = {title_capital_county = {holder.top_liege = root.liege}}
											random_de_jure_county_holder = {
												limit = {
													top_liege = {is_at_war_with = root.liege}
												}
												capital_county = {
  													every_county_province = {
														if = {
															limit = {has_holding_type = castle_holding}
															add_province_modifier = {
																modifier = words_of_power_modifier
																years = 2
															}
														}	
													}
												}
											}
										}
										else = {
											title_capital_county = {
												if = {
													limit = {
														NOT = {holder.top_liege = root.liege}
													}
													every_county_province = {
														if = {
															limit = {has_holding_type = castle_holding}
															add_province_modifier = {
																modifier = words_of_power_modifier
																years = 2
															}
														}	
													}
												}
											}
										}
									}
								}
							}
        				}
					}
					25 = {	#Critical success
						modifier = {add = var:high_mod}
						desc = evil.0024.a
						trigger_event = {
							id = evil.0924
							days = { 10 30 }
						}
						random_character_war = {
							if = {
								limit = {root = {is_at_war_as_attacker = yes}}
            					casus_belli = {
									every_target_title = {
										if = {
											limit = {title_capital_county = {holder.top_liege = root.liege}}
											random_de_jure_county_holder = {
												limit = {
													top_liege = {is_at_war_with = root.liege}
												}
												capital_county = {
  													every_county_province = {
														if = {
															limit = {has_holding_type = castle_holding}
															add_province_modifier = {
																modifier = words_of_power_modifier
																years = 3
															}
														}	
													}
												}
											}
										}
										else = {
											title_capital_county = {
												if = {
													limit = {
														NOT = {holder.top_liege = root.liege}
													}
													every_county_province = {
														if = {
															limit = {has_holding_type = castle_holding}
															add_province_modifier = {
																modifier = words_of_power_modifier
																years = 3
															}
														}	
													}
												}
											}
										}
									}
								}
							}
        				}
					}		
				}
			}
			flag:wilds = {
				random_list = {
					25 = {	 #Critical Failure
						desc = evil.0021.a
						trigger_event = {
							id = evil.0121
							days = { 10 30 }
						}						
						capital_province = {						
							add_province_modifier = {
								modifier = critical_failure_words_of_power
								years = 5						
							}							
						}
					}
					75 = {	 #Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}						
					}
					75 = {	 #success
						desc = evil.0023.a
						trigger_event = {
							id = evil.0923
							days = { 10 30 }
						}
						random_character_war = {
							if = {
								limit = {root = {is_at_war_as_attacker = yes}}
            					casus_belli = {
									every_target_title = {
										if = {limit = {title_capital_county = {holder.top_liege = root.liege}}
											random_de_jure_county_holder = {
												limit = {
													top_liege = {is_at_war_with = root.liege}
												}
												capital_county = {
  													every_county_province = {
														if = {
															limit = {has_holding_type = castle_holding}
															add_province_modifier = {
																modifier = words_of_power_modifier
																years = 2
															}
														}	
													}
												}
											}
										}
										else = {
											title_capital_county = {
												if = {
													limit = {
														NOT = {holder.top_liege = root.liege}
													}
													every_county_province = {
														if = {
															limit = {has_holding_type = castle_holding}
															add_province_modifier = {
																modifier = words_of_power_modifier
																years = 2
															}
														}	
													}
												}
											}
										}
									}
								}
							}
        				}
					}
					25 = {	 #Critical Success
						desc = evil.0024.a
						trigger_event = {
							id = evil.0924
							days = { 10 30 }
						}
						random_character_war = {
							if = {
								limit = {root = {is_at_war_as_attacker = yes}}
            					casus_belli = {
									every_target_title = {
										if = {limit = {title_capital_county = {holder.top_liege = root.liege}}
											random_de_jure_county_holder = {
												limit = {
													top_liege = {is_at_war_with = root.liege}
												}
												capital_county = {
  													every_county_province = {
														if = {
															limit = {has_holding_type = castle_holding}
															add_province_modifier = {
																modifier = words_of_power_modifier
																years = 3
															}
														}	
													}
												}
											}
										}
										else = {
											title_capital_county = {
												if = {
													limit = {
														NOT = {holder.top_liege = root.liege}
													}
													every_county_province = {
														if = {
															limit = {has_holding_type = castle_holding}
															add_province_modifier = {
																modifier = words_of_power_modifier
																years = 3
															}
														}	
													}
												}
											}
										}
									}
								}
							}
        				}
					}
				}
			}
			flag:home = {
				random_list = {
					50 = {	 #Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					50 = {	 #success
						desc = evil.0023.a
						trigger_event = {
							id = evil.0923
							days = { 10 30 }
						}
						random_character_war = {
							if = {
								limit = {root = {is_at_war_as_attacker = yes}}
            					casus_belli = {
									every_target_title = {
										if = {limit = {title_capital_county = {holder.top_liege = root.liege}}
											random_de_jure_county_holder = {
												limit = {
													top_liege = {is_at_war_with = root.liege}
												}
												capital_county = {
  													every_county_province = {
														if = {
															limit = {has_holding_type = castle_holding}
															add_province_modifier = {
																modifier = words_of_power_modifier
																years = 2
															}
														}	
													}
												}
											}
										}
										else = {
											title_capital_county = {
												if = {
													limit = {
														NOT = {holder.top_liege = root.liege}
													}
													every_county_province = {
														if = {
															limit = {has_holding_type = castle_holding}
															add_province_modifier = {
																modifier = words_of_power_modifier
																years = 2
															}
														}	
													}
												}
											}
										}
									}
								}
							}
        				}
					}
				}
			}
		}		
	}
}

cast_forge_morgul_weapons = {
	is_valid = {
		NOT = { var:ritual_location = flag:no_location }
	}
	effect = {
		set_variable = {name = low_mod value = 0}
		set_variable = {name = high_mod value = 0}
		if = {
			limit = {exists = var:temple var:temple = 5}
			set_variable = {name = low_mod value = -10}
		}
		else_if = {
			limit = {exists = var:temple var:temple = 3}
			set_variable = {name = high_mod value = 10}
		}

		if = {
			limit = { var:ritual_location = flag:holy_site_1 }
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 4
			}
		}
		else = {
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 5
			}
		}
		if = {limit = {exists = var:temple var:temple = 4}
			remove_short_term_gold = {
				value = 750
			}
		}
		else = {
			add_piety = {
				value = -750
				if = {limit = {exists = var:temple var:temple = 2} multiply = 0.8 subtract = 1}
			}
		}
		switch = {
			trigger = var:ritual_location
			flag:sacred_place = {
				random_list = {
					25 = {	# Failure
						modifier = {add = var:low_mod}
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					50 = {	# Success
						desc = evil.0023.a
						trigger_event = {
							id = evil.1023
							days = { 10 30 }
						}
						add_character_modifier = {
							modifier = morgul_weapons
							years = 5
						}
					}
					25 = {	# Critical Success
					modifier = {add = var:high_mod}
						desc = evil.0024.a
						trigger_event = {
							id = evil.1024
							days = { 10 30 }
						}							
						create_artifact_morgul_blade_effect = { OWNER = this }
					}
				}
			}
			flag:wilds = {
				random_list = {
					25 = {	# Critical Failure
						desc = evil.0021.a
						trigger_event = {
							id = evil.0121
							days = { 10 30 }
						}
						add_character_modifier = {
							modifier = critical_failure_morgul_weapons
							years = 5
						}
					}
					75 = {	# Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					75 = {	# Success
						desc = evil.0023.a
						trigger_event = {
							id = evil.1023
							days = { 10 30 }
						}
						add_character_modifier = {
							modifier = morgul_weapons
							years = 5
						}
					}
					25 = {	# Critical Success
						desc = evil.0024.a
						trigger_event = {
							id = evil.1024
							days = { 10 30 }
						}
						create_artifact_morgul_blade_effect = { OWNER = this }
					}
				}
			}
			flag:home = {
				random_list = {
					50 = {	# Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					50 = {	# Success
						desc = evil.0023.a
						trigger_event = {
							id = evil.1023
							days = { 10 30 }
						}
						add_character_modifier = {
							modifier = morgul_weapons
							years = 5
						}
					}
				}
			}
		}	
	}
}

cast_purse_them_relentlessly = {
	is_valid = {
		NOT = { var:ritual_location = flag:no_location }
	}
	effect = {
		set_variable = {name = low_mod value = 0}
		set_variable = {name = high_mod value = 0}
		if = {
			limit = {exists = var:temple var:temple = 5}
			set_variable = {name = low_mod value = -10}
		}
		else_if = {
			limit = {exists = var:temple var:temple = 3}
			set_variable = {name = high_mod value = 10}
		}
		if = {
			limit = { var:ritual_location = flag:holy_site_1 }
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 4
			}
		}
		else = {
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 5
			}
		}
		if = {limit = {exists = var:temple var:temple = 4}
			remove_short_term_gold = {
				value = 300
			}
		}
		else = {
			add_piety = {
				value = -300
				if = {limit = {exists = var:temple var:temple = 2} multiply = 0.8 subtract = 1}
			}
		}
		switch = {
			trigger = var:ritual_location
			flag:sacred_place = {
				random_list = {
					25 = {	# Failure
						modifier = {add = var:low_mod}
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					50 = {	# success
						desc = evil.0023.a
						trigger_event = {
							id = evil.1123
							days = { 10 30 }
						}
						add_character_modifier = {
							modifier = nazgul_pursue_modifier
							years = 5
						}
					}
					25 = {	# Critical success
						modifier = {add = var:high_mod}
						desc = evil.0024.a
						trigger_event = {
							id = evil.1124
							days = { 10 30 }
						}							
						add_character_modifier = {
							modifier = nazgul_pursue_modifier
							years = 6
						}
					}
				}
			}
			flag:wilds = {
				random_list = {
					25 = {	# Critical Failure
						desc = evil.0021.a
						trigger_event = {
							id = evil.0121
							days = { 10 30 }
						}
						add_character_modifier = {
							modifier = critical_failure_nazgul_pursue
							years = 5
						}
					}
					75 = {	# Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					75 = {	# success
						desc = evil.0023.a
						trigger_event = {
							id = evil.1123
							days = { 10 30 }
						}
						add_character_modifier = {
							modifier = nazgul_pursue_modifier
							years = 5
						}
					}
					25 = {	# Critical Success
						desc = evil.0024.a
						trigger_event = {
							id = evil.1124
							days = { 10 30 }
						}
						add_character_modifier = {
							modifier = nazgul_pursue_modifier
							years = 6
						}
					}
				}
			}
			flag:home = {
				random_list = {
					50 = {	# Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					50 = {	# success
						desc = evil.0023.a
						trigger_event = {
							id = evil.1123
							days = { 10 30 }
						}
						add_character_modifier = {
							modifier = nazgul_pursue_modifier
							years = 5
						}
					}
				}
			}
		}
	}
}

cast_black_breath = {
	is_valid = {
		NOT = { var:ritual_location = flag:no_location }
	}
	effect = {
		set_variable = {name = low_mod value = 0}
		set_variable = {name = high_mod value = 0}
		if = {
			limit = {exists = var:temple var:temple = 5}
			set_variable = {name = low_mod value = -10}
		}
		else_if = {
			limit = {exists = var:temple var:temple = 3}
			set_variable = {name = high_mod value = 10}
		}
		if = {
			limit = { var:ritual_location = flag:holy_site_1 }
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 4
			}
		}
		else = {
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 5
			}
		}
		if = {limit = {exists = var:temple var:temple = 4}
			remove_short_term_gold = {
				value = 1500
			}
		}
		else = {
			add_piety = {
				value = -1500
				if = {limit = {exists = var:temple var:temple = 2} multiply = 0.8 subtract = 1}
			}
		}
		switch = {
			trigger = var:ritual_location
			flag:sacred_place = {
				random_list = {
					25 = {	# Failure
						modifier = {add = var:low_mod}
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					50 = {	# Success
						desc = evil.0023.a
						trigger_event = {
							id = evil.1223
							days = { 10 30 }
						}
						custom_tooltip =  custom_desc_black_breath.tt
						random_neighboring_and_across_water_top_liege_realm_owner = {
							limit = {
								religion = { is_in_family = rf_eruhini }
								realm_size > 50
								NOT = { culture ?= culture:wastelands }
								NOR = { 
									is_elf = yes
									cannot_be_killed = yes
									has_trait = black_breath
									has_character_flag = contraction_cooldown_black_breath
								}
							}
							alternative_limit = {
								religion = { is_in_family = rf_eruhini }
								NOT = { culture ?= culture:wastelands }
								NOR = { 
									is_elf = yes
									cannot_be_killed = yes
									has_trait = black_breath
									has_character_flag = contraction_cooldown_black_breath
								}
							}
							alternative_limit = {
								NOT = { religion = { is_in_family = rf_forcesofevil } }
								NOT = { culture ?= culture:wastelands }
								NOR = { 
									is_elf = yes
									cannot_be_killed = yes
									has_trait = black_breath
									has_character_flag = contraction_cooldown_black_breath
								}
							}
							add_to_list = black_breath_targets
							hidden_effect = {
								every_in_list = {
									list = black_breath_targets
									random_list = {
										0 = {
											compare_modifier = {
												value = this.health
												multiplier = 5
											}
										}
										50 = { contract_disease_notify_effect = { DISEASE = black_breath } }
									}
								}
							}
						}
					}
					25 = {	# Critical Success
						modifier = {add = var:high_mod}
						desc = evil.0024.a
						trigger_event = {
							id = evil.1224
							days = { 10 30 }
						}
						custom_tooltip =  custom_desc_critical_black_breath.tt						
						random_neighboring_and_across_water_top_liege_realm_owner = {
							limit = {
								religion = { is_in_family = rf_eruhini }
								realm_size > 50
								NOT = { culture ?= culture:wastelands }
								NOR = { 
									is_elf = yes
									cannot_be_killed = yes
									has_trait = black_breath
									has_character_flag = contraction_cooldown_black_breath
								}
							}
							alternative_limit = {
								religion = { is_in_family = rf_eruhini }
								NOT = { culture ?= culture:wastelands }
								NOR = { 
									is_elf = yes
									cannot_be_killed = yes
									has_trait = black_breath
									has_character_flag = contraction_cooldown_black_breath
								}
							}
							alternative_limit = {
								NOT = { religion = { is_in_family = rf_forcesofevil } }
								NOT = { culture ?= culture:wastelands }
								NOR = {
									is_elf = yes
									cannot_be_killed = yes
									has_trait = black_breath
									has_character_flag = contraction_cooldown_black_breath
								}
							}
							add_to_list = black_breath_targets
							hidden_effect = {
								every_in_list = {
									list = black_breath_targets
									contract_disease_notify_effect = { DISEASE = black_breath }
								}
							}
						}
					}
				}
			}
			flag:wilds = {
				random_list = {
					25 = {	# Critical Failure
						desc = evil.0021.a
						trigger_event = {
							id = evil.0121
							days = { 10 30 }
						}
						add_character_modifier = {
							modifier = critical_failure_black_breath
							years = 5
						}
					}
					75 = {	# Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					75 = {	# Success
						desc = evil.0023.a
						trigger_event = {
							id = evil.1223
							days = { 10 30 }
						}
						custom_tooltip =  custom_desc_black_breath.tt
						random_neighboring_and_across_water_top_liege_realm_owner = {
							limit = {
								religion = { is_in_family = rf_eruhini }
								realm_size > 50
								NOT = { culture ?= culture:wastelands }
								NOR = { 
									is_elf = yes
									cannot_be_killed = yes
									has_trait = black_breath
									has_character_flag = contraction_cooldown_black_breath
								}
							}
							alternative_limit = {
								religion = { is_in_family = rf_eruhini }
								NOT = { culture ?= culture:wastelands }
								NOR = { 
									is_elf = yes
									cannot_be_killed = yes
									has_trait = black_breath
									has_character_flag = contraction_cooldown_black_breath
								}
							}
							alternative_limit = {
								NOT = { religion = { is_in_family = rf_forcesofevil } }
								NOT = { culture ?= culture:wastelands }
								NOR = { 
									is_elf = yes
									cannot_be_killed = yes
									has_trait = black_breath
									has_character_flag = contraction_cooldown_black_breath
								}
							}
							add_to_list = black_breath_targets
							hidden_effect = {
								every_in_list = {
									list = black_breath_targets
									random_list = {
										0 = {
											compare_modifier = {
												value = this.health
												multiplier = 5
											}
										}
										50 = { contract_disease_notify_effect = { DISEASE = black_breath } }
									}
								}
							}
						}
					}
				}
			}
			flag:home = {
				random_list = {
					50 = {	# Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					50 = {	# Success
						desc = evil.0023.a
						trigger_event = {
							id = evil.1223
							days = { 10 30 }
						}
						custom_tooltip =  custom_desc_black_breath.tt
						random_neighboring_and_across_water_top_liege_realm_owner = {
							limit = {
								religion = { is_in_family = rf_eruhini }
								realm_size > 50
								NOT = { culture ?= culture:wastelands }
								NOR = { 
									is_elf = yes
									cannot_be_killed = yes
									has_trait = black_breath
									has_character_flag = contraction_cooldown_black_breath
								}
							}
							alternative_limit = {
								religion = { is_in_family = rf_eruhini }
								NOT = { culture ?= culture:wastelands }
								NOR = { 
									is_elf = yes
									cannot_be_killed = yes
									has_trait = black_breath
									has_character_flag = contraction_cooldown_black_breath
								}
							}
							alternative_limit = {
								NOT = { religion = { is_in_family = rf_forcesofevil } }
								NOT = { culture ?= culture:wastelands }
								NOR = { 
									is_elf = yes
									cannot_be_killed = yes
									has_trait = black_breath
									has_character_flag = contraction_cooldown_black_breath
								}
							}
							add_to_list = black_breath_targets
							hidden_effect = {
								every_in_list = {
									list = black_breath_targets
									random_list = {
										0 = {
											compare_modifier = {
												value = this.health
												multiplier = 5
											}
										}
										50 = { contract_disease_notify_effect = { DISEASE = black_breath } }
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

cast_nazgul_restoration = {
	is_valid = {
		NOT = { var:ritual_location = flag:no_location }
	}
	effect = {
		set_variable = {name = low_mod value = 0}
		set_variable = {name = high_mod value = 0}
		if = {
			limit = {exists = var:temple var:temple = 5}
			set_variable = {name = low_mod value = -10}
		}
		else_if = {
			limit = {exists = var:temple var:temple = 3}
			set_variable = {name = high_mod value = 10}
		}
		if = {
			limit = { var:ritual_location = flag:holy_site_1 }
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 4
			}
		}
		else = {
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 5
			}
		}
		if = {limit = {exists = var:temple var:temple = 4}
			remove_short_term_gold = {
				value = 250
			}
		}
		else = {
			add_piety = {
				value = -250
				if = {limit = {exists = var:temple var:temple = 2} multiply = 0.8 subtract = 1}
			}
		}
		switch = {
			trigger = var:ritual_location
			flag:sacred_place = {
				random_list = {
					25 = {	# Failure
						modifier = {add = var:low_mod}
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					50 = {	# success
						desc = evil.0023.a
						trigger_event = {
							id = evil.1323
							days = { 10 30 }
						}
						add_character_modifier = {
							modifier = nazgul_restoration_modifier
							years = 5
						}
						safe_wound_treatment_effect = yes
					}
					25 = {	# Critical success
						modifier = {add = var:high_mod}
						desc = evil.0024.a
						trigger_event = {
							id = evil.1324
							days = { 10 30 }
						}							
						add_character_modifier = {
							modifier = nazgul_restoration_modifier
							years = 6
						}
						safe_wound_treatment_effect = yes
					}
				}
			}
			flag:wilds = {
				random_list = {
					25 = {	# Critical Failure
						desc = evil.0021.a
						trigger_event = {
							id = evil.0121
							days = { 10 30 }
						}
						add_character_modifier = {
							modifier = critical_failure_nazgul_restoration
							years = 5
						}
					}
					75 = {	# Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					75 = {	# success
						desc = evil.0023.a
						trigger_event = {
							id = evil.1323
							days = { 10 30 }
						}
						add_character_modifier = {
							modifier = nazgul_restoration_modifier
							years = 5
						}
						safe_wound_treatment_effect = yes
					}
					25 = {	# Critical Success
						desc = evil.0024.a
						trigger_event = {
							id = evil.1324
							days = { 10 30 }
						}
						add_character_modifier = {
							modifier = nazgul_restoration_modifier
							years = 6
						}
						safe_wound_treatment_effect = yes
					}
				}
			}
			flag:home = {
				random_list = {
					50 = {	# Failure
						desc = evil.0022.a
						trigger_event = {
							id = evil.0122
							days = { 10 30 }
						}
					}
					50 = {	# success
						desc = evil.0023.a
						trigger_event = {
							id = evil.1323
							days = { 10 30 }
						}
						add_character_modifier = {
							modifier = nazgul_restoration_modifier
							years = 5
						}
						safe_wound_treatment_effect = yes
					}
				}
			}
		}
	}
}

cast_ambassador_of_darkness = {
	is_valid = {
		NOT = { var:ritual_location = flag:no_location }
	}
	effect = {
		set_variable = {name = low_mod value = 0}
		set_variable = {name = high_mod value = 0}
		if = {
			limit = {exists = var:temple var:temple = 5}
			set_variable = {name = low_mod value = -10}
		}
		else_if = {
			limit = {exists = var:temple var:temple = 3}
			set_variable = {name = high_mod value = 10}
		}
		if = {limit = {exists = var:temple var:temple = 4}
			remove_short_term_gold = {
				value = 500
			}
		}
		else = {
			add_piety = {
				value = -500
				if = {limit = {exists = var:temple var:temple = 2} multiply = 0.8 subtract = 1}
			}
		}
		if = {
			limit = { var:ritual_location = flag:holy_site_1 }
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 4
			}
		}
		else = {
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 5
			}
		}
		switch = {
				trigger = var:ritual_location
				flag:sacred_place = {
					random_list = {
						25 = {	# Failure
							modifier = {add = var:low_mod}
							desc = evil.0022.a
							trigger_event = {
								id = evil.0122
								days = { 10 30 }
							}
						}
						50 = {	# success
							desc = evil.0023.a
							trigger_event = {
								id = evil.1423
								days = { 10 30 }
							}
							add_character_modifier = {
								modifier = ambassador_of_darkness_modifier
								years = 5
							}
						}
						25 = {	# Critical success
							modifier = {add = var:high_mod}
							desc = evil.0024.a
							trigger_event = {
								id = evil.1424
								days = { 10 30 }
							}							
							add_character_modifier = {
								modifier = ambassador_of_darkness_modifier
								years = 6
							}
						}
					}
				}
				flag:wilds = {
					random_list = {
						25 = {	# Critical Failure
							desc = evil.0021.a
							trigger_event = {
								id = evil.0121
								days = { 10 30 }
							}
							add_character_modifier = {
								modifier = critical_failure_ambassador_of_darkness
								years = 5
							}
						}
						75 = {	# Failure
							desc = evil.0022.a
							trigger_event = {
								id = evil.0122
								days = { 10 30 }
							}
						}
						75 = {	# success
							desc = evil.0023.a
							trigger_event = {
								id = evil.1423
								days = { 10 30 }
							}
							add_character_modifier = {
								modifier = ambassador_of_darkness_modifier
								years = 5
							}
						}
						25 = {	# Critical Success
							desc = evil.0024.a
							trigger_event = {
								id = evil.1424
								days = { 10 30 }
							}
							add_character_modifier = {
								modifier = ambassador_of_darkness_modifier
								years = 6
							}
						}
					}
				}
				flag:home = {
					random_list = {
						50 = {	# Failure
							desc = evil.0022.a
							trigger_event = {
								id = evil.0122
								days = { 10 30 }
							}
						}
						50 = {	# success
							desc = evil.0023.a
							trigger_event = {
								id = evil.1423
								days = { 10 30 }
							}
							add_character_modifier = {
								modifier = ambassador_of_darkness_modifier
								years = 5
							}
						}
					}
				}
		}
	}
}

cast_shapeshifting = {
	is_valid = {
		NOT = { var:ritual_location = flag:no_location }
	}
	effect = {
		set_variable = {name = low_mod value = 0}
		set_variable = {name = high_mod value = 0}
		if = {
			limit = {exists = var:temple var:temple = 5}
			set_variable = {name = low_mod value = -10}
		}
		else_if = {
			limit = {exists = var:temple var:temple = 3}
			set_variable = {name = high_mod value = 10}
		}
		if = {limit = {exists = var:temple var:temple = 4}
			remove_short_term_gold = {
				value = 500
			}
		}
		else = {
			add_piety = {
				value = -500
				if = {limit = {exists = var:temple var:temple = 2} multiply = 0.8 subtract = 1}
			}
		}
		if = {
			limit = { var:ritual_location = flag:holy_site_1 }
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 4
			}
		}
		else = {
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 5
			}
		}
		switch = {
				trigger = var:ritual_location
				flag:sacred_place = {
					random_list = {
						25 = {	# Failure
							modifier = {add = var:low_mod}
							desc = evil.0022.a
							trigger_event = {
								id = evil.0122
								days = { 10 30 }
							}
						}
						50 = {	# success
							desc = evil.0023.a
							trigger_event = {
								id = evil.1523
								days = { 10 30 }
							}
							add_character_modifier = {
								modifier = shapeshifter_modifier
								years = 5
							}
						}
						25 = {	# Critical success
							modifier = {add = var:high_mod}
							desc = evil.0024.a
							trigger_event = {
								id = evil.1524
								days = { 10 30 }
							}							
							add_character_modifier = {
								modifier = shapeshifter_modifier
								years = 6
							}
						}
					}
				}
				flag:wilds = {
					random_list = {
						25 = {	# Critical Failure
							desc = evil.0021.a
							trigger_event = {
								id = evil.0121
								days = { 10 30 }
							}
							add_character_modifier = {
								modifier = critical_failure_shapeshifting
								years = 5
							}
						}
						75 = {	# Failure
							desc = evil.0022.a
							trigger_event = {
								id = evil.0122
								days = { 10 30 }
							}
						}
						75 = {	# success
							desc = evil.0023.a
							trigger_event = {
								id = evil.1523
								days = { 10 30 }
							}
							add_character_modifier = {
								modifier = shapeshifter_modifier
								years = 5
							}
						}
						25 = {	# Critical Success
							desc = evil.0024.a
							trigger_event = {
								id = evil.1524
								days = { 10 30 }
							}
							add_character_modifier = {
								modifier = shapeshifter_modifier
								years = 6
							}
						}
					}
				}
				flag:home = {
					random_list = {
						50 = {	# Failure
							desc = evil.0022.a
							trigger_event = {
								id = evil.0122
								days = { 10 30 }
							}
						}
						50 = {	# success
							desc = evil.0023.a
							trigger_event = {
								id = evil.1523
								days = { 10 30 }
							}
							add_character_modifier = {
								modifier = shapeshifter_modifier
								years = 5
							}
						}
					}
				}
		}
	}
}

cast_reveal_the_secrets = {
	is_valid = {
		NOT = { var:ritual_location = flag:no_location }
	}
	effect = {
		set_variable = {name = low_mod value = 0}
		set_variable = {name = high_mod value = 0}
		if = {
			limit = {exists = var:temple var:temple = 5}
			set_variable = {name = low_mod value = -10}
		}
		else_if = {
			limit = {exists = var:temple var:temple = 3}
			set_variable = {name = high_mod value = 10}
		}
		if = {
			limit = { var:ritual_location = flag:holy_site_1 }
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 4
			}
		}
		else = {
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 5
			}
		}
		if = {limit = {exists = var:temple var:temple = 4}
			remove_short_term_gold = {
				value = 300
			}
		}
		else = {
			add_piety = {
				value = -300
				if = {limit = {exists = var:temple var:temple = 2} multiply = 0.8 subtract = 1}
			}
		}
		switch = {
				trigger = var:ritual_location
				flag:sacred_place = {
					random_list = {
						25 = {	# Failure
							modifier = {add = var:low_mod}
							desc = evil.0022.a
							trigger_event = {
								id = evil.0122
								days = { 10 30 }
							}
						}
						50 = {	# success
							desc = evil.0023.a
							trigger_event = {
								id = evil.1623
								days = { 10 30 }
							}
							every_targeting_scheme = {
								random_scheme_agent_character = {
									save_scope_as = righty
								}
								scheme_owner = {
									save_scope_as = schemer
								}
								root = {
									add_hook = {
										type = manipulation_hook
											target = scope:schemer
									}
								}
								if = {
									limit = {is_scheme_exposed = no}
									expose_scheme = yes
								}
							}
							if = {
								limit = { exists = scope:righty }
								add_hook = {
									type = fabrication_hook
									target = scope:righty
								}
								expose_scheme_agent = scope:righty
							}
						}
						25 = {	# Critical success
							modifier = {add = var:high_mod}
							desc = evil.0024.a
							trigger_event = {
								id = evil.1624
								days = { 10 30 }
							}
							add_intrigue_lifestyle_xp = major_lifestyle_experience
							every_targeting_scheme = {
								random_scheme_agent_character = {
									save_scope_as = righty
								}
								scheme_owner = {
									save_scope_as = schemer
								}
								root = {
									add_hook = {
										type = manipulation_hook
											target = scope:schemer
									}
								}
								if = {
									limit = {is_scheme_exposed = no}
									expose_scheme = yes
								}
							}
							if = {
								limit = { exists = scope:righty }
								add_hook = {
									type = fabrication_hook
									target = scope:righty
								}
								expose_scheme_agent = scope:righty
							}
						}
					}
				}
				flag:wilds = {
					random_list = {
						25 = {	# Critical Failure
							desc = evil.0021.a
							trigger_event = {
								id = evil.0121
								days = { 10 30 }
							}
							add_character_modifier = {
								modifier = critical_failure_reveal_the_secrets
								years = 5
							}
						}
						75 = {	# Failure
							desc = evil.0022.a
							trigger_event = {
								id = evil.0122
								days = { 10 30 }
							}
						}
						75 = {	# success
							desc = evil.0023.a
							trigger_event = {
								id = evil.1623
								days = { 10 30 }
							}
							every_targeting_scheme = {
								random_scheme_agent_character = {
									save_scope_as = righty
								}
								scheme_owner = {
									save_scope_as = schemer
								}
								root = {
									add_hook = {
										type = manipulation_hook
											target = scope:schemer
									}
								}
								if = {
									limit = {is_scheme_exposed = no}
									expose_scheme = yes
								}
							}
							if = {
								limit = { exists = scope:righty }
								add_hook = {
									type = fabrication_hook
									target = scope:righty
								}
								expose_scheme_agent = scope:righty
							}
						}
						25 = {	# Critical Success
							desc = evil.0024.a
							trigger_event = {
								id = evil.1624
								days = { 10 30 }
							}
							add_intrigue_lifestyle_xp = major_lifestyle_experience
							every_targeting_scheme = {
								random_scheme_agent_character = {
									save_scope_as = righty
								}
								scheme_owner = {
									save_scope_as = schemer
								}
								root = {
									add_hook = {
										type = manipulation_hook
											target = scope:schemer
									}
								}
								if = {
									limit = {is_scheme_exposed = no}
									expose_scheme = yes
								}
							}
							if = {
								limit = { exists = scope:righty }
								add_hook = {
									type = fabrication_hook
									target = scope:righty
								}
								expose_scheme_agent = scope:righty
							}
						}
					}
				}
				flag:home = {
					random_list = {
						50 = {	# Failure
							desc = evil.0022.a
							trigger_event = {
								id = evil.0122
								days = { 10 30 }
							}
						}
						50 = {	# success
							desc = evil.0023.a
							trigger_event = {
								id = evil.1623
								days = { 10 30 }
							}
							every_targeting_scheme = {
								random_scheme_agent_character = {
									save_scope_as = righty
								}
								scheme_owner = {
									save_scope_as = schemer
								}
								root = {
									add_hook = {
										type = manipulation_hook
											target = scope:schemer
									}
								}
								if = {
									limit = {is_scheme_exposed = no}
									expose_scheme = yes
								}
							}
							if = {
								limit = { exists = scope:righty }
								add_hook = {
									type = fabrication_hook
									target = scope:righty
								}
								expose_scheme_agent = scope:righty
							}
						}
					}
				}
		}
	}
}

cast_cast_the_darkness = {
	is_valid = {
		NOT = { var:ritual_location = flag:no_location }
	}
	effect = {		
		set_variable = {name = low_mod value = 0}
		set_variable = {name = high_mod value = 0}
		if = {
			limit = {exists = var:temple var:temple = 5}
			set_variable = {name = low_mod value = -10}
		}
		else_if = {
			limit = {exists = var:temple var:temple = 3}
			set_variable = {name = high_mod value = 10}
		}
		if = {
			limit = { var:ritual_location = flag:holy_site_1 }
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 4
			}
		}
		else = {
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 5
			}
		}		
		if = {limit = {exists = var:temple var:temple = 4}
			remove_short_term_gold = {
				value = 1000
			}
		}
		else = {
			add_piety = {
				value = -1000
				if = {limit = {exists = var:temple var:temple = 2} multiply = 0.8 subtract = 1}
			}
		}
		switch = {
				trigger = var:ritual_location
				flag:sacred_place = {
					random_list = {
						25 = {	# Failure
							modifier = {add = var:low_mod}
							desc = evil.0022.a
							trigger_event = {
								id = evil.0122
								days = { 10 30 }
							}
						}
						50 = {	# success
							desc = evil.0023.a
							trigger_event = {
								id = evil.1723
								days = { 10 30 }
							}
							custom_tooltip =  custom_desc_cast_the_darkness.tt
							hidden_effect = {
								every_character_to_title_neighboring_and_across_water_county = {
									if = {
										limit = {
											NOR = {
												holder.top_liege = root.liege
												has_county_modifier = darkness_modifier
												holder = {
													any_character_artifact = { has_variable = elven_ring }
												}
												holder.top_liege = {
													any_character_artifact = { has_variable = elven_ring }
												}
											}
										}
										add_county_modifier = {
											modifier = darkness_modifier
											years = 1
										}
									}								
								}
							}
						}
						25 = {	# Critical success
							modifier = {add = var:high_mod}
							desc = evil.0024.a
							trigger_event = {
								id = evil.1724
								days = { 10 30 }
							}							
							custom_tooltip =  custom_desc_critical_cast_the_darkness.tt
							hidden_effect = {
								every_character_to_title_neighboring_and_across_water_county = {
									if = {
										limit = {
											NOR = {
												holder.top_liege = root.liege
												has_county_modifier = darkness_modifier
												holder = {
													any_character_artifact = { has_variable = elven_ring }
												}
												holder.top_liege = {
													any_character_artifact = { has_variable = elven_ring }
												}
											}
										}
										add_county_modifier = {
											modifier = darkness_modifier
											years = 2
										}
									}								
								}
							}
						}
					}
				}
				flag:wilds = {
					random_list = {
						25 = {	# Critical Failure
							desc = evil.0021.a
							trigger_event = {
								id = evil.0121
								days = { 10 30 }
							}
							add_character_modifier = {
								modifier = critical_failure_cast_the_darkness
								years = 5
							}
						}
						75 = {	# Failure
							desc = evil.0022.a
							trigger_event = {
								id = evil.0122
								days = { 10 30 }
							}
						}
						75 = {	# Success
							desc = evil.0023.a
							trigger_event = {
								id = evil.1723
								days = { 10 30 }
							}
							custom_tooltip =  custom_desc_cast_the_darkness.tt
							hidden_effect = {
								every_character_to_title_neighboring_and_across_water_county = {
									if = {
										limit = {
											NOR = {
												holder.top_liege = root.liege
												has_county_modifier = darkness_modifier
												holder = {
													any_character_artifact = { has_variable = elven_ring }
												}
												holder.top_liege = {
													any_character_artifact = { has_variable = elven_ring }
												}
											}
										}
										add_county_modifier = {
											modifier = darkness_modifier
											years = 1
										}
									}								
								}
							}
						}
						25 = {	# Critical Success
							desc = evil.0024.a
							trigger_event = {
								id = evil.1724
								days = { 10 30 }
							}
							custom_tooltip =  custom_desc_critical_cast_the_darkness.tt
							hidden_effect = {
								every_character_to_title_neighboring_and_across_water_county = {
									if = {
										limit = {
											NOR = {
												holder.top_liege = root.liege
												has_county_modifier = darkness_modifier
												holder = {
													any_character_artifact = { has_variable = elven_ring }
												}
												holder.top_liege = {
													any_character_artifact = { has_variable = elven_ring }
												}
											}
										}
										add_county_modifier = {
											modifier = darkness_modifier
											years = 2
										}
									}								
								}
							}
						}
					}
				}
				flag:home = {
					random_list = {
						50 = {	# Failure
							desc = evil.0022.a
							trigger_event = {
								id = evil.0122
								days = { 10 30 }
							}
						}
						50 = {	# success
							desc = evil.0023.a
							trigger_event = {
								id = evil.1723
								days = { 10 30 }
							}
							custom_tooltip =  custom_desc_cast_the_darkness.tt
							hidden_effect = {
								every_character_to_title_neighboring_and_across_water_county = {
									if = {
										limit = {
											NOR = {
												holder.top_liege = root.liege
												has_county_modifier = darkness_modifier
												holder = {
													any_character_artifact = { has_variable = elven_ring }
												}
												holder.top_liege = {
													any_character_artifact = { has_variable = elven_ring }
												}
											}
										}
										add_county_modifier = {
											modifier = darkness_modifier
											years = 1
										}
									}								
								}
							}
						}
					}
				}
		}
	}
}

cast_abnormal_winter = {
	is_valid = {
		NOT = { var:ritual_location = flag:no_location }
	}
	effect = {
		set_variable = {name = low_mod value = 0}
		set_variable = {name = high_mod value = 0}
		if = {
			limit = {exists = var:temple var:temple = 5}
			set_variable = {name = low_mod value = -10}
		}
		else_if = {
			limit = {exists = var:temple var:temple = 3}
			set_variable = {name = high_mod value = 10}
		}
		if = {
			limit = { var:ritual_location = flag:holy_site_1 }
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 4
			}
		}
		else = {
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 5
			}
		}
		if = {limit = {exists = var:temple var:temple = 4}
			remove_short_term_gold = {
				value = 750
			}
		}
		else = {
			add_piety = {
				value = -750
				if = {limit = {exists = var:temple var:temple = 2} multiply = 0.8 subtract = 1}
			}
		}
		switch = {
				trigger = var:ritual_location
				flag:sacred_place = {
					random_list = {
						25 = {	# Failure
							modifier = {add = var:low_mod}
							desc = evil.0022.a
							trigger_event = {
								id = evil.0122
								days = { 10 30 }
							}
						}
						50 = {	# Success
							desc = evil.0023.a
							trigger_event = {
								id = evil.1823
								days = { 10 30 }
							}
							
							custom_tooltip = custom_desc_abnormal_winter.tt
							every_neighboring_and_across_water_top_liege_realm_owner = {
								limit = {
									NOT = {	any_character_artifact = { has_variable = elven_ring } }
								}
								save_scope_as = enemy
								hidden_effect = {
									every_living_character = {
										limit = {this.top_liege = scope:enemy}
										add_character_modifier = {
											modifier = abnormal_winter_character_modifier
											years = 1
										}
									}
								
									every_realm_county = {
										limit = {
											NOT = { culture ?= culture:wastelands }
											NOT = {
												has_county_modifier = abnormal_winter_modifier
											}
										}
										add_county_modifier = {
											modifier = abnormal_winter_modifier
											years = 1
										}
									}
								}
							}
						}
						25 = {	# Critical Success
							modifier = {add = var:high_mod}
							desc = evil.0024.a
							trigger_event = {
								id = evil.1824
								days = { 10 30 }
							}		
							
							custom_tooltip = custom_desc_critical_abnormal_winter.tt
							every_neighboring_and_across_water_top_liege_realm_owner = {
								limit = {
									NOT = {	any_character_artifact = { has_variable = elven_ring } }
								}
								save_scope_as = enemy
								hidden_effect = {
									every_living_character = {
										if = {
											limit = {this.top_liege = scope:enemy}
											add_character_modifier = {
												modifier = abnormal_winter_character_modifier
												years = 2
											}
										}
									}
								
									every_realm_county = {
										limit = {
											NOT = { culture ?= culture:wastelands }
											NOT = {
												has_county_modifier = abnormal_winter_modifier
											}
										}
										add_county_modifier = {
											modifier = abnormal_winter_modifier
											years = 2
										}
									}
								}
							}
						}
					}
				}
				flag:wilds = {
					random_list = {
						25 = {	# Critical Failure
							desc = evil.0021.a
							trigger_event = {
								id = evil.0121
								days = { 10 30 }
							}
							add_character_modifier = {
								modifier = critical_failure_abnormal_winter
								years = 1
							}
						}
						75 = {	# Failure
							desc = evil.0022.a
							trigger_event = {
								id = evil.0122
								days = { 10 30 }
							}
						}
						75 = {	# Success
							desc = evil.0023.a
							trigger_event = {
								id = evil.1823
								days = { 10 30 }
							}
							
							custom_tooltip = custom_desc_abnormal_winter.tt
							every_neighboring_and_across_water_top_liege_realm_owner = {
								limit = {
									NOT = {	any_character_artifact = { has_variable = elven_ring } }
								}
								save_scope_as = enemy
								hidden_effect = {
									every_living_character = {
										if = {
											limit = {this.top_liege = scope:enemy}
											add_character_modifier = {
												modifier = abnormal_winter_character_modifier
												years = 1
											}
										}
									}
									every_realm_county = {
										limit = {
											NOT = { culture ?= culture:wastelands }
											NOT = {
												has_county_modifier = abnormal_winter_modifier
											}
										}
										add_county_modifier = {
											modifier = abnormal_winter_modifier
											years = 1
										}
									}
								}
							}
						}
						25 = {	# Critical Success
							desc = evil.0024.a
							trigger_event = {
								id = evil.1824
								days = { 10 30 }
							}							
							custom_tooltip = custom_desc_critical_abnormal_winter.tt
							every_neighboring_and_across_water_top_liege_realm_owner = {
								limit = {
									NOT = {	any_character_artifact = { has_variable = elven_ring } }
								}
								save_scope_as = enemy
								hidden_effect = {
									every_living_character = {
										if = {
											limit = {this.top_liege = scope:enemy}
											add_character_modifier = {
												modifier = abnormal_winter_character_modifier
												years = 2
											}
										}
									}
									every_realm_county = {
										limit = {
											NOT = { culture ?= culture:wastelands }
											NOT = {
												has_county_modifier = abnormal_winter_modifier
											}
										}
										add_county_modifier = {
											modifier = abnormal_winter_modifier
											years = 2
										}
									}
								}
							}
						}
					}
				}
				flag:home = {
					random_list = {
						50 = {	# Failure
							desc = evil.0022.a
							trigger_event = {
								id = evil.0122
								days = { 10 30 }
							}
						}
						50 = {	# Success
							desc = evil.0023.a
							trigger_event = {
								id = evil.1823
								days = { 10 30 }
							}
							custom_tooltip = custom_desc_abnormal_winter.tt

							every_neighboring_and_across_water_top_liege_realm_owner = {
								limit = {
									NOT = {	any_character_artifact = { has_variable = elven_ring } }
								}
								save_scope_as = enemy
								hidden_effect = {
									every_living_character = {
										if = {
											limit = {this.top_liege = scope:enemy}
											add_character_modifier = {
												modifier = abnormal_winter_character_modifier
												years = 1
											}
										}
									}
								
									every_realm_county = {
										limit = {
											NOT = { culture ?= culture:wastelands }
											NOT = {
												has_county_modifier = abnormal_winter_modifier
											}
										}
										add_county_modifier = {
											modifier = abnormal_winter_modifier
											years = 1
										}
									}
								}
							}
						}
					}
				}
		}
	}
}

cast_the_plague = {
	is_valid = {
		NOT = { var:ritual_location = flag:no_location }
	}
	effect = {
		set_variable = {name = low_mod value = 0}
		set_variable = {name = high_mod value = 0}
		if = {
			limit = {exists = var:temple var:temple = 5}
			set_variable = {name = low_mod value = -10}
		}
		else_if = {
			limit = {exists = var:temple var:temple = 3}
			set_variable = {name = high_mod value = 10}
		}
		if = {
			limit = { var:ritual_location = flag:holy_site_1 }
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 4
			}
		}
		else = {
			add_character_modifier = {
				modifier = practiced_sorcery_recently
				years = 5
			}
		}
		if = {limit = {exists = var:temple var:temple = 4}
			remove_short_term_gold = {
				value = 1500
			}
		}
		else = {
			add_piety = {
				value = -1500
				if = {limit = {exists = var:temple var:temple = 2} multiply = 0.8 subtract = 1}
			}
		}
		switch = {
				trigger = var:ritual_location
				flag:sacred_place = {
					random_list = {
						25 = {	# Failure
							modifier = {add = var:low_mod}
							desc = evil.0022.a
							trigger_event = {
								id = evil.0122
								days = { 10 30 }
							}
						}
						50 = {	# success
							desc = evil.0023.a
							trigger_event = {
								id = evil.1923
								days = { 10 30 }
							}
							random_neighboring_and_across_water_top_liege_realm_owner = {
								limit = {
									religion = { is_in_family = rf_eruhini }
									realm_size > 50
									NOT = { culture ?= culture:wastelands }
									NOT = {	any_character_artifact = { has_variable = elven_ring } }
								}
								alternative_limit = {
									religion = { is_in_family = rf_eruhini }
									NOT = { culture ?= culture:wastelands }
									NOT = {	any_character_artifact = { has_variable = elven_ring } }
								}
								alternative_limit = {
									NOT = { religion = { is_in_family = rf_forcesofevil } }
									NOT = { culture ?= culture:wastelands }
									NOT = {	any_character_artifact = { has_variable = elven_ring } }
								}
								add_to_list = plague_targets
								capital_county = {
									if = {
										limit = {
											NOT = {has_county_modifier = the_plague_modifier}
											NOT = { culture ?= culture:wastelands }
										}
										add_county_modifier = {
											modifier = the_plague_modifier
											years = 1
										}
									}
								}
								random_realm_county = {
									limit = {
										NOT = {has_county_modifier = the_plague_modifier}
										NOT = { culture ?= culture:wastelands }
									}
									holder = {
										add_to_list = plague_targets
									}
									add_county_modifier = {
										modifier = the_plague_modifier
										years = 1
									}
								}
								random_realm_county = {
									limit = {
										NOT = {has_county_modifier = the_plague_modifier}
										NOT = { culture ?= culture:wastelands }
									}
									holder = {
										add_to_list = plague_targets
									}
									add_county_modifier = {
										modifier = the_plague_modifier
										years = 1
									}
								}
								hidden_effect = {
									every_in_list = {
										list = plague_targets
										every_courtier_or_guest = {
											random_list = {
												20 = {contract_disease_notify_effect = { DISEASE = pneumonic} }
												15 = {contract_disease_notify_effect = { DISEASE = smallpox} }
												14 = {contract_disease_notify_effect = { DISEASE = typhus} }
												1 = {contract_disease_notify_effect = { DISEASE = bubonic_plague} }
												0 = {
													compare_modifier = {
														value = this.health
														multiplier = 5
													}
												}
											}
										}
									}
								}
							}
						}
						25 = {	# Critical success
							modifier = {add = var:high_mod}
							desc = evil.0024.a
							trigger_event = {
								id = evil.1924
								days = { 10 30 }
							}							
							random_neighboring_and_across_water_top_liege_realm_owner = {
								limit = {
									religion = { is_in_family = rf_eruhini }
									realm_size > 50
									NOT = { culture ?= culture:wastelands }
									NOT = {	any_character_artifact = { has_variable = elven_ring } }
								}
								alternative_limit = {
									religion = { is_in_family = rf_eruhini }
									NOT = { culture ?= culture:wastelands }
									NOT = {	any_character_artifact = { has_variable = elven_ring } }
								}
								alternative_limit = {
									NOT = { religion = { is_in_family = rf_forcesofevil } }
									NOT = { culture ?= culture:wastelands }
									NOT = {	any_character_artifact = { has_variable = elven_ring } }
								}
								add_to_list = plague_targets
								capital_county = {
									if = {
										limit = {
											NOT = {has_county_modifier = the_plague_modifier}
											NOT = { culture ?= culture:wastelands }
										}
										add_county_modifier = {
											modifier = the_plague_modifier
											years = 2
										}
									}
								}
								random_realm_county = {
									limit = {
										NOT = {has_county_modifier = the_plague_modifier}
										NOT = { culture ?= culture:wastelands }
									}
									holder = {
										add_to_list = plague_targets
									}
									add_county_modifier = {
										modifier = the_plague_modifier
										years = 2
									}
								}
								random_realm_county = {
									limit = {
										NOT = {has_county_modifier = the_plague_modifier}
										NOT = { culture ?= culture:wastelands }
									}
									holder = {
										add_to_list = plague_targets
									}
									add_county_modifier = {
										modifier = the_plague_modifier
										years = 2
									}
								}
								hidden_effect = {
									every_in_list = {
										list = plague_targets
										every_courtier_or_guest = {
											random_list = {
												20 = {contract_disease_notify_effect = { DISEASE = pneumonic} }
												15 = {contract_disease_notify_effect = { DISEASE = smallpox} }
												14 = {contract_disease_notify_effect = { DISEASE = typhus} }
												1 = {contract_disease_notify_effect = { DISEASE = bubonic_plague} }
												0 = {
													compare_modifier = {
														value = this.health
														multiplier = 5
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
				flag:wilds = {
					random_list = {
						25 = {	# Critical Failure
							desc = evil.0021.a
							trigger_event = {
								id = evil.0121
								days = { 10 30 }
							}
							add_character_modifier = {
								modifier = critical_failure_the_plague
								years = 1
							}
						}
						75 = {	# Failure
							desc = evil.0022.a
							trigger_event = {
								id = evil.0122
								days = { 10 30 }
							}
						}
						75 = {	# success
							desc = evil.0023.a
							trigger_event = {
								id = evil.1923
								days = { 10 30 }
							}
							random_neighboring_and_across_water_top_liege_realm_owner = {
								limit = {
									religion = { is_in_family = rf_eruhini }
									realm_size > 50
									NOT = { culture ?= culture:wastelands }
									NOT = {	any_character_artifact = { has_variable = elven_ring } }
								}
								alternative_limit = {
									religion = { is_in_family = rf_eruhini }
									NOT = { culture ?= culture:wastelands }
									NOT = {	any_character_artifact = { has_variable = elven_ring } }
								}
								alternative_limit = {
									NOT = { religion = { is_in_family = rf_forcesofevil } }
									NOT = { culture ?= culture:wastelands }
									NOT = {	any_character_artifact = { has_variable = elven_ring } }
								}
								add_to_list = plague_targets
								capital_county = {
									if = {
										limit = {
											NOT = {has_county_modifier = the_plague_modifier}
											NOT = { culture ?= culture:wastelands }
										}
										add_county_modifier = {
											modifier = the_plague_modifier
											years = 1
										}
									}
								}
								random_realm_county = {
									limit = {
										NOT = {has_county_modifier = the_plague_modifier}
										NOT = { culture ?= culture:wastelands }
									}
									holder = {
										add_to_list = plague_targets
									}
									add_county_modifier = {
										modifier = the_plague_modifier
										years = 1
									}
								}
								random_realm_county = {
									limit = {
										NOT = {has_county_modifier = the_plague_modifier}
										NOT = { culture ?= culture:wastelands }
									}
									holder = {
										add_to_list = plague_targets
									}
									add_county_modifier = {
										modifier = the_plague_modifier
										years = 1
									}
								}
								hidden_effect = {
									every_in_list = {
										list = plague_targets
										every_courtier_or_guest = {
											random_list = {
												20 = {contract_disease_notify_effect = { DISEASE = pneumonic} }
												15 = {contract_disease_notify_effect = { DISEASE = smallpox} }
												14 = {contract_disease_notify_effect = { DISEASE = typhus} }
												1 = {contract_disease_notify_effect = { DISEASE = bubonic_plague} }
												0 = {
													compare_modifier = {
														value = this.health
														multiplier = 5
													}
												}
											}
										}
									}
								}
							}
						}
						25 = {	# Critical Success
							desc = evil.0024.a
							trigger_event = {
								id = evil.1924
								days = { 10 30 }
							}
							random_neighboring_and_across_water_top_liege_realm_owner = {
								limit = {
									religion = { is_in_family = rf_eruhini }
									realm_size > 50
									NOT = { culture ?= culture:wastelands }
									NOT = {	any_character_artifact = { has_variable = elven_ring } }
								}
								alternative_limit = {
									religion = { is_in_family = rf_eruhini }
									NOT = { culture ?= culture:wastelands }
									NOT = {	any_character_artifact = { has_variable = elven_ring } }
								}
								alternative_limit = {
									NOT = { religion = { is_in_family = rf_forcesofevil } }
									NOT = { culture ?= culture:wastelands }
									NOT = {	any_character_artifact = { has_variable = elven_ring } }
								}
								add_to_list = plague_targets
								capital_county = {
									if = {
										limit = {
											NOT = {has_county_modifier = the_plague_modifier}
											NOT = { culture ?= culture:wastelands }
										}
										add_county_modifier = {
											modifier = the_plague_modifier
											years = 2
										}
									}
								}
								random_realm_county = {
									limit = {
										NOT = {has_county_modifier = the_plague_modifier}
										NOT = { culture ?= culture:wastelands }
									}
									holder = {
										add_to_list = plague_targets
									}
									add_county_modifier = {
										modifier = the_plague_modifier
										years = 2
									}
								}
								random_realm_county = {
									limit = {
										NOT = {has_county_modifier = the_plague_modifier}
										NOT = { culture ?= culture:wastelands }
									}
									holder = {
										add_to_list = plague_targets
									}
									add_county_modifier = {
										modifier = the_plague_modifier
										years = 2
									}
								}
								hidden_effect = {
									every_in_list = {
										list = plague_targets
										every_courtier_or_guest = {
											random_list = {
												20 = {contract_disease_notify_effect = { DISEASE = pneumonic} }
												15 = {contract_disease_notify_effect = { DISEASE = smallpox} }
												14 = {contract_disease_notify_effect = { DISEASE = typhus} }
												1 = {contract_disease_notify_effect = { DISEASE = bubonic_plague} }
												0 = {
													compare_modifier = {
														value = this.health
														multiplier = 5
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
				flag:home = {
					random_list = {
						50 = {	# Failure
							desc = evil.0022.a
							trigger_event = {
								id = evil.0122
								days = { 10 30 }
							}
						}
						50 = {	# Success
							desc = evil.0023.a
							trigger_event = {
								id = evil.1923
								days = { 10 30 }
							}
							random_neighboring_and_across_water_top_liege_realm_owner = {
								limit = {
									religion = { is_in_family = rf_eruhini }
									realm_size > 50
									NOT = { culture ?= culture:wastelands }
									NOT = {	any_character_artifact = { has_variable = elven_ring } }
								}
								alternative_limit = {
									religion = { is_in_family = rf_eruhini }
									NOT = { culture ?= culture:wastelands }
									NOT = {	any_character_artifact = { has_variable = elven_ring } }
								}
								alternative_limit = {
									NOT = { religion = { is_in_family = rf_forcesofevil } }
									NOT = { culture ?= culture:wastelands }
									NOT = {	any_character_artifact = { has_variable = elven_ring } }
								}
								add_to_list = plague_targets
								capital_county = {
									if = {
										limit = {
											NOT = {has_county_modifier = the_plague_modifier}
											NOT = { culture ?= culture:wastelands }
										}
										add_county_modifier = {
											modifier = the_plague_modifier
											years = 1
										}
									}
								}
								random_realm_county = {
									limit = {
										NOT = {has_county_modifier = the_plague_modifier}
										NOT = { culture ?= culture:wastelands }
									}
									holder = {
										add_to_list = plague_targets
									}
									add_county_modifier = {
										modifier = the_plague_modifier
										years = 1
									}
								}
								random_realm_county = {
									limit = {
										NOT = {has_county_modifier = the_plague_modifier}
										NOT = { culture ?= culture:wastelands }
									}
									holder = {
										add_to_list = plague_targets
									}
									add_county_modifier = {
										modifier = the_plague_modifier
										years = 1
									}
								}
								hidden_effect = {
									every_in_list = {
										list = plague_targets
										every_courtier_or_guest = {
											random_list = {
												20 = {contract_disease_notify_effect = { DISEASE = pneumonic} }
												15 = {contract_disease_notify_effect = { DISEASE = smallpox} }
												14 = {contract_disease_notify_effect = { DISEASE = typhus} }
												1 = {contract_disease_notify_effect = { DISEASE = bubonic_plague} }
												0 = {
													compare_modifier = {
														value = this.health
														multiplier = 5
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
		}
	}
}

set_up_locations_for_yourself = {
	effect = {
		set_variable = {
			name = ritual_location
			value = flag:no_location
		}
		clear_variable_list = possible_sorcery_locations
		# set_up_holy_sites_for_selection_effect = yes #TODO - deprecated as part of EP2 - sort in rework
		add_to_variable_list = {
			name = possible_sorcery_locations
			target = flag:home
		}
		add_to_variable_list = {
			name = possible_sorcery_locations
			target = flag:wilds
		}
		if = {
			limit = { scope:holy_site_1.holder = this }
			add_to_variable_list = {
				name = possible_sorcery_locations
				target = flag:holy_site_1
			}
			set_variable = {
				name = holy_site_1
				value = scope:holy_site_1
			}
		}
		if = {
			limit = { scope:holy_site_2.holder = this }
			add_to_variable_list = {
				name = possible_sorcery_locations
				target = flag:holy_site_2
			}
			set_variable = {
				name = holy_site_2
				value = scope:holy_site_2
			}
		}
		if = {
			limit = { scope:holy_site_3.holder = this }
			add_to_variable_list = {
				name = possible_sorcery_locations
				target = flag:holy_site_3
			}
			set_variable = {
				name = holy_site_3
				value = scope:holy_site_3
			}
		}
		if = {
			limit = { scope:holy_site_4.holder = this }
			add_to_variable_list = {
				name = possible_sorcery_locations
				target = flag:holy_site_4
			}
			set_variable = {
				name = holy_site_4
				value = scope:holy_site_4
			}
		}
		if = {
			limit = { scope:holy_site_5.holder = this }
			add_to_variable_list = {
				name = possible_sorcery_locations
				target = flag:holy_site_5
			}
			set_variable = {
				name = holy_site_5
				value = scope:holy_site_5
			}
		}
	}
}

location_home = {
	effect = {
		set_variable = {
			name = ritual_location
			value = flag:home
		}
	}
}

location_wilds = {
	effect = {
		set_variable = {
			name = ritual_location
			value = flag:wilds
		}
	}
}

location_holy_site_1 = {
	effect = {
		set_variable = {
			name = ritual_location
			value = flag:holy_site_1
		}
	}
}

location_holy_site_2 = {
	effect = {
		set_variable = {
			name = ritual_location
			value = flag:holy_site_2
		}
	}
}

location_holy_site_3 = {
	effect = {
		set_variable = {
			name = ritual_location
			value = flag:holy_site_3
		}
	}
}

location_holy_site_4 = {
	effect = {
		set_variable = {
			name = ritual_location
			value = flag:holy_site_4
		}
	}
}

location_holy_site_5 = {
	effect = {
		set_variable = {
			name = ritual_location
			value = flag:holy_site_5
		}
	}
}
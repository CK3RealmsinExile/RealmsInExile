namespace = orc_government_events

### Initial setup of ""potential""" challengers for the throne
orc_government_events.0001 = {
    hidden = yes

    immediate = {
        switch = {
			trigger = has_realm_law

			orc_authority_1 = { create_orc_challenger_list_authority_0 = yes }
			orc_authority_2 = { create_orc_challenger_list_authority_1 = yes }
			orc_authority_3 = { create_orc_challenger_list_authority_2 = yes }
			orc_authority_4 = { create_orc_challenger_list_authority_3 = yes }
			orc_authority_5 = { create_orc_challenger_list_authority_4 = yes }
		}

        save_scope_as = new_ruler

        every_in_list = { # Challenger decides they DO want to challenge the new ruler
            variable = orc_challengers
            trigger_event = orc_government_events.0002
        }

        ### Clean-up ###
        trigger_event = orc_government_events.9000
    }
}

### Challenger decides on whether to accept the challenge
orc_government_events.0002 = {
    content_source = realms_dlc
	type = character_event
	title = orc_government_events.0002.t
	desc = orc_government_events.0002.desc
	theme = martial_strategy_focus

    left_portrait = {
		character = root
        animation = personality_bold
    }

    right_portrait = {
		character = scope:new_ruler 
		animation = rage
	}

    immediate = {
    }

    option = { #Accept the challenge
        name = orc_government_events.0002.a
        scope:new_ruler = {
            add_to_variable_list = { name = final_orc_challengers target = root }
        }
    }

    option = { #Stay as vassal/courtier
        name = orc_government_events.0002.b

        refuse_orc_inheritance_duel_effect = yes
    }
}

orc_government_events.0003 = {
    content_source = realms_dlc
	type = character_event
	title = orc_government_events.0002.t
	desc = orc_government_events.0002.desc
	theme = martial_strategy_focus

    court_scene = {
		button_position_character = root
		court_event_force_open = yes
		show_timeout_info = no
		should_pause_time = yes
		roles = {
			# First, we take each scoped relevant scoped character.
			scope:character_a = {
				# Then we define their role, where they're positioned in the scene.
				group = lotr_orc_succession_duel
				# Next, we select their animation override (if applicable: you can leave it to the generic default/role default if defined, though generally you'll want to define this).
				animation = anger
			}
			scope:character_b = {
				group = lotr_orc_succession_duel
				animation = rage
			}
			# Characters who are not physically present are referred to only via copy links or lower portraits, so we don't bother putting them here.
		}
	}


    immediate = {
		# As with portraits, we do our general character setup stuff in this event.
		random_courtier_or_guest = { save_scope_as = character_a }
		random_courtier_or_guest = {
			limit = {
				this != scope:character_a
			}
			save_scope_as = character_b
		}
	}

	# Court events, as with all events, require at least one option to display.
	option = {
		name = hold_court.0001.a
	}
}

orc_government_events.9000 = {
    hidden = yes
    immediate = { clear_variable_list = orc_challengers }
}
namespace = orc_government_events

### Initial setup of ""potential""" challengers for the throne
orc_government_events.0001 = {
    hidden = yes

    immediate = {
        switch = {
			trigger = has_realm_law

			orc_authority_1 = { create_orc_challenger_list_authority_0 = yes }
			orc_authority_2 = { create_orc_challenger_list_authority_1 = yes }
			orc_authority_3 = { create_orc_challenger_list_authority_2 = yes }
			orc_authority_4 = { create_orc_challenger_list_authority_3 = yes }
			orc_authority_5 = { create_orc_challenger_list_authority_4 = yes }
		}

        save_scope_as = new_ruler

        every_in_list = { # Challenger decides they DO want to challenge the new ruler
            variable = orc_challengers
            trigger_event = orc_government_events.0002
        }

        ### Clean-up ###
        trigger_event = orc_government_events.9000
    }
}

### Challenger decides on whether to accept the challenge
orc_government_events.0002 = {
    content_source = realms_dlc
	type = character_event
	title = orc_government_events.0002.t
	desc = orc_government_events.0002.desc
	theme = martial_strategy_focus

    left_portrait = {
		character = root
        animation = personality_bold
    }

    right_portrait = {
		character = scope:new_ruler 
		animation = rage
	}

    immediate = {
    }

    option = { #Accept the challenge
        name = orc_government_events.0002.a
        scope:new_ruler = {
            add_to_variable_list = { name = final_orc_challengers target = root }
        }
    }

    option = { #Stay as vassal/courtier
        name = orc_government_events.0002.b

        refuse_orc_inheritance_duel_effect = yes
    }
}

orc_government_events.0003 = {
    content_source = realms_dlc
	type = court_event
	title = orc_government_events.0002.t
	desc = orc_government_events.0002.desc
	theme = martial_strategy_focus
	orphan = yes

    court_scene = {
		button_position_character = scope:character_a
		# court_event_force_open = yes
		# show_timeout_info = no
		# should_pause_time = no
		roles = {
			# First, we take each scoped relevant scoped character.
			scope:character_a ?= lotr_orc_succession_duel
			scope:character_b ?= lotr_orc_succession_duel
			scope:character_c ?= lotr_orc_succession_duel
			scope:character_d ?= lotr_orc_succession_duel
			scope:character_e ?= lotr_orc_succession_duel
			scope:character_f ?= lotr_orc_succession_duel
			scope:character_g ?= lotr_orc_succession_duel
		}
	}

	# Court events, as with all events, require at least one option to display.
	option = {
		name = hold_court.0001.a
	}
}

orc_government_events.0004 = {
	hidden = yes
	immediate = {
		# As with portraits, we do our general character setup stuff in this event.
		random_courtier_or_guest = { save_scope_as = character_a }
		random_courtier_or_guest = {
			limit = { this != scope:character_a }
			save_scope_as = character_b
		}
		random_courtier_or_guest = {
			limit = {
				this != scope:character_a
				this != scope:character_b
			}
			save_scope_as = character_c
		}
		random_courtier_or_guest = {
			limit = {
				this != scope:character_a
				this != scope:character_b
				this != scope:character_c
			}
			save_scope_as = character_d
		}
		random_courtier_or_guest = {
			limit = {
				this != scope:character_a
				this != scope:character_b
				this != scope:character_c
				this != scope:character_d
			}
			save_scope_as = character_e
		}
		random_courtier_or_guest = {
			limit = {
				this != scope:character_a
				this != scope:character_b
				this != scope:character_c
				this != scope:character_d
				this != scope:character_e
			}
			save_scope_as = character_f
		}
		random_courtier_or_guest = {
			limit = {
				this != scope:character_a
				this != scope:character_b
				this != scope:character_c
				this != scope:character_d
				this != scope:character_e
				this != scope:character_f
			}
			save_scope_as = character_g
		}
		trigger_event = orc_government_events.0003
	}
}

orc_government_events.9000 = {
    hidden = yes
    immediate = { clear_variable_list = orc_challengers }
}
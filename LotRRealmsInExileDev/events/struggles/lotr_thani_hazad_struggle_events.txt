namespace = thani_hazad_struggle

# 0000-0999 - Maintenance
# 1000-1999 - Decision Events
# 2000-2999 - Minor Thani Events
# 3000-3999 - Major Thani Events

## Maintenance
# Struggle Introduction

## Decisions Events

## Minor Thani Events

thani_hazad_struggle.2001 = { # The Ivory Trader
    content_source = realms_dlc         
    type = character_event
    title = thani_hazad_struggle.2001.t
    desc = thani_hazad_struggle.2001.desc
    theme = stewardship

    left_portrait = {
		character = root
		animation = steward
	}

    right_portrait = {
		character = scope:trader
		animation = personality_honorable
	}

    trigger = {
		is_wastelands = no
		any_held_county = { 
			title_province = {
				num_buildings > 1
			}
			title_province = { geographical_region = middleearth_thani_hazad_struggle_region }
		}
        any_held_title = {
            tier >= tier_kingdom
        }
        NOT = { has_culture = culture:mag }
        has_dlc_feature = royal_court
	}

    cooldown = { years = 20 }

    immediate = {
        create_character = {
            age = { 20 40 }
            location = capital_province
            faith = faith:faith_mag
            culture = culture:mag
            random_traits_list = {
                count = 1
                education_stewardship_1 = {}
                education_stewardship_2 = {}
                education_stewardship_3 = {}
                education_stewardship_4 = {}
            }
            dynasty = none
            random_traits = yes
            gender_female_chance = 50
            stewardship = {
                min_template_decent_skill
                max_template_decent_skill
            }
            prowess = { 2 10 }
            martial = { 2 10 }
            diplomacy = { 5 13 }
            learning = { 5 13 }
            save_scope_as = trader
        }
        random_held_county = { 
			limit = { 
                title_province = { 
                    geographical_region = middleearth_thani_hazad_struggle_region 
                } 
            }
            save_scope_as = event_county
		}  
    }

    option = {  #A. Accept, pay for example 350 gold, get a modifier increasing prestige (if you really want I guess you could do a court artifact)
        name = thani_hazad_struggle.2001.a
        desc = thani_hazad_struggle.2001.a.desc

        stress_impact = {
            greedy = medium_stress_gain
        }

        remove_short_term_gold = massive_gold_value

        hidden_effect = {
            random_list = {
                30 = {
                    create_artifact_ivory_box_small_1_effect = {
                        OWNER = root
                        CARPENTER = scope:trader
                    }    
                }
                30 = {
                    create_artifact_ivory_box_small_2_effect = {
                        OWNER = root
                        CARPENTER = scope:trader
                    }    
                }
                20 = {
                    create_artifact_ivory_box_medium_1_effect = {
                        OWNER = root
                        CARPENTER = scope:trader
                    }    
                }
                20 = {
                    create_artifact_ivory_box_medium_2_effect = {
                        OWNER = root
                        CARPENTER = scope:trader
                    }    
                }
            }
        }        

        custom_tooltip = thani_hazad_struggle.2001.b.tt	
    }

    option = {  #B. Try to haggle, stewardship challenge, either pay more or less, get the modifier (or artifact) and some prestige 
        name = thani_hazad_struggle.2001.b

        duel = {
			skill = stewardship
			value = decent_skill_rating
			50 = {
				desc = thani_hazad_struggle.2001.b.success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3
				}
				stress_impact = {
                    greedy = minor_stress_gain
                }
        
                pay_short_term_gold = {
                    target = scope:trader
                    gold = {
                      value = massive_gold_value
                      multiply = 0.8
                    }
                }

                hidden_effect = {
                    random_list = {
                        30 = {
                            create_artifact_ivory_box_small_1_effect = {
                                OWNER = root
                                CARPENTER = scope:trader
                            }    
                        }
                        30 = {
                            create_artifact_ivory_box_small_2_effect = {
                                OWNER = root
                                CARPENTER = scope:trader
                            }    
                        }
                        20 = {
                            create_artifact_ivory_box_medium_1_effect = {
                                OWNER = root
                                CARPENTER = scope:trader
                            }    
                        }
                        20 = {
                            create_artifact_ivory_box_medium_2_effect = {
                                OWNER = root
                                CARPENTER = scope:trader
                            }    
                        }
                    }
                }  
        
                custom_tooltip = thani_hazad_struggle.2001.b.tt
			}
			50 = {
				desc = thani_hazad_struggle.2001.b.failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3
				}
				stress_impact = {
                    greedy = major_stress_gain
                }
        
                pay_short_term_gold = {
                    target = scope:trader
                    gold = {
                      value = massive_gold_value
                      multiply = 1.2
                    }
                }

                hidden_effect = {
                    random_list = {
                        30 = {
                            create_artifact_ivory_box_small_1_effect = {
                                OWNER = root
                                CARPENTER = scope:trader
                            }    
                        }
                        30 = {
                            create_artifact_ivory_box_small_2_effect = {
                                OWNER = root
                                CARPENTER = scope:trader
                            }    
                        }
                        20 = {
                            create_artifact_ivory_box_medium_1_effect = {
                                OWNER = root
                                CARPENTER = scope:trader
                            }    
                        }
                        20 = {
                            create_artifact_ivory_box_medium_2_effect = {
                                OWNER = root
                                CARPENTER = scope:trader
                            }    
                        }
                    }
                }  
        
                custom_tooltip = thani_hazad_struggle.2001.b.tt
			}
        }
    }

    option = {  #C. Refuse, nothing happens
        name = thani_hazad_struggle.2001.c
    }

    after = {
        hidden_effect = {
            scope:trader =  {
                death = { death_reason = death_disappearance }
            }
        }    
    }
}

## Major Thani Events

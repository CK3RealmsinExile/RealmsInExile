 # Events for Ancestor Veneration

namespace = ancestor_veneration

################################
# SELECT AREA TO STUDY
# 0001-0099
# by Jagua
################################

# Ancestor selection event
ancestor_veneration.0001 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0001.t
	desc = ancestor_veneration.0001.desc
	theme = ancestor_veneration_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	cooldown = { days = 1 }
	immediate = {
		# Stop characters from planning multiple activities at once.
		add_character_flag = {
			flag = planning_an_activity
			days = 30
		}
	}
	option = { # Durin incarnations
		name = ancestor_veneration.0001.a
		trigger_event = ancestor_veneration.0011
	}
	option = { # Úri incarnations
		name = ancestor_veneration.0001.b
		trigger_event = ancestor_veneration.0012
	}
	option = { # Dwálin incarnations
		name = ancestor_veneration.0001.c
		trigger_event = ancestor_veneration.0013
	}
	option = { # Sindri incarnations
		name = ancestor_veneration.0001.d
		trigger_event = ancestor_veneration.0014
	}
	option = { # Thúlin incarnations
		name = ancestor_veneration.0001.e
		trigger_event = ancestor_veneration.0015
	}
	option = { # Thrár incarnations
		name = ancestor_veneration.0001.f
		trigger_event = ancestor_veneration.0016
	}
	option = { # Bavór incarnations
		name = ancestor_veneration.0001.g
		trigger_event = ancestor_veneration.0017
	}
	option = { # Other Dwarven Ancestors
		name = ancestor_veneration.0001.h
		trigger_event = ancestor_veneration.0018
	}
}

# Durin topic selection
ancestor_veneration.0011 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0011.t
	desc = ancestor_veneration.0011.desc
	theme = ancestor_veneration_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	option = { # The Durin incarnations
		name = ancestor_veneration.0011.a
		trigger_event = {
			id = ancestor_veneration.0101
			days = 5
		}
	}
	option = { # On second thought...
		name = ancestor_veneration.0011.b
		trigger_event = {
			id = ancestor_veneration.0001
			days = 1
		}
	}
}

# Úri topic selection
ancestor_veneration.0012 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0012.t
	desc = ancestor_veneration.0012.desc
	theme = ancestor_veneration_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	option = { # The Úri incarnations
		name = ancestor_veneration.0012.a
		trigger_event = {
			id = ancestor_veneration.0201
			days = 5
		}
	}
	
	option = { # On second thought...
		name = ancestor_veneration.0012.b
		trigger_event = {
			id = ancestor_veneration.0001
			days = 1
		}
	}
}

# Dwálin selection
ancestor_veneration.0013 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0013.t
	desc = ancestor_veneration.0013.desc
	theme = ancestor_veneration_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	option = { # The Dwálin incarnations
		name = ancestor_veneration.0013.a
		trigger_event = {
			id = ancestor_veneration.0301
			days = 5
		}
	}
	option = { # On second thought...
		name = ancestor_veneration.0013.b
		trigger_event = {
			id = ancestor_veneration.0001
			days = 1
		}
	}
}

# Sindri selection
ancestor_veneration.0014 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0014.t
	desc = ancestor_veneration.0014.desc
	theme = ancestor_veneration_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	option = { # The Sindri incarnations
		name = ancestor_veneration.0014.a
		trigger_event = {
			id = ancestor_veneration.0401
			days = 5
		}
	}
	option = { # On second thought...
		name = ancestor_veneration.0014.b
		trigger_event = {
			id = ancestor_veneration.0001
			days = 1
		}
	}
}

# Thúlin selection
ancestor_veneration.0015 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0015.t
	desc = ancestor_veneration.0015.desc
	theme = ancestor_veneration_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	option = { # the Thúlin incarnations
		name = ancestor_veneration.0015.a
		trigger_event = {
			id = ancestor_veneration.0501
			days = 5
		}
	}
	option = { # On second thought...
		name = ancestor_veneration.0015.b
		trigger_event = {
			id = ancestor_veneration.0001
			days = 1
		}
	}
}

# Thrár selection
ancestor_veneration.0016 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0016.t
	desc = ancestor_veneration.0016.desc
	theme = ancestor_veneration_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	option = { # the Thrár incarnations
		name = ancestor_veneration.0016.a
		trigger_event = {
			id = ancestor_veneration.0601
			days = 5
		}
	}
	option = { # On second thought...
		name = ancestor_veneration.0016.b
		trigger_event = {
			id = ancestor_veneration.0001
			days = 1
		}
	}
}

# Bavór selection
ancestor_veneration.0017 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0017.t
	desc = ancestor_veneration.0017.desc
	theme = ancestor_veneration_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	
	option = { # the Stiffbeard incarnations
		name = ancestor_veneration.0017.a
		trigger_event = {
			id = ancestor_veneration.0701
			days = 5
		}
	}

	option = { # On second thought...
		name = ancestor_veneration.0017.b
		trigger_event = {
			id = ancestor_veneration.0001
			days = 1
		}
	}
}

# Random Dwarven Ancestors selection
ancestor_veneration.0018 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0018.t
	desc = ancestor_veneration.0018.desc
	theme = ancestor_veneration_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	option = { # Random Dwarven Ancestors
		name = ancestor_veneration.0018.a
		trigger_event = { # Random Dwarven Ancestor Event
			on_action = ancestor_veneration_dwarf
			weeks = 1
		}
		trigger_event = { # Random Dwarven Ancestor Event
			on_action = ancestor_veneration_dwarf
			weeks = 2
		}
		trigger_event = { # Random Dwarven Ancestor Event
			on_action = ancestor_veneration_dwarf
			weeks = 3
		}
		trigger_event = { # Random Dwarven Ancestor Event
			on_action = ancestor_veneration_dwarf
			weeks = 4
		}
		trigger_event = { # Random Dwarven Ancestor Event
			on_action = ancestor_veneration_dwarf
			weeks = 5
		}
		trigger_event = { # Random Dwarven Ancestor Event
			on_action = ancestor_veneration_dwarf
			weeks = 6
		}
		trigger_event = { # End the activity
			id = ancestor_veneration.0050
			weeks = 7
		}
	}
	option = { # On second thought...
		name = ancestor_veneration.0018.b
		trigger_event = {
			id = ancestor_veneration.0001
			days = 1
		}
	}
}

# # Histories Invalidation for Host Death - Guests
ancestor_veneration.0063 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0063.t
	desc = ancestor_veneration.0063.desc
	theme = ancestor_veneration_activity
	override_icon = {
		reference = "gfx/interface/icons/event_types/type_illness.dds"
	}
	left_portrait = {
		character = scope:host
	}
	
	option = {
		name = ancestor_veneration.0063.a
		custom_tooltip = ancestor_veneration.0063.a.tt
	}
}

#The host has been imprisoned - for host
ancestor_veneration.0064 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0063.t
	desc = ancestor_veneration.0064.desc
	theme = ancestor_veneration_activity
	override_icon = {
		reference = "gfx/interface/icons/event_types/type_prison.dds"
	}
	left_portrait = {
		character = scope:host
		animation = prison_dungeon
	}

	immediate = {
		#hosted_successful_feast_interrupted_effect = yes
	}
	
	option = {
		name = ancestor_veneration.0064.a
	}
}

#The host has been imprisoned - for guests
ancestor_veneration.0065 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0063.t
	desc = ancestor_veneration.0065.desc
	theme = ancestor_veneration_activity
	override_icon = {
		reference = "gfx/interface/icons/event_types/type_prison.dds"
	}
	left_portrait = {
		character = scope:host
		animation = prison_dungeon
	}
	option = {
		name = ancestor_veneration.0064.a
	}
}

# # Histories Invalidation for Host Death - Player Heir
ancestor_veneration.0070 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0070.t
	desc = {
		desc = ancestor_veneration.0070.desc
		desc = ancestor_veneration.0070.desc.entourage
		desc = ancestor_veneration.0070.desc.ruler
	}
	theme = realm

	left_portrait = {
		character = root
		animation = worry
	}

	immediate = {}

	option = { 
		name = ancestor_veneration.0070.a
		custom_tooltip = ancestor_veneration.0070.tt
	}
}

# HOST: No guests showed up
# You're so alone.
###
ancestor_veneration.0071 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0071.t
	desc = ancestor_veneration.0071.desc
	theme = ancestor_veneration_activity
	left_portrait = {
		character = scope:host
		animation = sadness
	}

	trigger = {
		scope:activity = {
			any_invited_character = {
				count > 1
				NOT = { this = root }
			}
			any_attending_character = {
				count < 1
				NOT = { this = root }
			}
		}
	}

	option = {
		name = feast.2003.a
		stress_impact = {
			base = minor_stress_impact_gain
			gregarious = minor_stress_impact_gain
		}
	}

	option = {
		name = feast.2003.b
		trigger = { has_trait = shy }
		exclusive = yes
		trait = shy
		stress_impact = {
			base = minor_stress_impact_loss
		}
	}
}

# Welcome event #
ancestor_veneration.0040 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0040.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { this = scope:host }
				desc = ancestor_veneration.0040.host
			}
			desc = ancestor_veneration.0040.guest
		}
		desc = ancestor_veneration.0040.standard
		first_valid = {
			triggered_desc = {
				trigger = {
					intent_target.location ?= root.location
				}
				desc = ancestor_veneration.0040.intent_arrived
			}
			triggered_desc = {
				trigger = { exists = intent_target }
				desc = ancestor_veneration.0040.intent
			}
		}
	}
	theme = ancestor_veneration_activity
	left_portrait = {
		character = root
		animation = chancellor
	}
	right_portrait = {
		character = scope:host
		trigger = {
			NOT = { root = scope:host }
		}
		animation = admiration
	}
	lower_right_portrait = intent_target
	
	cooldown = { months = 6 }

	trigger = { is_ai = no }

	option = { # Pick the best guy
		name = ancestor_veneration.0040.a
	}
}

# Travel start event #
ancestor_veneration.0041 = {
	type = character_event
	title = ancestor_veneration.0041.t
	desc = {
		#Intro
		first_valid = {
			#Ancestor Veneration
			triggered_desc = {
				trigger = { exists = scope:host }
				desc = ancestor_veneration.0041.desc_ancestor_veneration
			}
			#My Ancestor Veneration
			triggered_desc = {
				desc = ancestor_veneration.0041.desc_my_ancestor_veneration
			}
		}
		#Relationship to host segway
		first_valid = {
			#Negative
			triggered_desc = {
				trigger = {
					exists = scope:host
					has_relation_rival = involved_activity.activity_host
				}
				desc = ancestor_veneration.0041.desc_ancestor_veneration_negative
			}
			#Positive
			triggered_desc = {
				trigger = {
					exists = scope:host
					has_any_good_relationship_with_character_trigger = { CHARACTER = scope:host }
				}
				desc = ancestor_veneration.0041.desc_ancestor_veneration_positive
			}
			#Default
			triggered_desc = {
				trigger = { exists = scope:host }
				desc = ancestor_veneration.0041.desc_ancestor_veneration_default
			}
		}
		#Trait flavor for my Ancestor Veneration
		first_valid = {
			#Archivist
			triggered_desc = {
				trigger = {
					has_trait = lifestyle_archivist 
					NOT = { exists = scope:host }
					has_any_debilitating_illness = no
				}
				desc = ancestor_veneration.0041.desc_my_ancestor_veneration_archivist
			}
			#Humble
			triggered_desc = {
				trigger = {
					NOT = { exists = scope:host }
					OR = {
						has_trait = humble
						has_trait = shy
					}
					has_any_debilitating_illness = no
				}
				desc = ancestor_veneration.0041.desc_my_ancestor_veneration_humble
			}
			#Arrogant
			triggered_desc = {
				trigger = { 
					NOT = { exists = scope:host }
					has_any_debilitating_illness = no
				}
				desc = ancestor_veneration.0041.desc_my_ancestor_veneration_arrogant
			}
		}
		#Outro
		first_valid = {
			#Standard Ancestor Veneration
			triggered_desc = {
				trigger = {
					exists = scope:host
					involved_activity = { 
						has_activity_option = { category = special_type option = ancestor_veneration_type_standard }
					}
				}
				desc = ancestor_veneration.0041.desc_ancestor_veneration_outro_standard
			}
			#Standard My Standard Ancestor Veneration
			triggered_desc = {
				trigger = {
					involved_activity = { 
						has_activity_option = { category = special_type option = ancestor_veneration_type_standard }
					}
				}
				desc = ancestor_veneration.0041.desc_my_ancestor_veneration_outro_standard
			}
		}
	}
	theme = travel
	left_portrait = {
		character = root
		animation = happiness
	}
	#Show our Travel Leader
	right_portrait = {
		trigger = { exists = current_travel_plan.travel_leader }
		character = current_travel_plan.travel_leader
	}
	#Show our host
	lower_right_portrait = {
		trigger = { exists = scope:host }
		character = scope:host
	}
	trigger = {
		is_available_travelling = yes
		is_landed = yes
		exists = involved_activity
		involved_activity = { has_activity_type = activity_ancestor_veneration }
	}
	immediate = {
		play_music_cue = mx_cue_travel_start
		if = {
			limit = {
				NOT = { involved_activity.activity_host = root }
			}
			#Check if we dislike the host
			if = {
				limit = {
					OR = {
						has_relation_rival = involved_activity.activity_host
						opinion = {
							target = involved_activity.activity_host
							value < 10
						}
					}
				}
				add_character_flag = we_dislike_host
			}
			#Save the scope for loc
			involved_activity.activity_host = { save_scope_as = host }
		}
	}
	#Giddy up!
	option = { 
		name = {
			text = {
				first_valid = {
					#Yeah, yeah ...
					triggered_desc = {
						trigger = {
							OR = {
								has_any_debilitating_illness = yes
								has_character_flag = we_dislike_host
								has_trait = craven
							}
						}
						desc = travel_start_event.1000.a_craven
					}
					#Everything is _awesome_
					triggered_desc = {
						desc = travel_start_event.1000.a
					}
				}
			}
		}
	}
	after = {
		if = {
			limit = { has_character_flag = we_dislike_host }
			remove_character_flag = we_dislike_host
		}
	}
}

# Select a Chronicler #
ancestor_veneration.0042 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0042.t
	desc = {
		desc = ancestor_veneration.0042.desc.intro
		first_valid = {
			triggered_desc = {
				trigger = {
					OR = {
						has_relation_rival = scope:chronicler_candidate_1
						opinion = {
							value <= low_negative_opinion
							target = scope:chronicler
						}
					}
				}
				desc = ancestor_veneration.0042.desc.hates_candidate_a
			}
			desc = ancestor_veneration.0042.desc.candidate_a
		}
		triggered_desc = {
			trigger = { exists = scope:chronicler_candidate_2 }
			desc = ancestor_veneration.0042.desc.nepotism
		}
		triggered_desc = {
			trigger = { exists = scope:chronicler_candidate_3 }
			desc = ancestor_veneration.0042.desc.enthusiasm
		}
		desc = ancestor_veneration.0042.desc.outro
	}
	theme = ancestor_veneration_activity
	left_portrait = {
		character = scope:host
		animation = thinking
	}
	center_portrait = {
		character = scope:chronicler_candidate_2
		animation = war_over_win
	}
	right_portrait = {
		character = scope:chronicler_candidate_1
		animation = admiration
	}
	lower_right_portrait = scope:chronicler_candidate_3

	trigger = {
		NOT = { employs_court_position = chronicler_court_position }
		has_dlc_feature = legends
	}
	
	cooldown = { months = 6 }

	immediate = {
		scope:activity = {
			ordered_attending_character = { # The best guy for the job
				limit = {
					OR = {
						is_vassal_of = root
						is_courtier_of = root
					}
					root = {
						can_appoint_char_to_court_position = {
							CHAR = prev
							COURT_POS = chronicler_court_position
						}
					}
				}
				order_by = aptitude:chronicler_court_position
				save_scope_as = chronicler_candidate_1
			}
			if = {
				limit = {
					NOT = { exists = scope:chronicler_candidate_1 }
				}
				if = {
					limit = {
						any_pool_character = {
							province = scope:activity.activity_location
							is_physically_able_ai_adult = yes
						}
					}
					random_pool_character = {
						province = scope:activity.activity_location
						limit = {
							is_physically_able_ai_adult = yes
						}
						save_scope_as = chronicler_candidate_1
					}
				}
				else = {
					hidden_effect = {
						create_character = {
							template = generic_peasant_character
							gender_female_chance = root_soldier_female_chance
							location = scope:activity.activity_location
							culture = scope:host.culture
							faith = scope:host.faith
							dynasty = none
							save_scope_as = chronicler_candidate_1
						}
					}
				}
			}
			if = {
				limit = {
					any_attending_character = {
						OR = {
							is_vassal_of = root
							is_courtier_of = root
						}
						OR = {
							is_close_or_extended_family_of = root
							has_relation_friend = root
							has_relation_lover = root
						}
						NOT = { has_relation_rival = root }
						root = {
							can_appoint_char_to_court_position = {
								CHAR = prev
								COURT_POS = chronicler_court_position
							}
						}
						NOT = { this = scope:chronicler_candidate_1 }
					}
				}
				random_attending_character = { # The nepotism pick
					limit = {
						OR = {
							is_vassal_of = root
							is_courtier_of = root
						}
						OR = {
							is_close_or_extended_family_of = root
							has_relation_friend = root
							has_relation_lover = root
						}
						NOT = { has_relation_rival = root }
						root = {
							can_appoint_char_to_court_position = {
								CHAR = prev
								COURT_POS = chronicler_court_position
							}
						}
						NOT = { this = scope:chronicler_candidate_1 }
					}
					save_scope_as = chronicler_candidate_2
				}
			}
			if = {
				limit = {
					any_attending_character = {
						OR = {
							is_vassal_of = root
							is_courtier_of = root
						}
						root = {
							can_appoint_char_to_court_position = {
								CHAR = prev
								COURT_POS = chronicler_court_position
							}
						}
						NOT = { this = scope:chronicler_candidate_1 }
						trigger_if = {
							limit = {
								exists = scope:chronicler_candidate_2
							}
							NOT = { this = scope:chronicler_candidate_2 }
						}
					}
				}
				random = {
					chance = 25
					ordered_attending_character = { # Second best guy for the job
						limit = {
							OR = {
								is_vassal_of = root
								is_courtier_of = root
							}
							root = {
								can_appoint_char_to_court_position = {
									CHAR = prev
									COURT_POS = chronicler_court_position
								}
							}
							NOT = { this = scope:chronicler_candidate_1 }
							trigger_if = {
								limit = {
									exists = scope:chronicler_candidate_2
								}
								NOT = { this = scope:chronicler_candidate_2 }
							}
						}
						order_by = {
							value = aptitude:chronicler_court_position
							add = ai_energy
						}
						save_scope_as = chronicler_candidate_3
					}
				}
			}
		}
	}

	option = { # Pick the best guy
		name = ancestor_veneration.0042.a
		court_position_grant_effect = {
			CANDIDATE = scope:chronicler_candidate_1
			POS = chronicler
			EMPLOYER = root
		}
		add_prestige = minor_prestige_gain
		ai_chance = {
			base = 10
			opinion_modifier = {
				who = root
				opinion_target = scope:chronicler_candidate_1
				min = 0
				max = 10
				multiplier = 0.5
			}
			modifier = {
				factor = 0.5
				has_trait = family_first
			}
			modifier = {
				factor = 0.5
				has_relation_rival = scope:chronicler_candidate_1
				NOT = { has_trait = forgiving }
			}
		}
	}

	option = { # Pick the nepotism target
		name = ancestor_veneration.0042.b
		trigger = {
			exists = scope:chronicler_candidate_2
		}
		court_position_grant_effect = {
			CANDIDATE = scope:chronicler_candidate_2
			POS = chronicler
			EMPLOYER = root
		}
		reverse_add_opinion = {
			target = scope:chronicler_candidate_2
	 		modifier = grateful_opinion
	 		opinion = 15
		}
		ai_chance = {
			base = 10
			opinion_modifier = {
				who = root
				opinion_target = scope:chronicler_candidate_2
				min = 0
				max = 10
				multiplier = 0.5
			}
			modifier = {
				factor = 2
				has_trait = family_first
			}
		}
	}

	option = { # Pick the third target
		name = ancestor_veneration.0042.c
		trigger = {
			exists = scope:chronicler_candidate_3
		}
		court_position_grant_effect = {
			CANDIDATE = scope:chronicler_candidate_3
			POS = chronicler
			EMPLOYER = root
		}
		random = {
			chance = 50
			set_relation_friend = {
				target = scope:chronicler_candidate_3
		 		reason = friend_made_me_chronicler
			}
		}
		ai_chance = {
			base = 5
			opinion_modifier = {
				who = root
				opinion_target = scope:chronicler_candidate_3
				min = 0
				max = 10
				multiplier = 0.5
			}
			modifier = {
				factor = 0.5
				has_trait = family_first
			}
			modifier = {
				factor = 0.5
				has_relation_rival = scope:chronicler_candidate_3
				NOT = { has_trait = forgiving }
			}
		}
	}

	option = { # Pick nobody
		name = ancestor_veneration.0042.d
		ai_chance = { # The AI should always pick someone, unless they're bankrupt
			base = 0
			modifier = {
				add = 100
				gold < tiny_gold_value
			}
		}
	}

	after = {
		# Update success chance
		scope:activity = {
			set_variable = {
				name = hunt_success_chance
				value = hunt_success_chance_value
			}
		}
	}
}

# Select an Antiquarian #
ancestor_veneration.0043 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0043.t
	desc = {
		desc = ancestor_veneration.0043.desc.intro
		first_valid = {
			triggered_desc = {
				trigger = {
					OR = {
						has_relation_rival = scope:antiquarian_candidate_1
						opinion = {
							value <= low_negative_opinion
							target = scope:antiquarian
						}
					}
				}
				desc = ancestor_veneration.0043.desc.hates_candidate_a
			}
			desc = ancestor_veneration.0043.desc.candidate_a
		}
		triggered_desc = {
			trigger = { exists = scope:antiquarian_candidate_2 }
			desc = ancestor_veneration.0043.desc.nepotism
		}
		triggered_desc = {
			trigger = { exists = scope:antiquarian_candidate_3 }
			desc = ancestor_veneration.0043.desc.enthusiasm
		}
		desc = ancestor_veneration.0043.desc.outro
	}
	theme = ancestor_veneration_activity
	left_portrait = {
		character = scope:host
		animation = thinking
	}
	center_portrait = {
		character = scope:antiquarian_candidate_2
		animation = war_over_win
	}
	right_portrait = {
		character = scope:antiquarian_candidate_1
		animation = admiration
	}
	lower_right_portrait = scope:antiquarian_candidate_3

	trigger = {
		NOR = { 
			employs_court_position = antiquarian_court_position
			has_dlc_feature = legends
		}
	}
	
	cooldown = { months = 6 }

	immediate = {
		scope:activity = {
			ordered_attending_character = { # The best guy for the job
				limit = {
					OR = {
						is_vassal_of = root
						is_courtier_of = root
					}
					root = {
						can_appoint_char_to_court_position = {
							CHAR = prev
							COURT_POS = antiquarian_court_position
						}
					}
				}
				order_by = aptitude:antiquarian_court_position
				save_scope_as = antiquarian_candidate_1
			}
			if = {
				limit = {
					NOT = { exists = scope:antiquarian_candidate_1 }
				}
				if = {
					limit = {
						any_pool_character = {
							province = scope:activity.activity_location
							is_physically_able_ai_adult = yes
						}
					}
					random_pool_character = {
						province = scope:activity.activity_location
						limit = {
							is_physically_able_ai_adult = yes
						}
						save_scope_as = antiquarian_candidate_1
					}
				}
				else = {
					hidden_effect = {
						create_character = {
							template = generic_peasant_character
							gender_female_chance = root_soldier_female_chance
							location = scope:activity.activity_location
							culture = scope:host.culture
							faith = scope:host.faith
							dynasty = none
							save_scope_as = antiquarian_candidate_1
						}
					}
				}
			}
			if = {
				limit = {
					any_attending_character = {
						OR = {
							is_vassal_of = root
							is_courtier_of = root
						}
						OR = {
							is_close_or_extended_family_of = root
							has_relation_friend = root
							has_relation_lover = root
						}
						NOT = { has_relation_rival = root }
						root = {
							can_appoint_char_to_court_position = {
								CHAR = prev
								COURT_POS = antiquarian_court_position
							}
						}
						NOT = { this = scope:antiquarian_candidate_1 }
					}
				}
				random_attending_character = { # The nepotism pick
					limit = {
						OR = {
							is_vassal_of = root
							is_courtier_of = root
						}
						OR = {
							is_close_or_extended_family_of = root
							has_relation_friend = root
							has_relation_lover = root
						}
						NOT = { has_relation_rival = root }
						root = {
							can_appoint_char_to_court_position = {
								CHAR = prev
								COURT_POS = antiquarian_court_position
							}
						}
						NOT = { this = scope:antiquarian_candidate_1 }
					}
					save_scope_as = antiquarian_candidate_2
				}
			}
			if = {
				limit = {
					any_attending_character = {
						OR = {
							is_vassal_of = root
							is_courtier_of = root
						}
						root = {
							can_appoint_char_to_court_position = {
								CHAR = prev
								COURT_POS = antiquarian_court_position
							}
						}
						NOT = { this = scope:antiquarian_candidate_1 }
						trigger_if = {
							limit = {
								exists = scope:antiquarian_candidate_2
							}
							NOT = { this = scope:antiquarian_candidate_2 }
						}
					}
				}
				random = {
					chance = 25
					ordered_attending_character = { # Second best guy for the job
						limit = {
							OR = {
								is_vassal_of = root
								is_courtier_of = root
							}
							root = {
								can_appoint_char_to_court_position = {
									CHAR = prev
									COURT_POS = antiquarian_court_position
								}
							}
							NOT = { this = scope:antiquarian_candidate_1 }
							trigger_if = {
								limit = {
									exists = scope:antiquarian_candidate_2
								}
								NOT = { this = scope:antiquarian_candidate_2 }
							}
						}
						order_by = {
							value = aptitude:antiquarian_court_position
							add = ai_energy
						}
						save_scope_as = antiquarian_candidate_3
					}
				}
			}
		}
	}

	option = { # Pick the best guy
		name = ancestor_veneration.0043.a
		court_position_grant_effect = {
			CANDIDATE = scope:antiquarian_candidate_1
			POS = antiquarian
			EMPLOYER = root
		}
		add_prestige = minor_prestige_gain
		ai_chance = {
			base = 10
			opinion_modifier = {
				who = root
				opinion_target = scope:antiquarian_candidate_1
				min = 0
				max = 10
				multiplier = 0.5
			}
			modifier = {
				factor = 0.5
				has_trait = family_first
			}
			modifier = {
				factor = 0.5
				has_relation_rival = scope:antiquarian_candidate_1
				NOT = { has_trait = forgiving }
			}
		}
	}

	option = { # Pick the nepotism target
		name = ancestor_veneration.0043.b
		trigger = {
			exists = scope:antiquarian_candidate_2
		}
		court_position_grant_effect = {
			CANDIDATE = scope:antiquarian_candidate_2
			POS = antiquarian
			EMPLOYER = root
		}
		reverse_add_opinion = {
			target = scope:antiquarian_candidate_2
	 		modifier = grateful_opinion
	 		opinion = 15
		}
		ai_chance = {
			base = 10
			opinion_modifier = {
				who = root
				opinion_target = scope:antiquarian_candidate_2
				min = 0
				max = 10
				multiplier = 0.5
			}
			modifier = {
				factor = 2
				has_trait = family_first
			}
		}
	}

	option = { # Pick the third target
		name = ancestor_veneration.0043.c
		trigger = {
			exists = scope:antiquarian_candidate_3
		}
		court_position_grant_effect = {
			CANDIDATE = scope:antiquarian_candidate_3
			POS = antiquarian
			EMPLOYER = root
		}
		random = {
			chance = 50
			set_relation_friend = {
				target = scope:antiquarian_candidate_3
		 		reason = friend_made_me_antiquarian
			}
		}
		ai_chance = {
			base = 5
			opinion_modifier = {
				who = root
				opinion_target = scope:antiquarian_candidate_3
				min = 0
				max = 10
				multiplier = 0.5
			}
			modifier = {
				factor = 0.5
				has_trait = family_first
			}
			modifier = {
				factor = 0.5
				has_relation_rival = scope:antiquarian_candidate_3
				NOT = { has_trait = forgiving }
			}
		}
	}

	option = { # Pick nobody
		name = ancestor_veneration.0043.d
		ai_chance = { # The AI should always pick someone, unless they're bankrupt
			base = 0
			modifier = {
				add = 100
				gold < tiny_gold_value
			}
		}
	}

	after = {
		# Update success chance
		scope:activity = {
			set_variable = {
				name = hunt_success_chance
				value = hunt_success_chance_value
			}
		}
	}
}

# End of studies
ancestor_veneration.0050 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0050.t
	desc = ancestor_veneration.0050.desc
	theme = ancestor_veneration_activity
	left_portrait = {
		character = root
		animation = personality_compassionate
	}
	
	immediate = {
		scope:activity = {
			add_activity_log_entry = {
				key = history_completed_log
				score = 80
				tags = { complete good }
				character = scope:host
				show_in_conclusion = yes

				# EFFECTS
				scope:host = { disburse_ancestor_activity_rewards = yes }
				ancestor_veneration_grant_prestige_effect = yes
			}
		}
		scope:activity = { progress_activity_phase_after = { days = 1 } }
	}
	
	option = { # End activity
		name = ancestor_veneration.0050.a
	}
}

### VENERATE THE ANCESTORS EVENTS ###

################################
# DURIN INCARNATIONS
# 0101-0106
# by Jagua
################################

ancestor_veneration.0101 = { # Durin I, the Deathless
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0101.t
	desc = ancestor_veneration.0101.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = dimril_dale }
	override_effect_2d = {
		reference = legend_glow
	}
	immediate = {
		if = {
			limit = { any_living_character = { any_artifact = { has_variable = durins_helm } } }
			random_living_character = {
				limit = { any_artifact = { has_variable = durins_helm } }
				random_artifact = {
					limit = { has_variable = durins_helm }
					save_scope_as = durins_helm
				}
			}
		}
		else = {
			hidden_effect = {
				character:k_wastelands_holder = {
					create_artifact_durins_helm_effect = { OWNER = this }
					scope:newly_created_artifact = { save_scope_as = durins_helm }
				}
			}
		}
    }
	center_portrait = {
        character = character:lineofdurinI
        animation = personality_honorable
		animate_if_dead = yes
    }
	artifact = {
		target = scope:durins_helm
		position = lower_center_portrait
		trigger = { exists = scope:durins_helm }
	}
	cooldown = { years = 2 }
	option = { # May my deeds honour his memory.
		name = ancestor_veneration.0101.a
		add_piety = medium_piety_gain
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}
	}
	option = { # He understood that distant roads bring hidden riches.
		name = ancestor_veneration.0101.b
		add_prestige = medium_prestige_gain
		if = {
			limit = { has_dlc_feature = wandering_nobles }
			random = {
				chance = 33
				add_wanderer_lifestyle_perk_points = 1
			}
		}
		else = {
			random = {
				chance = 33
				add_stewardship_lifestyle_perk_points = 1
			}
		}
	}
	option = { # The mastery of his craft was a marvel to many.
		name = ancestor_veneration.0101.c
		random = {
			chance = 33
			add_crafting_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			if = {
				limit = { has_trait = lifestyle_artifact_crafting }
				add_trait_xp = {
					trait = lifestyle_artifact_crafting
					track = armour_smith
					value = 20
				}
			}
			else = { add_trait = lifestyle_artifact_crafting }
		}
	}
	after = {
		hidden_effect = {
			if = {
				limit = { any_living_character = { any_artifact = { has_variable = durins_helm } } }
				random_living_character = {
					limit = { any_artifact = { has_variable = durins_helm } }
				}
				trigger_event = {
					id = ancestor_veneration.0102
					weeks = 1
				}
			}
			else = {
				limit = { character:k_wastelands_holder = { any_artifact = { this = scope:durins_helm } } }
				destroy_artifact ?= scope:durins_helm
			}
			trigger_event = {
				id = ancestor_veneration.0102
				weeks = 1
			}
		}
	}
}

ancestor_veneration.0102 = { # Durin II
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0102.t
	desc = ancestor_veneration.0102.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = durins_door }
	immediate = {
		if = {
			limit = { any_living_character = { any_artifact = { has_variable = axe_of_durin } } }
			random_living_character = {
				limit = { any_artifact = { has_variable = axe_of_durin } }
				random_artifact = {
					limit = { has_variable = axe_of_durin }
					save_scope_as = axe_of_durin
				}
			}
		}
		else = {
			hidden_effect = {
				character:k_wastelands_holder = {
					create_artifact_axe_of_durin_effect = { OWNER = this }
					scope:newly_created_artifact = { save_scope_as = axe_of_durin }
				}
			}
		}
	}
	right_portrait = {
		character = character:lineoffeanor10
		animation = personality_rational
		animate_if_dead = yes
	}
	center_portrait = {
      character = character:lineofdurinII
      animation = personality_compassionate
	  animate_if_dead = yes
    }
	left_portrait = {
      character = character:lineofnarvi
      animation = war_defender
	  animate_if_dead = yes
	}
	artifact = {
		target = scope:axe_of_durin
		position = lower_center_portrait
		trigger = { exists = scope:axe_of_durin }
	}
	cooldown = { years = 2 }
	option = { # Let us honour Durin's wisdom and seek friendships beyond our halls.
		name = ancestor_veneration.0102.a
		random = {
			chance = 25
			add_diplomacy_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			add_diplomacy_skill = 1
		}
	}
	option = { # The Longbeards needed no aid to find their fortune.
		name = ancestor_veneration.0102.b
		random = {
			chance = 33
			add_stewardship_lifestyle_perk_points = 1
		}
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
		random = {
		    chance = 10
			add_trait = reclusive
		}
	}
	after = {
		hidden_effect = {
			if = {
				limit = { any_living_character = { any_artifact = { has_variable = axe_of_durin } } }
				random_living_character = {
					limit = { any_artifact = { has_variable = axe_of_durin } }
				}
				trigger_event = {
					id = ancestor_veneration.0103
					weeks = 1
				}
			}
			else = {
				limit = { character:k_wastelands_holder = { any_artifact = { this = scope:axe_of_durin } } }
				destroy_artifact ?= scope:axe_of_durin
			}
			trigger_event = {
				id = ancestor_veneration.0103
				weeks = 1
			}
		}
	}
}

ancestor_veneration.0103 = { # Durin III
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0103.t
	desc = ancestor_veneration.0103.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = eregion_ruins }
	right_portrait = {
        character = character:lineoffeanor10
        animation = disbelief
		animate_if_dead = yes
    }
	left_portrait = {
        character = character:lineofdurinIII
        animation = marshal_longaxe
	    animate_if_dead = yes
    }
	immediate = {
		random_artifact = {
			limit = { has_variable = ring_of_longbeards }
			save_scope_as = ring_of_longbeards
		}
	}
	artifact = {
		target = scope:ring_of_longbeards
		position = lower_center_portrait
		trigger = { exists = scope:ring_of_longbeards }
	}
	lower_left_portrait = {
		character = character:lineofsauron
	}
	cooldown = { years = 2 }
	option = { # Sauron's treachery shall not be forgotten, nor left unavenged.
		name = ancestor_veneration.0103.a
		if = {
			limit = {
				has_trait = forgiving
			}		
			random = {
				chance = 33
				remove_trait = forgiving
				add_trait_force_tooltip = vengeful
			}
		}
		random = {
			chance = 33
			add_martial_lifestyle_perk_points = 1
		}
	}
	option = { # The Elves should have been warier of well-intentioned strangers.
		name = ancestor_veneration.0103.b
		random = {
			chance = 33
			add_intrigue_lifestyle_perk_points = 1
		}
	}
	after = {
        if = {
            limit = {
               	game_start_date >= 4144.11.30 # Durin IV must be dead!
            }
            trigger_event = {
            id = ancestor_veneration.0104
            weeks = 1
            }
        }
        else_if = {
            limit = {
                game_start_date < 4144.11.30 # Durin IV is not dead!
            }
            trigger_event = { # End the activity
            id = ancestor_veneration.0050
            weeks = 1
            }
        }
    }
}

ancestor_veneration.0104 = { # Durin IV
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0104.t
	desc = ancestor_veneration.0104.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = barad_dur }
	right_portrait = {
		character = character:lineoforodreth4
		animation = marshal
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { elven_war_noldor no_headgear }
		}
	}
	center_portrait = {
        character = character:lineofdurinIV
        animation = aggressive_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
    }
	left_portrait = {
		character = character:lineofelendil
		animation = marshal
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { gondor_war_imperial }
		}
    }
	lower_right_portrait = {
		character = character:lineofamdir1
	}
	lower_center_portrait = {
		character = character:lineofsindri102
	}
	lower_left_portrait = {
		character = character:lineoforopher1
	}
	cooldown = { years = 2 }
	option = { # Victory demands sacrifice. We must be ready to pay its price.
		name = ancestor_veneration.0104.a
		if = {
			limit = {
				has_trait = forgiving
			}		
			random = {
				chance = 33
				remove_trait = forgiving
				add_trait_force_tooltip = vengeful
			}
		}
		random = {
			chance = 25
			if = {
				limit = { has_trait = holy_warrior }
				add_trait_xp = {
					trait = holy_warrior
					value = 20
				}
			}
			else = { add_trait = holy_warrior }
		}
		add_martial_lifestyle_xp = 500
	}
	option = { # Let the fallen kings rest. We endure because we stand alone.
		name = ancestor_veneration.0104.b
		add_stewardship_lifestyle_perk_points = 1
		random = {
		    chance = 10
			add_trait = reclusive
		}
	}
	after = {
        if = {
            limit = {
               	game_start_date >= 5168.7.18 # Durin V must be dead!
            }
            trigger_event = {
            id = ancestor_veneration.0105
            weeks = 1
            }
        }
        else_if = {
            limit = {
                game_start_date < 5168.7.18 # Durin V is not dead!
            }
            trigger_event = { # End the activity
            id = ancestor_veneration.0050
            weeks = 1
            }
        }
    }
}

ancestor_veneration.0105 = { # Durin V
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0105.t
	desc = ancestor_veneration.0105.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = throne_room_dwarf }
	center_portrait = {
       character = character:lineofdurinV
       animation = personality_content
	   animate_if_dead = yes
    }
	immediate = {
		random_artifact = {
			limit = { has_variable = ring_of_longbeards }
			save_scope_as = ring_of_longbeards
		}
	}
	artifact = {
		target = scope:ring_of_longbeards
		position = lower_center_portrait
		trigger = { exists = scope:ring_of_longbeards }
	}
	cooldown = { years = 2 }
	option = { # To seek peace and prosperity is the purpose of any ruler.
		name = ancestor_veneration.0105.a
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
	}
	option = { # A reign with conquest is meaningless.
		name = ancestor_veneration.0105.b
		add_martial_lifestyle_xp = 500
	}
	option = { # Their mastery allowed them to delve deeper than ever before.
		name = ancestor_veneration.0105.c
		random = {
			chance = 33
			add_crafting_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			if = {
				limit = { has_trait = lifestyle_miner }
				add_trait_xp = {
					trait = lifestyle_miner
					track = prospector
					value = 20
				}
			}
			else = { add_trait = lifestyle_miner }
		}
	}
	after = {
        if = {
            limit = {
                game_start_date >= 6032.8.24 # Durin VI and his son must be dead!
            }
            trigger_event = {
            id = ancestor_veneration.0106
            weeks = 1
            }
        }
        else_if = {
            limit = {
                game_start_date < 6032.8.24 # Durin VI and his son are not dead!
            }
            trigger_event = { # End the activity
            id = ancestor_veneration.0050
            weeks = 1
            }
        }
    }
}

ancestor_veneration.0106 = { # Durin VI
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0106.t
	desc = ancestor_veneration.0106.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = durins_bane }
	override_effect_2d = {
		reference = smoke
	}
	right_portrait = {
        character = character:lineofdurin73
    	animation = aggressive_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
	}
	left_portrait = {
		character = character:lineofdurinVI
        animation = aggressive_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
    }
	lower_center_portrait = {
		character = character:lineofdurin74
	}
	cooldown = { years = 2 }
	option = { # May I show such courage when my trial comes.
		name = ancestor_veneration.0106.a
		if = {
			limit = {
				has_trait = craven
			}		
			random = {
				chance = 33
				remove_trait = craven
				add_trait_force_tooltip = brave
			}
		}
		random = {
			chance = 50
			add_martial_skill = 1
		}
	}
	option = { # It was not greed, but grim chance, that brought his fall.
		name = ancestor_veneration.0106.b
		if = {
			limit = {
				has_trait = generous
			}		
			random = {
				chance = 33
				remove_trait = generous
				add_trait_force_tooltip = greedy
			}
		}
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
	}
	after = {
		trigger_event = { # End the activity
			id = ancestor_veneration.0050
			weeks = 1
		}
	}
}

################################
# ÚRI INCARNATIONS
# 0201-0206
# by Jagua
################################

ancestor_veneration.0201 = { # Úri I, the Scarred
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0201.t
	desc = ancestor_veneration.0201.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = kitchen_dwarven }
	override_effect_2d = {
		reference = legend_glow
	}
	right_portrait = {
		character = character:lineoffinarfin1
		animation = steward
	}
	center_portrait = {
        character = character:lineofuriI
        animation = personality_callous
		animate_if_dead = yes
    }
	left_portrait = {
		character = character:lineofdwalinI
		animation = personality_content
		animate_if_dead = yes
    }
	cooldown = { years = 2 }
	option = { # We must protect our kin as he did.
		name = ancestor_veneration.0201.a
		random = {
			chance = 50
			add_martial_skill = 1
		}
		random = {
			chance = 10
			if = {
				limit = { has_trait = strong }
				add_martial_lifestyle_perk_points = 1
			}
			else = { add_trait = strong }
		}
	}
	option = { # Stories and scars won't keep us fed.
		name = ancestor_veneration.0201.b
		if = {
			limit = {
				has_trait = zealous
			}		
			random = {
				chance = 33
				remove_trait = zealous
				add_trait_force_tooltip = cynical
			}
		}
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
	}
	after = {
		trigger_event = {
			id = ancestor_veneration.0202
			weeks = 1
		}
	}
}

ancestor_veneration.0202 = { # Úri II, son of Thrur
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0202.t
	desc = ancestor_veneration.0202.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = throne_room_dwarf }
	right_portrait = {
		character = character:lineofdurin2
		animation = admiration
		animate_if_dead = yes
	}
	center_portrait = {
        character = character:lineofuriII
        animation = personality_cynical
		animate_if_dead = yes
    }
	left_portrait = {
        character = character:lineofdwalinII
        animation = personality_forgiving
		animate_if_dead = yes
    }
	lower_left_portrait = {
		character = character:lineofhersarbinshmur1
	}
	lower_center_portrait = {
		character = character:lineofuri5
	}
	lower_right_portrait = {
		character = character:lineofazganur5
	}
	cooldown = { years = 2 }
	option = { # Sometimes, a people must stand alone to preserve their identity.
		name = ancestor_veneration.0202.a
		add_stewardship_lifestyle_perk_points = 1
		random = {
		    chance = 10
			add_trait = reclusive
		}
	}
	option = { # To succeed, one must have allies by their side.
		name = ancestor_veneration.0202.b
		add_diplomacy_lifestyle_xp = 500
	}
	after = {
		trigger_event = {
			id = ancestor_veneration.0203
			weeks = 1
		}
	}
}

ancestor_veneration.0203 = { # Úri III
	type = character_event
 	window = visit_settlement_window
	title = ancestor_veneration.0203.t
	desc = ancestor_veneration.0203.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = throne_room }
	right_portrait = {
		character = character:lineofuri27
		animation = interested
		animate_if_dead = yes
	}
	center_portrait = {
       	character = character:lineofuriIII
       	animation = war_defender
	   	animate_if_dead = yes
    }
	left_portrait = {
      	character = character:lineofdwalinIII
       	animation = war_attacker
		animate_if_dead = yes
    }
	lower_right_portrait = {
		character = character:lineoffeanor10
	}
	immediate = {
		random_artifact = {
			limit = { has_variable = ring_of_firebeards }
			save_scope_as = ring_of_firebeards
		}
	}
	artifact = {
		target = scope:ring_of_firebeards
		position = lower_center_portrait
		trigger = { exists = scope:ring_of_firebeards }
	}
	lower_left_portrait = {
		character = character:lineofsauron
	}
	cooldown = { years = 2 }
	option = { # No doubt this gift was fiercely protected.
		name = ancestor_veneration.0203.a
		random = {
			chance = 25
			add_martial_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			add_martial_skill = 1
		}
	}
	option = { # Such gifts often veil darker intent.
		name = ancestor_veneration.0203.b
		random = {
			chance = 25
			add_intrigue_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			add_intrigue_skill = 1
		}
	}
	after = {
        if = {
            limit = {
                game_start_date >= 4066.11.11 # Úri IV must be dead!
            }
            trigger_event = {
            id = ancestor_veneration.0204
            weeks = 1
            }
        }
        else_if = {
            limit = {
                game_start_date < 4066.11.11 # Úri IV is not dead!
            }
            trigger_event = { # End the activity
            id = ancestor_veneration.0050
            weeks = 1
            }
        }
    }
}

ancestor_veneration.0204 = { # Úri IV
	type = character_event
 	window = visit_settlement_window
	title = ancestor_veneration.0204.t
	desc = ancestor_veneration.0204.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = barad_dur }
	right_portrait = {
		character = character:lineofdwalinIV
		animation = personality_content
		animate_if_dead = yes
	}
	center_portrait = {
       	character = character:lineofuriIV
       	animation = interested
		animate_if_dead = yes
    }
	left_portrait = {
      	character = character:lineofdurinIV
       	animation = aggressive_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
    }
	lower_right_portrait = {
		character = character:lineofkhathzaibriz53a
	}
	lower_center_portrait = {
		character = character:lineofuri45c
	}
	lower_left_portrait = {
		character = character:lineofsauron
	}
	cooldown = { years = 2 }
	option = { # He trusted the patient rise of cautious renewal.
		name = ancestor_veneration.0204.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # A king should fight, not hide.
		name = ancestor_veneration.0204.b
		add_martial_lifestyle_xp = 500
	}
	after = {
        if = {
            limit = {
                game_start_date >= 5013.1.17 # Úri V must be dead!
            }
            trigger_event = {
            id = ancestor_veneration.0205
            weeks = 1
            }
        }
        else_if = {
            limit = {
                game_start_date < 5013.1.17 # Úri V is not dead!
            }
            trigger_event = { # End the activity
            id = ancestor_veneration.0050
            weeks = 1
            }
        }
    }
}

ancestor_veneration.0205 = { # Úri V, the Reconciler
	type = character_event
 	window = visit_settlement_window
	title = ancestor_veneration.0205.t
	desc = ancestor_veneration.0205.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = throne_room }
	center_portrait = {
        character = character:lineofuriV
        animation = chancellor
		animate_if_dead = yes
    }
	lower_right_portrait = {
		character = character:lineofdwalinII
	}
	lower_center_portrait = {
		character = character:lineofuri5
	}
	lower_left_portrait = {
		character = character:lineofdurin2
	}
	cooldown = { years = 2 }
	option = { # Only together can we forge a future worthy of our ancestors.
		name = ancestor_veneration.0205.a
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
	}
	option = { # Only by embracing change can our clans truly thrive.
		name = ancestor_veneration.0205.b
		if = {
			limit = {
				has_trait = content
			}		
			random = {
				chance = 33
				remove_trait = content
				add_trait_force_tooltip = ambitious
			}
		}
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
	}
	after = {
        if = {
            limit = {
                game_start_date >= 7054.2.21 # Úri VI must be dead!
            }
            trigger_event = {
            id = ancestor_veneration.0206
            weeks = 1
            }
        }
        else_if = {
            limit = {
                game_start_date < 7054.2.21 # Úri VI is not dead!
            }
            trigger_event = { # End the activity
            id = ancestor_veneration.0050
            weeks = 1
            }
        }
    }
}

ancestor_veneration.0206 = { # Úri VI, the Generous
	type = character_event
 	window = visit_settlement_window
	title = ancestor_veneration.0206.t
	desc = ancestor_veneration.0206.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = throne_room }
	right_portrait = {
      	character = character:lineofdurin90
        animation = aggressive_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { 
				dwarf_war_steel_outfit
				dwarf_war_iron_hills_headgear
			}
		}
    }
	center_portrait = {
        character = character:lineofuriVI
        animation = personality_compassionate
		animate_if_dead = yes
    }
	left_portrait = {
        character = character:lineofuri122
        animation = thinking
		animate_if_dead = yes
    }
	lower_right_portrait = {
		character = character:lineofcirdan
	}
	lower_center_portrait = {
		character = character:lineofdurin83
	}
	lower_left_portrait = {
		character = character:lineofuri116
	}
	cooldown = { years = 2 }
	option = { # His measured generosity built lasting peace.
		name = ancestor_veneration.0206.a
		if = {
			limit = {
				has_trait = greedy
			}		
			random = {
				chance = 33
				remove_trait = greedy
				add_trait_force_tooltip = generous
			}
		}
		add_stewardship_lifestyle_xp = 500
	}
	option = { # His bravery forged a path forward for our people.
		name = ancestor_veneration.0206.b
		if = {
			limit = {
				has_trait = craven
			}		
			random = {
				chance = 33
				remove_trait = craven
				add_trait_force_tooltip = brave
			}
		}
		add_martial_lifestyle_xp = 500
	}
	after = {
		trigger_event = { # End the activity
			id = ancestor_veneration.0050
			weeks = 1
		}
	}
}

################################
# DWÁLIN INCARNATIONS
# 0301-0306
# by Jagua
################################

ancestor_veneration.0301 = { # Dwálin I, the Wise
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0301.t
	desc = ancestor_veneration.0301.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = throne_room_noldor }
	override_effect_2d = {
		reference = legend_glow
	}
	right_portrait = {
		character = character:lineofelwe1
		animation = steward
		animate_if_dead = yes
	}
	center_portrait = {
        character = character:lineofdwalinI
        animation = personality_content
		animate_if_dead = yes
    }
	left_portrait = {
		character = character:lineofuriI
        animation = personality_callous
		animate_if_dead = yes
    }
	cooldown = { years = 2 }
	option = { # Let wisdom and song guide our efforts as well.
		name = ancestor_veneration.0301.a
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}
	}
	option = { # Great craftsmanship endures beyond all else.
		name = ancestor_veneration.0301.b
		random = {
			chance = 33
			add_crafting_lifestyle_perk_points = 1
		}
	}
	after = {
		trigger_event = {
			id = ancestor_veneration.0302
			weeks = 1
		}
	}
}

ancestor_veneration.0302 = { # Dwálin II, son of Azaghâl of Belegost
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0302.t
	desc = ancestor_veneration.0302.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = gondolin_fall }
	right_portrait = {
		character = character:lineofdurin2
		animation = admiration
		animate_if_dead = yes
	}
	center_portrait = {
        character = character:lineofdwalinII
        animation = personality_forgiving
		animate_if_dead = yes
    }
	left_portrait = {
		character = character:lineofuriII
        animation = personality_cynical
		animate_if_dead = yes
    }
	lower_left_portrait = {
		character = character:lineofmazdul5
	}
	lower_center_portrait = {
		character = character:lineofdwalin7
	}
	lower_right_portrait = {
		character = character:lineofhargrim5
	}
	cooldown = { years = 2 }
	option = { # The Broadbeams came in wisdom, and in wisdom they shall be honored.
		name = ancestor_veneration.0302.a
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}
	}
	option = { # Like the Firebeards, we must trust in the ability of our own people.
		name = ancestor_veneration.0302.b
		random = {
			chance = 33
			add_crafting_lifestyle_perk_points = 1
		}
	}
	option = { # Let all remember that it was the Longbeards who opened their gates in dark times.
		name = ancestor_veneration.0302.c
		random = {
			chance = 33
			add_diplomacy_lifestyle_perk_points = 1
		}
	}
	after = {
		trigger_event = {
			id = ancestor_veneration.0303
			weeks = 1
		}
	}
}

ancestor_veneration.0303 = { # Dwálin III
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0303.t
	desc = ancestor_veneration.0303.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = throne_room }
	right_portrait = {
		character = character:lineofdwalin25
		animation = personality_content
		animate_if_dead = yes
	}
	center_portrait = {
       	character = character:lineofdwalinIII
        animation = war_attacker
		animate_if_dead = yes
    }
	left_portrait = {
      	character = character:secondlineofdwalin19
        animation = personality_compassionate
		animate_if_dead = yes
    }
	lower_right_portrait = {
		character = character:lineofhargrim21
	}
	lower_left_portrait = {
		character = character:lineofmazdul21
	}
	immediate = {
		random_artifact = {
			limit = { has_variable = ring_of_broadbeams }
			save_scope_as = ring_of_broadbeams
		}
	}
	artifact = {
		target = scope:ring_of_broadbeams
		position = lower_center_portrait
		trigger = { exists = scope:ring_of_broadbeams }
	}
	cooldown = { years = 2 }
	option = { # In unity lies the power to reclaim our ancient glory.
		name = ancestor_veneration.0303.a
		random = {
			chance = 33
			add_diplomacy_lifestyle_perk_points = 1
		}
	}
	option = { # Such gifts can hide secrets and should not be trusted lightly.
		name = ancestor_veneration.0303.b
		random = {
			chance = 33
			add_intrigue_lifestyle_perk_points = 1
		}
		random = {
			chance = 10
			if = {
				limit = { has_trait = shrewd }
				add_intrigue_lifestyle_perk_points = 1
			}
			else = { add_trait = shrewd }
		}
	}
	after = {
        if = {
            limit = {
                game_start_date >= 3765.8.27 # Dwálin IV must be dead!
            }
            trigger_event = {
            id = ancestor_veneration.0304
            weeks = 1
            }
        }
        else_if = {
            limit = {
                game_start_date < 3765.8.27 # Dwálin IV is not dead!
            }
            trigger_event = { # End the activity
            id = ancestor_veneration.0050
            weeks = 1
            }
        }
    }
}

ancestor_veneration.0304 = { # Dwálin IV
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0304.t
	desc = ancestor_veneration.0304.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = corridor_dunedain }
	right_portrait = {
		character = character:lineofuriIV
		animation = interested
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofdwalinIV
        animation = personality_content
		animate_if_dead = yes
	}
	left_portrait = {
        character = character:lineoforodreth4
        animation = admiration
		animate_if_dead = yes
    }
	lower_right_portrait = { # Add Wildwood Queen Dardariann later
		character = character:lineofnurwe3
	}
	lower_center_portrait = {
		character = character:lineofdurin44
	}
	lower_left_portrait = {
		character = character:lineofbavorIV
	}
	cooldown = { years = 2 }
	option = { # He guided his people into an age of prosperity.
		name = ancestor_veneration.0304.a
		add_stewardship_lifestyle_xp = 500
	}
	option = { # He forged bonds that safeguarded his people for generations.
		name = ancestor_veneration.0304.b
		add_diplomacy_lifestyle_xp = 500
	}
	after = {
        if = {
            limit = {
                game_start_date >= 4949.5.24 # Dwálin V must be dead!
            }
            trigger_event = {
            id = ancestor_veneration.0305
            weeks = 1
            }
        }
        else_if = {
            limit = {
                game_start_date < 4949.5.24 # Dwálin V is not dead!
            }
            trigger_event = { # End the activity
            id = ancestor_veneration.0050
            weeks = 1
            }
        }
    }
}

ancestor_veneration.0305 = { # Dwálin V
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0305.t
	desc = ancestor_veneration.0305.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = forodwaith }
	right_portrait = {
		character = character:lineofdourhand17 # killed by Skorgrím
		animation = shame
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofdwalinV
		animation = disbelief
		animate_if_dead = yes
	}
	left_portrait = {
        character = character:lineofuri67
        animation = disapproval
		animate_if_dead = yes
    }
	lower_right_portrait = {
		character = character:lineofcaladir43
	}
	lower_center_portrait = {
		character = character:lineisildur18
	}
	lower_left_portrait = {
		character = character:nazgul1
	}
	cooldown = { years = 2 }
	option = { # $Dwálin V's end shows the peril of mistaking kinship for loyalty.
		name = ancestor_veneration.0305.a
		random = {
			chance = 25
			add_diplomacy_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			add_diplomacy_skill = 1
		}
	}
	option = { # Let the tale of Dwálin V steel our hearts against deceit.
		name = ancestor_veneration.0305.b
		random = {
			chance = 25
			add_intrigue_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			add_intrigue_skill = 1
		}
	}
	after = {
        if = {
            limit = {
                game_start_date >= 6173.4.7 # Dwálin VI must be dead!
            }
            trigger_event = {
            id = ancestor_veneration.0306
            weeks = 1
            }
        }
        else_if = {
            limit = {
                game_start_date < 6173.4.7 # Dwálin VI must be dead!
            }
            trigger_event = { # End the activity
            id = ancestor_veneration.0050
            weeks = 1
            }
        }
    }
}

ancestor_veneration.0306 = { # Dwálin VI, Trollbane
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0306.t
	desc = ancestor_veneration.0306.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = wilderness_mountains }
	right_portrait = {
		character = character:lineofdurin74
		animation = schadenfreude
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofdwalinVI
        animation = aggressive_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_gold_outfit }
		}
	}
	left_portrait = {
        character = character:lineofdurinVI
        animation = dead
		animate_if_dead = yes
    }
	lower_right_portrait = {
		character = character:lineoftheklel36
	}
	lower_center_portrait = {
		character = character:lineofmorthain72
	}
	cooldown = { years = 2 }
	option = { # His display of compassion strengthened ties amongst kin.
		name = ancestor_veneration.0306.a
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
	}
	option = { # His valour in battle inspired all who followed him.
		name = ancestor_veneration.0306.b
		random = {
			chance = 50
			add_martial_skill = 1
		}
		random = {
			chance = 25
			if = {
				limit = { has_trait = lifestyle_blademaster }
				add_trait_xp = {
					trait = lifestyle_blademaster
					value = 20
				}
			}
			else = { add_trait = lifestyle_blademaster }
		}
	}
	after = {
		trigger_event = { # End the activity
		id = ancestor_veneration.0050
		weeks = 1
		}
    }
}

################################
# SINDRI INCARNATIONS
# 0401-0406
# by Jagua
################################

ancestor_veneration.0401 = { # Sindri I, the Rich
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0401.t
	desc = ancestor_veneration.0401.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = market_dwarven }
	override_effect_2d = {
		reference = legend_glow
	}
	right_portrait = {
        character = character:lineofnurwe2
        animation = personality_content
		animate_if_dead = yes
    }
	center_portrait = {
        character = character:lineofsindriI
        animation = personality_cynical
		animate_if_dead = yes
    }
	left_portrait = {
        character = character:lineofthulinI
        animation = worry
		animate_if_dead = yes
    }
	cooldown = { years = 2 }
	option = { # Let our legacy be etched in craft, as his was.
		name = ancestor_veneration.0401.a
		random = {
			chance = 33
			add_crafting_lifestyle_perk_points = 1
		}
	}
	option = { # Let the forges burn, and the halls rise.
		name = ancestor_veneration.0401.b
		random = {
			chance = 33
			add_stewardship_lifestyle_perk_points = 1
		}
	}
	after = {
		trigger_event = {
			id = ancestor_veneration.0402
			weeks = 1
		}
	}
}

ancestor_veneration.0402 = { # Sindri II, the Gilded
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0402.t
	desc = ancestor_veneration.0402.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = market_dwarven }
	center_portrait = {
      character = character:lineofsindriII
        animation = personality_greedy
		animate_if_dead = yes
    }
	cooldown = { years = 2 }
	option = { # Trade is its own craft, as he showed.
		name = ancestor_veneration.0402.a
		random = {
			chance = 33
			add_stewardship_lifestyle_perk_points = 1
		}
	}
	option = { # Like him, we shall temper wealth with craft and toil.
		name = ancestor_veneration.0402.b
		random = {
			chance = 33
			add_crafting_lifestyle_perk_points = 1
		}
	}
	after = {
		trigger_event = {
			id = ancestor_veneration.0403
			weeks = 1
		}
	}
}

ancestor_veneration.0403 = { # Sindri III
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0403.t
	desc = ancestor_veneration.0403.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = market_dwarven }
	immediate = {
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_ring_of_ironfists_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_ironfists }
			}
		}
	}
	center_portrait = {
        character = character:lineofsindriIII
        animation = personality_greedy
		animate_if_dead = yes
    }
	lower_center_portrait = {
		character = character:lineofsindri29
	}
	artifact = {
		target = scope:ring_of_ironfists
		position = lower_left_portrait
		trigger = { exists = scope:ring_of_ironfists }
	}
	cooldown = { years = 2 }
	option = { 
		name = ancestor_veneration.0403.a # Let us value peace and neutrality, as he once did.
		add_diplomacy_lifestyle_xp = 500
	}
	option = { 
		name = ancestor_veneration.0403.b # It was their skill in war that secured their renown.
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
	}
	after = {
		hidden_effect = {
			destroy_artifact ?= scope:ring_of_ironfists
		}
		if = {
            limit = {
                game_start_date >= 4339.10.11 # Sindri IV must be dead!
            }
            trigger_event = {
            id = ancestor_veneration.0404
            weeks = 1
            }
        }
        else_if = {
            limit = {
                game_start_date < 4339.10.11 # Sindri IV is not dead dead!
            }
            trigger_event = { # End the activity
            id = ancestor_veneration.0050
            weeks = 1
            }
        }
	}
}

ancestor_veneration.0404 = { # Sindri IV, the Burned
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0404.t
	desc = ancestor_veneration.0404.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = smaug_destruction }
	override_effect_2d = {
		reference = smoke
	}
	immediate = {
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_ring_of_ironfists_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_ironfists }
			}
		}
	}
	right_portrait = {
		character = character:lineofsindri107
        animation = severelywounded
		animate_if_dead = yes
    }
	center_portrait = {
      	character = character:lineofsindriIV
        animation = war_defender
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_eastern_outfit }
		}
    }
	left_portrait = {
     	character = character:lineofdurinIV
        animation = personality_vengeful
		animate_if_dead = yes
    }
	lower_center_portrait = {
		character = character:lineofsindri102
	}
	artifact = {
		target = scope:ring_of_ironfists
		position = lower_left_portrait
		trigger = { exists = scope:ring_of_ironfists }
	}
	cooldown = { years = 2 }
	option = { # Though his dreams were buried in ash, his bravery endures in memory.
		name = ancestor_veneration.0404.a
		add_martial_lifestyle_xp = 500
	}
	option = { # He strove tirelessly to bring prosperity back to his kin.
		name = ancestor_veneration.0404.b
		random = {
			chance = 33
			add_stewardship_lifestyle_perk_points = 1
		}
	}
	after = {
		hidden_effect = {
			destroy_artifact ?= scope:ring_of_ironfists
		}
		if = {
            limit = {
                game_start_date >= 5865.9.21 # Sindri V must be dead!
            }
            trigger_event = {
            id = ancestor_veneration.0405
            weeks = 1
            }
        }
        else_if = {
            limit = {
                game_start_date < 5865.9.21 # Sindri V is not dead!
            }
            trigger_event = { # End the activity
            id = ancestor_veneration.0050
            weeks = 1
            }
        }
	}
}

ancestor_veneration.0405 = { # Sindri V, the Wanderer
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0405.t
	desc = ancestor_veneration.0405.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = wilderness_savanna }
	right_portrait = {
		character = character:lineofsindri91
        animation = war_defender
		animate_if_dead = yes
    }
	center_portrait = {
      	character = character:lineofsindriV
        animation = holding_staff
		animate_if_dead = yes
    }
	left_portrait = {
     	character = character:lineofsindri92
        animation = war_defender
		animate_if_dead = yes
    }
	lower_center_portrait = {
		character = character:lineofsindri74
	}
	cooldown = { years = 2 }
	option = { # May our feet ever follow his restless path, seeking kin and kinship.
		name = ancestor_veneration.0405.a
		random = {
			chance = 33
			add_diplomacy_lifestyle_perk_points = 1
		}
	}
	option = { # May we never cease to seek knowledge from unexpected places.
		name = ancestor_veneration.0405.b
		if = {
			limit = { has_dlc_feature = wandering_nobles }
			random = {
				chance = 33
				add_wanderer_lifestyle_perk_points = 1
			}
		}
		else = {
			random = {
				chance = 33
				add_learning_lifestyle_perk_points = 1
			}
		}
	}
	after = {
		if = {
            limit = {
                game_start_date >= 6939.12.19 # Sindri VI must be dead!
            }
            trigger_event = {
            id = ancestor_veneration.0406
            weeks = 1
            }
        }
        else_if = {
            limit = {
                game_start_date < 6939.12.19 # Sindri VI must be dead!
            }
            trigger_event = { # End the activity
            id = ancestor_veneration.0050
            weeks = 1
            }
        }
	}
}

ancestor_veneration.0406 = { # Sindri VI, the Mercenary
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0406.t
	desc = ancestor_veneration.0406.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = dimril_dale }
	right_portrait = {
		character = character:lineofdurin82
        animation = personality_vengeful
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
    }
	center_portrait = {
     	character = character:lineofsindriVI
        animation = aggressive_axe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_eastern_outfit }
		}
    }
	left_portrait = {
   	character = character:lineofuriVI
        animation = marshal_axe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_bronze_outfit }
		}
    }
	lower_right_portrait = {
		character = character:lineofdurin90
		triggered_outfit = {
			outfit_tags = { 
				dwarf_war_steel_outfit
				dwarf_war_iron_hills_headgear
			}
		}
	}
	lower_center_portrait = {
		character = character:lineofazog1
	}
	lower_left_portrait = {
		character = character:lineofdurin81
	}
	cooldown = { years = 2 }
	option = { # He ensured his company never faltered on the road.
		name = ancestor_veneration.0406.a
		random = {
			chance = 50
			add_martial_skill = 1
		}
		random = {
			chance = 25
			if = {
				limit = { has_trait = logistician }
				add_trait_xp = {
					trait = logistician
					value = 20
				}
			}
			else = { add_trait = logistician }
		}
	}
	option = { # Our strength lies in the unity of all clans, unbroken and unyielding.
		name = ancestor_veneration.0406.b
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
	}
	after = {
		trigger_event = { # End the activity
		id = ancestor_veneration.0050
		weeks = 1
		}
    }
}

################################
# THÚLIN INCARNATIONS
# 0501-0506
# by Jagua
################################

ancestor_veneration.0501 = { # Thúlin I, the Swift
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0501.t
	desc = ancestor_veneration.0501.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = corridor_dwarven }
	override_effect_2d = {
		reference = legend_glow
	}
	right_portrait = {
		character = character:lineofthulin0a
		animation = dead
		animate_if_dead = yes
	}
	center_portrait = {
      	character = character:lineofthulinI
        animation = worry
		animate_if_dead = yes
   	}
	left_portrait = {
		character = character:lineofsindriI
		animation = personality_cynical
		animate_if_dead = yes
	}
	cooldown = { years = 2 }
	option = { # Let our toil match his pace, swift and unrelenting.
		name = ancestor_veneration.0501.a
		random = {
			chance = 33
			add_crafting_lifestyle_perk_points = 1
		}
	}
	option = { # As he laid his son to rest, so shall we uphold the dignity of the fallen.
		name = ancestor_veneration.0501.b
		add_piety = 100
		random = {
			chance = 25
			add_learning_lifestyle_perk_points = 1
		}
	}
	after = {
		trigger_event = {
			id = ancestor_veneration.0502
			weeks = 1
		}
	}
}

ancestor_veneration.0502 = { # Thúlin II, the Prolific
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0502.t
	desc = ancestor_veneration.0502.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = corridor_dwarven }
	right_portrait = {
		character = character:lineofthulin7
		animation = personality_cynical
		animate_if_dead = yes
	}
	center_portrait = {
      	character = character:lineofthulinII
        animation = happiness
		animate_if_dead = yes
   	}
	left_portrait = {
		character = character:secondlineofthulin1
		animation = personality_compassionate
		animate_if_dead = yes
	}
	lower_left_portrait = {
		character = character:lineofdharam9
	}
	lower_center_portrait = {
		character = character:lineofthulin16
	}
	cooldown = { years = 2 }
	option = { # Though our kin may dwell far, family's strength keeps us united.
		name = ancestor_veneration.0502.a
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
	}
	option = { # Through him, we are reminded that reaching outward can enrich what lies within.
		name = ancestor_veneration.0502.b
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
	}
	after = {
		trigger_event = {
			id = ancestor_veneration.0503
			weeks = 1
		}
	}
}

ancestor_veneration.0503 = { # Thúlin III, the Steadfast
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0503.t
	desc = ancestor_veneration.0503.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = corridor_dwarven }
	immediate = {
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_ring_of_stiffbeards_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_stiffbeards }
			}
		}
	}
	right_portrait = {
		character = character:lineofthrarIII
		animation = war_attacker
		animate_if_dead = yes
	}
	center_portrait = {
      	character = character:lineofthulinIII
        animation = war_defender
		animate_if_dead = yes
   	}
	left_portrait = {
		character = character:lineofbavorIII
		animation = steward
		animate_if_dead = yes
	}
	lower_right_portrait = {
		character = character:lineofdharam21
	}
	lower_left_portrait = {
		character = character:secondlineofthulin10
	}
	artifact = {
		target = scope:ring_of_stiffbeards
		position = lower_center_portrait
		trigger = { exists = scope:ring_of_stiffbeards }
	}
	cooldown = { years = 2 }
	option = { # His resolve preserved what fury could have doomed.
		name = ancestor_veneration.0503.a
		random = {
			chance = 33
			add_stewardship_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			if = {
				limit = { has_trait = unyielding_defender }
				add_trait_xp = {
					trait = unyielding_defender
					value = 20
				}
			}
			else = { add_trait = unyielding_defender }
		}
	}
	option = { # Through him, we are reminded that reaching outward can enrich what lies within.
		name = ancestor_veneration.0503.b
		random = {
			chance = 25
			add_diplomacy_skill = 1
		}
		random = {
			chance = 25
			add_diplomacy_lifestyle_perk_points = 1
		}
	}
	after = {
		hidden_effect = {
			destroy_artifact ?= scope:ring_of_stiffbeards
		}
		if = {
            limit = {
                game_start_date >= 3353.5.19 # Thúlin IV must be dead!
            }
            trigger_event = {
            id = ancestor_veneration.0504
            weeks = 1
            }
        }
        else_if = {
            limit = {
                game_start_date < 3353.5.19 # Thúlin IV is not dead!
            }
            trigger_event = { # End the activity
            id = ancestor_veneration.0050
            weeks = 1
            }
        }
	}
}

ancestor_veneration.0504 = { # Thúlin IV, the Charred
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0504.t
	desc = ancestor_veneration.0504.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = smaug_destruction }
	override_effect_2d = {
		reference = smoke
	}
	immediate = {
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_ring_of_stiffbeards_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_stiffbeards }
			}
		}
	}
	right_portrait = {
		character = character:lineofthulin75
		animation = personality_vengeful
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit no_headgear }
		}
	}
	center_portrait = {
      	character = character:lineofthulinIV
        animation = aggressive_axe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
   	}
	left_portrait = {
		character = character:lineofthulin75a
		animation = personality_vengeful
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit no_headgear }
		}
	}
	artifact = {
		target = scope:ring_of_stiffbeards
		position = lower_center_portrait
		trigger = { exists = scope:ring_of_stiffbeards }
	}
	cooldown = { years = 2 }
	option = { # His bravery and sacrifice shielded our kin from utter ruin.
		name = ancestor_veneration.0504.a
		if = {
			limit = {
				has_trait = craven
			}		
			random = {
				chance = 33
				remove_trait = craven
				add_trait_force_tooltip = brave
			}
		}
		random = {
			chance = 33
			add_martial_lifestyle_perk_points = 1
		}
	}
	option = { # In pursuing great wealth, he upheld the noble traditions of our people.
		name = ancestor_veneration.0504.b
		if = {
			limit = {
				has_trait = generous
			}		
			random = {
				chance = 33
				remove_trait = generous
				add_trait_force_tooltip = greedy
			}
		}
		add_stewardship_lifestyle_xp = 500
	}
	after = {
		hidden_effect = {
			destroy_artifact ?= scope:ring_of_stiffbeards
		}
		if = {
            limit = {
                game_start_date >= 5706.12.27 # Kibilzahar must have fallen!
            }
            trigger_event = {
            id = ancestor_veneration.0505
            weeks = 1
            }
        }
        else_if = {
            limit = {
                game_start_date < 5706.12.27 # Kibilzahar has not fallen!
            }
            trigger_event = { # End the activity
            id = ancestor_veneration.0050
            weeks = 1
            }
        }
	}
}

ancestor_veneration.0505 = { # Thúlin V, the Pragmatic
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0505.t
	desc = ancestor_veneration.0505.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = wilderness_mountains }
	center_portrait = {
      	character = character:lineofthulinV
        animation = personality_cynical
		animate_if_dead = yes
   	}
	cooldown = { years = 2 }
	option = { # His guidance created opportunities for his people when times were hard.
		name = ancestor_veneration.0505.a
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
	}
	option = { # His foresight laid foundations that may yet bear fruit.
		name = ancestor_veneration.0505.b
		random = {
			chance = 50
			add_learning_skill = 1
		}
		random = {
			chance = 10
			if = {
				limit = { has_trait = shrewd }
				add_learning_lifestyle_perk_points = 1
			}
			else = { add_trait = shrewd }
		}
	}
	after = {
		hidden_effect = {
			destroy_artifact ?= scope:ring_of_stiffbeards
		}
		if = {
            limit = {
                game_start_date >= 6270.4.7 # Thúlin VI must be dead!
            }
            trigger_event = {
            id = ancestor_veneration.0506
            weeks = 1
            }
        }
        else_if = {
            limit = {
                game_start_date < 6270.4.7 # Thúlin VI is not dead!
            }
            trigger_event = { # End the activity
            id = ancestor_veneration.0050
            weeks = 1
            }
        }
	}
}

ancestor_veneration.0506 = { # Thúlin VI, the Forlorn
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0506.t
	desc = ancestor_veneration.0506.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = market_dwarven }
	right_portrait = {
		character = character:lineofthulin115
		animation = personality_zealous
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { no_headgear }
		}
	}
	center_portrait = {
      	character = character:lineofthulinVI
        animation = dead
		animate_if_dead = yes
   	}
	left_portrait = {
		character = character:lineofthulin113
		animation = personality_zealous
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { no_headgear }
		}
	}
	lower_left_portrait = {
		character = character:lineofthulin0a
	}
	lower_center_portrait = {
		character = character:lineofthulin105
	}
	cooldown = { years = 2 }
	option = { # He guided his people through their hardest days, and built for their return.
		name = ancestor_veneration.0506.a
		if = {
			limit = { has_dlc_feature = wandering_nobles }
			random = {
				chance = 33
				add_wanderer_lifestyle_perk_points = 1
			}
		}
		else = {
			random = {
				chance = 33
				add_stewardship_lifestyle_perk_points = 1
			}
		}
	}
	option = { # He emboldened a broken people, readying them for the war to come.
		name = ancestor_veneration.0506.b
		random = {
			chance = 33
			add_martial_lifestyle_perk_points = 1
		}
	}
	after = {
		trigger_event = { # End the activity
		id = ancestor_veneration.0050
		weeks = 1
		}
    }
}

################################
# THRÁR INCARNATIONS
# 0601-0606
# by Jagua
################################

ancestor_veneration.0601 = { # Thrár I, the Proud
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0601.t
	desc = ancestor_veneration.0601.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = corridor_dwarven }
	override_effect_2d = {
		reference = legend_glow
	}
	right_portrait = {
		character = character:lineofbavorI
		animation = personality_content
		animate_if_dead = yes
	}
	left_portrait = {
       character = character:lineofthrarI
        animation = marshal
		animate_if_dead = yes
    }
	cooldown = { years = 2 }
	option = { # Let our deeds resound louder than his voice.
		name = ancestor_veneration.0601.a
		if = {
			limit = {
				has_trait = humble
			}		
			random = {
				chance = 33
				remove_trait = humble
				add_trait_force_tooltip = arrogant
			}
		}
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
	}
	option = { # Even pride must kneel before wisdom.
		name = ancestor_veneration.0601.b
		random = {
			chance = 50
			add_learning_skill = 1
		}
	}
	after = {
		trigger_event = {
			id = ancestor_veneration.0602
			weeks = 1
		}
	}
}

ancestor_veneration.0602 = { # Thrár II, South-King
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0602.t
	desc = ancestor_veneration.0602.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = market_dwarven }
	trigger = {
		game_start_date >= 3479.6.21 # Bizarûldûm Succession Crisis is mentioned in the event.
	}
	right_portrait = {
		character = character:lineofbavorII
		animation = chancellor
		animate_if_dead = yes
	}
	center_portrait = {
        character = character:lineofthrarII
        animation = wedding_groom_right
		animate_if_dead = yes
    }
	left_portrait = {
	    character = character:lineofbavor14
        animation = wedding_bride_left
	    animate_if_dead = yes
    }
	cooldown = { years = 2 }
	option = { # He built with purpose. So too shall we.
		name = ancestor_veneration.0602.a
		add_stewardship_lifestyle_xp = 500
	}
	option = { # As he united houses, so shall I forge new pacts.
		name = ancestor_veneration.0602.b
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}
	}
	after = {
		trigger_event = {
			id = ancestor_veneration.0603
			weeks = 1
		}
	}
}

ancestor_veneration.0603 = { # Thrár III, the Bloodstained
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0603.t
	desc = ancestor_veneration.0603.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = mining_activity }
	right_portrait = {
      	character = character:lineofthulinIII
        animation = war_defender
		animate_if_dead = yes
    }
	center_portrait = {
      	character = character:lineofthrarIII
        animation = marshal_shield
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_eastern_outfit }
		}
    }
	left_portrait = {
       	character = character:lineofbavorIII
       	animation = steward
		animate_if_dead = yes
    }
	lower_center_portrait = {
		character = character:lineofgorovod3
	}
	immediate = {
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_ring_of_blacklocks_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_blacklocks }
			}
		}
	}
	artifact = {
		target = scope:ring_of_blacklocks
		position = lower_left_portrait
		trigger = { exists = scope:ring_of_blacklocks }
	}
	cooldown = { years = 2 }
	option = { # Thrár's decisive leadership was praiseworthy.
		name = ancestor_veneration.0603.a
		random = {
			chance = 33
			add_martial_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			if = {
				limit = { has_trait = aggressive_attacker }
				add_trait_xp = {
					trait = aggressive_attacker
					value = 20
				}
			}
			else = { add_trait = aggressive_attacker }
		}
	}
	option = { # He possessed the wisdom to act when the moment demanded it.
		name = ancestor_veneration.0603.b
		random = {
			chance = 25
			add_learning_skill = 1
		}
		random = {
			chance = 25
			add_learning_lifestyle_perk_points = 1
		}
	}
	after = {
		if = {
            limit = {
                game_start_date >= 3479.6.21 # Thrár IV must be dead!
            }
            trigger_event = {
            id = ancestor_veneration.0604
            weeks = 1
            }
        }
        else_if = {
            limit = {
                game_start_date < 3479.6.21 # Thrár IV is not dead!
            }
            trigger_event = { # End the activity
            id = ancestor_veneration.0050
            weeks = 1
            }
        }
	}
}

ancestor_veneration.0604 = { # Thrár IV, the Three-Day King
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0604.t
	desc = ancestor_veneration.0604.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = smaug_destruction }
	override_effect_2d = {
		reference = smoke
	}
	right_portrait = {
		character = character:lineofbavor42
		animation = thinking
		animate_if_dead = yes
	}
	center_portrait = {
      	character = character:lineofthrarIV
        animation = aggressive_sword
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_eastern_outfit }
		}
    }
	left_portrait = {
      	character = character:lineofthrar51
        animation = severelywounded
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_eastern_outfit }
		}
    }
	immediate = {
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_ring_of_blacklocks_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_blacklocks }
				create_artifact_ring_of_stonefoots_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_stonefoots }
			}
		}
		random_artifact = {
			limit = { has_variable = cursed_sword_of_blacklocks }
			save_scope_as = cursed_sword_of_blacklocks
		}
	}
	artifact = {
		target = scope:ring_of_blacklocks
		position = lower_left_portrait
		trigger = { exists = scope:ring_of_blacklocks }
	}
	artifact = {
		target = scope:cursed_sword_of_blacklocks
		position = lower_center_portrait
		trigger = { exists = scope:cursed_sword_of_blacklocks }
	}
	artifact = {
		target = scope:ring_of_stonefoots
		position = lower_right_portrait
		trigger = { exists = scope:ring_of_stonefoots }
	}
	cooldown = { years = 2 }
	option = { # I too shall face great peril if duty demands it.
		name = ancestor_veneration.0604.a
		random = {
			chance = 33
			add_martial_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = craven
			}		
			random = {
				chance = 33
				remove_trait = craven
				add_trait_force_tooltip = brave
			}
		}
		random = {
			chance = 33
			if = {
				limit = { has_trait = cavern_commander }
				add_trait_xp = {
					trait = cavern_commander
					value = 20
				}
			}
			else = { add_trait =  cavern_commander }
		}
	}
	option = { # A shame to see such works of craftsmanship lost to time.
		name = ancestor_veneration.0604.b
		random = {
			chance = 33
			add_crafting_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			if = {
				limit = { has_trait = lifestyle_artifact_crafting }
				add_trait_xp = {
					trait = lifestyle_artifact_crafting
					track = weapon_smith
					value = 20
				}
			}
			else = { add_trait = lifestyle_artifact_crafting }
		}
	}
	after = {
		hidden_effect = {
			destroy_artifact ?= scope:ring_of_blacklocks 
			destroy_artifact ?= scope:ring_of_stonefoots
		}
		if = {
            limit = {
                game_start_date >= 5321.10.24 # Thrár V must be dead!
            }
            trigger_event = {
            id = ancestor_veneration.0605
            weeks = 1
            }
        }
        else_if = {
            limit = {
                game_start_date < 5321.10.24 # Thrár V is not dead!
            }
            trigger_event = { # End the activity
            id = ancestor_veneration.0050
            weeks = 1
            }
        }
	}
}

ancestor_veneration.0605 = { # Thrár V, the Rebuilder
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0605.t
	desc = ancestor_veneration.0605.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = wilderness_underground }
	widgets = {
		widget = {
		gui = "event_window_widget_vfx_heavy_smoke"
		container = "foreground_shader_vfx_container"
		}
	}
	right_portrait = {
		character = character:thirdlineofthrar57
		animation = disbelief
		animate_if_dead = yes
	}
	left_portrait = {
      	character = character:lineofthrarV
        animation = steward
		animate_if_dead = yes
    }
	cooldown = { years = 2 }
	option = { # In times of trial, true rulers do not falter in their duty.
		name = ancestor_veneration.0605.a
		if = {
			limit = {
				has_trait = lazy
			}		
			random = {
				chance = 33
				remove_trait = lazy
				add_trait_force_tooltip = diligent
			}
		}
		add_stewardship_lifestyle_xp = 500
	}
	option = { # Endurance means little without strength to defend it.
		name = ancestor_veneration.0605.b
		add_martial_lifestyle_xp = 500
	}
	after = {
		if = {
            limit = {
                game_start_date >= 6523.10.8 # Thrár VI must be dead!
            }
            trigger_event = {
            id = ancestor_veneration.0606
            weeks = 1
            }
        }
        else_if = {
            limit = {
                game_start_date < 6523.10.8 # Thrár VI is not dead!
            }
            trigger_event = { # End the activity
            id = ancestor_veneration.0050
            weeks = 1
            }
        }
	}
}

ancestor_veneration.0606 = { # Thrár VI, the Valiant
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0606.t
	desc = ancestor_veneration.0606.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = wilderness_mountains }
	right_portrait = {
		character = character:nazgul4
		animation = disgust
		animate_if_dead = yes
	}
	left_portrait = {
     	character = character:lineofthrarVI
        animation = celebrate_sword
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_eastern_outfit }
		}
    }
	cooldown = { years = 2 }
	option = { # In times of darkness, unity is the weapon that ensures survival.
		name = ancestor_veneration.0606.a
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
	}
	option = { # Unity is valuable, but strength of arms is what secures victory.
		name = ancestor_veneration.0606.b
		random = {
			chance = 50
			add_martial_skill = 1
		}
	}
	after = {
		trigger_event = { # End the activity
		id = ancestor_veneration.0050
		weeks = 1
		}
    }
}

################################
# BAVÓR INCARNATIONS
# 0701-0706
# by Jagua
################################

ancestor_veneration.0701 = { # Bavór I, the Cold
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0701.t
	desc = ancestor_veneration.0701.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = corridor_dwarven }
	override_effect_2d = {
		reference = legend_glow
	}
	right_portrait = {
		character = character:lineofthrarI
		animation = marshal
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofbavorI
		animation = personality_content
		animate_if_dead = yes
	}
	left_portrait = {
      	character = character:lineofzabad
       	animation = admiration
		animate_if_dead = yes
    }
	cooldown = { years = 2 }
	option = { # His calm demeanour forged strong and lasting alliances.
		name = ancestor_veneration.0701.a
		if = {
			limit = {
				has_trait = wrathful
			}		
			random = {
				chance = 33
				remove_trait = wrathful
				add_trait_force_tooltip = calm
			}
		}
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
	}
	option = { # His careful hand secured wealth and order for generations.
		name = ancestor_veneration.0701.b
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
	}
	after = {
		trigger_event = {
			id = ancestor_veneration.0702
			weeks = 1
		}
	}
}

ancestor_veneration.0702 = { # Bavór II North-King
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0702.t
	desc = ancestor_veneration.0702.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = market_dwarven }
	right_portrait = {
		character = character:lineofthrarII
		animation = wedding_groom_right
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofbavorII
		animation = chancellor
		animate_if_dead = yes
	}
	left_portrait = {
       character = character:lineofbavor14
       animation = wedding_bride_left
		animate_if_dead = yes
    }
	cooldown = { years = 2 }
	option = { # Steadfast counsel shapes the mightiest plans.
		name = ancestor_veneration.0702.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # Titles fade, but true wisdom endures.
		name = ancestor_veneration.0702.b
		add_learning_lifestyle_xp = 500
	}
	after = {
		trigger_event = {
			id = ancestor_veneration.0703
			weeks = 1
		}
	}
}

ancestor_veneration.0703 = { # Bavór III, the Steward
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0703.t
	desc = ancestor_veneration.0703.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = market_dwarven }
	right_portrait = {
		character = character:lineofthrarIII
		animation = marshal_shield
		animate_if_dead = yes
		outfit_tags = { 
			dwarf_war_eastern_outfit 
		}
	}
	center_portrait = {
		character = character:lineofbavorIII
		animation = steward
		animate_if_dead = yes
	}
	left_portrait = {
		character = character:lineofthulinIII
		animation = war_defender
		animate_if_dead = yes
	}
	immediate = {
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_ring_of_stonefoots_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_stonefoots }
			}
		}
	}
	artifact = {
		target = scope:ring_of_stonefoots
		position = lower_left_portrait
		trigger = { exists = scope:ring_of_stonefoots }
	}
	lower_center_portrait = {
		character = character:lineofbavor26
	}
	cooldown = { years = 2 }
	option = { # Victory is forged by more than swords.
		name = ancestor_veneration.0703.a
		random = {
			chance = 33
			add_stewardship_lifestyle_perk_points = 1
		}
	}
	option = { # His knowledge steadied the realm in difficult times.
		name = ancestor_veneration.0703.b
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}
	}
	after = {
		hidden_effect = {
			destroy_artifact ?= scope:ring_of_stonefoots
		}
		if = {
            limit = {
                game_start_date >= 3928.3.6 # Bavór IV must be dead!
            }
            trigger_event = {
            id = ancestor_veneration.0704
            weeks = 1
            }
        }
        else_if = {
            limit = {
                game_start_date < 3928.3.6 # Bavór IV is not dead!
            }
            trigger_event = { # End the activity
            id = ancestor_veneration.0050
            weeks = 1
            }
        }
	}
}

ancestor_veneration.0704 = { # Bavór IV Sole-King
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0704.t
	desc = ancestor_veneration.0704.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = throne_room }
	right_portrait = {
		character = character:lineofthrarIV
		animation = dead
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofbavorIV
		animation = personality_compassionate
		animate_if_dead = yes
	}
	left_portrait = {
      	character = character:secondlineofthrar33
        animation = marshal
		animate_if_dead = yes
    }
	immediate = {
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_ring_of_blacklocks_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_blacklocks }
				create_artifact_ring_of_stonefoots_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_stonefoots }
			}
		}
	}
	artifact = {
		target = scope:ring_of_stonefoots
		position = lower_left_portrait
		trigger = { exists = scope:ring_of_stonefoots }
	}
	lower_center_portrait = {
		character = character:lineofthrar51
	}
	artifact = {
		target = scope:ring_of_blacklocks
		position = lower_right_portrait
		trigger = { exists = scope:ring_of_blacklocks }
	}
	cooldown = { years = 2 }
	option = { # He rebuilt what pride had shattered.
		name = ancestor_veneration.0704.a
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
	}
	option = { # He guided a wounded realm toward lasting peace.
		name = ancestor_veneration.0704.b
		add_diplomacy_lifestyle_xp = 500
	}
	after = {
		hidden_effect = {
			destroy_artifact ?= scope:ring_of_blacklocks 
			destroy_artifact ?= scope:ring_of_stonefoots
		}
		if = {
            limit = {
                game_start_date >= 5167.12.19 # Bavór V must be dead!
            }
            trigger_event = {
            id = ancestor_veneration.0705
            weeks = 1
            }
        }
        else_if = {
            limit = {
                game_start_date < 5167.12.19 # Bavór V is not dead!
            }
            trigger_event = { # End the activity
            id = ancestor_veneration.0050
            weeks = 1
            }
        }
	}
}

ancestor_veneration.0705 = { # Bavór V
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0705.t
	desc = ancestor_veneration.0705.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = throne_room }
	center_portrait = {
		character = character:lineofbavorV
		animation = personality_content
		animate_if_dead = yes
	}
	cooldown = { years = 2 }
	option = { # Peace is a treasure that nurtures the soul.
		name = ancestor_veneration.0705.a
		random = {
			chance = 33
			add_diplomacy_lifestyle_perk_points = 1
		}
	}
	option = { # Through craft and wisdom, we endure beyond our years.
		name = ancestor_veneration.0705.b
		random = {
			chance = 33
			add_crafting_lifestyle_perk_points = 1
		}
	}
	after = {
		if = {
            limit = {
                game_start_date >= 6684.12.21 # Bavór VI must be dead!
            }
            trigger_event = {
            id = ancestor_veneration.0706
            weeks = 1
            }
        }
        else_if = {
            limit = {
                game_start_date < 6684.12.21 # Bavór VI is not dead!
            }
            trigger_event = { # End the activity
            id = ancestor_veneration.0050
            weeks = 1
            }
        }
	}
}

ancestor_veneration.0706 = { # Bavór VI
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0706.t
	desc = ancestor_veneration.0706.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = corridor_dwarven }
	right_portrait = {
		character = character:lineofbavor84
		animation = personality_compassionate
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofbavorVI
		animation = marshal_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { 
				dwarf_war_eastern_outfit
			}
		}
		
	}
	left_portrait = {
      	character = character:lineofbarukodlig1
       	animation = marshal
		animate_if_dead = yes
    }
	lower_center_portrait = {
		character = character:nazgul7
	}
	cooldown = { years = 2 }
	option = { # His axe stayed sharp, ready to meet shadow with steel.
		name = ancestor_veneration.0706.a
		random = {
			chance = 50
			add_martial_skill = 1
		}
		random = {
			chance = 25
			if = {
				limit = { has_trait = cautious_leader }
				add_trait_xp = {
					trait = cautious_leader
					value = 20
				}
			}
			else = { add_trait = cautious_leader }
		}
	}
	option = { # He bore the weight of his people's future with steady hands.
		name = ancestor_veneration.0706.b
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
	}
	after = {
		trigger_event = { # End the activity
		id = ancestor_veneration.0050
		weeks = 1
		}
    }
}

################################
# LONGBEARD ANCESTORS
# 0110-0199
# by Jagua
################################

ancestor_veneration.0110 = { # Thrór, King Under the Mountain
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0110.t
	desc = ancestor_veneration.0110.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = mining_activity }
	trigger = {
		game_start_date >= 6832.4.8 # Thrór must be dead!
	}
	immediate = {
		random_artifact = {
			limit = { has_variable = ring_of_longbeards }
			save_scope_as = ring_of_longbeards
		}
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_arkenstone_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = arkenstone }
			}
		}
	}
	right_portrait = {
		 character = character:lineofdurin82
        animation = personality_vengeful
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
	}
	center_portrait = {
        character = character:lineofdurin81
        animation = personality_greedy
		animate_if_dead = yes
    }
	left_portrait = {
        character = character:lineofnar1
        animation = schadenfreude
		animate_if_dead = yes
    }
	artifact = {
		target = scope:ring_of_longbeards
		position = lower_left_portrait
		trigger = { exists = scope:ring_of_longbeards }
	}
	artifact = {
		target = scope:arkenstone
		position = lower_right_portrait
		trigger = { exists = scope:arkenstone }
	}
	lower_center_portrait = {
		character = character:lineofazog1
	}
	cooldown = { years = 2 }
	option = { # Through his wealth, our people stood unbroken and proud.
		name = ancestor_veneration.0110.a
		add_stewardship_lifestyle_xp = 500
			if = {
			limit = {
				has_trait = generous
			}		
			random = {
				chance = 33
				remove_trait = generous
				add_trait_force_tooltip = greedy
			}
		}
	}
	option = { # His path forged a Dwarven fury that would not be quelled.
		name = ancestor_veneration.0110.b
		add_martial_lifestyle_xp = 500
		if = {
			limit = {
				has_trait = calm
			}		
			random = {
				chance = 33
				remove_trait = calm
				add_trait_force_tooltip = wrathful
			}
		}
	}
}

ancestor_veneration.0111 = { # Thráin II
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0111.t
	desc = ancestor_veneration.0111.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = dimril_dale }
	trigger = {
		game_start_date >= 6883.3.8 # Thráin II must be dead!
	}
	immediate = {
		random_artifact = {
			limit = { has_variable = ring_of_longbeards }
			save_scope_as = ring_of_longbeards
		}
	}
	right_portrait = {
		character = character:lineofdurin83
		animation = aggressive_sword
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
	}
	center_portrait = {
        character = character:lineofdurin82
        animation = marshal_axe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
    }
	left_portrait = {
        character = character:lineofdurin84
        animation = aggressive_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
    }
	artifact = {
		target = scope:ring_of_longbeards
		position = lower_center_portrait
		trigger = { exists = scope:ring_of_longbeards }
	}
	lower_right_portrait = {
		character = character:lineofsauron
	}
	lower_left_portrait = {
		character = character:lineofazog1
	}
	cooldown = { years = 2 }
	option = { # Let our strength and arms carve a path to glory.
		name = ancestor_veneration.0111.a
		random = {
			chance = 50
			add_martial_skill = 1
		}
		random = {
			chance = 25
			if = {
				limit = { has_trait = organizer }
				add_trait_xp = {
					trait = organizer
					value = 20
				}
			}
			else = { add_trait = organizer }
		}
	}
	option = { # Through patience and alliances, we shall endure.
		name = ancestor_veneration.0111.b
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
	}
}

ancestor_veneration.0112 = { # Thorin II Oakenshield
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0112.t
	desc = ancestor_veneration.0112.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = dwarven_gate }
	trigger = {
		game_start_date >= 6974.11.30 # Thorin II Oakenshield must be dead!
	}
	right_portrait = {
		character = character:lineofdurin86
		animation = aggressive_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { 
				dwarf_war_steel_outfit 
				dwarf_war_iron_hills_headgear
			}
		}
	}
	center_portrait = {
        character = character:lineofdurin83
        animation = marshal
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
    }
	left_portrait = {
        character = character:lineofdurin87
        animation = marshal_axe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { 
				dwarf_war_steel_outfit 
				dwarf_war_iron_hills_headgear
			}
		}
    }
	immediate = {
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_orcrist_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = orcrist }
			}
			character:k_wastelands_holder = {
				create_artifact_arkenstone_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = arkenstone }
			}
		}
	}
	artifact = {
		target = scope:orcrist
		position = lower_left_portrait
		trigger = { exists = scope:orcrist }
	}
	lower_center_portrait = {
		character = character:lineofbaggins12
	}
	artifact = {
		target = scope:arkenstone
		position = lower_right_portrait
		trigger = { exists = scope:arkenstone }
	}
	cooldown = { years = 2 }
	option = { # His bravery will not soon be forgotten.
		name = ancestor_veneration.0112.a
		random = {
			chance = 33
			add_martial_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			if = {
				limit = { has_trait = lifestyle_blademaster }
				add_trait_xp = {
					trait = lifestyle_blademaster
					value = 20
				}
			}
			else = { add_trait = lifestyle_blademaster }
		}
	}
	option = { # My legacy will be even greater than this.
		name = ancestor_veneration.0112.b
		add_prestige = medium_prestige_gain
		add_piety = -200
		random = {
			chance = 25
			add_stewardship_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = humble
			}		
			random = {
				chance = 33
				remove_trait = humble
				add_trait_force_tooltip = arrogant
			}
		}
	}
}

ancestor_veneration.0113 = { # Narvi, legendary smith and friend to Celebrimbor
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0113.t
	desc = ancestor_veneration.0113.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = durins_door }
	override_effect_2d = {
		reference = legend_glow
	}
	right_portrait = {
        character = character:lineoffeanor10
        animation = personality_rational
		animate_if_dead = yes
    }
	center_portrait = {
        character = character:lineofnarvi
        animation = war_defender
		animate_if_dead = yes
    }
	left_portrait = {
		character = character:lineofdurinII
		animation = personality_compassionate
		animate_if_dead = yes
	}
	cooldown = { years = 2 }
	option = { # We shall rebuild the friendship Narvi once had with the Elves.
		name = ancestor_veneration.0113.a
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
	}
	option = { # The Doors of Durin stood as an invaluable safeguard of the realm.
		name = ancestor_veneration.0113.b
		random = {
			chance = 50
			add_martial_skill = 1
		}
		if = {
			limit = {
				OR = {
					has_trait = fickle
					has_trait = eccentric
				}
			}	
			random = {
				chance = 33
					remove_trait = fickle
					remove_trait = eccentric
				add_trait_force_tooltip = stubborn
			}
		}
	}
}

ancestor_veneration.0114 = { # Gorin I, Discoverer of Nordinbad
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0114.t
	desc = ancestor_veneration.0114.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = wilderness_mountains }
	trigger = {
		game_start_date >= 6622.2.2 # Dáin I and his son Frór must be dead!
	}
	right_portrait = {
		character = character:lineofdurin75
		animation = personality_content
		animate_if_dead = yes
	}
	left_portrait = {
        character = character:linegorin0
        animation = thinking
		animate_if_dead = yes
    }
	lower_right_portrait = {
		character = character:lineofdurin80
	}
	lower_center_portrait = {
		character = character:lineofdurin79
	}
	lower_left_portrait = {
		character = character:lineofdurin74
	}
	cooldown = { years = 2 }
	option = { # His courage endures in our hearts and stone.
		name = ancestor_veneration.0114.a
		add_piety = medium_piety_gain
		random = {
			chance = 25
			add_martial_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = cynical
			}		
			random = {
				chance = 33
				remove_trait = cynical
				add_trait_force_tooltip = zealous
			}
		}
	}
	option = { # Gorin was a fool to settle in this forsaken place.
		name = ancestor_veneration.0114.b
		add_prestige = medium_prestige_gain
		random = {
			chance = 25
			add_learning_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = humble
			}		
			random = {
				chance = 33
				remove_trait = humble
				add_trait_force_tooltip = arrogant
			}
		}
	}
}

ancestor_veneration.0115 = { # Boic I Bravesoul
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0115.t
	desc = ancestor_veneration.0115.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = durins_bane }
	override_effect_2d = {
		reference = smoke
	}
	right_portrait = {
		character = character:lineofbravesoul7
		animation = writing
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofbravesoul1
		animation = personality_honorable
		animate_if_dead = yes
	}
	left_portrait = {
        character = character:lineofbravesoul9
        animation = interested
		animate_if_dead = yes
    }
	cooldown = { years = 2 }
	option = { # May Boic's bravery shape our path.
		name = ancestor_veneration.0115.a
		random = {
			chance = 33
			add_martial_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = craven
			}		
			random = {
				chance = 33
				remove_trait = craven
				add_trait_force_tooltip = brave
			}
		}
	}
	option = { # May we match his descendant's cunning in crafting legacy.
		name = ancestor_veneration.0115.b
		random = {
			chance = 33
			add_intrigue_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = lazy
			}		
			random = {
				chance = 33
				remove_trait = lazy
				add_trait_force_tooltip = ambitious
			}
		}
	}
}

ancestor_veneration.0116 = { # Róa, the Raven Keeper
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0116.t
	desc = {
		desc = ancestor_veneration.0116.a.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					game_start_date >= 4823.1.9 # Raven Hill was first settled by the line of Viglund
				}
				desc =  ancestor_veneration.0116.desc.erebor.settled
			}
		}
		desc = ancestor_veneration.0116.b.desc
	}
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = wilderness_forest_deep }
	center_portrait = {
		character = character:lineofroa # the Raven Keeper
		animation = personality_compassionate
		animate_if_dead = yes
	}
	cooldown = { years = 2 }
	option = { # She proved diplomacy can cross even wings and winds.
		name = ancestor_veneration.0116.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # All knowledge begins with listening.
		name = ancestor_veneration.0116.b
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = impatient
			}		
			random = {
				chance = 33
				remove_trait = impatient
				add_trait_force_tooltip = patient
			}
		}
	}
}

ancestor_veneration.0117 = { # Uni I the River-Seeker of house Ubnan, founder of the tradeport of Kheledûl
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0117.t
	desc = ancestor_veneration.0117.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = docks_tribal }
	trigger = {
		game_start_date >= 6258.11.5 # Uni the River-Seeker must be dead!
	}
	right_portrait = {
        character = character:lineofdurin74
        animation = disbelief
		animate_if_dead = yes
    }
	center_portrait = {
        character = character:lineofuni19
        animation = interested
		animate_if_dead = yes	
    }
	left_portrait = {
		character = character:lineofdurinVI
		animation = dead
		animate_if_dead = yes
	}
	cooldown = { years = 2 }
	option = { # The water was never ours to tame. Let our kin remain bound to stone.
		name = ancestor_veneration.0117.a
		random = {
			chance = 25
			if = {
				limit = { has_trait = cavern_commander }
				add_trait_xp = {
					trait = cavern_commander
					value = 20
				}
			}
			else = { add_trait =  cavern_commander }
		}	
	}
	option = { # His was a noble pursuit, though odd it still remains.
		name = ancestor_veneration.0117.b
		add_stewardship_lifestyle_xp = 500
	}
	option = { # He was right! A Dwarf's place is with the water!
		name = ancestor_veneration.0117.c
		add_stewardship_lifestyle_perk_points = 1
		trigger = {
			has_trait = eccentric
		}
		if = {
			limit = {
				has_trait = eccentric
			}
			add_character_modifier = drenchbeard
		}
	}	
}

ancestor_veneration.0118 = { # Vighar Roadwalker
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0118.t
	desc = ancestor_veneration.0118.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = wilderness_forest }
	trigger = {
		game_start_date >= 5463.3.3 # Vighar Roadwalker must be dead!
	}
	right_portrait = {
        character = character:linegruni11
        animation = admiration
		animate_if_dead = yes
    }
	center_portrait = {
        character = character:lineviglund5
        animation = survey
		animate_if_dead = yes	
    }
	left_portrait = {
		character = character:lineofdurin64
		animation = interested
		animate_if_dead = yes
	}
	cooldown = { years = 2 }
	option = { # His dedication and labour stand as an example to others.
		name = ancestor_veneration.0118.a
		if = {
			limit = {
				has_trait = lazy
			}		
			random = {
				chance = 33
				remove_trait = lazy
				add_trait_force_tooltip = diligent
			}
		}
		if = {
			limit = { has_dlc_feature = wandering_nobles }
			random = {
				chance = 25
				add_wanderer_lifestyle_perk_points = 1
			}
		}
		else = {
			random = {
				chance = 25
				add_learning_lifestyle_perk_points = 1
			}
		}
		add_piety = medium_piety_gain
	}
	option = { # Maintaining roads? Hardly the height of a Dwarf's ambition.
		name = ancestor_veneration.0118.b
		if = {
			limit = {
				has_trait = content
			}		
			random = {
				chance = 33
				remove_trait = content
				add_trait_force_tooltip = ambitious
			}
		}
		add_prestige = medium_prestige_gain
		random = {
			chance = 25
			add_stewardship_lifestyle_perk_points = 1
		}
	}
}

ancestor_veneration.0119 = { # Lóni the Turncoat
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0119.t
	desc = ancestor_veneration.0119.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = market_dwarven }
	trigger = {
		game_start_date >= 5481.9.21 # Lóni the Turncoat must be dead!
	}
	right_portrait = {
        character = character:lineofdurin64
        animation = war_defender
		animate_if_dead = yes
	}
	center_portrait = {
    	character = character:lineofdurin641
        animation = personality_dishonorable
		animate_if_dead = yes
    }
	left_portrait = {
		character = character:lineofurdak23
		animation = disapproval
		animate_if_dead = yes
    }
	lower_center_portrait = {
		character = character:lineofdurin62
	}
	cooldown = { years = 2 }
	option = { # His deceit turned to folly. Let his name be a warning.
		name = ancestor_veneration.0119.a
		if = {
			limit = {
				has_trait = arbitrary
			}		
			random = {
				chance = 33
				remove_trait = arbitrary
				add_trait_force_tooltip = just
			}
		}
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}
	}
	option = { # His pride cost him everything — but his ambition was praiseworthy.
		name = ancestor_veneration.0119.b
		add_piety = -200
		if = {
			limit = {
				has_trait = content
			}		
			random = {
				chance = 33
				remove_trait = content
				add_trait_force_tooltip = ambitious
			}
		}
		add_intrigue_lifestyle_perk_points = 1
	}
}

ancestor_veneration.0120 = { # Regin, the Ram-Rider
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0120.t
	desc = ancestor_veneration.0120.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = wilderness_mountains }
	right_portrait = {
        character = character:lineofmorthain33
        animation = thinking
		animate_if_dead = yes
    }
	center_portrait = {
        character = character:lineofregin
        animation = flirtation
		animate_if_dead = yes
    }
	left_portrait = {
        character = character:linebori15a
        animation = love
		animate_if_dead = yes
    }
	cooldown = { years = 2 }
	option = { # May every rider's bond echo Regin's fearless spirit.
		name = ancestor_veneration.0120.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # May every ram's charge honour Regin's wild courage.
		name = ancestor_veneration.0120.b
		random = {
			chance = 50
			add_martial_skill = 1
		}
	}
}

################################
# FIREBEARD ANCESTORS
# 0210-0299
# by Jagua
################################

ancestor_veneration.0210 = { # Telchar of Nogrod, creator of Narsil, Angrist, and the Dragon-helm of Dor-lómin, trained by Gamil Zirak
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0210.t
	desc = ancestor_veneration.0210.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = market_dwarven }
	override_effect_2d = {
		reference = legend_glow
	}
	trigger = {
		game_start_date >= 4033.7.12 # Elendil must be dead!
	}
	immediate = {
		if = {
			limit = { any_living_character = { any_artifact = { has_variable = dragon_helm_of_dor_lomin } } }
			random_living_character = {
				limit = { any_artifact = { has_variable = dragon_helm_of_dor_lomin } }
				random_artifact = {
					limit = { has_variable = dragon_helm_of_dor_lomin }
					save_scope_as = dragon_helm_of_dor_lomin
				}
			}
		}
		else = {
			hidden_effect = {
				character:k_wastelands_holder = {
					create_artifact_dragon_helm_of_dor_lomin_effect = { OWNER = this }
					scope:newly_created_artifact = { save_scope_as = dragon_helm_of_dor_lomin }
				}
			}
		}
		if = {
			limit = { exists = global_var:anduril_reforged }
			if = {
				limit = { any_living_character = { any_artifact = { has_variable = anduril } } }
				random_living_character = {
					limit = { any_artifact = { has_variable = anduril } }
					random_artifact = {
						limit = { has_variable = anduril }
						save_scope_as = shards_of_narsil
					}
				}
			}
			else = {
				hidden_effect = {
					character:k_wastelands_holder = {
						create_artifact_anduril_effect = { OWNER = this }
						scope:newly_created_artifact = { save_scope_as = shards_of_narsil }
					}
				}
			}
		}
		else = {
			if = {
				limit = { any_living_character = { any_artifact = { has_variable = shards_of_narsil } } }
				random_living_character = {
					limit = { any_artifact = { has_variable = shards_of_narsil } }
					random_artifact = {
						limit = { has_variable = shards_of_narsil }
						save_scope_as = shards_of_narsil
					}
				}
			}
			else = {
				hidden_effect = {
					character:k_wastelands_holder = {
						create_artifact_shards_of_narsil_effect = { OWNER = this }
						scope:newly_created_artifact = { save_scope_as = shards_of_narsil }
					}
				}
			}
		}
	}
	right_portrait = {
		character = character:lineofdwalin5
		animation = war_defender
		animate_if_dead = yes
	}
	center_portrait = {
        character = character:lineoftelchar1
        animation = war_attacker
		animate_if_dead = yes
    }
	left_portrait = {
        character = character:lineofgamilzirak
        animation = personality_honorable
		animate_if_dead = yes
    }
	lower_center_portrait = {
		character = character:lineofbeor32
	}
	artifact = {
		target = scope:dragon_helm_of_dor_lomin
		position = lower_left_portrait
		trigger = { exists = scope:dragon_helm_of_dor_lomin }
	}
	artifact = {
		target = scope:shards_of_narsil
		position = lower_right_portrait
		trigger = { exists = scope:shards_of_narsil }
	}
	cooldown = { years = 2 }
	option = { # Telchar was a legendary craftsman above all.
		name = ancestor_veneration.0210.a
		random = {
			chance = 33
			add_crafting_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			if = {
				limit = { has_trait = lifestyle_artifact_crafting }
				add_trait_xp = {
					trait = lifestyle_artifact_crafting
					track = weapon_smith
					value = 20
				}
			}
			else = { add_trait = lifestyle_artifact_crafting }
		}
	}
	option = { # Telchar's legacy is one of great victories first and foremost.
		name = ancestor_veneration.0210.b
		random = {
			chance = 33
			add_martial_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			if = {
				limit = { has_trait = cavern_commander }
				add_trait_xp = {
					trait = cavern_commander
					value = 20
				}
			}
			else = { add_trait = cavern_commander }
		}
	}
	option = { # Telchar understood that knowledge precedes mastery.
		name = ancestor_veneration.0210.c
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			if = {
				limit = { has_trait = lifestyle_mystic }
				add_trait_xp = {
					trait = lifestyle_mystic
					value = 20
				}
			}
			else = { add_trait = lifestyle_mystic }
		}
	}
	after = {
		hidden_effect = {
			if = {
				limit = { any_living_character = { any_artifact = { has_variable = dragon_helm_of_dor_lomin } } }
				random_living_character = {
					limit = { any_artifact = { has_variable = dragon_helm_of_dor_lomin } }
				}
			}
			else = {
				limit = { character:k_wastelands_holder = { any_artifact = { this = scope:dragon_helm_of_dor_lomin } } }
				destroy_artifact ?= scope:dragon_helm_of_dor_lomin
			}
		}
		hidden_effect = {
			if = {
				limit = { any_living_character = { any_artifact = { has_variable = shards_of_narsil } } }
				random_living_character = {
					limit = { any_artifact = { has_variable = shards_of_narsil } }
				}
			}
			else = {
				limit = { character:k_wastelands_holder = { any_artifact = { this = scope:shards_of_narsil } } }
				destroy_artifact ?= scope:shards_of_narsil
			}
		}
	}
}

ancestor_veneration.0211 = { # Naugladur, king of Nogrod who coveted the Nauglamír for himself
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0211.t
	desc = ancestor_veneration.0211.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = eregion_ruins }
	right_portrait = {
        character = character:lineofbeor32
        animation = marshal
		animate_if_dead = yes
    }
	center_portrait = {
        character = character:lineofuri3
        animation = aggressive_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_bronze_outfit }
		}
    }
	left_portrait = {
		character = character:lineofelwe1
		animation = disgust
		animate_if_dead = yes
	}
	lower_right_portrait = {
		character = character:lineofdwalinII
	}
	lower_center_portrait = {
		character = character:lineofelwe2
	}
	lower_left_portrait = {
		character = character:lineofkhathzaibriz1
	}
	cooldown = { years = 2 }
	option = { # Those who seek too much may lose all they hold dear.
		name = ancestor_veneration.0211.a
		if = {
			limit = {
				has_trait = arrogant
			}		
			random = {
				chance = 33
				remove_trait = arrogant
				add_trait_force_tooltip = humble
			}
		}
		add_piety = medium_piety_gain
		random = {
			chance = 25
			add_learning_lifestyle_perk_points = 1
		}
	}
	option = { # The strong are entitled to take what they deem worthy.
		name = ancestor_veneration.0211.b
		if = {
			limit = {
				has_trait = humble
			}		
			random = {
				chance = 33
				remove_trait = humble
				add_trait_force_tooltip = arrogant
			}
		}
		add_prestige = medium_prestige_gain
		random = {
			chance = 25
			add_martial_lifestyle_perk_points = 1
		}
	}
}

ancestor_veneration.0212 = { # Khathzâ, the Watcher
	type = character_event
 	window = visit_settlement_window
	title = ancestor_veneration.0212.t
	desc = ancestor_veneration.0212.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = eregion_ruins }
	right_portrait = {
        character = character:lineofuri5
        animation = personality_vengeful
		animate_if_dead = yes
    }
	center_portrait = {
        character = character:lineofkhathzaibriz1
        animation = personality_cynical
		animate_if_dead = yes
    }
	left_portrait = {
        character = character:lineofuri3
        animation = aggressive_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_bronze_outfit }
		}
    }
	lower_right_portrait = {
		character = character:lineofhersarbinshmur1
	}
	lower_center_portrait = {
		character = character:lineofelwe1
	}
	lower_left_portrait = {
		character = character:secondlineofuri1
	}
	cooldown = { years = 2 }
	option = { # Dwarves should not shun those with other beliefs and customs.
		name = ancestor_veneration.0212.a
		add_diplomacy_lifestyle_xp = 500
		if = {
			limit = {
				has_trait = shy
			}		
			random = {
				chance = 33
				remove_trait = shy
				add_trait_force_tooltip = gregarious
			}
		}
	}
	option = { # Khathzâ was right, outsiders cannot be trusted!
		name = ancestor_veneration.0212.b
		add_learning_lifestyle_perk_points = 1
		if = {
			limit = {
				has_trait = cynical
			}		
			random = {
				chance = 33
				remove_trait = cynical
				add_trait_force_tooltip = zealous
			}
		}
		add_character_flag = {
 			flag = delay_player_faith_conversion_notification_event
 			weeks = 1
 		}
 		set_character_faith_with_conversion = faith:faith_firebeards
	}
}

################################
# BROADBEAM ANCESTORS
# 0310-0399
# by Jagua
################################

ancestor_veneration.0310 = { # Azaghâl, father of Dwálin II, friend of Maedhros, Dwarf-King of Belegost
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0310.t
	desc = ancestor_veneration.0310.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = gondolin_fall }
	widgets = {
		widget = {
		gui = "event_window_widget_vfx_heavy_smoke"
		container = "foreground_shader_vfx_container"
		}
	}
	immediate = {
		if = {
			limit = { any_living_character = { any_artifact = { has_variable = dragon_helm_of_dor_lomin } } }
			random_living_character = {
				limit = { any_artifact = { has_variable = dragon_helm_of_dor_lomin } }
				random_artifact = {
					limit = { has_variable = dragon_helm_of_dor_lomin }
					save_scope_as = dragon_helm_of_dor_lomin
				}
			}
		}
		else = {
			hidden_effect = {
				character:k_wastelands_holder = {
					create_artifact_dragon_helm_of_dor_lomin_effect = { OWNER = this }
					scope:newly_created_artifact = { save_scope_as = dragon_helm_of_dor_lomin }
				}
			}
		}
    }
	right_portrait = {
        character = character:lineoffeanor1
        animation = marshal
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { elven_war_noldor no_headgear }
		}
    }
	center_portrait = {
		character = character:lineofdwalin5
        animation = aggressive_dagger
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_gold_outfit }
		}
    }
	left_portrait = {
		character = character:lineofdwalinII
        animation = personality_forgiving
		animate_if_dead = yes
    }
	lower_right_portrait = {
        character = character:lineoftelchar1
    }
	artifact = {
		target = scope:dragon_helm_of_dor_lomin
		position = lower_center_portrait
		trigger = { exists = scope:dragon_helm_of_dor_lomin }
	}
	lower_left_portrait = {
        character = character:lineofdwalin7
    }
	cooldown = { years = 2 }
	option = { # Azaghâl's valour shall inspire our own deeds.
		name = ancestor_veneration.0310.a
		random = {
			chance = 50
			add_martial_skill = 1
		}
	}
	option = { # As he forged bonds, so too shall we.
		name = ancestor_veneration.0310.b
		random = {
			chance = 50
			add_learning_skill = 1
		}
	}
	option = { # Azaghâl stood tall in his age. I shall stand taller in mine.
		name = ancestor_veneration.0310.c
		if = {
			limit = {
				has_trait = humble
			}		
			random = {
				chance = 33
				remove_trait = humble
				add_trait_force_tooltip = arrogant
			}
		}
		add_prestige = medium_prestige_gain
		add_piety = -200
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
	}
	after = {
		hidden_effect = {
			if = {
				limit = { character:k_wastelands_holder = { any_artifact = { this = scope:dragon_helm_of_dor_lomin } } }
				destroy_artifact ?= scope:dragon_helm_of_dor_lomin
			}
		}
	}
}

ancestor_veneration.0311 = { # Bodruith, son of Azaghâl and brother of Dwálin II
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0311.t
	desc = ancestor_veneration.0311.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = eregion_ruins }
	right_portrait = {
        character = character:lineofuri3
        animation = aggressive_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_bronze_outfit }
		}
    }
	center_portrait = {
        character = character:lineofdwalin7
        animation = personality_cynical
		animate_if_dead = yes
    }
	left_portrait = {
		character = character:lineofdwalinII
		animation = personality_forgiving
		animate_if_dead = yes
	}
	lower_right_portrait = {
		character = character:secondlineofdwalin1
	}
	lower_center_portrait = {
		character = character:lineofelwe1
	}
	lower_left_portrait = {
		character = character:lineofuri5
	}
	cooldown = { years = 2 }
	option = { # He worked to preserve the crucial ties between brother-clans.
		name = ancestor_veneration.0311.a
		if = {
			limit = {
				has_trait = arrogant
			}		
			random = {
				chance = 33
				remove_trait = arrogant
				add_trait_force_tooltip = humble
			}
		}
		random = {
			chance = 25
			add_diplomacy_skill = 1
		}
		random = {
			chance = 25
			add_diplomacy_lifestyle_perk_points = 1
		}
	}
	option = { # He urged his kin to fight for what he believed was right.
		name = ancestor_veneration.0311.b
		if = {
			limit = {
				has_trait = humble
			}		
			random = {
				chance = 33
				remove_trait = humble
				add_trait_force_tooltip = arrogant
			}
		}
		random = {
			chance = 25
			add_martial_skill = 1
		}
		random = {
			chance = 25
			add_martial_lifestyle_perk_points = 1
		}
	}
}

ancestor_veneration.0312 = { # Skorgrím Dourhand, betrayer who stole the Ring of the Firebeards from Úri V and Ring of the Broadbeams from Dwálin V
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0312.t
	desc = ancestor_veneration.0312.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = forodwaith }
	trigger = {
		game_start_date >= 5408.10.13 # Skorgrím Dourhand must be dead!
	}
	right_portrait = {
		character = character:lineofdwalinV
        animation = disbelief
		animate_if_dead = yes
	}
	center_portrait = {
        character = character:lineofdourhand17
        animation = beg
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_gold_outfit }
		}
    }
	left_portrait = {
		character = character:lineofuri67
        animation = disapproval
		animate_if_dead = yes
    }
	immediate = {
		random_artifact = {
			limit = { has_variable = ring_of_firebeards }
			save_scope_as = ring_of_firebeards
		}
		random_artifact = {
			limit = { has_variable = ring_of_broadbeams }
			save_scope_as = ring_of_broadbeams
		}
	}
	artifact = {
		target = scope:ring_of_firebeards
		position = lower_left_portrait
		trigger = { exists = scope:ring_of_firebeards }
	}
	artifact = {
		target = scope:ring_of_broadbeams
		position = lower_right_portrait
		trigger = { exists = scope:ring_of_broadbeams }
	}
	lower_center_portrait = {
		character = character:nazgul1
	}
	cooldown = { years = 2 }
	option = { # True greatness is earned, not stolen.
		name = ancestor_veneration.0312.a
		if = {
			limit = {
				has_trait = arbitrary
			}		
			random = {
				chance = 33
				remove_trait = arbitrary
				add_trait_force_tooltip = just
			}
		}
		random = {
			chance = 33
			add_diplomacy_lifestyle_perk_points = 1
		}
	}
	option = { # Though his schemes failed, his cunning shaped the course of history.
		name = ancestor_veneration.0312.b
		if = {
			limit = {
				has_trait = honest
			}		
			random = {
				chance = 33
				remove_trait = honest
				add_trait_force_tooltip = deceitful
			}
		}
		random = {
			chance = 33
			add_intrigue_lifestyle_perk_points = 1
		}
	}
}

ancestor_veneration.0313 = { # Eldran I, the First Greybeard, who founded the great monastery of Zelemabkân atop Mount Dolmed
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0313.t
	desc = ancestor_veneration.0313.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = wilderness_mountains }
	override_effect_2d = {
		reference = legend_glow
	}
	right_portrait = {
        character = character:lineofdwalinI
        animation = dead
		animate_if_dead = yes
    }
	center_portrait = {
        character = character:lineofeldran1
        animation = personality_zealous
		animate_if_dead = yes	
    }
	left_portrait = {
		character = character:lineofuriI
		animation = dead
		animate_if_dead = yes
	}
	cooldown = { years = 2 }
	option = { # One day, we shall walk the thousand steps in his memory.
		name = ancestor_veneration.0313.a
		if = {
			limit = {
				has_trait = cynical
			}		
			random = {
				chance = 33
				remove_trait = zealous
				add_trait_force_tooltip = zealous
			}
		}
		add_piety = medium_piety_gain
		random = {
			chance = 25
			add_learning_lifestyle_perk_points = 1
		}
	}
	option = { # Hard-earned mastery of arms may prove as valuable as any lore.
		name = ancestor_veneration.0313.b
		add_prestige = medium_prestige_gain
		random = {
			chance = 25
			add_martial_lifestyle_perk_points = 1
		}
	}
}

################################
# IRONFIST ANCESTORS
# 0410-0499
# by Jagua
################################

ancestor_veneration.0410 = { # Ôrn, the Avaricious
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0410.t
	desc = ancestor_veneration.0410.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = barad_dur }
	trigger = {
		game_start_date >= 4339.10.11 # The Ring of the Ironfists must have been destroyed already
	}
	right_portrait = {
		character = character:lineofsindri52
		animation = personality_vengeful
		animate_if_dead = yes
	}
	center_portrait = {
    	character = character:lineofsindri102
       	animation = spymaster
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
    }
	left_portrait = {
    	character = character:lineofdurinIV
       	animation = anger
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
    }
	immediate = {
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_ring_of_ironfists_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_ironfists }
			}
		}
	}
	artifact = {
		target = scope:ring_of_ironfists
		position = lower_left_portrait
		trigger = { exists = scope:ring_of_ironfists }
	}
	lower_center_portrait = {
		character = character:lineofsauron
	}
	lower_right_portrait = {
		character = character:lineofsindri104
	}
	cooldown = { years = 2 }
	option = { # His fate warns us: no coin redeems a soul bartered to darkness.
		name = ancestor_veneration.0410.a
		random = {
			chance = 25
			add_martial_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			add_martial_skill = 1
		}
	}
	option = { # Let memory keep us from the path his pride once paved.
		name = ancestor_veneration.0410.b
		random = {
			chance = 25
			add_intrigue_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			add_intrigue_skill = 1
		}
	}
	after = {
		hidden_effect = {
			destroy_artifact ?= scope:ring_of_ironfists
		}
	}
}

ancestor_veneration.0411 = { # Thrîs, the Peacemaker
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0411.t
	desc = ancestor_veneration.0411.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = kitchen_dwarven }
	right_portrait = {
		character = character:lineofsindri0c
		animation = personality_vengeful
		animate_if_dead = yes
	}
	center_portrait = {
    	character = character:lineofsindri0csister
        animation = personality_callous
		animate_if_dead = yes
    }
	left_portrait = {
     	character = character:lineofdhrim1
        animation = war_attacker
		animate_if_dead = yes
    }
	lower_right_portrait = {
		character = character:lineofsindri0cbrother1
	}
	lower_center_portrait = {
		character = character:lineofthulin0cbrother 
	}
	lower_left_portrait = {
		character = character:lineofsindri0cbrother2
	}
	cooldown = { years = 2 }
	option = { # Her reign proved that peace, though bitter, can bind what pride has broken.
		name = ancestor_veneration.0411.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # From her sorrow we may learn what pride refused to teach.
		name = ancestor_veneration.0411.b
		add_learning_lifestyle_xp = 500
	}
}

################################
# STIFFBEARD ANCESTORS
# 0510-0599
# by Jagua
################################

ancestor_veneration.0510 = { # Hevdrok, the Hero
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0510.t
	desc = ancestor_veneration.0510.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = smaug_destruction }
	override_effect_2d = {
		reference = smoke
	}
	center_portrait = {
		character = character:lineofhevdrok
		animation = marshal_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
	}
	cooldown = { years = 2 }
	option = { # In valour and strength, our legends are born.
		name = ancestor_veneration.0510.a
		if = {
			limit = {
				has_trait = craven
			}		
			random = {
				chance = 33
				remove_trait = craven
				add_trait_force_tooltip = brave
			}
		}
		random = {
			chance = 33
			add_martial_lifestyle_perk_points = 1
		}
	}
	option = { # He struck unseen where others could not.
		name = ancestor_veneration.0510.b
		random = {
			chance = 33
			add_intrigue_lifestyle_perk_points = 1
		}
	}
}

################################
# BLACKLOCK ANCESTORS
# 0610-0699
# by Jagua
################################

ancestor_veneration.0610 = { # Rôn, the Exile
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0610.t
	desc = ancestor_veneration.0610.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = corridor_dwarven }
	trigger = {
		game_start_date >= 6538.5.5 # Rôn the Exile must be dead!
	}
	right_portrait = {
		character = character:secondlineofthrar73
		animation = personality_dishonorable
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofbarukodlig1
		animation = marshal_axe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { 
				dwarf_war_eastern_outfit 
				dwarf_war_blacklock_headgear
			}
		}
	}
	left_portrait = {
      	character = character:secondlineofthrar78
        animation = spymaster
		animate_if_dead = yes
    }
	lower_right_portrait = {
		character = character:secondlineofthrar75
	}
	lower_center_portrait = {
		character = character:lineofbarukodlig3
	}
	lower_left_portrait = {
		character = character:lineofsauron
	}
	cooldown = { years = 2 }
	option = { # The axe remembers when the blood forgets.
		if = {
			limit = {
				has_trait = forgiving
			}		
			random = {
				chance = 33
				remove_trait = forgiving
				add_trait_force_tooltip = vengeful
			}
		}
		name = ancestor_veneration.0610.a
		random = {
			chance = 50
			add_martial_skill = 1
		}
	}
	option = { # Not all who strayed were beyond redemption.
		if = {
			limit = {
				has_trait = vengeful
			}		
			random = {
				chance = 33
				remove_trait = vengeful
				add_trait_force_tooltip = forgiving
			}
		}
		name = ancestor_veneration.0610.b
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
	}
}

ancestor_veneration.0611 = { # Gorovôd, the Goblinslayer
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0611.t
	desc = ancestor_veneration.0611.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = mining_activity }
	right_portrait = {
		character = character:lineofthrarIII
		animation = marshal_shield
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_eastern_outfit }
		}
	}
	center_portrait = {
		character = character:lineofgorovod3
		animation = celebrate_sword
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { 
				dwarf_war_eastern_outfit 
				dwarf_war_blacklock_headgear
			}
		}
	}
	left_portrait = {
      	character = character:lineofgorovod4
        animation = fear
		animate_if_dead = yes
    }
	cooldown = { years = 2 }
	option = { # Some legacies are carved in blood, not stone.
		if = {
			limit = {
				has_trait = forgiving
			}		
			random = {
				chance = 33
				remove_trait = forgiving
				add_trait_force_tooltip = vengeful
			}
		}
		name = ancestor_veneration.0611.a
		add_martial_lifestyle_xp = 500
		random = {
			chance = 25
			if = {
				limit = { has_trait = reckless }
				add_trait_xp = {
					trait = reckless
					value = 20
				}
			}
			else = { add_trait = reckless }
		}
	}
	option = { # His fury bought peace where none dared seek it.
		if = {
			limit = {
				has_trait = vengeful
			}		
			random = {
				chance = 33
				remove_trait = vengeful
				add_trait_force_tooltip = forgiving
			}
		}
		name = ancestor_veneration.0611.b
		add_diplomacy_lifestyle_xp = 500
	}
}

################################
# STONEFOOT ANCESTORS
# 0710-0799
# by Jagua
################################

ancestor_veneration.0710 = { # Zabad, the Jewelwright
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0710.t
	desc = ancestor_veneration.0710.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = market_dwarven }
	override_effect_2d = {
		reference = legend_glow
	}
	right_portrait = {
		character = character:lineofbavorI
		animation = personality_content
		animate_if_dead = yes
	}
	center_portrait = {
      	character = character:lineofzabad
        animation = admiration
		animate_if_dead = yes
    }
	left_portrait = {
      	character = character:lineofnurwe2
        animation = personality_content
		animate_if_dead = yes
    }
	cooldown = { years = 2 }
	option = { # Let our hands honour his memory in craft.
		name = ancestor_veneration.0710.a
		random = {
			chance = 33
			add_crafting_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			if = {
				limit = { has_trait = lifestyle_artifact_crafting }
				add_trait_xp = {
					trait = lifestyle_artifact_crafting
					track = jewel_smith
					value = 20
				}
			}
			else = { add_trait = lifestyle_artifact_crafting }
		}
	}
	option = { # His treasures shall not be forgotten.
		name = ancestor_veneration.0710.b
		random = {
			chance = 50
			add_stewardship_lifestyle_perk_points = 1
		}
	}
}

ancestor_veneration.0711 = { # Bhofôr, the Bridgemaster
	type = character_event
	window = visit_settlement_window
	title = ancestor_veneration.0711.t
	desc = ancestor_veneration.0711.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = corridor_dwarven }
	right_portrait = {
		character = character:lineofbavor16
		animation = personality_content
		animate_if_dead = yes
	}
	center_portrait = {
      	character = character:lineofbhofor
        animation = war_attacker
		animate_if_dead = yes
    }
	left_portrait = {
     	character = character:lineofthrar21
        animation = personality_honorable
		animate_if_dead = yes
    }
	lower_right_portrait = {
		character = character:lineofbavorII
	}
	lower_center_portrait = {
		character = character:thirdlineofthrar1
	}
	lower_left_portrait = {
		character = character:lineofthrarII
	}
	cooldown = { years = 2 }
	option = { # Stone may weather, but fellowship endures.
		name = ancestor_veneration.0711.a
		random = {
			chance = 33
			add_diplomacy_lifestyle_perk_points = 1
		}
	}
	option = { # Let our next work rise as proudly as Bhofôr's bridge.
		name = ancestor_veneration.0711.b
		random = {
			chance = 33
			add_crafting_lifestyle_perk_points = 1
		}
	}
}
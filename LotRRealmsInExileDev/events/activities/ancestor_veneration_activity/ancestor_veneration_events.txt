 # Events for Ancestor Veneration

namespace = ancestor_veneration

################################
# SELECT AREA TO STUDY
# 0001-0099
# by Jagua
################################

# Period selection event
ancestor_veneration.0001 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0001.t
	desc = ancestor_veneration.0001.desc
	theme = ancestor_veneration_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	cooldown = { days = 1 }

	immediate = {
		# Stop characters from planning multiple activities at once.
		add_character_flag = {
			flag = planning_an_activity
			days = 30
		}
	}
	
	option = { # Longbeards
		trigger = {
			scope:activity.activity_location = {
				OR = {
					unique_human_archives_trigger = yes
					unique_elven_archives_trigger = yes
				}
			}
		}
		name = ancestor_veneration.0001.a
		trigger_event = ancestor_veneration.0010
	}

	option = { # Firebeards
		trigger = {
			scope:activity.activity_location = {
				OR = {
					unique_human_archives_trigger = yes
					unique_elven_archives_trigger = yes
				}
			}
		}
		name = ancestor_veneration.0001.b
		trigger_event = ancestor_veneration.0020
	}

	option = { # Broadbeams
		name = ancestor_veneration.0001.c
		if = {
			limit = { scope:activity.activity_location = { 
				OR = {
					geographical_region = middleearth_harad 
					geographical_region = middleearth_uttersouth
				} 
			}}
			trigger_event = ancestor_veneration.0030
		}
		else = { trigger_event = ancestor_veneration.0031 }
	}
	
	option = { # Ironfists
		name = ancestor_veneration.0001.d
		trigger = { game_start_date > 4033 } #TA needs to have started
		trigger_event = ancestor_veneration.0040
	}

	option = { # Stiffbeards
		name = ancestor_veneration.0001.c
		if = {
			limit = { scope:activity.activity_location = { 
				OR = {
					geographical_region = middleearth_harad 
					geographical_region = middleearth_uttersouth
				} 
			}}
			trigger_event = ancestor_veneration.0030
		}
		else = { trigger_event = ancestor_veneration.0031 }
	}
	
	option = { # Blacklocks
		name = ancestor_veneration.0001.d
		trigger = { game_start_date > 4033 } #TA needs to have started
		trigger_event = ancestor_veneration.0040
	}

	option = { # Stonefoots
		name = ancestor_veneration.0001.c
		if = {
			limit = { scope:activity.activity_location = { 
				OR = {
					geographical_region = middleearth_harad 
					geographical_region = middleearth_uttersouth
				} 
			}}
			trigger_event = ancestor_veneration.0030
		}
		else = { trigger_event = ancestor_veneration.0031 }
	}
	
	option = { # Random Dwarven Ancestors
		name = ancestor_veneration.0001.d
		trigger = { game_start_date > 4033 } #TA needs to have started
		trigger_event = ancestor_veneration.0040
	}
}

# Years of the Trees topic selection
ancestor_veneration.0010 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0010.t
	desc = ancestor_veneration.0010.desc
	theme = ancestor_veneration_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	
	option = { # The Sundering of the Elves
		name = ancestor_veneration.0010.a
		trigger_event = {
			id = ancestor_veneration.1001
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:sundering_elves
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:sundering_elves
				}
				set_variable = {
					name = book_subject
					value = flag:diplomacy
				}
			}
		}	
	}
	option = { # Fëanor and the Disquiet of the Ñoldor
		name = ancestor_veneration.0010.b
		trigger_event = {
			id = ancestor_veneration.1011
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:disquiet_noldor
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:disquiet_noldor
				}
				set_variable = {
					name = book_subject
					value = flag:stewardship
				}
			}
		}
	}
	option = { # The First Kinslaying and the Exile of the Ñoldor
		name = ancestor_veneration.0010.c
		trigger_event = {
			id = ancestor_veneration.1021
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:kinslaying
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:kinslaying
				}
				set_variable = {
					name = book_subject
					value = flag:intrigue
				}
			}
		}
	}

	option = { # On second thoughts...
		name = ancestor_veneration.0010.d
		trigger_event = {
			id = ancestor_veneration.0001
			days = 1
		}
	}
}

# First Age topic selection
ancestor_veneration.0020 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0020.t
	desc = ancestor_veneration.0020.desc
	theme = ancestor_veneration_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	
	option = { # The Siege of Angband and the Realms of Beleriand
		name = ancestor_veneration.0020.a
		trigger_event = {
			id = ancestor_veneration.2001
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:angband
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:angband
				}
				set_variable = {
					name = book_subject
					value = flag:martial
				}
			}
		}
	}
	
	option = { # Beren and Lúthien
		name = ancestor_veneration.0020.b
		trigger_event = {
			id = ancestor_veneration.2011
			days = 5
		}
		custom_tooltip = {
			text = unlock_beren_legend_tt
			add_character_flag = read_beren_legend
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:luthien
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:luthien
				}
				set_variable = {
					name = book_subject
					value = flag:learning
				}
			}
		}
	}
	
	option = { # The Children of Húrin
		name = ancestor_veneration.0020.c
		trigger_event = {
			id = ancestor_veneration.2021
			days = 5
		}
		custom_tooltip = {
			text = unlock_turin_legend_tt
			add_character_flag = read_turin_legend
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:hurin
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:hurin
				}
				set_variable = {
					name = book_subject
					value = flag:martial
				}
			}
		}
	}
	
	option = { # Tuor and the Fall of Gondolin
		name = ancestor_veneration.0020.d
		trigger_event = {
			id = ancestor_veneration.2031
			days = 5
		}
		custom_tooltip = {
			text = unlock_tuor_legend_tt
			add_character_flag = read_tuor_legend
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:fall_gondolin
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:fall_gondolin
				}
				set_variable = {
					name = book_subject
					value = flag:stewardship
				}
			}
		}
	}
	
	option = { # On second thoughts...
		name = ancestor_veneration.0020.e
		trigger_event = {
			id = ancestor_veneration.0001
			days = 1
		}
	}
}

# Second Age topic selection
ancestor_veneration.0030 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0030.t
	desc = {
		first_valid = {
			desc = ancestor_veneration.0030.desc
		}
	}
	theme = ancestor_veneration_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	
	option = { # Númenor and the Elves
		name = ancestor_veneration.0030.a
		trigger_event = ancestor_veneration.0031
	}
	option = { # The colonies of Far Harad
		name = ancestor_veneration.0030.c
		trigger_event = ancestor_veneration.0032
	}	
	option = { # On second thoughts...
		name = ancestor_veneration.0030.d
		trigger_event = {
			id = ancestor_veneration.0001
			days = 1
		}
	}
}

# Númenor and the Elves topic selection
ancestor_veneration.0031 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0031.t
	desc = ancestor_veneration.0031.desc
	theme = ancestor_veneration_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	option = { # The Lost Island of Númenor
		name = ancestor_veneration.0031.a
		trigger_event = {
			id = ancestor_veneration.3001
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:numenor
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:numenor
				}
				set_variable = {
					name = book_subject
					value = flag:learning
				}
			}
		}
	}
	option = { # Of Eregion and the Rings of Power
		name = ancestor_veneration.0031.b
		trigger_event = {
			id = ancestor_veneration.3031
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:eregion
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:eregion
				}
				set_variable = {
					name = book_subject
					value = flag:learning
				}
			}
		}
	}
	option = { # The Akallabêth
		name = ancestor_veneration.0031.c
		trigger_event = {
			id = ancestor_veneration.3051
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:akallabeth
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:akallabeth
				}
				set_variable = {
					name = book_subject
					value = flag:intrigue
				}
			}
		}
	}
	option = { # The Last Alliance
		name = ancestor_veneration.0031.d
		trigger = { 
			game_start_date > 4033
			scope:activity.activity_location = {
				OR = { 
					geographical_region = middleearth_west
					geographical_region = middleearth_rhun
					geographical_region = middleearth_mordor
					geographical_region = middleearth_forodwaith
					geographical_region = middleearth_harad_near
				}
			}
		}
		trigger_event = {
			id = ancestor_veneration.3061
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:last_alliance
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:last_alliance
				}
				set_variable = {
					name = book_subject
					value = flag:diplomacy
				}
			}
		}
	}
	option = { # On second thoughts...
		name = ancestor_veneration.0031.e
		trigger = { scope:activity.activity_location = { 
				OR = {
					geographical_region = middleearth_harad 
					geographical_region = middleearth_uttersouth
				} 
			}}
		trigger_event = ancestor_veneration.0030
	}
	option = { # On second thoughts...
		name = ancestor_veneration.0031.f
		trigger = { scope:activity.activity_location = { not = { geographical_region = middleearth_harad } } }
		trigger_event = {
			id = ancestor_veneration.0001
			days = 1
		}
	}
}

# The colonies of Far Harad
ancestor_veneration.0032 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0032.t
	desc = ancestor_veneration.0032.desc
	theme = ancestor_veneration_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	
	option = { # The Foundation of Bellakar
		name = ancestor_veneration.0032.a
		trigger_event = {
			id = ancestor_veneration.3011
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:bellakar
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:bellakar
				}
				set_variable = {
					name = book_subject
					value = flag:stewardship
				}
			}
		}
	}
	option = { # The Storm-King of Ciryatanórë
		name = ancestor_veneration.0032.b
		trigger_event = {
			id = ancestor_veneration.3041
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:storm_king
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:storm_king
				}
				set_variable = {
					name = book_subject
					value = flag:martial
				}
			}
		}
	}	
	option = { # Bellakar & The Debt of Elendil
		name = ancestor_veneration.0032.c
		trigger = { game_start_date > 4033 }
		trigger_event = {
			id = ancestor_veneration.3021
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:debt_elendil
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:debt_elendil
				}
				set_variable = {
					name = book_subject
					value = flag:diplomacy
				}
			}
		}
	}
	option = { # On second thoughts...
		name = ancestor_veneration.0032.d
		trigger_event = ancestor_veneration.0030
	}
}

# Third Age topic selection
ancestor_veneration.0040 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0040.t
	desc = ancestor_veneration.0040.desc
	theme = ancestor_veneration_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	
	option = { # Of the Eothed and the Oath of Eorl
		name = ancestor_veneration.0040.a
		trigger = { 
			game_start_date > 6544
			scope:activity.activity_location = {
				OR = { 
					geographical_region = middleearth_west
					geographical_region = middleearth_rhun
					geographical_region = middleearth_mordor
					geographical_region = middleearth_forodwaith
					geographical_region = middleearth_harad_near
				}
			}
		}
		trigger_event = {
			id = ancestor_veneration.4001
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:eorl
				}
				set_variable = {
					name = book_subject
					value = flag:martial
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:eorl
				}
				set_variable = {
					name = book_subject
					value = flag:martial
				}
			}
		}
	}

	option = { # Of Narkuzîr and Berúthiel
		name = ancestor_veneration.0040.b
		trigger = { 
			NOT = { is_elf = yes }
			game_start_date > 4887
		}
		trigger_event = {
			id = ancestor_veneration.4011
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:beruthiel
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:beruthiel
				}
				set_variable = {
					name = book_subject
					value = flag:diplomacy
				}
			}
		}
	}
	
	option = { #The Tedjin Conquest and Occupation of Bellakar
		name = ancestor_veneration.0040.c
		trigger = { 
			scope:activity.activity_location = { 
				OR = {
					geographical_region = middleearth_harad 
					geographical_region = middleearth_uttersouth
				} 
			}
			game_start_date > 4963
		}
		trigger_event = {
			id = ancestor_veneration.4021
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:tedjin
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:tedjin
				}
				set_variable = {
					name = book_subject
					value = flag:martial
				}
			}
		}
	}
	
	option = { #The Kinstrife
		name = ancestor_veneration.0040.d
		trigger = { 
			scope:activity.activity_location = {
				OR = { 
					geographical_region = middleearth_west
					geographical_region = middleearth_rhun
					geographical_region = middleearth_mordor
					geographical_region = middleearth_forodwaith
					geographical_region = middleearth_harad_near
				}
			}
			game_start_date > 5480
		}
		trigger_event = {
			id = ancestor_veneration.4031
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:kinstrife
				}
				set_variable = {
					name = book_subject
					value = flag:learning
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:kinstrife
				}
				set_variable = {
					name = book_subject
					value = flag:learning
				}
			}
		}
	}
	
	option = { #The Fall of Arnor
		name = ancestor_veneration.0040.e
		trigger = { 
			scope:activity.activity_location = {
				OR = { 
					geographical_region = middleearth_west
					geographical_region = middleearth_rhun
					geographical_region = middleearth_mordor
					geographical_region = middleearth_forodwaith
					geographical_region = middleearth_harad_near
				}
			}
			game_start_date > 6008.12.24
		}
		trigger_event = {
			id = ancestor_veneration.4041
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:arnor
				}
				set_variable = {
					name = book_subject
					value = flag:intrigue
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:arnor
				}
				set_variable = {
					name = book_subject
					value = flag:intrigue
				}
			}
		}
	}

	option = { # On second thoughts...
		name = ancestor_veneration.0040.f
		trigger_event = {
			id = ancestor_veneration.0001
			days = 1
		}
	}
}

# End of studies
ancestor_veneration.0050 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0050.t
	desc = ancestor_veneration.0050.desc
	theme = ancestor_veneration_activity
	left_portrait = {
		character = root
		animation = personality_compassionate
	}
	
	immediate = {
		scope:activity = {
			add_activity_log_entry = {
				key = history_completed_log
				score = 80
				tags = { complete good }
				character = scope:host
				show_in_conclusion = yes

				# EFFECT
				disburse_history_activity_rewards = yes
			}
		}
		scope:activity = { progress_activity_phase_after = { days = 1 } }
	}
	
	option = { # End activity
		name = ancestor_veneration.0050.a
		if = {
			limit = {
				lotr_gets_nicknames_trigger = yes
			}
			if = {
				limit = {
					NOT = { is_elf = yes }
					has_trait = lifestyle_archivist
				}
				random = {
					chance = 10
					set_nickname_effect = { NICKNAME = nick_archivist }
				}
			}
			else_if = {
				limit = {
					has_trait = lifestyle_archivist
				}
				random = {
					chance = 2
					set_nickname_effect = { NICKNAME = nick_archivist }
				}
			}
		}
	}
}

# Museum Shop event
ancestor_veneration.0060 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0060.t
	desc = {
		desc = ancestor_veneration.0060.desc.intro
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:activity = {
						has_activity_option = { 
							category = special_type 
							option = ancestor_veneration_type_adunaic_propaganda
						}
					}
				}
				desc = ancestor_veneration.0060.desc.propaganda
			}
			desc = ancestor_veneration.0060.desc.standard
		}
		desc = ancestor_veneration.0060.desc.outro
	}
	theme = ancestor_veneration_activity
	left_portrait = {
		character = scope:host
		animation = happy
	}
	right_portrait = {
		character = scope:chronicler
		animation = chancellor
	}
	artifact = {
		position = lower_left_portrait
		target = scope:book_1
		trigger = { exists = scope:book_1 }
	}	
	artifact = {
		position = lower_right_portrait
		target = scope:book_2
		trigger = { exists = scope:book_2 }
	}
	
	cooldown = { weeks = 1 }
	
	immediate = {
		if = {
			limit = {
				scope:activity = {
					any_attending_character = {
						location = scope:activity.activity_location
						OR = {
							has_court_position = chronicler_court_position
							has_court_position = antiquarian_court_position
							has_council_position = councillor_court_chaplain
						}
					}
				}
			}
			scope:activity = {
				random_attending_character = {
					limit = {
						location = scope:activity.activity_location
						OR = {
							has_court_position = chronicler_court_position
							has_court_position = antiquarian_court_position
							has_council_position = councillor_court_chaplain
						}
					}
					save_scope_as = chronicler
				}
			}
		}
		else = {
			create_character = {
				template = adult_education_teacher
				dynasty = none
				location = scope:activity.activity_location
				save_scope_as = chronicler
			}
		}
		
		ancestor_veneration_generate_first_book_effect = yes
		scope:newly_created_artifact = { save_scope_as = book_1 }
		if = {
			limit = {
				scope:activity = {
					AND = {
						has_activity_option = { 
							category = special_type 
							option = ancestor_veneration_type_standard
						}
						has_activity_option = {
							category = ancestor_veneration_funding
							option = ancestor_veneration_extra_funding
						}
					}
				}
			}
			ancestor_veneration_generate_second_book_effect = yes
			scope:newly_created_artifact = { save_scope_as = book_2 }
		}
	}
	
	option = {
		name = ancestor_veneration.0060.a
		custom_tooltip = ancestor_veneration.0060.a.tt
		hidden_effect = {
			scope:book_1 = {
				destroy_artifact = this
			}
			if = {
				limit = { exists = scope:book_2 }
				scope:book_2 = {
					destroy_artifact = this
				}
			}
		}
		scope:activity = {
			add_activity_log_entry = {
				key = donated_books_log
				show_in_conclusion = yes
				character = scope:host
				scope:host = {
					add_prestige = major_prestige_gain
					add_piety = major_piety_gain
				}
			}
		}	
	}
	
	option = {
		trigger = { not = { exists = scope:book_2 } }
		name = ancestor_veneration.0060.b
		custom_tooltip = ancestor_veneration.0060.b.tt
		scope:activity = {
			add_activity_log_entry = {
				key = chose_book1_log
				show_in_conclusion = yes
				character = scope:host
				scope:book_1 = {
					set_owner = {
						target = scope:host
						history = {
							type = given
							recipient = scope:host
						}
					}
				}
			}
		}
	}
	
	option = {
		name = ancestor_veneration.0060.c
		trigger = { exists = scope:book_2 }
		hidden_effect = { scope:book_2 = { destroy_artifact = this } }
		scope:activity = {
			add_activity_log_entry = {
				key = chose_book1_log
				show_in_conclusion = yes
				character = scope:host
				scope:book_1 = {
					set_owner = {
						target = scope:host
						history = {
							type = given
							recipient = scope:host
						}
					}
				}
			}
		}
	}
	
	option = {
		name = ancestor_veneration.0060.d
		trigger = { exists = scope:book_2 }
		hidden_effect = { scope:book_1 = { destroy_artifact = this } }
		scope:activity = {
			add_activity_log_entry = {
				key = chose_book2_log
				show_in_conclusion = yes
				character = scope:host
				scope:book_2 = {
					set_owner = {
						target = scope:host
						history = {
							type = given
							recipient = scope:host
						}
					}
				}
			}
		}
	}
}


# # Histories Invalidation for Host Death - Guests
ancestor_veneration.0063 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0063.t
	desc = ancestor_veneration.0063.desc
	theme = ancestor_veneration_activity
	override_icon = {
		reference = "gfx/interface/icons/event_types/type_illness.dds"
	}
	left_portrait = {
		character = scope:host
	}
	
	option = {
		name = ancestor_veneration.0063.a
		custom_tooltip = ancestor_veneration.0063.a.tt
	}
}

#The host has been imprisoned - for host
ancestor_veneration.0064 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0063.t
	desc = ancestor_veneration.0064.desc
	theme = ancestor_veneration_activity
	override_icon = {
		reference = "gfx/interface/icons/event_types/type_prison.dds"
	}
	left_portrait = {
		character = scope:host
		animation = prison_dungeon
	}

	immediate = {
		#hosted_successful_feast_interrupted_effect = yes
	}
	
	option = {
		name = ancestor_veneration.0064.a
	}
}

#The host has been imprisoned - for guests
ancestor_veneration.0065 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0063.t
	desc = ancestor_veneration.0065.desc
	theme = ancestor_veneration_activity
	override_icon = {
		reference = "gfx/interface/icons/event_types/type_prison.dds"
	}
	left_portrait = {
		character = scope:host
		animation = prison_dungeon
	}
	
	option = {
		name = ancestor_veneration.0064.a
	}
}

# # Histories Invalidation for Host Death - Player Heir
ancestor_veneration.0070 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0070.t
	desc = {
		desc = ancestor_veneration.0070.desc
		desc = ancestor_veneration.0070.desc.entourage
		desc = ancestor_veneration.0070.desc.ruler
	}
	theme = realm

	left_portrait = {
		character = root
		animation = worry
	}

	immediate = {}

	option = { 
		name = ancestor_veneration.0070.a
		custom_tooltip = ancestor_veneration.0070.tt
	}
}

# HOST: No guests showed up
# You're so alone.
###
ancestor_veneration.0110 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0110.t
	desc = ancestor_veneration.0110.desc
	theme = ancestor_veneration_activity
	left_portrait = {
		character = scope:host
		animation = sadness
	}

	trigger = {
		scope:activity = {
			any_invited_character = {
				count > 1
				NOT = { this = root }
			}
			any_attending_character = {
				count < 1
				NOT = { this = root }
			}
		}
	}

	option = {
		name = feast.2003.a
		stress_impact = {
			base = minor_stress_impact_gain
			gregarious = minor_stress_impact_gain
		}
	}

	option = {
		name = feast.2003.b
		trigger = { has_trait = shy }
		exclusive = yes
		trait = shy
		stress_impact = {
			base = minor_stress_impact_loss
		}
	}
}

# Select a Chronicler #
ancestor_veneration.0540 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0540.t
	desc = {
		desc = ancestor_veneration.0540.desc.intro
		first_valid = {
			triggered_desc = {
				trigger = {
					OR = {
						has_relation_rival = scope:chronicler_candidate_1
						opinion = {
							value <= low_negative_opinion
							target = scope:chronicler
						}
					}
				}
				desc = ancestor_veneration.0540.desc.hates_candidate_a
			}
			desc = ancestor_veneration.0540.desc.candidate_a
		}
		triggered_desc = {
			trigger = { exists = scope:chronicler_candidate_2 }
			desc = ancestor_veneration.0540.desc.nepotism
		}
		triggered_desc = {
			trigger = { exists = scope:chronicler_candidate_3 }
			desc = ancestor_veneration.0540.desc.enthusiasm
		}
		desc = ancestor_veneration.0540.desc.outro
	}
	theme = ancestor_veneration_activity
	left_portrait = {
		character = scope:host
		animation = thinking
	}
	center_portrait = {
		character = scope:chronicler_candidate_2
		animation = war_over_win
	}
	right_portrait = {
		character = scope:chronicler_candidate_1
		animation = admiration
	}
	lower_right_portrait = scope:chronicler_candidate_3

	trigger = {
		NOT = { employs_court_position = chronicler_court_position }
		has_dlc_feature = legends
	}
	
	cooldown = { months = 6 }

	immediate = {
		scope:activity = {
			ordered_attending_character = { # The best guy for the job
				limit = {
					OR = {
						is_vassal_of = root
						is_courtier_of = root
					}
					root = {
						can_appoint_char_to_court_position = {
							CHAR = prev
							COURT_POS = chronicler_court_position
						}
					}
				}
				order_by = aptitude:chronicler_court_position
				save_scope_as = chronicler_candidate_1
			}
			if = {
				limit = {
					NOT = { exists = scope:chronicler_candidate_1 }
				}
				if = {
					limit = {
						any_pool_character = {
							province = scope:activity.activity_location
							is_physically_able_ai_adult = yes
						}
					}
					random_pool_character = {
						province = scope:activity.activity_location
						limit = {
							is_physically_able_ai_adult = yes
						}
						save_scope_as = chronicler_candidate_1
					}
				}
				else = {
					hidden_effect = {
						create_character = {
							template = generic_peasant_character
							gender_female_chance = root_soldier_female_chance
							location = scope:activity.activity_location
							culture = scope:host.culture
							faith = scope:host.faith
							dynasty = none
							save_scope_as = chronicler_candidate_1
						}
					}
				}
			}
			if = {
				limit = {
					any_attending_character = {
						OR = {
							is_vassal_of = root
							is_courtier_of = root
						}
						OR = {
							is_close_or_extended_family_of = root
							has_relation_friend = root
							has_relation_lover = root
						}
						NOT = { has_relation_rival = root }
						root = {
							can_appoint_char_to_court_position = {
								CHAR = prev
								COURT_POS = chronicler_court_position
							}
						}
						NOT = { this = scope:chronicler_candidate_1 }
					}
				}
				random_attending_character = { # The nepotism pick
					limit = {
						OR = {
							is_vassal_of = root
							is_courtier_of = root
						}
						OR = {
							is_close_or_extended_family_of = root
							has_relation_friend = root
							has_relation_lover = root
						}
						NOT = { has_relation_rival = root }
						root = {
							can_appoint_char_to_court_position = {
								CHAR = prev
								COURT_POS = chronicler_court_position
							}
						}
						NOT = { this = scope:chronicler_candidate_1 }
					}
					save_scope_as = chronicler_candidate_2
				}
			}
			if = {
				limit = {
					any_attending_character = {
						OR = {
							is_vassal_of = root
							is_courtier_of = root
						}
						root = {
							can_appoint_char_to_court_position = {
								CHAR = prev
								COURT_POS = chronicler_court_position
							}
						}
						NOT = { this = scope:chronicler_candidate_1 }
						trigger_if = {
							limit = {
								exists = scope:chronicler_candidate_2
							}
							NOT = { this = scope:chronicler_candidate_2 }
						}
					}
				}
				random = {
					chance = 25
					ordered_attending_character = { # Second best guy for the job
						limit = {
							OR = {
								is_vassal_of = root
								is_courtier_of = root
							}
							root = {
								can_appoint_char_to_court_position = {
									CHAR = prev
									COURT_POS = chronicler_court_position
								}
							}
							NOT = { this = scope:chronicler_candidate_1 }
							trigger_if = {
								limit = {
									exists = scope:chronicler_candidate_2
								}
								NOT = { this = scope:chronicler_candidate_2 }
							}
						}
						order_by = {
							value = aptitude:chronicler_court_position
							add = ai_energy
						}
						save_scope_as = chronicler_candidate_3
					}
				}
			}
		}
	}

	option = { # Pick the best guy
		name = ancestor_veneration.0540.a
		court_position_grant_effect = {
			CANDIDATE = scope:chronicler_candidate_1
			POS = chronicler
			EMPLOYER = root
		}
		add_prestige = minor_prestige_gain
		ai_chance = {
			base = 10
			opinion_modifier = {
				who = root
				opinion_target = scope:chronicler_candidate_1
				min = 0
				max = 10
				multiplier = 0.5
			}
			modifier = {
				factor = 0.5
				has_trait = family_first
			}
			modifier = {
				factor = 0.5
				has_relation_rival = scope:chronicler_candidate_1
				NOT = { has_trait = forgiving }
			}
		}
	}

	option = { # Pick the nepotism target
		name = ancestor_veneration.0540.b
		trigger = {
			exists = scope:chronicler_candidate_2
		}
		court_position_grant_effect = {
			CANDIDATE = scope:chronicler_candidate_2
			POS = chronicler
			EMPLOYER = root
		}
		reverse_add_opinion = {
			target = scope:chronicler_candidate_2
	 		modifier = grateful_opinion
	 		opinion = 15
		}
		ai_chance = {
			base = 10
			opinion_modifier = {
				who = root
				opinion_target = scope:chronicler_candidate_2
				min = 0
				max = 10
				multiplier = 0.5
			}
			modifier = {
				factor = 2
				has_trait = family_first
			}
		}
	}

	option = { # Pick the third target
		name = ancestor_veneration.0540.c
		trigger = {
			exists = scope:chronicler_candidate_3
		}
		court_position_grant_effect = {
			CANDIDATE = scope:chronicler_candidate_3
			POS = chronicler
			EMPLOYER = root
		}
		random = {
			chance = 50
			set_relation_friend = {
				target = scope:chronicler_candidate_3
		 		reason = friend_made_me_chronicler
			}
		}
		ai_chance = {
			base = 5
			opinion_modifier = {
				who = root
				opinion_target = scope:chronicler_candidate_3
				min = 0
				max = 10
				multiplier = 0.5
			}
			modifier = {
				factor = 0.5
				has_trait = family_first
			}
			modifier = {
				factor = 0.5
				has_relation_rival = scope:chronicler_candidate_3
				NOT = { has_trait = forgiving }
			}
		}
	}

	option = { # Pick nobody
		name = ancestor_veneration.0540.d
		ai_chance = { # The AI should always pick someone, unless they're bankrupt
			base = 0
			modifier = {
				add = 100
				gold < tiny_gold_value
			}
		}
	}

	after = {
		# Update success chance
		scope:activity = {
			set_variable = {
				name = hunt_success_chance
				value = hunt_success_chance_value
			}
		}
	}
}

# Select an Antiquarian #
ancestor_veneration.0541 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0541.t
	desc = {
		desc = ancestor_veneration.0541.desc.intro
		first_valid = {
			triggered_desc = {
				trigger = {
					OR = {
						has_relation_rival = scope:antiquarian_candidate_1
						opinion = {
							value <= low_negative_opinion
							target = scope:antiquarian
						}
					}
				}
				desc = ancestor_veneration.0541.desc.hates_candidate_a
			}
			desc = ancestor_veneration.0541.desc.candidate_a
		}
		triggered_desc = {
			trigger = { exists = scope:antiquarian_candidate_2 }
			desc = ancestor_veneration.0541.desc.nepotism
		}
		triggered_desc = {
			trigger = { exists = scope:antiquarian_candidate_3 }
			desc = ancestor_veneration.0541.desc.enthusiasm
		}
		desc = ancestor_veneration.0541.desc.outro
	}
	theme = ancestor_veneration_activity
	left_portrait = {
		character = scope:host
		animation = thinking
	}
	center_portrait = {
		character = scope:antiquarian_candidate_2
		animation = war_over_win
	}
	right_portrait = {
		character = scope:antiquarian_candidate_1
		animation = admiration
	}
	lower_right_portrait = scope:antiquarian_candidate_3

	trigger = {
		NOR = { 
			employs_court_position = antiquarian_court_position
			has_dlc_feature = legends
		}
	}
	
	cooldown = { months = 6 }

	immediate = {
		scope:activity = {
			ordered_attending_character = { # The best guy for the job
				limit = {
					OR = {
						is_vassal_of = root
						is_courtier_of = root
					}
					root = {
						can_appoint_char_to_court_position = {
							CHAR = prev
							COURT_POS = antiquarian_court_position
						}
					}
				}
				order_by = aptitude:antiquarian_court_position
				save_scope_as = antiquarian_candidate_1
			}
			if = {
				limit = {
					NOT = { exists = scope:antiquarian_candidate_1 }
				}
				if = {
					limit = {
						any_pool_character = {
							province = scope:activity.activity_location
							is_physically_able_ai_adult = yes
						}
					}
					random_pool_character = {
						province = scope:activity.activity_location
						limit = {
							is_physically_able_ai_adult = yes
						}
						save_scope_as = antiquarian_candidate_1
					}
				}
				else = {
					hidden_effect = {
						create_character = {
							template = generic_peasant_character
							gender_female_chance = root_soldier_female_chance
							location = scope:activity.activity_location
							culture = scope:host.culture
							faith = scope:host.faith
							dynasty = none
							save_scope_as = antiquarian_candidate_1
						}
					}
				}
			}
			if = {
				limit = {
					any_attending_character = {
						OR = {
							is_vassal_of = root
							is_courtier_of = root
						}
						OR = {
							is_close_or_extended_family_of = root
							has_relation_friend = root
							has_relation_lover = root
						}
						NOT = { has_relation_rival = root }
						root = {
							can_appoint_char_to_court_position = {
								CHAR = prev
								COURT_POS = antiquarian_court_position
							}
						}
						NOT = { this = scope:antiquarian_candidate_1 }
					}
				}
				random_attending_character = { # The nepotism pick
					limit = {
						OR = {
							is_vassal_of = root
							is_courtier_of = root
						}
						OR = {
							is_close_or_extended_family_of = root
							has_relation_friend = root
							has_relation_lover = root
						}
						NOT = { has_relation_rival = root }
						root = {
							can_appoint_char_to_court_position = {
								CHAR = prev
								COURT_POS = antiquarian_court_position
							}
						}
						NOT = { this = scope:antiquarian_candidate_1 }
					}
					save_scope_as = antiquarian_candidate_2
				}
			}
			if = {
				limit = {
					any_attending_character = {
						OR = {
							is_vassal_of = root
							is_courtier_of = root
						}
						root = {
							can_appoint_char_to_court_position = {
								CHAR = prev
								COURT_POS = antiquarian_court_position
							}
						}
						NOT = { this = scope:antiquarian_candidate_1 }
						trigger_if = {
							limit = {
								exists = scope:antiquarian_candidate_2
							}
							NOT = { this = scope:antiquarian_candidate_2 }
						}
					}
				}
				random = {
					chance = 25
					ordered_attending_character = { # Second best guy for the job
						limit = {
							OR = {
								is_vassal_of = root
								is_courtier_of = root
							}
							root = {
								can_appoint_char_to_court_position = {
									CHAR = prev
									COURT_POS = antiquarian_court_position
								}
							}
							NOT = { this = scope:antiquarian_candidate_1 }
							trigger_if = {
								limit = {
									exists = scope:antiquarian_candidate_2
								}
								NOT = { this = scope:antiquarian_candidate_2 }
							}
						}
						order_by = {
							value = aptitude:antiquarian_court_position
							add = ai_energy
						}
						save_scope_as = antiquarian_candidate_3
					}
				}
			}
		}
	}

	option = { # Pick the best guy
		name = ancestor_veneration.0541.a
		court_position_grant_effect = {
			CANDIDATE = scope:antiquarian_candidate_1
			POS = antiquarian
			EMPLOYER = root
		}
		add_prestige = minor_prestige_gain
		ai_chance = {
			base = 10
			opinion_modifier = {
				who = root
				opinion_target = scope:antiquarian_candidate_1
				min = 0
				max = 10
				multiplier = 0.5
			}
			modifier = {
				factor = 0.5
				has_trait = family_first
			}
			modifier = {
				factor = 0.5
				has_relation_rival = scope:antiquarian_candidate_1
				NOT = { has_trait = forgiving }
			}
		}
	}

	option = { # Pick the nepotism target
		name = ancestor_veneration.0541.b
		trigger = {
			exists = scope:antiquarian_candidate_2
		}
		court_position_grant_effect = {
			CANDIDATE = scope:antiquarian_candidate_2
			POS = antiquarian
			EMPLOYER = root
		}
		reverse_add_opinion = {
			target = scope:antiquarian_candidate_2
	 		modifier = grateful_opinion
	 		opinion = 15
		}
		ai_chance = {
			base = 10
			opinion_modifier = {
				who = root
				opinion_target = scope:antiquarian_candidate_2
				min = 0
				max = 10
				multiplier = 0.5
			}
			modifier = {
				factor = 2
				has_trait = family_first
			}
		}
	}

	option = { # Pick the third target
		name = ancestor_veneration.0541.c
		trigger = {
			exists = scope:antiquarian_candidate_3
		}
		court_position_grant_effect = {
			CANDIDATE = scope:antiquarian_candidate_3
			POS = antiquarian
			EMPLOYER = root
		}
		random = {
			chance = 50
			set_relation_friend = {
				target = scope:antiquarian_candidate_3
		 		reason = friend_made_me_antiquarian
			}
		}
		ai_chance = {
			base = 5
			opinion_modifier = {
				who = root
				opinion_target = scope:antiquarian_candidate_3
				min = 0
				max = 10
				multiplier = 0.5
			}
			modifier = {
				factor = 0.5
				has_trait = family_first
			}
			modifier = {
				factor = 0.5
				has_relation_rival = scope:antiquarian_candidate_3
				NOT = { has_trait = forgiving }
			}
		}
	}

	option = { # Pick nobody
		name = ancestor_veneration.0541.d
		ai_chance = { # The AI should always pick someone, unless they're bankrupt
			base = 0
			modifier = {
				add = 100
				gold < tiny_gold_value
			}
		}
	}

	after = {
		# Update success chance
		scope:activity = {
			set_variable = {
				name = hunt_success_chance
				value = hunt_success_chance_value
			}
		}
	}
}

# Welcome event #
ancestor_veneration.0550 = {
	type = activity_event
	content_source = realms_dlc
	title = ancestor_veneration.0550.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { this = scope:host }
				desc = ancestor_veneration.0550.host
			}
			desc = ancestor_veneration.0550.guest
		}
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:activity = {
						has_activity_option = { category = special_type option = ancestor_veneration_type_adunaic_propaganda }
					}
				}
				desc = ancestor_veneration.0550.propaganda
			}
			desc = ancestor_veneration.0550.standard
		}
		first_valid = {
			triggered_desc = {
				trigger = {
					intent_target.location ?= root.location
				}
				desc = ancestor_veneration.0550.intent_arrived
			}
			triggered_desc = {
				trigger = { exists = intent_target }
				desc = ancestor_veneration.0550.intent
			}
		}
	}
	theme = ancestor_veneration_activity
	left_portrait = {
		character = root
		animation = chancellor
	}
	right_portrait = {
		character = scope:host
		trigger = {
			NOT = { root = scope:host }
		}
		animation = admiration
	}
	lower_right_portrait = intent_target
	artifact = {
		position = lower_left_portrait
		target = scope:newly_created_artifact
		trigger = { exists = scope:newly_created_artifact }
	}
	
	cooldown = { months = 6 }

	trigger = { is_ai = no }

	option = { # Pick the best guy
		name = ancestor_veneration.0550.a
	}
}

# Travel start event #
ancestor_veneration.0560 = {
	type = character_event
	title = ancestor_veneration.0560.t
	desc = {
		#Intro
		first_valid = {
			#Explore History
			triggered_desc = {
				trigger = { exists = scope:host }
				desc = ancestor_veneration.0560.desc_ancestor_veneration
			}
			#My Explore History
			triggered_desc = {
				desc = ancestor_veneration.0560.desc_my_ancestor_veneration
			}
		}
		#Relationship to host segway
		first_valid = {
			#Negative
			triggered_desc = {
				trigger = {
					exists = scope:host
					has_relation_rival = involved_activity.activity_host
				}
				desc = ancestor_veneration.0560.desc_ancestor_veneration_negative
			}
			#Positive
			triggered_desc = {
				trigger = {
					exists = scope:host
					has_any_good_relationship_with_character_trigger = { CHARACTER = scope:host }
				}
				desc = ancestor_veneration.0560.desc_ancestor_veneration_positive
			}
			#Default
			triggered_desc = {
				trigger = { exists = scope:host }
				desc = ancestor_veneration.0560.desc_ancestor_veneration_default
			}
		}
		#Trait flavor for my Explore History
		first_valid = {
			#Archivist
			triggered_desc = {
				trigger = {
					has_trait = lifestyle_archivist 
					NOT = { exists = scope:host }
					has_any_debilitating_illness = no
				}
				desc = ancestor_veneration.0560.desc_my_ancestor_veneration_archivist
			}
			#Humble
			triggered_desc = {
				trigger = {
					NOT = { exists = scope:host }
					OR = {
						has_trait = humble
						has_trait = shy
					}
					has_any_debilitating_illness = no
				}
				desc = ancestor_veneration.0560.desc_my_ancestor_veneration_humble
			}
			#Arrogant
			triggered_desc = {
				trigger = { 
					NOT = { exists = scope:host }
					has_any_debilitating_illness = no
				}
				desc = ancestor_veneration.0560.desc_my_ancestor_veneration_arrogant
			}
		}
		#Outro
		first_valid = {
			#Propaganda
			triggered_desc = {
				trigger = {
					exists = scope:host
					involved_activity = { has_activity_option = { category = special_type option = ancestor_veneration_type_dwarven_propaganda } }
				}
				desc = ancestor_veneration.0560.desc_ancestor_veneration_outro_propaganda
			}
			#Standard Explore History
			triggered_desc = {
				trigger = {
					exists = scope:host
					involved_activity = { 
						has_activity_option = { category = special_type option = ancestor_veneration_type_standard }
					}
				}
				desc = ancestor_veneration.0560.desc_ancestor_veneration_outro_standard
			}
			#My Propaganda
			triggered_desc = {
				trigger = {
					involved_activity = { has_activity_option = { category = special_type option = ancestor_veneration_type_dwarven_propaganda } }
				}
				desc = ancestor_veneration.0560.desc_my_ancestor_veneration_outro_propaganda
			}
			#Standard My Standard Explore History
			triggered_desc = {
				trigger = {
					involved_activity = { 
						has_activity_option = { category = special_type option = ancestor_veneration_type_standard }
					}
				}
				desc = ancestor_veneration.0560.desc_my_ancestor_veneration_outro_standard
			}
		}
	}
	theme = travel
	left_portrait = {
		character = root
		animation = happiness
	}
	#Show our Travel Leader
	right_portrait = {
		trigger = { exists = current_travel_plan.travel_leader }
		character = current_travel_plan.travel_leader
	}
	#Show our host
	lower_right_portrait = {
		trigger = { exists = scope:host }
		character = scope:host
	}
	trigger = {
		is_available_travelling = yes
		is_landed = yes
		exists = involved_activity
		involved_activity = { has_activity_type = activity_ancestor_veneration }
	}
	immediate = {
		play_music_cue = mx_cue_travel_start
		if = {
			limit = {
				NOT = { involved_activity.activity_host = root }
			}
			#Check if we dislike the host
			if = {
				limit = {
					OR = {
						has_relation_rival = involved_activity.activity_host
						opinion = {
							target = involved_activity.activity_host
							value < 10
						}
					}
				}
				add_character_flag = we_dislike_host
			}
			#Save the scope for loc
			involved_activity.activity_host = { save_scope_as = host }
		}
	}
	#Giddy up!
	option = { 
		name = {
			text = {
				first_valid = {
					#Yeah, yeah ...
					triggered_desc = {
						trigger = {
							OR = {
								has_any_debilitating_illness = yes
								has_character_flag = we_dislike_host
								has_trait = craven
							}
						}
						desc = travel_start_event.1000.a_craven
					}
					#Everything is _awesome_
					triggered_desc = {
						desc = travel_start_event.1000.a
					}
				}
			}
		}
	}
	after = {
		if = {
			limit = { has_character_flag = we_dislike_host }
			remove_character_flag = we_dislike_host
		}
	}
}

dwarven.9900 = { # Visiting the archives with loremaster to venerate the ancestors
	type = activity_event
	title = dwarven.9900.t
	desc = dwarven.9900.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = throne_room_dwarf }
	right_portrait = {
		character = root
		animation = thinking
	}
	left_portrait = {
        character = scope:realm_priest
        animation = chaplain
    }
    immediate = {
		if = {
			limit = { exists = cp:councillor_court_chaplain }
			cp:councillor_court_chaplain = {
				save_scope_as = realm_priest
			}
		}
	}
	option = { # Get a random dwarven ancestor event
		name = dwarven.9900.a
			trigger_event = {
				on_action = dwarven_ancestor_events
			}
	}
}

################################
# THE LONGBEARDS
# 0100-0199
# by Jagua
################################

dwarven.9921 = { # Durin I, the Deathless
	type = activity_event
	title = dwarven.9921.t
	desc = dwarven.9921.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = dimril_dale }
	immediate = {
		if = {
			limit = { any_living_character = { any_artifact = { has_variable = durins_helm } } }
			random_living_character = {
				limit = { any_artifact = { has_variable = durins_helm } }
				random_artifact = {
					limit = { has_variable = durins_helm }
					save_scope_as = durins_helm
				}
			}
		}
		else = {
			hidden_effect = {
				character:k_wastelands_holder = {
					create_artifact_durins_helm_effect = { OWNER = this }
					scope:newly_created_artifact = { save_scope_as = durins_helm }
				}
			}
		}
    }
	center_portrait = {
        character = character:lineofdurinI
        animation = personality_honorable
		animate_if_dead = yes
    }
	artifact = {
		target = scope:durins_helm
		position = lower_center_portrait
		trigger = { exists = scope:durins_helm }
	}
	option = { # May my deeds honour his memory.
		name = dwarven.9921.a
		add_piety = major_piety_gain
		add_learning_lifestyle_xp = 250
	}
	option = { # He understood that distant roads bring hidden riches.
		name = dwarven.9921.b
		add_prestige = medium_prestige_gain
		add_wanderer_lifestyle_xp = 250
	}
	after = {
		hidden_effect = {
			if = {
				limit = { scope:durins_helm = { scope:owner = character:k_wastelands_holder } }
				destroy_artifact ?= scope:durins_helm
			}
		}
	}
}

dwarven.9922 = { # Durin II
	type = activity_event
	title = dwarven.9922.t
	desc = dwarven.9922.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = durins_door }
	immediate = {
		if = {
			limit = { any_living_character = { any_artifact = { has_variable = axe_of_durin } } }
			random_living_character = {
				limit = { any_artifact = { has_variable = axe_of_durin } }
				random_artifact = {
					limit = { has_variable = axe_of_durin }
					save_scope_as = axe_of_durin
				}
			}
		}
		else = {
			hidden_effect = {
				character:k_wastelands_holder = {
					create_artifact_axe_of_durin_effect = { OWNER = this }
					scope:newly_created_artifact = { save_scope_as = axe_of_durin }
				}
			}
		}
	}
	right_portrait = {
		character = character:linefinwe18
		animation = personality_rational
		animate_if_dead = yes
	}
	center_portrait = {
      character = character:lineofdurinII
      animation = personality_compassionate
	  animate_if_dead = yes
    }
	left_portrait = {
      character = character:lineofnarvi
      animation = war_defender
	  animate_if_dead = yes
	}
	artifact = {
		target = scope:axe_of_durin
		position = lower_center_portrait
		trigger = { exists = scope:axe_of_durin }
	}
	option = { # Let us honour Durin's wisdom and seek friendships beyond our halls.
		name = dwarven.9922.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # The Longbeards needed no aid to find their fortune.
		name = dwarven.9922.b
		add_stewardship_lifestyle_xp = 750
		random = {
		    chance = 10
			add_trait = reclusive
		}
	}
	after = {
		hidden_effect = {
			if = {
				limit = { scope:axe_of_durin = { scope:owner = character:k_wastelands_holder } }
				destroy_artifact ?= scope:axe_of_durin
			}
		}
	}
}

dwarven.9923 = { # Durin III
	type = activity_event
	title = dwarven.9923.t
	desc = dwarven.9923.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = eregion_ruins }
	right_portrait = {
        character = character:linefinwe18
        animation = disbelief
		animate_if_dead = yes
    }
	left_portrait = {
        character = character:lineofdurinIII
        animation = aggressive_longaxe
	    animate_if_dead = yes
    }
	immediate = {
		random_artifact = {
			limit = { has_variable = ring_of_longbeards }
			save_scope_as = ring_of_longbeards
		}
	}
	artifact = {
		target = scope:ring_of_longbeards
		position = lower_center_portrait
		trigger = { exists = scope:ring_of_longbeards }
	}
	lower_left_portrait = {
		character = character:lineofsauron
	}
	option = { # Sauron's treachery shall not be forgotten, nor left unavenged.
		name = dwarven.9923.a
		if = {
			limit = {
				has_trait = forgiving
			}		
			random = {
				chance = 20
				remove_trait = forgiving
				add_trait_force_tooltip = vengeful
			}
		}
		add_martial_lifestyle_xp = 500
	}
	option = { # The Elves should have been warier of well-intentioned strangers.
		name = dwarven.9923.b
		add_intrigue_lifestyle_xp = 500
	}
}

dwarven.9924 = { # Durin IV
	type = activity_event
	title = dwarven.9924.t
	desc = dwarven.9924.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = barad_dur }
	trigger = {
		game_start_date >= 4144.11.30 # Durin IV must be dead!
	}
	right_portrait = {
		character = character:linefinwe41
		animation = marshal
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { elven_war_noldor no_headgear }
		}
	}
	center_portrait = {
        character = character:lineofdurinIV
        animation = aggressive_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
    }
	left_portrait = {
		character = character:lineofelendil
		animation = marshal
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { gondor_war_prince }
		}
    }
	lower_right_portrait = {
		character = character:lineoforopher1
	}
	lower_center_portrait = {
		character = character:lineofsindri102
	}
	lower_left_portrait = {
		character = character:lineisildur0
	}
	option = { # Victory demands sacrifice. We must be ready to pay its price.
		name = dwarven.9924.a
		if = {
			limit = {
				has_trait = forgiving
			}		
			random = {
				chance = 20
				remove_trait = forgiving
				add_trait_force_tooltip = vengeful
			}
		}
		add_martial_lifestyle_xp = 500
	}
	option = { # Let the fallen kings rest. We endure because we stand alone.
		name = dwarven.9924.b
		add_stewardship_lifestyle_xp = 750
		random = {
		    chance = 10
			add_trait = reclusive
		}
	}
}

dwarven.9925 = { # Durin V
	type = activity_event
	title = dwarven.9925.t
	desc = dwarven.9925.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = throne_room_dwarf }
	trigger = {
		game_start_date >= 5168.7.18 # Durin V must be dead!
	}
	center_portrait = {
       character = character:lineofdurinV
       animation = personality_content
	   animate_if_dead = yes
    }
	immediate = {
		random_artifact = {
			limit = { has_variable = ring_of_longbeards }
			save_scope_as = ring_of_longbeards
		}
	}
	artifact = {
		target = scope:ring_of_longbeards
		position = lower_center_portrait
		trigger = { exists = scope:ring_of_longbeards }
	}
	option = { # To seek peace and prosperity is the purpose of any ruler.
		name = dwarven.9925.a
		add_stewardship_lifestyle_xp = 500
	}
	option = { # A reign with conquest is meaningless.
		name = dwarven.9925.b
		add_martial_lifestyle_xp = 500
	}
	option = { # Isolation is folly, a leader should forge alliances.
		name = dwarven.9925.c
		add_diplomacy_lifestyle_xp = 500
	}
}

dwarven.9926 = { # Durin VI
	type = activity_event
	title = dwarven.9926.t
	desc = dwarven.9926.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = durins_bane }
	trigger = {
		game_start_date >= 6032.8.24 # Durin VI and his son must be dead!
	}
	right_portrait = {
        character = character:lineofdurin73
    	animation = marshal
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
	}
	left_portrait = {
		character = character:lineofdurinVI
        animation = aggressive_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
    }
	lower_center_portrait = {
		character = character:lineofdurin74
	}
	option = { # May I show such courage when my trial comes.
		name = dwarven.9926.a
		if = {
			limit = {
				has_trait = craven
			}		
			random = {
				chance = 20
				remove_trait = craven
				add_trait_force_tooltip = brave
			}
		}
		add_martial_lifestyle_xp = 500
	}
	option = { # It was not greed, but grim chance, that brought his fall.
		name = dwarven.9926.b
		if = {
			limit = {
				has_trait = generous
			}		
			random = {
				chance = 20
				remove_trait = generous
				add_trait_force_tooltip = greedy
			}
		}
		add_stewardship_lifestyle_xp = 500
	}
}

dwarven.9901 = { # Thrór, King Under the Mountain
	type = activity_event
	title = dwarven.9901.t
	desc = dwarven.9901.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = mining_activity }
	trigger = {
		game_start_date >= 6832.4.8 # Thrór must be dead!
	}
	immediate = {
		random_artifact = {
			limit = { has_variable = ring_of_longbeards }
			save_scope_as = ring_of_longbeards
		}
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_arkenstone_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = arkenstone }
			}
		}
	}
	right_portrait = {
		 character = character:lineofdurin82
        animation = personality_vengeful
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
	}
	center_portrait = {
        character = character:lineofdurin81
        animation = personality_greedy
		animate_if_dead = yes
    }
	left_portrait = {
        character = character:lineofnar1
        animation = schadenfreude
		animate_if_dead = yes
    }
	artifact = {
		target = scope:ring_of_longbeards
		position = lower_left_portrait
		trigger = { exists = scope:ring_of_longbeards }
	}
	artifact = {
		target = scope:arkenstone
		position = lower_right_portrait
		trigger = { exists = scope:arkenstone }
	}
	lower_center_portrait = {
		character = character:lineofazog1
	}
	option = { # Through his wealth, our people stood unbroken and proud.
		name = dwarven.9901.a
		add_stewardship_lifestyle_xp = 500
		add_martial_lifestyle_xp = 500
			if = {
			limit = {
				has_trait = generous
			}		
			random = {
				chance = 20
				remove_trait = generous
				add_trait_force_tooltip = greedy
			}
		}
	}
	option = { # His path forged a Dwarven fury that would not be quelled.
		name = dwarven.9901.b
		add_martial_lifestyle_xp = 500
		if = {
			limit = {
				has_trait = calm
			}		
			random = {
				chance = 20
				remove_trait = calm
				add_trait_force_tooltip = wrathful
			}
		}
	}
}

dwarven.9902 = { # Thráin II
	type = activity_event
	title = dwarven.9902.t
	desc = dwarven.9902.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = dimril_dale }
	trigger = {
		game_start_date >= 6883.3.8 # Thráin II must be dead!
	}
	immediate = {
		random_artifact = {
			limit = { has_variable = ring_of_longbeards }
			save_scope_as = ring_of_longbeards
		}
	}
	right_portrait = {
		character = character:lineofdurin83
		animation = aggressive_sword
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
	}
	center_portrait = {
        character = character:lineofdurin82
        animation = marshal_axe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
    }
	left_portrait = {
        character = character:lineofdurin84
        animation = aggressive_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
    }
	artifact = {
		target = scope:ring_of_longbeards
		position = lower_center_portrait
		trigger = { exists = scope:ring_of_longbeards }
	}
	lower_right_portrait = {
		character = character:lineofsauron
	}
	lower_left_portrait = {
		character = character:lineofazog1
	}
	option = { # Let our strength and arms carve a path to glory.
		name = dwarven.9902.a
		add_martial_lifestyle_xp = 500
	}
	option = { # Through patience and alliances, we shall endure.
		name = dwarven.9902.b
		add_diplomacy_lifestyle_xp = 500
	}
}

dwarven.9903 = { # Thorin II Oakenshield
	type = activity_event
	title = dwarven.9903.t
	desc = dwarven.9903.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = dwarven_gate }
	trigger = {
		game_start_date >= 6974.11.30 # Thorin II Oakenshield must be dead!
	}
	right_portrait = {
		character = character:lineofdurin86
		animation = aggressive_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
	}
	center_portrait = {
        character = character:lineofdurin83
        animation = celebrate_sword
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
    }
	left_portrait = {
        character = character:lineofdurin87
        animation = aggressive_axe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
    }
	immediate = {
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_orcrist_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = orcrist }
			}
			character:k_wastelands_holder = {
				create_artifact_arkenstone_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = arkenstone }
			}
		}
	}
	artifact = {
		target = scope:orcrist
		position = lower_left_portrait
		trigger = { exists = scope:orcrist }
	}
	lower_center_portrait = {
		character = character:lineofbaggins12
	}
	artifact = {
		target = scope:arkenstone
		position = lower_right_portrait
		trigger = { exists = scope:arkenstone }
	}
	option = { # All hail the King Under the Mountain!
		name = dwarven.9903.a
		add_martial_lifestyle_xp = 500
	}
	option = { # My legacy will be even greater than this.
		name = dwarven.9903.b
		add_prestige = medium_prestige_gain
		add_stewardship_lifestyle_xp = 250
		if = {
			limit = {
				has_trait = humble
			}		
			random = {
				chance = 20
				remove_trait = humble
				add_trait_force_tooltip = arrogant
			}
		}
	}
}

dwarven.9904 = { # Gorin I, Discoverer of Nordinbad
	type = activity_event
	title = dwarven.9904.t
	desc = dwarven.9904.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = wilderness_mountains }
	trigger = {
		game_start_date >= 6622.2.2 # Dáin I and his son Frór must be dead!
	}
	right_portrait = {
		character = character:lineofdurin75
		animation = personality_content
		animate_if_dead = yes
	}
	left_portrait = {
        character = character:linegorin0
        animation = thinking
		animate_if_dead = yes
    }
	lower_right_portrait = {
		character = character:lineofdurin80
	}
	lower_center_portrait = {
		character = character:lineofdurin79
	}
	lower_left_portrait = {
		character = character:lineofdurin74
	}
	option = { # His courage endures in our hearts and stone.
		name = dwarven.9904.a
		add_piety = major_piety_gain
		add_martial_lifestyle_xp = 250
		if = {
			limit = {
				has_trait = cynical
			}		
			random = {
				chance = 20
				remove_trait = cynical
				add_trait_force_tooltip = zealous
			}
		}
	}
	option = { # Gorin was a fool to settle in this forsaken place.
		name = dwarven.9904.b
		add_prestige = medium_prestige_gain
		add_learning_lifestyle_xp = 250
		if = {
			limit = {
				has_trait = humble
			}		
			random = {
				chance = 20
				remove_trait = humble
				add_trait_force_tooltip = arrogant
			}
		}
	}
}

dwarven.9905 = { # Boic I Bravesoul
	type = activity_event
	title = dwarven.9905.t
	desc = dwarven.9905.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = durins_bane }
	right_portrait = {
		character = character:lineofbravesoul7
		animation = writing
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofbravesoul1
		animation = personality_honorable
		animate_if_dead = yes
	}
	left_portrait = {
        character = character:lineofbravesoul9
        animation = interested
		animate_if_dead = yes
    }
	option = { # May Boic's bravery shape our path.
		name = dwarven.9905.a
		add_martial_lifestyle_xp = 500
		if = {
			limit = {
				has_trait = craven
			}		
			random = {
				chance = 20
				remove_trait = craven
				add_trait_force_tooltip = brave
			}
		}
	}
	option = { # May we match his descendant's cunning in crafting legacy.
		name = dwarven.9905.b
		add_intrigue_lifestyle_xp = 500
		if = {
			limit = {
				has_trait = lazy
			}		
			random = {
				chance = 20
				remove_trait = lazy
				add_trait_force_tooltip = ambitious
			}
		}
	}
}

dwarven.9906 = { # Róa, the Raven Keeper
	type = activity_event
	title = dwarven.9906.t
	desc = {
		desc = dwarven.9906.a.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					game_start_date >= 4823.1.9 # Raven Hill was first settled by the line of Viglund
				}
				desc =  dwarven.9906.desc.erebor.settled
			}
		}
		desc = dwarven.9906.b.desc
	}
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = wilderness_forest_deep }
	center_portrait = {
		character = character:lineofroa # the Raven Keeper
		animation = personality_compassionate
		animate_if_dead = yes
	}
	option = { # She proved diplomacy can cross even wings and winds.
		name = dwarven.9906.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # All knowledge begins with listening.
		name = dwarven.9906.b
		add_learning_lifestyle_xp = 500
		if = {
			limit = {
				has_trait = impatient
			}		
			random = {
				chance = 20
				remove_trait = impatient
				add_trait_force_tooltip = patient
			}
		}
	}
}

dwarven.9911 = { # Narvi, legendary smith and friend to Celebrimbor
	type = activity_event
	title = dwarven.9911.t
	desc = dwarven.9911.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = durins_door }
	right_portrait = {
        character = character:linefinwe18
        animation = personality_rational
		animate_if_dead = yes
    }
	center_portrait = {
        character = character:lineofnarvi
        animation = war_defender
		animate_if_dead = yes
    }
	left_portrait = {
		character = character:lineofdurinII
		animation = personality_compassionate
		animate_if_dead = yes
	}
	option = { # We shall rebuild the friendship Narvi once had with the Elves.
		name = dwarven.9911.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # What tripe! I'll be dead before allying with Elves!
		name = dwarven.9911.b
		add_martial_lifestyle_xp = 500
		if = {
			limit = {
				OR = {
					has_trait = fickle
					has_trait = eccentric
				}
			}	
			random = {
				chance = 20
					remove_trait = fickle
					remove_trait = eccentric
				add_trait_force_tooltip = stubborn
			}
		}
	}
}

dwarven.9916 = { # Uni I the River-Seeker of house Ubnan, founder of the tradeport of Kheledûl
	type = activity_event
	title = dwarven.9916.t
	desc = dwarven.9916.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = docks_tribal }
	trigger = {
		game_start_date >= 6258.11.5 # Uni the River-Seeker must be dead!
	}
	right_portrait = {
        character = character:lineofdurin74
        animation = disbelief
		animate_if_dead = yes
    }
	center_portrait = {
        character = character:lineofuni19
        animation = interested
		animate_if_dead = yes	
    }
	left_portrait = {
		character = character:lineofdurinVI
		animation = dead
		animate_if_dead = yes
	}
	option = { # The water was never ours to tame. Let our kin remain bound to stone.
		name = dwarven.9916.a
		random = {
			chance = 20
			if = {
				limit = { has_trait = cavern_commander }
				add_trait_xp = {
					trait = cavern_commander
					value = 20
				}
			}
			else = { add_trait =  cavern_commander }
		}	
	}
	option = { # His was a noble pursuit, though odd it still remains.
		name = dwarven.9916.b
		add_stewardship_lifestyle_xp = 500
	}
	option = { # He was right! A Dwarf's place is with the water!
		name = dwarven.9916.c
		trigger = {
			has_trait = eccentric
		}
		if = {
			limit = {
				has_trait = eccentric
			}
			random = {
				chance = 20
				add_character_modifier = drenchbeard
			}
		}
		add_stewardship_lifestyle_xp = 500
	}	
}

dwarven.9917 = { # Vighar Roadwalker
	type = activity_event
	title = dwarven.9917.t
	desc = dwarven.9917.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = wilderness_forest }
	trigger = {
		game_start_date >= 5463.3.3 # Vighar Roadwalker must be dead!
	}
	right_portrait = {
        character = character:linegruni11
        animation = admiration
		animate_if_dead = yes
    }
	center_portrait = {
        character = character:lineviglund5
        animation = survey
		animate_if_dead = yes	
    }
	left_portrait = {
		character = character:lineofdurin64
		animation = interested
		animate_if_dead = yes
	}
	option = { # His dedication and labour stand as an example to others.
		name = dwarven.9917.a
		if = {
			limit = {
				has_trait = lazy
			}		
			random = {
				chance = 20
				remove_trait = lazy
				add_trait_force_tooltip = diligent
			}
		}
		add_piety = major_piety_gain
		add_wanderer_lifestyle_xp = 250
	}
	option = { # Maintaining roads? Hardly the height of a Dwarf's ambition.
		name = dwarven.9917.b
		if = {
			limit = {
				has_trait = content
			}		
			random = {
				chance = 20
				remove_trait = content
				add_trait_force_tooltip = ambitious
			}
		}
		add_prestige = medium_prestige_gain
		add_stewardship_lifestyle_xp = 250
	}
}

dwarven.9918 = { # Lóni the Turncoat
	type = activity_event
	title = dwarven.9918.t
	desc = dwarven.9918.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = market_dwarven }
	trigger = {
		game_start_date >= 5481.9.21 # Lóni the Turncoat must be dead!
	}
	right_portrait = {
        character = character:lineofdurin64
        animation = war_defender
		animate_if_dead = yes
	}
	center_portrait = {
    	character = character:lineofdurin641
        animation = personality_dishonorable
		animate_if_dead = yes
    }
	left_portrait = {
		character = character:lineurdak3
		animation = disapproval
		animate_if_dead = yes
    }
	lower_center_portrait = {
		character = character:lineofdurin62
	}
	option = { # His deceit turned to folly. Let his name be a warning.
		name = dwarven.9918.a
		if = {
			limit = {
				has_trait = arbitrary
			}		
			random = {
				chance = 20
				remove_trait = arbitrary
				add_trait_force_tooltip = just
			}
		}
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # His pride cost him everything — but his ambition was praiseworthy.
		name = dwarven.9918.b
		if = {
			limit = {
				has_trait = content
			}		
			random = {
				chance = 20
				remove_trait = content
				add_trait_force_tooltip = ambitious
			}
		}
		add_intrigue_lifestyle_xp = 500
	}
}

dwarven.9920 = { # Regin, the Ram-Rider
	type = activity_event
	title = dwarven.9920.t
	desc = dwarven.9920.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = wilderness_mountains }
	right_portrait = {
        character = character:lineofmorthain33
        animation = thinking
		animate_if_dead = yes
    }
	center_portrait = {
        character = character:lineofregin
        animation = flirtation
		animate_if_dead = yes
    }
	left_portrait = {
        character = character:linebori15a
        animation = love
		animate_if_dead = yes
    }
	option = { # May every rider's bond echo Regin's fearless spirit.
		name = dwarven.9920.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # May every ram's charge honour Regin's wild courage.
		name = dwarven.9920.b
		add_martial_lifestyle_xp = 500
	}
}

################################
# THE FIREBEARDS
# 0200-0299
# by Jagua
################################

dwarven.9931 = { # Úri I, the Scarred
	type = activity_event
	title = dwarven.9931.t
	desc = dwarven.9931.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = kitchen_dwarven }
	right_portrait = {
		character = character:linefinwe33
		animation = steward
	}
	center_portrait = {
        character = character:lineofuriI
        animation = personality_callous
		animate_if_dead = yes
    }
	left_portrait = {
		character = character:lineofdwalinI
		animation = personality_content
		animate_if_dead = yes
    }
	option = { # We must protect our kin as he did.
		name = dwarven.9931.a
		add_martial_lifestyle_xp = 500
	}
	option = { # Stories and scars won't keep us fed.
		name = dwarven.9931.b
		if = {
			limit = {
				has_trait = zealous
			}		
			random = {
				chance = 20
				remove_trait = zealous
				add_trait_force_tooltip = cynical
			}
		}
		add_stewardship_lifestyle_xp = 500
	}
}

dwarven.9932 = { # Úri II, son of Thrur
	type = activity_event
	title = dwarven.9932.t
	desc = dwarven.9932.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = throne_room_dwarf }
	right_portrait = {
		character = character:lineofdurin2
		animation = admiration
		animate_if_dead = yes
	}
	center_portrait = {
        character = character:lineofuriII
        animation = personality_cynical
		animate_if_dead = yes
    }
	left_portrait = {
        character = character:lineofdwalinII
        animation = personality_forgiving
		animate_if_dead = yes
    }
	lower_left_portrait = {
		character = character:lineofhersarbinshmur1
	}
	lower_center_portrait = {
		character = character:lineofuri5
	}
	lower_right_portrait = {
		character = character:lineofazganur5
	}
	option = { # Sometimes, a people must stand alone to preserve their identity.
		name = dwarven.9932.a
		add_stewardship_lifestyle_xp = 750
		random = {
		    chance = 10
			add_trait = reclusive
		}
	}
	option = { # To succeed, one must have allies by their side.
		name = dwarven.9932.b
		add_diplomacy_lifestyle_xp = 500
	}
}

dwarven.9933 = { # Úri III
	type = character_event
 	window = visit_settlement_window
	title = dwarven.9933.t
	desc = dwarven.9933.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = throne_room }
	right_portrait = {
		character = character:lineofuri27
		animation = interested
	}
	center_portrait = {
       	character = character:lineofuriIII
       	animation = war_defender
	   	animate_if_dead = yes
    }
	left_portrait = {
      	character = character:lineofdwalinIII
       	animation = war_attacker
		animate_if_dead = yes
    }
	lower_right_portrait = {
		character = character:linefinwe18
	}
	immediate = {
		random_artifact = {
			limit = { has_variable = ring_of_firebeards }
			save_scope_as = ring_of_firebeards
		}
	}
	artifact = {
		target = scope:ring_of_firebeards
		position = lower_center_portrait
		trigger = { exists = scope:ring_of_firebeards }
	}
	lower_left_portrait = {
		character = character:lineofsauron
	}
	option = { # No doubt this gift was fiercely protected.
		name = dwarven.9933.a
		add_martial_lifestyle_xp = 500
	}
	option = { # Such gifts often veil darker intent.
		name = dwarven.9933.b
		add_intrigue_lifestyle_xp = 500
	}
}

dwarven.9934 = { # Úri IV
	type = character_event
 	window = visit_settlement_window
	title = dwarven.9934.t
	desc = dwarven.9934.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = barad_dur }
	trigger = {
		game_start_date >= 4066.11.11 # Úri IV must be dead!
	}
	right_portrait = {
		character = character:lineofdwalinIV
		animation = personality_content
		animate_if_dead = yes
	}
	center_portrait = {
       	character = character:lineofuriIV
       	animation = interested
		animate_if_dead = yes
    }
	left_portrait = {
      	character = character:lineofdurinIV
       	animation = aggressive_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
    }
	lower_right_portrait = {
		character = character:lineofkhathzaibriz53a
	}
	lower_center_portrait = {
		character = character:lineofuri45c
	}
	lower_left_portrait = {
		character = character:lineofsauron
	}
	option = { # He trusted the patient rise of cautious renewal.
		name = dwarven.9934.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # A king should fight, not hide.
		name = dwarven.9934.b
		add_martial_lifestyle_xp = 500
	}
}

dwarven.9935 = { # Úri V, the Reconciler
	type = character_event
 	window = visit_settlement_window
	title = dwarven.9935.t
	desc = dwarven.9935.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = throne_room }
	trigger = {
		game_start_date >= 5013.1.17 # Úri V must be dead!
	}
	center_portrait = {
        character = character:lineofuriV
        animation = chancellor
		animate_if_dead = yes
    }
	lower_right_portrait = {
		character = character:lineofdwalinII
	}
	lower_center_portrait = {
		character = character:lineofuri5
	}
	lower_left_portrait = {
		character = character:lineofdurin2
	}
	option = { # Only together can we forge a future worthy of our ancestors.
		name = dwarven.9935.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # Only by embracing change can our clans truly thrive.
		name = dwarven.9935.b
		if = {
			limit = {
				has_trait = content
			}		
			random = {
				chance = 20
				remove_trait = content
				add_trait_force_tooltip = ambitious
			}
		}
		add_stewardship_lifestyle_xp = 500
	}
}

dwarven.9936 = { # Úri VI, the Generous
	type = character_event
 	window = visit_settlement_window
	title = dwarven.9936.t
	desc = dwarven.9936.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = throne_room }
	trigger = {
		game_start_date >= 7054.2.21 # Úri VI must be dead!
	}
	right_portrait = {
      	character = character:lineofdurin90
        animation = aggressive_longaxe
		animate_if_dead = yes
    }
	center_portrait = {
        character = character:lineofuriVI
        animation = personality_compassionate
		animate_if_dead = yes
    }
	left_portrait = {
        character = character:lineofuri122
        animation = thinking
		animate_if_dead = yes
    }
	lower_right_portrait = {
		character = character:lineofcirdan
	}
	lower_center_portrait = {
		character = character:lineofdurin83
	}
	lower_left_portrait = {
		character = character:lineofuri116
	}
	option = { # His measured generosity built lasting peace.
		name = dwarven.9936.a
		if = {
			limit = {
				has_trait = greedy
			}		
			random = {
				chance = 20
				remove_trait = greedy
				add_trait_force_tooltip = generous
			}
		}
		add_stewardship_lifestyle_xp = 500
	}
	option = { # His bravery forged a path forward for our people.
		name = dwarven.9936.b
		if = {
			limit = {
				has_trait = craven
			}		
			random = {
				chance = 20
				remove_trait = craven
				add_trait_force_tooltip = brave
			}
		}
		add_martial_lifestyle_xp = 500
	}
}

dwarven.9937 = { # Khathzâ, the Watcher
	type = character_event
 	window = visit_settlement_window
	title = dwarven.9937.t
	desc = dwarven.9937.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = eregion_ruins }
	right_portrait = {
        character = character:lineofuri5
        animation = personality_zealous
		animate_if_dead = yes
    }
	center_portrait = {
        character = character:lineofkhathzaibriz1
        animation = personality_cynical
		animate_if_dead = yes
    }
	left_portrait = {
        character = character:lineofuri3
        animation = aggressive_longaxe
		animate_if_dead = yes
    }
	lower_right_portrait = {
		character = character:lineofhersarbinshmur1
	}
	lower_center_portrait = {
		character = character:lineofelwe3
	}
	lower_left_portrait = {
		character = character:secondlineofuri1
	}
	option = { # Dwarves should not shun those with other beliefs and customs.
		name = dwarven.9937.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # Khathzâ was right, outsiders cannot be trusted!
		name = dwarven.9937.b
		if = {
			limit = {
				has_trait = cynical
			}		
			random = {
				chance = 20
				remove_trait = cynical
				add_trait_force_tooltip = zealous
			}
		}
		add_character_flag = {
 			flag = delay_player_faith_conversion_notification_event
 			days = 1
 		}
 		set_character_faith_with_conversion = faith:faith_firebeards
		add_learning_lifestyle_xp = 500
	}
}

dwarven.9913 = { # Telchar of Nogrod, creator of Narsil, Angrist, and the Dragon-helm of Dor-lómin, trained by Gamil Zirak
	type = activity_event
	title = dwarven.9913.t
	desc = dwarven.9913.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = market_dwarven }
	trigger = {
		game_start_date >= 4033.7.12 # Elendil must be dead!
	}
	immediate = {
		if = {
			limit = { any_living_character = { any_artifact = { has_variable = dragon_helm_of_dor_lomin } } }
			random_living_character = {
				limit = { any_artifact = { has_variable = dragon_helm_of_dor_lomin } }
				random_artifact = {
					limit = { has_variable = dragon_helm_of_dor_lomin }
					save_scope_as = dragon_helm_of_dor_lomin
				}
			}
		}
		else = {
			hidden_effect = {
				character:k_wastelands_holder = {
					create_artifact_dragon_helm_of_dor_lomin_effect = { OWNER = this }
					scope:newly_created_artifact = { save_scope_as = dragon_helm_of_dor_lomin }
				}
			}
		}
		if = {
			limit = { exists = global_var:anduril_reforged }
			if = {
				limit = { any_living_character = { any_artifact = { has_variable = anduril } } }
				random_living_character = {
					limit = { any_artifact = { has_variable = anduril } }
					random_artifact = {
						limit = { has_variable = anduril }
						save_scope_as = shards_of_narsil
					}
				}
			}
			else = {
				hidden_effect = {
					character:k_wastelands_holder = {
						create_artifact_anduril_effect = { OWNER = this }
						scope:newly_created_artifact = { save_scope_as = shards_of_narsil }
					}
				}
			}
		}
		else = {
			if = {
				limit = { any_living_character = { any_artifact = { has_variable = shards_of_narsil } } }
				random_living_character = {
					limit = { any_artifact = { has_variable = shards_of_narsil } }
					random_artifact = {
						limit = { has_variable = shards_of_narsil }
						save_scope_as = shards_of_narsil
					}
				}
			}
			else = {
				hidden_effect = {
					character:k_wastelands_holder = {
						create_artifact_shards_of_narsil_effect = { OWNER = this }
						scope:newly_created_artifact = { save_scope_as = shards_of_narsil }
					}
				}
			}
		}
	}
	right_portrait = {
		character = character:lineofdwalin5
		animation = war_defender
		animate_if_dead = yes
	}
	center_portrait = {
        character = character:lineoftelchar1
        animation = war_attacker
		animate_if_dead = yes
    }
	left_portrait = {
        character = character:lineofgamilzirak
        animation = personality_honorable
		animate_if_dead = yes
    }
	lower_center_portrait = {
		character = character:lineofbeor32
	}
	artifact = {
		target = scope:dragon_helm_of_dor_lomin
		position = lower_left_portrait
		trigger = { exists = scope:dragon_helm_of_dor_lomin }
	}
	artifact = {
		target = scope:shards_of_narsil
		position = lower_right_portrait
		trigger = { exists = scope:shards_of_narsil }
	}
	option = { # Telchar was a legendary craftsman above all.
		name = dwarven.9913.a
		add_crafting_lifestyle_xp = 500
		random = {
			chance = 20
			if = {
				limit = { has_trait = lifestyle_artifact_crafting }
				add_trait_xp = {
						trait = lifestyle_artifact_crafting
						track = weapon_smith
						value = minor_trait_xp
				}
			}
			else = { add_trait = lifestyle_artifact_crafting }
		}
	}
	option = { # Telchar's legacy is one of great victories first and foremost.
		name = dwarven.9913.b
		add_martial_lifestyle_xp = 500
	}
	option = { # Telchar understood that knowledge precedes mastery.
		name = dwarven.9913.c
		add_learning_lifestyle_xp = 500
	}
	after = {
		hidden_effect = {
			if = {
				limit = { scope:dragon_helm_of_dor_lomin = { scope:owner = character:k_wastelands_holder } }
				destroy_artifact ?= scope:dragon_helm_of_dor_lomin
			}
			if = {
				limit = { scope:shards_of_narsil = { scope:owner = character:k_wastelands_holder } }
				destroy_artifact ?= scope:shards_of_narsil
			}
		}
	}
}

dwarven.9914 = { # Naugladur, king of Nogrod who coveted the Nauglamir for himself
	type = activity_event
	title = dwarven.9914.t
	desc = dwarven.9914.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = eregion_ruins }
	right_portrait = {
        character = character:lineofbeor32
        animation = marshal
		animate_if_dead = yes
    }
	center_portrait = {
        character = character:lineofuri3
        animation = aggressive_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_bronze_outfit }
		}
    }
	left_portrait = {
		character = character:lineofelwe3
		animation = disgust
		animate_if_dead = yes
	}
	lower_right_portrait = {
		character = character:lineofdwalinII
	}
	lower_center_portrait = {
		character = character:lineofelwe4
	}
	lower_left_portrait = {
		character = character:lineofkhathzaibriz1
	}
	option = { # Those who seek too much may lose all they hold dear.
		name = dwarven.9914.a
		if = {
			limit = {
				has_trait = arrogant
			}		
			random = {
				chance = 20
				remove_trait = arrogant
				add_trait_force_tooltip = humble
			}
		}
		add_piety = major_piety_gain
		add_learning_lifestyle_xp = 250
	}
	option = { # The strong are entitled to take what they deem worthy.
		name = dwarven.9914.b
		if = {
			limit = {
				has_trait = humble
			}		
			random = {
				chance = 20
				remove_trait = humble
				add_trait_force_tooltip = arrogant
			}
		}
		add_prestige = medium_prestige_gain
		add_martial_lifestyle_xp = 250
	}
}

################################
# THE BROADBEAMS
# 0300-0399
# by Jagua
################################

dwarven.9941 = { # Dwálin I, the Wise
	type = activity_event
	title = dwarven.9941.t
	desc = dwarven.9941.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = throne_room_noldor }
	right_portrait = {
		character = character:lineofelwe3
		animation = steward
		animate_if_dead = yes
	}
	center_portrait = {
        character = character:lineofdwalinI
        animation = personality_content
		animate_if_dead = yes
    }
	left_portrait = {
		character = character:lineofuriI
        animation = personality_callous
		animate_if_dead = yes
    }
	option = { # Let wisdom and song guide our efforts as well.
		name = dwarven.9941.a
		add_learning_lifestyle_xp = 500
	}
	option = { # Great craftsmanship endures beyond all else.
		name = dwarven.9941.b
		add_crafting_lifestyle_xp = 500
	}
}

dwarven.9942 = { # Dwálin II, son of Azaghâl of Belegost
	type = activity_event
	title = dwarven.9942.t
	desc = dwarven.9942.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = gondolin_fall }
	right_portrait = {
		character = character:lineofdurin2
		animation = admiration
		animate_if_dead = yes
	}
	center_portrait = {
        character = character:lineofdwalinII
        animation = personality_forgiving
		animate_if_dead = yes
    }
	left_portrait = {
		character = character:lineofuriII
        animation = personality_cynical
		animate_if_dead = yes
    }
	lower_left_portrait = {
		character = character:lineofmazdul5
	}
	lower_center_portrait = {
		character = character:lineofdwalin7
	}
	lower_right_portrait = {
		character = character:lineofhargrim5
	}
	option = { # The Broadbeams came in wisdom, and in wisdom they shall be honored.
		name = dwarven.9942.a
		add_learning_lifestyle_xp = 500
	}
	option = { # Like the Firebeards, we must trust in the ability of our own people.
		name = dwarven.9942.b
		add_crafting_lifestyle_xp = 500
	}
	option = { # Let all remember that it was the Longbeards who opened their gates in dark times.
		name = dwarven.9942.c
		add_diplomacy_lifestyle_xp = 500
	}
}

dwarven.9943 = { # Dwálin III
	type = activity_event
	title = dwarven.9943.t
	desc = dwarven.9943.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = throne_room }
	right_portrait = {
		character = character:lineofdwalin25
		animation = personality_content
		animate_if_dead = yes
	}
	center_portrait = {
       	character = character:lineofdwalinIII
        animation = war_attacker
		animate_if_dead = yes
    }
	left_portrait = {
      	character = character:secondlineofdwalin19
        animation = personality_compassionate
		animate_if_dead = yes
    }
	lower_right_portrait = {
		character = character:lineofhargrim21
	}
	lower_left_portrait = {
		character = character:lineofmazdul21
	}
	immediate = {
		random_artifact = {
			limit = { has_variable = ring_of_broadbeams }
			save_scope_as = ring_of_broadbeams
		}
	}
	artifact = {
		target = scope:ring_of_broadbeams
		position = lower_center_portrait
		trigger = { exists = scope:ring_of_broadbeams }
	}
	option = { # In unity lies the power to reclaim our ancient glory.
		name = dwarven.9943.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # Such gifts can hide secrets and should not be trusted lightly.
		name = dwarven.9943.b
		add_intrigue_lifestyle_xp = 500
	}
}

dwarven.9944 = { # Dwálin IV
	type = activity_event
	title = dwarven.9944.t
	desc = dwarven.9944.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = corridor_dunedain }
	trigger = {
		game_start_date >= 3765.8.27 # Dwálin IV must be dead!
	}
	right_portrait = {
		character = character:lineofuriIV
		animation = interested
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofdwalinIV
        animation = personality_content
		animate_if_dead = yes
	}
	left_portrait = {
        character = character:linefinwe41
        animation = admiration
		animate_if_dead = yes
    }
	lower_right_portrait = { # Add Wildwood Queen Dardariann later
		character = character:lineofnurwe3
	}
	lower_center_portrait = {
		character = character:lineofdurin44
	}
	lower_left_portrait = {
		character = character:lineofbavorIV
	}
	option = { # He guided his people into an age of prosperity.
		name = dwarven.9944.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # He forged bonds that safeguarded his people for generations.
		name = dwarven.9944.b
		add_diplomacy_lifestyle_xp = 500
	}
}

dwarven.9945 = { # Dwálin V
	type = activity_event
	title = dwarven.9945.t
	desc = dwarven.9945.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = forodwaith }
	trigger = {
		game_start_date >= 4949.5.24 # Dwálin V must be dead!
	}
	right_portrait = {
		character = character:lineofdourhand17 # killed by Skorgrím
		animation = shame
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofdwalinV
		animation = disbelief
		animate_if_dead = yes
	}
	left_portrait = {
        character = character:lineofuri67
        animation = disapproval
		animate_if_dead = yes
    }
	lower_right_portrait = {
		character = character:lineofcaladir43
	}
	lower_center_portrait = {
		character = character:lineisildur18
	}
	lower_left_portrait = {
		character = character:nazgul1
	}
	option = { # $Dwálin V's end shows the peril of mistaking kinship for loyalty.
		name = dwarven.9945.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # Let the tale of Dwálin V steel our hearts against deceit.
		name = dwarven.9945.b
		add_intrigue_lifestyle_xp = 500
	}
}

dwarven.9946 = { # Dwálin VI, Trollbane
	type = activity_event
	title = dwarven.9946.t
	desc = dwarven.9946.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = wilderness_mountains }
	trigger = {
		game_start_date >= 6173.4.7 # Dwálin VI must be dead!
	}
	right_portrait = {
		character = character:lineofdurin74
		animation = schadenfreude
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofdwalinVI
        animation = aggressive_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_gold_outfit }
		}
	}
	left_portrait = {
        character = character:lineofdurinVI
        animation = dead
		animate_if_dead = yes
    }
	lower_right_portrait = {
		character = character:lineoftheklel36
	}
	lower_center_portrait = {
		character = character:lineofmorthain72
	}
	option = { # His display of compassion strengthened ties amongst kin.
		name = dwarven.9946.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # His valour in battle inspired all who followed him.
		name = dwarven.9946.b
		add_martial_lifestyle_xp = 500
	}
}

dwarven.9947 = { # Bodruith, son of Azaghâl and brother of Dwálin II
	type = activity_event
	title = dwarven.9947.t
	desc = dwarven.9947.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = eregion_ruins }
	right_portrait = {
        character = character:lineofuri3
        animation = aggressive_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_bronze_outfit }
		}
    }
	center_portrait = {
        character = character:lineofdwalin7
        animation = personality_cynical
		animate_if_dead = yes
    }
	left_portrait = {
		character = character:lineofdwalinII
		animation = personality_forgiving
		animate_if_dead = yes
	}
	lower_right_portrait = {
		character = character:secondlineofdwalin1
	}
	lower_center_portrait = {
		character = character:lineofelwe3
	}
	lower_left_portrait = {
		character = character:lineofuri5
	}
	
	option = { # 
		name = dwarven.9947.a
		if = {
			limit = {
				has_trait = arrogant
			}		
			random = {
				chance = 20
				remove_trait = arrogant
				add_trait_force_tooltip = humble
			}
		}
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # 
		name = dwarven.9947.b
		if = {
			limit = {
				has_trait = humble
			}		
			random = {
				chance = 20
				remove_trait = humble
				add_trait_force_tooltip = arrogant
			}
		}
		add_martial_lifestyle_xp = 500
	}
}

dwarven.9912 = { # Azaghâl, father of Dwálin II, friend of Maedhros, Dwarf-King of Belegost
	type = activity_event
	title = dwarven.9912.t
	desc = dwarven.9912.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = gondolin_fall }
	immediate = {
		if = {
			limit = { any_living_character = { any_artifact = { has_variable = dragon_helm_of_dor_lomin } } }
			random_living_character = {
				limit = { any_artifact = { has_variable = dragon_helm_of_dor_lomin } }
				random_artifact = {
					limit = { has_variable = dragon_helm_of_dor_lomin }
					save_scope_as = dragon_helm_of_dor_lomin
				}
			}
		}
		else = {
			hidden_effect = {
				character:k_wastelands_holder = {
					create_artifact_dragon_helm_of_dor_lomin_effect = { OWNER = this }
					scope:newly_created_artifact = { save_scope_as = dragon_helm_of_dor_lomin }
				}
			}
		}
    }
	right_portrait = {
        character = character:linefinwe10
        animation = marshal
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { elven_war_noldor no_headgear }
		}
    }
	center_portrait = {
		character = character:lineofdwalin5
        animation = aggressive_dagger
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_gold_outfit }
		}
    }
	left_portrait = {
		character = character:lineofdwalinII
        animation = personality_forgiving
		animate_if_dead = yes
    }
	lower_right_portrait = {
        character = character:lineoftelchar1
    }
	artifact = {
		target = scope:dragon_helm_of_dor_lomin
		position = lower_center_portrait
		trigger = { exists = scope:dragon_helm_of_dor_lomin }
	}
	lower_left_portrait = {
        character = character:lineofdwalin7
    }
	option = { # Azaghâl's valour shall inspire our own deeds.
		name = dwarven.9912.a
		add_martial_lifestyle_xp = 500
	}
	option = { # As he forged bonds, so too shall we.
		name = dwarven.9912.b
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # Azaghâl stood tall in his age. I shall stand taller in mine.
		name = dwarven.9912.c
		if = {
			limit = {
				has_trait = humble
			}		
			random = {
				chance = 20
				remove_trait = humble
				add_trait_force_tooltip = arrogant
			}
		}
		add_prestige = medium_prestige_gain
		add_stewardship_lifestyle_xp = 250
	}
	after = {
		hidden_effect = {
			if = {
				limit = { scope:dragon_helm_of_dor_lomin = { scope:owner = character:k_wastelands_holder } }
				destroy_artifact ?= scope:dragon_helm_of_dor_lomin
			}
		}
	}
}

dwarven.9915 = { # Eldran I, the First Greybeard, who founded the great monastery of Zelemabkhan atop Mount Dolmed
	type = activity_event
	title = dwarven.9915.t
	desc = dwarven.9915.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = wilderness_mountains }
	right_portrait = {
        character = character:lineofdwalinI
        animation = dead
		animate_if_dead = yes
    }
	center_portrait = {
        character = character:lineofeldran1
        animation = personality_zealous
		animate_if_dead = yes	
    }
	left_portrait = {
		character = character:lineofuriI
		animation = dead
		animate_if_dead = yes
	}
	option = { # One day, we shall walk the thousand steps in his memory.
		name = dwarven.9915.a
		if = {
			limit = {
				has_trait = cynical
			}		
			random = {
				chance = 20
				remove_trait = zealous
				add_trait_force_tooltip = zealous
			}
		}
		add_piety = major_piety_gain
		add_learning_lifestyle_xp = 250
	}
	option = { # We honour deeds, not dusty echoes.
		name = dwarven.9915.b
		add_prestige = major_prestige_gain
		add_martial_lifestyle_xp = 250
	}
}

dwarven.9919 = { # Skorgrím Dourhand, betrayer who stole the Ring of the Firebeards from Úri V and Ring of the Broadbeams from Dwálin V
	type = activity_event
	title = dwarven.9919.t
	desc = dwarven.9919.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = forodwaith }
	trigger = {
		game_start_date >= 5408.10.13 # Skorgrím Dourhand must be dead!
	}
	right_portrait = {
		character = character:lineofdwalinV
        animation = disbelief
		animate_if_dead = yes
	}
	center_portrait = {
        character = character:lineofdourhand17
        animation = beg
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_gold_outfit }
		}
    }
	left_portrait = {
		character = character:lineofuri67
        animation = disapproval
		animate_if_dead = yes
    }
	immediate = {
		random_artifact = {
			limit = { has_variable = ring_of_firebeards }
			save_scope_as = ring_of_firebeards
		}
		random_artifact = {
			limit = { has_variable = ring_of_broadbeams }
			save_scope_as = ring_of_broadbeams
		}
	}
	artifact = {
		target = scope:ring_of_firebeards
		position = lower_left_portrait
		trigger = { exists = scope:ring_of_firebeards }
	}
	artifact = {
		target = scope:ring_of_broadbeams
		position = lower_right_portrait
		trigger = { exists = scope:ring_of_broadbeams }
	}
	lower_center_portrait = {
		character = character:nazgul1
	}
	option = { # True greatness is earned, not stolen.
		name = dwarven.9919.a
		if = {
			limit = {
				has_trait = arbitrary
			}		
			random = {
				chance = 20
				remove_trait = arbitrary
				add_trait_force_tooltip = just
			}
		}
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # Though his schemes failed, his cunning shaped the course of history.
		name = dwarven.9919.b
		if = {
			limit = {
				has_trait = honest
			}		
			random = {
				chance = 20
				remove_trait = honest
				add_trait_force_tooltip = deceitful
			}
		}
		add_intrigue_lifestyle_xp = 500
	}
}

################################
# THE IRONFISTS
# 0400-0499
# by Jagua
################################

dwarven.9951 = { # Sindri I, the Rich
	type = activity_event
	title = dwarven.9951.t
	desc = dwarven.9951.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = market_dwarven }
	right_portrait = {
        character = character:lineofnurwe2
        animation = personality_content
		animate_if_dead = yes
    }
	center_portrait = {
        character = character:lineofsindriI
        animation = personality_cynical
		animate_if_dead = yes
    }
	left_portrait = {
        character = character:lineofthulinI
        animation = worry
		animate_if_dead = yes
    }
	option = { # Let our legacy be etched in craft, as his was.
		name = dwarven.9951.a
		add_crafting_lifestyle_xp = 500
	}
	option = { # Let the forges burn, and the halls rise.
		name = dwarven.9951.b
		add_stewardship_lifestyle_xp = 500
	}
}

dwarven.9952 = { # Sindri II, the Gilded
	type = activity_event
	title = dwarven.9952.t
	desc = dwarven.9952.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = market_dwarven }
	center_portrait = {
      character = character:lineofsindriII
        animation = personality_greedy
		animate_if_dead = yes
    }
	option = { # Trade is its own craft, as he showed.
		name = dwarven.9952.a
		add_stewardship_lifestyle_xp = 500
	}
	option = { # Like him, we shall temper wealth with craft and toil.
		name = dwarven.9952.b
		add_crafting_lifestyle_xp = 500
	}
}

dwarven.9953 = { # Sindri III
	type = activity_event
	title = dwarven.9953.t
	desc = dwarven.9953.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = market_dwarven }
	trigger = {
		game_start_date >= 4339.10.11 # The Ring of the Ironfists must have been destroyed already
	}
	immediate = {
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_ring_of_ironfists_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_ironfists }
			}
		}
	}
	center_portrait = {
        character = character:lineofsindriIII
        animation = personality_greedy
		animate_if_dead = yes
    }
	lower_center_portrait = {
		character = character:lineofsindri29
	}
	artifact = {
		target = scope:ring_of_ironfists
		position = lower_left_portrait
		trigger = { exists = scope:ring_of_ironfists }
	}
	option = { 
		name = dwarven.9953.a # Let us value peace and neutrality, as he once did.
		add_diplomacy_lifestyle_xp = 500
	}
	option = { 
		name = dwarven.9953.b # It was their skill in war that secured their renown.
		add_martial_lifestyle_xp = 500
	}
	after = {
		hidden_effect = {
			destroy_artifact ?= scope:ring_of_ironfists
		}
	}
}

dwarven.9954 = { # Sindri IV, the Burned
	type = activity_event
	title = dwarven.9954.t
	desc = dwarven.9954.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = smaug_destruction }
	trigger = {
		game_start_date >= 4339.10.11 # Sindri IV must be dead!
	}
	immediate = {
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_ring_of_ironfists_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_ironfists }
			}
		}
	}
	right_portrait = {
		character = character:lineofsindri107
        animation = severelywounded
		animate_if_dead = yes
    }
	center_portrait = {
      	character = character:lineofsindriIV
        animation = war_defender
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
    }
	left_portrait = {
     	character = character:lineofdurinIV
        animation = personality_vengeful
		animate_if_dead = yes
    }
	lower_center_portrait = {
		character = character:lineofsindri102
	}
	artifact = {
		target = scope:ring_of_ironfists
		position = lower_left_portrait
		trigger = { exists = scope:ring_of_ironfists }
	}
	option = { # Though his dreams were buried in ash, his bravery endures in memory.
		name = dwarven.9954.a
		add_martial_lifestyle_xp = 500
	}
	option = { # He strove tirelessly to bring prosperity back to his kin.
		name = dwarven.9954.b
		add_stewardship_lifestyle_xp = 500
	}
	after = {
		hidden_effect = {
			destroy_artifact ?= scope:ring_of_ironfists
		}
	}
}

dwarven.9955 = { # Sindri V, the Wanderer
	type = activity_event
	title = dwarven.9955.t
	desc = dwarven.9955.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = wilderness_savanna }
	trigger = {
		game_start_date >= 5865.9.21 # Sindri V must be dead!
	}
	right_portrait = {
		character = character:lineofsindri91
        animation = war_defender
		animate_if_dead = yes
    }
	center_portrait = {
      	character = character:lineofsindriV
        animation = holding_staff
		animate_if_dead = yes
    }
	left_portrait = {
     	character = character:lineofsindri92
        animation = war_defender
		animate_if_dead = yes
    }
	lower_center_portrait = {
		character = character:lineofsindri74
	}
	option = { # May our feet ever follow his restless path, seeking kin and kinship.
		name = dwarven.9955.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # May we never cease to seek knowledge from unexpected places.
		name = dwarven.9955.b
		add_wanderer_lifestyle_xp = 500
	}
}

dwarven.9956 = { # Sindri VI, the Mercenary
	type = activity_event
	title = dwarven.9956.t
	desc = dwarven.9956.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = dimril_dale }
	trigger = {
		game_start_date >= 6939.12.19 # Sindri V must be dead!
	}
	right_portrait = {
		character = character:lineofdurin82
        animation = personality_vengeful
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
    }
	center_portrait = {
     	character = character:lineofsindriVI
        animation = aggressive_axe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
    }
	left_portrait = {
   	character = character:lineofuriVI
        animation = marshal_axe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_bronze_outfit }
		}
    }
	lower_right_portrait = {
		character = character:lineofdurin90
	}
	lower_center_portrait = {
		character = character:lineofazog1
	}
	lower_left_portrait = {
		character = character:lineofdurin81
	}
	option = { # They forged a lasting brotherhood in the crucible of battle.
		name = dwarven.9956.a
		add_martial_lifestyle_xp = 500
	}
	option = { # Our strength lies in the unity of all clans, unbroken and unyielding.
		name = dwarven.9956.b
		add_diplomacy_lifestyle_xp = 500
	}
}

dwarven.9957 = { # Ôrn, the Avaricious
	type = activity_event
	title = dwarven.9957.t
	desc = dwarven.9957.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = barad_dur }
	trigger = {
		game_start_date >= 4339.10.11 # The Ring of the Ironfists must have been destroyed already
	}
	right_portrait = {
		character = character:lineofsindri52
		animation = personality_vengeful
		animate_if_dead = yes
	}
	center_portrait = {
    	character = character:lineofsindri102
       	animation = spymaster
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
    }
	left_portrait = {
    	character = character:lineofdurinIV
       	animation = anger
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
    }
	immediate = {
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_ring_of_ironfists_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_ironfists }
			}
		}
	}
	artifact = {
		target = scope:ring_of_ironfists
		position = lower_left_portrait
		trigger = { exists = scope:ring_of_ironfists }
	}
	lower_center_portrait = {
		character = character:lineofsauron
	}
	lower_right_portrait = {
		character = character:lineofsindri104
	}
	option = { # 
		name = dwarven.9957.a
		add_martial_lifestyle_xp = 500
	}
	option = { # 
		name = dwarven.9957.b
		add_intrigue_lifestyle_xp = 500
	}
	after = {
		hidden_effect = {
			destroy_artifact ?= scope:ring_of_ironfists
		}
	}
}

dwarven.9958 = { # Thrîs, the Peacemaker
	type = activity_event
	title = dwarven.9958.t
	desc = dwarven.9958.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = kitchen_dwarven }
	right_portrait = {
		character = character:lineofsindri0c
		animation = personality_vengeful
		animate_if_dead = yes
	}
	center_portrait = {
    	character = character:lineofsindri0csister
        animation = personality_callous
		animate_if_dead = yes
    }
	left_portrait = {
     	character = character:lineofdhrim1
        animation = war_attacker
		animate_if_dead = yes
    }
	lower_right_portrait = {
		character = character:lineofsindri0cbrother1
	}
	lower_center_portrait = {
		character = character:lineofthulin0cbrother 
	}
	lower_left_portrait = {
		character = character:lineofsindri0cbrother2
	}
	option = { # Her reign proved that peace, though bitter, can bind what pride has broken.
		name = dwarven.9958.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # From her sorrow we may learn what pride refused to teach.
		name = dwarven.9958.b
		add_learning_lifestyle_xp = 500
	}
}

################################
# THE STIFFBEARDS
# 0500-0599
# by Jagua
################################

dwarven.9961 = { # Thúlin I, the Swift
	type = activity_event
	title = dwarven.9961.t
	desc = dwarven.9961.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = corridor_dwarven }
	right_portrait = {
		character = character:lineofthulin0abrother
		animation = dead
		animate_if_dead = yes
	}
	center_portrait = {
      	character = character:lineofthulinI
        animation = worry
		animate_if_dead = yes
   	}
	left_portrait = {
		character = character:lineofsindriI
		animation = personality_cynical
		animate_if_dead = yes
	}
	option = { # Let our toil match his pace, swift and unrelenting.
		name = dwarven.9961.a
		add_crafting_lifestyle_xp = 500
	}
	option = { # As he laid his son to rest, so shall we uphold the dignity of the fallen.
		name = dwarven.9961.b
		add_stewardship_lifestyle_xp = 500
	}
}

dwarven.9962 = { # Thúlin II, the Prolific
	type = activity_event
	title = dwarven.9962.t
	desc = dwarven.9962.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = corridor_dwarven }
	right_portrait = {
		character = character:lineofthulin7
		animation = personality_cynical
		animate_if_dead = yes
	}
	center_portrait = {
      	character = character:lineofthulinII
        animation = happiness
		animate_if_dead = yes
   	}
	left_portrait = {
		character = character:secondlineofthulin1
		animation = personality_compassionate
		animate_if_dead = yes
	}
	lower_left_portrait = {
		character = character:lineofdharam9
	}
	lower_center_portrait = {
		character = character:lineofthulin16
	}
	option = { # Though our kin may dwell far, family's strength keeps us united.
		name = dwarven.9962.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # Through him, we are reminded that reaching outward can enrich what lies within.
		name = dwarven.9962.b
		add_stewardship_lifestyle_xp = 500
	}
}

dwarven.9963 = { # Thúlin III, the Steadfast
	type = activity_event
	title = dwarven.9963.t
	desc = dwarven.9963.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = corridor_dwarven }
	immediate = {
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_ring_of_stiffbeards_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_stiffbeards }
			}
		}
	}
	right_portrait = {
		character = character:lineofthrarIII
		animation = war_attacker
		animate_if_dead = yes
	}
	center_portrait = {
      	character = character:lineofthulinIII
        animation = war_defender
		animate_if_dead = yes
   	}
	left_portrait = {
		character = character:lineofbavorIII
		animation = steward
		animate_if_dead = yes
	}
	lower_right_portrait = {
		character = character:lineofdharam21
	}
	lower_left_portrait = {
		character = character:secondlineofthulin10
	}
	artifact = {
		target = scope:ring_of_stiffbeards
		position = lower_center_portrait
		trigger = { exists = scope:ring_of_stiffbeards }
	}
	option = { # His resolve preserved what fury could have doomed.
		name = dwarven.9963.a
		add_stewardship_lifestyle_xp = 500
	}
	option = { # Through him, we are reminded that reaching outward can enrich what lies within.
		name = dwarven.9963.b
		add_martial_lifestyle_xp = 500
	}
	after = {
		hidden_effect = {
			destroy_artifact ?= scope:ring_of_stiffbeards
		}
	}
}

dwarven.9964 = { # Thúlin IV, the Charred
	type = activity_event
	title = dwarven.9964.t
	desc = dwarven.9964.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = smaug_destruction }
	immediate = {
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_ring_of_stiffbeards_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_stiffbeards }
			}
		}
	}
	right_portrait = {
		character = character:lineofthulin75
		animation = personality_vengeful
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
	}
	center_portrait = {
      	character = character:lineofthulinIV
        animation = aggressive_axe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
   	}
	left_portrait = {
		character = character:lineofthulin75a
		animation = personality_vengeful
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
	}
	artifact = {
		target = scope:ring_of_stiffbeards
		position = lower_center_portrait
		trigger = { exists = scope:ring_of_stiffbeards }
	}
	option = { # His bravery and sacrifice shielded our kin from utter ruin.
		name = dwarven.9964.a
		if = {
			limit = {
				has_trait = craven
			}		
			random = {
				chance = 20
				remove_trait = craven
				add_trait_force_tooltip = brave
			}
		}
		add_martial_lifestyle_xp = 500
	}
	option = { # In pursuing great wealth, he upheld the noble traditions of our people.
		name = dwarven.9964.b
		if = {
			limit = {
				has_trait = generous
			}		
			random = {
				chance = 20
				remove_trait = generous
				add_trait_force_tooltip = greedy
			}
		}
		add_stewardship_lifestyle_xp = 500
	}
	after = {
		hidden_effect = {
			destroy_artifact ?= scope:ring_of_stiffbeards
		}
	}
}

dwarven.9965 = { # Thúlin V
	type = activity_event
	title = dwarven.9965.t
	desc = dwarven.9965.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = wilderness_mountains }
	trigger = {
		game_start_date >= 5706.12.27 # Fall of Kibilzahar is mentioned in the event.
	}
	center_portrait = {
      	character = character:lineofthulinV
        animation = personality_cynical
		animate_if_dead = yes
   	}
	option = { # His guidance created opportunities for his people when times were hard.
		name = dwarven.9965.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # His foresight laid foundations that may yet bear fruit.
		name = dwarven.9965.b
		add_learning_lifestyle_xp = 500
	}
}

dwarven.9966 = { # Thúlin VI, the Forlorn
	type = activity_event
	title = dwarven.9966.t
	desc = dwarven.9966.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = market_dwarven }
	trigger = {
		game_start_date >= 6270.4.7 # Thúlin VI must be dead!
	}
	right_portrait = {
		character = character:lineofthulin115
		animation = personality_zealous
		animate_if_dead = yes
	}
	center_portrait = {
      	character = character:lineofthulinVI
        animation = dead
		animate_if_dead = yes
   	}
	left_portrait = {
		character = character:lineofthulin113
		animation = personality_zealous
		animate_if_dead = yes
	}
	lower_left_portrait = {
		character = character:lineofthulin0abrother
	}
	lower_center_portrait = {
		character = character:lineofthulin105
	}
	option = { # He guided his people through their hardest days, and built for their return.
		name = dwarven.9966.a
		add_wanderer_lifestyle_xp = 500
	}
	option = { # He emboldened a broken people, readying them for the war to come.
		name = dwarven.9966.b
		add_martial_lifestyle_xp = 500
	}
}

dwarven.9967 = { # Hevdrok, the Hero
	type = activity_event
	title = dwarven.9967.t
	desc = dwarven.9967.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = smaug_destruction }
	center_portrait = {
		character = character:lineofhevdrok
		animation = aggressive_longaxe
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_steel_outfit }
		}
	}
	option = { # In valour and strength, our legends are born.
		name = dwarven.9967.a
		if = {
			limit = {
				has_trait = craven
			}		
			random = {
				chance = 20
				remove_trait = craven
				add_trait_force_tooltip = brave
			}
		}
		add_martial_lifestyle_xp = 500
	}
	option = { # He struck unseen where others could not.
		name = dwarven.9967.b
		add_intrigue_lifestyle_xp = 500
	}
}

################################
# THE BLACKLOCKS
# 0600-0699
# by Jagua
################################

dwarven.9971 = { # Thrár I, the Proud
	type = activity_event
	title = dwarven.9971.t
	desc = dwarven.9971.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = corridor_dwarven }
	right_portrait = {
		character = character:lineofbavorI
		animation = personality_content
		animate_if_dead = yes
	}
	left_portrait = {
       character = character:lineofthrarI
        animation = marshal
		animate_if_dead = yes
    }
	option = { # Let our deeds resound louder than his voice.
		name = dwarven.9971.a
		if = {
			limit = {
				has_trait = humble
			}		
			random = {
				chance = 20
				remove_trait = humble
				add_trait_force_tooltip = arrogant
			}
		}
		add_stewardship_lifestyle_xp = 500
	}
	option = { # Even pride must kneel before wisdom.
		name = dwarven.9971.b
		add_learning_lifestyle_xp = 500
	}
}

dwarven.9972 = { # Thrár II, South-King
	type = activity_event
	title = dwarven.9972.t
	desc = dwarven.9972.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = market_dwarven }
	trigger = {
		game_start_date >= 3479.6.21 # Bizarûldûm Succession Crisis is mentioned in the event.
	}
	right_portrait = {
		character = character:lineofbavorII
		animation = steward
		animate_if_dead = yes
	}
	center_portrait = {
        character = character:lineofthrarII
        animation = chancellor
		animate_if_dead = yes
    }
	left_portrait = {
	    character = character:lineofbavor14
        animation = love
	    animate_if_dead = yes
    }
	option = { # He built with purpose. So too shall we.
		name = dwarven.9972.a
		add_stewardship_lifestyle_xp = 500
	}
	option = { # As he united houses, so shall I forge new pacts.
		name = dwarven.9972.b
		add_diplomacy_lifestyle_xp = 500
	}
}

dwarven.9973 = { # Thrár III, the Bloodstained
	type = activity_event
	title = dwarven.9973.t
	desc = dwarven.9973.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = mining_activity }
	right_portrait = {
      	character = character:lineofthulinIII
        animation = war_defender
		animate_if_dead = yes
    }
	center_portrait = {
      	character = character:lineofthrarIII
        animation = marshal_shield
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_blacklock_outfit }
		}
    }
	left_portrait = {
       	character = character:lineofbavorIII
       	animation = steward
		animate_if_dead = yes
    }
	lower_center_portrait = {
		character = character:lineofgorovod3
	}
	immediate = {
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_ring_of_blacklocks_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_blacklocks }
			}
		}
	}
	artifact = {
		target = scope:ring_of_blacklocks
		position = lower_left_portrait
		trigger = { exists = scope:ring_of_blacklocks }
	}
	option = { # Thrár's decisive leadership was praiseworthy.
		name = dwarven.9973.a
		add_martial_lifestyle_xp = 500
	}
	option = { # He possessed the wisdom to act when the moment demanded it.
		name = dwarven.9973.b
		add_learning_lifestyle_xp = 500
	}
	after = {
		hidden_effect = {
			destroy_artifact ?= scope:ring_of_blacklocks 
		}
	}
}

dwarven.9974 = { # Thrár IV, the Three-Day King
	type = activity_event
	title = dwarven.9974.t
	desc = dwarven.9974.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = smaug_destruction }
	trigger = {
		game_start_date >= 3479.6.21 # Thrár IV must be dead!
	}
	right_portrait = {
		character = character:lineofbavor42
		animation = thinking
		animate_if_dead = yes
	}
	center_portrait = {
      	character = character:lineofthrarIV
        animation = aggressive_sword
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_blacklock_outfit }
		}
    }
	left_portrait = {
      	character = character:lineofthrar51
        animation = severelywounded
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_blacklock_outfit }
		}
    }
	immediate = {
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_ring_of_blacklocks_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_blacklocks }
				create_artifact_ring_of_stonefoots_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_stonefoots }
			}
		}
		random_artifact = {
			limit = { has_variable = cursed_sword_of_blacklocks }
			save_scope_as = cursed_sword_of_blacklocks
		}
	}
	artifact = {
		target = scope:ring_of_blacklocks
		position = lower_left_portrait
		trigger = { exists = scope:ring_of_blacklocks }
	}
	artifact = {
		target = scope:cursed_sword_of_blacklocks
		position = lower_center_portrait
		trigger = { exists = scope:cursed_sword_of_blacklocks }
	}
	artifact = {
		target = scope:ring_of_stonefoots
		position = lower_right_portrait
		trigger = { exists = scope:ring_of_stonefoots }
	}
	
	option = { # I too shall face great peril if duty demands it.
		name = dwarven.9974.a
		add_martial_lifestyle_xp = 500
		if = {
			limit = {
				has_trait = craven
			}		
			random = {
				chance = 20
				remove_trait = craven
				add_trait_force_tooltip = brave
			}
		}
		random = {
			chance = 20
			if = {
				limit = { has_trait = cavern_commander }
				add_trait_xp = {
					trait = cavern_commander
					value = 20
				}
			}
			else = { add_trait =  cavern_commander }
		}
	}
	option = { # A shame to see such works of craftsmanship lost to time.
		name = dwarven.9974.b
		add_crafting_lifestyle_xp = 500
		random = {
			chance = 20
			if = {
				limit = { has_trait = lifestyle_artifact_crafting }
				add_trait_xp = {
						trait = lifestyle_artifact_crafting
						track = weapon_smith
						value = minor_trait_xp
				}
			}
			else = { add_trait = lifestyle_artifact_crafting }
		}
	}
	after = {
		hidden_effect = {
			destroy_artifact ?= scope:ring_of_blacklocks 
			destroy_artifact ?= scope:ring_of_stonefoots
		}
	}
}

dwarven.9975 = { # Thrár V, the Rebuilder
	type = activity_event
	title = dwarven.9975.t
	desc = dwarven.9975.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = wilderness_underground }
	trigger = {
		game_start_date >= 5321.10.24 # Thrár V must be dead!
	}
	right_portrait = {
		character = character:thirdlineofthrar57
		animation = disbelief
		animate_if_dead = yes
	}
	left_portrait = {
      	character = character:lineofthrarV
        animation = steward
		animate_if_dead = yes
    }
	option = { # In times of trial, true rulers do not falter in their duty.
		name = dwarven.9975.a
		if = {
			limit = {
				has_trait = lazy
			}		
			random = {
				chance = 20
				remove_trait = lazy
				add_trait_force_tooltip = diligent
			}
		}
		add_stewardship_lifestyle_xp = 500
	}
	option = { # Endurance means little without strength to defend it.
		name = dwarven.9975.b
		add_martial_lifestyle_xp = 500
	}
}

dwarven.9976 = { # Thrár VI, the Valiant
	type = activity_event
	title = dwarven.9976.t
	desc = dwarven.9976.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = wilderness_mountains }
	trigger = {
		game_start_date >= 6523.10.8 # Thrár VI must be dead!
	}
	right_portrait = {
		character = character:nazgul4
		animation = disgust
		animate_if_dead = yes
	}
	left_portrait = {
     	character = character:lineofthrarVI
        animation = celebrate_sword
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_blacklock_outfit }
		}
    }
	option = { # In times of darkness, unity is the weapon that ensures survival.
		name = dwarven.9976.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # Unity is valuable, but strength of arms is what secures victory.
		name = dwarven.9976.b
		add_martial_lifestyle_xp = 500
	}
}

dwarven.9977 = { # Rôn, the Exile
	type = activity_event
	title = dwarven.9977.t
	desc = dwarven.9977.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = corridor_dwarven }
	trigger = {
		game_start_date >= 6538.5.5 # Rôn the Exile must be dead!
	}
	right_portrait = {
		character = character:secondlineofthrar73
		animation = personality_dishonorable
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofbarukodlig1
		animation = marshal_axe
		animate_if_dead = yes
		outfit_tags = { 
				dwarf_war_blacklock_outfit 
				dwarf_war_blacklock_headgear
		}
	}
	left_portrait = {
      	character = character:secondlineofthrar78
        animation = spymaster
		animate_if_dead = yes
    }
	lower_right_portrait = {
		character = character:secondlineofthrar75
	}
	lower_center_portrait = {
		character = character:lineofbarukodlig3
	}
	lower_left_portrait = {
		character = character:lineofsauron
	}
	option = { # The axe remembers when the blood forgets.
		if = {
			limit = {
				has_trait = forgiving
			}		
			random = {
				chance = 20
				remove_trait = forgiving
				add_trait_force_tooltip = vengeful
			}
		}
		name = dwarven.9977.a
		add_martial_lifestyle_xp = 500
	}
	option = { # Not all who strayed were beyond redemption.
		if = {
			limit = {
				has_trait = vengeful
			}		
			random = {
				chance = 20
				remove_trait = vengeful
				add_trait_force_tooltip = forgiving
			}
		}
		name = dwarven.9977.b
		add_diplomacy_lifestyle_xp = 500
	}
}

dwarven.9978 = { # Gorovôd, the Goblinslayer
	type = activity_event
	title = dwarven.9978.t
	desc = dwarven.9978.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = mining_activity }
	right_portrait = {
		character = character:lineofthrarIII
		animation = marshal_shield
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { dwarf_war_blacklock_outfit }
		}
	}
	center_portrait = {
		character = character:lineofgorovod3
		animation = celebrate_sword
		animate_if_dead = yes
		triggered_outfit = {
			outfit_tags = { 
				dwarf_war_blacklock_outfit 
				dwarf_war_blacklock_headgear
			}
		}
	}
	left_portrait = {
      	character = character:lineofgorovod4
        animation = fear
		animate_if_dead = yes
    }
	option = { # Some legacies are carved in blood, not stone.
		if = {
			limit = {
				has_trait = forgiving
			}		
			random = {
				chance = 20
				remove_trait = forgiving
				add_trait_force_tooltip = vengeful
			}
		}
		name = dwarven.9978.a
		add_martial_lifestyle_xp = 500
	}
	option = { # His fury bought peace where none dared seek it.
		if = {
			limit = {
				has_trait = vengeful
			}		
			random = {
				chance = 20
				remove_trait = vengeful
				add_trait_force_tooltip = forgiving
			}
		}
		name = dwarven.9978.b
		add_diplomacy_lifestyle_xp = 500
	}
}

################################
# THE STONEFOOTS
# 0700-0799
# by Jagua
################################

dwarven.9981 = { # Bavór I, the Cold
	type = activity_event
	title = dwarven.9981.t
	desc = dwarven.9981.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = corridor_dwarven }
	right_portrait = {
		character = character:lineofthrarI
		animation = marshal
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofbavorI
		animation = personality_content
		animate_if_dead = yes
	}
	left_portrait = {
      	character = character:lineofzabad
       	animation = admiration
		animate_if_dead = yes
    }
	option = { # His calm demeanour forged strong and lasting alliances.
		name = dwarven.9981.a
		if = {
			limit = {
				has_trait = wrathful
			}		
			random = {
				chance = 20
				remove_trait = wrathful
				add_trait_force_tooltip = calm
			}
		}
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # His careful hand secured wealth and order for generations.
		name = dwarven.9981.b
		add_stewardship_lifestyle_xp = 500
	}
}

dwarven.9982 = { # Bavór II North-King
	type = activity_event
	title = dwarven.9982.t
	desc = dwarven.9982.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = market_dwarven }
	right_portrait = {
		character = character:lineofthrarII
		animation = chancellor
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofbavorII
		animation = steward
		animate_if_dead = yes
	}
	left_portrait = {
       character = character:lineofbavor14
       animation = interested
		animate_if_dead = yes
    }
	option = { # Steadfast counsel shapes the mightiest plans.
		name = dwarven.9982.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # Titles fade, but true wisdom endures.
		name = dwarven.9982.b
		add_learning_lifestyle_xp = 500
	}
}

dwarven.9983 = { # Bavór III, the Steward
	type = activity_event
	title = dwarven.9983.t
	desc = dwarven.9983.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = market_dwarven }
	right_portrait = {
		character = character:lineofthrarIII
		animation = marshal_shield
		animate_if_dead = yes
		outfit_tags = { 
				dwarf_war_blacklock_outfit 
			}
	}
	center_portrait = {
		character = character:lineofbavorIII
		animation = steward
		animate_if_dead = yes
	}
	left_portrait = {
		character = character:lineofthulinIII
		animation = war_defender
		animate_if_dead = yes
	}
	immediate = {
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_ring_of_stonefoots_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_stonefoots }
			}
		}
	}
	artifact = {
		target = scope:ring_of_stonefoots
		position = lower_left_portrait
		trigger = { exists = scope:ring_of_stonefoots }
	}
	lower_center_portrait = {
		character = character:lineofbavor26
	}
	after = {
		hidden_effect = {
			destroy_artifact ?= scope:ring_of_stonefoots
		}
	}
	option = { # Victory is forged by more than swords.
		name = dwarven.9983.a
		add_stewardship_lifestyle_xp = 500
	}
	option = { # His knowledge steadied the realm in difficult times.
		name = dwarven.9983.b
		add_learning_lifestyle_xp = 500
	}
}

dwarven.9984 = { # Bavór IV Sole-King
	type = activity_event
	title = dwarven.9984.t
	desc = dwarven.9984.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = throne_room }
	trigger = {
		game_start_date >= 3928.3.6 # Bavor IV must be dead!
	}
	right_portrait = {
		character = character:lineofthrarIV
		animation = dead
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofbavorIV
		animation = personality_compassionate
		animate_if_dead = yes
	}
	left_portrait = {
      	character = character:secondlineofthrar33
        animation = marshal
		animate_if_dead = yes
    }
	immediate = {
		hidden_effect = { 
			character:k_wastelands_holder = {
				create_artifact_ring_of_blacklocks_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_blacklocks }
				create_artifact_ring_of_stonefoots_effect = { OWNER = this }
				scope:newly_created_artifact = { save_scope_as = ring_of_stonefoots }
			}
		}
	}
	artifact = {
		target = scope:ring_of_stonefoots
		position = lower_left_portrait
		trigger = { exists = scope:ring_of_stonefoots }
	}
	lower_center_portrait = {
		character = character:lineofthrar51
	}
	artifact = {
		target = scope:ring_of_blacklocks
		position = lower_right_portrait
		trigger = { exists = scope:ring_of_blacklocks }
	}
	option = { # He rebuilt what pride had shattered.
		name = dwarven.9984.a
		add_stewardship_lifestyle_xp = 500
	}
	option = { # He guided a wounded realm toward lasting peace.
		name = dwarven.9984.b
		add_diplomacy_lifestyle_xp = 500
	}
	after = {
		hidden_effect = {
			destroy_artifact ?= scope:ring_of_blacklocks 
			destroy_artifact ?= scope:ring_of_stonefoots
		}
	}
}

dwarven.9985 = { # Bavór V
	type = activity_event
	title = dwarven.9985.t
	desc = dwarven.9985.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = throne_room }
	trigger = {
		game_start_date >= 5167.12.19 # Bavor V must be dead!
	}
	center_portrait = {
		character = character:lineofbavorV
		animation = personality_content
		animate_if_dead = yes
	}
	option = { # Peace is a treasure that nurtures the soul.
		name = dwarven.9985.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # Through craft and wisdom, we endure beyond our years.
		name = dwarven.9985.b
		add_crafting_lifestyle_xp = 500
	}
}

dwarven.9986 = { # Bavór VI
	type = activity_event
	title = dwarven.9986.t
	desc = dwarven.9986.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = corridor_dwarven }
	trigger = {
		game_start_date >= 6684.12.21 # Bavor VI must be dead!
	}
	right_portrait = {
		character = character:nazgul7
		animation = personality_cynical
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofbavorVI
		animation = aggressive_longaxe
		animate_if_dead = yes
	}
	left_portrait = {
      	character = character:lineofbarukodlig1
       	animation = marshal
		animate_if_dead = yes
    }
	lower_center_portrait = {
		character = character:lineofbavor84
	}
	option = { # His axe stayed sharp, ready to meet shadow with steel.
		name = dwarven.9986.a
		add_martial_lifestyle_xp = 500
	}
	option = { # He bore the weight of his people's future with steady hands.
		name = dwarven.9986.b
		add_stewardship_lifestyle_xp = 500
	}
}

dwarven.9987 = { # Zabad, the Jewelwright
	type = activity_event
	title = dwarven.9987.t
	desc = dwarven.9987.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = market_dwarven }
	right_portrait = {
		character = character:lineofbavorI
		animation = personality_content
		animate_if_dead = yes
	}
	center_portrait = {
      	character = character:lineofzabad
        animation = admiration
		animate_if_dead = yes
    }
	left_portrait = { #
      	character = character:lineofnurwe2
        animation = personality_content
		animate_if_dead = yes
    }
	option = { # Let our hands honour his memory in craft.
		name = dwarven.9987.a
		add_crafting_lifestyle_xp = 500
	}
	option = { # His treasures shall not be forgotten.
		name = dwarven.9987.b
		add_stewardship_lifestyle_xp = 500
	}
}

dwarven.9988 = { # Bhofôr, the Bridgemaster
	type = activity_event
	title = dwarven.9988.t
	desc = dwarven.9988.desc
	content_source = realms_dlc
	theme = dwarven
	override_background = { reference = corridor_dwarven }
	right_portrait = {
		character = character:lineofbavor16
		animation = personality_content
		animate_if_dead = yes
	}
	center_portrait = {
      	character = character:lineofbhofor
        animation = war_attacker
		animate_if_dead = yes
    }
	left_portrait = {
     	character = character:lineofthrar21
        animation = personality_honorable
		animate_if_dead = yes
    }
	lower_right_portrait = {
		character = character:lineofbavorII
	}
	lower_center_portrait = {
		character = character:thirdlineofthrar1
	}
	lower_left_portrait = {
		character = character:lineofthrarII
	}
	option = { # Stone may weather, but fellowship endures.
		name = dwarven.9988.a
		add_diplomacy_lifestyle_xp = 500
	}
	option = { # Let our next work rise as proudly as Bhofôr's bridge.
		name = dwarven.9988.b
		add_crafting_lifestyle_xp = 500
	}
}
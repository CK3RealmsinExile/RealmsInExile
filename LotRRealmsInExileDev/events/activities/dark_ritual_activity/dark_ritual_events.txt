########################################
# Sorcery
# by Gseg and ispanets
# recoded by Jaco_Daan (the Snail Guy)
########################################
namespace = lotr_sorcery_ritual

lotr_sorcery_ritual.0001 = { #You and your apprentice (if you have one) prepare several reagents
	type = activity_event
	content_source = realms_dlc
	theme = learning_scholarship_focus
	override_background = { reference = temple_dwarven }
	title = lotr_sorcery_ritual.0001.t
	desc = {
		desc = lotr_sorcery_ritual.0001.desc.intro
		triggered_desc = {
			trigger = {
				any_relation = { type = apprentice_sorcerer }
			}
			desc = lotr_sorcery_ritual.0001.desc.apprentice
		}
	}
	right_portrait = {
		character = root
		animation = personality_zealous
	}

	cooldown = { days = 21 }

	widgets = {
		widget = {
			gui = "lotr_shader_event_morgulfire"
			container = "lotr_shader_event_background"
		}
	}
	
	option = { # Taking extra time
		name = lotr_sorcery_ritual.0001.a
		sorcery_activity_success_change_effect = { CHANGE = increase_minor }
		#stress loss
		stress_impact = {
			base = medium_stress_impact_gain
			diligent = minor_stress_impact_loss
		}
	}
	
	option = { # Rushing forward risks mistakes
		name = lotr_sorcery_ritual.0001.b
		#stress loss
		stress_impact = {
			base = major_stress_impact_loss
			arrogant = minor_stress_impact_loss
			lazy = medium_stress_impact_loss
		}
		add_prestige = minor_prestige_loss
	}
}

lotr_sorcery_ritual.0002 = { #You/Your apprentice lead a prisoner to be sacrificed and stumble
	type = activity_event
	content_source = realms_dlc
	theme = learning_scholarship_focus
	override_background = { reference = temple_dwarven }

	title = lotr_sorcery_ritual.0002.t
	desc = {
		desc = lotr_sorcery_ritual.0002.desc.intro
		first_valid  = {
			triggered_desc = {
				trigger = {
					any_relation = { type = apprentice_sorcerer }
				}
				desc = lotr_sorcery_ritual.0002.desc.apprentice
			}
			desc = lotr_sorcery_ritual.0002.desc.no_apprentice
		}
	}
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scoep:sacrifice
		trigger = { exists = scope:sacrifice }
	}

	cooldown = { days = 21 }

	trigger = { 
		exists = scope:sacrifice
	}

	widgets = {
		widget = {
			gui = "lotr_shader_event_morgulfire"
			container = "lotr_shader_event_background"
		}
	}
	
	option = { #Chase after the prisoner
		name = lotr_sorcery_ritual.0002.a
		custom_tooltip = lotr_sorcery_ritual.0002.a.tt.1
		custom_tooltip = lotr_sorcery_ritual.0002.a.tt.2

		trigger_event = { id = lotr_sorcery_ritual.0003 days = 1}
	}
	
	option = { #Let them escape
		name = lotr_sorcery_ritual.0002.b
	}

	after = {
		sorcery_activity_success_change_effect = { CHANGE = decrease_minor }
	}
}

lotr_sorcery_ritual.0003 = { #The Chase's End
	type = activity_event
	content_source = realms_dlc
	theme = learning_scholarship_focus
	override_background = { reference = temple_dwarven }

	title = lotr_sorcery_ritual.0003.t
	desc = {
		desc = lotr_sorcery_ritual.0003.desc.intro
		first_valid  = {
			triggered_desc = {
				trigger = { any_relation = { type = apprentice_sorcerer } }
				desc = lotr_sorcery_ritual.0003.desc.apprentice
			}
			triggered_desc = {
				desc = lotr_sorcery_ritual.0003.desc.no_apprentice
			}
		}
	}
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:sacrifice
		trigger = { exists = scope:sacrifice }
	}

	widgets = {
		widget = {
			gui = "lotr_shader_event_morgulfire"
			container = "lotr_shader_event_background"
		}
	}
	
	option = { #Chase after the prisoner
		name = lotr_sorcery_ritual.0003.a
		duel = {
			skill = prowess
			value = 10
			30 = {
		 		desc = lotr_sorcery_ritual.0003.a.success
		 		compare_modifier = {
		 			value = scope:duel_value
		 			multiplier = 3
		 			min = -50
		 			max = 50
		 		}
				sorcery_activity_success_change_effect = { CHANGE = increase_medium }
		 	}

		 	70 = {
		 		desc = lotr_sorcery_ritual.0003.a.failure
		 		compare_modifier = {
		 			value = scope:duel_value
		 			multiplier = -3
		 			min = -50
		 			max = 50
		 		}
		 	}
		}
	}
}

lotr_sorcery_ritual.0004 = { #Unseen Whispering
	type = activity_event
	content_source = realms_dlc
	theme = learning_scholarship_focus
	title = lotr_sorcery_ritual.0004.t
	desc = {
		desc = lotr_sorcery_ritual.0004.desc.intro
		first_valid  = {
			triggered_desc = {
				trigger = {
					any_relation = { type = apprentice_sorcerer }
				}
				desc = lotr_sorcery_ritual.0004.desc.apprentice
			}
		}
	}
	override_background = { reference = temple_dwarven }
	left_portrait = {
		character = root
		animation = personality_rational
	}

	cooldown = { days = 21 }

	widgets = {
		widget = {
			gui = "lotr_shader_event_morgulfire"
			container = "lotr_shader_event_background"
		}
	}
	
	option = { #Ignore it and continue working
		name = lotr_sorcery_ritual.0004.a
		sorcery_activity_success_change_effect = { CHANGE = increase_medium }
	}
	
	option = { #What are you?
		name = lotr_sorcery_ritual.0004.b
		add_piety = medium_piety_gain
		sorcery_activity_success_change_effect = { CHANGE = decrease_minor }
	}
}

lotr_sorcery_ritual.0005 = { #A Lingering Doubt
	type = activity_event
	content_source = realms_dlc
	theme = learning_scholarship_focus
	override_background = { reference = temple_dwarven }

	title = lotr_sorcery_ritual.0005.t
	desc = {
		desc = lotr_sorcery_ritual.0005.desc.intro
		first_valid  = {
			triggered_desc = {
				trigger = {
					any_attending_character = {
						any_relation = { type = master_sorcerer }
					}
				}
				desc = lotr_sorcery_ritual.0005.desc.apprentice
			}
			desc = lotr_sorcery_ritual.0005.desc.no_apprentice
		}
	}
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:apprentice
		animation = physician
		trigger = { exists = scope:apprentice }
	}

	immediate = {
		random_attending_character = {
			limit = { any_relation = { type = master_sorcerer } }
			save_scope_as = apprentice
		}
	}

	cooldown = { days = 21 }

	widgets = {
		widget = {
			gui = "lotr_shader_event_morgulfire"
			container = "lotr_shader_event_background"
		}
	}
	
	option = {
		name = lotr_sorcery_ritual.0005.a
		if = {
			limit = { exists = scope:apprentice }
			add_hook = { type = indebted_hook target = scope:apprentice }
		} else = {
			stress_impact = {
				base = major_stress_impact_loss
				arrogant = minor_stress_impact_loss
				lazy = medium_stress_impact_loss
			}
		}
		sorcery_activity_success_change_effect = { CHANGE = decrease_minor }
	}
	
	option = {
		name = lotr_sorcery_ritual.0005.b
		sorcery_activity_success_change_effect = { CHANGE = increase_minor }
		stress_impact = {
			base = medium_stress_impact_gain
			diligent = minor_stress_impact_loss
			lazy = medium_stress_impact_gain
		}
	}
}

lotr_sorcery_ritual.0006 = { #A Distant Cry
	type = activity_event
	content_source = realms_dlc
	theme = learning_scholarship_focus
	override_background = { reference = temple_dwarven }

	title = lotr_sorcery_ritual.0006.t
	desc = {
		desc = lotr_sorcery_ritual.0006.desc.intro
		first_valid  = {
			triggered_desc = {
				trigger = {
					any_relation = { type = apprentice_sorcerer }
				}
				desc = lotr_sorcery_ritual.0006.desc.apprentice
			}
			desc = lotr_sorcery_ritual.0006.desc.no_apprentice
		}
	}
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:apprentice
		animation = paranoia
		trigger = { exists = scope:apprentice }
	}

	immediate = {
		random_attending_character = {
			limit = { any_relation = { type = master_sorcerer } }
			save_scope_as = apprentice
		}
	}

	widgets = {
		widget = {
			gui = "lotr_shader_event_morgulfire"
			container = "lotr_shader_event_background"
		}
	}
	
	option = {
		name = lotr_sorcery_ritual.0006.a
		sorcery_activity_success_change_effect = { CHANGE = increase_minor }
	}
	
	option = {
		name = lotr_sorcery_ritual.0006.b
		sorcery_activity_success_change_effect = { CHANGE = decrease_minor }
		add_piety = medium_piety_gain
	}
}

lotr_sorcery_ritual.0007 = { #The Final Lesson
	type = activity_event
	title = lotr_sorcery_ritual.0007.t
	desc = lotr_sorcery_ritual.0007.desc
	content_source = realms_dlc
	theme = learning_scholarship_focus

	right_portrait = {
		character = root
		animation = throne_room_kneel_1
	}
	left_portrait = {
		character = scope:master_sorcerer
		trigger = { exists = scope:master_sorcerer }
		animation = assassin
	}
	override_background = { reference = temple_dwarven }

	cooldown = { days = 21 }
	
	immediate = {
		random_relation = {
			type = master_sorcerer
			save_scope_as = master_sorcerer
		}
	}

	widgets = {
		widget = {
			gui = "lotr_shader_event_morgulfire"
			container = "lotr_shader_event_background"
		}
	}
	
	option = { #
		name = lotr_sorcery_ritual.0007.a
		random = {
			chance = 60
			custom_tooltip = lotr_sorcery_ritual.0007.a.tt
			modifier = { 
				add = prowess
			}
			modifier = { 
				add = intrigue
			}
		}
	}
}

lotr_sorcery_ritual.0008 = { #A Fractured Mind
	type = activity_event
	title = lotr_sorcery_ritual.0008.t
	desc = lotr_sorcery_ritual.0008.desc
	content_source = realms_dlc
	theme = learning_scholarship_focus

	right_portrait = {
		character = root
		animation = throne_room_kneel_1
	}
	left_portrait = {
		character = scope:master_sorcerer
		trigger = { exists = scope:master_sorcerer }
		animation = assassin
	}
	override_background = { reference = temple_dwarven }

	cooldown = { days = 21 }
	
	immediate = {
		random_relation = {
			type = master_sorcerer
			save_scope_as = master_sorcerer
		}
	}

	trigger = {
		number_of_personality_traits < personality_trait_limit
		NOR = {
			has_trait = trusting
			has_trait = paranoid
		}
	}

	widgets = {
		widget = {
			gui = "lotr_shader_event_morgulfire"
			container = "lotr_shader_event_background"
		}
	}
	
	option = {
		name = lotr_sorcery_ritual.0008.a
		sorcery_activity_success_change_effect = { CHANGE = increase_medium }
		random = {
			chance = 65
			add_trait = paranoid
		}
	}
	
	option = {
		name = lotr_sorcery_ritual.0008.b
		sorcery_activity_success_change_effect = { CHANGE = decrease_minor }
		stress_impact = {
			base = medium_stress_impact_loss
			cynical = minor_stress_impact_loss
			paranoid = medium_stress_impact_gain
		}
	}
}

lotr_sorcery_ritual.0009 = { #A Sudden Illness
	type = activity_event
	title = lotr_sorcery_ritual.0009.t
	desc = {
		desc = lotr_sorcery_ritual.0009.desc
		first_valid  = {
			triggered_desc = {
				trigger = {
					any_attending_character = {
						any_relation = { type = master_sorcerer }
					}
				}
				desc = lotr_sorcery_ritual.0009.desc.apprentice
			}
			desc = lotr_sorcery_ritual.0009.desc.no_apprentice
		}
	}
	content_source = realms_dlc
	theme = learning_scholarship_focus

	right_portrait = {
		character = root
		animation = cough
	}
	left_portrait = {
		character = scope:master_sorcerer
		trigger = { exists = scope:master_sorcerer }
		animation = fear
	}
	override_background = { reference = temple_dwarven }

	cooldown = { days = 21 }
	
	immediate = {
		random_relation = {
			type = master_sorcerer
			save_scope_as = master_sorcerer
		}
	}

	widgets = {
		widget = {
			gui = "lotr_shader_event_morgulfire"
			container = "lotr_shader_event_background"
		}
	}
	
	option = {
		name = lotr_sorcery_ritual.0009.a
		add_trait = ill
		if = {
			limit = { NOT = { has_trait = weak } }
			random = {
				chance = 15
				add_trait = weak
			}
		}
		sorcery_activity_success_change_effect = { CHANGE = increase_major }
	}
	
	option = {
		name = lotr_sorcery_ritual.0009.b
		sorcery_activity_success_change_effect = { CHANGE = decrease_medium }
		stress_impact = {
			base = medium_stress_impact_loss
		}
	}
}

lotr_sorcery_ritual.0010 = { #A Test of Will
	type = activity_event
	title = lotr_sorcery_ritual.0010.t
	desc = {
		desc = lotr_sorcery_ritual.0010.desc
		first_valid  = {
			triggered_desc = {
				trigger = {
					any_attending_character = {
						any_relation = { type = master_sorcerer }
					}
				}
				desc = lotr_sorcery_ritual.0010.desc.apprentice
			}
			desc = lotr_sorcery_ritual.0010.desc.no_apprentice
		}
	}
	content_source = realms_dlc
	theme = learning_scholarship_focus

	right_portrait = {
		character = root
		animation = cough
	}
	left_portrait = {
		character = scope:master_sorcerer
		trigger = { exists = scope:master_sorcerer }
		animation = fear
	}
	override_background = { reference = temple_dwarven }

	cooldown = { days = 21 }
	
	immediate = {
		random_relation = {
			type = master_sorcerer
			save_scope_as = master_sorcerer
		}
	}

	trigger = { number_of_personality_traits < personality_trait_limit }

	widgets = {
		widget = {
			gui = "lotr_shader_event_morgulfire"
			container = "lotr_shader_event_background"
		}
	}
	
	option = {
		name = lotr_sorcery_ritual.0010.a
		random_list = {
			1 = {
				trigger = { NOT = { has_trait = arrogant } }
				add_trait = arrogant
			}
			1 = {
				trigger = { NOT = { has_trait = callous } }
				add_trait = callous
			}
		}
		sorcery_activity_success_change_effect = { CHANGE = increase_major }
	}
	
	option = {
		name = lotr_sorcery_ritual.0010.b
		stress_impact = {
			base = medium_stress_impact_loss
		}
	}
}

lotr_sorcery_ritual.0011 = { #A Struggle Within
	type = activity_event
	title = lotr_sorcery_ritual.0011.t
	desc = {
		desc = lotr_sorcery_ritual.0011.desc
		first_valid  = {
			triggered_desc = {
				trigger = {
					any_attending_character = {
						any_relation = { type = master_sorcerer }
					}
				}
				desc = lotr_sorcery_ritual.0011.desc.apprentice
			}
			desc = lotr_sorcery_ritual.0011.desc.no_apprentice
		}
	}
	content_source = realms_dlc
	theme = learning_scholarship_focus

	right_portrait = {
		character = root
		animation = cough
	}
	left_portrait = {
		character = scope:master_sorcerer
		trigger = { exists = scope:master_sorcerer }
		animation = fear
	}
	override_background = { reference = temple_dwarven }

	cooldown = { days = 21 }
	
	immediate = {
		random_relation = {
			type = master_sorcerer
			save_scope_as = master_sorcerer
		}
	}

	widgets = {
		widget = {
			gui = "lotr_shader_event_morgulfire"
			container = "lotr_shader_event_background"
		}
	}
	
	option = {
		name = lotr_sorcery_ritual.0011.a
		sorcery_activity_success_change_effect = { CHANGE = increase_major }
		random_list = {
			1 = {
				trigger = { NOT = { has_trait = dull } }
				add_trait = dull
			}
			3 = {
				trigger = { NOT = { has_trait = blind } }
				add_trait = blind
			}
			3 = {
				trigger = { NOT = { has_trait = one_legged } }
				add_trait = one_legged
			}
			10 = {
				increase_wounds_no_death_effect = { REASON = fall }
			}
		}
	}
	
	option = {
		name = lotr_sorcery_ritual.0011.b
		sorcery_activity_success_change_effect = { CHANGE = increase_minor }
		add_trait = eccentric
		add_trait = possessed_1
	}
}

lotr_sorcery_ritual.0012 = { #An Unwelcome Intrusion
	type = activity_event
	title = lotr_sorcery_ritual.0012.t
	desc = {
		desc = lotr_sorcery_ritual.0012.desc
		first_valid  = {
			triggered_desc = {
				trigger = {
					any_attending_character = {
						any_relation = { type = master_sorcerer }
					}
				}
				desc = lotr_sorcery_ritual.0012.desc.apprentice
			}
			desc = lotr_sorcery_ritual.0012.desc.no_apprentice
		}
	}
	content_source = realms_dlc
	theme = learning_scholarship_focus

	right_portrait = {
		character = root
		animation = cough
	}
	left_portrait = {
		character = scope:master_sorcerer
		trigger = { exists = scope:master_sorcerer }
		animation = fear
	}
	override_background = { reference = temple_dwarven }

	cooldown = { days = 21 }
	
	immediate = {
		random_relation = {
			type = master_sorcerer
			save_scope_as = master_sorcerer
		}
		create_character = {
			location = root.location
			dynasty = none
			culture = root.culture
			faith = root.faith
			template = peasant_character
			gender_female_chance = 50
			after_creation = {
				set_to_lowborn = yes
			}
			save_scope_as = peasant_character
		}
	}

	widgets = {
		widget = {
			gui = "lotr_shader_event_morgulfire"
			container = "lotr_shader_event_background"
		}
	}
	
	option = {
		name = lotr_sorcery_ritual.0012.a
		sorcery_activity_success_change_effect = { CHANGE = increase_minor }
		scope:peasant_character = {
			death = {
				death_reason = death_mysterious
				killer = root
			}
		}
		add_secret = {
			type = secret_murder
			target = scope:peasant_character
		}
		stress_impact = {
			base = minor_stress_impact_gain
			sadistic = medium_stress_impact_loss
		}
		sorcery_activity_success_change_effect = { CHANGE = increase_minor }
	}
	
	option = {
		name = lotr_sorcery_ritual.0012.b
		duel = {
			skill = diplomacy
			value = 10
			40 = {
		 		desc = lotr_sorcery_ritual.0012.a.success
		 		compare_modifier = {
		 			value = scope:duel_value
		 			multiplier = 3
		 			min = -50
		 			max = 50
		 		}
				add_prestige = medium_prestige_gain
				add_hook = { type = indebted_hook target = scope:peasant_character }
		 	}

		 	60 = {#Fail to convince them
		 		desc = lotr_sorcery_ritual.0012.a.failure
		 		compare_modifier = {
		 			value = scope:duel_value
		 			multiplier = -3
		 			min = -50
		 			max = 50
		 		}
				add_prestige = minor_prestige_loss
				sorcery_activity_success_change_effect = { CHANGE = decrease_minor }
		 	}
		}
	}
	
	option = {
		name = lotr_sorcery_ritual.0012.c
		sorcery_activity_success_change_effect = { CHANGE = decrease_minor }
		add_legitimacy = {
			value = minor_legitimacy_loss
			multiply = root.primary_title.tier
		}
	}
}


lotr_sorcery_ritual.0100 = { #End Result
	type = activity_event
	content_source = realms_dlc
	theme = learning_scholarship_focus
	override_background = { reference = temple_dwarven }

	title = {
		first_valid = {
			triggered_desc = { #Life Extension
				trigger = { 
					OR = {
						var:spell_selected = flag:life_extension_01
						var:spell_selected = flag:life_extension_02
						var:spell_selected = flag:life_extension_03
					}
				}
				desc =  lotr_sorcery_ritual.0100.t.life_extension
			}
			triggered_desc = { #Raise Undead Hordes
				trigger = {
					OR = {
						var:spell_selected = flag:raise_undead_hordes_01
						var:spell_selected = flag:raise_undead_hordes_02
						var:spell_selected = flag:raise_undead_hordes_03
					}
				}
				desc = lotr_sorcery_ritual.0100.t.raise_undead_hordes
			}
			triggered_desc = { #Pestilence
				trigger = {
					OR = {
						var:spell_selected = flag:pestilence_01
						var:spell_selected = flag:pestilence_02
						var:spell_selected = flag:pestilence_03
					}
				}
				desc = lotr_sorcery_ritual.0100.t.pestilence
			}
			triggered_desc = { #Blighting Lands
				trigger = {
					OR = {
						var:spell_selected = flag:blighting_lands_01
						var:spell_selected = flag:blighting_lands_02
						var:spell_selected = flag:blighting_lands_03
					}
				}
				desc = lotr_sorcery_ritual.0100.t.blighting_lands
			}
		}
	}

	desc = {
		first_valid  = { #Description of spell
			triggered_desc = { #Life Extension
				trigger = {
					OR = {
						var:spell_selected = flag:life_extension_01
						var:spell_selected = flag:life_extension_02
						var:spell_selected = flag:life_extension_03
					}
				}
				desc = lotr_sorcery_ritual.0100.desc.life_extension
			}
			triggered_desc = { #Raise Undead Hordes
				trigger = {
					OR = {
						var:spell_selected = flag:raise_undead_hordes_01
						var:spell_selected = flag:raise_undead_hordes_02
						var:spell_selected = flag:raise_undead_hordes_03
					}
				}
				desc = lotr_sorcery_ritual.0100.desc.raise_undead_hordes
			}
			triggered_desc = { #Pestilence
				trigger = {
					OR = {
						var:spell_selected = flag:pestilence_01
						var:spell_selected = flag:pestilence_02
						var:spell_selected = flag:pestilence_03
					}
				}
				desc = lotr_sorcery_ritual.0100.desc.pestilence
			}
			triggered_desc = { #Blighting Lands
				trigger = {
					OR = {
						var:spell_selected = flag:blighting_lands_01
						var:spell_selected = flag:blighting_lands_02
						var:spell_selected = flag:blighting_lands_03
					}
				}
				desc = lotr_sorcery_ritual.0100.desc.blighting_lands
			}
		}
		first_valid  = { #You have an apprentice
			triggered_desc = { #Life Extension
				trigger = {
					any_relation = { type = apprentice_sorcerer }
					OR = {
						var:spell_selected = flag:life_extension_01
						var:spell_selected = flag:life_extension_02
						var:spell_selected = flag:life_extension_03
					}
				}
				desc = lotr_sorcery_ritual.0100.desc.life_extension.apprentice
			}
			triggered_desc = { #Raise Undead Hordes
				trigger = {
					any_relation = { type = apprentice_sorcerer }
					OR = {
						var:spell_selected = flag:raise_undead_hordes_01
						var:spell_selected = flag:raise_undead_hordes_02
						var:spell_selected = flag:raise_undead_hordes_03
					}
				}
				desc = lotr_sorcery_ritual.0100.desc.raise_undead_hordes.apprentice
			}
			triggered_desc = { #Pestilence
				trigger = {
					any_relation = { type = apprentice_sorcerer }
					OR = {
						var:spell_selected = flag:pestilence_01
						var:spell_selected = flag:pestilence_02
						var:spell_selected = flag:pestilence_03
					}
				}
				desc = lotr_sorcery_ritual.0100.desc.pestilence.apprentice
			}
			triggered_desc = { #Blighting Lands
				trigger = {
					any_relation = { type = apprentice_sorcerer }
					OR = {
						var:spell_selected = flag:blighting_lands_01
						var:spell_selected = flag:blighting_lands_02
						var:spell_selected = flag:blighting_lands_03
					}
				}
				desc = lotr_sorcery_ritual.0100.desc.blighting_lands.apprentice
			}
		}
		first_valid  = { #Description of spell
			triggered_desc = { #Life Extension
				trigger = {
					has_character_flag = sacrified_someone
					OR = {
						var:spell_selected = flag:life_extension_01
						var:spell_selected = flag:life_extension_02
						var:spell_selected = flag:life_extension_03
					}
				}
				desc = lotr_sorcery_ritual.0100.desc.life_extension.sacrifice
			}
			triggered_desc = { #Raise Undead Hordes
				trigger = {
					has_character_flag = sacrified_someone
					OR = {
						var:spell_selected = flag:raise_undead_hordes_01
						var:spell_selected = flag:raise_undead_hordes_02
						var:spell_selected = flag:raise_undead_hordes_03
					}
				}
				desc = lotr_sorcery_ritual.0100.desc.raise_undead_hordes.sacrifice
			}
			triggered_desc = { #Pestilence
				trigger = {
					has_character_flag = sacrified_someone
					OR = {
						var:spell_selected = flag:pestilence_01
						var:spell_selected = flag:pestilence_02
						var:spell_selected = flag:pestilence_03
					}
				}
				desc = lotr_sorcery_ritual.0100.desc.pestilence.sacrifice
			}
			triggered_desc = { #Blighting Lands
				trigger = {
					has_character_flag = sacrified_someone
					OR = {
						var:spell_selected = flag:blighting_lands_01
						var:spell_selected = flag:blighting_lands_02
						var:spell_selected = flag:blighting_lands_03
					}
				}
				desc = lotr_sorcery_ritual.0100.desc.blighting_lands.sacrifice
			}
		}
	}
	left_portrait = {
		character = root
		animation = personality_rational
	}

	cooldown = { days = 21 }
	
	option = { #Chase after the prisoner
		name = {
			text = {
				first_valid  = { #Description of spell
					triggered_desc = { #Life Extension
						trigger = {
							has_character_flag = sacrified_someone
							OR = {
								var:spell_selected = flag:life_extension_01
								var:spell_selected = flag:life_extension_02
								var:spell_selected = flag:life_extension_03
							}
						}
						desc = lotr_sorcery_ritual.0100.a.life_extension
					}
					triggered_desc = { #Raise Undead Hordes
						trigger = {
							has_character_flag = sacrified_someone
							OR = {
								var:spell_selected = flag:raise_undead_hordes_01
								var:spell_selected = flag:raise_undead_hordes_02
								var:spell_selected = flag:raise_undead_hordes_03
							}
						}
						desc = lotr_sorcery_ritual.0100.a.raise_undead_hordes
					}
					triggered_desc = { #Pestilence
						trigger = {
							has_character_flag = sacrified_someone
							OR = {
								var:spell_selected = flag:pestilence_01
								var:spell_selected = flag:pestilence_02
								var:spell_selected = flag:pestilence_03
							}
						}
						desc = lotr_sorcery_ritual.0100.a.pestilence
					}
					triggered_desc = { #Blighting Lands
						trigger = {
							has_character_flag = sacrified_someone
							OR = {
								var:spell_selected = flag:blighting_lands_01
								var:spell_selected = flag:blighting_lands_02
								var:spell_selected = flag:blighting_lands_03
							}
						}
						desc = lotr_sorcery_ritual.0100.a.blighting_lands
					}
				}
			}
		}

		switch = {
			trigger = var:spell_selected
			
			### Death Spells ###
			flag:life_extension_01 = { add_character_modifier = { modifier = life_extension_01_modifier years = 40 } }
			flag:life_extension_02 = { add_character_modifier = { modifier = life_extension_02_modifier years = 50 } }
			flag:life_extension_03 = { add_character_modifier = { modifier = life_extension_03_modifier years = 60 } }
			flag:raise_undead_hordes_01 = {
				spawn_army = {
					men_at_arms = {
						type = mountainorc_warriors
						stacks = 5
					}
					levies = 0
					inheritable = no
					location = root.capital_province
					name = raised_undead_army
				}
			}
			flag:raise_undead_hordes_02 = {
				spawn_army = {
					men_at_arms = {
						type = mountainorc_warriors
						stacks = 10
					}
					levies = 0
					inheritable = no
					location = root.capital_province
					name = raised_undead_army
				}
			}
			flag:raise_undead_hordes_03 = {
				spawn_army = {
					men_at_arms = {
						type = mountainorc_warriors
						stacks = 15
					}
					levies = 0
					inheritable = no
					location = root.capital_province
					name = raised_undead_army
				}
			}
			flag:pestilence_01 = { }
			flag:pestilence_02 = { }
			flag:pestilence_03 = { }
			flag:blighting_lands_01 = { }
			flag:blighting_lands_02 = { }
			flag:blighting_lands_03 = { }
			
			### Deception Spells ###
			flag:corruption_01 = { add_character_modifier = { modifier = corruption_01_modifier years = 10 } }
			flag:corruption_02 = { add_character_modifier = { modifier = corruption_02_modifier years = 15 } }
			flag:corruption_03 = { add_character_modifier = { modifier = corruption_03_modifier years = 25 } }
			flag:fair_visage_01 = { add_character_modifier = { modifier = fair_visage_01_modifier years = 10 } }
			flag:fair_visage_02 = { add_character_modifier = { modifier = fair_visage_02_modifier years = 15 } }
			flag:fair_visage_03 = { add_character_modifier = { modifier = fair_visage_03_modifier years = 25 } }
			flag:enfeeblement_01 = { }
			flag:enfeeblement_02 = { }
			flag:enfeeblement_03 = { }
			flag:dark_influence_01 = { add_hook = { type = sorcery_dark_influence_01 target = var:hook_target } }
			flag:dark_influence_02 = { add_hook = { type = sorcery_dark_influence_02 target = var:hook_target } }
			flag:dark_influence_03 = { add_hook = { type = sorcery_dark_influence_03 target = var:hook_target } }
			
			### Destruction Spells ###
			flag:dark_empowerment_01 = { add_character_modifier = { modifier = dark_empowerment_01_modifier years = 10 } }
			flag:dark_empowerment_02 = { add_character_modifier = { modifier = dark_empowerment_02_modifier years = 15 } }
			flag:dark_empowerment_03 = { add_character_modifier = { modifier = dark_empowerment_03_modifier years = 25 } }
			flag:invoke_watchers_01 = { }
			flag:invoke_watchers_02 = { }
			flag:invoke_watchers_03 = { }
			flag:endless_hordes_01 = { add_character_modifier = { modifier = endless_hordes_01_modifier years = 10 } }
			flag:endless_hordes_02 = { add_character_modifier = { modifier = endless_hordes_02_modifier years = 15 } }
			flag:endless_hordes_03 = { add_character_modifier = { modifier = endless_hordes_03_modifier years = 25 } }
			flag:dark_beasts_01 = { }
			flag:dark_beasts_02 = { }
			flag:dark_beasts_03 = { }
		}
	}

	after = {
		scope:activity = {
			add_activity_log_entry = {
				key = activity_sorcery_completed_success_log
				score = 100
				tags = { complete good }
				character = scope:host
				show_in_conclusion = yes
			}
		}
	}
}

#########################
### Apprentice Events ###
#########################

lotr_sorcery_ritual.0200 = { #Aiding in a Task - Done
	type = character_event
	content_source = realms_dlc
	theme = learning_scholarship_focus
	title = lotr_sorcery_ritual.0200.t
	desc = lotr_sorcery_ritual.0200.desc
	right_portrait = {
		character = root
		animation = personality_rational
	}
	left_portrait = {
		character = scope:master_sorcerer
		trigger = { exists = scope:master_sorcerer }
		animation = disgust
	}
	override_background = { reference = temple_dwarven }
	
	immediate = {
		random_relation = {
			type = master_sorcerer
			save_scope_as = master_sorcerer
		}
	}
	
	option = { #Follow the task exactly as instructed.
		name = lotr_sorcery_ritual.0200.a
		#Duel code - easier learning
		duel = {
			skill = learning
			value = 12
			40 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = lotr_sorcery_ritual.0200.a.success
				send_interface_toast = {
					title = lotr_sorcery_ritual.0200.a.success
					left_icon = scope:master_sorcerer
					scope:master_sorcerer = {
						add_opinion = {
							modifier = impressed_opinion
							target = root
							opinion = 10
						}
					}
				}
			}
			60 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -2.5
					min = -49
				}
				desc = lotr_sorcery_ritual.0200.a.failure
				send_interface_toast = {
					title = lotr_sorcery_ritual.0200.a.success
					left_icon = scope:master_sorcerer
					scope:master_sorcerer = {
						add_opinion = {
							modifier = cruelty_opinion
							target = root
							opinion = -20
						}
					}
				}
			}			
		}
	}
	
	option = { #Attempt to understand the purpose behind the task.
		name = lotr_sorcery_ritual.0200.b 
		#Duel code - intrigue/learning
		duel = {
			skills = { learning intrigue }
			value = 12
			40 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = lotr_sorcery_ritual.0200.b.success
				send_interface_toast = {
					title = lotr_sorcery_ritual.0200.a.success
					left_icon = root
					add_trait_xp = {
						trait = sorcerer_trait
						value = 2
					}
					scope:master_sorcerer = {
						add_opinion = {
							modifier = cruelty_opinion
							target = root
							opinion = -10
						}
					}
				}
			}
			60 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -2.5
					min = -49
				}
				send_interface_toast = {
					title = lotr_sorcery_ritual.0200.a.success
					left_icon = root
					add_trait_xp = {
						trait = sorcerer_trait
						value = 2
					}
					scope:master_sorcerer = {
						add_opinion = {
							modifier = cruelty_opinion
							target = root
							opinion = -30
						}
					}
				}
				desc = lotr_sorcery_ritual.0200.b.failure
			}			
		}
	}
}

lotr_sorcery_ritual.0201 = { #Reading What Was Forgotten - Done
	type = character_event
	content_source = realms_dlc
	theme = learning_scholarship_focus
	title = lotr_sorcery_ritual.0201.t
	desc = lotr_sorcery_ritual.0201.desc
	left_portrait = {
		character = root
		animation = personality_rational
		animation = reading
	}
	override_background = { reference = temple_dwarven }

	option = { #Ignore the temptation and retrieve only what was asked.
		name = lotr_sorcery_ritual.0201.a
		#stress loss
		stress_impact = {
			base = medium_stress_impact_loss
			diligent = minor_stress_impact_loss
		}
	}
	
	option = { #Take the hidden tome for later study.
		name = lotr_sorcery_ritual.0201.b
		trait = sorcerer_trait
		#gain XP + stress gain
		send_interface_toast = {
			title = lotr_sorcery_ritual.0201.b.toast
			left_icon = root
			add_trait_xp = {
				trait = sorcerer_trait
				value = 1
			}
		}
	}
}

lotr_sorcery_ritual.0202 = { #Taking the First Step - Done
	type = character_event
	content_source = realms_dlc
	theme = learning_scholarship_focus
	title = lotr_sorcery_ritual.0202.t
	desc = lotr_sorcery_ritual.0202.desc
	left_portrait = {
		character = root
		animation = schadenfreude
	}
	right_portrait = {
		character = scope:master_sorcerer
		animation = schadenfreude
	}
	override_background = { reference = temple_dwarven }

	immediate = {
		random_relation = {
			type = master_sorcerer
			save_scope_as = master_sorcerer
		}
	}
	
	option = { #Hesitate and choose the least drastic action.
		name = lotr_sorcery_ritual.0202.a
		#Low Learning duel - Gain small XP
		duel = {
			skill = learning
			value = 12
			40 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = lotr_sorcery_ritual.0202.a.success
				send_interface_toast = {
					title = lotr_sorcery_ritual.0202.b.success
					left_icon = scope:master_sorcerer
					add_trait_xp = {
						trait = sorcerer_trait
						value = 1
					}
				}
			}
			60 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -2.5
					min = -49
				}
				desc = lotr_sorcery_ritual.0202.a.failure
				send_interface_toast = {
					title = lotr_sorcery_ritual.0202.a.success
					left_icon = scope:master_sorcerer
					add_trait = ill
				}
			}			
		}
	}
	
	option = { #Embrace what must be done without flinching.
		name = lotr_sorcery_ritual.0202.b
		#Hard Learning duel - Gain big XP
		duel = {
			skill = learning
			value = 24
			40 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = lotr_sorcery_ritual.0202.b.success
				send_interface_toast = {
					title = lotr_sorcery_ritual.0202.b.success
					left_icon = scope:master_sorcerer
					add_trait_xp = {
						trait = sorcerer_trait
						value = 3
					}
				}
			}
			60 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -2.5
					min = -49
				}
				desc = lotr_sorcery_ritual.0202.b.failure
				send_interface_toast = {
					title = lotr_sorcery_ritual.0202.b.success
					left_icon = root
					increase_wounds_no_death_effect = { REASON = fall }
				}
			}			
		}
	}
}

lotr_sorcery_ritual.0203 = { #A Lesson in Pain - Done
	type = character_event
	content_source = realms_dlc
	theme = learning_scholarship_focus
	title = lotr_sorcery_ritual.0203.t
	desc = lotr_sorcery_ritual.0203.desc
	override_background = { reference = temple_dwarven }
	left_portrait = {
		character = root
		animation = severelywounded
	}
	right_portrait = {
		character = scope:master_sorcerer
		animation = ecstasy
	}

	immediate = {
		random_relation = {
			type = master_sorcerer
			save_scope_as = master_sorcerer
		}
	}

	trigger = {
		number_of_personality_traits < personality_trait_limit
		OR = {
			NOT = { has_trait = callous }
			NOT = { has_trait = sadistic }
		}
	}
	
	option = { #Endure in silence, showing discipline.
		name = lotr_sorcery_ritual.0203.a
		trigger = { NOT = { has_trait = callous } }
		#Gain wounded_1, personality change - calllous
		increase_wounds_no_death_effect = { REASON = fall }
		trait = callous
		if = {
			limit = { has_trait = compassionate }
			remove_trait = compassionate
		}
		add_trait = callous
	}
	
	option = { #Embrace the pain, proving devotion.
		name = lotr_sorcery_ritual.0203.b
		trigger = { NOT = { has_trait = sadistic } }
		# Gain wounded_1, personality change - sadistic
		increase_wounds_no_death_effect = { REASON = fall }
		trait = sadistic
		if = {
			limit = { has_trait = compassionate }
			remove_trait = compassionate
		}
		add_trait = sadistic
	}
}

lotr_sorcery_ritual.0204 = { #A Scar Earned - Done
	type = character_event
	content_source = realms_dlc
	theme = learning_scholarship_focus
	title = lotr_sorcery_ritual.0204.t
	desc = lotr_sorcery_ritual.0204.desc
	left_portrait = {
		character = root
		animation = physician
	}
	override_background = { reference = temple_dwarven }
	
	option = { #Ignore the wound and continue working.
		name = lotr_sorcery_ritual.0204.a
		#Gain wounded_1 + small XP
		send_interface_toast = {
			title = lotr_sorcery_ritual.0204.a.toast
			left_icon = scope:master_sorcerer
			add_trait_xp = {
				trait = sorcerer_trait
				value = 3
			}
			increase_wounds_no_death_effect = { REASON = accident }
		}
	}
	
	option = { #Study the mark, risking further consequences.
		name = lotr_sorcery_ritual.0204.b
		#Do NOT gain wounded, no XP
		random = {
			chance = 40
			modifier = {
				add = {
					value = learning
					multiply = -1
				}
			}
			send_interface_toast = {
				title = lotr_sorcery_ritual.0204.b.toast
				left_icon = scope:master_sorcerer
				increase_wounds_no_death_effect = { REASON = accident }
			}
		}
	}
}

lotr_sorcery_ritual.0205 = { #A Warning Unheeded - Done
	type = character_event
	content_source = realms_dlc
	theme = learning_scholarship_focus
	title = lotr_sorcery_ritual.0205.t
	desc = lotr_sorcery_ritual.0205.desc
	right_portrait = {
		character = root
		animation = eavesdrop
	}
	override_background = { reference = temple_dwarven }

	immediate = {
		random_relation = {
			type = master_sorcerer
			save_scope_as = master_sorcerer
		}
	}
	
	option = { #Leave before I am noticed.
		name = lotr_sorcery_ritual.0205.a
		#Nothing happens
	}
	
	option = { #Stay and observe, risking discovery.
		name = lotr_sorcery_ritual.0205.b
		#Risk being noticed - opinion loss + chance of getting injured
		
		send_interface_toast = {
			title = lotr_sorcery_ritual.0205.b.toast
			left_icon = scope:master_sorcerer
			random = {
				chance = 30
				custom_tooltip = lotr_sorcery_ritual.0205.b.discovered
				modifier = {
					add = {
						value = intrigue
						multiply = -1
					}
				}
				scope:master_sorcerer = {
					add_opinion = {
						modifier = disappointed_opinion
						target = root
						opinion = -30
					}
				}
				increase_wounds_no_death_effect = { REASON = accident }
			}
			add_trait_xp = {
				trait = sorcerer_trait 
				value = 2
			}
		}
	}
}

lotr_sorcery_ritual.0206 = { #A Desperate Gamble - Done
	type = character_event
	content_source = realms_dlc
	theme = learning_scholarship_focus
	title = lotr_sorcery_ritual.0206.t
	desc = lotr_sorcery_ritual.0206.desc
	left_portrait = {
		character = root
		animation = thinking
	}
	right_portrait = {
		character = scope:master_sorcerer
		animation = physician
	}
	override_background = { reference = temple_dwarven }

	immediate = {
		random_relation = {
			type = master_sorcerer 
			save_scope_as = master_sorcerer
		}
	}
	
	option = { #Resist the temptation and step away.
		name = lotr_sorcery_ritual.0206.a
		#Minor XP gain
		add_trait_xp = {
			trait = sorcerer_trait
			value = 1
		}
	}
	
	option = { #Seize the opportunity, no matter the risk.
		name = lotr_sorcery_ritual.0206.b
		#Intrigue/Learning duel - Gain medium amount of XP | Lose opinion + chance of getting flagelated
		duel = {
			skills = { learning intrigue }
			value = 12
			40 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = lotr_sorcery_ritual.0206.b.success
				send_interface_toast = {
					title = lotr_sorcery_ritual.0206.b.success
					left_icon = root
					add_trait_xp = {
						trait = sorcerer_trait
						value = 2
					}
					scope:master_sorcerer = {
						add_opinion = {
							modifier = cruelty_opinion
							target = root
							opinion = -10
						}
					}
				}
			}
			60 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -2.5
					min = -49
				}
				desc = lotr_sorcery_ritual.0206.b.failure
				send_interface_toast = {
					title = lotr_sorcery_ritual.0206.b.success
					left_icon = root
					scope:master_sorcerer = {
						add_opinion = {
							modifier = cruelty_opinion
							target = root
							opinion = -30
						}
					}
					increase_wounds_no_death_effect = { REASON = beaten }
				}
			}			
		}
	}
}

lotr_sorcery_ritual.0207 = { #A Bitter Taste - Done
	type = character_event
	content_source = realms_dlc
	theme = learning_scholarship_focus
	title = lotr_sorcery_ritual.0207.t
	desc = lotr_sorcery_ritual.0207.desc
	left_portrait = {
		character = root
		animation = drink_goblet
	}
	right_portrait = {
		character = scope:master_sorcerer
		animation = writing
	}
	override_background = { reference = temple_dwarven }

	immediate = {
		random_relation = {
			type = master_sorcerer 
			save_scope_as = master_sorcerer
		}
	}
	
	option = { #Wait for the feeling to fade.
		name = lotr_sorcery_ritual.0207.a
		#gain Ill trait + minor XP
		send_interface_toast = {
			title = lotr_sorcery_ritual.0207.a.toast
			left_icon = root
			add_trait = ill
			add_trait_xp = {
				trait = sorcerer_trait
				value = 1
			}
		}
	}
	
	option = { #Embrace the sensation and see where it leads.
		name = lotr_sorcery_ritual.0207.a
		#gain Ill trait + stress gain + small XP
		send_interface_toast = {
			title = lotr_sorcery_ritual.0207.a.toast
			left_icon = root
			add_trait = ill
			stress_impact = {
				base = major_stress_impact_gain
			}
			add_trait_xp = {
				trait = sorcerer_trait
				value = 2
			}
		}
	}
}

lotr_sorcery_ritual.0208 = { #The Struggle - Done
	type = character_event
	content_source = realms_dlc
	theme = learning_scholarship_focus
	title = lotr_sorcery_ritual.0208.t
	desc = lotr_sorcery_ritual.0208.desc
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:master_sorcerer
		animation = writing
	}
	override_background = { reference = temple_dwarven }

	immediate = {
		random_relation = {
			type = master_sorcerer 
			save_scope_as = master_sorcerer
		}
	}
	
	option = { 
		name = lotr_sorcery_ritual.0208.a
		send_interface_toast = {
			title = lotr_sorcery_ritual.0208.a.toast
			left_icon = scope:master_sorcerer
			scope:master_sorcerer = {
				scope:master_sorcerer = {
					add_opinion = {
						modifier = disappointed_opinion
						target = root
						opinion = -30
					}
				}
			}
		}
	}
	
	option = { 
		name = lotr_sorcery_ritual.0208.b
		send_interface_toast = {
			title = lotr_sorcery_ritual.0208.a.toast
			left_icon = scope:master_sorcerer
			random = {
				chance = 30
				increase_wounds_no_death_effect = { REASON = beaten }
			}
			scope:master_sorcerer = {
				scope:master_sorcerer = {
					add_opinion = {
						modifier = impressed_opinion
						target = root
						opinion = 10
					}
				}
			}
		}
	}
}

### More Dangerous Events - can result in death ###

lotr_sorcery_ritual.0210 = { #The Ground Shudders - Done
	type = character_event
	content_source = realms_dlc
	theme = learning_scholarship_focus
	title = lotr_sorcery_ritual.0210.t
	desc = lotr_sorcery_ritual.0210.desc
	left_portrait = {
		character = root
		animation = shock
	}
	right_portrait = {
		character = scope:master_sorcerer
		animation = stunned
	}
	override_background = { reference = temple_dwarven }

	immediate = {
		random_relation = {
			type = master_sorcerer
			save_scope_as = master_sorcerer
		}
	}
	
	option = { 
		name = lotr_sorcery_ritual.0210.a
		scope:master_sorcerer = {
			add_opinion = {
				modifier = disappointed_opinion
				target = root
				opinion = -20
			}
		}
		add_trait_xp = {
			trait = sorcerer_trait
			value = -1
		}
	}
	
	option = { 
		name = lotr_sorcery_ritual.0210.b
		scope:master_sorcerer = {
			add_opinion = {
				modifier = impressed_opinion
				target = root
				opinion = 30
			}
		}
		random_list = {
			40 = { #No risk of death
				desc = lotr_sorcery_ritual.0210.b.no_risk
				send_interface_toast = {
					title = lotr_sorcery_ritual.0210.b.no_risk
					left_icon = scope:master_sorcerer
					add_trait_xp = {
						trait = sorcerer_trait
						value = 3	
					}
				}
			}
			60 = {
				desc = lotr_sorcery_ritual.0210.b.risk
				send_interface_toast = {
					title = lotr_sorcery_ritual.0210.b.risk
					left_icon = scope:master_sorcerer
					add_trait_xp = {
						trait = sorcerer_trait
						value = 3	
					}
					increase_wounds_effect = { REASON = whipping }
				}
			}
		}
	}
}

lotr_sorcery_ritual.0211 = { #The Fire Consumes - Done
	type = character_event
	content_source = realms_dlc
	theme = learning_scholarship_focus
	title = lotr_sorcery_ritual.0211.t
	desc = lotr_sorcery_ritual.0211.desc
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:master_sorcerer
		animation = writing
	}
	override_background = { reference = temple_dwarven }

	immediate = {
		random_relation = {
			type = master_sorcerer
			save_scope_as = master_sorcerer
		}
	}
	
	option = { 
		name = lotr_sorcery_ritual.0211.a
		scope:master_sorcerer = {
			add_opinion = {
				modifier = disappointed_opinion
				target = root
				opinion = -30
			}
		}
		add_trait_xp = {
			trait = sorcerer_trait
			value = -2	
		}
	}
	
	option = { 
		name = lotr_sorcery_ritual.0211.b

		scope:master_sorcerer = {
			add_opinion = {
				modifier = impressed_opinion
				target = root
				opinion = 10
			}
		}
		add_trait_xp = {
			trait = sorcerer_trait
			value = 3
		}
		random = {
			chance = 30
			increase_wounds_effect = { REASON = burned }
		}
	}
}

### Murder/Abduct Events ###

lotr_sorcery_ritual.0212 = { #Blood Ties Severed - Done
	type = character_event
	content_source = realms_dlc
	theme = learning_scholarship_focus
	title = lotr_sorcery_ritual.0212.t
	desc = lotr_sorcery_ritual.0212.desc
	left_portrait = {
		character = root
		animation = assassin
	}
	right_portrait = {
		character = scope:master_sorcerer
		animation = writing
	}
	override_background = { reference = temple_dwarven }

	trigger = {
		dynasty = {
			any_dynasty_member = {
				count > 1
				is_alive = yes
			}
		}
	}

	immediate = {
		random_relation = {
			type = master_sorcerer
			save_scope_as = master_sorcerer
		}
		dynasty = {
			ordered_dynasty_member = {
				order_by = "opinion(root)"
				limit = {
					NOT = { this = scope:master_sorcerer }
					NOT = { this = root }
				}
				save_scope_as = murder_target
			}
		}
	}
	
	option = { #Refuse
		name = lotr_sorcery_ritual.0212.a
		scope:master_sorcerer = {
			add_opinion = {
				modifier = cruelty_opinion
				target = root
				opinion = -30
			}
		}
	}
	
	option = { #Accept
		name = lotr_sorcery_ritual.0212.b 
		start_scheme = {
			type = murder
			target_character = scope:murder_target
		}
		scope:master_sorcerer = {
			add_opinion = {
				modifier = impressed_opinion
				target = root
				opinion = 20
			}
		}
	}
}

lotr_sorcery_ritual.0213 = { #A Familiar Face - Done
	type = character_event
	content_source = realms_dlc
	theme = learning_scholarship_focus
	title = lotr_sorcery_ritual.0213.t
	desc = lotr_sorcery_ritual.0213.desc
	left_portrait = {
		character = root
		animation = marshal_dagger
	}
	right_portrait = {
		character = scope:master_sorcerer
		animation = writing
	}
	override_background = { reference = temple_dwarven }

	trigger = {
		OR = {
			any_relation = {
				type = best_friend
				count > 0
			}
			any_relation = {
				type = friend
				count > 0
			}
			any_relation = {
				type = lover
				count > 0
			}
		}
	}

	immediate = {
		random_relation = {
			type = master_sorcerer
			save_scope_as = master_sorcerer
		}
		random_relation = {
			type = best_friend
			limit = { NOT = { this = scope:master_sorcerer } }
			save_scope_as = murder_target
		}
		if = {
			limit = { NOT = { exists = scope:murder_target } }
			random_relation = {
				type = friend
				limit = { NOT = { this = scope:master_sorcerer } }
				save_scope_as = murder_target
			}
		}
		if = {
			limit = { NOT = { exists = scope:murder_target } }
			random_relation = {
				type = lover
				limit = { NOT = { this = scope:master_sorcerer } }
				save_scope_as = murder_target
			}
		}
	}
	
	option = { #Refuse
		name = lotr_sorcery_ritual.0213.a
		scope:master_sorcerer = {
			add_opinion = {
				modifier = cruelty_opinion
				target = root
				opinion = -30
			}
		}
	}
	
	option = { #Accept
		name = lotr_sorcery_ritual.0213.b
		start_scheme = {
			type = murder
			target_character = scope:murder_target
		}
		scope:master_sorcerer = {
			add_opinion = {
				modifier = impressed_opinion
				target = root
				opinion = 20
			}
		}
	}
}

lotr_sorcery_ritual.0214 = { #The Hunter’s Path - Done
	type = character_event
	content_source = realms_dlc
	theme = learning_scholarship_focus
	title = lotr_sorcery_ritual.0214.t
	desc = lotr_sorcery_ritual.0214.desc
	left_portrait = {
		character = root
		animation = personality_cynical
	}
	right_portrait = {
		character = scope:master_sorcerer
		animation = writing
	}
	override_background = { reference = temple_dwarven }

	immediate = {
		random_relation = {
			type = master_sorcerer
			save_scope_as = master_sorcerer
		}
		random_courtier = {
			limit = { 
				NOT = { this = scope:master_sorcerer }
			}
			save_scope_as = abduct_target
		}
	}
	
	option = { #Refuse
		name = lotr_sorcery_ritual.0214.a
		scope:master_sorcerer = {
			add_opinion = {
				modifier = cruelty_opinion
				target = root
				opinion = -30
			}
		}
	}
	
	option = { #Accept
		name = lotr_sorcery_ritual.0214.b
		scope:master_sorcerer = {
			add_opinion = {
				modifier = impressed_opinion
				target = root
				opinion = 10
			}
		}
		start_scheme = {
			type = abduct
			target_character = scope:abduct_target
		}
	}
}
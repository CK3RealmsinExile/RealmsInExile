# Events for handling the Sailing and Pirate activities

namespace = sailing

############################
## Random events in port
## 1000-1999
## by Jamie-san
############################
# 1001 - Don't have a boat - charter or buy?
# 1002 - Chartering a boat
# 1003 - Buying a boat
# 1004 - Repairing a boat

# 1005 - Dockyard temptations
# 1007 - Whittle While You Wait
# 1008 - Bar brawl
# 1009 - Drinking competition
# 1010 - The Fortune Teller
# 1011 - Dockyard Delicacies
# 1012 - Seagull Surprise
# 1013 - An Experienced Sailor
# 1014 - Gathering Supplies

# 1014 - Rats on the ship!
# 1015 - Contraband discovered in port
# 1016 - Music
# 1017 - Haggling for supplies

# 1999 - Set out to sea

#Character does not own a boat - charter or buy?
sailing.1001 = {
	type = character_event
	title = sailing.1001.t
	desc = sailing.1001.desc
	theme = docks
	left_portrait = {
		character = root
		animation = happiness
	}

	option = { # I'll charter a vessel
		name = sailing.1001.a
		trigger_event = sailing.1002
		ai_chance = {
			base = 70
		}
	}
	
	option = { # Actually, let me buy one...
		name = sailing.1001.b
		show_as_unavailable = {
			gold <= small_boat_cost
		}
		trigger_event = sailing.1003
		ai_chance = {
			base = 30
		}
	}
	
	option = { # Wait, what? You mean I need a boat for this?
		name = sailing.1001.c
		scope:activity = {
			complete_activity = yes
		}
		remove_character_flag = planning_an_activity
		remove_decision_cooldown = set_sail_decision
		ai_chance = {
			base = 0
		}
	}
}

#Character HIRES a boat, which one to choose!?
sailing.1002 = {
	type = character_event
	title = sailing.1002.t
	desc = sailing.1002.desc
	theme = docks
	left_portrait = {
		character = root
		animation = personality_rational
	}

	option = { # Small but nimble
		name = sailing.1002.a
		remove_short_term_gold = small_boat_hire_cost
		add_character_modifier = {
			modifier = small_boat_modifier
			years = boat_hire_duration_years
		}
		add_character_flag = {
			flag = hired_a_boat
			years = boat_hire_duration_years
		}
		stress_impact = {
				base = hunt_stress_loss_value #-30
				greedy = minor_stress_impact_loss
				brave = activity_stress_loss_impact
				craven = activity_stress_gain_impact
				ambitious = activity_stress_loss_impact
				athletic = activity_stress_loss_impact
				mariner_1 = activity_stress_loss_impact
				mariner_2 = activity_stress_loss_impact
				mariner_3 = activity_stress_loss_impact
			}
	}
	
	option = { # A fine vessel
		name = sailing.1002.b
		show_as_unavailable = {
			gold <= medium_boat_hire_cost
		}		
		remove_short_term_gold = medium_boat_hire_cost
		add_character_modifier = {
			modifier = medium_boat_modifier
			years = boat_hire_duration_years
		}
		add_character_flag = {
			flag = hired_a_boat
			years = boat_hire_duration_years
		}
		stress_impact = {
				base = hunt_stress_loss_value #-30
				greedy = miniscule_stress_impact_loss
				brave = activity_stress_loss_impact
				craven = activity_stress_gain_impact
				ambitious = activity_stress_loss_impact
				athletic = activity_stress_loss_impact
				mariner_1 = activity_stress_loss_impact
				mariner_2 = activity_stress_loss_impact
				mariner_3 = activity_stress_loss_impact
			}
	}
	
	option = { # A flagship fit for a king
		name = sailing.1002.c
		show_as_unavailable = {
			gold <= large_boat_hire_cost
		}
		remove_short_term_gold = large_boat_hire_cost
		add_character_modifier = {
			modifier = large_boat_modifier
			years = boat_hire_duration_years
		}
		add_character_flag = {
			flag = hired_a_boat
			years = boat_hire_duration_years
		}
		stress_impact = {
				base = hunt_stress_loss_value #-30
				brave = activity_stress_loss_impact
				craven = activity_stress_gain_impact
				ambitious = activity_stress_loss_impact
				athletic = activity_stress_loss_impact
				mariner_1 = activity_stress_loss_impact
				mariner_2 = activity_stress_loss_impact
				mariner_3 = activity_stress_loss_impact
			}
	}
	
	after = {
		trigger_event = {
			on_action = sailing_dockyard_events
		}
	}
}

#Character BUYS a boat, which one to choose!?
sailing.1003 = {
	type = character_event
	title = sailing.1003.t
	desc = sailing.1003.desc
	theme = docks
	left_portrait = {
		character = root
		animation = personality_rational
	}

	option = { # Small but nimble
		name = sailing.1003.a
		remove_short_term_gold = small_boat_cost
		add_character_modifier = small_boat_modifier
		stress_impact = {
				base = hunt_stress_loss_value #-30
				brave = activity_stress_loss_impact
				craven = activity_stress_gain_impact
				ambitious = activity_stress_loss_impact
				athletic = activity_stress_loss_impact
				mariner_1 = activity_stress_loss_impact
				mariner_2 = activity_stress_loss_impact
				mariner_3 = activity_stress_loss_impact
			}
	}
	
	option = { # A fine vessel
		name = sailing.1003.b
		show_as_unavailable = {
			gold <= medium_boat_cost
		}
		remove_short_term_gold = medium_boat_cost
		add_character_modifier = medium_boat_modifier
		stress_impact = {
				base = hunt_stress_loss_value #-30
				greedy = miniscule_stress_impact_gain
				brave = activity_stress_loss_impact
				craven = activity_stress_gain_impact
				ambitious = activity_stress_loss_impact
				athletic = activity_stress_loss_impact
				mariner_1 = activity_stress_loss_impact
				mariner_2 = activity_stress_loss_impact
				mariner_3 = activity_stress_loss_impact
			}
	}
	
	option = { # A flagship fit for a king
		name = sailing.1003.c
		show_as_unavailable = {
			gold <= large_boat_cost
		}
		remove_short_term_gold = large_boat_cost
		add_character_modifier = large_boat_modifier
		stress_impact = {
				base = hunt_stress_loss_value #-30
				greedy = minor_stress_impact_gain
				brave = activity_stress_loss_impact
				craven = activity_stress_gain_impact
				ambitious = activity_stress_loss_impact
				athletic = activity_stress_loss_impact
				mariner_1 = activity_stress_loss_impact
				mariner_2 = activity_stress_loss_impact
				mariner_3 = activity_stress_loss_impact
			}
	}
	
	after = {
		trigger_event = {
			on_action = sailing_dockyard_events
		}
	}
}

#My boat is in a poor state of repair, should I pay to fix it up?
sailing.1004 = {
	type = character_event
	title = sailing.1004.t
	desc = sailing.1004.desc
	theme = docks
	left_portrait = {
		character = root
		animation = disapproval
	}

	trigger = {
		owns_a_damaged_boat = yes
	}

	option = { # Of course, I'm not going out in her like THAT!
		name = sailing.1004.a
		if = {
			limit = { has_character_modifier = small_damaged_boat_modifier }
			remove_short_term_gold = small_boat_repair_cost
			add_character_modifier = small_boat_modifier
			remove_character_modifier = small_damaged_boat_modifier
		}
		else_if = {
			limit = { has_character_modifier = medium_damaged_boat_modifier }
			remove_short_term_gold = medium_boat_repair_cost
			add_character_modifier = medium_boat_modifier
			remove_character_modifier = medium_damaged_boat_modifier
		}
		else_if = {
			limit = { has_character_modifier = large_damaged_boat_modifier }
			remove_short_term_gold = large_boat_repair_cost
			add_character_modifier = large_boat_modifier
			remove_character_modifier = large_damaged_boat_modifier
		}
	}
	
	option = { # Bah! She's still seaworthy.
		name = sailing.1004.b
	}
	
	after = {
		trigger_event = {
			on_action = sailing_dockyard_events
		}
	}
}

#Temptation at the Docks
sailing.1005 = {
	type = character_event
	title = sailing.1005.t
	desc = sailing.1005.desc
	theme = docks
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:hooker
		animation = flirtation
	}

	immediate = {
		add_character_flag = {
			flag = had_event_sailing_1005
			years = 15
		}
		hidden_effect = {
			romance_target_gender_effect = { SCOPE_NAME = romance_target }
			
			create_character = {
				location = scope:sailing_province #root.capital_province
				gender = scope:romance_target
				template = beautiful_peasant_character
				random_traits_list = {
					count = 1
					gregarious = {}
					lustful = {}
					compassionate = {}
					generous = {}
					ambitious = {}
				}
				save_scope_as = hooker
			}
			hidden_effect = {
				scope:hooker = { 
					set_sexuality = bisexual
					set_to_lowborn = yes
				}
				random_list = {
					60 = {
						scope:hooker = { add_trait = seducer }
					}
					40 = {
						scope:hooker = { add_trait = lovers_pox }
					}
				}
			}
		}
	}

	# Take as dock wench/boy
	option = {
		name = sailing.1005.a
		set_relation_lover = scope:hooker
		had_sex_with_effect = {
				CHARACTER = scope:hooker
				PREGNANCY_CHANCE = pregnancy_chance
		}
		remove_short_term_gold = 5
		if = {
			limit = { 
				faith_is_good = yes
			}
			hidden_effect = {
				random = {
					chance = 2
					trigger_event = sailing.1006
				}
			}
		}
	}

	# Lay with them
	option = {
		name = sailing.1005.b			
		had_sex_with_effect = {
			CHARACTER = scope:hooker
			PREGNANCY_CHANCE = pregnancy_chance
		}
		remove_short_term_gold = 5	
		if = {
			limit = { 
				faith_is_good = yes
			}
			hidden_effect = {
				random = {
					chance = 2
					trigger_event = sailing.1006
				}
			}
		}
	}
	
	# Refuse
	option = {
		name = sailing.1005.c
		add_piety = 20
		stress_impact = {
			chaste = minor_stress_impact_loss
			lustful = minor_stress_impact_gain
		}
	}
	
	after = {
		trigger_event = {
			id = sailing.1990
			days = 30
		}
	}
}

#A Dagger in the Bedroom - Sauron sends his regards
sailing.1006 = {
	type = character_event
	title = sailing.1006.t
	desc = sailing.1006.desc
	theme = docks
	override_background = {
		event_background = bedchamber
	}
	left_portrait = {
		character = root
		animation = fear
	}
	right_portrait = {
		character = scope:hooker
		animation = scheme
	}

	option = { # A knife!
		name = sailing.1006.a
		custom_tooltip = sailing.1006.a.desc
		duel = {
			skill = prowess 
			value = very_high_skill_rating
			50 = { 
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					min = -19
				}
				desc = sailing.1006.duel_success
				add_stress = massive_stress_gain
				imprison = {
					target = scope:hooker
					type = dungeon
				}
			}
			100 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -19
				}
				desc = sailing.1006.duel_failure
				death = {
					killer = scope:hooker
					death_reason = death_murder
				}
			}
		}
	}
}

#Whittle While You Wait
sailing.1007 = {
	type = character_event
	title = sailing.1007.t
	desc = sailing.1007.desc
	theme = docks
	left_portrait = {
		character = root
		animation = boredom
	}
	right_portrait = {
		character = scope:whittler
		animation = personality_compassionate
	}

	trigger = {
		scope:activity = {
			has_variable_list = potential_sailing_participants
			any_in_list = {
					variable = potential_sailing_participants
					is_alive = yes
					count >= 1
			}
		}
	}

	immediate = {
		scope:activity = {
			random_in_list = {
				variable = potential_sailing_participants
				limit = {
					is_alive = yes
				}
				save_scope_as = whittler
			}
		}
	}

	option = { # Make something for my child
		name = sailing.1007.a
		trigger = {
			any_child = { age < 16 }
		}
		random = {
			chance = 5
			increase_wounds_no_death_effect = { REASON = accident }
		}
		random_child = {
			limit = { age < 16 }
			add_opinion = {
				modifier = whittled_me_a_gift
				target = root
			}
		}
		stress_impact = {
			diligent = medium_stress_impact_loss
			lazy = minor_stress_impact_loss
		}
	}
	
	option = { # Make something for my lover
		name = sailing.1007.b
		trigger = {
			num_of_relation_lover > 0
		}
		random = {
			chance = 5
			increase_wounds_no_death_effect = { REASON = accident }
		}
		random_relation = {
			type = lover
			add_opinion = {
				modifier = whittled_me_a_gift
				target = root
			}
		}
		stress_impact = {
			diligent = medium_stress_impact_loss
			lazy = minor_stress_impact_loss
		}		
	}
	
	option = { # Make a flute
		name = sailing.1007.c
		trigger = {
			OR = {
				has_trait = poet
				#has_trait = shanty_singer
			}
		}
		random = {
			chance = 10
			increase_wounds_no_death_effect = { REASON = accident }
		}
		add_character_modifier = handcarved_flute
		stress_impact = {
			diligent = medium_stress_impact_loss
			lazy = minor_stress_impact_loss
		}
	}
	
	option = { # Make something trivial
		name = sailing.1007.d
		random = {
			chance = 5
			increase_wounds_no_death_effect = { REASON = accident }
		}
		stress_impact = {
			base = minor_stress_impact_loss
		}		
	}
	
	option = { # I'd rather not...
		name = sailing.1007.e
		add_prestige = miniscule_prestige_gain
		stress_impact = {
			base = minor_stress_impact_gain
		}		
	}
	
	after = {
		trigger_event = {
			id = sailing.1990
			days = 30
		}
	}
}

#Crewmates in a Bar Brawl
sailing.1008 = {
	type = character_event
	title = sailing.1008.t
	desc = sailing.1008.desc
	theme = docks
	override_background = {
		event_background = tavern
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = scope:brawler
		animation = anger
	}

	trigger = {
		scope:activity = {
			has_variable_list = potential_sailing_participants
			any_in_list = {
					variable = potential_sailing_participants
					is_alive = yes
					is_ai = yes
					count >= 1
			}
		}
	}

	immediate = {
		scope:activity = {
			random_in_list = {
				variable = potential_sailing_participants
				limit = {
					is_alive = yes
					is_ai = yes
				}
				save_scope_as = brawler
			}
		}
	}
	
	option = { # Try to diffuse the situation
		name = sailing.1008.a
		duel = {
			skill = diplomacy
			value = 15
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.1008.a.success
				show_as_tooltip = {
					add_prestige = medium_prestige_gain
					reverse_add_opinion = {
						target = scope:brawler
						modifier = respect_opinion
						opinion = low_positive_opinion
					}
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.1008.a.failure
				show_as_tooltip = {
					add_prestige = minor_prestige_loss
					increase_wounds_effect = { REASON = fight }
					reverse_add_opinion = {
						target = scope:brawler
						modifier = weak_opinion
						opinion = low_negative_opinion
					}
					scope:brawler = {
						increase_wounds_effect = { REASON = fight }
					}
				}
			}
		}
		stress_impact = {
			shy = medium_stress_impact_gain
			callous = minor_stress_impact_gain
			sadistic = medium_stress_impact_gain
		}
	}
	
	option = { # Join in the brawl
		name = sailing.1008.b
		duel = {
			skill = prowess
			value = 15
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 4
					min = -49
				}
				desc = sailing.1008.b.success
				show_as_tooltip = {
					add_prestige = medium_prestige_gain
					reverse_add_opinion = {
						target = scope:brawler
						modifier = respect_opinion
						opinion = medium_positive_opinion
					}
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -4
					min = -49
				}
				desc = sailing.1008.b.failure
				show_as_tooltip = {
					add_prestige = minor_prestige_loss
					increase_wounds_effect = { REASON = fight }
					reverse_add_opinion = {
						target = scope:brawler
						modifier = respect_opinion
						opinion = low_positive_opinion
					}
					scope:brawler = {
						increase_wounds_effect = { REASON = fight }
					}
				}
			}
		}
		stress_impact = {
				#Rare opportunity for certain character types to 'blow off some steam' and lose stress here, at risk of wounds.
				wrathful = medium_stress_loss
				vengeful = medium_stress_loss
				sadistic = medium_stress_loss
				craven = major_stress_impact_gain
				calm = medium_stress_impact_gain
				patient = minor_stress_impact_gain
				forgiving = minor_stress_impact_gain
				compassionate = minor_stress_impact_gain
		}
	}
	
	option = { # Leave them to it
		name = sailing.1008.c
		add_prestige = medium_prestige_loss
		reverse_add_opinion = {
			target = scope:brawler
			modifier = refusal_opinion
			opinion = high_negative_opinion
		}
		scope:brawler = {
			increase_wounds_effect = { REASON = fight }
		}
		stress_impact = {
			drunkard = medium_stress_impact_loss
			diligent = minor_stress_impact_gain
			just = minor_stress_impact_gain
			reclusive = minor_stress_impact_loss
		}
	}

	after = {
		trigger_event = {
			id = sailing.1990
			days = 30
		}
	}
	
}

#The Drinking Contest
sailing.1009 = {
	type = character_event
	title = sailing.1009.t
	desc = sailing.1009.desc
	theme = docks
	override_background = {
		event_background = tavern
	}
	left_portrait = {
		character = root
		animation = dismissal
	}
	right_portrait = {
		character = scope:challenger
		animation = personality_bold
	}

	trigger = {
		scope:activity = {
			has_variable_list = potential_sailing_participants
			any_in_list = {
					variable = potential_sailing_participants
					is_alive = yes
					is_ai = yes
					count >= 1
			}
		}
	}

	immediate = {
		scope:activity = {
			random_in_list = {
				variable = potential_sailing_participants
				limit = {
					is_alive = yes
					is_ai = yes	
					prowess > 15					
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
					prowess > 10
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
				}
				save_scope_as = challenger
			}
		}
	}
	
	option = { # You're on!
		name = sailing.1009.a
		duel = {
			skill = prowess
			target = scope:challenger 
			60 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 2
					min = -59
				}
				modifier = {
					add = 150
					has_trait = drunkard
				}
				modifier = {
					add = 50
					has_trait = reveler_1
				}
				modifier = {
					add = 100
					has_trait = reveler_2
				}
				modifier = {
					add = 150
					has_trait = reveler_3
				}
				desc = sailing.1009.a.success
				show_as_tooltip = {
					add_gold = 25
					add_prestige = 50
					reverse_add_opinion = {
						target = scope:challanger
						modifier = respect_opinion
						opinion = low_positive_opinion
					}
				}
			}
			60 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -2
					min = -59
				}
				modifier = {
					add = 150
					scope:challenger = { has_trait = drunkard }
				}
				modifier = {
					add = 50
					scope:challenger = { has_trait = reveler_1 }
				}
				modifier = {
					add = 100
					scope:challenger = { has_trait = reveler_2 }
				}
				modifier = {
					add = 150
					scope:challenger = { has_trait = reveler_3 }
				}
				desc = sailing.1009.a.failure
				show_as_tooltip = {
					remove_short_term_gold = 25
					add_prestige = -50
					reverse_add_opinion = {
						target = scope:challanger
						modifier = weak_opinion
						opinion = low_negative_opinion
					}
				}
			}
		}
		stress_impact = {
			shy = minor_stress_impact_gain
			drunkard = medium_stress_impact_loss
			reveler_1 = minor_stress_impact_loss
			reveler_2 = minor_stress_impact_loss
			reveler_3 = minor_stress_impact_loss
		}
	}
	
	option = { # I'd rather not...
		name = sailing.1009.b
		add_prestige = minor_prestige_loss
		stress_impact = {
			arrogant = minor_stress_impact_gain
			gregarious = minor_stress_impact_gain
			drunkard = medium_stress_impact_gain
			reveler_1 = medium_stress_impact_gain
			reveler_2 = medium_stress_impact_gain
			reveler_3 = medium_stress_impact_gain
		}
	}
	
	after = {
		trigger_event = {
			id = sailing.1990
			days = 30
		}
	}
}

#The Fortune Teller
sailing.1010 = {
	type = character_event
	title = sailing.1010.t
	desc = sailing.1010.desc
	theme = docks
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:mystic
		animation = flirtation
	}

	trigger = {
		NOR = {
			has_character_modifier = good_omen_modifier
			has_character_modifier = bad_omen_modifier
		}
	}

	immediate = {
		hidden_effect = {
			create_character = {
				location = scope:sailing_province
				culture = root.culture
				gender = female
				age = { 70 90 }
				trait = mystic_1
				random_traits = yes
				faith = root.faith
				learning = { 5 10 }
				random_traits_list = {
					count = 1
					mystic_1 = {}
					mystic_2 = {}
					mystic_3 = {}
				}
				save_scope_as = mystic
			}
			scope:mystic = { 
				set_to_lowborn = yes
			}
		}
	}
	
	option = { # Let me hear what lies in my future!
		name = sailing.1010.a
		remove_short_term_gold = 20
		random_list = {
			55 = {
				desc = sailing.1010.a.success
				send_interface_toast = {
					title = sailing.1010.a.success.t
					left_icon = root
					add_character_modifier = {
						modifier = good_omen_modifier
						years = 10
					}
				}
			}
			45 = {
				desc = sailing.1010.a.failure
				send_interface_toast = {
					title = sailing.1010.a.failure.t
					left_icon = root
					add_character_modifier = {
						modifier = bad_omen_modifier
						years = 10
					}
				}
			}
		}
		stress_impact = {
			cynical = minor_stress_impact_gain
			greedy = miniscule_stress_impact_gain
		}
	}
	
	option = { # I'd rather not...
		name = sailing.1010.b
		stress_impact = {
			paranoid = minor_stress_impact_gain
			mystic_1 = minor_stress_impact_gain
			mystic_2 = minor_stress_impact_gain
			mystic_3 = minor_stress_impact_gain
			witch = minor_stress_impact_gain
			arbitrary = miniscule_stress_impact_gain
		}
	}
	
	after = {
		hidden_effect = {
			scope:mystic = {
				death = { death_reason = death_disappearance }
			}
		}
		trigger_event = {
			id = sailing.1990
			days = 30
		}
	}	
}

#Dockyard Delicacies
sailing.1011 = {
	type = character_event
	title = sailing.1011.t
	desc = sailing.1011.desc
	theme = docks
	left_portrait = {
		character = root
		animation = disgust
	}
	right_portrait = {
		character = scope:fellow_diner
		animation = happiness
	}

	trigger = {
		scope:activity = {
			has_variable_list = potential_sailing_participants
			any_in_list = {
					variable = potential_sailing_participants
					is_alive = yes
					count >= 1
			}
		}
	}

	immediate = {
		scope:activity = {
			random_in_list = {
				variable = potential_sailing_participants
				limit = {
					is_alive = yes
				}
				save_scope_as = fellow_diner
			}
		}
	}

	option = { # Well I guess if you tried it!
		name = sailing.1011.a
		random_list = {
			45 = {
				desc = sailing.1011.a.success
				modifier = {
					add = 20
					has_trait = physique_good_1
				}
				modifier = {
					add = 40
					has_trait = physique_good_2
				}
				modifier = {
					add = 60
					has_trait = physique_good_3
				}
				modifier = {
					add = 20
					has_trait = strong
				}
				modifier = {
					add = 20
					has_trait = gluttonous
				}
				modifier = {
					add = 20
					has_trait = comfort_eater
				}
				send_interface_toast = {
					title = sailing.1011.a.success.t
					left_icon = root
					add_character_modifier = {
						modifier = ate_good_meal
						days = 365
					}
				}
			}
			30 = {
				desc = sailing.1011.a.too_spicy
				send_interface_toast = {
					title = sailing.1011.a.too_spicy.t
					left_icon = root
				}
				stress_impact = {
					base = minor_stress_impact_gain
				}					
			}
			25 = {
				desc = sailing.1011.a.failure
				modifier = {
					add = 20
					has_trait = physique_bad_1
				}
				modifier = {
					add = 40
					has_trait = physique_bad_2
				}
				modifier = {
					add = 60
					has_trait = physique_bad_3
				}
				modifier = {
					add = 20
					has_trait = weak
				}
				modifier = {
					add = 20
					has_trait = temperate
				}
				modifier = {
					add = 20
					has_trait = inappetetic
				}
				send_interface_toast = {
					title = sailing.1011.a.failure.t
					left_icon = root
					add_character_modifier = {
						modifier = got_food_poisoning
						days = 365
					}
				}
				stress_impact = {
					base = medium_stress_impact_gain
				}
			}
		}
		reverse_add_opinion = {
			target = scope:fellow_diner
			modifier = pleased_opinion
			opinion = low_positive_opinion
		}
		add_prestige = 25
		remove_short_term_gold = 10 
		stress_impact = {
			inappetetic = medium_stress_impact_gain
			craven = minor_stress_impact_gain
			temperate = minor_stress_impact_gain
			paranoid = minor_stress_impact_gain
			comfort_eater = medium_stress_impact_loss
			gluttonous = minor_stress_impact_loss
		}		
	}
	
	option = { # I'll pass...
		name = sailing.1011.b
		reverse_add_opinion = {
			target = scope:fellow_diner
			modifier = disappointed_opinion
			opinion = low_negative_opinion
		}
		add_prestige = -25
		stress_impact = {
			comfort_eater = medium_stress_impact_gain
			gluttonous = minor_stress_impact_gain
			brave = minor_stress_impact_gain
			inappetetic = medium_stress_impact_loss
			temperate = minor_stress_impact_loss
		}
	}

	after = {
		trigger_event = {
			id = sailing.1990
			days = 30
		}
	}
	
}

#Seagull Surprise!
sailing.1012 = {
	type = character_event
	title = sailing.1012.t
	desc = sailing.1012.desc
	theme = docks
	left_portrait = {
		character = root
		animation = anger
	}
	right_portrait = {
		character = scope:laugher
		animation = happiness
	}

	trigger = {
		scope:activity = {
			has_variable_list = potential_sailing_participants
			any_in_list = {
					variable = potential_sailing_participants
					is_alive = yes
					count >= 1
			}
		}
	}

	immediate = {
		scope:activity = {
			random_in_list = {
				variable = potential_sailing_participants
				limit = {
					is_alive = yes
				}
				save_scope_as = laugher
			}
		}
	}

	option = { # I suppose it is rather funny!
		name = sailing.1012.a
		add_prestige = -50
		add_dread = medium_dread_loss
		reverse_add_opinion = {
			target = scope:laugher
			modifier = amused_opinion
			opinion = low_positive_opinion
		}
	}
	
	option = { # Have them whipped
		name = sailing.1012.b
		if = {
			limit = { scope:laugher = { highest_held_title_tier > tier_barony } }
			add_dread = medium_dread_gain
			set_relation_rival = scope:laugher
		}
		else = {
			add_dread = minor_dread_gain
		}
		scope:laugher = {
			increase_wounds_effect = { REASON = whipping }
			add_opinion = {
				target = root
				modifier = angry_opinion
				opinion = medium_negative_opinion
			}
		}
		stress_impact = {
			compassionate = medium_stress_impact_gain
			calm = minor_stress_impact_gain
			sadistic = minor_stress_impact_loss
		}
	}

	after = {
		trigger_event = {
			id = sailing.1990
			days = 30
		}
	}
		
}

#An Experienced Sailor
sailing.1013 = {
	type = character_event
	title = sailing.1013.t
	desc = sailing.1013.desc
	theme = docks
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	right_portrait = {
		character = scope:recruit
		animation = personality_cynical
	}

	immediate = {
		create_character = {
			location = scope:sailing_province
			gender = male
			template = new_commander_character
			age = { 35 60 }
			faith = root.faith
			random_traits_list = {
				count = 1
				mariner_1 = {}
				mariner_2 = {}
				mariner_3 = {}
			}
			save_scope_as = recruit
		}	
	}
	
	option = { # Diplomacy - Convince them to join
		name = sailing.1013.a
		duel = {
			skill = diplomacy
			value = 12
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				modifier = {
					add = 10
					has_trait = mariner_1
				}
				modifier = {
					add = 20
					has_trait = mariner_2
				}
				modifier = {
					add = 30
					has_trait = mariner_3
				}
				modifier = {
					add = 10
					has_character_modifier = medium_boat_modifier
				}
				modifier = {
					add = 20
					has_character_modifier = large_boat_modifier
				}
				desc = sailing.1013.a.success
				send_interface_toast = {
					title = sailing.1013.a.success
					scope:recruit = { set_employer = root }
					reverse_add_opinion = {
						target = scope:recruit
						modifier = respect_opinion
						opinion = low_positive_opinion
					}
				}
				scope:activity = {
					add_to_variable_list = {
						name = potential_sailing_participants
						target = scope:recruit
					}
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.1013.a.failure
				send_interface_toast = {
					title = sailing.1013.a.failure
					add_prestige = minor_prestige_loss
					hidden_effect = {
						scope:recruit = {
							death = { death_reason = death_disappearance }
						}
					}
				}
			}
		}
	}
	
	option = { # Bribe - Pay the to join
		name = sailing.1013.b
		scope:recruit = { set_employer = root }
		if = {
			limit = {
				scope:recruit = { has_trait = mariner_3 }
			}
			remove_short_term_gold = 150
		}
		else_if = {
			limit = {
				scope:recruit = { has_trait = mariner_2 }
			}
			remove_short_term_gold = 100
		}
		else = {
			remove_short_term_gold = 50
		}	
		scope:activity = {
			add_to_variable_list = {
				name = potential_sailing_participants
				target = scope:recruit
			}
		}
	}
	
	option = { # Refuse - Choose not to recruit
		name = sailing.1013.c
		hidden_effect = {
			scope:recruit = {
				death = { death_reason = death_disappearance }
			}
		}
	}

	after = {
		trigger_event = {
			id = sailing.1990
			days = 30
		}
	}

}

#Gathering Supplies - ONE UPDATE & LINK TO LACK OF SUPPLIES MENEL
sailing.1014 = {
	type = character_event
	title = sailing.1014.t
	desc = sailing.1014.desc
	theme = docks
	override_background = {
		event_background = market_west
	}
	left_portrait = {
		character = root
		animation = personality_honorable
	}

	option = { # Book
		name = sailing.1014.a
		
		random = {
			chance = 10
			add_learning_skill = 1
		}
		custom_tooltip = sailing.1014.a.tt
		hidden_effect = {
			random_list = {
				25 = {
					mariner_progress_point_gain_effect = yes
					send_interface_toast = {
						left_icon = ROOT
						title = sailing.1014.a.success.toast
					}
				}
				75 = {
					send_interface_toast = {
						left_icon = ROOT
						title = sailing.1014.a.failure.toast
					}
				}
			}
		}
		remove_short_term_gold = 50
	}

	option = { # Booze
		name = sailing.1014.b
		random_list = {
			90 = { add_stress = -20 }
			10 = { add_stress = -30 add_trait = drunkard }
		}
		remove_short_term_gold = 30
	}

	option = { # Oranges - ADD LEARNING / MARINER LIMIT?
		name = sailing.1014.c
		add_character_modifier = {
			modifier = supply_of_citrus
			days = 365			
		}
		remove_short_term_gold = 30
	}

	option = { # Refuse - I don't need anything
		name = sailing.1014.d
	}	

	after = {
		trigger_event = {
			id = sailing.1990
			days = 30
		}
	}
	
}

#Game at the Docks
sailing.1015 = {
    type = character_event
    title = sailing.1015.t
    desc = sailing.1015.desc
    theme = docks

    left_portrait = {
        character = scope:gambler
        animation = personality_dishonorable
    }

    right_portrait = {
        character = root
        animation = personality_rational
    }

    immediate = {
        hidden_effect = {
            create_character = {
                location = scope:sailing_province
                culture = root.culture
                gender = male
                age = { 20 60 }
                trait = schemer
                random_traits = yes
                faith = root.faith
                intrigue = { 4 12 }
                save_scope_as = gambler
            }
            scope:gambler = { 
                set_to_lowborn = yes
            }
        }
    }

    option = { #play the game
        name = sailing.1015.a
        duel = {
            skill = martial
            value = 10
            50 = {        
                compare_modifier = {
                    value = scope:duel_value
                    multiplier = 3.5
                    min = -49
                }
                desc = sailing.1015.a.success
                show_as_tooltip = {
                    add_gold = 15
                }
            }
            50 = {        
                compare_modifier = {
                    value = scope:duel_value
                    multiplier = -3.5
                    min = -49
                }
                desc = sailing.1015.a.failure
                show_as_tooltip = {
                    remove_short_term_gold = 15
                }
            }
        }
        ai_chance = {
            base = 100
            ai_value_modifier = {
                ai_compassion = 0.25
                ai_honor = 0.25
                ai_zeal = -0.25
            }
        }
    }

    option = { #take money and don't play
        name = sailing.1015.b
        duel = {
            skill = prowess
            value = 10
            50 = {        
                compare_modifier = {
                    value = scope:duel_value
                    multiplier = 4
                    min = -49
                }
                desc = sailing.1015.b.success
                show_as_tooltip = {
                    add_gold = 25
                    add_dread = 10
                    add_tyranny = minor_tyranny_gain
                }
            }
            50 = {        
                compare_modifier = {
                    value = scope:duel_value
                    multiplier = -4
                    min = -49
                }
                desc = sailing.1015.b.failure
                show_as_tooltip = {
                    add_prestige = -50
                    increase_wounds_effect = { REASON = fight }
                }
            }
        }
        ai_chance = {
            base = 100
            ai_value_modifier = {
                ai_greed = 0.5
                ai_compassion = -0.25
                ai_honor = -0.5
            }
        }

        stress_impact = {
            compassionate = minor_stress_impact_gain
            generous = minor_stress_impact_gain
            greedy = minor_stress_impact_loss
            callous = minor_stress_impact_loss
        }
    }

    option = { #walk away
        name = sailing.1015.c

        stress_impact = {
            greedy = minor_stress_impact_gain
        }
        ai_chance = {
            base = 100
            ai_value_modifier = {
                ai_greed = -0.5
            }
        }
    }

    after = {
        trigger_event = {
            id = sailing.1990
            days = 30
        }
    }
}

#Set out to Sea - ADD BETTER LOGIC FOR CHOOSING GOOD FIRST MATE (MINOR TITLE HOLDER, FRIEND, MARINER, POWERFUL VASSAL ETC)
sailing.1990 = {
	type = character_event
	title = sailing.1990.t
	desc = sailing.1990.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = scope:first_mate
		animation = personality_bold
	}

	immediate = {
		scope:activity = {
			random_in_list = {
				variable = potential_sailing_participants
				limit = {
					is_alive = yes
					is_ai = yes
					OR = {
						has_relation_friend = root
						has_relation_best_friend = root
					}
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
					has_trait = mariner_3
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
					has_trait = mariner_2
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
					has_trait = mariner_1
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
					is_powerful_vassal_of = root
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
					stewardship > 10
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
				}
				save_scope_as = first_mate
			}
		}
	}

	option = { # Exploration!
		name = sailing.1990.a
		add_character_flag = {
			flag = sailing_exporation_mission
			years = 4
		}
		trigger_event = sailing.1991
	}

	#option = { # Piracy!
	#	name = sailing.1990.b
	#	add_character_flag = {
	#		flag = sailing_piracy_mission
	#		years = 4
	#	}
	#	custom_tooltip = sailing.9001.tt
	#	trigger_event = {
	#		id = sailing.9001
	#		days = 1
	#	}
	#}

}

#Exploring where?

sailing.1991 = {
	type = character_event
	title = sailing.1991.t
	desc = sailing.1991.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = scope:first_mate
		animation = personality_cynical
	}

	option = { # Explore 
		name = sailing.1991.a
		add_character_flag = {
			flag = sailing_exploration
			years = 2
		}
		trigger_event = {
			on_action = sailing_at_sea_events
			days = { 20 40 }
		}
	}

	#option = { # South
	#	name = sailing.1991.b
	#	custom_tooltip = sailing.9001.tt
	#	trigger_event = {
	#		id = sailing.9001
	#		days = 1
	#	}
	#}
	
	option = { # Meneltarma
		name = sailing.1991.c
		trigger = {
			NOT = { has_character_flag = failed_to_navigate_towards_numenor }
		}
		trigger_event = {
			id = sailing.3100
			days = 1
		}
		ai_chance = { base = 0 }
	}
	
}


############################
## Random events at sea
## 2000-2999
## by Jamie-san
############################

#An invitation to play dice
#sailing.2001 = {
#	type = character_event
#	title = sailing.2001.t
#	desc = sailing.2001.desc
#	#theme = at_sea
#	left_portrait = root
#	#right_portrait = scope:gambling_sailor_1
#
#	#trigger = {
#	#	scope:activity = {
#	#		has_variable_list = potential_sailing_participants
#	#		any_in_list = {
#	#				variable = potential_sailing_participants
#	#				is_alive = yes
#	#				count >= 1
#	#		}
#	#	}
#	#}
#	#
#	#immediate = {
#	#	scope:activity = {
#	#		random_in_list = {
#	#			variable = potential_sailing_participants
#	#			limit = {
#	#				is_alive = yes
#	#			}
#	#			alternative_limit = {
#	#				is_powerful_vassal = yes
#	#			}
#	#			save_scope_as = gambling_sailor_1
#	#		}
#	#		set_variable = {
#	#			name = participant_to_use
#	#			value = scope:gambling_sailor_1
#	#			days = 300
#	#		}
#	#	}
#	#}
#
#	option = { # Sure, I'll play some dice
#		name = sailing.2001.a
#		add_prestige = minor_prestige_gain
#		stress_impact = {
#			greedy = minor_stress_impact_loss
#		}
#		ai_chance = {
#			base = 50
#			modifier = {
#				add = 40
#				OR = {
#					has_trait = greedy
#					has_trait = gregarious
#				}
#			}
#		}
#	}
#
#	option = { # You won't catch me gambling!
#		name = sailing.2001.b
#		add_prestige = minor_prestige_loss
#		stress_impact = {
#			greedy = medium_stress_impact_gain
#		}
#		ai_chance = {
#			base = 50
#			modifier = {
#				add = 40
#				OR = {
#					has_trait = generous
#					has_trait = shy
#				}
#			}
#		}
#	}
#
#	after = {
#		trigger_event = {
#			id = sailing.9001 #To complete the activity
#			days = { 14 20 }
#		}	
#	}
#
#}

sailing.2002 = {
	type = character_event
	title = sailing.2002.t
	desc = sailing.2002.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = personality_bold
	}

	# Stop and try to help them!
	option = {
		name = sailing.2002.a

		# Martial duel to organise your sailors.
		duel = {
			skill = martial
			value = 10
			# You succeed in saving the crew and some of their haul!
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.2002.a.tt_success
				send_interface_toast = {
					title = sailing.2002.a.tt_success
					left_icon = root
					add_prestige = minor_prestige_gain
				}
			}
			# You fail, and many are lost to the storm.
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.2002.a.tt_failure
				send_interface_toast = {	
					title = sailing.2002.a.tt_failure
					left_icon = root
					add_prestige = miniscule_prestige_loss
				}
			}
		}

		stress_impact = {
			diligent = minor_stress_impact_loss
			compassionate = medium_stress_impact_loss
			lazy = minor_stress_impact_gain
			callous = medium_stress_impact_gain
			sadistic = medium_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = 0.75
				ai_energy = 0.25
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = diligent
			}
			modifier = {	# Weight up for stress.
				add = 20
				has_trait = compassionate
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = lazy
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = callous
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = sadistic
			}
		}
	}
	
	# Salvage the cargo, kill the survivors.
	option = {
		name = sailing.2002.b

		# Prowess duel to storm the boat.
		duel = {
			skill = prowess
			value = 10
			# You storm the boat easily.
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.2002.b.tt_success
				send_interface_toast = {
					title = sailing.2002.b.tt_success
					left_icon = root
					add_gold = minor_gold_value
				}
			}
			# Survivors slip to shore.
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.2002.b.tt_failure
				send_interface_toast = {	
					title = sailing.2002.b.tt_failure
					left_icon = root
					add_gold = minor_gold_value
					add_dread = minor_dread_gain
					add_tyranny = minor_tyranny_gain
				}
			}
		}

		stress_impact = {
			greedy = minor_stress_impact_loss
			callous = minor_stress_impact_loss
			sadistic = medium_stress_impact_loss
			compassionate = medium_stress_impact_gain
			generous = medium_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_boldness = 0.5
				ai_greed = 0.25
				ai_compassion = -0.5
				ai_honor = -0.5
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = greedy
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = callous
			}
			modifier = {	# Weight up for stress.
				add = 20
				has_trait = sadistic
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = compassionate
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = generous
			}
		}
	}
	
	# Sail on by.
	option = {
		name = sailing.2002.c

		# Minor dread gain from your crew.
		add_dread = miniscule_dread_gain

		stress_impact = {
			lazy = minor_stress_impact_loss
			callous = minor_stress_impact_loss
			arbitrary = minor_stress_impact_loss
			diligent = minor_stress_impact_gain
			compassionate = minor_stress_impact_gain
			just = minor_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = -0.25
				ai_energy = -0.5
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = lazy
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = callous
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = arbitrary
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = diligent
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = compassionate
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = just
			}
		}
	}
	
	after = {
		if = {
			limit = { has_character_flag = sailing_exploration }
			trigger_event = {
				on_action = sailing_exploration_events
				days = { 20 40 }
			}
		}
		else = {
			trigger_event = sailing.9001
		}
	}
}

sailing.2003 = {
	type = character_event
	title = sailing.2003.t
	desc = sailing.2003.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = shock
	}

	trigger = {
		# DLC check.
		has_fp1_dlc_trigger = yes
	}

	# Get the harpoons!
	option = {
		name = sailing.2003.a

		# Prowess challenge to slaughter the whale.
		duel = {
			skill = prowess
			value = decent_skill_rating
			# You haul the whale to shore and butcher it.
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.2003.a.tt_success
				send_interface_toast = {
					title = sailing.2003.a.tt_success
					left_icon = root
					add_gold = 100
				}
			}
			# The beast escapes you.
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.2003.a.tt_failure
				send_interface_toast = {	
					title = sailing.2003.a.tt_failure
					left_icon = root
					add_prestige = minor_prestige_loss
				}
			}
		}

		stress_impact = {
			vengeful = miniscule_stress_impact_loss	# From Hell's Heart I stab at thee, etc.
			brave = major_stress_impact_loss
			craven = major_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_boldness = 0.5
				ai_energy = 0.5
				ai_compassion = -0.25
			}
			modifier = {	# Weight up for stress.
				add = 5
				has_trait = vengeful
			}
			modifier = {	# Weight up for stress.
				add = 30
				has_trait = brave
			}
			modifier = {	# Weight down for stress.
				add = -30
				has_trait = craven
			}
		}
	}
	
	# Just bring me the carcass.
	option = {
		name = sailing.2003.b

		add_gold = 50

		stress_impact = {
			greedy = minor_stress_impact_loss
			generous = minor_stress_impact_gain
			compassionate = minor_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_boldness = -0.25
				ai_energy = -0.25
				ai_compassion = -0.25
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = greedy
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = generous
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = compassionate
			}
		}
	}
	
	# (Hunter) A *grand* quarry!
	option = {
		name = sailing.2003.c
		trigger = { has_trait = lifestyle_hunter }
		trait = hunter_1
		trait = hunter_2
		trait = hunter_3

		# You face a *true* leviathan.
		custom_tooltip = sailing.2003.c.tt
		# More difficult prowess challenge for greater rewards.
		duel = {
			skill = prowess
			value = very_high_skill_rating
			# You haul the whale to shore and butcher it.
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.2003.c.tt_success
				send_interface_toast = {
					title = sailing.2003.c.tt_success
					left_icon = root
					add_gold = 300
				}
			}
			# The beast escapes you.
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.2003.c.tt_failure
				send_interface_toast = {	
					title = sailing.2003.c.tt_failure
					left_icon = root
					increase_wounds_effect = { REASON = hunting_accident }
					add_prestige = minor_prestige_loss
				}
			}
		}

		stress_impact = {
			vengeful = miniscule_stress_impact_loss	# From Hell's Heart I stab at thee, etc.
			brave = major_stress_impact_loss
			craven = major_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_boldness = 0.75
				ai_energy = 0.75
				ai_compassion = -0.25
			}
			modifier = {	# Weight up for stress.
				add = 5
				has_trait = vengeful
			}
			modifier = {	# Weight up for stress.
				add = 30
				has_trait = brave
			}
			modifier = {	# Weight down for stress.
				add = -30
				has_trait = craven
			}
		}
	}

	# A creature of fearsome majesty, leave it.
	option = {
		name = sailing.2003.d

		# The whale goes free.
		custom_tooltip = sailing.2003.d.tt
		# You gain a little prestige for your kindness.
		add_prestige = minor_prestige_gain

		stress_impact = {
			generous = minor_stress_impact_loss
			compassionate = medium_stress_impact_loss
			craven = major_stress_impact_loss
			greedy = medium_stress_impact_gain
			sadistic = medium_stress_impact_gain
			brave = major_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = 0.5
				ai_boldness = -0.5
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = generous
			}
			modifier = {	# Weight up for stress.
				add = 20
				has_trait = compassionate
			}
			modifier = {	# Weight up for stress.
				add = 30
				has_trait = craven
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = greedy
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = sadistic
			}
			modifier = {	# Weight down for stress.
				add = -30
				has_trait = brave
			}
		}
	}
	
	after = {
		if = {
			limit = { has_character_flag = sailing_exploration }
			trigger_event = {
				on_action = sailing_exploration_events
				days = { 20 40 }
			}
		}
		else = {
			trigger_event = sailing.9001
		}
	}
}

#sailing.2004 = {
#	type = character_event
#	title = sailing.2004.t
#	desc = sailing.2004.desc
#	theme = at_sea
#	left_portrait = {
#		character = root
#		animation = personality_bold
#	}
#
#	# Stop and try to help them!
#	option = {
#		name = sailing.2004.a
#	}	
#}

sailing.2005 = { # Crewmate overboard
	type = character_event
	title = sailing.2005.t
	desc = sailing.2005.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = personality_bold
	}

	# Dive into the water to save him
	option = {
		name = sailing.2005.a

		# Prowess duel to save your crewman
		duel = {
			skill = prowess
			value = 10
			# You succeed in single-handily saving the crewman
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.2005.a.tt_success
				send_interface_toast = {
					title = sailing.2005.a.tt_success
					left_icon = root
					add_prestige = minor_prestige_gain
				}
			}
			# You fail, and your crewmate is lost to the waves - and you catch a cold!
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.2005.a.tt_failure
				send_interface_toast = {	
					title = sailing.2005.a.tt_failure
					left_icon = root
					add_prestige = miniscule_prestige_loss
				}
			}
		}

		stress_impact = {
			diligent = minor_stress_impact_loss
			compassionate = medium_stress_impact_loss
			lazy = minor_stress_impact_gain
			callous = medium_stress_impact_gain
			sadistic = medium_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = 0.75
				ai_energy = 0.25
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = diligent
			}
			modifier = {	# Weight up for stress.
				add = 20
				has_trait = compassionate
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = lazy
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = callous
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = sadistic
			}
		}
	}
	
	# Organize a rescue operation by your crew
	option = {
		name = sailing.2005.b

		# Stewardship duel to organize a rescue operation
		duel = {
			skill = stewardship
			value = 10
			# You easily order your men to the point where the man is retrieved 
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.2005.b.tt_success
				send_interface_toast = {
					title = sailing.2005.b.tt_success
					left_icon = root
					add_prestige = minor_prestige_gain
				}
			}
			# You can't organize the men in time - the sailor drowns
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.2005.b.tt_failure
				send_interface_toast = {	
					title = sailing.2005.b.tt_failure
					left_icon = root
					add_prestige = minor_prestige_loss
					add_stress = minor_stress_impact_gain
				}
			}
		}

		stress_impact = {
			greedy = minor_stress_impact_loss
			callous = minor_stress_impact_loss
			sadistic = medium_stress_impact_loss
			compassionate = medium_stress_impact_gain
			generous = medium_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_boldness = 0.5
				ai_greed = 0.25
				ai_compassion = -0.5
				ai_honor = -0.5
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = greedy
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = callous
			}
			modifier = {	# Weight up for stress.
				add = 20
				has_trait = sadistic
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = compassionate
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = generous
			}
		}
	}
	
	# Abandon him, batten down the hatches
	option = {
		name = sailing.2005.c

		# Minor dread gain from your crew.
		add_dread = miniscule_dread_gain
		add_prestige = minor_prestige_loss

		stress_impact = {
			lazy = minor_stress_impact_loss
			callous = minor_stress_impact_loss
			arbitrary = minor_stress_impact_loss
			diligent = minor_stress_impact_gain
			compassionate = minor_stress_impact_gain
			just = minor_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = -0.25
				ai_energy = -0.5
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = lazy
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = callous
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = arbitrary
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = diligent
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = compassionate
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = just
			}
		}
	}
	
	after = {
		if = {
			limit = { has_character_flag = sailing_exploration }
			trigger_event = {
				on_action = sailing_exploration_events
				days = { 20 40 }
			}
		}
		else = {
			trigger_event = sailing.9001
		}
	}
}

# A Game of Cards by Brice Underhill
sailing.2006 = {
	type = character_event
	title = sailing.2006.t
	desc = sailing.2006.desc
	theme = at_sea
	override_background = {
		event_background = tavern
	}
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:first_mate
		animation = flirtation_left
	}
	
	option = { #Playing straight
		name = sailing.2006.a
		add_prestige = minor_prestige_gain
		Random_list = { 
			50 = { 
			desc = sailing.2006.a.tt_success
			send_interface_toast = {
					title = sailing.2006.a.tt_success
					left_icon = root
					add_gold = activity_minor_gold_value
					}
			} 
			50 = { 
			desc = sailing.2006.a.tt_failure
			send_interface_toast = {
					title = sailing.2006.a.tt_failure
					left_icon = root
					remove_short_term_gold = activity_minor_gold_value
					}
			} 
		}
	}
	
	option = { #Cheating
		name = sailing.2006.b
		#Intrigue duel to win at cards
		stress_impact = {
			honest = minor_stress_impact_gain
		}
		duel = {
			skill = intrigue
			value = 10
			# You use the aces up your sleeves to win the game 
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.2006.b.tt_success
				send_interface_toast = {
					title = sailing.2006.b.tt_success
					left_icon = root
					add_gold = activity_minor_gold_value
					}	
			}
			
			# You get caught by the sailors
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.2006.b.tt_failure
				send_interface_toast = {
					title = sailing.2006.b.tt_failure
					left_icon = root
					remove_short_term_gold = activity_minor_gold_value
					add_prestige = minor_prestige_loss
					add_stress = minor_stress_impact_gain
					}
				
			}
		}
	}
	
	option = { #Staying out
		name = sailing.2006.c
		add_prestige = minor_prestige_gain
		stress_impact = {
			greedy = minor_stress_impact_gain
			content = minor_stress_impact_loss
			gregarious = medium_stress_impact_loss
			drunkard = major_stress_impact_loss
		}
	}
	
	after = {
		if = {
			limit = { has_character_flag = sailing_exploration }
			trigger_event = {
				on_action = sailing_exploration_events
				days = { 20 40 }
			}
		}
		else = {
			trigger_event = sailing.9001
		}
	}
}	
	
sailing.2007 = { # Insufferable Discord by RedArkady
	type = character_event
	title = sailing.2007.t
	desc = sailing.2007.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = disgust
	}

	# At the next port try to block the passengers from returning to the ship
	option = {
		name = sailing.2007.a

		# Intrigue duel to save your crewman
		duel = {
			skill = intrigue
			value = 10
			# Your crew is free of the whinging
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.2007.a.tt_success
				send_interface_toast = {
					title = sailing.2007.a.tt_success
					left_icon = root
					add_prestige = minor_prestige_gain
				}
			}
			# Elves when?
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.2007.a.tt_failure
				send_interface_toast = {	
					title = sailing.2007.a.tt_failure
					left_icon = root
					add_prestige = miniscule_prestige_loss
				}
			}
		}

		stress_impact = {
			diligent = minor_stress_impact_loss
			compassionate = medium_stress_impact_loss
			lazy = minor_stress_impact_gain
			callous = medium_stress_impact_gain
			sadistic = medium_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = 0.75
				ai_energy = 0.25
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = diligent
			}
			modifier = {	# Weight up for stress.
				add = 20
				has_trait = compassionate
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = lazy
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = callous
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = sadistic
			}
		}
	}
	
		# Sell the passengers to the corsairs
	option = {
		name = sailing.2007.b

		# Minor dread gain from your crew.
		add_dread = miniscule_dread_gain
		add_prestige = minor_prestige_loss

		stress_impact = {
			lazy = minor_stress_impact_loss
			callous = minor_stress_impact_loss
			arbitrary = minor_stress_impact_loss
			diligent = minor_stress_impact_gain
			compassionate = minor_stress_impact_gain
			just = minor_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = -0.25
				ai_energy = -0.5
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = lazy
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = callous
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = arbitrary
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = diligent
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = compassionate
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = just
			}
		}
	}
	
	# Instruct the crew to ignore the discord.
	option = {
		name = sailing.2007.c

		# Diplomacy duel to deceive the passengers
		duel = {
			skill = diplomacy
			value = 10
			# The crew rises above the whinging 
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.2007.c.tt_success
				send_interface_toast = {
					title = sailing.2007.c.tt_success
					left_icon = root
					add_prestige = minor_prestige_gain
				}
			}
			# Elves when?
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.2007.c.tt_failure
				send_interface_toast = {	
					title = sailing.2007.c.tt_failure
					left_icon = root
					add_prestige = minor_prestige_loss
					add_stress = minor_stress_impact_gain
				}
			}
		}

		stress_impact = {
			greedy = minor_stress_impact_loss
			callous = minor_stress_impact_loss
			sadistic = medium_stress_impact_loss
			compassionate = medium_stress_impact_gain
			generous = medium_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_boldness = 0.5
				ai_greed = 0.25
				ai_compassion = -0.5
				ai_honor = -0.5
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = greedy
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = callous
			}
			modifier = {	# Weight up for stress.
				add = 20
				has_trait = sadistic
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = compassionate
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = generous
			}
		}
	}
	
	after = {
		if = {
			limit = { has_character_flag = sailing_exploration }
			trigger_event = {
				on_action = sailing_exploration_events
				days = { 20 40 }
			}
		}
		else = {
			trigger_event = sailing.9001
		}
	}
}

	
# Becalmed by Brice Underhill
sailing.2008 = {
	type = character_event
	title = sailing.2008.t
	desc = sailing.2008.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:first_mate
		animation = worry
	}
	
	option = { #Making the offering
		name = sailing.2008.a
		remove_short_term_gold = activity_minor_gold_value
		add_piety = minor_piety_gain
		stress_impact = {
			cynical = minor_stress_impact_gain
			zealous = minor_stress_impact_loss
			impatient = medium_stress_impact_loss
		}	
	}
	
	option = { #We will wait
		name = sailing.2008.b
		add_prestige = miniscule_prestige_gain
		stress_impact = {
			patient = minor_stress_impact_loss
			impatient = major_stress_impact_gain
		}
		add_dread = miniscule_dread_gain
	}
	
	option = { #Theology lesson
		name = sailing.2008.c
		trigger = {
			learning >= extremely_high_skill_rating
		}
		skill = learning
		add_piety = medium_piety_gain
	}
	
	after = {
		if = {
			limit = { has_character_flag = sailing_exploration }
			trigger_event = {
				on_action = sailing_exploration_events
				days = { 20 40 }
			}
		}
		else = {
			trigger_event = sailing.9001
		}
	}
}

# The Stars Shine the Same
sailing.2009 = { 
	type = character_event
	title = sailing.2009.t
	desc = sailing.2009.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	right_portrait = {
		character = scope:stargazer
		animation = personality_rational
	}

	immediate = {
		scope:activity = {
			random_in_list = {
				variable = potential_sailing_participants
				limit = {
					is_alive = yes
					is_ai = yes
					NOT = { has_trait = lifestyle_mariner }
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
				}
				save_scope_as = stargazer
			}
		}
	}

	# Navigation
	option = {
		name = sailing.2009.a
		trigger = {
			OR = {
				has_trait = lifestyle_mariner
				learning > 10
				scope:stargazer = { NOT = { has_trait = lifestyle_mariner } }
			}
		}
		random = { 
			chance = 33
			send_interface_toast = {
				left_icon = ROOT
				title = sailing.2009.a.success.toast
				scope:stargazer = { add_trait = mariner_1 }
				custom_tooltip = sailing.2009.a.mariner_progress
				hidden_effect = {
					mariner_progress_point_gain_effect = yes
				}
			}
		}
	}

	# Religious
	option = {
		name = sailing.2009.b
		if = {
			limit = {
				has_trait = cynical
			}		
			random = {
				chance = 33
				remove_trait = cynical
				add_trait_force_tooltip = zealous
			}			
		}
		add_piety = 50
	}
	
	# Place in the world
	option = {
		name = sailing.2009.c
		if = {
			limit = {
				has_trait = ambitious
			}		
			random = {
				chance = 33
				remove_trait = ambitious
				add_trait_force_tooltip = content
			}			
		}
		add_stress = -40
	}
	
	after = {
		if = {
			limit = { has_character_flag = sailing_exploration }
			trigger_event = {
				on_action = sailing_exploration_events
				days = { 20 40 }
			}
		}
		else = {
			trigger_event = sailing.9001
		}
	}
}

# Sailing Accident by Brice Underhill
sailing.2010 = {
	type = character_event
	title = sailing.2010.t
	desc = {
		desc = sailing.2010.desc
	}
	theme = at_sea
	left_portrait = {
		character = root
		animation = worry
	}
	right_portrait = {
		character = scope:sailor
		animation = beg
	}
	immediate = {
	#Create a sailor
	create_character = {
		location = root.capital_province
		template = pool_repopulate_prowess
		save_scope_as = sailor
		trait = wounded_2
		}
	}
	option = { #Helping the sailor
		name = sailing.2010.a
		stress_impact = {
			craven = medium_stress_impact_gain
			brave = minor_stress_impact_loss
			compassionate = medium_stress_impact_loss
			arrogant = minor_stress_impact_gain
		}
		reverse_add_opinion = {
			target = scope:first_mate
			modifier = respect_opinion
			opinion = low_positive_opinion
		}
		duel = {
			skill = learning
			value = average_skill_rating
			60 = {
				desc = sailing.2010.a.success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 2
				}
				modifier = {
					add = {
						value = scope:first_mate.learning
						subtract = average_skill_rating
						multiply = 2
						min = 10 #Guaranteed help
					}
				}
				send_interface_toast = {
					title = sailing.2010.a.success
					left_icon = root
					add_prestige = medium_prestige_gain
				}		
			}
			40 = {
				desc = sailing.2010.a.failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -2
				}
				modifier = {
					add = {
						value = scope:first_mate.learning
						subtract = average_skill_rating
						multiply = -2
						max = 0 #They shouldn't make this worse
					}
				}
				send_interface_toast = {
					title = sailing.2010.a.failure
					left_icon = root
					add_stress = minor_stress_impact_gain
					stress_impact = {
						compassionate = medium_stress_impact_gain
					}
				}
			}
		}
	}
	
	option = { #Leave him
		name = sailing.2010.b
		stress_impact = {
			base = medium_stress_impact_gain
			compassionate = major_stress_impact_gain
			forgiving = medium_stress_impact_gain
			just = minor_stress_impact_gain
			sadistic = major_stress_impact_loss
			callous = medium_stress_impact_loss
			vengeful = minor_stress_impact_loss
			arbitrary = minor_stress_impact_loss
		}
		add_dread = minor_dread_gain
		reverse_add_opinion = {
						target = scope:first_mate
						modifier = cruelty_opinion
						opinion = low_negative_opinion
					}
	}
	
	option = { #I can't do this
		name = sailing.2010.c
		stress_impact = {
			craven = medium_stress_impact_loss
			brave = major_stress_impact_gain
			compassionate = major_stress_impact_gain
			callous = medium_stress_impact_loss
		}
		add_dread = minor_dread_loss
		add_prestige = medium_prestige_loss
		reverse_add_opinion = {
						target = scope:first_mate
						modifier = weak_opinion
						opinion = low_negative_opinion
					}
	}
	
	after = {
		if = {
			limit = { has_character_flag = sailing_exploration }
			trigger_event = {
				on_action = sailing_exploration_events
				days = { 20 40 }
			}
		}
		else = {
			trigger_event = sailing.9001
		}
	}
}

############################
## Meneltarma Chain
## 3000-3999
## by Jamie-san
############################

## Tests
# Learning - Direction to head? - knowledge of history and navigation by the stars
# Prowess - Sea Monster
# Stewardship / Martial - Supplies running low - you've been sailing in circles, and now your supplies are starting to run low. Do you turn back, keep going, try to implement rationing, etc
# Diplomacy - Madness of the Wave - Crew gets visions of Numenor being consumed, lose their nerves, potentially go bad - chance to comfort/rally them to go onward, or have to turn back because your crew broke and mutiny
# Mariner - Fury of the Deep - Osse raises a terrible storm, try to fight it or go back (WILL damage your ship regardless of outcome)

# The First Test - Learning - Charting a Course
sailing.3100 = {
	type = character_event
	title = sailing.3100.t
	desc = sailing.3100.desc
	theme = at_sea
	override_background = {
		event_background = fp1_steward_study
	}
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:first_mate
		animation = personality_compassionate
	}	

	option = { # Which way is Numenor? Try to figure it out!
		name = sailing.3100.a
		duel = {
			skill = learning
			value = meneltarma_skill_challenge
			50 = {	
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				modifier = {
					add = 10
					has_trait = scholar
				}
				modifier = {
					add = 30
					has_character_flag = learned_about_numenor #Character learned about Numenor in exploring histories
				}
				modifier = {
					add = 10				
					OR = {
						culture = { has_cultural_pillar = heritage_dunedain }
						#culture = { has_cultural_pillar = amanyar? } # Matt note: Elvish culture groups disappeared in the code.
						#culture = { has_cultural_pillar = umanyar? }
						culture = { has_cultural_pillar = heritage_southern_adunaic }
						culture = { has_cultural_pillar = heritage_northern_adunaic }

						AND = {
							culture = { has_cultural_pillar = heritage_bellakari }
							NOT = { culture = culture:bellanarud }
						}
					}
				}
				desc = sailing.3100.a.success
				custom_tooltip = sailing.3100.a.success.tt
				trigger_event = {
					id = sailing.3101
					days = 1
				}
			}
			50 = {			
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				modifier = {
					add = 10
					has_trait = impatient
				}
				desc = sailing.3100.a.failure
				custom_tooltip = sailing.3100.a.failure.tt 
				trigger_event = {
					id = sailing.3102
					days = 1
				}
			}
		}
		custom_tooltip = sailing.3100.a.positive.odds
		custom_tooltip = sailing.3100.a.negative.odds
	}
	
	option = { # Turn back - perhaps this wasn't such a good idea!
		name = sailing.3100.b
		custom_tooltip = sailing.3100.b.tt 
		add_character_flag = {
			flag = failed_to_navigate_towards_numenor
			years = 3
		}
		trigger_event = sailing.1991
	}
}

sailing.3101 = {
	type = character_event
	title = sailing.3101.t
	desc = sailing.3101.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = scope:first_mate
		animation = happiness
	}

	option = { # Success
		name = sailing.3101.a
		trigger_event = {
			id = sailing.3200
			days = 1
		}
	}
}	

sailing.3102 = {
	type = character_event
	title = sailing.3102.t
	desc = sailing.3102.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = disapproval
	}
	right_portrait = {
		character = scope:first_mate
		animation = sadness
	}

	option = { # Failure
		name = sailing.3102.a
		add_character_flag = {
			flag = failed_to_navigate_towards_numenor
			years = 3
		}
		trigger_event = sailing.1991
	}
}	

# The Second Test - Prowess - It Came From the Deep
sailing.3200 = { 
	type = character_event
	title = sailing.3200.t
	desc = sailing.3200.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = anger
	}
	right_portrait = {
		character = scope:first_mate
		animation = fear
	}	

	option = { # I'll take this thing down!
		name = sailing.3200.a
		duel = {
			skill = prowess
			value = meneltarma_skill_challenge
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				modifier = {
					add = 10
					has_trait = athletic
				}
				modifier = {
					add = 10
					has_trait = education_martial_3
				}
				modifier = {
					add = 20
					has_trait = education_martial_4
				}
				modifier = {
					add = 10
					has_trait = strategist
				}
				modifier = {
					add = 20
					has_character_modifier = large_boat_modifier
				}
				desc = sailing.3200.a.success
				custom_tooltip = sailing.3200.a.success.tt
				trigger_event = {
					id = sailing.3201
					days = 1
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				modifier = {
					add = 20
					has_trait = craven
				}
				modifier = {
					add = 10
					has_trait = disfigured
				}
				modifier = {
					add = 20
					has_character_modifier = small_boat_modifier
				}
				modifier = {
					add = 40
					has_character_modifier = small_damaged_boat_modifier
				}
				modifier = {
					add = 30
					has_character_modifier = medium_damaged_boat_modifier
				}
				modifier = {
					add = 20
					has_character_modifier = large_damaged_boat_modifier
				}
				desc = sailing.3200.a.failure
				custom_tooltip = sailing.3200.a.failure.tt 
				trigger_event = {
					id = sailing.3202
					days = 1
				}
			}
		}
		custom_tooltip = sailing.3200.a.positive.odds
		custom_tooltip = sailing.3200.a.negative.odds
	}
	
	option = { # Try to flee!
		name = sailing.3200.b
		random_list = {
			80 = { #Ship is damaged
				modifier = {
					add = -20
					has_trait = mariner_1
				}		
				modifier = {
					add = -40
					has_trait = mariner_2
				}	
				modifier = {
					add = -60
					has_trait = mariner_3
				}
				custom_tooltip = sailing.3200.b.failure.tt
				damage_ship = yes
				increase_wounds_no_death_effect = { REASON = duel }
			}
			20 = { #Ship is unscathed
				modifier = {
					add = 20
					has_trait = mariner_1
				}		
				modifier = {
					add = 40
					has_trait = mariner_2
				}	
				modifier = {
					add = 60
					has_trait = mariner_3
				}
				custom_tooltip = sailing.3200.b.success.tt 
			}
		}
		trigger_event = {
			id = sailing.9001
			days = 1
		}
	}
}

sailing.3201 = {
	type = character_event
	title = sailing.3201.t
	desc = sailing.3201.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = happiness
	}

	option = { # Success
		name = sailing.3201.a
		add_prestige = 250
		give_nickname = nick_serpent_slayer
		trigger_event = {
			id = sailing.3300
			days = 1
		}
	}
	
	option = { # Success
		name = sailing.3201.b
		add_prestige = 250
		trigger_event = {
			id = sailing.3300
			days = 1
		}
	}
}	

sailing.3202 = {
	type = character_event
	title = sailing.3202.t
	desc = sailing.3202.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = fear
	}

	option = { # Failure - ship is undamaged
		name = sailing.3202.a
		trigger = { owns_an_undamaged_boat = yes }
		random_list = {
			20 = { #Ship is damaged - escape
				modifier = {
					add = 20
					has_trait = mariner_1
				}		
				modifier = {
					add = 40
					has_trait = mariner_2
				}	
				modifier = {
					add = 60
					has_trait = mariner_3
				}
				damage_ship = yes
				increase_wounds_no_death_effect = { REASON = duel }
				custom_tooltip = sailing.3202.a.success.tt
				trigger_event = {
					id = sailing.9001
					days = 1
				}
			}
			80 = { #Death
				modifier = {
					add = -20
					has_trait = mariner_1
				}		
				modifier = {
					add = -40
					has_trait = mariner_2
				}	
				modifier = {
					add = -60
					has_trait = mariner_3
				}
				custom_tooltip = sailing.3202.a.failure.tt
				hidden_effect = { death = { death_reason = death_perished_at_sea } }
			}
		}
	}
	
	option = { # Failure - ship is damaged
		name = sailing.3202.a
		trigger = { owns_a_damaged_boat = yes }
		random_list = {
			0 = { #Escape
				modifier = {
					add = 10
					has_trait = mariner_1
				}		
				modifier = {
					add = 20
					has_trait = mariner_2
				}	
				modifier = {
					add = 30
					has_trait = mariner_3
				}
				damage_ship = yes
				increase_wounds_no_death_effect = { REASON = duel }
				custom_tooltip = sailing.3202.a.success.tt
				trigger_event = {
					id = sailing.9001
					days = 1
				}
			}
			100 = { #Death
				modifier = {
					add = -10
					has_trait = mariner_1
				}		
				modifier = {
					add = -20
					has_trait = mariner_2
				}	
				modifier = {
					add = -30
					has_trait = mariner_3
				}
				custom_tooltip = sailing.3202.a.failure.tt
				hidden_effect = { death = { death_reason = death_perished_at_sea } }
			}
		}
	}
}

# The Third Test - Stewardship / Martial - Supplies running low - you've been sailing in circles, and now your supplies are starting to run low. Do you turn back, keep going, try to implement rationing, etc
sailing.3300 = {
	type = character_event
	title = sailing.3300.t
	desc = sailing.3300.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = stress
	}
	right_portrait = {
		character = scope:first_mate
		animation = sadness
	}	

	option = { # Implement rationing
		name = sailing.3300.a
		duel = {
			skill = stewardship
			value = meneltarma_skill_challenge
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				modifier = {
					add = 10
					has_trait = temperate
				}
				modifier = {
					add = 10
					has_trait = shrewd
				}	
				modifier = {
					add = 10
					has_trait = administrator
				}	
				modifier = {
					add = 10
					has_trait = inappetetic
				}
				modifier = {
					add = 10
					has_trait = just
				}				
				desc = sailing.3300.a.success
				custom_tooltip = sailing.3300.a.success.tt 
				trigger_event = {
					id = sailing.3301
					days = 1
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				modifier = {
					add = 20
					has_trait = gluttonous
				}
				modifier = {
					add = 10
					has_trait = greedy
				}	
				modifier = {
					add = 10
					has_trait = reveler_1
				}
				modifier = {
					add = 15
					has_trait = reveler_2
				}
				modifier = {
					add = 20
					has_trait = reveler_3
				}				
				modifier = {
					add = 10
					has_trait = comfort_eater
				}
				desc = sailing.3300.a.failure
				custom_tooltip = sailing.3300.a.failure.tt 
				trigger_event = {
					id = sailing.3302
					days = 1
				}
			}
		}
		custom_tooltip = sailing.3300.a.positive.odds
		custom_tooltip = sailing.3300.a.negative.odds
	}
	
	option = { # Bring the men in line - morale broken
		name = sailing.3300.b
		duel = {
			skill = martial
			value = meneltarma_skill_challenge
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				modifier = {
					add = 10
					dread > 30
				}
				modifier = {
					add = 10
					has_trait = mariner_2
				}
				modifier = {
					add = 20
					has_trait = mariner_3
				}
				modifier = {
					add = 20
					has_trait = logistician
				}
				modifier = {
					add = 10
					has_trait = diplomat
				}
				desc = sailing.3300.b.success
				custom_tooltip = sailing.3300.b.success.tt 
				trigger_event = {
					id = sailing.3303
					days = 1
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				modifier = {
					add = 10
					dread < 10
				}
				modifier = {
					add = 10
					has_trait = shy
				}
				modifier = {
					add = 10
					has_trait = deceitful
				}
				modifier = {
					add = 10
					has_trait = arbitrary
				}
				modifier = {
					add = 10
					has_trait = gluttonous
				}
				desc = sailing.3300.b.failure
				custom_tooltip = sailing.3300.b.failure.tt 
				trigger_event = {
					id = sailing.3304
					days = 1
				}
			}
		}
		custom_tooltip = sailing.3300.b.positive.odds
		custom_tooltip = sailing.3300.b.negative.odds
	}
	
	option = { # Turn back - we have just enough to get home.
		name = sailing.3300.c
		custom_tooltip = sailing.3300.c.tt
		trigger_event = {
			id = sailing.9001
			days = 1
		}
	}
}

sailing.3301 = {
	type = character_event
	title = sailing.3301.t
	desc = sailing.3301.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = personality_content
	}
	right_portrait = {
		character = scope:first_mate
		animation = happiness
	}

	option = { # Success
		name = sailing.3301.a
		add_stewardship_lifestyle_perk_points = 1
		trigger_event = {
			id = sailing.3400
			days = 1
		}
	}
}	

sailing.3302 = {
	type = character_event
	title = sailing.3302.t
	desc = sailing.3302.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = poison
	}

	option = { # Failure - whole crew starves
		name = sailing.3302.a
		death = { death_reason = death_starved }
		every_in_list = {
			variable = potential_sailing_participants
			limit = { is_ai = yes }
			death = { death_reason = death_starved }
		}
	}
}

sailing.3303 = {
	type = character_event
	title = sailing.3303.t
	desc = sailing.3303.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = war_defender
	}

	option = { # Success
		name = sailing.3303.a
		add_martial_lifestyle_perk_points = 1
		trigger_event = {
			id = sailing.3400
			days = 1
		}
	}
}	

sailing.3304 = {
	type = character_event
	title = sailing.3304.t
	desc = sailing.3304.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = angry
	}
	right_portrait = {
		character = scope:mutiny_leader
		animation = callous
	}

	immediate = {
		scope:activity = {
			random_in_list = {
				variable = potential_sailing_participants
				limit = {
					is_alive = yes
					is_ai = yes
					has_relation_rival = root
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
					opinion = {
						target = root
						value < -30
					}
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
					opinion = {
						target = root
						value < 0
					}
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
				}
				save_scope_as = mutiny_leader
			}
		}
	}

	option = { # Failure - crew mutinies - walk the plank
		name = sailing.3304.a
		death = { death_reason = death_walked_the_plank }
	}
}

# The Fourth Test - Diplomacy - Madness of the Wave - Crew gets visions of Numenor being consumed, lose their nerves, potentially go bad - chance to comfort/rally them to go onward, or have to turn back because your crew broke and mutiny
sailing.3400 = {
	type = character_event
	title = sailing.3400.t
	desc = sailing.3400.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = disbelief
	}
	right_portrait = {
		character = scope:first_mate
		animation = paranoia
	}	

	option = { # I'll take this thing down!
		name = sailing.3400.a
		duel = {
			skill = diplomacy
			value = meneltarma_skill_challenge
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				modifier = {
					add = 10
					has_trait = cynical
				}
				modifier = {
					add = 10
					has_trait = diplomat
				}
				modifier = {
					add = 10
					has_trait = honest
				}
				modifier = {
					add = 10
					has_trait = gregarious
				}
				modifier = {
					add = 10
					has_trait = compassionate
				}
				desc = sailing.3400.a.success
				custom_tooltip = sailing.3400.a.success.tt
				trigger_event = {
					id = sailing.3401
					days = 1
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				modifier = {
					add = 15
					has_trait = paranoid
				}
				modifier = {
					add = 15
					has_trait = craven
				}
				modifier = {
					add = 10
					has_trait = fickle
				}
				modifier = {
					add = 10
					has_trait = callous
				}
				modifier = {
					add = 10
					has_trait = lunatic_1
				}
				desc = sailing.3400.a.failure
				custom_tooltip = sailing.3400.a.failure.tt
				trigger_event = {
					id = sailing.3402
					days = 1
				}
			}
		}
		custom_tooltip = sailing.3400.a.positive.odds
		custom_tooltip = sailing.3400.a.negative.odds
	}
	
	option = { # I am the state!
		name = sailing.3400.b
		custom_tooltip = sailing.3400.b.desc
		trigger = { dread >= 90 }
		random_list = {
			90 = {
				custom_tooltip = sailing.3400.b.success.tt
				trigger_event = {
					id = sailing.3401
					days = 1
				}
			}
			10 = {
				custom_tooltip = sailing.3400.b.failure.tt
				trigger_event = {
					id = sailing.3402
					days = 1
				}
			}
		}
	}
	
	option = { # Turn back - perhaps this wasn't such a good idea!
		name = sailing.3400.c
		custom_tooltip = sailing.3400.c.tt
		trigger_event = {
			id = sailing.9001
			days = 1
		}
	}
}

sailing.3401 = {
	type = character_event
	title = sailing.3401.t
	desc = sailing.3401.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = personality_forgiving
	}
	right_portrait = {
		character = scope:first_mate
		animation = happiness
	}

	option = { # Success
		name = sailing.3401.a
		add_diplomacy_lifestyle_perk_points = 1
		trigger_event = {
			id = sailing.3500
			days = 1
		}
	}
}	

sailing.3402 = {
	type = character_event
	title = sailing.3402.t
	desc = sailing.3402.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = paranoia
	}

	option = { # Failure
		name = sailing.3402.a
		random_list = {
			50 = { add_trait = lunatic_1 }
			50 = { add_trait = depressed_1 }
		}
		trigger_event = {
			id = sailing.9001
			days = 1
		}
	}
}

# The Fifth Test - Mariner - Fury of the Deep - Osse raises a terrible storm, try to fight it or go back (WILL damage your ship regardless of outcome)
sailing.3500 = {
	type = character_event
	title = sailing.3500.t
	desc = sailing.3500.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = disbelief
	}	

	option = { # Here we go!
		name = sailing.3500.a
		random_list = {
			0 = {	
				modifier = {
					add = 10
					has_character_modifier = small_boat_modifier
				}
				modifier = {
					add = 20
					has_character_modifier = medium_boat_modifier
				}
				modifier = {
					add = 30
					has_character_modifier = large_boat_modifier
				}
				modifier = {
					add = 10
					has_character_modifier = medium_damaged_boat_modifier
				}
				modifier = {
					add = 20
					has_character_modifier = large_damaged_boat_modifier
				}
				modifier = {
					add = 10
					has_trait = mariner_1
				}
				modifier = {
					add = 30
					has_trait = mariner_2
				}
				modifier = {
					add = 50
					has_trait = mariner_3
				}
				desc = sailing.3500.a.success
				custom_tooltip = sailing.3500.a.success.tt
				trigger_event = {
					id = sailing.3501
					days = 1
				}
			}
			100 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				modifier = {
					add = -10
					has_character_modifier = small_boat_modifier
				}
				modifier = {
					add = -20
					has_character_modifier = medium_boat_modifier
				}
				modifier = {
					add = -30
					has_character_modifier = large_boat_modifier
				}
				modifier = {
					add = -10
					has_character_modifier = medium_damaged_boat_modifier
				}
				modifier = {
					add = -20
					has_character_modifier = large_damaged_boat_modifier
				}
				modifier = {
					add = -10
					has_trait = mariner_1
				}
				modifier = {
					add = -30
					has_trait = mariner_2
				}
				modifier = {
					add = -50
					has_trait = mariner_3
				}
				desc = sailing.3500.a.failure
				custom_tooltip = sailing.3500.a.failure.tt
				trigger_event = {
					id = sailing.3502
					days = 1
				}
			}
		}
		custom_tooltip = sailing.3500.a.positive.odds
		custom_tooltip = sailing.3500.a.negative.odds
	}
	
	option = { # Turn back - we'll never get through those waves!
		name = sailing.3500.b
		custom_tooltip = sailing.3500.b.tt
		trigger_event = {
			id = sailing.9001
			days = 1
		}
	}
}

sailing.3501 = {
	type = character_event
	title = sailing.3501.t
	desc = sailing.3501.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = personality_content
	}

	option = { # Success
		name = sailing.3501.a
		change_trait_rank = {
			trait = lifestyle_mariner
			rank = 1
			max = 3
		}
		damage_ship = yes 
		trigger_event = {
			id = sailing.3900
			days = 1
		}
	}
}	

sailing.3502 = {
	type = character_event
	title = sailing.3502.t
	desc = sailing.3502.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = fear
	}

	option = { # Failure
		name = sailing.3502.a
		death = { death_reason = death_drowned }
		every_in_list = {
			variable = potential_sailing_participants
			limit = { is_ai = yes }
			death = { death_reason = death_drowned }
		}		
	}
}

# The Menaltarma Found
sailing.3900 = {
	type = character_event
	title = sailing.3900.t
	desc = sailing.3900.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = happiness
	}

	option = { # Watch from a distance
		name = sailing.3900.a
		custom_tooltip = sailing.3900.a.tt
		trigger_event = sailing.3901
	}

	option = { # Set foot on the Meneltarma
		name = sailing.3900.b
		random_list = {
			70 = { 
				custom_tooltip = sailing.3900.b.success 
				trigger_event = sailing.3902
				modifier = {
					add = 10
					religion = { is_in_family = rf_eruhini }
					piety_level > 3
				}
				modifier = {
					add = 10
					religion = { is_in_family = rf_eruhini }
					piety_level > 4
				}
				modifier = {
					add = 10
					religion = { is_in_family = rf_eruhini }
					piety_level > 5
				}
				modifier = {
					add = -10
					faith = { has_doctrine = doctrine_echoes_of_the_ainur }
				}
				modifier = {
					add = -20
					faith = { has_doctrine = doctrine_a_people_apart }
				}
				modifier = {
					add = -30
					faith = { has_doctrine = doctrine_dominion_of_the_dark }
				}
				modifier = {
					add = -69
					religion = { is_in_family = rf_forcesofevil }
				}
			}
			30 = { 
				custom_tooltip = sailing.3900.b.failure
				trigger_event = sailing.3903
				modifier = {
					add = -10
					religion = { is_in_family = rf_eruhini }
					piety_level > 3
				}
				modifier = {
					add = -10
					religion = { is_in_family = rf_eruhini }
					piety_level > 4
				}
				modifier = {
					add = -10
					religion = { is_in_family = rf_eruhini }
					piety_level > 5
				}
				modifier = {
					add = 10
					faith = { has_doctrine = doctrine_echoes_of_the_ainur }
				}
				modifier = {
					add = 20
					faith = { has_doctrine = doctrine_a_people_apart }
				}
				modifier = {
					add = 30
					faith = { has_doctrine = doctrine_dominion_of_the_dark }
				}
				modifier = {
					add = 69
					religion = { is_in_family = rf_forcesofevil }
				}
			}
		}
	}
}

# Admiring The Meneltarma From Afar
sailing.3901 = {
	type = character_event
	title = sailing.3901.t
	desc = sailing.3901.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = happiness
	}

	option = { # Desciption of Meneltarma
		name = sailing.3901.a
		#add_nickname
		add_character_modifier = reached_meneltarma
		add_prestige = 1000
		if = {
			limit = {
				faith_is_good = yes
			}
			add_piety = 750
		}
		stress_impact = {
			humble = medium_stress_impact_loss
			arrogant = medium_stress_impact_gain
			content = medium_stress_impact_loss
			ambitious = medium_stress_impact_gain
		}
	}

	after = {
		trigger_event = {
			id = sailing.9001
			days = 1
		}
	}

}

# Setting Foot on the Meneltarma - Success #FIND AN ARTEFACT POST DLC
sailing.3902 = {
	type = character_event
	title = sailing.3902.t
	desc = sailing.3902.desc
	theme = docks
	override_background = {
		event_background = wilderness_mountains
	}
	left_portrait = {
		character = root
		animation = happiness
	}
	
	option = { # Desciption of Meneltarma
		name = sailing.3902.a
		#add_nickname
		#find_artefact
		add_character_modifier = reached_meneltarma
		add_prestige = 1500
		if = {
			limit = { prestige_level = 0 }
			add_prestige_level = 5
		}
		else_if = {
			limit = { prestige_level = 1 }
			add_prestige_level = 4
		}
		else_if = {
			limit = { prestige_level = 2 }
			add_prestige_level = 3
		}
		else_if = {
			limit = { prestige_level = 3 }
			add_prestige_level = 2
		}
		else_if = {
			limit = { prestige_level = 4 }
			add_prestige_level = 1
		}
		root.dynasty = {
			add_dynasty_prestige = 1000
			add_dynasty_prestige_level = 1
		}
		if = {
			limit = {
				faith_is_good = yes
			}
			add_piety = 750
		}
		stress_impact = {
			humble = medium_stress_impact_gain
			arrogant = medium_stress_impact_loss
			content = medium_stress_impact_gain
			ambitious = medium_stress_impact_loss
		}
	}

	after = {
		trigger_event = {
			id = sailing.9001
			days = 1
		}
	}

}

# Setting Foot on the Meneltarma - Failure
sailing.3903 = {
	type = character_event
	title = sailing.3903.t
	desc = sailing.3903.desc
	theme = docks
	override_background = {
		event_background = wilderness_mountains
	}
	left_portrait = {
		character = root
		animation = fear
	}
	
	option = { 
		name = sailing.3903.a
		death = { death_reason = death_mysterious }
	}

}

############################
## Exploration
## 4000-4999
## by Jamie-san
############################

## Eryn Vorn
#Eryn Vorn - encounter with a Dru
sailing.4000 = {
	type = character_event
	title = sailing.4000.t
	desc = sailing.4000.desc
	theme = hunting
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = scope:dru
		animation = anger
	}
	override_background = {
		event_background = wilderness_forest
	}

	trigger = {
		NOT = { has_character_flag = has_explored_eryn_vorn }
		is_ai = no
	}

	immediate = {
		create_character = {
			template = hunter_template
			dynasty = none
			gender_female_chance = 0
			faith = faith:faith_druedain
			culture = culture:druedain
			save_scope_as = dru
		}
	}

	# Fight the man
	option = {
		name = sailing.4000.a
		duel = {
			skill = prowess
			target = scope:dru
			15 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					min = -14
				}
				desc = sailing.4000.a.success.tt
				add_prestige = 100
				add_gold = 25
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.4000.toast.a.success
					custom_tooltip = sailing.4000.a.success.tt
				}
				random_list = {
					67 = {
						custom_tooltip = sailing.4000.a.solo
						trigger_event = sailing.4002
					}
					33 = {
						custom_tooltip = sailing.4000.a.group
						trigger_event = sailing.4001
					}
				}
			}
			5 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -4
				}
				desc = sailing.4000.a.failure.tt
				add_prestige = -150
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.4000.toast.a.failure
					custom_tooltip = sailing.4000.a.failure.tt
				}
				random = { 
					chance = 50 
					increase_wounds_effect = { REASON = fight } 
					hidden_effect = {
						random_list = { 
							50 = {
								add_character_flag = {
									flag = beffraen_poisoned
									weeks = 4
								}
								trigger_event = sailing.4004
							}
							50 = {
								trigger_event = sailing.4005
							}
						}
					}
				}
			}
		}
				
	}

	
	# Explain the situation
	option = {
		name = sailing.4000.b
		duel = {
			skill = diplomacy
			value = 10
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.4000.b.success
				add_prestige = minor_prestige_gain
				add_diplomacy_lifestyle_xp = medium_lifestyle_xp
				trigger_event = sailing.4003
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.4000.toast.b.failure
					custom_tooltip = sailing.4000.b.failure.tt
				}
				desc = sailing.4000.b.failure
				trigger_event = sailing.4001
				add_prestige = miniscule_prestige_loss
				custom_tooltip = sailing.4000.b.failure.tt
			}
		}
	}

	# Pay the man for his aid
	option = {
		name = sailing.4000.c		
		random_list = {
			90 = {
				custom_tooltip = sailing.4000.c.success
				remove_short_term_gold = minor_gold_value
				trigger_event = sailing.4003
			}
			10 = {
				custom_tooltip = sailing.4000.c.failure
				trigger_event = sailing.4001
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.4000.toast.b.failure
					custom_tooltip = sailing.4000.c.failure
				}
			}
		}
	}	
	
}

#Eryn Vorn - Dru has backup
sailing.4001 = {
	type = character_event
	title = sailing.4001.t
	desc = sailing.4001.desc
	theme = hunting
	left_portrait = {
		character = root
		animation = fear
	}
	override_background = {
		event_background = wilderness_forest
	}

	# Stay and fight
	option = {
		name = sailing.4001.a
		custom_tooltip = sailing.4001.a.tt
		duel = {
			skill = prowess
			value = 16
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 4
					min = -49
				}
				desc = sailing.4001.a.success
				add_prestige = 200
				add_gold = 100
				trigger_event = sailing.4002
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -4
					min = -49
				}
				desc = sailing.4001.a.failure
				add_prestige = -150
				increase_wounds_effect = { REASON = fight }
				hidden_effect = {
					random_list = { 
						50 = {
							add_character_flag = {
								flag = beffraen_poisoned
								weeks = 4
							}
							trigger_event = sailing.4004
						}
						50 = {
							trigger_event = sailing.4005
						}
					}
				}
			}
		}	
	}

	# Surrender
	option = {
		name = sailing.4001.b	
		custom_tooltip = sailing.4001.b.tt
		add_prestige = -250
		remove_long_term_gold = medium_gold_value
		trigger_event = sailing.4005
	}
	
	# Flee
	option = {
		name = sailing.4001.c
		custom_tooltip = sailing.4001.c.tt
		add_prestige = -200
		random_list = {
			75 = {
				custom_tooltip = sailing.4001.c.failure
				increase_wounds_effect = { REASON = fight }
				hidden_effect = {
					random_list = { 
						50 = {
							add_character_flag = {
								flag = beffraen_poisoned
								weeks = 4
							}
							trigger_event = sailing.4004
						}
						50 = {
							trigger_event = sailing.4005
						}
					}
				}
			}
			25 = {
				custom_tooltip = sailing.4001.c.success
				trigger_event = sailing.4005
			}
		}		
	}	
}

#Eryn Vorn - Battle Aftermath
sailing.4002 = {
	type = character_event
	title = sailing.4002.t
	desc = sailing.4002.desc
	theme = hunting
	left_portrait = {
		character = root
		animation = personality_vengeful
	}
	override_background = {
		event_background = wilderness_forest
	}

	option = { #Burial
		name = sailing.4002.a
		add_piety = 50
		trigger_event = sailing.4005
	}
	
	option = { #Time to go
		name = sailing.4002.b
		add_piety = -50
		add_dread = 10
		trigger_event = sailing.4005
	}	

}

#Eryn Vorn - Learning from the Beffraen
sailing.4003 = {
	type = character_event
	title = sailing.4003.t
	desc = sailing.4003.desc
	theme = hunting
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:dru
		animation = personality_compassionate 
	}
	override_background = {
		event_background = wilderness_forest
	}

	# Histories
	option = {
		name = sailing.4003.a
		add_learning_skill = 1
	}
	
	# Poisons
	option = {
		name = sailing.4003.b
		add_character_modifier = beffraen_poisons
	}
	
	# Fishing
	option = {
		name = sailing.4003.c
		add_character_modifier = budding_fisherman
	}

	after = {
		trigger_event = sailing.4005
	}
}

#Eryn Vorn - Back to the ship - poisonous wound
sailing.4004 = {
	type = character_event
	title = sailing.4004.t
	desc = sailing.4004.desc
	theme = at_sea
	
	left_portrait = {
		character = root
		animation = pain
	}

	# Attempt treatment
	option = {
		name = sailing.4004.a
		add_character_flag = has_explored_eryn_vorn
		duel = {
			skill = learning
			value = 8
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 4
					min = -49
				}
				desc = sailing.4004.a.success
				add_learning_lifestyle_xp = medium_lifestyle_xp
				add_character_modifier = {
					modifier = poisoned_by_beffraen_treated
					years = 1
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -4
					min = -49
				}
				desc = sailing.4004.a.failure
				add_stress = 25
				add_character_modifier = {
					modifier = poisoned_by_beffraen
					years = 3 
				}
			}
		}
	}

	# I can handle it...
	option = {
		name = sailing.4004.b
		add_character_flag = has_explored_eryn_vorn
		add_character_modifier = {
			modifier = poisoned_by_beffraen
			years = 2
		}
	}
		
	after = {
		trigger_event = {
			id = sailing.9001
			days = 60
		}
	}
}

#Eryn Vorn - Back to the ship - no poisonous wound
sailing.4005 = {
	type = character_event
	title = sailing.4005.t
	desc = sailing.4005.desc
	theme = at_sea
	
	left_portrait = {
		character = root
		animation = personality_bold
	}

	option = {
		name = sailing.4005.a
		add_character_flag = has_explored_eryn_vorn
	}

	after = {
		trigger_event = {
			id = sailing.9001
			days = 60
		}
	}	
}

## The Icebay of Forochel
sailing.4010 = { 
	type = character_event
	title = sailing.4010.t
	desc = sailing.4010.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = personality_rational
	}
	override_background = {
		event_background = wilderness_mountains
	}

	trigger = {
		NOT = { has_character_flag = has_explored_forochel }
		is_ai = no
	}

	# Trade weaponry for warmer clothes
	option = {
		name = sailing.4010.a
		custom_tooltip = sailing.4010.a.tt
		add_character_modifier = {
			modifier = weapons_for_furs
			years = 2
		}
		random_list = {
			80 = {
				custom_tooltip = sailing.4010.home.safe
				trigger_event = {
					id = sailing.4012
					days = { 30 60 }
				}
			}
			20 = {
				custom_tooltip = sailing.4010.freezing
				trigger_event = {
					id = sailing.4011
					days = { 30 60 }
				}
			}
		}
	}

	
	# One off trade
	option = {
		name = sailing.4010.b
		custom_tooltip = sailing.4010.b.tt
		add_character_modifier = {
			modifier = weapons_for_furs
			years = 2
		}
		duel = {
			skill = stewardship
			value = 10
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.4010.b.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.4000.toast.b.failure
					add_gold = medium_gold_value
					add_prestige = miniscule_prestige_gain
					add_stewardship_lifestyle_xp = medium_lifestyle_xp
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.4010.b.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.4000.toast.b.failure
					add_prestige = minor_prestige_loss
				}
			}
		}
		random_list = {
			50 = {
				custom_tooltip = sailing.4010.home.safe
				trigger_event = {
					id = sailing.4012
					days = { 30 60 }
				}
			}
			50 = {
				custom_tooltip = sailing.4010.freezing
				trigger_event = {
					id = sailing.4011
					days = { 30 60 }
				}
			}
		}
	}

	# Trade agreement
	option = {
		name = sailing.4010.c		
		custom_tooltip = sailing.4010.c.tt
		add_character_modifier = {
			modifier = weapons_for_furs
			years = 2
		}
		duel = {
			skill = stewardship
			value = 18
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.4010.c.success	
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.4000.toast.b.failure
					add_character_modifier = trade_agreement_with_lossoth
					add_gold = medium_gold_value
					add_prestige = minor_prestige_gain
					add_stewardship_lifestyle_perk_points = 1
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.4010.c.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.4000.toast.b.failure
					add_prestige = medium_prestige_loss
				}
			}
		}
		random_list = {
			50 = {
				custom_tooltip = sailing.4010.home.safe
				trigger_event = {
					id = sailing.4012
					days = { 30 60 }
				}
			}
			50 = {
				custom_tooltip = sailing.4010.freezing
				trigger_event = {
					id = sailing.4011
					days = { 30 60 }
				}
			}
		}
	}	
	
}

# Freezing
sailing.4011 = { 
	type = character_event
	title = sailing.4011.t
	desc = sailing.4011.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = sick
	}

	# Frostbite
	option = {
		name = sailing.4011.a
		add_character_modifier = frostbite
		add_stress = 40
		trigger_event = {
			id = sailing.4012
			days = { 30 60 }
		}
	}
	
	# Fetch me an axe
	option = {
		name = sailing.4011.b
		trigger = {
			NOT = { has_trait = one_legged }
		}
		add_trait = one_legged
		add_stress = 100 
		trigger_event = {
			id = sailing.4012
			days = { 30 60 }
		}
	}
	
}

# The Stranger and the Storm
sailing.4012 = { 
	type = character_event
	title = sailing.4012.t
	desc = sailing.4012.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = personality_compassionate
	}
	
	# Cirdan gives you assistance
	option = {
		name = sailing.4012.a
		trigger = {
			faith_is_good = yes
		}
		add_piety = 75
	}
	
	# We make our own way
	option = {
		name = sailing.4012.b
		add_prestige = 50
	}
	
	after = {
		trigger_event = {
			id = sailing.9001
			days = 60
		}
		add_character_flag = has_explored_forochel
	}
}

# The Stranger and the Storm
sailing.4020 = { 
	type = character_event
	title = sailing.4020.t
	desc = sailing.4020.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = personality_compassionate
	}

	# Cirdan gives you assistance
	option = {
		name = sailing.4020.a
		trigger = {
			faith_is_good = yes
		}
		add_piety = 75
	}
	
}

# All lands explored - what still awaits?
sailing.4999 = { # Fallback event if all explorations have been completed
	type = character_event
	title = sailing.4999.t
	desc = sailing.4999.desc
	theme = at_sea
	left_portrait = {
		character = root
		animation = personality_bold
	}

	# What further adventures await us?
	option = {
		name = sailing.4999.a
		add_prestige = 100
		custom_tooltip = sailing.4999.a.tt
	}
	
	after = {
		trigger_event = {
			id = sailing.9001
			days = 60
		}
	}
}

############################
## Random events in port
## 9000-9999
## by Jamie-san
############################

#Back home - NEED TO ADD EXPERIENCE GAIN ETC - SHIP REPAIR - RETURN CHARTER
sailing.9001 = {
	type = character_event
	title = sailing.9001.t
	desc = sailing.9001.desc
	theme = docks
	left_portrait = root

	option = { # I'm back!
		name = sailing.9001.a
	}

	immediate = {
		hidden_effect = {
			mariner_progress_point_gain_effect = yes
			if = {
				limit = {
					has_character_flag = mariner_1
				}
				set_variable = {
					name = mariner_lifestyle_progress
					value = 0
				}
				add_trait = mariner_1
			}
			if = {
				limit = {
					has_character_flag = mariner_2
				}
				set_variable = {
					name = mariner_lifestyle_progress
					value = 0
				}
				change_trait_rank = {
					trait = lifestyle_mariner
					rank = 1
				}
			}
			if = {
				limit = {
					has_character_flag = mariner_3
				}
				remove_variable = mariner_lifestyle_progress
				change_trait_rank = {
					trait = lifestyle_mariner
					rank = 1
				}
			}
		}
	}

	after = {
		#End the activity
		if = {
			limit = {
				exists = scope:activity
			}
			scope:activity = {
				complete_activity = yes
			}
		}	
	}

}
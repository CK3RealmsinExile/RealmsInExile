# Events for handling the Sailing and Pirate activities

namespace = sailing

############################
## Random events in port
## 1000-1999
## by Jamie-san
############################
# 0800 - Arrive at Port 
# 1001 - Don't have a boat - charter or buy?
# 1002 - Chartering a boat
# 1003 - Buying a boat
# 1004 - Repairing a boat

# 1005 - Dockyard temptations
# 1007 - Whittle While You Wait
# 1008 - Bar brawl
# 1009 - Drinking competition
# 1010 - The Fortune Teller
# 1011 - Dockyard Delicacies
# 1012 - Seagull Surprise
# 1013 - An Experienced Sailor
# 1014 - Gathering Supplies

# 1014 - Rats on the ship!
# 1015 - Contraband discovered in port
# 1016 - Music
# 1017 - Haggling for supplies

# 1990 - Set out to sea

###############################

# Arrive at the Docks / Setup
sailing.0800 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.0800.t
	desc = sailing.0800.desc
	theme = sailing_activity
	override_background = { reference = docks }
	left_portrait = {
		character = root
		animation = happiness
	}
	immediate = {
		if = {
			limit = { scope:activity = { has_activity_option = { category = sailing_option_ship_choice option = sailing_charter } } }
			scope:host = {
				add_character_modifier = small_boat_modifier 
				add_character_flag = hired_a_boat
			}
		}
		if = {
			limit = { scope:activity = { has_activity_option = { category = sailing_option_ship_choice option = sailing_small_ship } } }
			scope:host = {
				add_character_modifier = medium_boat_modifier 
			}
		}
		if = {
			limit = { scope:activity = { has_activity_option = { category = sailing_option_ship_choice option = sailing_big_ship } } }
			scope:host = {
				add_character_modifier = large_boat_modifier 
			}
		}
		involved_activity.activity_location = {
			save_scope_as = location
		}
	}
	option = { # Let's get everything prepared!
		name = sailing.0800.a
		trigger_event = {
			on_action = sailing_dockyard_events
		}
	}
}

#Character does not own a boat - charter or buy?
sailing.1001 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.1001.t
	desc = sailing.1001.desc
	theme = sailing_activity
	orphan = yes # WIP
	left_portrait = {
		character = root
		animation = happiness
	}

	option = { # I'll charter a vessel
		name = sailing.1001.a
		trigger_event = sailing.1002
		ai_chance = {
			base = 70
		}
	}
	
	option = { # Actually, let me buy one...
		name = sailing.1001.b
		trigger = {
			short_term_gold > small_boat_cost
			is_landed = yes
		}
		show_as_unavailable = {
			short_term_gold <= small_boat_cost
		}
		if = {
			limit = {
				root.culture = {
					has_cultural_parameter = lotr_sailing_boats_cheaper
				}
			}
			custom_tooltip = sailing_boat_cost_reduction_desc
		}
		trigger_event = sailing.1003
		ai_chance = {
			base = 30
		}
	}
	
	# option = { # Wait, what? You mean I need a boat for this?
		# name = sailing.1001.c
		# # scope:activity = { complete_activity = yes } #TODO - no longer a thing, need to close differently in rework
		# remove_character_flag = planning_an_activity
		# remove_decision_cooldown = set_sail_decision
		# # return the money for the supplies
		# if = {
			# limit = { 
				# OR = {
					# has_character_modifier = small_boat_modifier
					# has_character_modifier = medium_boat_modifier
					# has_character_modifier = large_boat_modifier
				# }
			# }
			# add_short_term_gold = sailing_food_and_supplies_cost
		# }
		# ai_chance = {
			# base = 0
		# }
	# }
}

#Character HIRES a boat, which one to choose!?
sailing.1002 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.1002.t
	desc = sailing.1002.desc
	theme = sailing_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}

	# ispanets: To reduce complexity, I will remove the years
	# and just the boat will be hired for 1 sailing activity
	# returning it when coming back to port
	option = { # Small but nimble
		name = sailing.1002.a
		remove_short_term_gold = small_boat_hire_cost
		add_character_modifier = {
			modifier = small_boat_modifier
			# years = boat_hire_duration_years
		}
		add_character_flag = {
			flag = hired_a_boat
			# years = boat_hire_duration_years
		}
		stress_impact = {
			base = hunt_stress_loss_value #-30
			greedy = minor_stress_impact_loss
			brave = activity_stress_loss_impact
			craven = activity_stress_gain_impact
			ambitious = activity_stress_loss_impact
			athletic = activity_stress_loss_impact
			lifestyle_mariner = activity_stress_loss_impact
		}
	}
	
	option = { # A fine vessel
		name = sailing.1002.b
		trigger = {
			short_term_gold > medium_boat_hire_cost
		}
		show_as_unavailable = {
			short_term_gold <= medium_boat_hire_cost
		}		
		remove_short_term_gold = medium_boat_hire_cost
		add_character_modifier = {
			modifier = medium_boat_modifier
			# years = boat_hire_duration_years
		}
		add_character_flag = {
			flag = hired_a_boat
			# years = boat_hire_duration_years
		}
		stress_impact = {
				base = hunt_stress_loss_value #-30
				greedy = miniscule_stress_impact_loss
				brave = activity_stress_loss_impact
				craven = activity_stress_gain_impact
				ambitious = activity_stress_loss_impact
				athletic = activity_stress_loss_impact
				lifestyle_mariner = activity_stress_loss_impact
			}
	}
	
	option = { # A flagship fit for a king
		name = sailing.1002.c
		trigger = {
			short_term_gold > large_boat_hire_cost
		}
		show_as_unavailable = {
			short_term_gold <= large_boat_hire_cost
		}
		remove_short_term_gold = large_boat_hire_cost
		add_character_modifier = {
			modifier = large_boat_modifier
			# years = boat_hire_duration_years
		}
		add_character_flag = {
			flag = hired_a_boat
			# years = boat_hire_duration_years
		}
		stress_impact = {
				base = hunt_stress_loss_value #-30
				brave = activity_stress_loss_impact
				craven = activity_stress_gain_impact
				ambitious = activity_stress_loss_impact
				athletic = activity_stress_loss_impact
				lifestyle_mariner = activity_stress_loss_impact
			}
	}
	
	after = {
		trigger_event = {
			on_action = sailing_dockyard_events
		}
	}
}

#Character BUYS a boat, which one to choose!?
sailing.1003 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.1003.t
	desc = sailing.1003.desc
	theme = sailing_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}

	option = { # Small but nimble
		name = sailing.1003.a
		remove_short_term_gold = small_boat_cost
		add_character_modifier = small_boat_modifier
		stress_impact = {
				base = hunt_stress_loss_value #-30
				brave = activity_stress_loss_impact
				craven = activity_stress_gain_impact
				ambitious = activity_stress_loss_impact
				athletic = activity_stress_loss_impact
				lifestyle_mariner = activity_stress_loss_impact
			}
	}
	
	option = { # A fine vessel
		name = sailing.1003.b
		trigger = {
			short_term_gold > medium_boat_cost
		}
		show_as_unavailable = {
			short_term_gold <= medium_boat_cost
		}
		remove_short_term_gold = medium_boat_cost
		add_character_modifier = medium_boat_modifier
		stress_impact = {
				base = hunt_stress_loss_value #-30
				greedy = miniscule_stress_impact_gain
				brave = activity_stress_loss_impact
				craven = activity_stress_gain_impact
				ambitious = activity_stress_loss_impact
				athletic = activity_stress_loss_impact
				lifestyle_mariner = activity_stress_loss_impact
			}
	}
	
	option = { # A flagship fit for a king
		name = sailing.1003.c
		trigger = {
			short_term_gold > large_boat_cost
		}
		show_as_unavailable = {
			short_term_gold <= large_boat_cost
		}
		remove_short_term_gold = large_boat_cost
		add_character_modifier = large_boat_modifier
		stress_impact = {
				base = hunt_stress_loss_value #-30
				greedy = minor_stress_impact_gain
				brave = activity_stress_loss_impact
				craven = activity_stress_gain_impact
				ambitious = activity_stress_loss_impact
				athletic = activity_stress_loss_impact
				lifestyle_mariner = activity_stress_loss_impact
			}
	}
	
	after = {
		trigger_event = {
			on_action = sailing_dockyard_events
		}
	}
}

#My boat is in a poor state of repair, should I pay to fix it up?
sailing.1004 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.1004.t
	desc = sailing.1004.desc
	theme = sailing_activity
	orphan = yes # WIP
	left_portrait = {
		character = root
		animation = disapproval
	}

	trigger = {
		owns_a_damaged_boat = yes
	}

	option = { # Of course, I'm not going out in her like THAT!
		name = sailing.1004.a
		repair_ship = yes
	}
	
	option = { # Bah! She's still seaworthy.
		name = sailing.1004.b
	}
	
	after = {
		trigger_event = {
			on_action = sailing_dockyard_events
		}
	}
}

#Temptation at the Docks
sailing.1005 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.1005.t
	desc = sailing.1005.desc
	theme = sailing_activity
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:hooker
		animation = flirtation
	}
	
	trigger = {
		is_elf = no
		cannot_be_killed = no
		is_lotr_adult = yes
		is_eunuch_trigger = no
		NOR = {
			has_trait = celibate
			has_sexuality = asexual
		}
	}

	immediate = {
		add_character_flag = {
			flag = had_event_sailing_1005
			years = 15
		}
		hidden_effect = {
			if = {
				limit = { is_attracted_to_women = yes }
				create_character = {
					location = root.capital_province
					gender_female_chance = 100
					template = beautiful_peasant_character
					random_traits_list = {
						count = 1
						gregarious = {}
						lustful = {}
						compassionate = {}
						generous = {}
						ambitious = {}
					}
					save_scope_as = hooker
				}
			}
			else = {
				create_character = {
					location = root.capital_province
					gender_female_chance = 0
					template = beautiful_peasant_character
					random_traits_list = {
						count = 1
						gregarious = {}
						lustful = {}
						compassionate = {}
						generous = {}
						ambitious = {}
					}
					save_scope_as = hooker
				}
			}
			hidden_effect = {
				scope:hooker = { 
					set_sexuality = bisexual
					set_to_lowborn = yes
				}
				random_list = {
					60 = {
						scope:hooker = { add_trait = seducer }
					}
					40 = {
						scope:hooker = { add_trait = lovers_pox }
					}
				}
			}
		}
	}

	# Take as dock wench/boy
	option = {
		name = sailing.1005.a
		trigger = {
			can_set_relation_lover_trigger = { CHARACTER = scope:hooker }
		}
		set_relation_lover = scope:hooker
		had_sex_with_effect = {
				CHARACTER = scope:hooker
				PREGNANCY_CHANCE = pregnancy_chance
		}
		scope:activity = {
			add_activity_log_entry = {
				key = sailing_had_sexual_encounter
				tags = { good random social }
				# this line below adds the entry to the Effects section of the conclusion UI
				show_in_conclusion = yes
				character = root
				target = scope:hooker
				root = { remove_short_term_gold = 5 }
			}
		}
		if = {
			limit = {
				allowed_more_concubines = yes
			}
			scope:activity = {
				add_activity_log_entry = {
					key = sailing_gained_concubine_log
					tags = { good random social }
					# this line below adds the entry to the Effects section of the conclusion UI
					show_in_conclusion = yes
					character = root
					target = scope:hooker
					root = {
						make_concubine = scope:hooker
					}
				}
			}
		}
		if = {
			limit = { 
				faith_is_good = yes
			}
			hidden_effect = {
				random = {
					chance = 2
					trigger_event = sailing.1006
				}
			}
		}
	}

	# Lay with them
	option = {
		name = sailing.1005.b	
		had_sex_with_effect = {
			CHARACTER = scope:hooker
			PREGNANCY_CHANCE = pregnancy_chance
		}
		scope:activity = {
			add_activity_log_entry = {
				key = sailing_had_sexual_encounter
				tags = { good random social }
				# this line below adds the entry to the Effects section of the conclusion UI
				show_in_conclusion = yes
				character = root
				target = scope:hooker
				root = { remove_short_term_gold = 5 }
			}
		}	
		if = {
			limit = { 
				faith_is_good = yes
			}
			hidden_effect = {
				random = {
					chance = 2
					trigger_event = sailing.1006
				}
			}
		}
	}
	
	# Refuse
	option = {
		name = sailing.1005.c
		add_piety = 20
		stress_impact = {
			chaste = minor_stress_impact_loss
			lustful = minor_stress_impact_gain
		}
		ai_chance = {
			modifier = {
				has_trait = chaste
				factor = 0.1
			}
		}
	}
	
	after = {
		trigger_event = {
			id = sailing.1990
			days = 15
		}
	}
}

#A Dagger in the Bedroom - Sauron sends his regards
sailing.1006 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.1006.t
	desc = sailing.1006.desc
	theme = sailing_activity
	override_background = {
		reference = bedchamber
	}
	left_portrait = {
		character = root
		animation = fear
	}
	right_portrait = {
		character = scope:hooker
		animation = scheme
	}

	option = { # A knife!
		name = sailing.1006.a
		custom_tooltip = sailing.1006.a.desc
		duel = {
			skill = prowess 
			value = very_high_skill_rating
			50 = { 
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					min = -19
				}
				desc = sailing.1006.duel_success
				add_stress = massive_stress_gain
				imprison = {
					target = scope:hooker
					type = dungeon
				}
			}
			100 = {
				trigger = {
					cannot_be_killed = no
				}
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -19
				}
				desc = sailing.1006.duel_failure
				death = {
					killer = scope:hooker
					death_reason = death_murder
				}
			}
		}
	}
}

#Whittle While You Wait
sailing.1007 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.1007.t
	desc = sailing.1007.desc
	theme = sailing_activity
	left_portrait = {
		character = root
		animation = boredom
	}
	right_portrait = {
		character = scope:whittler
		animation = personality_compassionate
	}

	trigger = {
		root = {
			has_variable_list = potential_sailing_participants
			any_in_list = {
				variable = potential_sailing_participants
				is_alive = yes
				count >= 1
			}
		}
	}

	immediate = {
		scope:activity = {
			random_attending_character = {
				limit = {
					is_alive = yes
					is_ai = yes
				}
				save_scope_as = whittler
			}
		}
	}

	option = { # Make something for my child
		name = sailing.1007.a
		trigger = {
			any_child = { age < 16 }
		}
		random = {
			chance = 5
			increase_wounds_no_death_effect = { REASON = accident }
		}
		random_child = {
			limit = { age < 16 }
			add_opinion = {
				modifier = whittled_me_a_gift
				target = root
			}
		}
		stress_impact = {
			diligent = medium_stress_impact_loss
			lazy = minor_stress_impact_loss
		}
	}
	
	option = { # Make something for my lover
		name = sailing.1007.b
		trigger = {
			num_of_relation_lover > 0
		}
		random = {
			chance = 5
			increase_wounds_no_death_effect = { REASON = accident }
		}
		random_relation = {
			type = lover
			add_opinion = {
				modifier = whittled_me_a_gift
				target = root
			}
		}
		stress_impact = {
			diligent = medium_stress_impact_loss
			lazy = minor_stress_impact_loss
		}		
	}
	
	option = { # Make a flute
		name = sailing.1007.c
		trigger = {
			OR = {
				has_trait = poet
				#has_trait = shanty_singer
			}
		}
		random = {
			chance = 10
			increase_wounds_no_death_effect = { REASON = accident }
		}
		add_character_modifier = handcarved_flute
		stress_impact = {
			diligent = medium_stress_impact_loss
			lazy = minor_stress_impact_loss
		}
	}
	
	option = { # Make something trivial
		name = sailing.1007.d
		random = {
			chance = 5
			increase_wounds_no_death_effect = { REASON = accident }
		}
		stress_impact = {
			base = minor_stress_impact_loss
		}		
	}
	
	option = { # I'd rather not...
		name = sailing.1007.e
		add_prestige = miniscule_prestige_gain
		stress_impact = {
			base = minor_stress_impact_gain
		}		
	}
	
	after = {
		trigger_event = {
			id = sailing.1990
			days = 15
		}
	}
}

#Crewmates in a Bar Brawl
sailing.1008 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.1008.t
	desc = sailing.1008.desc
	theme = sailing_activity
	override_background = {
		reference = tavern
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = scope:brawler
		animation = anger
	}

	trigger = {
		root = {
			has_variable_list = potential_sailing_participants
			any_in_list = {
				variable = potential_sailing_participants
				is_alive = yes
				is_ai = yes
				count >= 1
			}
		}
	}

	immediate = {
		scope:activity = {
			random_attending_character = {
				limit = {
					is_alive = yes
					is_ai = yes
				}
				save_scope_as = brawler
			}
		}
	}
	
	option = { # Try to diffuse the situation
		name = sailing.1008.a
		duel = {
			skill = diplomacy
			value = 15
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.1008.a.success
				show_as_tooltip = {
					add_prestige = medium_prestige_gain
					reverse_add_opinion = {
						target = scope:brawler
						modifier = respect_opinion
						opinion = low_positive_opinion
					}
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.1008.a.failure
				show_as_tooltip = {
					add_prestige = minor_prestige_loss
					increase_wounds_effect = { REASON = fight }
					reverse_add_opinion = {
						target = scope:brawler
						modifier = weak_opinion
						opinion = low_negative_opinion
					}
					scope:brawler = {
						increase_wounds_effect = { REASON = fight }
					}
				}
			}
		}
		stress_impact = {
			shy = medium_stress_impact_gain
			callous = minor_stress_impact_gain
			sadistic = medium_stress_impact_gain
		}
	}
	
	option = { # Join in the brawl
		name = sailing.1008.b
		duel = {
			skill = prowess
			value = 15
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 4
					min = -49
				}
				desc = sailing.1008.b.success
				show_as_tooltip = {
					add_prestige = medium_prestige_gain
					reverse_add_opinion = {
						target = scope:brawler
						modifier = respect_opinion
						opinion = medium_positive_opinion
					}
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -4
					min = -49
				}
				desc = sailing.1008.b.failure
				show_as_tooltip = {
					add_prestige = minor_prestige_loss
					increase_wounds_effect = { REASON = fight }
					reverse_add_opinion = {
						target = scope:brawler
						modifier = respect_opinion
						opinion = low_positive_opinion
					}
					scope:brawler = {
						increase_wounds_effect = { REASON = fight }
					}
				}
			}
		}
		stress_impact = {
				#Rare opportunity for certain character types to 'blow off some steam' and lose stress here, at risk of wounds.
				wrathful = medium_stress_loss
				vengeful = medium_stress_loss
				sadistic = medium_stress_loss
				craven = major_stress_impact_gain
				calm = medium_stress_impact_gain
				patient = minor_stress_impact_gain
				forgiving = minor_stress_impact_gain
				compassionate = minor_stress_impact_gain
		}
	}
	
	option = { # Leave them to it
		name = sailing.1008.c
		add_prestige = medium_prestige_loss
		reverse_add_opinion = {
			target = scope:brawler
			modifier = refusal_opinion
			opinion = high_negative_opinion
		}
		scope:brawler = {
			increase_wounds_effect = { REASON = fight }
		}
		stress_impact = {
			drunkard = medium_stress_impact_loss
			diligent = minor_stress_impact_gain
			just = minor_stress_impact_gain
			reclusive = minor_stress_impact_loss
		}
	}

	after = {
		trigger_event = {
			id = sailing.1990
			days = 15
		}
	}
	
}

#The Drinking Contest
sailing.1009 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.1009.t
	desc = sailing.1009.desc
	theme = sailing_activity
	override_background = {
		reference = tavern
	}
	left_portrait = {
		character = root
		animation = dismissal
	}
	right_portrait = {
		character = scope:challenger
		animation = personality_bold
	}

	trigger = {
		root = {
			has_variable_list = potential_sailing_participants
			any_in_list = {
				variable = potential_sailing_participants
				is_alive = yes
				is_ai = yes
				count >= 1
			}
		}
	}

	immediate = {
		scope:activity = {
			random_attending_character = {
				limit = {
					is_alive = yes
					is_ai = yes	
					prowess > 15					
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
					prowess > 10
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
				}
				save_scope_as = challenger
			}
		}
	}
	
	option = { # You're on!
		name = sailing.1009.a
		duel = {
			skill = prowess
			target = scope:challenger 
			60 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 2
					min = -59
				}
				modifier = {
					add = 150
					has_trait = drunkard
				}
				modifier = {
					add = 50
					has_trait = lifestyle_reveler
				}
				desc = sailing.1009.a.success
				show_as_tooltip = {
					add_gold = 25
					add_prestige = 50
					reverse_add_opinion = {
						target = scope:challenger
						modifier = respect_opinion
						opinion = low_positive_opinion
					}
				}
			}
			60 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -2
					min = -59
				}
				modifier = {
					add = 150
					scope:challenger = { has_trait = drunkard }
				}
				modifier = {
					add = 50
					scope:challenger = { has_trait = lifestyle_reveler }
				}
				desc = sailing.1009.a.failure
				show_as_tooltip = {
					remove_short_term_gold = 25
					add_prestige = -50
					reverse_add_opinion = {
						target = scope:challenger
						modifier = weak_opinion
						opinion = low_negative_opinion
					}
				}
			}
		}
		stress_impact = {
			shy = minor_stress_impact_gain
			drunkard = medium_stress_impact_loss
			lifestyle_reveler = minor_stress_impact_loss
		}
	}
	
	option = { # I'd rather not...
		name = sailing.1009.b
		add_prestige = minor_prestige_loss
		stress_impact = {
			arrogant = minor_stress_impact_gain
			gregarious = minor_stress_impact_gain
			drunkard = medium_stress_impact_gain
			lifestyle_reveler = medium_stress_impact_gain
		}
	}
	
	after = {
		trigger_event = {
			id = sailing.1990
			days = 15
		}
	}
}

#The Fortune Teller
sailing.1010 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.1010.t
	desc = sailing.1010.desc
	theme = sailing_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:mystic
		animation = flirtation
	}

	trigger = {
		NOR = {
			has_character_modifier = good_omen_modifier
			has_character_modifier = bad_omen_modifier
		}
	}

	immediate = {
		hidden_effect = {
			create_character = {
				location = root.capital_province
				culture = root.culture
				gender = female
				age = { old_age total_life_expectancy }
				trait = lifestyle_mystic
				random_traits = yes
				faith = root.faith
				learning = { 5 10 }
				random_traits_list = {
					count = 1
					lifestyle_mystic = {}
				}
				save_scope_as = mystic
			}
			scope:mystic = { 
				set_to_lowborn = yes
			}
		}
	}
	
	option = { # Let me hear what lies in my future!
		name = sailing.1010.a
		remove_short_term_gold = 20
		random_list = {
			55 = {
				desc = sailing.1010.a.success
				send_interface_toast = {
					title = sailing.1010.a.success.t
					left_icon = root
					add_character_modifier = {
						modifier = good_omen_modifier
						years = 10
					}
				}
			}
			45 = {
				desc = sailing.1010.a.failure
				send_interface_toast = {
					title = sailing.1010.a.failure.t
					left_icon = root
					add_character_modifier = {
						modifier = bad_omen_modifier
						years = 10
					}
				}
			}
		}
		stress_impact = {
			cynical = minor_stress_impact_gain
			greedy = miniscule_stress_impact_gain
		}
	}
	
	option = { # I'd rather not...
		name = sailing.1010.b
		stress_impact = {
			paranoid = minor_stress_impact_gain
			lifestyle_mystic = minor_stress_impact_gain
			witch = minor_stress_impact_gain
			arbitrary = miniscule_stress_impact_gain
		}
	}
	
	after = {
		hidden_effect = {
			scope:mystic = {
				silent_disappearance_effect = yes
			}
		}
		trigger_event = {
			id = sailing.1990
			days = 15
		}
	}	
}

#Dockyard Delicacies
sailing.1011 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.1011.t
	desc = sailing.1011.desc
	theme = sailing_activity
	left_portrait = {
		character = root
		animation = disgust
	}
	right_portrait = {
		character = scope:fellow_diner
		animation = happiness
	}

	trigger = {
		root = {
			has_variable_list = potential_sailing_participants
			any_in_list = {
				variable = potential_sailing_participants
				is_alive = yes
				count >= 1
			}
		}
	}

	immediate = {
		scope:activity = {
			random_attending_character = {
				limit = {
					is_alive = yes
					is_ai = yes
				}
				save_scope_as = fellow_diner
			}
		}
	}

	option = { # Well I guess if you tried it!
		name = sailing.1011.a
		random_list = {
			45 = {
				desc = sailing.1011.a.success
				modifier = {
					add = 20
					has_trait = physique_good_1
				}
				modifier = {
					add = 40
					has_trait = physique_good_2
				}
				modifier = {
					add = 60
					has_trait = physique_good_3
				}
				modifier = {
					add = 20
					has_trait = strong
				}
				modifier = {
					add = 20
					has_trait = gluttonous
				}
				modifier = {
					add = 20
					has_trait = comfort_eater
				}
				send_interface_toast = {
					title = sailing.1011.a.success.t
					left_icon = root
					add_character_modifier = {
						modifier = ate_good_meal
						days = 365
					}
				}
			}
			30 = {
				desc = sailing.1011.a.too_spicy
				send_interface_toast = {
					title = sailing.1011.a.too_spicy.t
					left_icon = root
				}
				stress_impact = {
					base = minor_stress_impact_gain
				}					
			}
			25 = {
				desc = sailing.1011.a.failure
				modifier = {
					add = 20
					has_trait = physique_bad_1
				}
				modifier = {
					add = 40
					has_trait = physique_bad_2
				}
				modifier = {
					add = 60
					has_trait = physique_bad_3
				}
				modifier = {
					add = 20
					has_trait = weak
				}
				modifier = {
					add = 20
					has_trait = temperate
				}
				modifier = {
					add = 20
					has_trait = inappetetic
				}
				send_interface_toast = {
					title = sailing.1011.a.failure.t
					left_icon = root
					add_character_modifier = {
						modifier = got_food_poisoning
						days = 365
					}
				}
				stress_impact = {
					base = medium_stress_impact_gain
				}
			}
		}
		reverse_add_opinion = {
			target = scope:fellow_diner
			modifier = pleased_opinion
			opinion = low_positive_opinion
		}
		add_prestige = 25
		remove_short_term_gold = 10 
		stress_impact = {
			inappetetic = medium_stress_impact_gain
			craven = minor_stress_impact_gain
			temperate = minor_stress_impact_gain
			paranoid = minor_stress_impact_gain
			comfort_eater = medium_stress_impact_loss
			gluttonous = minor_stress_impact_loss
		}		
	}
	
	option = { # I'll pass...
		name = sailing.1011.b
		reverse_add_opinion = {
			target = scope:fellow_diner
			modifier = disappointed_opinion
			opinion = low_negative_opinion
		}
		add_prestige = -25
		stress_impact = {
			comfort_eater = medium_stress_impact_gain
			gluttonous = minor_stress_impact_gain
			brave = minor_stress_impact_gain
			inappetetic = medium_stress_impact_loss
			temperate = minor_stress_impact_loss
		}
	}

	after = {
		trigger_event = {
			id = sailing.1990
			days = 15
		}
	}
	
}

#Seagull Surprise!
sailing.1012 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.1012.t
	desc = sailing.1012.desc
	theme = sailing_activity
	left_portrait = {
		character = root
		animation = anger
	}
	right_portrait = {
		character = scope:laugher
		animation = happiness
	}

	trigger = {
		root = {
			has_variable_list = potential_sailing_participants
			any_in_list = {
				variable = potential_sailing_participants
				is_alive = yes
				count >= 1
			}
		}
	}

	immediate = {
		scope:activity = {
			random_attending_character = {
				limit = {
					is_alive = yes
					is_ai = yes
				}
				save_scope_as = laugher
			}
		}
	}

	option = { # I suppose it is rather funny!
		name = sailing.1012.a
		add_prestige = -50
		add_dread = medium_dread_loss
		reverse_add_opinion = {
			target = scope:laugher
			modifier = amused_opinion
			opinion = low_positive_opinion
		}
	}
	
	option = { # Have them whipped
		name = sailing.1012.b
		if = {
			limit = { scope:laugher = { highest_held_title_tier > tier_barony } }
			add_dread = medium_dread_gain
			set_relation_rival = scope:laugher
		}
		else = {
			add_dread = minor_dread_gain
		}
		scope:laugher = {
			increase_wounds_effect = { REASON = whipping }
			add_opinion = {
				target = root
				modifier = angry_opinion
				opinion = medium_negative_opinion
			}
		}
		stress_impact = {
			compassionate = medium_stress_impact_gain
			calm = minor_stress_impact_gain
			sadistic = minor_stress_impact_loss
		}
	}

	after = {
		trigger_event = {
			id = sailing.1990
			days = 15
		}
	}
		
}

#An Experienced Sailor
sailing.1013 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.1013.t
	desc = sailing.1013.desc
	theme = sailing_activity
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	right_portrait = {
		character = scope:recruit
		animation = personality_cynical
	}

	immediate = {
		create_character = {
			location = root.capital_province
			gender = male
			template = new_commander_character
			age = { middle_age old_age }
			faith = root.faith
			trait = lifestyle_mariner
			save_scope_as = recruit
		}	
	}
	
	option = { # Diplomacy - Convince them to join
		name = sailing.1013.a
		duel = {
			skill = diplomacy
			value = 12
			60 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				modifier = {
					add = 10
					has_trait_xp = {
						trait = lifestyle_mariner
						value < 50
					}
				}
				modifier = {
					add = 20
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}
				modifier = {
					add = 30
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				modifier = {
					add = 10
					has_character_modifier = medium_boat_modifier
				}
				modifier = {
					add = 20
					has_character_modifier = large_boat_modifier
				}
				desc = sailing.1013.a.success
				send_interface_toast = {
					title = sailing.1013.a.success
					scope:recruit = { set_employer = root }
					reverse_add_opinion = {
						target = scope:recruit
						modifier = respect_opinion
						opinion = low_positive_opinion
					}
				}
				root = {
					add_to_variable_list = {
						name = potential_sailing_participants
						target = scope:recruit
					}
				}
			}
			40 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.1013.a.failure
				send_interface_toast = {
					title = sailing.1013.a.failure
					add_prestige = minor_prestige_loss
					hidden_effect = {
						scope:recruit = {
							silent_disappearance_effect = yes
						}
					}
				}
			}
		}
	}
	
	option = { # Bribe - Pay the to join
		name = sailing.1013.b
		scope:recruit = { set_employer = root }
		if = {
			limit = {
				scope:recruit = {
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
			}
			remove_short_term_gold = 150
		}
		else_if = {
			limit = {
				scope:recruit = {
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}
			}
			remove_short_term_gold = 100
		}
		else = {
			remove_short_term_gold = 50
		}	
		root = {
			add_to_variable_list = {
				name = potential_sailing_participants
				target = scope:recruit
			}
		}
	}
	
	option = { # Refuse - Choose not to recruit
		name = sailing.1013.c
		hidden_effect = {
			scope:recruit = {
				silent_disappearance_effect = yes
			}
		}
	}

	after = {
		trigger_event = {
			id = sailing.1990
			days = 15
		}
	}

}

#Gathering Supplies - ONE UPDATE & LINK TO LACK OF SUPPLIES MENEL
sailing.1014 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.1014.t
	desc = sailing.1014.desc
	theme = sailing_activity
	override_background = {
		reference = market_west
	}
	left_portrait = {
		character = root
		animation = personality_honorable
	}

	option = { # Book
		name = sailing.1014.a
		
		random = {
			chance = 10
			add_learning_skill = 1
		}
		custom_tooltip = sailing.1014.a.tt
		hidden_effect = {
			random_list = {
				25 = {
					#Mariner skill
					if = {
						limit = { has_trait = lifestyle_mariner }
						scope:activity = {
							add_activity_log_entry = {
								key = sailing_completed_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								
								root = {
									add_trait_xp = {
										trait = lifestyle_mariner
										value = 5
									}
								}
							}
						}
					}	
					else = {
						scope:activity = {
							add_activity_log_entry = {
								key = sailing_completed_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								
								root = { add_trait = lifestyle_mariner }
							}
						}
					} 
					send_interface_toast = {
						left_icon = ROOT
						title = sailing.1014.a.success.toast
					}
				}
				75 = {
					send_interface_toast = {
						left_icon = ROOT
						title = sailing.1014.a.failure.toast
					}
				}
			}
		}
		remove_short_term_gold = 50
	}

	option = { # Booze
		name = sailing.1014.b
		random_list = {
			90 = { add_stress = -20 }
			10 = { add_stress = -30 add_trait = drunkard }
		}
		remove_short_term_gold = 30
	}

	option = { # Oranges - ADD LEARNING / MARINER LIMIT?
		name = sailing.1014.c
		add_character_modifier = {
			modifier = supply_of_citrus
			days = 365			
		}
		remove_short_term_gold = 30
	}

	option = { # Refuse - I don't need anything
		name = sailing.1014.d
	}	

	after = {
		trigger_event = {
			id = sailing.1990
			days = 15
		}
	}
	
}

#The Old Beggar ~ by Aerien
sailing.1015 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.1015.t
	desc = sailing.1015.desc
	theme = sailing_activity
	override_background = {
		reference = docks
	}
	center_portrait = {
		character = scope:first_mate
		animation = anger
	}
	left_portrait = {
		character = root
		animation = interested
	}
	right_portrait = {
		character = scope:dockyard_beggar 
		animation = throne_room_conversation_1
		#camera = camera_activity_right
	}
	immediate = {
		create_character = {
			template = tournament_locale_character
			dynasty = none
			age = 70
			location = scope:activity.activity_location
			culture = scope:activity.activity_location.culture
			faith = scope:activity.activity_location.faith 
			gender_female_chance = 0
			save_scope_as = dockyard_beggar
		}
	}
	option = { # Sure, teach me a thing or two
		name = sailing.1015.a
		#Mariner skill
		if = {
			limit = { has_trait = lifestyle_mariner }
			scope:activity = {
				add_activity_log_entry = {
					key = sailing_completed_log
					tags = { good }
					# this line below adds the entry to the Effects section of the conclusion UI
					show_in_conclusion = yes
					character = root
					
					root = {
						add_trait_xp = {
							trait = lifestyle_mariner
							value = 5
						}
					}
				}
			}
		}	
		else = {
			scope:activity = {
				add_activity_log_entry = {
					key = sailing_completed_log
					tags = { good }
					# this line below adds the entry to the Effects section of the conclusion UI
					show_in_conclusion = yes
					character = root
					
					root = { add_trait = lifestyle_mariner }
				}
			}
		} 
		remove_short_term_gold = minor_gold_value
	}

	option = { # Bah! Begone!
		name = sailing.1015.b
		add_prestige = minor_prestige_gain
		stress_impact = {
			compassionate = medium_stress_impact_gain
			arrogant = medium_stress_impact_loss
			just = minor_stress_impact_loss
			callous = minor_stress_impact_loss
			generous = minor_stress_impact_gain
		} 
	}

	option = { # Leave him be
		name = sailing.1015.c
		add_piety = minor_piety_gain
	}

	after = {
		scope:dockyard_beggar = { silent_disappearance_effect = yes }
		trigger_event = {
			id = sailing.1990
			days = 15
		}
	}
}

#Set out to Sea - ADD BETTER LOGIC FOR CHOOSING GOOD FIRST MATE (MINOR TITLE HOLDER, FRIEND, MARINER, POWERFUL VASSAL ETC)
sailing.1990 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.1990.t
	desc = sailing.1990.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = scope:first_mate
		animation = personality_bold
	}

	immediate = {
		scope:activity = {
			random_attending_character = {
				limit = {
					is_alive = yes
					is_ai = yes
					OR = {
						has_relation_friend = root
						has_relation_best_friend = root
					}
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
					has_trait = lifestyle_mariner
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
					is_powerful_vassal_of = root
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
					stewardship > 10
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
				}
				save_scope_as = first_mate
			}
		}
		# if = { 
			# limit = {
				# NOT = { exists = scope:first_mate }
				# create_character = {
					# template = beautiful_peasant_character
					# employer = root
					# gender_female_chance = 50
					# trait = lifestyle_mariner
					# save_scope_as = first_mate
					# after_creation = {
						# add_to_activity = scope:activity 
					# }
				# }
			# }
		# }
	}

	option = { # Exploration!
		name = sailing.1990.a
		trigger = { 
			scope:activity = { has_activity_option = { category = special_type option = sailing_type_explore } }
		}
		add_character_flag = {
			flag = sailing_exploration_mission
			years = 4
		}
		trigger_event = sailing.1991
	}

	option = { # Piracy 
		name = sailing.1990.b
		trigger = {
			scope:activity = { has_activity_option = { category = special_type option = sailing_type_raid } }
		}
		trigger_event = {
			on_action = sailing_at_sea_events
			days = 15
		}
		add_character_flag = {						
			flag = sailing_piracy_mission
			years = 4
		}
	}
	
	option = { # Meneltarma
		name = sailing.1990.c
		trigger = {
			scope:activity = { has_activity_option = { category = special_type option = sailing_type_meneltarma } }
		}
		add_character_flag = {
			flag = sailing_exploration_mission
			years = 4
		}
		trigger_event = {
			id = sailing.3100
			days = 1
		}
	}
}

#Exploring where?
sailing.1991 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.1991.t
	desc = sailing.1991.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = scope:first_mate
		animation = personality_cynical
	}

	option = { # Coastal exploration 
		name = sailing.1991.a
		add_character_flag = {
			flag = sailing_exploration
			years = 2
		}
		trigger_event = {
			on_action = sailing_at_sea_events
			days = 15
		}
	}
	
	# option = { # Meneltarma
		# name = sailing.1991.c
		# trigger = {
			# NOT = { has_character_flag = failed_to_navigate_towards_numenor }
		# }
		# trigger_event = {
			# id = sailing.3100
			# days = 1
		# }
		# ai_chance = { base = 0 }
	# }
	
	option = { # River Sailing
		name = sailing.1991.d
		add_character_flag = {
			flag = river_sailing_exploration
			years = 4
		}
		trigger_event = {
			on_action = sailing_at_sea_events
			days = 15
		}
	}
	
}

#River Sailing to...?
sailing.1992 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.1992.t
	desc = sailing.1992.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = scope:first_mate
		animation = personality_cynical
	}

	option = { # Anduin 
		name = sailing.8001.tt
		trigger_event = {
			id = sailing.8001
			days = 15
		}
	}	
	
	option = { # Harnen
		name = sailing.8100.tt
		trigger_event = {
			id = sailing.8100
			days = 15
		}
	}
	
	option = { # Gwathlo
		name = sailing.8201.tt
		trigger_event = {
			id = sailing.8201
			days = 15
		}
	}	
	
	# option = { # I changed my mind 
		# name = sailing.8888.a
		# trigger_event = {
			# id = sailing.1991
		# }
	# }	
}


############################
## Random events at sea
## 2000-2098
## by Jamie-san
############################

#An invitation to play dice
sailing.2001 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.2001.t
	desc = sailing.2001.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = root
	right_portrait = scope:gambling_sailor_1

	trigger = {
		root = {
			has_variable_list = potential_sailing_participants
			any_in_list = {
				variable = potential_sailing_participants
				is_alive = yes
				count >= 1
			}
		}
	}
	
	immediate = {
		root = {
			random_in_list = {
				variable = potential_sailing_participants
				limit = {
					is_alive = yes
				}
				alternative_limit = {
					is_powerful_vassal = yes
				}
				save_scope_as = gambling_sailor_1
			}
			set_variable = {
				name = participant_to_use
				value = scope:gambling_sailor_1
				days = 150
			}
		}
	}

	option = { # Sure, I'll play some dice
		name = sailing.2001.a
		add_prestige = minor_prestige_gain
		stress_impact = {
			greedy = minor_stress_impact_loss
		}
		ai_chance = {
			base = 50
			modifier = {
				add = 40
				OR = {
					has_trait = greedy
					has_trait = gregarious
				}
			}
		}
	}

	option = { # You won't catch me gambling!
		name = sailing.2001.b
		add_prestige = minor_prestige_loss
		stress_impact = {
			greedy = medium_stress_impact_gain
		}
		ai_chance = {
			base = 50
			modifier = {
				add = 40
				OR = {
					has_trait = generous
					has_trait = shy
				}
			}
		}
	}

	after = {
		trigger_event = {
			id = sailing.2099
			days = 5 
		}
	}

}

# Ship in Danger
sailing.2002 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.2002.t
	desc = sailing.2002.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}

	# Stop and try to help them!
	option = {
		name = sailing.2002.a

		# Martial duel to organise your sailors.
		duel = {
			skill = martial
			value = 10
			# You succeed in saving the crew and some of their haul!
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.2002.a.tt_success
				send_interface_toast = {
					title = sailing.2002.a.tt_success
					left_icon = root
					add_prestige = minor_prestige_gain
				}
			}
			# You fail, and many are lost to the storm.
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.2002.a.tt_failure
				send_interface_toast = {	
					title = sailing.2002.a.tt_failure
					left_icon = root
					add_prestige = miniscule_prestige_loss
				}
			}
		}

		stress_impact = {
			diligent = minor_stress_impact_loss
			compassionate = medium_stress_impact_loss
			lazy = minor_stress_impact_gain
			callous = medium_stress_impact_gain
			sadistic = medium_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = 0.75
				ai_energy = 0.25
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = diligent
			}
			modifier = {	# Weight up for stress.
				add = 20
				has_trait = compassionate
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = lazy
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = callous
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = sadistic
			}
		}
	}
	
	# Salvage the cargo, kill the survivors.
	option = {
		name = sailing.2002.b

		# Prowess duel to storm the boat.
		duel = {
			skill = prowess
			value = 10
			# You storm the boat easily.
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.2002.b.tt_success
				send_interface_toast = {
					title = sailing.2002.b.tt_success
					left_icon = root
					add_gold = minor_gold_value
				}
			}
			# Survivors slip to shore.
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.2002.b.tt_failure
				send_interface_toast = {	
					title = sailing.2002.b.tt_failure
					left_icon = root
					add_gold = minor_gold_value
					add_dread = minor_dread_gain
					add_tyranny = minor_tyranny_gain
				}
			}
		}

		stress_impact = {
			greedy = minor_stress_impact_loss
			callous = minor_stress_impact_loss
			sadistic = medium_stress_impact_loss
			compassionate = medium_stress_impact_gain
			generous = medium_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_boldness = 0.5
				ai_greed = 0.25
				ai_compassion = -0.5
				ai_honor = -0.5
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = greedy
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = callous
			}
			modifier = {	# Weight up for stress.
				add = 20
				has_trait = sadistic
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = compassionate
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = generous
			}
		}
	}
	
	# Sail on by.
	option = {
		name = sailing.2002.c

		# Minor dread gain from your crew.
		add_dread = miniscule_dread_gain

		stress_impact = {
			lazy = minor_stress_impact_loss
			callous = minor_stress_impact_loss
			arbitrary = minor_stress_impact_loss
			diligent = minor_stress_impact_gain
			compassionate = minor_stress_impact_gain
			just = minor_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = -0.25
				ai_energy = -0.5
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = lazy
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = callous
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = arbitrary
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = diligent
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = compassionate
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = just
			}
		}
	}
	
	after = {
		trigger_event = {
			id = sailing.2099
			days = 5 
		}
	}
}

# The Leviathan
sailing.2003 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.2003.t
	desc = sailing.2003.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = shock
	}

	trigger = {
		# DLC check.
		has_fp1_dlc_trigger = yes
	}

	# Get the harpoons!
	option = {
		name = sailing.2003.a

		# Prowess challenge to slaughter the whale.
		duel = {
			skill = prowess
			value = decent_skill_rating
			# You haul the whale to shore and butcher it.
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.2003.a.tt_success
				send_interface_toast = {
					title = sailing.2003.a.tt_success
					left_icon = root
					add_gold = 100
				}
			}
			# The beast escapes you.
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.2003.a.tt_failure
				send_interface_toast = {	
					title = sailing.2003.a.tt_failure
					left_icon = root
					add_prestige = minor_prestige_loss
				}
			}
		}

		stress_impact = {
			vengeful = miniscule_stress_impact_loss	# From Hell's Heart I stab at thee, etc.
			brave = major_stress_impact_loss
			craven = major_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_boldness = 0.5
				ai_energy = 0.5
				ai_compassion = -0.25
			}
			modifier = {	# Weight up for stress.
				add = 5
				has_trait = vengeful
			}
			modifier = {	# Weight up for stress.
				add = 30
				has_trait = brave
			}
			modifier = {	# Weight down for stress.
				add = -30
				has_trait = craven
			}
		}
	}
	
	# Just bring me the carcass.
	option = {
		name = sailing.2003.b

		add_gold = 50

		stress_impact = {
			greedy = minor_stress_impact_loss
			generous = minor_stress_impact_gain
			compassionate = minor_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_boldness = -0.25
				ai_energy = -0.25
				ai_compassion = -0.25
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = greedy
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = generous
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = compassionate
			}
		}
	}
	
	# (Hunter) A *grand* quarry!
	option = {
		name = sailing.2003.c
		trigger = { has_trait = lifestyle_hunter }
		trait = lifestyle_hunter

		# You face a *true* leviathan.
		custom_tooltip = sailing.2003.c.tt
		# More difficult prowess challenge for greater rewards.
		duel = {
			skill = prowess
			value = very_high_skill_rating
			# You haul the whale to shore and butcher it.
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.2003.c.tt_success
				send_interface_toast = {
					title = sailing.2003.c.tt_success
					left_icon = root
					add_gold = 300
				}
			}
			# The beast escapes you.
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.2003.c.tt_failure
				send_interface_toast = {	
					title = sailing.2003.c.tt_failure
					left_icon = root
					increase_wounds_effect = { REASON = hunting_accident }
					add_prestige = minor_prestige_loss
				}
			}
		}

		stress_impact = {
			vengeful = miniscule_stress_impact_loss	# From Hell's Heart I stab at thee, etc.
			brave = major_stress_impact_loss
			craven = major_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_boldness = 0.75
				ai_energy = 0.75
				ai_compassion = -0.25
			}
			modifier = {	# Weight up for stress.
				add = 5
				has_trait = vengeful
			}
			modifier = {	# Weight up for stress.
				add = 30
				has_trait = brave
			}
			modifier = {	# Weight down for stress.
				add = -30
				has_trait = craven
			}
		}
	}

	# A creature of fearsome majesty, leave it.
	option = {
		name = sailing.2003.d

		# The whale goes free.
		custom_tooltip = sailing.2003.d.tt
		# You gain a little prestige for your kindness.
		add_prestige = minor_prestige_gain

		stress_impact = {
			generous = minor_stress_impact_loss
			compassionate = medium_stress_impact_loss
			craven = major_stress_impact_loss
			greedy = medium_stress_impact_gain
			sadistic = medium_stress_impact_gain
			brave = major_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = 0.5
				ai_boldness = -0.5
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = generous
			}
			modifier = {	# Weight up for stress.
				add = 20
				has_trait = compassionate
			}
			modifier = {	# Weight up for stress.
				add = 30
				has_trait = craven
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = greedy
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = sadistic
			}
			modifier = {	# Weight down for stress.
				add = -30
				has_trait = brave
			}
		}
	}
	
	after = {
		trigger_event = {
			id = sailing.2099
			days = 5 
		}
	}
}

# Pirates!
sailing.2004 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.2004.t
	desc = sailing.2004.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}

	# Let them come!
	option = {
		name = sailing.2004.a
		duel = {
			skill = prowess
			value = high_skill_rating
			# You fight off the pirates
			60 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				min = 5
				custom_tooltip = sailing.2004.a.success
				scope:host = {
					send_interface_toast = {
						title = sailing.2004.a.success
						left_icon = root
						add_prestige = medium_prestige_gain
						add_short_term_gold = minor_gold_value
					}
				}
				# Mariner skill
				if = {
					limit = { has_trait = lifestyle_mariner }
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = {
								add_trait_xp = {
									trait = lifestyle_mariner
									value = 5
								}
							}
						}
					}
				}	
				else = {
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = { add_trait = lifestyle_mariner }
						}
					}
				} 
			}
			# They plunder your ship
			40 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				min = 10
				custom_tooltip = sailing.2004.a.failure
				scope:host = {
					send_interface_toast = {
						title = sailing.2004.a.failure
						left_icon = root
						remove_short_term_gold = medium_gold_value
						add_stress = 25
					}
				}
			}
		}
	}
	# Hoist the sails!
	option = {
		name = sailing.2004.b 
		add_prestige = medium_prestige_loss
		add_stress = -10 
	}
	
	after = {
		trigger_event = {
			id = sailing.2099
			days = 5 
		}
	}
}

sailing.2005 = { # Crewmate overboard
	type = activity_event
	content_source = realms_dlc
	title = sailing.2005.t
	desc = sailing.2005.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}

	# Dive into the water to save him
	option = {
		name = sailing.2005.a

		# Prowess duel to save your crewman
		duel = {
			skill = prowess
			value = 10
			# You succeed in single-handily saving the crewman
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.2005.a.tt_success
				send_interface_toast = {
					title = sailing.2005.a.tt_success
					left_icon = root
					add_prestige = minor_prestige_gain
				}
				# Mariner skill
				if = {
					limit = { has_trait = lifestyle_mariner }
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = {
								add_trait_xp = {
									trait = lifestyle_mariner
									value = 5
								}
							}
						}
					}
				}	
				else = {
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = { add_trait = lifestyle_mariner }
						}
					}
				} 
			}
			# You fail, and your crewmate is lost to the waves - and you catch a cold!
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.2005.a.tt_failure
				send_interface_toast = {	
					title = sailing.2005.a.tt_failure
					left_icon = root
					add_prestige = miniscule_prestige_loss
				}
			}
		}

		stress_impact = {
			diligent = minor_stress_impact_loss
			compassionate = medium_stress_impact_loss
			lazy = minor_stress_impact_gain
			callous = medium_stress_impact_gain
			sadistic = medium_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = 0.75
				ai_energy = 0.25
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = diligent
			}
			modifier = {	# Weight up for stress.
				add = 20
				has_trait = compassionate
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = lazy
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = callous
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = sadistic
			}
		}
	}
	
	# Organize a rescue operation by your crew
	option = {
		name = sailing.2005.b

		# Stewardship duel to organize a rescue operation
		duel = {
			skill = stewardship
			value = 10
			# You easily order your men to the point where the man is retrieved 
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.2005.b.tt_success
				send_interface_toast = {
					title = sailing.2005.b.tt_success
					left_icon = root
					add_prestige = minor_prestige_gain
				}
				# Mariner skill
				if = {
					limit = { has_trait = lifestyle_mariner }
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = {
								add_trait_xp = {
									trait = lifestyle_mariner
									value = 5
								}
							}
						}
					}
				}	
				else = {
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = { add_trait = lifestyle_mariner }
						}
					}
				} 
			}
			# You can't organize the men in time - the sailor drowns
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.2005.b.tt_failure
				send_interface_toast = {	
					title = sailing.2005.b.tt_failure
					left_icon = root
					add_prestige = minor_prestige_loss
					add_stress = minor_stress_impact_gain
				}
			}
		}

		stress_impact = {
			greedy = minor_stress_impact_loss
			callous = minor_stress_impact_loss
			sadistic = medium_stress_impact_loss
			compassionate = medium_stress_impact_gain
			generous = medium_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_boldness = 0.5
				ai_greed = 0.25
				ai_compassion = -0.5
				ai_honor = -0.5
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = greedy
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = callous
			}
			modifier = {	# Weight up for stress.
				add = 20
				has_trait = sadistic
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = compassionate
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = generous
			}
		}
	}
	
	# Abandon him, batten down the hatches
	option = {
		name = sailing.2005.c

		# Minor dread gain from your crew.
		add_dread = miniscule_dread_gain
		add_prestige = minor_prestige_loss

		stress_impact = {
			lazy = minor_stress_impact_loss
			callous = minor_stress_impact_loss
			arbitrary = minor_stress_impact_loss
			diligent = minor_stress_impact_gain
			compassionate = minor_stress_impact_gain
			just = minor_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = -0.25
				ai_energy = -0.5
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = lazy
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = callous
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = arbitrary
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = diligent
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = compassionate
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = just
			}
		}
	}
	
	after = {
		trigger_event = {
			id = sailing.2099
			days = 5 
		}
	}
}

# A Game of Cards by Brice Underhill
sailing.2006 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.2006.t
	desc = sailing.2006.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	override_background = {
		reference = tavern
	}
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:first_mate
		animation = steward
	}
	
	option = { #Playing straight
		name = sailing.2006.a
		add_prestige = minor_prestige_gain
		random_list = { 
			50 = { 
			desc = sailing.2006.a.tt_success
			send_interface_toast = {
					title = sailing.2006.a.tt_success
					left_icon = root
					add_gold = activity_minor_gold_value
					}
			} 
			50 = { 
			desc = sailing.2006.a.tt_failure
			send_interface_toast = {
					title = sailing.2006.a.tt_failure
					left_icon = root
					remove_short_term_gold = activity_minor_gold_value
					}
			} 
		}
	}
	
	option = { #Cheating
		name = sailing.2006.b
		#Intrigue duel to win at cards
		stress_impact = {
			honest = minor_stress_impact_gain
		}
		duel = {
			skill = intrigue
			value = 10
			# You use the aces up your sleeves to win the game 
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.2006.b.tt_success
				send_interface_toast = {
					title = sailing.2006.b.tt_success
					left_icon = root
					add_gold = activity_minor_gold_value
					}	
			}
			
			# You get caught by the sailors
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.2006.b.tt_failure
				send_interface_toast = {
					title = sailing.2006.b.tt_failure
					left_icon = root
					remove_short_term_gold = activity_minor_gold_value
					add_prestige = minor_prestige_loss
					add_stress = minor_stress_impact_gain
					}
				
			}
		}
	}
	
	option = { #Staying out
		name = sailing.2006.c
		add_prestige = minor_prestige_gain
		stress_impact = {
			greedy = minor_stress_impact_gain
			content = minor_stress_impact_loss
			gregarious = medium_stress_impact_loss
			drunkard = major_stress_impact_loss
		}
	}
	
	after = {
		trigger_event = {
			id = sailing.2099
			days = 5 
		}
	}
}	
	
sailing.2007 = { # Insufferable Discord by RedArkady
	type = activity_event
	content_source = realms_dlc
	title = sailing.2007.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { is_elf = yes }
				desc = sailing.2007.desc.elf
			}
			desc = sailing.2007.desc
		}
	}
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = disgust
	}

	# At the next port try to block the passengers from returning to the ship
	option = {
		name = sailing.2007.a

		# Intrigue duel to save your crewman
		duel = {
			skill = intrigue
			value = 10
			# Your crew is free of the whinging
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.2007.a.tt_success
				send_interface_toast = {
					title = sailing.2007.a.tt_success
					left_icon = root
					add_prestige = minor_prestige_gain
				}
			}
			# Blue Wizards when?
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.2007.a.tt_failure
				send_interface_toast = {
					title = sailing.2007.a.tt_failure
					left_icon = root
					add_prestige = miniscule_prestige_loss
				}
			}
		}

		stress_impact = {
			diligent = minor_stress_impact_loss
			compassionate = medium_stress_impact_loss
			lazy = minor_stress_impact_gain
			callous = medium_stress_impact_gain
			sadistic = medium_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = 0.75
				ai_energy = 0.25
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = diligent
			}
			modifier = {	# Weight up for stress.
				add = 20
				has_trait = compassionate
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = lazy
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = callous
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = sadistic
			}
		}
	}
	
		# Sell the passengers to the corsairs
	option = {
		name = sailing.2007.b

		# Minor dread gain from your crew.
		add_dread = miniscule_dread_gain
		add_prestige = minor_prestige_loss

		stress_impact = {
			lazy = minor_stress_impact_loss
			callous = minor_stress_impact_loss
			arbitrary = minor_stress_impact_loss
			diligent = minor_stress_impact_gain
			compassionate = minor_stress_impact_gain
			just = minor_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = -0.25
				ai_energy = -0.5
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = lazy
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = callous
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = arbitrary
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = diligent
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = compassionate
			}
			modifier = {	# Weight down for stress.
				add = -10
				has_trait = just
			}
		}
	}
	
	# Instruct the crew to ignore the discord.
	option = {
		name = sailing.2007.c

		# Diplomacy duel to deceive the passengers
		duel = {
			skill = diplomacy
			value = 10
			# The crew rises above the whinging 
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.2007.c.tt_success
				send_interface_toast = {
					title = sailing.2007.c.tt_success
					left_icon = root
					add_prestige = minor_prestige_gain
				}
			}
			# Elves when?
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.2007.c.tt_failure
				send_interface_toast = {
					title = sailing.2007.c.tt_failure
					left_icon = root
					add_prestige = minor_prestige_loss
					add_stress = minor_stress_impact_gain
				}
			}
		}

		stress_impact = {
			greedy = minor_stress_impact_loss
			callous = minor_stress_impact_loss
			sadistic = medium_stress_impact_loss
			compassionate = medium_stress_impact_gain
			generous = medium_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_boldness = 0.5
				ai_greed = 0.25
				ai_compassion = -0.5
				ai_honor = -0.5
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = greedy
			}
			modifier = {	# Weight up for stress.
				add = 10
				has_trait = callous
			}
			modifier = {	# Weight up for stress.
				add = 20
				has_trait = sadistic
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = compassionate
			}
			modifier = {	# Weight down for stress.
				add = -20
				has_trait = generous
			}
		}
	}
	
	after = {
		trigger_event = {
			id = sailing.2099
			days = 5 
		}
	}
}

# Becalmed by Brice Underhill
sailing.2008 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.2008.t
	desc = sailing.2008.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:first_mate
		animation = worry
	}
	
	option = { #Making the offering	
		name = sailing.2008.a
		remove_short_term_gold = activity_minor_gold_value
		add_piety = minor_piety_gain
		stress_impact = {
			cynical = minor_stress_impact_gain
			zealous = minor_stress_impact_loss
			impatient = medium_stress_impact_loss
		}	
	}
	
	option = { #We will wait
		name = sailing.2008.b
		add_prestige = miniscule_prestige_gain
		stress_impact = {
			patient = minor_stress_impact_loss
			impatient = major_stress_impact_gain
		}
		add_dread = miniscule_dread_gain
	}
	
	option = { #Theology lesson
		name = sailing.2008.c
		trigger = {
			learning >= extremely_high_skill_rating
		}
		skill = learning
		add_piety = medium_piety_gain
	}
	
	after = {
		trigger_event = {
			id = sailing.2099
			days = 5 
		}
	}
}

# The Stars Shine the Same
sailing.2009 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.2009.t
	desc = sailing.2009.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	right_portrait = {
		character = scope:stargazer
		animation = personality_rational
	}

	immediate = {
		scope:activity = {
			random_attending_character = {
				limit = {
					is_alive = yes
					is_ai = yes
					NOT = { has_trait = lifestyle_mariner }
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
				}
				save_scope_as = stargazer
			}
		}
	}

	# Navigation
	option = {
		name = sailing.2009.a
		trigger = {
			scope:stargazer = { NOT = { has_trait = lifestyle_mariner } }
			OR = {
				has_trait = lifestyle_mariner
				learning > 10
			}
		}
		random = { 
			chance = 33
			send_interface_toast = {
				left_icon = ROOT
				title = sailing.2009.a.success.toast
				scope:stargazer = { add_trait = lifestyle_mariner }
				custom_tooltip = sailing.2009.a.mariner_progress
				# Mariner skill
				if = {
					limit = { has_trait = lifestyle_mariner }
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = {
								add_trait_xp = {
									trait = lifestyle_mariner
									value = 5
								}
							}
						}
					}
				}	
				else = {
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = { add_trait = lifestyle_mariner }
						}
					}
				} 
			}
		}
	}

	# Religious
	option = {
		name = sailing.2009.b
		if = {
			limit = {
				has_trait = cynical
			}		
			random = {
				chance = 33
				remove_trait = cynical
				add_trait_force_tooltip = zealous
			}			
		}
		add_piety = 50
	}
	
	# Place in the world
	option = {
		name = sailing.2009.c
		if = {
			limit = {
				has_trait = ambitious
			}		
			random = {
				chance = 33
				remove_trait = ambitious
				add_trait_force_tooltip = content
			}			
		}
		add_stress = -40
	}
	
	after = {
		trigger_event = {
			id = sailing.2099
			days = 5 
		}
	}
}

# Sailing Accident by Brice Underhill
sailing.2010 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.2010.t
	desc = {
		desc = sailing.2010.desc
	}
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = worry
	}
	right_portrait = {
		character = scope:sailor
		animation = beg
	}
	immediate = {
	#Create a sailor
	create_character = {
		location = root.capital_province
		template = pool_repopulate_prowess
		save_scope_as = sailor
		trait = wounded_2
		}
	}
	option = { #Helping the sailor
		name = sailing.2010.a
		stress_impact = {
			craven = medium_stress_impact_gain
			brave = minor_stress_impact_loss
			compassionate = medium_stress_impact_loss
			arrogant = minor_stress_impact_gain
		}
		reverse_add_opinion = {
			target = scope:first_mate
			modifier = respect_opinion
			opinion = low_positive_opinion
		}
		duel = {
			skill = learning
			value = average_skill_rating
			60 = {
				desc = sailing.2010.a.success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 2
				}
				modifier = {
					add = {
						value = scope:first_mate.learning
						subtract = average_skill_rating
						multiply = 2
						min = 10 #Guaranteed help
					}
				}
				send_interface_toast = {
					title = sailing.2010.a.success
					left_icon = root
					add_prestige = medium_prestige_gain
				}		
			}
			40 = {
				desc = sailing.2010.a.failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -2
				}
				modifier = {
					add = {
						value = scope:first_mate.learning
						subtract = average_skill_rating
						multiply = -2
						max = 0 #They shouldn't make this worse
					}
				}
				send_interface_toast = {
					title = sailing.2010.a.failure
					left_icon = root
					add_stress = minor_stress_impact_gain
					stress_impact = {
						compassionate = medium_stress_impact_gain
					}
				}
			}
		}
	}
	
	option = { #Leave him
		name = sailing.2010.b
		stress_impact = {
			base = medium_stress_impact_gain
			compassionate = major_stress_impact_gain
			forgiving = medium_stress_impact_gain
			just = minor_stress_impact_gain
			sadistic = major_stress_impact_loss
			callous = medium_stress_impact_loss
			vengeful = minor_stress_impact_loss
			arbitrary = minor_stress_impact_loss
		}
		add_dread = minor_dread_gain
		reverse_add_opinion = {
						target = scope:first_mate
						modifier = cruelty_opinion
						opinion = low_negative_opinion
					}
	}
	
	option = { #I can't do this
		name = sailing.2010.c
		stress_impact = {
			craven = medium_stress_impact_loss
			brave = major_stress_impact_gain
			compassionate = major_stress_impact_gain
			callous = medium_stress_impact_loss
		}
		add_dread = minor_dread_loss
		add_prestige = medium_prestige_loss
		reverse_add_opinion = {
						target = scope:first_mate
						modifier = weak_opinion
						opinion = low_negative_opinion
					}
	}
	
	after = {
		trigger_event = {
			id = sailing.2099
			days = 5 
		}
	}
}

#####################################
#	INTENT EVENTS	                #
#	2099 - 2999						#
#####################################

# Get the appropriate intent event
sailing.2099 = {
	hidden = yes
	immediate = {
		if = {
			limit = { scope:host = { has_activity_intent = reduce_stress_intent } }
			trigger_event = sailing.2100
		}
		else_if = {
			limit = { scope:host = { has_activity_intent = woo_attendee_intent } }
			trigger_event = sailing.2101
		}
		else_if = {
			limit = { scope:host = { has_activity_intent = murder_attendee_intent } }
			trigger_event = sailing.2201
		}
		else_if = {
			limit = { scope:host = { has_activity_intent = befriend_attendee_intent } }
			trigger_event = sailing.2301
		}
		else = {
			trigger_event = {
				id = sailing.9002
				days = 1
			}
		}
	}
}

## Stress Reduction 
sailing.2100 = {
	type = activity_event
	title = sailing.2100.t
	theme = sailing_activity
	desc = sailing.2100.desc
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = happiness
	}
	option = { #A Rush Across the Ocean
		name = sailing.2100.a
		add_stress = -50
	}
	after = {
		if = {
			limit = { has_character_flag = sailing_exploration }
			trigger_event = {
				on_action = sailing_exploration_events
				days = 15
			}
		}		
		else_if = {
			limit = { has_character_flag = river_sailing_exploration }
			trigger_event = {
				id = sailing.1992
				days = 15
			}
		}
		else_if = {
			limit = { has_character_flag = meneltarma_on_course }
			trigger_event = {
				id = sailing.3200
				days = 10
			}
		}
		else_if = {
			limit = { has_character_flag = sailing_piracy_mission }
			trigger_event = {
				id = sailing.9100
				days = 10
			}
		}
		else = {
			trigger_event = {
				id = sailing.9002
				days = 1
			}
		}
	}
}

## Seduction
sailing.2101 = {
	type = activity_event
	title = sailing.2101.t
	theme = stewardship
	desc = {
		desc = sailing.2101.opening
		triggered_desc = {
			trigger = {
				exists = scope:woo_target.primary_spouse
				NOT = { is_consort_of = scope:woo_target }
				scope:woo_target.primary_spouse = { is_participant_in_activity = scope:activity }
			}
			desc = sailing.2101.married
		}
		triggered_desc = {
			trigger = {
				exists = scope:woo_target.primary_spouse
				NOT = { is_consort_of = scope:woo_target }
			}
			desc = sailing.2101.married_absent
		}
		triggered_desc = {
			trigger = {
				exists = scope:woo_target.primary_spouse
				is_consort_of = scope:woo_target
			}
			desc = sailing.2101.currentspouse
		}
		desc = sailing.2101.desc
	}
	
	override_background = {
		reference = ocean
	}

	left_portrait = {
		character = root
		animation = flirtation
	}
	right_portrait = {
		character = scope:woo_target
		animation = happiness
	}

	cooldown = { years = 1 }

	trigger = {
		OR = {
			AND = {
				has_activity_intent = woo_attendee_intent
				exists = intent_target
				intent_target = {
					is_alive = yes
					is_participant_in_activity = scope:activity
				}
			}
			any_scheme = {
				OR = {
					scheme_type = seduce
					scheme_type = courting
				}
				scheme_target_character = {
					is_alive = yes
					is_participant_in_activity = scope:activity
				}
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			factor = 10
			has_activity_intent = woo_attendee_intent
			exists = intent_target
			intent_target = {
				is_alive = yes
				is_participant_in_activity = scope:activity
			}
		}
	}

	immediate = {
		save_scope_as = woo_actor
		if = {
			limit = {
				has_activity_intent = woo_attendee_intent
				exists = intent_target
				intent_target = {
					is_alive = yes
					is_participant_in_activity = scope:activity
				}
			}
			intent_target = {
				save_scope_as = woo_target
				save_scope_as = target
			}
		}
		else = {
			random_scheme = {
				limit = {
					OR = {
						scheme_type = seduce
						scheme_type = courting
					}
					scheme_target_character = {
						is_alive = yes
						is_participant_in_activity = scope:activity
					}
				}
				scheme_target_character = {
					save_scope_as = woo_target
					save_scope_as = target
				}
			}
		}
	}

	option = { #A Rush Across the Ocean
		name = sailing.2101.a
		trigger = { has_trait = lifestyle_mariner }
		custom_tooltip = sailing.2101.a.tt
		save_scope_value_as = {
			name = woo_approach
			value = flag:sailor
		}
		stress_impact = {
			craven = minor_stress_impact_gain
		}
		ai_chance = {
			base = 25
			ai_value_modifier = {
				ai_energy = 0.5
				ai_boldness = 0.5
				ai_compassion = -0.5
			}
		}
	}

	option = { #Prospector
		name = sailing.2101.b
		trigger = {
			has_trait = lifestyle_mariner
			has_trait_xp = {
				trait = lifestyle_mariner
				value >= trait_second_level
			}
		}
		custom_tooltip = sailing.2101.b.tt
		save_scope_value_as = {
			name = woo_approach
			value = flag:prospector
		}
		stress_impact = {
			shy = minor_stress_impact_gain
		}
		ai_chance = {
			base = 50
		}
	}

	option = { #Pity
		name = sailing.2101.c
		custom_tooltip = sailing.2101.c.tt
		save_scope_value_as = {
			name = woo_approach
			value = flag:pity
		}
		stress_impact = {
			sadistic = minor_stress_impact_gain
			callous = minor_stress_impact_gain
		}
		ai_chance = {
			base = 25
			opinion_modifier = {
				opinion_target = scope:woo_target
				multiplier = 0.5
			}
			ai_value_modifier = {
				ai_energy = -0.5
				ai_boldness = -0.5
				ai_compassion = 0.5
			}
		}
	}

	option = { #Wastrel
		name = sailing.2101.d
		custom_tooltip = sailing.2101.d.tt
		save_scope_value_as = {
			name = woo_approach
			value = flag:wastrel
		}
		stress_impact = {
			lifestyle_mariner = minor_stress_impact_gain
			content = minor_stress_impact_gain
		}
		ai_chance = {
			base = 25
			ai_value_modifier = {
				ai_boldness = 1
				ai_compassion = 0.5
			}
		}
	}

	option = { #Steward
		name = sailing.2101.e
		custom_tooltip = sailing.2101.e.tt
		save_scope_value_as = {
			name = woo_approach
			value = flag:steward
		}
		stress_impact = {
			impatient = minor_stress_impact_gain
			lazy = minor_stress_impact_gain
		}
		ai_chance = {
			base = 25
			ai_value_modifier = {
				ai_boldness = 1
				ai_compassion = 0.5
			}
		}
	}

	after = {
		show_as_tooltip = {
			random_list = {
				10 = {
					desc = seduce_ongoing_possible_outcomes_tooltip_effect.success.desc
					show_chance = no
					progress_towards_lover_effect = {
						CHARACTER = scope:woo_target
						OPINION = 15
						REASON =  lover_miner_conversation_impressed
					}
				}
				10 = {
					desc = seduce_ongoing_possible_outcomes_tooltip_effect.failure.desc
					show_chance = no
					reverse_add_opinion = {
						target = scope:woo_target
						modifier = hunt_failed_woo_opinion # LotR - Fine to keep
						opinion = -10
					}
				}
			}
		}
		scope:woo_target = {
			save_scope_as = target
			hidden_effect = {
				#Evaluate what makes for a "right" choice
				if = {
					limit = {
						OR = {
							AND = {
								OR = {
									has_trait = lifestyle_mariner
									ai_energy > medium_positive_energy
								}
								exists = scope:woo_approach
								scope:woo_approach = flag:sailor
							}
							AND = {
								OR = {
									AND = {
										has_trait = lifestyle_mariner
										has_trait_xp = {
											trait = lifestyle_mariner
											value >= trait_second_level
										}	
									}
									ai_sociability > medium_positive_compassion # socialbility doesn't exist
								}
								exists = scope:woo_approach
								scope:woo_approach = flag:prospector
							}
							AND = {
								OR = {
									has_personality_benevolent_trigger = yes
									ai_compassion > medium_positive_compassion
								}
								exists = scope:woo_approach
								scope:woo_approach = flag:pity
							}
							AND = {
								OR = {
									has_trait = ambitious
									ai_boldness > medium_positive_boldness
								}
								exists = scope:woo_approach
								scope:woo_approach = flag:wastrel
							}
							AND = {
								OR = {
									has_trait = education_stewardship
									ai_rationality > medium_positive_rationality
								}
								exists = scope:woo_approach
								scope:woo_approach = flag:steward
							}
						}
					}
					save_scope_value_as = {
						name = made_great_choice
						value = yes
					}
				}
				random_list = {
					100 = { #Success
						modifier = {
							add = 100
							exists = scope:woo_approach
							scope:woo_approach = flag:sailor
							has_trait = brave
						}
						modifier = {
							add = 100
							exists = scope:woo_approach
							scope:woo_approach = flag:prospector
							has_trait = gregarious
						}
						modifier = {
							add = 100
							exists = scope:woo_approach
							scope:woo_approach = flag:pity
							has_trait = compassionate
						}
						modifier = {
							add = 100
							exists = scope:woo_approach
							scope:woo_approach = flag:wastrel
							has_trait = diligent
						}
						modifier = {
							add = 100
							exists = scope:woo_approach
							scope:woo_approach = flag:steward
							has_trait = architect
						}
						trigger_event = {
							id = sailing.2102
							days = { 1 2 }
						}
						scope:woo_actor = {
							trigger_event = {
								id = sailing.2104
								days = { 3 4 }
							}
						}
					}
					100 = { #Failure
						trigger = {
							NOT = { exists = scope:made_great_choice }
						}
						modifier = {
							add = 100
							exists = scope:woo_approach
							OR = {
								scope:woo_approach = flag:sailor
								scope:woo_approach = flag:prospector
							}
						}
						modifier = {
							add = 100
							exists = scope:woo_approach
							scope:woo_approach = flag:sailor
							has_trait = craven
						}
						modifier = {
							add = 100
							exists = scope:woo_approach
							scope:woo_approach = flag:prospector
							has_trait = shy
						}
						modifier = {
							add = 100
							exists = scope:woo_approach
							scope:woo_approach = flag:pity
							OR = {
								has_trait = callous
								has_trait = sadistic
							}
						}
						modifier = {
							add = 100
							exists = scope:woo_approach
							scope:woo_approach = flag:wastrel
							has_trait = content
						}
						modifier = {
							add = 100
							exists = scope:woo_approach
							scope:woo_approach = flag:steward
							has_trait = lazy
						}
						trigger_event = {
							id = sailing.2103
							days = { 1 2 }
						}
						scope:woo_actor = {
							trigger_event = {
								id = sailing.2105
								days = { 3 4 }
							}
						}
					}
				}
			}
		}
	}
}

#Target: Success
sailing.2102 = {
	type = activity_event
	title = sailing.2101.t
	theme = stewardship
	desc = {
		desc = sailing.2102.opening
		first_valid = {
			triggered_desc = {
				trigger = { scope:woo_approach = flag:sailor }
				desc = sailing.2102.sailor
			}
			triggered_desc = {
				trigger = { scope:woo_approach = flag:prospector }
				desc = sailing.2102.prospector
			}
			triggered_desc = {
				trigger = { scope:woo_approach = flag:pity }
				desc = sailing.2102.pity
			}
			triggered_desc = {
				trigger = { scope:woo_approach = flag:wastrel }
				desc = sailing.2102.wastrel
			}
			triggered_desc = {
				trigger = { scope:woo_approach = flag:steward }
				desc = sailing.2102.steward
			}
			desc = sailing.2102.fallback
		}
	}	
	left_portrait = {
		character = scope:woo_actor
		animation = flirtation
	}

	override_background = {
		reference = ocean
	}

	trigger = { exists = scope:woo_approach }

	option = {
		name = sailing.2103.a
		add_stress = minor_stress_loss
		show_as_tooltip = {
			progress_towards_lover_effect = {
				CHARACTER = scope:woo_target
				OPINION = 15
				REASON =  lover_miner_conversation_impressed
			}
		}
	}
}

#Target: Failure
sailing.2103 = {
	type = activity_event
	title = sailing.2101.t
	theme = stewardship
	desc = {
		desc = sailing.2102.opening
		first_valid = {
			triggered_desc = {
				trigger = { scope:woo_approach = flag:sailor }
				desc = sailing.2103.sailor
			}
			triggered_desc = {
				trigger = { scope:woo_approach = flag:prospector }
				desc = sailing.2103.prospector
			}
			triggered_desc = {
				trigger = { scope:woo_approach = flag:pity }
				desc = sailing.2103.pity
			}
			triggered_desc = {
				trigger = { scope:woo_approach = flag:wastrel }
				desc = sailing.2103.wastrel
			}
			triggered_desc = {
				trigger = { scope:woo_approach = flag:steward }
				desc = sailing.2103.steward
			}
			desc = sailing.2103.fallback
		}
	}
	left_portrait = {
		character = scope:woo_actor
		animation = flirtation
	}

	override_background = {
		reference = ocean
	}

	trigger = { exists = scope:woo_approach }

	option = {
		name = sailing.2103.a
	}
}

#Actor: Success
sailing.2104 = {
	type = activity_event
	title = sailing.2101.t
	theme = stewardship
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { scope:woo_approach = flag:sailor }
				desc = sailing.2104.sailor
			}
			triggered_desc = {
				trigger = { scope:woo_approach = flag:prospector }
				desc = sailing.2104.prospector
			}
			triggered_desc = {
				trigger = { scope:woo_approach = flag:pity }
				desc = sailing.2104.pity
			}
			triggered_desc = {
				trigger = { scope:woo_approach = flag:wastrel }
				desc = sailing.2104.wastrel
			}
			triggered_desc = {
				trigger = { scope:woo_approach = flag:steward }
				desc = sailing.2104.steward
			}
			desc = sailing.2104.fallback
		}
		desc = sailing.2104.desc
	}	
	left_portrait = {
		character = scope:woo_target
		animation = flirtation
	}

	override_background = {
		reference = ocean
	}

	widget = {
		gui = "event_window_widget_activity_intent"
		container = "custom_widgets_container"
	}

	trigger = { exists = scope:woo_approach }

	option = {
		name = sailing.2104.a
		scope:activity = {
			add_activity_log_entry = {
				key = sailing_woo_success_key
				score = 75
				tags = { random good intent }
				character = root
				target = scope:woo_target

				#Effect
				root = {
					progress_towards_lover_effect = {
						CHARACTER = scope:woo_target
						OPINION = 15
						REASON = lover_miner_conversation_impressed
					}
				}
			}
		}
	}
	
	after = {
		if = {
			limit = { has_character_flag = sailing_exploration }
			trigger_event = {
				on_action = sailing_exploration_events
				days = 15
			}
		}		
		else_if = {
			limit = { has_character_flag = river_sailing_exploration }
			trigger_event = {
				id = sailing.1992
				days = 15
			}
		}		
		else_if = {
			limit = { has_character_flag = meneltarma_on_course }
			trigger_event = {
				id = sailing.3200
				days = 10
			}
		}
		else_if = {
			limit = { has_character_flag = sailing_piracy_mission }
			trigger_event = {
				id = sailing.9100
				days = 10
			}
		}
		else = {
			trigger_event = {
				id = sailing.9002
				days = 1
			}
		}
	}
}

#Actor: Failure
sailing.2105 = {
	type = activity_event
	title = sailing.2101.t
	theme = stewardship
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { scope:woo_approach = flag:sailor }
				desc = sailing.2105.sailor
			}
			triggered_desc = {
				trigger = { scope:woo_approach = flag:prospector }
				desc = sailing.2105.prospector
			}
			triggered_desc = {
				trigger = { scope:woo_approach = flag:pity }
				desc = sailing.2105.pity
			}
			triggered_desc = {
				trigger = { scope:woo_approach = flag:wastrel }
				desc = sailing.2105.wastrel
			}
			triggered_desc = {
				trigger = { scope:woo_approach = flag:steward }
				desc = sailing.2105.steward
			}
			desc = sailing.2105.fallback
		}
		desc = sailing.2105.desc
	}	
	left_portrait = {
		character = scope:woo_target
		animation = eyeroll
	}

	override_background = {
		reference = ocean
	}

	widget = {
		gui = "event_window_widget_activity_intent"
		container = "custom_widgets_container"
	}

	trigger = { exists = scope:woo_approach }

	option = {
		name = sailing.2105.a
		scope:activity = {
			add_activity_log_entry = {
				key = sailing_woo_failure_key
				score = 75
				tags = { random bad intent }
				character = root
				target = scope:woo_target

				#Effect
				reverse_add_opinion = {
					target = scope:woo_target
					modifier = hunt_failed_woo_opinion #LotR - ok to leave
					opinion = -10
				}
			}
		}
	}
	
	after = {
		if = {
			limit = { has_character_flag = sailing_exploration }
			trigger_event = {
				on_action = sailing_exploration_events
				days = 15
			}
		}		
		else_if = {
			limit = { has_character_flag = river_sailing_exploration }
			trigger_event = {
				id = sailing.1992
				days = 15
			}
		}
		else_if = {
			limit = { has_character_flag = sailing_piracy_mission }
			trigger_event = {
				id = sailing.9100
				days = 10
			}
		}
		else_if = {
			limit = { has_character_flag = meneltarma_on_course }
			trigger_event = {
				id = sailing.3200
				days = 10
			}
		}
		else = {
			trigger_event = {
				id = sailing.9002
				days = 1
			}
		}
	}
}

## Murder

# scripted_trigger sailing_hostile_scheme_target_trigger = {
	# NOT = { this = root }
	# is_alive = yes
	# is_participant_in_activity = scope:activity
	# # Murder scheme target
	# any_targeting_scheme = {
		# scheme_type = $TYPE$
		# OR = {
			# scheme_owner = root
			# any_scheme_agent_character = { this = root }
		# }
	# }
# }

sailing.2201 = {
	type = activity_event
	title = sailing.2201.t
	desc = {
		desc = sailing.2201.desc
		first_valid = {
			triggered_desc = {
				trigger = { exists = scope:accomplice_2 }
				desc = sailing.2201.accomplice_2
			}
			triggered_desc = {
				trigger = { exists = scope:accomplice }
				desc = sailing.2201.accomplice
			}
			desc = sailing.2201.alone
		}
	}
	theme = intrigue
	override_background = {
		reference = corridor_night
	}
	left_portrait = {
		character = root
		animation = scheme
	}
	right_portrait = {
		character = scope:murder_target
		animation = throne_room_conversation_2
		camera = camera_body_left
	}
	# center_portrait = {
		# character = scope:accomplice
		# animation = schadenfreude
	# }
	# lower_left_portrait = scope:accomplice_2
	# cooldown = { years = 1 }

	# widget = {
		# gui = "event_window_widget_scheme"
		# container = "custom_widgets_container"
	# }

	# trigger = {
		# scope:activity ?= {
			# any_attending_character = {
				# sailing_hostile_scheme_target_trigger = { TYPE = murder }
			# }
		# }
	# }

	# weight_multiplier = {
		# base = 1
		# modifier = {
			# factor = 2
			# scope:host.court_position:overseer_of_the_mines_court_position ?= this
			# mining_murder_risk_trigger = yes
		# }
	# }

	immediate = {
		if = {
			limit = {
				has_activity_intent = murder_attendee_intent
				exists = intent_target
				intent_target = {
					is_alive = yes
					is_participant_in_activity = scope:activity
				}
			}
			intent_target = {
				save_scope_as = murder_target
				save_scope_as = target
			}
		}
	}

	option = { # Today is the day
		name = sailing.2201.a
		custom_tooltip = sailing_murder_accomplice_tt
		stress_impact = {
			patient = minor_stress_impact_gain
			craven = minor_stress_impact_gain
		}
		trigger_event = sailing.2202
	}

	option = { # We are not ready
		name = sailing.2201.d
		stress_impact = {
			impatient = minor_stress_impact_gain
			brave = minor_stress_impact_gain
		}
		if = {
			limit = { has_character_flag = sailing_exploration }
			trigger_event = {
				on_action = sailing_exploration_events
				days = 15
			}
		}		
		else_if = {
			limit = { has_character_flag = river_sailing_exploration }
			trigger_event = {
				id = sailing.1992
				days = 15
			}
		}
		else_if = {
			limit = { has_character_flag = sailing_piracy_mission }
			trigger_event = {
				id = sailing.9100
				days = 10
			}
		}
		else_if = {
			limit = { has_character_flag = meneltarma_on_course }
			trigger_event = {
				id = sailing.3200
				days = 10
			}
		}
		else = {
			trigger_event = {
				id = sailing.9002
				days = 1
			}
		}
	}
}

sailing.2202 = {
	type = activity_event
	title = sailing.2201.t
	desc = {
		desc = sailing.2202.opening
		desc = sailing.2202.desc
		first_valid = {
			triggered_desc = {
				trigger = { exists = scope:accomplice }
				desc = sailing.2202.accomplice
			}
			desc = sailing.2201.alone
		}
	}
	theme = intrigue
	override_background = {
		reference = corridor_night
	}
	left_portrait = {
		character = root
		animation = scheme
	}
	right_portrait = {
		character = scope:murder_target
		animation = thinking
		camera = camera_body_left
	}
	# center_portrait = {
		# character = scope:accomplice
		# animation = schadenfreude
	# }
	# lower_center_portrait = scope:accomplice_2
	# cooldown = { years = 1 }

	# trigger = {
		# OR = {
			# mining_murder_intent_target_trigger = yes
			# mining_murder_target_trigger = yes
		# }
	# }

	# weight_multiplier = {
		# base = 1
		# modifier = {
			# factor = 2
			# scope:host.court_position:overseer_of_the_mines_court_position ?= this
			# mining_murder_risk_trigger = yes
		# }
	# }

	immediate = {
		save_scope_as = murder_actor
		#hidden_effect = { mining_save_murder_target_effect = yes }
	}

	option = { #Take the shot!
		name = sailing.2202.a
		flavor = sailing.2202.a.tt
		reason = activity_intent
		# set_variable = {
			# name = sailing_murder_attempt
			# value = scope:murder_target
		# }
		# mining_increment_murder_accident_attempt = yes #So it doesn't get silly, we track attempts and make chance to succeed lower for each recent one
		duel = {
			skills = { intrigue prowess }
			target = scope:murder_target		
			10 = { # ...but target is killed
				desc = sailing_kill_murder_killed
				trigger = { scope:murder_target = { cannot_be_killed = no } }
				compare_modifier = {
					value = scope:duel_value
					multiplier = 0.5
				}
				custom_tooltip = sailing_target_attendee_killed_tt
				save_scope_as = murder_success
				min = 2
			}
			10 = { # ...the target survives
				desc = sailing_kill_murder_escape
				compare_modifier = {
					value = scope:duel_value
					multiplier = -0.5
				}
				custom_tooltip = sailing_target_attendee_injured_chance_tt
				hidden_effect = {
					random = {
						chance = 50
						save_scope_as = murder_injury
					}
				}
				min = 2
			}
		}
		trigger_event = { id = sailing.2203 days = 1 }
		stress_impact = {
			vengeful = medium_stress_impact_loss
			sadistic = medium_stress_impact_loss
		}
		ai_chance = {
			base = 50
			ai_value_modifier = {
				ai_vengefulness = 0.5
				ai_energy = 0.5
				ai_boldness = 0.25
				ai_honor = -0.25
				ai_compassion = -0.25
			}
		}
	}

	option = { #Restrain yourself
		name = sailing.2202.b
		flavor = sailing.2202.b.tt
		scope:activity = {
			add_activity_log_entry = {
				key = sailing_murder_restrain_key
				score = 25
				tags = { random intent }
				character = root
				target = scope:murder_target

				# Effect
				root = {
					if = {
						limit = { exists = scope:accomplice }
						reverse_add_opinion = {
							target = scope:accomplice
							modifier = mining_did_not_shoot_opinion
							opinion = -10
						}
					}
					#mining_activity_success_change_effect = { CHANGE = increase_minor }
					stress_impact = {
						base = minor_stress_gain
						sadistic = minor_stress_impact_gain
						wrathful = minor_stress_impact_gain
						vengeful = minor_stress_impact_gain
						impatient = minor_stress_impact_gain
						compassionate = medium_stress_impact_loss
						forgiving = medium_stress_impact_loss
					}
				}
			}
		}
		ai_chance = {
			base = 50
			ai_value_modifier = {
				ai_honor = 0.75
				ai_rationality = 0.25
				ai_compassion = 0.25
				ai_vengefulness = -0.25
			}
		}
	}
}

# Outcome 
sailing.2203 = {
	type = activity_event
	title = sailing.2201.t
	desc = {
		desc = sailing.2203.desc
		first_valid = {
			triggered_desc = {
				trigger = { exists = scope:accomplice_2 }
				desc = sailing.2203.accomplice_2
			}
			triggered_desc = {
				trigger = { exists = scope:accomplice }
				desc = sailing.2203.accomplice
			}
		}
		first_valid = {
			triggered_desc = {
				trigger = { exists = scope:murder_success }
				desc = sailing.2203.success
			}
			desc = sailing.2203.failure
		}
	}
	theme = intrigue
	override_background = {
		reference = corridor_night
	}
	left_portrait = {
		character = root
		triggered_animation = {
			trigger = { exists = scope:murder_success }
			animation = schadenfreude
		}
		animation = stress
	}
	right_portrait = {
		character = scope:murder_target
		triggered_animation = {
			trigger = { exists = scope:murder_success }
			animation = loss_1
		}
		animation = fear
	}
	center_portrait = {
		character = scope:accomplice
		triggered_animation = {
			trigger = { exists = scope:murder_success }
			animation = happiness
		}
		animation = fear
	}
	lower_center_portrait = scope:accomplice_2
	#cooldown = { years = 1 }

	widget = {
		gui = "event_window_widget_scheme"
		container = "custom_widgets_container"
	}

	# trigger = {
		# var:sailing_murder_attempt ?= {
			# is_alive = yes
			# is_participant_in_activity = scope:activity
		# }
	# }

	immediate = {
		if = {
			limit = { exists = scope:murder_success }
			scope:activity = {
				add_activity_log_entry = {
					key = sailing_kill_murder_killed
					score = 25
					tags = { random intent }
					character = root
					target = scope:murder_target

					# Effect
					show_as_tooltip = {
						unknown_murder_effect = { VICTIM = scope:murder_target MURDERER = root REASON = death_drowned }
					}
				}
			}
		}
		else = {
			scope:activity = {
				add_activity_log_entry = {
					key = sailing_kill_murder_missed
					score = 25
					tags = { random intent }
					character = root
					target = scope:murder_target

					# Effect
					root = {
						show_as_tooltip = {
							if = {
								limit = { exists = scope:murder_injury }
								scope:murder_target = {
									increase_wounds_effect = { REASON = assassination }
								}
							}
							attempted_murder_opinion_effect = {
								VICTIM = scope:murder_target
								MURDERER = root
							}
							# scope:scheme ?= {
								# expose_scheme = yes
								# if = {
									# limit = { exists = scope:accomplice }
									# expose_scheme_agent = scope:accomplice
								# }
								# if = {
									# limit = { exists = scope:accomplice_2 }
									# expose_scheme_agent = scope:accomplice_2
								# }
							# }
							scope:murder_target = {
								if = {
									limit = { exists = scope:accomplice }
									add_opinion = {
										target = scope:accomplice
										modifier = attempted_murder_me_crime
									}
								}
								if = {
									limit = { exists = scope:accomplice_2 }
									add_opinion = {
										target = scope:accomplice_2
										modifier = attempted_murder_me_crime
									}
								}
							}
						}
					}
				}
			}
		}
		scope:murder_target = { trigger_event = sailing.2204 }
	}

	option = { # Success
		name = sailing.2203.a
		trigger = { exists = scope:murder_success }
		if = {
			limit = { has_character_flag = sailing_exploration }
			trigger_event = {
				on_action = sailing_exploration_events
				days = 15
			}
		}		
		else_if = {
			limit = { has_character_flag = river_sailing_exploration }
			trigger_event = {
				id = sailing.1992
				days = 15
			}
		}
		else_if = {
			limit = { has_character_flag = sailing_piracy_mission }
			trigger_event = {
				id = sailing.9100
				days = 10
			}
		}
		else_if = {
			limit = { has_character_flag = meneltarma_on_course }
			trigger_event = {
				id = sailing.3200
				days = 10
			}
		}
		else = {
			trigger_event = {
				id = sailing.9002
				days = 1
			}
		}
	}

	option = { # Failure
		name = sailing.2203.b
		trigger = {
			NOT = { exists = scope:murder_success }
		}
		if = {
			limit = { this = scope:host }
			custom_tooltip = sailing_ends_tt
			invalidate_activity = scope:activity
		}
	}
	
	# after = {
		# if = {
			# limit = { has_character_flag = sailing_exploration }
			# trigger_event = {
				# on_action = sailing_exploration_events
				# days = 15
			# }
		# }		
		# else_if = {
			# limit = { has_character_flag = river_sailing_exploration }
			# trigger_event = {
				# id = sailing.1992
				# days = 15
			# }
		# }
		# else_if = {
			# limit = { has_character_flag = sailing_piracy_mission }
			# trigger_event = {
				# id = sailing.9100
				# days = 10
			# }
		# }
		# else_if = {
			# limit = { has_character_flag = meneltarma_on_course }
			# trigger_event = {
				# id = sailing.3200
				# days = 10
			# }
		# }
		# else = {
			# trigger_event = {
				# id = sailing.9002
				# days = 1
			# }
		# }
	# }
}

# Target
sailing.2204 = { 
	type = activity_event
	title = sailing.2204.t
	desc = {
		desc = sailing.2204.desc
		first_valid = {
			triggered_desc = {
				trigger = { exists = scope:accomplice_2 }
				desc = sailing.2204.accomplice_2
			}
			triggered_desc = {
				trigger = { exists = scope:accomplice }
				desc = sailing.2204.accomplice
			}
		}
		first_valid = {
			triggered_desc = {
				trigger = { exists = scope:accomplice_2 }
				desc = sailing.2204.success
			}
			desc = sailing.2204.failure
		}
	}
	theme = hunt_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		triggered_animation = {
			trigger = { exists = scope:murder_success }
			animation = loss_1
		}
		animation = fear
	}
	right_portrait = {
		character = scope:murder_actor
		triggered_animation = {
			trigger = { exists = scope:murder_success }
			animation = schadenfreude
		}
		animation = stress
	}
	center_portrait = {
		character = scope:accomplice
		triggered_animation = {
			trigger = { exists = scope:murder_success }
			animation = happiness
		}
		animation = fear
	}
	lower_left_portrait = scope:accomplice_2
	cooldown = { years = 1 }

	widget = {
		gui = "event_window_widget_scheme"
		container = "custom_widgets_container"
	}

	immediate = {
		if = {
			limit = { exists = scope:murder_success }
			unknown_murder_effect = { VICTIM = scope:murder_target MURDERER = scope:murder_actor REASON = death_drowned }
			if = {
				limit = { this = scope:host }
				scope:activity = {
					set_variable = {
						name = mining_invalidated
						value = flag:death
					}
					set_variable = {
						name = mining_invalidated_flavor
						value = root
					}
				}
			}
			else_if = {
				limit = {
					NOR = {
						scope:murder_actor = scope:host
						scope:accomplice ?= scope:host
						scope:accomplice_2 ?= scope:host
					}
				}
				save_scope_as = invalidated_flavor
				scope:host = { trigger_event = sailing.9002 } #TODO hunt.0080
			}
		}
		else = {
			if = {
				limit = { exists = scope:murder_injury }
				increase_wounds_effect = { REASON = assassination }
			}
			attempted_murder_opinion_effect = {
				VICTIM = scope:murder_target
				MURDERER = scope:murder_actor
			}
			scope:scheme ?= {
				if = {
					limit = { exists = scope:accomplice }
					expose_scheme_agent = scope:accomplice
				}
				if = {
					limit = { exists = scope:accomplice_2 }
					expose_scheme_agent = scope:accomplice_2
				}
				expose_scheme = yes
			}
			if = {
				limit = { exists = scope:accomplice }
				attempted_murder_opinion_effect = {
					VICTIM = scope:murder_target
					MURDERER = scope:accomplice
				}
			}
			if = {
				limit = { exists = scope:accomplice_2 }
				attempted_murder_opinion_effect = {
					VICTIM = scope:murder_target
					MURDERER = scope:accomplice_2
				}
			}
		}
	}

	option = { # Success
		name = sailing.2204.a
		trigger = { exists = scope:murder_success }
	}

	option = { # Failure
		name = sailing.2204.b
		trigger = {
			NOT = { exists = scope:murder_success }
		}
		custom_tooltip = sailing_ends_tt
		if = {
			limit = {
				OR = {
					this = scope:host
					scope:host = scope:murder_actor
				}
			}
			scope:activity = {
				set_variable = {
					name = mining_invalidated
					value = flag:assassination_attempt
				}
			set_variable = {
				name = mining_invalidated_flavor
				value = root
			}
			set_variable = {
				name = mining_invalidated_culprit
					value = scope:murder_actor
				}
			}
		}
		else_if = {
			limit = {
				NOR = {
					scope:murder_actor = scope:host
					scope:accomplice ?= scope:host
					scope:accomplice_2 ?= scope:host
				}
			}
			save_scope_as = invalidated_flavor
			scope:murder_actor = { save_scope_as = invalidated_culprit }
			scope:host = { trigger_event = sailing.9002 }
		}
	}
}


## Befriend

sailing.2301 = {
	type = activity_event
	title = sailing.2301.t
	desc = {
		desc = sailing.2301.desc
	}
	theme = hunt_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:befriend_target
	}
	cooldown = { years = 1 }

	trigger = {
		OR = {
			AND = {
				has_activity_intent = befriend_attendee_intent
				exists = intent_target
				intent_target = {
					is_alive = yes
					is_participant_in_activity = scope:activity
				}
			}
			any_scheme = {
				scheme_type = befriend
				scheme_target_character = {
					is_alive = yes
					is_participant_in_activity = scope:activity
				}
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			factor = 10
			has_activity_intent = befriend_attendee_intent
			exists = intent_target
			intent_target = {
				is_alive = yes
				is_participant_in_activity = scope:activity
			}
		}
	}

	immediate = {
		save_scope_as = befriend_actor
		if = {
			limit = {
				has_activity_intent = befriend_attendee_intent
				exists = intent_target
				intent_target = {
					is_alive = yes
					is_participant_in_activity = scope:activity
				}
			}
			intent_target = { save_scope_as = befriend_target }
		}
		else = {
			random_scheme = {
				limit = {
					scheme_type = befriend
					scheme_target_character = {
						is_alive = yes
						is_participant_in_activity = scope:activity
					}
				}
				scheme_target_character = { save_scope_as = befriend_target }
			}
		}
		scope:befriend_target = {
			save_scope_as = woo_target
			save_scope_as = target
		}
	}

	option = { #Suck up
		name = sailing.2101.a
		custom_tooltip = sailing.2101.a.tt
		save_scope_value_as = {
			name = befriend_approach
			value = flag:suck_up
		}
		stress_impact = {
			craven = minor_stress_impact_gain
		}
		ai_chance = {
			base = 25
			ai_value_modifier = {
				ai_energy = 0.5
				ai_boldness = 0.5
				ai_compassion = -0.5
			}
		}
	}

	option = { #Fellow miner
		name = sailing.2101.b
		trigger = {
			has_trait = lifestyle_mariner
			scope:befriend_target = { has_trait = lifestyle_mariner }
		}
		custom_tooltip = sailing.2101.b.tt
		save_scope_value_as = {
			name = befriend_approach
			value = flag:sailor
		}
		stress_impact = {
			shy = minor_stress_impact_gain
		}
		ai_chance = {
			base = 50
		}
	}

	option = { # Compassion
		name = sailing.2101.c
		custom_tooltip = sailing.2101.c.tt
		save_scope_value_as = {
			name = befriend_approach
			value = flag:mentor
		}
		stress_impact = {
			sadistic = minor_stress_impact_gain
			callous = minor_stress_impact_gain
		}
		ai_chance = {
			base = 25
			opinion_modifier = {
				opinion_target ?= scope:first_mate
				multiplier = 0.5
			}
			ai_value_modifier = {
				ai_energy = -0.5
				ai_boldness = -0.5
				ai_compassion = 0.5
			}
		}
	}

	option = { # Wastrel
		name = sailing.2101.d
		custom_tooltip = sailing.2101.d.tt
		save_scope_value_as = {
			name = befriend_approach
			value = flag:wastrel
		}
		stress_impact = {
			lifestyle_mariner = minor_stress_impact_gain
			content = minor_stress_impact_gain
		}
		ai_chance = {
			base = 25
			ai_value_modifier = {
				ai_boldness = 1
				ai_compassion = 0.5
			}
		}
	}

	option = { # Steward
		name = sailing.2101.e
		custom_tooltip = sailing.2101.e.tt
		save_scope_value_as = {
			name = befriend_approach
			value = flag:steward
		}
		stress_impact = {
			impatient = minor_stress_impact_gain
			lazy = minor_stress_impact_gain
		}
		ai_chance = {
			base = 25
			ai_value_modifier = {
				ai_boldness = 1
				ai_compassion = 0.5
			}
		}
	}

	after = {
		show_as_tooltip = {
			random_list = {
				10 = {
					desc = seduce_ongoing_possible_outcomes_tooltip_effect.success.desc
					show_chance = no
					progress_towards_friend_effect = {
						CHARACTER = scope:befriend_target
						OPINION = 15
						REASON =  lover_miner_conversation_impressed
					}
				}
				10 = {
					desc = seduce_ongoing_possible_outcomes_tooltip_effect.failure.desc
					show_chance = no
					reverse_add_opinion = {
						target = scope:befriend_target
						modifier = hunt_bored_opinion # LotR - Fine to keep
						opinion = -10
					}
				}
			}
		}
		scope:befriend_target = {
			save_scope_as = target
			hidden_effect = {
				#Evaluate what makes for a "right" choice
				if = {
					limit = {
						OR = {
							AND = {
								has_trait = arrogant
								hunt_dharmic_pacificist_trigger = no
								exists = scope:befriend_target
								scope:befriend_approach = flag:suck_up
							}
							AND = {
								ai_energy > medium_positive_energy
								ai_sociability > medium_positive_compassion # sociability doesn't exist
								hunt_dharmic_pacificist_trigger = no
								exists = scope:befriend_target
								scope:befriend_approach = flag:sailor
							}
							AND = {
								has_trait = humble
								opinion = {
									target = root
									value >= 25
								}
								exists = scope:befriend_target
								scope:befriend_approach = flag:mentor
							}
						}
					}
					save_scope_value_as = {
						name = made_great_choice
						value = yes
					}
				}
				random_list = {
					100 = { #Success
						modifier = {
							add = 100
							exists = scope:befriend_approach
							scope:befriend_approach = flag:suck_up
							has_trait = fickle
						}
						modifier = {
							add = 100
							exists = scope:befriend_approach
							scope:befriend_approach = flag:sailor
							has_trait = gregarious
						}
						modifier = {
							add = 100
							exists = scope:befriend_approach
							scope:befriend_approach = flag:mentor
							has_trait = compassionate
						}
						trigger_event = {
							id = sailing.2302
							days = { 1 2 }
						}
						scope:befriend_actor = {
							trigger_event = {
								id = sailing.2304
								days = { 3 4 }
							}
						}
					}
					100 = { #Failure
						trigger = {
							NOT = { exists = scope:made_great_choice }
						}
						modifier = {
							add = 100
							exists = scope:befriend_approach
							scope:befriend_approach = flag:sailor
							hunt_dharmic_pacificist_trigger = yes
						}
						modifier = {
							add = 100
							exists = scope:befriend_approach
							scope:befriend_approach = flag:sailor
							has_trait = craven
						}
						modifier = {
							add = 100
							exists = scope:befriend_approach
							scope:befriend_approach = flag:falconer
							has_trait = shy
						}
						modifier = {
							add = 100
							exists = scope:befriend_approach
							scope:befriend_approach = flag:pity
							OR = {
								has_trait = callous
								has_trait = sadistic
							}
						}
						modifier = {
							add = 100
							exists = scope:befriend_approach
							scope:befriend_approach = flag:wastrel
							has_trait = content
						}
						modifier = {
							add = 100
							exists = scope:befriend_approach
							scope:befriend_approach = flag:steward
							has_trait = lazy
						}
						trigger_event = {
							id = sailing.2303
							days = { 1 2 }
						}
						scope:befriend_actor = {
							trigger_event = {
								id = sailing.2305
								days = { 3 4 }
							}
						}
					}
				}
			}
		}
	}
}

#Target: Success
sailing.2302 = {
	type = activity_event
	title = sailing.2301.t
	desc = {
		desc = sailing.2302.opening
		first_valid = {
			triggered_desc = {
				trigger = { scope:befriend_approach = flag:sailor }
				desc = sailing.2302.miner
			}
			triggered_desc = {
				trigger = { scope:befriend_approach = flag:prospector }
				desc = sailing.2302.prospector
			}
			triggered_desc = {
				trigger = { scope:befriend_approach = flag:pity }
				desc = sailing.2302.pity
			}
			triggered_desc = {
				trigger = { scope:befriend_approach = flag:wastrel }
				desc = sailing.2302.wastrel
			}
			triggered_desc = {
				trigger = { scope:befriend_approach = flag:steward }
				desc = sailing.2302.steward
			}
			desc = sailing.2302.fallback
		}
	}	
	left_portrait = {
		character = scope:befriend_actor
		animation = admiration
	}
	theme = seduce_scheme
	override_background = {
		reference = ocean
	}

	trigger = { exists = scope:befriend_approach }

	option = {
		name = sailing.2303.a
		add_stress = minor_stress_loss
		show_as_tooltip = {
			progress_towards_friend_effect = {
				CHARACTER = scope:befriend_target
				OPINION = 15
				REASON =  lover_miner_conversation_impressed
			}
		}
	}
}

#Target: Failure
sailing.2303 = {
	type = activity_event
	title = sailing.2101.t
	desc = {
		desc = hunt.7101.opening
		first_valid = {
			triggered_desc = {
				trigger = { scope:befriend_approach = flag:sailor }
				desc = sailing.2303.miner
			}
			triggered_desc = {
				trigger = { scope:befriend_approach = flag:prospector }
				desc = sailing.2303.prospector
			}
			triggered_desc = {
				trigger = { scope:befriend_approach = flag:pity }
				desc = sailing.2303.pity
			}
			triggered_desc = {
				trigger = { scope:befriend_approach = flag:wastrel }
				desc = sailing.2303.wastrel
			}
			triggered_desc = {
				trigger = { scope:befriend_approach = flag:steward }
				desc = sailing.2303.steward
			}
			desc = sailing.2303.fallback
		}
	}
	left_portrait = {
		character = scope:befriend_actor
		animation = admiration
	}
	theme = unfriendly
	override_background = {
		reference = ocean
	}

	trigger = { exists = scope:befriend_approach }

	option = {
		name = hunt.7102.a
	}
}

#Actor: Success
sailing.2304 = {
	type = activity_event
	title = sailing.2101.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { scope:befriend_approach = flag:sailor }
				desc = sailing.2304.miner
			}
			triggered_desc = {
				trigger = { scope:befriend_approach = flag:prospector }
				desc = sailing.2304.prospector
			}
			triggered_desc = {
				trigger = { scope:befriend_approach = flag:pity }
				desc = sailing.2304.pity
			}
			triggered_desc = {
				trigger = { scope:befriend_approach = flag:wastrel }
				desc = sailing.2304.wastrel
			}
			triggered_desc = {
				trigger = { scope:befriend_approach = flag:steward }
				desc = sailing.2304.steward
			}
			desc = sailing.2304.fallback
		}
		desc = sailing.2304.desc
	}	
	left_portrait = {
		character = scope:befriend_target
		animation = admiration
	}
	theme = befriend_scheme
	override_background = {
		reference = ocean
	}

	widget = {
		gui = "event_window_widget_activity_intent"
		container = "custom_widgets_container"
	}

	trigger = { exists = scope:befriend_approach }

	option = {
		name = sailing.2304.a
		scope:activity = {
			add_activity_log_entry = {
				key = sailing_befriend_success_key
				score = 75
				tags = { random good intent }
				character = root
				target = scope:befriend_target

				#Effect
				root = {
					progress_towards_friend_effect = {
						CHARACTER = scope:befriend_target
						OPINION = 15
						REASON = lover_miner_conversation_impressed
					}
				}
			}
		}
	}
	
	after = {
		if = {
			limit = { has_character_flag = sailing_exploration }
			trigger_event = {
				on_action = sailing_exploration_events
				days = 15
			}
		}		
		else_if = {
			limit = { has_character_flag = river_sailing_exploration }
			trigger_event = {
				id = sailing.1992
				days = 15
			}
		}
		else_if = {
			limit = { has_character_flag = sailing_piracy_mission }
			trigger_event = {
				id = sailing.9100
				days = 10
			}
		}
		else_if = {
			limit = { has_character_flag = meneltarma_on_course }
			trigger_event = {
				id = sailing.3200
				days = 10
			}
		}
		else = {
			trigger_event = {
				id = sailing.9002
				days = 1
			}
		}
	}
}

#Actor: Failure
sailing.2305 = {
	type = activity_event
	title = sailing.2301.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { scope:befriend_approach = flag:sailor }
				desc = sailing.2305.miner
			}
			triggered_desc = {
				trigger = { scope:befriend_approach = flag:prospector }
				desc = sailing.2305.prospector
			}
			triggered_desc = {
				trigger = { scope:befriend_approach = flag:pity }
				desc = sailing.2305.pity
			}
			triggered_desc = {
				trigger = { scope:befriend_approach = flag:wastrel }
				desc = sailing.2305.wastrel
			}
			triggered_desc = {
				trigger = { scope:befriend_approach = flag:steward }
				desc = sailing.2305.steward
			}
			desc = sailing.2305.fallback
		}
		desc = sailing.2305.desc
	}	
	left_portrait = {
		character = root
		animation = stress
	}	
	right_portrait = {
		character = scope:befriend_target
		animation = eyeroll
	}
	theme = befriend_scheme
	override_background = {
		reference = ocean
	}

	widget = {
		gui = "event_window_widget_activity_intent"
		container = "custom_widgets_container"
	}

	trigger = { exists = scope:befriend_approach }

	option = {
		name = sailing.2305.a
		scope:activity = {
			add_activity_log_entry = {
				key = sailing_befriend_failure_key
				score = 75
				tags = { random bad intent }
				character = root
				target = scope:befriend_target

				#Effect
				root = {
					reverse_add_opinion = {
						target = scope:befriend_target
						modifier = hunt_failed_woo_opinion #LotR - Fine to Keep
						opinion = -10
					}
				}
			}
		}
	}
	
	after = {
		if = {
			limit = { has_character_flag = sailing_exploration }
			trigger_event = {
				on_action = sailing_exploration_events
				days = 15
			}
		}		
		else_if = {
			limit = { has_character_flag = river_sailing_exploration }
			trigger_event = {
				id = sailing.1992
				days = 15
			}
		}
		else_if = {
			limit = { has_character_flag = sailing_piracy_mission }
			trigger_event = {
				id = sailing.9100
				days = 10
			}
		}
		else_if = {
			limit = { has_character_flag = meneltarma_on_course }
			trigger_event = {
				id = sailing.3200
				days = 10
			}
		}
		else = {
			trigger_event = {
				id = sailing.9002
				days = 1
			}
		}
	}
}

############################
## Meneltarma Chain
## 3000-3999
## by Jamie-san
############################

## Tests
# Learning - Direction to head? - knowledge of history and navigation by the stars
# Prowess - Sea Monster
# Stewardship / Martial - Supplies running low - you've been sailing in circles, and now your supplies are starting to run low. Do you turn back, keep going, try to implement rationing, etc
# Diplomacy - Madness of the Wave - Crew gets visions of Numenor being consumed, lose their nerves, potentially go bad - chance to comfort/rally them to go onward, or have to turn back because your crew broke and mutiny
# Mariner - Fury of the Deep - Osse raises a terrible storm, try to fight it or go back (WILL damage your ship regardless of outcome)

# The First Test - Learning - Charting a Course
sailing.3100 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.3100.t
	desc = sailing.3100.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	override_background = {
		reference = fp1_steward_study
	}
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:first_mate
		animation = personality_compassionate
	}	

	option = { # Which way is Numenor? Try to figure it out!
		name = sailing.3100.a
		duel = {
			skill = learning
			value = meneltarma_skill_challenge
			60 = {	
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				modifier = {
					add = 10
					has_trait = scholar
				}
				modifier = {
					add = 30
					has_character_flag = learned_about_numenor #Character learned about Numenor in exploring histories
				}
				modifier = {
					add = 10				
					OR = {
						culture = { has_cultural_pillar = heritage_dunedain }
						culture = { has_cultural_pillar = heritage_calaquendi }
						culture = { has_cultural_pillar = heritage_lomiquendi }
						culture = { has_cultural_pillar = heritage_moriquendi }
						culture = { has_cultural_pillar = heritage_southern_adunaic }
						culture = { has_cultural_pillar = heritage_northern_adunaic }

						AND = {
							culture = { has_cultural_pillar = heritage_bellakari }
							NOT = { culture = culture:bellanarud }
						}
					}
				}
				desc = sailing.3100.a.success
				custom_tooltip = sailing.3100.a.success.tt
				trigger_event = {
					id = sailing.3101
					days = 1
				}
			}
			40 = {			
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				modifier = {
					add = 10
					has_trait = impatient
				}
				desc = sailing.3100.a.failure
				custom_tooltip = sailing.3100.a.failure.tt 
				trigger_event = {
					id = sailing.3102
					days = 1
				}
			}
		}
		custom_tooltip = sailing.3100.a.positive.odds
		custom_tooltip = sailing.3100.a.negative.odds
	}
	
	# option = { # Turn back - perhaps this wasn't such a good idea!
		# name = sailing.3100.b
		# custom_tooltip = sailing.3100.b.tt 
		# add_character_flag = {
			# flag = failed_to_navigate_towards_numenor
			# years = 3
		# }
		# trigger_event = sailing.1991
	# }
}

sailing.3101 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.3101.t
	desc = sailing.3101.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = scope:first_mate
		animation = happiness
	}

	option = { # Success
		name = sailing.3101.a
		trigger_event = {
			on_action = sailing_at_sea_events
			days = 15
		}
		add_character_flag = meneltarma_on_course
	}
}	

sailing.3102 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.3102.t
	desc = sailing.3102.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = disapproval
	}
	right_portrait = {
		character = scope:first_mate
		animation = sadness
	}

	option = { # Failure
		name = sailing.3102.a
		add_character_flag = {
			flag = failed_to_navigate_towards_numenor
			years = 3
		}
		trigger_event = sailing.1991
	}
}	

# The Second Test - Prowess - It Came From the Deep
sailing.3200 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.3200.t
	desc = sailing.3200.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = anger
	}
	right_portrait = {
		character = scope:first_mate
		animation = fear
	}	

	option = { # I'll take this thing down!
		name = sailing.3200.a
		duel = {
			skill = prowess
			value = meneltarma_skill_challenge
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				modifier = {
					add = 10
					has_trait = athletic
				}
				modifier = {
					add = 10
					has_trait = education_martial_3
				}
				modifier = {
					add = 20
					has_trait = education_martial_4
				}
				modifier = {
					add = 10
					has_trait = strategist
				}
				modifier = {
					add = 10
					has_trait = lifestyle_mariner
				}
				modifier = {
					add = 20
					dynasty ?= { has_dynasty_modifier = owns_big_ship }
				}
				modifier = {
					add = 10
					dynasty ?= { has_dynasty_modifier = owns_small_ship }
				}
				desc = sailing.3200.a.success
				custom_tooltip = sailing.3200.a.success.tt
				trigger_event = {
					id = sailing.3201
					days = 1
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				modifier = {
					add = 20
					has_trait = craven
				}
				modifier = {
					add = 10
					has_trait = disfigured
				}
				modifier = {
					add = 20
					has_character_modifier = small_boat_modifier
				}
				modifier = {
					add = 40
					has_character_modifier = small_damaged_boat_modifier
				}
				modifier = {
					add = 30
					has_character_modifier = medium_damaged_boat_modifier
				}
				modifier = {
					add = 20
					has_character_modifier = large_damaged_boat_modifier
				}
				desc = sailing.3200.a.failure
				custom_tooltip = sailing.3200.a.failure.tt 
				trigger_event = {
					id = sailing.3202
					days = 1
				}
			}
		}
		custom_tooltip = sailing.3200.a.positive.odds
		custom_tooltip = sailing.3200.a.negative.odds
	}
	
	option = { # Try to flee!
		name = sailing.3200.b
		random_list = {
			80 = { #Ship is damaged
				modifier = {
					add = -20
					has_trait_xp = {
						trait = lifestyle_mariner
						value < 50
					}
				}		
				modifier = {
					add = -40
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}	
				modifier = {
					add = -60
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				custom_tooltip = sailing.3200.b.failure.tt
				damage_ship = yes
				increase_wounds_no_death_effect = { REASON = duel }
			}
			20 = { #Ship is unscathed
				modifier = {
					add = 20
					has_trait_xp = {
						trait = lifestyle_mariner
						value < 50
					}
				}		
				modifier = {
					add = 40
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}	
				modifier = {
					add = 60
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				custom_tooltip = sailing.3200.b.success.tt 
			}
		}
		trigger_event = {
			id = sailing.9002
			days = 1
		}
	}
}

sailing.3201 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.3201.t
	desc = sailing.3201.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = happiness
	}

	option = { # Success
		name = sailing.3201.a
		add_prestige = 250
		give_nickname = nick_serpent_slayer
		trigger_event = {
			id = sailing.3300
			days = 1
		}
	}
	
	option = { # Success
		name = sailing.3201.b
		add_prestige = 250
		trigger_event = {
			id = sailing.3300
			days = 1
		}
	}
}	

sailing.3202 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.3202.t
	desc = sailing.3202.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = fear
	}

	option = { # Failure - ship is undamaged
		name = sailing.3202.a
		trigger = { owns_an_undamaged_boat = yes }
		random_list = {
			20 = { #Ship is damaged - escape
				modifier = {
					add = 20
					has_trait_xp = {
						trait = lifestyle_mariner
						value < 50
					}
				}		
				modifier = {
					add = 40
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}	
				modifier = {
					add = 60
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				damage_ship = yes
				increase_wounds_no_death_effect = { REASON = duel }
				custom_tooltip = sailing.3202.a.success.tt
				trigger_event = {
					id = sailing.9002
					days = 1
				}
			}
			80 = { #Death
				modifier = {
					add = -20
					has_trait_xp = {
						trait = lifestyle_mariner
						value < 50
					}
				}		
				modifier = {
					add = -40
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}	
				modifier = {
					add = -60
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				custom_tooltip = sailing.3202.a.failure.tt
				hidden_effect = { death = { death_reason = death_perished_at_sea } }
			}
		}
	}
	
	option = { # Failure - ship is damaged
		name = sailing.3202.a
		trigger = { owns_a_damaged_boat = yes }
		random_list = {
			0 = { #Escape
				modifier = {
					add = 10
					has_trait_xp = {
						trait = lifestyle_mariner
						value < 50
					}
				}		
				modifier = {
					add = 20
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}	
				modifier = {
					add = 30
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				damage_ship = yes
				increase_wounds_no_death_effect = { REASON = duel }
				custom_tooltip = sailing.3202.a.success.tt
				trigger_event = {
					id = sailing.9002
					days = 1
				}
			}
			100 = { #Death
				modifier = {
					add = -10
					has_trait_xp = {
						trait = lifestyle_mariner
						value < 50
					}
				}		
				modifier = {
					add = -20
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}	
				modifier = {
					add = -30
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				custom_tooltip = sailing.3202.a.failure.tt
				hidden_effect = { death = { death_reason = death_perished_at_sea } }
			}
		}
	}
}

# The Third Test - Stewardship / Martial - Supplies running low - you've been sailing in circles, and now your supplies are starting to run low. Do you turn back, keep going, try to implement rationing, etc
sailing.3300 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.3300.t
	desc = sailing.3300.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = stress
	}
	right_portrait = {
		character = scope:first_mate
		animation = sadness
	}	

	option = { # Implement rationing
		name = sailing.3300.a
		duel = {
			skill = stewardship
			value = meneltarma_skill_challenge
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				modifier = {
					add = 10
					has_trait = temperate
				}
				modifier = {
					add = 10
					has_trait = shrewd
				}	
				modifier = {
					add = 10
					has_trait = administrator
				}	
				modifier = {
					add = 10
					has_trait = inappetetic
				}
				modifier = {
					add = 10
					has_trait = just
				}			
				modifier = {
					add = 10
					has_trait = lifestyle_mariner
				}		
				desc = sailing.3300.a.success
				custom_tooltip = sailing.3300.a.success.tt 
				trigger_event = {
					id = sailing.3301
					days = 1
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				modifier = {
					add = 20
					has_trait = gluttonous
				}
				modifier = {
					add = 10
					has_trait = greedy
				}	
				modifier = {
					add = 10
					has_trait = lifestyle_reveler
				}			
				modifier = {
					add = 10
					has_trait = comfort_eater
				}
				desc = sailing.3300.a.failure
				custom_tooltip = sailing.3300.a.failure.tt 
				trigger_event = {
					id = sailing.3302
					days = 1
				}
			}
		}
		custom_tooltip = sailing.3300.a.positive.odds
		custom_tooltip = sailing.3300.a.negative.odds
	}
	
	option = { # Bring the men in line - morale broken
		name = sailing.3300.b
		duel = {
			skill = martial
			value = meneltarma_skill_challenge
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				modifier = {
					add = 10
					dread > 30
				}
				modifier = {
					add = 10
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}
				modifier = {
					add = 20
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				modifier = {
					add = 20
					has_trait = logistician
				}
				modifier = {
					add = 10
					has_trait = diplomat
				}
				desc = sailing.3300.b.success
				custom_tooltip = sailing.3300.b.success.tt 
				trigger_event = {
					id = sailing.3303
					days = 1
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				modifier = {
					add = 10
					dread < 10
				}
				modifier = {
					add = 10
					has_trait = shy
				}
				modifier = {
					add = 10
					has_trait = deceitful
				}
				modifier = {
					add = 10
					has_trait = arbitrary
				}
				modifier = {
					add = 10
					has_trait = gluttonous
				}
				desc = sailing.3300.b.failure
				custom_tooltip = sailing.3300.b.failure.tt 
				trigger_event = {
					id = sailing.3304
					days = 1
				}
			}
		}
		custom_tooltip = sailing.3300.b.positive.odds
		custom_tooltip = sailing.3300.b.negative.odds
	}
	
	option = { # Turn back - we have just enough to get home.
		name = sailing.3300.c
		custom_tooltip = sailing.3300.c.tt
		trigger_event = {
			id = sailing.9002
			days = 1
		}
	}
}

sailing.3301 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.3301.t
	desc = sailing.3301.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = personality_content
	}
	right_portrait = {
		character = scope:first_mate
		animation = happiness
	}

	option = { # Success
		name = sailing.3301.a
		add_stewardship_lifestyle_perk_points = 1
		trigger_event = {
			id = sailing.3400
			days = 1
		}
	}
}	

sailing.3302 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.3302.t
	desc = sailing.3302.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = poison
	}

	option = { # Failure - whole crew starves
		name = sailing.3302.a
		death = { death_reason = death_starved }
		scope:activity = {
			every_attending_character = {
				limit = { is_ai = yes }
				death = { death_reason = death_starved }
			}
		}
	}
}

sailing.3303 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.3303.t
	desc = sailing.3303.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = war_defender
	}

	option = { # Success
		name = sailing.3303.a
		add_martial_lifestyle_perk_points = 1
		trigger_event = {
			id = sailing.3400
			days = 1
		}
	}
}	

sailing.3304 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.3304.t
	desc = sailing.3304.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = angry
	}
	right_portrait = {
		character = scope:mutiny_leader
		animation = callous
	}

	immediate = {
		scope:activity = {
			random_attending_character = {
				limit = {
					is_alive = yes
					is_ai = yes
					has_relation_rival = root
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
					opinion = {
						target = root
						value < -30
					}
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
					opinion = {
						target = root
						value < 0
					}
				}
				alternative_limit = {
					is_alive = yes
					is_ai = yes
				}
				save_scope_as = mutiny_leader
			}
		}
	}

	option = { # Failure - crew mutinies - walk the plank
		name = sailing.3304.a
		death = { death_reason = death_walked_the_plank }
	}
}

# The Fourth Test - Diplomacy - Madness of the Wave - Crew gets visions of Numenor being consumed, lose their nerves, potentially go bad - chance to comfort/rally them to go onward, or have to turn back because your crew broke and mutiny
sailing.3400 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.3400.t
	desc = sailing.3400.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = disbelief
	}
	right_portrait = {
		character = scope:first_mate
		animation = paranoia
	}	

	option = { # I'll resist the madness!
		name = sailing.3400.a
		duel = {
			skill = diplomacy
			value = meneltarma_skill_challenge
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				modifier = {
					add = 10
					has_trait = cynical
				}
				modifier = {
					add = 10
					has_trait = diplomat
				}
				modifier = {
					add = 10
					has_trait = honest
				}
				modifier = {
					add = 10
					has_trait = gregarious
				}
				modifier = {
					add = 10
					has_trait = compassionate
				}
				modifier = {
					add = 10
					has_trait = lifestyle_mariner
				}
				desc = sailing.3400.a.success
				custom_tooltip = sailing.3400.a.success.tt
				trigger_event = {
					id = sailing.3401
					days = 1
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				modifier = {
					add = 15
					has_trait = paranoid
				}
				modifier = {
					add = 15
					has_trait = craven
				}
				modifier = {
					add = 10
					has_trait = fickle
				}
				modifier = {
					add = 10
					has_trait = callous
				}
				modifier = {
					add = 10
					has_trait = lunatic_1
				}
				desc = sailing.3400.a.failure
				custom_tooltip = sailing.3400.a.failure.tt
				trigger_event = {
					id = sailing.3402
					days = 1
				}
			}
		}
		custom_tooltip = sailing.3400.a.positive.odds
		custom_tooltip = sailing.3400.a.negative.odds
	}
	
	option = { # I am the state!
		name = sailing.3400.b
		custom_tooltip = sailing.3400.b.desc
		trigger = { dread >= 90 }
		random_list = {
			90 = {
				custom_tooltip = sailing.3400.b.success.tt
				trigger_event = {
					id = sailing.3401
					days = 1
				}
			}
			10 = {
				custom_tooltip = sailing.3400.b.failure.tt
				trigger_event = {
					id = sailing.3402
					days = 1
				}
			}
		}
	}
	
	option = { # Turn back - perhaps this wasn't such a good idea!
		name = sailing.3400.c
		custom_tooltip = sailing.3400.c.tt
		trigger_event = {
			id = sailing.9002
			days = 1
		}
	}
}

sailing.3401 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.3401.t
	desc = sailing.3401.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = personality_forgiving
	}
	right_portrait = {
		character = scope:first_mate
		animation = happiness
	}

	option = { # Success
		name = sailing.3401.a
		add_diplomacy_lifestyle_perk_points = 1
		trigger_event = {
			id = sailing.3500
			days = 1
		}
	}
}	

sailing.3402 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.3402.t
	desc = sailing.3402.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = paranoia
	}

	option = { # Failure
		name = sailing.3402.a
		random_list = {
			50 = { add_trait = lunatic_1 }
			50 = { add_trait = depressed_1 }
		}
		trigger_event = {
			id = sailing.9002
			days = 1
		}
	}
}

# The Fifth Test - Mariner - Fury of the Deep - Osse raises a terrible storm, try to fight it or go back (WILL damage your ship regardless of outcome)
sailing.3500 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.3500.t
	desc = sailing.3500.desc
	theme = sailing_activity
	override_background = {
		reference = ulmo	
	}
	left_portrait = {
		character = root
		animation = disbelief
	}	

	option = { # Here we go!
		name = sailing.3500.a
		random_list = {
			0 = {	
				modifier = {
					add = 10
					has_character_modifier = small_boat_modifier
				}
				modifier = {
					add = 20
					has_character_modifier = medium_boat_modifier
				}
				modifier = {
					add = 30
					has_character_modifier = large_boat_modifier
				}
				modifier = {
					add = 10
					has_character_modifier = medium_damaged_boat_modifier
				}
				modifier = {
					add = 20
					has_character_modifier = large_damaged_boat_modifier
				}
				modifier = {
					add = 30
					dynasty ?= { has_dynasty_modifier = owns_big_ship }
				}
				modifier = {
					add = 20
					dynasty ?= { has_dynasty_modifier = owns_small_ship }
				}
				modifier = {
					add = 10
					has_trait_xp = {
						trait = lifestyle_mariner
						value < 50
					}
				}
				modifier = {
					add = 30
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}
				modifier = {
					add = 50
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				desc = sailing.3500.a.success
				custom_tooltip = sailing.3500.a.success.tt
				trigger_event = {
					id = sailing.3501
					days = 1
				}
			}
			100 = {		
				# compare_modifier = {
					# value = scope:duel_value
					# multiplier = -3.5
					# min = -49
				# }
				modifier = {
					add = -10
					has_character_modifier = small_boat_modifier
				}
				modifier = {
					add = -20
					has_character_modifier = medium_boat_modifier
				}
				modifier = {
					add = -30
					has_character_modifier = large_boat_modifier
				}
				modifier = {
					add = -10
					has_character_modifier = medium_damaged_boat_modifier
				}
				modifier = {
					add = -20
					has_character_modifier = large_damaged_boat_modifier
				}
				modifier = {
					add = -30
					dynasty ?= { has_dynasty_modifier = owns_big_ship }
				}
				modifier = {
					add = -20
					dynasty ?= { has_dynasty_modifier = owns_small_ship }
				}
				modifier = {
					add = -10
					has_trait_xp = {
						trait = lifestyle_mariner
						value < 50
					}
				}
				modifier = {
					add = -30
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}
				modifier = {
					add = -50
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				desc = sailing.3500.a.failure
				custom_tooltip = sailing.3500.a.failure.tt
				trigger_event = {
					id = sailing.3502
					days = 1
				}
			}
		}
		custom_tooltip = sailing.3500.a.positive.odds
		custom_tooltip = sailing.3500.a.negative.odds
	}
	
	option = { # Turn back - we'll never get through those waves!
		name = sailing.3500.b
		custom_tooltip = sailing.3500.b.tt
		trigger_event = {
			id = sailing.9002
			days = 1
		}
	}
}

sailing.3501 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.3501.t
	desc = sailing.3501.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = personality_content
	}

	option = { # Success
		name = sailing.3501.a
		# Mariner skill
		if = {
			limit = { has_trait = lifestyle_mariner }
			scope:activity = {
				add_activity_log_entry = {
					key = sailing_completed_log
					tags = { good }
					# this line below adds the entry to the Effects section of the conclusion UI
					show_in_conclusion = yes
					character = root
					
					root = {
						add_trait_xp = {
							trait = lifestyle_mariner
							value = 5
						}
					}
				}
			}
		}	
		else = {
			scope:activity = {
				add_activity_log_entry = {
					key = sailing_completed_log
					tags = { good }
					# this line below adds the entry to the Effects section of the conclusion UI
					show_in_conclusion = yes
					character = root
					
					root = { add_trait = lifestyle_mariner }
				}
			}
		} 
		damage_ship = yes 
		trigger_event = {
			id = sailing.3900
			days = 1
		}
	}
}	

sailing.3502 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.3502.t
	desc = sailing.3502.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = fear
	}

	option = { # Failure
		name = sailing.3502.a
		death = { death_reason = death_drowned }
		scope:activity = {
			every_attending_character = {
				if = {
					limit = { 
						is_ai = yes 
						cannot_be_killed = no
					}
					death = { death_reason = death_drowned }
				}
			}
		}
	}
}

# The Menaltarma Found
sailing.3900 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.3900.t
	desc = sailing.3900.desc
	theme = sailing_activity
	override_background = {
		reference = meneltarma	
	}
	left_portrait = {
		character = root
		animation = happiness
	}

	option = { # Watch from a distance
		name = sailing.3900.a
		custom_tooltip = sailing.3900.a.tt
		trigger_event = sailing.3901
	}

	option = { # Set foot on the Meneltarma
		name = sailing.3900.b
		
		if = { # A Glimpse of Paradise | Achievement
			limit = { 
				NOT = { exists = global_var:lotr_achievement_53 }
				is_ai = no
			}
			set_global_variable = lotr_achievement_53
		}
		random_list = {
			70 = { 
				custom_tooltip = sailing.3900.b.success 
				trigger_event = sailing.3902
				modifier = {
					add = 10
					religion = { is_in_family = rf_eruhini }
					piety_level > 3
				}
				modifier = {
					add = 10
					religion = { is_in_family = rf_eruhini }
					piety_level > 4
				}
				modifier = {
					add = 10
					religion = { is_in_family = rf_eruhini }
					piety_level > 5
				}
				modifier = {
					add = -10
					faith = { has_doctrine = doctrine_echoes_of_the_ainur }
				}
				modifier = {
					add = -20
					faith = { has_doctrine = doctrine_a_people_apart }
				}
				modifier = {
					add = -30
					faith = { has_doctrine = doctrine_dominion_of_the_dark }
				}
				modifier = {
					add = -69
					religion = { is_in_family = rf_forcesofevil }
				}
			}
			30 = { 
				custom_tooltip = sailing.3900.b.failure
				trigger_event = sailing.3903
				modifier = {
					add = -10
					religion = { is_in_family = rf_eruhini }
					piety_level > 3
				}
				modifier = {
					add = -10
					religion = { is_in_family = rf_eruhini }
					piety_level > 4
				}
				modifier = {
					add = -10
					religion = { is_in_family = rf_eruhini }
					piety_level > 5
				}
				modifier = {
					add = 10
					faith = { has_doctrine = doctrine_echoes_of_the_ainur }
				}
				modifier = {
					add = 20
					faith = { has_doctrine = doctrine_a_people_apart }
				}
				modifier = {
					add = 30
					faith = { has_doctrine = doctrine_dominion_of_the_dark }
				}
				modifier = {
					add = 69
					religion = { is_in_family = rf_forcesofevil }
				}
			}
		}
	}

	option = { # You come to a realization
		name = sailing.3900.c
		custom_tooltip = sailing.3900.c.tt
		trigger = {
			OR = {
				faith = faith:faith_pharazon
				faith = faith:faith_kings_men_numenorean
				faith = faith:faith_kings_men_castamir
				faith = faith:faith_anballukhor
				faith = faith:path_of_zigur
			}
		}
		trigger_event = sailing.3904
	}

}


# Admiring The Meneltarma From Afar
sailing.3901 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.3901.t
	desc = sailing.3901.desc
	theme = sailing_activity
	override_background = {
		reference = meneltarma	
	}
	left_portrait = {
		character = root
		animation = happiness
	}

	option = { # Desciption of Meneltarma
		name = sailing.3901.a
		#add_nickname
		add_character_modifier = reached_meneltarma
		add_prestige = 1000
		if = {
			limit = {
				faith_is_good = yes
			}
			add_piety = 750
		}
		add_legitimacy_effect = { LEGITIMACY = medium_legitimacy_gain }
		stress_impact = {
			humble = medium_stress_impact_loss
			arrogant = medium_stress_impact_gain
			content = medium_stress_impact_loss
			ambitious = medium_stress_impact_gain
		}
		if = {
			limit = {
				has_dlc_feature = legends
				dynasty = { NOT = { has_variable = gained_meneltarma_legend } }
			}
			create_legend_seed = {
				type = holy
				quality = illustrious
				chronicle = sailed_to_numenor
				properties = {
					dynasty = root.dynasty
					founder = root
					title = root.primary_title.empire
				}
			}
			dynasty = {
				set_variable = {
					name = gained_meneltarma_legend
					value = yes
				}
			}
		}
	}

	after = {
		trigger_event = {
			id = sailing.9001
			days = 1
		}
	}

}

# Setting Foot on the Meneltarma - Success #FIND AN ARTEFACT POST DLC
sailing.3902 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.3902.t
	desc = sailing.3902.desc
	theme = sailing_activity
	override_background = {
		reference = meneltarma	
	}
	override_background = {
		reference = meneltarma
	}
	left_portrait = {
		character = root
		animation = happiness
	}
	
	option = { # Desciption of Meneltarma
		name = sailing.3902.a
		#add_nickname
		#find_artefact
		add_character_modifier = reached_meneltarma
		add_prestige = 1500
		if = {
			limit = { prestige_level = 0 }
			add_prestige_level = 5
		}
		else_if = {
			limit = { prestige_level = 1 }
			add_prestige_level = 4
		}
		else_if = {
			limit = { prestige_level = 2 }
			add_prestige_level = 3
		}
		else_if = {
			limit = { prestige_level = 3 }
			add_prestige_level = 2
		}
		else_if = {
			limit = { prestige_level = 4 }
			add_prestige_level = 1
		}
		root.dynasty = {
			add_dynasty_prestige = 1000
			add_dynasty_prestige_level = 1
		}
		if = {
			limit = {
				faith_is_good = yes
			}
			add_piety = 750
		}
		random_list = {
			4 = {
				create_artifact_numenorean_figurine_effect = { OWNER = root }
			}
			2 = {
				create_artifact_numenorean_helm_effect = { OWNER = root }
			}
			2 = {
				create_artifact_numenorean_shield_effect = { OWNER = root }
			}
			1 = {
				create_artifact_numenorean_steelbow_effect = { OWNER = root }
			}
		}
		stress_impact = {
			humble = medium_stress_impact_gain
			arrogant = medium_stress_impact_loss
			content = medium_stress_impact_gain
			ambitious = medium_stress_impact_loss
		}
		if = {
			limit = {
				has_dlc_feature = legends
				dynasty = { NOT = { has_variable = gained_meneltarma_legend } }
			}
			create_legend_seed = {
				type = holy
				quality = illustrious
				chronicle = climbed_the_meneltarma
				properties = {
					dynasty = root.dynasty
					founder = root
					title = root.primary_title.empire
				}
			}
			dynasty = {
				set_variable = {
					name = gained_meneltarma_legend
					value = yes
				}
			}
		}
	}

	after = {
		trigger_event = {
			id = sailing.9001
			days = 1
		}
	}

}

# Setting Foot on the Meneltarma - Failure
sailing.3903 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.3903.t
	desc = sailing.3903.desc
	theme = sailing_activity
	override_background = {
		reference = meneltarma	
	}
	override_background = {
		reference = meneltarma
	}
	left_portrait = {
		character = root
		animation = fear
	}
	
	option = { 
		name = sailing.3903.a
		death = { death_reason = death_mysterious }
	}
}

# A Realization
sailing.3904 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.3904.t
	desc = sailing.3904.desc
	theme = faith
	override_background = {
		reference = meneltarma	
	}
	left_portrait = {
		character = root
		animation = personality_zealous
	}
	
	option = { # I turn my back to the darkness, accepting Eru's light
		name = sailing.3904.a
		custom_tooltip = sailing.3904.a.tt
		set_character_faith = faith:faith_numenorean
		add_piety = massive_piety_gain
		add_stress = -70
		add_character_modifier = reached_meneltarma
		add_prestige = 1000
		add_learning_lifestyle_perk_points = 1
		add_legitimacy_effect = { LEGITIMACY = minor_legitimacy_gain }
		stress_impact = {
			humble = medium_stress_impact_loss
			arrogant = medium_stress_impact_gain
			content = medium_stress_impact_loss
			ambitious = medium_stress_impact_gain
		}
		if = {
			limit = {
				has_dlc_feature = legends
				dynasty = { NOT = { has_variable = gained_meneltarma_legend } }
			}
			create_legend_seed = {
				type = holy
				quality = illustrious
				chronicle = sailed_to_numenor
				properties = {
					dynasty = root.dynasty
					founder = root
					title = root.primary_title.empire
				}
			}
			dynasty = {
				set_variable = {
					name = gained_meneltarma_legend
					value = yes
				}
			}
		}
		scope:activity = {
			every_attending_character = {
				limit = { is_ai = yes }
				set_character_faith = faith:faith_numenorean
			}
		}
		
		trigger_event = {
			id = sailing.9001
			days = 5
		}
		
	}
	
	option = { # No! It's my birthright to set foot on this island!
		name = sailing.3904.b
		custom_tooltip = sailing.3904.tt
		trigger_event = sailing.3903 
	}
	
	option = { # I will turn back.
		name = sailing.3904.c
		add_character_modifier = reached_meneltarma
		add_prestige = 700
		add_legitimacy_effect = { LEGITIMACY = minor_legitimacy_gain }
		stress_impact = {
			humble = medium_stress_impact_loss
			arrogant = medium_stress_impact_gain
			content = medium_stress_impact_loss
			ambitious = medium_stress_impact_gain
		}
		if = {
			limit = {
				has_dlc_feature = legends
				dynasty = { NOT = { has_variable = gained_meneltarma_legend } }
			}
			create_legend_seed = {
				type = holy
				quality = illustrious
				chronicle = sailed_to_numenor
				properties = {
					dynasty = root.dynasty
					founder = root
					title = root.primary_title.empire
				}
			}
			dynasty = {
				set_variable = {
					name = gained_meneltarma_legend
					value = yes
				}
			}
		}
		
		trigger_event = {
			id = sailing.9001
			days = 5
		}
	}
}

############################
## Coast Exploration
## 4000-4999
## by Jamie-san
## 5000-8000
## by ispanets
############################

## Eryn Vorn
#Eryn Vorn - encounter with a Dru
sailing.4000 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.4000.t
	desc = sailing.4000.desc
	theme = sailing_activity
	override_background = {
		reference = fp1_runestone	
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = scope:dru
		animation = anger
	}
	override_background = {
		reference = wilderness_forest_deep
	}

	trigger = {
		NOT = { has_character_flag = has_explored_eryn_vorn }
		is_ai = no
	}

	immediate = {
		create_character = {
			template = hunter_template
			dynasty = none
			gender_female_chance = 0
			faith = faith:faith_druedain
			culture = culture:druedain
			save_scope_as = dru
			location = root.capital_province
		}
	}

	# Fight the man
	option = {
		name = sailing.4000.a
		duel = {
			skill = prowess
			target = scope:dru
			15 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					min = -14
				}
				desc = sailing.4000.a.success.tt
				add_prestige = 100
				add_gold = 25
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.4000.toast.a.success
					custom_tooltip = sailing.4000.a.success.tt
				}
				random_list = {
					67 = {
						custom_tooltip = sailing.4000.a.solo
						trigger_event = sailing.4002
					}
					33 = {
						custom_tooltip = sailing.4000.a.group
						trigger_event = sailing.4001
					}
				}
			}
			5 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -4
				}
				desc = sailing.4000.a.failure.tt
				add_prestige = -150
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.4000.toast.a.failure
					custom_tooltip = sailing.4000.a.failure.tt
				}
				random = { 
					chance = 50 
					increase_wounds_effect = { REASON = fight } 
					hidden_effect = {
						random_list = { 
							50 = {
								add_character_flag = {
									flag = beffraen_poisoned
									weeks = 4
								}
								trigger_event = sailing.4004
							}
							50 = {
								trigger_event = sailing.4005
							}
						}
					}
				}
			}
		}
				
	}

	
	# Explain the situation
	option = {
		name = sailing.4000.b
		duel = {
			skill = diplomacy
			value = 10
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.4000.b.success
				add_prestige = minor_prestige_gain
				add_diplomacy_lifestyle_xp = medium_lifestyle_xp
				trigger_event = sailing.4003
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.4000.toast.b.failure
					custom_tooltip = sailing.4000.b.failure.tt
				}
				trigger_event = sailing.4001
				add_prestige = miniscule_prestige_loss
			}
		}
	}

	# Pay the man for his aid
	option = {
		name = sailing.4000.c		
		random_list = {
			90 = {
				custom_tooltip = sailing.4000.c.success
				remove_short_term_gold = minor_gold_value
				trigger_event = sailing.4003
			}
			10 = {
				custom_tooltip = sailing.4000.c.failure
				trigger_event = sailing.4001
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.4000.toast.b.failure
					custom_tooltip = sailing.4000.c.failure
				}
			}
		}
	}	
	
}

#Eryn Vorn - Dru has backup
sailing.4001 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.4001.t
	desc = sailing.4001.desc
	theme = sailing_activity
	override_background = {
		reference = fp1_runestone	
	}
	left_portrait = {
		character = root
		animation = fear
	}
	override_background = {
		reference = wilderness_forest_deep
	}

	# Stay and fight
	option = {
		name = sailing.4001.a
		custom_tooltip = sailing.4001.a.tt
		duel = {
			skill = prowess
			value = 16
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 4
					min = -49
				}
				desc = sailing.4001.a.success
				add_prestige = 200
				add_gold = 100
				trigger_event = sailing.4002
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -4
					min = -49
				}
				desc = sailing.4001.a.failure
				add_prestige = -150
				increase_wounds_effect = { REASON = fight }
				hidden_effect = {
					random_list = { 
						50 = {
							add_character_flag = {
								flag = beffraen_poisoned
								weeks = 4
							}
							trigger_event = sailing.4004
						}
						50 = {
							trigger_event = sailing.4005
						}
					}
				}
			}
		}	
	}

	# Surrender
	option = {
		name = sailing.4001.b	
		custom_tooltip = sailing.4001.b.tt
		add_prestige = -250
		remove_long_term_gold = medium_gold_value
		trigger_event = sailing.4005
	}
	
	# Flee
	option = {
		name = sailing.4001.c
		custom_tooltip = sailing.4001.c.tt
		add_prestige = -200
		random_list = {
			75 = {
				custom_tooltip = sailing.4001.c.failure
				increase_wounds_effect = { REASON = fight }
				hidden_effect = {
					random_list = { 
						50 = {
							add_character_flag = {
								flag = beffraen_poisoned
								weeks = 4
							}
							trigger_event = sailing.4004
						}
						50 = {
							trigger_event = sailing.4005
						}
					}
				}
			}
			25 = {
				custom_tooltip = sailing.4001.c.success
				trigger_event = sailing.4005
			}
		}		
	}	
}

#Eryn Vorn - Battle Aftermath
sailing.4002 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.4002.t
	desc = sailing.4002.desc
	theme = sailing_activity
	override_background = {
		reference = fp1_runestone	
	}
	left_portrait = {
		character = root
		animation = personality_vengeful
	}
	override_background = {
		reference = wilderness_forest_deep
	}

	option = { #Burial
		name = sailing.4002.a
		add_piety = 50
		trigger_event = sailing.4005
	}
	
	option = { #Time to go
		name = sailing.4002.b
		add_piety = -50
		add_dread = 10
		trigger_event = sailing.4005
	}	

}

#Eryn Vorn - Learning from the Beffraen
sailing.4003 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.4003.t
	desc = sailing.4003.desc
	theme = sailing_activity
	override_background = {
		reference = fp1_runestone	
	}
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:dru
		animation = personality_compassionate 
	}
	override_background = {
		reference = wilderness_forest_deep
	}

	# Histories
	option = {
		name = sailing.4003.a
		add_learning_skill = 1
	}
	
	# Poisons
	option = {
		name = sailing.4003.b
		add_character_modifier = {
			modifier = beffraen_poisons
			years = 10
		}
	}
	
	# Fishing
	option = {
		name = sailing.4003.c
		add_character_modifier = {
			modifier = budding_fisherman
			years = 10
		}
	}

	after = {
		trigger_event = sailing.4005
	}
}

#Eryn Vorn - Back to the ship - poisonous wound
sailing.4004 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.4004.t
	desc = sailing.4004.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	
	left_portrait = {
		character = root
		animation = pain
	}

	# Attempt treatment
	option = {
		name = sailing.4004.a
		add_character_flag = has_explored_eryn_vorn
		duel = {
			skill = learning
			value = 8
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 4
					min = -49
				}
				desc = sailing.4004.a.success
				add_learning_lifestyle_xp = medium_lifestyle_xp
				add_character_modifier = {
					modifier = poisoned_by_beffraen_treated
					years = 1
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -4
					min = -49
				}
				desc = sailing.4004.a.failure
				add_stress = 25
				add_character_modifier = {
					modifier = poisoned_by_beffraen
					years = 3 
				}
			}
		}
	}

	# I can handle it...
	option = {
		name = sailing.4004.b
		add_character_flag = has_explored_eryn_vorn
		add_character_modifier = {
			modifier = poisoned_by_beffraen
			years = 2
		}
	}
		
	after = {
		trigger_event = {
			id = sailing.9001
			days = 15
		}
	}
}

#Eryn Vorn - Back to the ship - no poisonous wound
sailing.4005 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.4005.t
	desc = sailing.4005.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	
	left_portrait = {
		character = root
		animation = personality_bold
	}

	option = {
		name = sailing.4005.a
		add_character_flag = has_explored_eryn_vorn
	}

	after = {
		trigger_event = {
			id = sailing.9001
			days = 15
		}
	}	
}

## The Icebay of Forochel
sailing.4010 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.4010.t
	desc = sailing.4010.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = personality_rational
	}
	override_background = {
		reference = wilderness_mountains
	}

	trigger = {
		NOT = { has_character_flag = has_explored_forochel }
		is_ai = no
	}

	# Trade weaponry for warmer clothes
	option = {
		name = sailing.4010.a
		custom_tooltip = sailing.4010.a.tt
		add_character_modifier = {
			modifier = weapons_for_furs
			years = 2
		}
		random_list = {
			80 = {
				custom_tooltip = sailing.4010.home.safe
				trigger_event = {
					id = sailing.4012
					days = 15
				}
			}
			20 = {
				custom_tooltip = sailing.4010.freezing
				trigger_event = {
					id = sailing.4011
					days = 15
				}
			}
		}
	}

	# One off trade
	option = {
		name = sailing.4010.b
		custom_tooltip = sailing.4010.b.tt
		add_character_modifier = {
			modifier = weapons_for_furs
			years = 2
		}
		duel = {
			skill = stewardship
			value = 10
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.4010.b.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.4000.toast.b.failure
					add_gold = medium_gold_value
					add_prestige = miniscule_prestige_gain
					add_stewardship_lifestyle_xp = medium_lifestyle_xp
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.4010.b.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.4000.toast.b.failure
					add_prestige = minor_prestige_loss
				}
			}
		}
		random_list = {
			50 = {
				custom_tooltip = sailing.4010.home.safe
				trigger_event = {
					id = sailing.4012
					days = 15
				}
			}
			50 = {
				custom_tooltip = sailing.4010.freezing
				trigger_event = {
					id = sailing.4011
					days = 15
				}
			}
		}
	}

	# Trade agreement
	option = {
		name = sailing.4010.c		
		custom_tooltip = sailing.4010.c.tt
		add_character_modifier = {
			modifier = weapons_for_furs
			years = 2
		}
		duel = {
			skill = stewardship
			value = 18
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.4010.c.success	
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.4000.toast.b.failure
					add_character_modifier = trade_agreement_with_lossoth
					add_gold = medium_gold_value
					add_prestige = minor_prestige_gain
					add_stewardship_lifestyle_perk_points = 1
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.4010.c.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.4000.toast.b.failure
					add_prestige = medium_prestige_loss
				}
			}
		}
		random_list = {
			50 = {
				custom_tooltip = sailing.4010.home.safe
				trigger_event = {
					id = sailing.4012
					days = 15
				}
			}
			50 = {
				custom_tooltip = sailing.4010.freezing
				trigger_event = {
					id = sailing.4011
					days = 15
				}
			}
		}
	}	
	
}

# Freezing
sailing.4011 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.4011.t
	desc = sailing.4011.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = sick
	}

	# Frostbite
	option = {
		name = sailing.4011.a
		add_character_modifier = {
			modifier = frostbite
			years = 10
		}
		add_stress = 40
		trigger_event = {
			id = sailing.4012
			days = 15
		}
	}
	
	# Fetch me an axe
	option = {
		name = sailing.4011.b
		trigger = {
			NOT = { has_trait = one_legged }
		}
		add_trait = one_legged
		add_stress = 100 
		trigger_event = {
			id = sailing.4012
			days = 15
		}
	}
	
}

# The Stranger and the Storm
sailing.4012 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.4012.t
	desc = sailing.4012.desc
	theme = sailing_activity
	override_background = {
		reference = ulmo	
	}
	left_portrait = {
		character = root
		animation = personality_compassionate
	}
	
	trigger = {
		NOT = { this = character:lineofcirdan } 
	}
	
	# Cirdan gives you assistance
	option = {
		name = sailing.4012.a
		trigger = {
			faith_is_good = yes
		}
		add_piety = 75
	}
	
	# We make our own way
	option = {
		name = sailing.4012.b
		add_prestige = 50
	}
	
	after = {
		trigger_event = {
			id = sailing.9001
			days = 15
		}
		add_character_flag = has_explored_forochel
	}
}

# Tol Fuin
sailing.4020 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.4020.t
	desc = sailing.4020.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = interested
	}
	trigger = {
		NOT = { has_character_flag = has_explored_tol_fuin }
		is_ai = no
	}
	option = { # Investigate
		name = sailing.4020.a
		custom_tooltip = sailing.4020.a.tt
		add_piety = 75
		trigger_event = {
			id = sailing.4021
			days = 10
		}
	}
	option = { # Fall back	
		name = sailing.4020.b 
		custom_tooltip = sailing.4020.b.tt
		add_stress = 25
		trigger_event = {
			id = sailing.4025
			days = 10
		}
	}
}

# An Abandoned Tower
sailing.4021 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.4021.t
	desc = sailing.4021.desc
	theme = sailing_activity
	override_background = {
		reference = eregion_ruins
	}
	left_portrait = {
		character = root
		animation = interested
	}
	right_portrait = {
		character = scope:first_mate
		animation = fear
	}

	option = { # Open the cursed chest
		name = sailing.4021.a
		custom_tooltip = sailing.4021.a.tt
		trigger_event = sailing.4022
	}
	option = { # Let's leave the dead in peace.
		name = sailing.4021.b 
		custom_tooltip = sailing.4021.b.tt
		add_piety = minor_piety_gain
		trigger_event = {
			id = sailing.4027
			days = 10
		}
	}
	
	option = { # How did they build all this?
		name = sailing.4021.c
		custom_tooltip = sailing.4021.c.tt
		add_stewardship_lifestyle_perk_points = 1
		trigger_event = {
			id = sailing.4027
			days = 10
		}
	}
}

# The Cursed Chest
sailing.4022 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.4022.t
	desc = sailing.4022.desc
	theme = sailing_activity
	override_background = {
		reference = dungeon
	}
	left_portrait = {
		character = root
		animation = personality_cynical
	}

	option = { # Take the armour
		name = sailing.4022.a
		custom_tooltip = sailing.4022.a.tt
		trigger_event = {
			id = sailing.4023
			days = 5
		}
	}
	option = { # I've gone too far already.
		name = sailing.4022.b 
		custom_tooltip = sailing.4022.b.tt
		add_piety = minor_piety_gain
		trigger_event = {
			id = sailing.4027
			days = 10
		}
	}
}

# Ill-Fated Deeds
sailing.4023 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.4023.t
	desc = sailing.4023.desc
	theme = dread
	override_background = {
		reference = wilderness_forest_deep
	}
	immediate = { 
		add_character_modifier = {
			modifier = cursed_from_beyond_the_grave
			years = 10
		}
	}
	left_portrait = {
		character = root
		animation = personality_vengeful
	}

	option = { # Damn roots!
		name = sailing.4023.a
		trigger_event = {
			id = sailing.4024
		}
	}
}

# Creatures in the Shadows
sailing.4024 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.4023.t
	desc = sailing.4023.desc
	theme = dread
	override_background = {
		reference = wilderness_forest_deep
	}
	left_portrait = {
		character = root
		animation = shock
	}

	option = { # It's... a curse...
		name = sailing.4024.a
		trigger_event = {
			id = sailing.4027
			days = 10
		}
	}
}

# Scouring the Shore
sailing.4025 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.4025.t
	desc = sailing.4025.desc
	theme = sailing_activity
	override_background = {
		reference = fp1_beached_longships
	}
	left_portrait = {
		character = root
		animation = interested
	}
	right_portrait = {
		character = scope:first_mate
		animation = happiness
	}

	option = { # Let's search
		name = sailing.4025.a
		custom_tooltip = sailing.4025.a.tt
		hidden_effect = {
 			send_interface_toast = {
 				title = sailing.4025.a.toast
 				left_icon = root
 				right_icon = scope:first_mate
				add_gold = medium_gold_value
 			}
		}
	}
	option = { # Give me that!
		name = sailing.4025.b 
		add_gold = minor_gold_value
		scope:first_mate = {
			add_opinion = {
				modifier = angry_opinion
				target = root
				opinion = -50
			}
		}
	}
	
	option = { # What a blessed find!
		name = sailing.4025.c
		add_piety = medium_piety_gain
	}
	
	after = {
		trigger_event = {
			id = sailing.4026
			days = 10
		}
	}
}

# A Giant Turtle
sailing.4026 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.4026.t
	desc = sailing.4026.desc
	theme = sailing_activity
	override_background = {
		reference = fp1_beached_longships
	}
	left_portrait = {
		character = root
		animation = personality_content
	}

	option = { # How cruel of you!
		name = sailing.4026.a
		trigger = { 
			is_elf = yes
			is_hobbit = yes
			has_trait = compassionate
			has_trait = generous
		}
		add_stress = -50
	}
	option = { # Let's eat it
		name = sailing.4026.b 
		scope:activity = {
			every_attending_character = {
				limit = {
					NOT = { this = scope:host }
				}
				add_opinion = {
					target = root
					modifier = pleased_opinion
					opinion = 20
				}
			}	
		}
		# if = { # TO DO: Add weight gain
			# limit = { has_character_modifier = malnourished_modifier }
			# remove_character_modifier = malnourished_modifier
		# }
	}
	
	option = { # Maybe I can keep him...
		name = sailing.4026.d
		custom_tooltip = sailing.4026.d.tt
 		duel = {
 			skill = prowess
 			value = high_skill_rating
 			50 = {
				# You succeed
 				desc = sailing.4026.d.toast.success
 				compare_modifier = {
 					value = scope:duel_value
 					multiplier = 3.5
 					min = -49
 				}
 				send_interface_toast = {
 					title = sailing.4026.d.toast.success
 					left_icon = root
 					add_character_modifier = pet_giant_turtle
 				}
 			}
 			50 = {
 				# You fail
 				desc = sailing.4026.d.toast.failure
 				compare_modifier = {
 					value = scope:duel_value
 					multiplier = -3.5
 					min = -49
 				}
 				send_interface_toast = {
 					title = sailing.4026.d.toast.failure
 					left_icon = root
 					increase_wounds_effect = { REASON = fight }
 				}
 			}
 		}
	}

	after = {
		trigger_event = {
			id = sailing.4027
			days = 10
		}
	}
}

# Homeward bound
sailing.4027 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.4027.t
	desc = sailing.4027.desc
	theme = sailing_activity
	override_background = {
		reference = fp1_beached_longships
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = scope:first_mate
		animation = happiness
	}
	immediate = { title:c_aeluin.title_province = { save_scope_as = aeluin_province } }
	option = { # Let's sail for home.
		name = sailing.4027.a
		custom_tooltip = sailing.4027.a.tt
		trigger_event = {
			id = sailing.9001
			days = 5 
		}
	}
	option = { # We could set up a colony here
		name = sailing.4027.b 
		custom_tooltip = sailing.4027.b.tt
		trigger = {
			is_landed = yes
			title:c_aeluin = {
				any_county_province = { has_holding_type = wastelands_holding }
			}
		}
		if = {
			limit = {
				scope:host.capital_province = {
					squared_distance = {
						target = scope:aeluin_province
						value < squared_distance_small
					}
				}
			}
			remove_short_term_gold = 100
		}
		else_if = {
			limit = {
				scope:host.capital_province = {
					AND = {
						squared_distance = {
							target = scope:aeluin_province
							value >= squared_distance_small
						}
						squared_distance = {
							target = scope:aeluin_province
							value < squared_distance_medium
						}
					}
				}
			}
			remove_short_term_gold = 200
		}
		else_if = {
			limit = {
				scope:host.capital_province = {
					AND = {
						squared_distance = {
							target = scope:aeluin_province
							value >= squared_distance_large						
						}
						squared_distance = {
							target = scope:aeluin_province
							value < squared_distance_almost_massive
						}
					}
				}
			}
			remove_short_term_gold = 400
		}
		else_if = {
			limit = {
				scope:host.capital_province = {
					AND = {
						squared_distance = {
							target = scope:aeluin_province
							value >= squared_distance_almost_massive						
						}
						squared_distance = {
							target = scope:aeluin_province
							value < squared_distance_massive
						}
					}
				}
			}
			remove_short_term_gold = 600
		}
		else_if = {
			limit = {
				scope:host.capital_province = {
					AND = {
						squared_distance = {
							target = scope:aeluin_province
							value >= squared_distance_massive						
						}
						squared_distance = {
							target = scope:aeluin_province
							value < squared_distance_monstrous
						}
					}
				}
			}
			remove_short_term_gold = 800
		}
		else_if = {
			limit = {
				scope:host.capital_province = {
					squared_distance = {
						target = scope:aeluin_province
						value > squared_distance_monstrous
					}
				}
			}
			remove_short_term_gold = 1000
		}
		else = {
			remove_short_term_gold = massive_gold_value
		}
		hidden_effect = {
			get_title = title:c_aeluin
			title:c_aeluin = {
				title_province = { set_holding_type = settlement_holding }
				set_county_culture = root.culture
				set_county_faith = root.faith
				generate_coa = yes
			}
		}
		trigger_event = {
			id = sailing.9002
			days = 5 
		}
	}
	
	after = {
		add_character_flag = has_explored_tol_fuin
	}
}

# All lands explored - what still awaits?
sailing.4999 = { # Fallback event if all explorations have been completed
	type = activity_event
	content_source = realms_dlc
	title = sailing.4999.t
	desc = sailing.4999.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}

	# What further adventures await us?
	option = {
		name = sailing.4999.a
		add_prestige = 100
		custom_tooltip = sailing.4999.a.tt
	}
	
	after = {
		trigger_event = {
			id = sailing.9001
			days = 15
		}
	}
}

############################
## More Coast Exploration
## 5000-7999
## by ispanets
############################
# 5001 - The White Hills
# 6001 - Ras Morthil and Druwaith Laur

sailing.5000 = { # Introduction to the White Hills (1/3): Gulf of Lune
	type = activity_event
	content_source = realms_dlc
	title = sailing.5000.t
	desc = sailing.5000.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	override_background = {
		reference = docks_elven
	}
	left_portrait = {
		character = root
		animation = happiness
	}	
	right_portrait = {
		character = scope:first_mate
		animation = happiness
	}
	
	#Temporary trigger, until we have reworked this one for Elves
	trigger = { 
		is_elf = no 
		NOT = { has_character_flag = has_explored_lhune_gulf }
	}
	
	option = {
		name = sailing.5000.a
	}
	
	after = {
		trigger_event = {
			id = sailing.5001
			days = 15
		}
	}
}

sailing.5001 = { # The White Hills 2/3: Elves encounter near White Towers http://tolkiengateway.net/wiki/Tower_Hills
	type = activity_event
	content_source = realms_dlc
	title = sailing.5001.t
	desc = sailing.5001.desc
	theme = sailing_activity
	override_background = {
		reference = eregion_ruins	
	}
	left_portrait = {
		character = root
		animation = personality_vengeful
	}		
	right_portrait = {
		character = scope:first_mate
		animation = worry
	}
	
	option = { # Encounter with the Elves solved with diplomacy
		name = sailing.5001.a
		trigger = {
			NOR = {
				has_character_flag = diplomacy_at_whitetowers
			}
		}
		duel = {
			skill = diplomacy
			value = very_high_skill_rating
			50 = {		
				compare_modifier = {					
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.5001.a.success

				send_interface_toast = {
					left_icon = ROOT
					title = sailing.5001.toast.a.success	
					add_prestige = medium_prestige_gain
					
					add_character_flag = {
						flag = diplomacy_at_whitetowers
						years = 3
					}		
					trigger_event = {
						id = sailing.5002
						days = 15
					}
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}						
				desc = sailing.5001.a.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.5001.toast.a.failure
					add_prestige = minor_prestige_loss					
					add_character_flag = {
						flag = diplomacy_at_whitetowers
						years = 3
					}
					trigger_event = { # Try sneaking!
						id = sailing.5003
						days = 15
					}
				}
			}
		}
	}
	
	option = { # Trying to sneak in
		name = sailing.5001.b
		trigger = {
			NOR = {
				has_character_flag = sneaking_to_whitetowers
			}
		}
		duel = {
			skill = intrigue
			value = high_skill_rating
			50 = {		
				compare_modifier = {					
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.5001.b.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.5001.toast.b.success						
					add_character_flag = {
						flag = sneaking_to_whitetowers
						years = 3
					}
					trigger_event = {
						id = sailing.5004
						days = 15
					}
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.5001.b.failure			
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.5001.toast.b.failure
					add_dread = minor_dread_loss
					add_prestige = minor_prestige_loss	
					add_character_flag = {
						flag = sneaking_to_whitetowers
						years = 3
					}
					trigger_event = {
						id = sailing.5005
						days = 15
					}
				}
			}
		}
	}	
	
	option = { # Go back home without experience
		name = sailing.6010.a
		trigger_event = {
			id = sailing.9002
			days = 15
		}
	}
}

sailing.5002 = { # The White Hills 2/3: Elves encounter near White Towers http://tolkiengateway.net/wiki/Tower_Hills
	type = activity_event
	content_source = realms_dlc
	title = sailing.5002.t
	desc = sailing.5002.desc
	theme = sailing_activity
	override_background = {
		reference = eregion_ruins	
	}
	left_portrait = {
		character = root
		animation = beg
	}	
	option = {
		name = sailing.5002.a
		trigger_event = {			
			id = sailing.5006
			days = 15
		}
	}
}

sailing.5003 = { # The White Hills 2/3: Elves encounter near White Towers http://tolkiengateway.net/wiki/Tower_Hills
	type = activity_event
	content_source = realms_dlc
	title = sailing.5003.t
	desc = sailing.5003.desc
	theme = sailing_activity
	override_background = {
		reference = eregion_ruins	
	}
	left_portrait = {
		character = root
		animation = anger
	}	
	option = {
		name = sailing.5003.a
		trigger_event = {			
			id = sailing.5001
			days = 15
		}
	}
}

sailing.5004 = { # The White Hills 2/3: Elves encounter near White Towers http://tolkiengateway.net/wiki/Tower_Hills
	type = activity_event
	content_source = realms_dlc
	title = sailing.5004.t
	desc = sailing.5004.desc
	theme = sailing_activity
	override_background = {
		reference = eregion_ruins	
	}
	left_portrait = {
		character = root
		animation = personality_callous
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = personality_callous
	}
	option = {
		name = sailing.5004.a
		trigger_event = {			
			id = sailing.5006
			days = 15
		}
	}
}

sailing.5005 = { # The White Hills 2/3: Elves encounter near White Towers http://tolkiengateway.net/wiki/Tower_Hills
	type = activity_event
	content_source = realms_dlc
	title = sailing.5005.t
	desc = sailing.5005.desc
	theme = sailing_activity
	override_background = {
		reference = eregion_ruins	
	}
	left_portrait = {
		character = root
		animation = anger
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = shame
	}
	option = {
		name = sailing.5003.a
		trigger_event = {			
			id = sailing.5001
			days = 15
		}
	}
}

sailing.5006 = { # The White Hills 3/3: The White Towers
	type = activity_event
	content_source = realms_dlc
	title = sailing.5006.t
	desc = sailing.5006.desc
	theme = sailing_activity
	override_background = {
		reference = throne_room_noldor	
	}
	left_portrait = {
		character = root
		animation = ecstasy
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = shock
	}
	
	option = { # See the Sea from above
		name = sailing.5006.a
		send_interface_toast = {
			left_icon = ROOT
			title = sailing.5006.toast.a.success			
			add_stress = major_stress_loss
			trigger_event = {
				id = sailing.5007
				days = 15
			}
		}
	}
	
	option = { # Glance into the Palantir http://tolkiengateway.net/wiki/Tower_of_Avallon%C3%AB
		name = sailing.5006.b
		send_interface_toast = {
			left_icon = ROOT
			title = sailing.5006.toast.b.success
			add_learning_skill = 1	
			add_stress = major_stress_impact_gain
			add_learning_lifestyle_xp = 150
			trigger_event = {
				id = sailing.5008
				days = 15
			}
		}
	}
}

sailing.5007 = { # Coming back home released but without experience
	type = activity_event
	content_source = realms_dlc
	title = sailing.5007.t
	desc = sailing.5007.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	override_background = {
		reference = docks_elven
	}
	left_portrait = {
		character = root
		animation = marshal
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = ecstasy
	}
	option = {
		name = sailing.6010.a
		trigger_event = {			
			id = sailing.9002
			days = 15
		}
		add_character_flag = has_explored_lhune_gulf
	}
}

sailing.5008 = { # Coming back home stressed but wiser after the Palantir
	type = activity_event
	content_source = realms_dlc
	title = sailing.5008.t
	desc = sailing.5008.desc
	theme = sailing_activity
	override_background = {
		reference = throne_room_noldor	
	}	
	left_portrait = {
		character = root
		animation = paranoia
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = grief
	}
	option = {
		name = sailing.6010.a
		trigger_event = {			
			id = sailing.9001
			days = 15
		}
		add_character_flag = has_explored_lhune_gulf
	}
}

sailing.6001 = { # Ras Morthil and Druwaith Laur 1/3: Ras Morthil
	type = activity_event
	content_source = realms_dlc
	title = sailing.6001.t
	desc = sailing.6001.desc
	theme = sailing_activity
	override_background = {
		reference = wilderness_mountains	
	}
		
	left_portrait = {
		character = root
		animation = personality_bold
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = scheme
	}
	trigger = {
		NOT = { has_character_flag = explored_druwaith_iaur }
	}
	option = { # Observe the Beacon of Ras Morthil https://lotr.fandom.com/wiki/Andrast 
		name = sailing.6001.a
		send_interface_toast = {
			left_icon = ROOT
			title = sailing.6001.toast.a.success			
			add_stress = minor_stress_loss
		}
		trigger_event = {
			id = sailing.6002
			days = 15
		}
	}
	
	option = { # Light the beacon!
		name = sailing.6001.b
		duel = {
			skill = prowess
			value = average_skill_rating
			50 = {		
				compare_modifier = {					
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.6001.b.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.6001.toast.b.success										
					add_unpressed_claim = title:c_ulond
					add_prestige = minor_prestige_gain
					trigger_event = {
						id = sailing.6003
						days = 15
					}
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.6001.b.failure				
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.6001.toast.b.failure
					add_prestige = minor_prestige_loss
					trigger_event = { 
						id = sailing.6004
						days = 15
					}
				}
			}
		}
	}
	
	option = { # Sabotage the Beacon (Only Umbar)
		name = sailing.6001.c
		trigger = {
				# culture = { has_cultural_pillar = heritage_northern_adunaic }
				can_raid_across_water = yes
		}
		send_interface_toast = {
			left_icon = ROOT
			title = sailing.6001.toast.c.success			
			add_dread = minor_dread_gain
			add_gold = minor_gold_value
		}
		trigger_event = {
			id = sailing.6005
			days = 15
		}
	}
	
	
	option = { # Continue sailing
		name = sailing.8001.d
		trigger_event = {
			id = sailing.6006
			days = 15
		}
	}
}

sailing.6002 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.6002.t
	desc = sailing.6002.desc
	theme = sailing_activity
	override_background = {
		reference = wilderness_mountains	
	}
	left_portrait = {
		character = root
		animation = admiration
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = admiration
	}
	option = {
		name = sailing.6002.a
		trigger_event = {			
			id = sailing.6006
			days = 15
		}
	}
}

sailing.6003 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.6003.t
	desc = sailing.6003.desc
	theme = sailing_activity
	override_background = {
		reference = wilderness_mountains	
	}
	
	left_portrait = {
		character = root
		animation = paranoia
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = worry
	}
	option = {
		name = sailing.6003.a
		trigger_event = {			
			id = sailing.6006
			days = 15
		}
	}
}

sailing.6004 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.6004.t
	desc = sailing.6004.desc
	theme = sailing_activity
	override_background = {
		reference = wilderness_mountains	
	}
	
	left_portrait = {
		character = root
		animation = disapproval
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = disapproval
	}
	option = {
		name = sailing.6004.a
		trigger_event = {			
			id = sailing.6006
			days = 15
		}
	}
}

sailing.6005 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.6005.t
	desc = sailing.6005.desc
	theme = sailing_activity
	override_background = {
		reference = wilderness_mountains	
	}
	left_portrait = {
		character = root
		animation = rage
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = rage
	}
	option = {
		name = sailing.6005.a
		trigger_event = {			
			id = sailing.6006
			days = 15
		}
	}
}
		
sailing.6006 = { # Ras Morthil and Druwaith Laur 2/3: Druwaith Laur
	type = activity_event
	content_source = realms_dlc
	title = sailing.6006.t
	desc = sailing.6006.desc
	theme = sailing_activity
	override_background = {
		reference = fp1_runestone	
	}
	
	left_portrait = {
		character = root
		animation = shock
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = shock
	}
	
	option = { # Investigate the stones
		name = sailing.6006.a
		trigger = {
			NOR = {
				has_character_flag = druwaith_runes_investigator
			}
		}
		duel = {
			skill = learning
			value = high_skill_rating
			50 = {		
				compare_modifier = {					
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.6006.a.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.6006.toast.a.success
					add_learning_skill = 1
					trigger_event = {
						id = sailing.6007
						days = 15
					}
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.6006.a.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.6006.toast.a.failure					
					add_stress = minor_stress_gain
					trigger_event = {
						id = sailing.6008
						days = 15
					}
				}
			}
		}
		add_character_flag = druwaith_runes_investigator
	}
	
	option = { # Look in the caves for signs of civilization
		name = sailing.6006.b
		duel = {
			skill = intrigue
			value = high_skill_rating
			50 = {		
				compare_modifier = {					
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.6006.b.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.6006.toast.b.success					
					trigger_event = { # Woses found!
						id = sailing.6009
						days = 15
					}
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.6006.b.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.6006.toast.b.failure
					add_stress = minor_stress_gain											
					trigger_event = { # Go back home without experience
						id = sailing.6010
						days = 15
					}
				}
			}
		}
	}

	
	option = { # Go home
		name = sailing.6010.a
		trigger_event = {
			id = sailing.9002
			days = 15
		}
	}
}

sailing.6007 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.6007.t
	desc = sailing.6007.desc
	theme = sailing_activity
	override_background = {
		reference = fp1_runestone	
	}
	
	left_portrait = {
		character = root
		animation = personality_rational
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = admiration
	}
	option = {
		name = sailing.6007.a
		trigger_event = {			
			id = sailing.6011
			days = 15
		}
	}
}

sailing.6008 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.6008.t
	desc = sailing.6008.desc
	theme = sailing_activity
	override_background = {
		reference = fp1_runestone	
	}
	
	left_portrait = {
		character = root
		animation = disbelief
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = shame
	}
	option = {
		name = sailing.6008.a
		trigger_event = {			
			id = sailing.6006
			days = 15
		}
	}
}

sailing.6009 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.6009.t
	desc = sailing.6009.desc
	theme = sailing_activity
	override_background = {
		reference = fp1_runestone	
	}
	
	left_portrait = {
		character = root
		animation = personality_greedy
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = worry
	}
	option = {
		name = sailing.6009.a
		trigger_event = {			
			id = sailing.6011
			days = 15
		}
	}
}

sailing.6010 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.6010.t
	desc = sailing.6010.desc
	theme = sailing_activity
	override_background = {
		reference = fp1_runestone	
	}
	
	left_portrait = {
		character = root
		animation = personality_rational
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = disapproval
	}
	option = {
		name = sailing.6010.a
		trigger_event = { # Come back without experience
			id = sailing.9002
			days = 15
		}
		add_character_flag = explored_druwaith_iaur
	}
}

sailing.6011 = { # Ras Morthil and Druwaith Laur 3/3: Woses!
	type = activity_event
	content_source = realms_dlc
	title = sailing.6011.t
	desc = sailing.6011.desc
	theme = sailing_activity
	override_background = {
		reference = fp1_runestone	
	}
	
	left_portrait = {
		character = root
		animation = rage
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = shock
	}
	
	option = { # Attack!
		name = sailing.6011.a
		duel = {
			skill = martial
			value = high_skill_rating
			50 = {		
				compare_modifier = {					
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.6011.a.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.6011.toast.a.success					
					add_martial_lifestyle_perk_points = 1
					trigger_event = {
						id = sailing.6012
						days = 15
					}
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.6011.a.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.6011.toast.a.failure
					add_character_modifier = {
						modifier = heavily_poisoned_by_woses
						years = 5
					}
					trigger_event = { # Come back without experience
						id = sailing.6013
						days = 15
					}
				}
			}
		}
	}
	
	option = { # Retreat!
		name = sailing.6011.b
		duel = {
			skill = intrigue
			value = average_skill_rating
			50 = {		
				compare_modifier = {					
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.6011.b.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.6011.toast.b.success						
					trigger_event = { # Come back with experience
						id = sailing.6014
						days = 15
					}
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.6011.b.failure
				add_character_modifier = {
					modifier = poisoned_by_woses
					years = 2
				}
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.6011.toast.b.failure
											
					trigger_event = { # Go back home without experience
						id = sailing.6015
						days = 15
					}
				}
			}
		}
	}
		
	option = { # Diplomacy!
		name = sailing.6011.c
		duel = {
			skill = diplomacy
			value = high_skill_rating
			50 = {		
				compare_modifier = {					
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.6011.c.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.6011.toast.c.success
					capital_province = {
						add_province_modifier = {
							modifier = levied_woses
							years = 5
						}
					}	
					trigger_event = {
						id = sailing.6016
						days = 15
					}
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.6011.c.failure				
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.6011.toast.c.failure
					add_stress = minor_stress_loss
					trigger_event = { # Go back home without experience
						id = sailing.6017
						days = 15
					}
				}
			}
		}
	}
}

sailing.6012 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.6012.t
	desc = sailing.6012.desc
	theme = sailing_activity
	override_background = {
		reference = fp1_runestone	
	}
	
	left_portrait = {
		character = root
		animation = marshal
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = ectasy
	}
	option = {
		name = sailing.6012.a
		trigger_event = {
			id = sailing.9001
			days = 15
		}
		add_character_flag = explored_druwaith_iaur
	}
}

sailing.6013 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.6013.t
	desc = sailing.6013.desc
	theme = sailing_activity
	override_background = {
		reference = fp1_runestone	
	}
	
	left_portrait = {
		character = root
		animation = sick
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = sadness
	}
	option = {
		name = sailing.6013.a
		trigger_event = {
			id = sailing.9002
			days = 15
		}
		add_character_flag = explored_druwaith_iaur
	}
}

sailing.6014 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.6014.t
	desc = sailing.6014.desc
	theme = sailing_activity
	override_background = {
		reference = fp1_runestone	
	}
	
	left_portrait = {
		character = root
		animation = worry
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = worry
	}
	option = {
		name = sailing.6014.a
		trigger_event = {
			id = sailing.9001
			days = 15
		}
		add_character_flag = explored_druwaith_iaur
	}
}

sailing.6015 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.6015.t
	desc = sailing.6015.desc
	theme = sailing_activity
	override_background = {
		reference = fp1_runestone	
	}
	
	left_portrait = {
		character = root
		animation = sick
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = worry
	}
	option = {
		name = sailing.6015.a
		trigger_event = {
			id = sailing.9002
			days = 15
		}
		add_character_flag = explored_druwaith_iaur
	}
}

sailing.6016 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.6016.t
	desc = sailing.6016.desc
	theme = sailing_activity
	override_background = {
		reference = fp1_runestone	
	}
	
	left_portrait = {
		character = root
		animation = personality_honorable
	}
		
	option = {
		name = sailing.6016.a
		trigger_event = {
			id = sailing.9001
			days = 15
		}
		add_character_flag = explored_druwaith_iaur
	}
}

sailing.6017 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.6017.t
	desc = sailing.6017.desc
	theme = sailing_activity
	override_background = {
		reference = fp1_runestone	
	}
	
	left_portrait = {
		character = root
		animation = disapproval
	}
		
	option = {
		name = sailing.6017.a
		trigger_event = {
			id = sailing.9002
			days = 15
		}
		add_character_flag = explored_druwaith_iaur
	}
}

############
## BAY OF TULWANG ~ by Aerien
############

# Sail into the Bay
sailing.6100 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.6100.t
	desc = sailing.6100.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	trigger = {
		NOT = { has_character_flag = explored_tulwang_bay }
	}
	left_portrait = {
		character = root
		animation = interested
	}
	center_portrait = {
		character = scope:first_mate
		animation = throne_room_conversation_1
	}
	right_portrait = {
		character = scope:crew_member
		animation = throne_room_conversation_4
	}
	
	immediate = {
		scope:activity ={
			random_attending_character = { 
				limit = {
					NOT = { this = scope:host }
					NOT = { this = scope:first_mate }
				}
				save_scope_as = crew_member
			}
		}
	}
		
	option = { # And into the bay we go!
		name = sailing.6100.a
		trigger_event = {
			id = sailing.6101
			days = 10
		}
	}
	
	option =  { # On second thought, let's turn back.
		name = sailing.6100.b
		custom_tooltip = sailing.6100.b.tt
		trigger_event = {
			id = sailing.9002
			days = 10
		}
	}
}

# Land at one of the smaller ports of Bellakar
sailing.6101 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.6101.t
	desc = sailing.6101.desc
	theme = sailing_activity
	override_background = {
		reference = docks_adunai
	}
	
	left_portrait = {
		character = root
		animation = interested
	}
	center_portrait = {
		character = scope:first_mate
		animation = steward
	}
	right_portrait = {
		character = scope:bellakarean_harbourmaster
		animation = personality_callous
	}
	immediate = {
		create_character = {
			location = root.location
			template = servant_character
			gender = male
			age = 45
			culture = culture:bellakaze
			faith = faith:faith_infinite_wisdom
			save_scope_as = bellakarean_harbourmaster
		}
	}
	option = { # Buy some goods, sell some cargo
		name = sailing.6101.a
		duel = {
 			skill = stewardship
 			target = scope:bellakarean_harbourmaster
 			60 = {
				# You make some good deals
 				desc = sailing.6101.a.success
 				compare_modifier = {
 					value = scope:duel_value
 					multiplier = 3.5
 					min = -49
 				}
 				send_interface_toast = {
 					title = sailing.6101.a.success
 					left_icon = root
 					right_icon = scope:bellakarean_harbourmaster
 					add_short_term_gold = medium_gold_value
 				}
 			}
 			40 = {
 				# You fail to turn a big profit
 				desc = sailing.6101.a.failure
 				compare_modifier = {
 					value = scope:duel_value
 					multiplier = -3.5
 					min = -49
 				}
 				send_interface_toast = {
 					title = sailing.6101.a.failure
 					left_icon = root
 					right_icon = scope:bellakarean_harbourmaster
 				}
 				remove_short_term_gold = minor_gold_value
 			}
		}
	}
	
	option = { # Pay the harbour-master for insight on the bay of Tulwang
		name = sailing.6101.b
		custom_tooltip = sailing.6101.b.tt
		remove_short_term_gold = minor_gold_value
		# Mariner skill
		if = {
			limit = { has_trait = lifestyle_mariner }
			scope:activity = {
				add_activity_log_entry = {
					key = sailing_completed_log
					tags = { good }
					# this line below adds the entry to the Effects section of the conclusion UI
					show_in_conclusion = yes
					character = root
				
					root = {
						add_trait_xp = {
							trait = lifestyle_mariner
							value = 5
						}
					}
				}
			}
		}	
		else = {
			scope:activity = {
				add_activity_log_entry = {
					key = sailing_completed_log
					tags = { good }
					# this line below adds the entry to the Effects section of the conclusion UI
					show_in_conclusion = yes
					character = root
					
					root = { add_trait = lifestyle_mariner }
				}
			}
		}
	}
	
	option = { # Simply enjoy the nice atmosphere of the port
		name = sailing.6101.c 
		add_stress = -30
	}
	
	after = {
		trigger_event = {
			id = sailing.6102
			days = 10 
		}
	}
}
	
# The stowaway
sailing.6102 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.6102.t
	desc = sailing.6102.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	
	left_portrait = {
		character = root
		animation = personality_rational
	}
	center_portrait = {
		character = scope:first_mate
		animation = anger
	}
	right_portrait = {
		character = scope:bellakaze_stowaway
		animation = throne_room_conversation_1
		#camera = camera_body_left
	}
	
	immediate = {
		random_list = {
			30 = {
				create_character = {
					location = root.location
					template = servant_character
					gender_female_chance = 50
					age = 12
					trait = blood_of_numenor_1
					culture = culture:bellakaze
					faith = faith:faith_infinite_wisdom
					save_scope_as = bellakaze_stowaway
				}
			}
			70 = {
				create_character = {
					location = root.location
					template = servant_character
					gender_female_chance = 50
					age = 26
					trait = lifestyle_mariner
					culture = culture:bellakaze
					faith = faith:faith_infinite_wisdom
					save_scope_as = bellakaze_stowaway
				}
			}
		}
	}
	
	option = { # Eh, fine, you can stay.
		name = sailing.6102.a
		add_courtier = scope:bellakaze_stowaway
		scope:bellakaze_stowaway = {
			add_to_activity = scope:activity 
		}
		stress_impact = {
			generous = medium_stress_impact_loss
			gregarious = minor_stress_impact_loss
			compassionate = medium_stress_impact_loss
			greedy = minor_stress_impact_gain
			sadistic = medium_stress_impact_gain
		}
	}
	
	option = { # What? Throw him over board!
		name = sailing.6102.b
		scope:bellakaze_stowaway ={
			death = { death_reason = death_walked_the_plank }
		}
		stress_impact = {
			generous = medium_stress_impact_gain
			gregarious = minor_stress_impact_gain
			compassionate = medium_stress_impact_gain
			greedy = minor_stress_impact_loss
			sadistic = medium_stress_impact_loss
		}
	}
	
	option = { # You can stay aboard until we reach the next harbour.
		name = sailing.6102.c
		add_prestige = miniscule_prestige_gain
		hidden_effect = { scope:bellakaze_stowaway = { silent_disappearance_effect = yes } }
	}
	
	after = {
		trigger_event = {
			id = sailing.6103
			days = 10 
		}
	}
}

# Reaching Tulwang	
sailing.6103 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.6103.t
	desc = sailing.6103.desc
	theme = sailing_activity
	override_background = {
		reference = docks_adunai
	}
	
	left_portrait = {
		character = root
		animation = personality_forgiving
	}
	center_portrait = {
		character = scope:first_mate
		animation = throne_room_conversation_2
	}
	right_portrait = {
		character = scope:tuladen_harbourmaster
		animation = throne_room_conversation_1
		#camera = camera_body_left
	}
	immediate = {
		create_character = {
			location = root.location
			template = servant_character
			gender = male
			age = 40
			culture = culture:tuladen
			faith = faith:faith_tulwang
			save_scope_as = tuladen_harbourmaster
		}
		create_character = {
			location = root.location
			template = new_warrior_character
			gender = male
			age = 24
			trait = lifestyle_mariner
			trait = reaver
			culture = culture:tuladen
			faith = faith:faith_tulwang
			save_scope_as = tuladen_corsair
		}
	}
	
	option = { # Buy some goods, sell some cargo
		name = sailing.6103.a
		duel = {
 			skill = intrigue
 			target = scope:tuladen_harbourmaster
 			60 = {
				# You make some good deals
 				desc = sailing.6103.a.success
 				compare_modifier = {
 					value = scope:duel_value
 					multiplier = 3.5
 					min = -49
 				}
 				send_interface_toast = {
 					title = sailing.6103.a.success
 					left_icon = root
 					right_icon = scope:tuladen_harbourmaster
 					add_short_term_gold = medium_gold_value
 				}
 			}
 			40 = {
 				# You fail to turn a big profit
 				desc = sailing.6101.a.failure
 				compare_modifier = {
 					value = scope:duel_value
 					multiplier = -3.5
 					min = -49
 				}
 				send_interface_toast = {
 					title = sailing.6101.a.failure
 					left_icon = root
 					right_icon = scope:tuladen_harbourmaster
 				}
 				remove_short_term_gold = minor_gold_value
 			}
		}
	}
	
	option = { # Recruit a skilled corsair to guide you in the bay
		name = sailing.6103.b
		remove_short_term_gold = 100
		add_courtier = scope:tuladen_corsair
		scope:tuladen_corsair = {
			add_to_activity = scope:activity 
		}
	}

	option = { # Enjoy a bit of rest in the harbour
		name = sailing.6103.c 
		add_stress = -30
	}
	
	after = {
		trigger_event = {
			id = sailing.6104
			days = 10 
		}
	}
}

# Merchant ship encounter (End)
sailing.6104 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.6104.t
	desc = sailing.6104.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	
	left_portrait = {
		character = root
		animation = survey
	}

	right_portrait = {
		character = scope:first_mate
		animation = happiness
	}
	
	option = { # Race them to the next port!
		name = sailing.6104.a
		duel = {
 			skill = martial
 			value = medium_skill_rating
 			60 = {
				# You win the friendly race
 				desc = sailing.6104.a.success
 				compare_modifier = {
 					value = scope:duel_value
 					multiplier = 3.5
 					min = -49
 				}
 				send_interface_toast = {
 					title = sailing.6104.a.success
 					left_icon = root
 					add_prestige = medium_prestige_gain
 				}
				trigger_event = {
					id = sailing.9001
					days = 15
				}
				# Mariner skill
				if = {
					limit = { has_trait = lifestyle_mariner }
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = {
								add_trait_xp = {
									trait = lifestyle_mariner
									value = 5
								}
							}
						}
					}
				}	
				else = {
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = { add_trait = lifestyle_mariner }
						}
					}
				}
 			}
 			40 = {
 				# You lose the race
 				desc = sailing.6104.a.failure
 				compare_modifier = {
 					value = scope:duel_value
 					multiplier = -3.5
 					min = -49
 				}
 				send_interface_toast = {
 					title = sailing.6104.a.failure
 					left_icon = root
					add_prestige = medium_prestige_loss
 				}
				trigger_event = {
					id = sailing.9002
					days = 15
				}
 			}
		}
	}
	
	option = { # Let's just head home.
		name = sailing.6104.b 
		custom_tooltip = sailing.6104.b.tt
		hidden_effect = {
			random_list = {
				50 = {
					trigger_event = {
						id = sailing.9002
						days = 15
					}
				}
				50 = {
					trigger_event = {
						id = sailing.9001
						days = 15
					}
				}
			}
		}
	}
	
	after = {
		add_character_flag = explored_tulwang_bay
	}
}
	
############################
## River Sailing
## 8000-8999
## by ispanets
############################

# Anduin 
# 8001 - Ethir Anduin (Anduin Delta)
# 8002 - Pelargir
# 8003 - Osgiliath
# 8004 - Cair Andros
# 8005 - Nindalf (Wetwang)
# 8006 - Falls of Rauros

sailing.8001 = { # Mouths of Anduin and The Fisher-folk of Ethir http://tolkiengateway.net/wiki/Ethir_Anduin
	type = activity_event
	content_source = realms_dlc
	title = sailing.8001.t
	desc = sailing.8001.desc
	theme = sailing_activity
	override_background = {
		reference = on_river
	}
	
	left_portrait = {
		character = root
		animation = personality_bold
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = personality_callous
	}
	
	option = { # Sea Plundering of Fishermen boats. Gold and some fish (https://tolkienlibrary.com/press/images/FishesofMiddleEarth2008Willink.pdf)
		name = sailing.8001.a
		trigger = {	
				# culture = { has_cultural_pillar = heritage_northern_adunaic }
				can_raid_across_water = yes
		}
		reverse_add_opinion = {
			target = title:c_ethir_anduin.holder
			modifier = raided_me_opinion
		}
		duel = {
			skill = martial
			value = mediocre_skill_rating
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.8001.a.success	
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8001.toast.a.success
					add_gold = tiny_gold_value					
				
					trigger_event = {
						id = sailing.8002
						days = 15
					}
				}
				# Mariner skill
				if = {
					limit = { has_trait = lifestyle_mariner }
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = {
								add_trait_xp = {
									trait = lifestyle_mariner
									value = 5
								}
							}
						}
					}
				}	
				else = {
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = { add_trait = lifestyle_mariner }
						}
					}
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.8001.a.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8001.toast.a.failure
					add_dread = -2 # minor_dread_loss is too big
					trigger_event = {
						id = sailing.8003
						days = 15
					}
				}
			}
		}
	}
	
	option = { # Bribe fishermen levies, inspired by the Fishermen-folk levied to fight by Gondor http://tolkiengateway.net/wiki/Ethir_Anduin
		name = sailing.8001.b
		if = {
			limit = {
				has_trait_xp = {
					trait = lifestyle_mariner
					value >= 100
				}
			}
			remove_short_term_gold = 25
		}
		else_if = {
			limit = {
				has_trait_xp = {
					trait = lifestyle_mariner
					value >= 50
					value < 100
				}
			}
			remove_short_term_gold = 50
		}
		else_if = {
			limit = {
				has_trait_xp = {
					trait = lifestyle_mariner
					value < 50
				}
			}
			remove_short_term_gold = 7
		}
		else = {
			remove_short_term_gold = 100
		}
		
		send_interface_toast = {
			left_icon = ROOT
			title = sailing.8001.toast.b.success
			capital_province = {
				add_province_modifier = {
					modifier = levied_anduin_fishermen
					years = 5
				}
			}
			trigger_event = {
				id = sailing.8004
				days = 15
			}
		}
		
	}
	
	option = { # Fishermen provides with secrets from far away lands
		name = sailing.8001.c
		duel = {
			skill = intrigue
			value = medium_skill_rating
			50 = {		
				compare_modifier = {					
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.8001.c.success	
				# add_intrigue_skill = 1
				random_ruler = {
					limit = {
						NOR = {
							this = root
							this = root.liege_or_court_owner
							this = root.top_liege
						}
						in_diplomatic_range = root
					}
					save_scope_as = secret_ruler
				}
				random_list = {
					# Deviant
					100 = {
						trigger = {
							scope:secret_ruler = {				
								NOR = {
									has_trait = celibate
									has_trait = chaste
									any_secret = { secret_type = secret_deviant }
									has_trait = deviant
								}
							}
						}
						modifier = {
							scope:secret_ruler = {
								has_trait = lustful
							}
							add = 50
						}
						scope:secret_ruler = {
							give_deviant_secret_or_trait_effect = yes
						}
					}
					# Homosexual
					100 = {
						trigger = {
							scope:secret_ruler = {
								is_male = yes
								OR = {
									has_sexuality = homosexual
									has_sexuality = bisexual
								}
								NOT = { has_trait = celibate }
								NOR = {
									any_secret = { secret_type = secret_homosexual }
									has_trait = sodomite
								}
							}
						}
						modifier = {
							scope:secret_ruler = {
								has_trait = chaste
							}
							add = -50
						}
						scope:secret_ruler = {
							give_homosexual_secret_or_nothing_effect = yes
						}
					}
					# Cannibal
					100 = {
						trigger = {
							scope:secret_ruler = {
								OR = {
									has_trait = lunatic
									has_trait = possessed
									ai_compassion <= high_negative_ai_value
								}
								NOR = {
									any_secret = { secret_type = secret_cannibal }
									has_trait = cannibal
								}
							}
						}
						ai_compassion_target_modifier = { VALUE = -50 }
						scope:secret_ruler = {
							give_cannibal_secret_or_trait_effect = yes
						}
					}
					# Non-believer
					100 = {
						trigger = {
							scope:secret_ruler = {
								NOR = {
									has_trait = zealous
									any_secret = { secret_type = secret_non_believer }
									has_character_modifier = known_non_believer
								}
							}
						}
						ai_zeal_target_modifier = { VALUE = -50 }
						scope:secret_ruler = {
							give_non_believer_secret_effect = yes
						}
					}
					# Witch
					100 = {
						trigger = {
							scope:secret_ruler = {
								NOR = {
									has_trait = zealous
									any_secret = { secret_type = secret_witch }
									has_trait = witch
								}
							}
						}
						modifier = {
							scope:secret_ruler = {
								OR = {
									has_trait = lifestyle_mystic
									has_trait = lifestyle_herbalist
								}
							}
							add = 50
						}
						ai_target_modifier = {
							CHARACTER = scope:secret_ruler
							AI_VALUE = ai_greed
							VALUE = 50
						}
					}
				}
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8001.toast.a.success
					add_hook = {
						type = indebted_hook
						target = scope:secret_ruler
					}
				}
			}
		
			50 = {	
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.8001.c.failure
				add_prestige = minor_prestige_loss
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8001.toast.c.failure
				}
			}
		}
		trigger_event = {
			id = sailing.8005
			days = 15
		}
	}	

	option = { # Continue Sailing (reduced time to next event but nothing happens)
		name = sailing.8001.d
		trigger_event = {
			id = sailing.8005
			days = 15
		}
	}	

	after = {
		add_character_flag = has_sailed_anduin				
	}
}

sailing.8002 = { # 
	type = activity_event
	content_source = realms_dlc
	title = sailing.8002.t
	desc = sailing.8002.desc
	theme = sailing_activity
	override_background = {
		reference = on_river
	}
	
	left_portrait = {
		character = root
		animation = marshal
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = admiration
	}
	option = {
		name = sailing.8002.a
		trigger_event = {
			id = sailing.8005
			days = 15
		}
	}
}

sailing.8003 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8003.t
	desc = sailing.8003.desc
	theme = sailing_activity
	override_background = {
		reference = on_river
	}
	
	left_portrait = {
		character = root
		animation = worry
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = disapproval
	}
	option = {
		name = sailing.8003.a
		trigger_event = {
			id = sailing.8005
			days = 15
		}
	}
}

sailing.8004 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8004.t
	desc = sailing.8004.desc
	theme = sailing_activity
	override_background = {
		reference = on_river
	}
	
	left_portrait = {
		character = root
		animation = marshal
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = admiration
	}
	option = {
		name = sailing.8004.a
		trigger_event = {
			id = sailing.8005
			days = 15
		}
	}
}

sailing.8005 = { # Pelargir  https://lotr.fandom.com/wiki/Pelargir
	type = activity_event
	content_source = realms_dlc
	title = sailing.8005.t
	desc = sailing.8005.desc
	theme = sailing_activity
	override_background = {
		reference = royal_shipyard
	}
	
	left_portrait = {
		character = root
		animation = personality_greedy
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = happiness
	}
	
	
	option = { # Sabotage the port
		name = sailing.8005.a
		trigger = {
				# culture = { has_cultural_pillar = heritage_northern_adunaic }
				can_raid_across_water = yes
		}
		reverse_add_opinion = {
			target = title:c_pelargir.holder			
			modifier = raided_me_opinion
		}
		duel = {
			skill = prowess
			value = high_skill_rating
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.8005.a.success	
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8005.toast.a.success
					add_character_modifier = { 
						modifier = pelargir_saboteur
						years = 5
					}
					# Mariner skill
					if = {
						limit = { has_trait = lifestyle_mariner }
						scope:activity = {
							add_activity_log_entry = {
								key = sailing_completed_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								
								root = {
									add_trait_xp = {
										trait = lifestyle_mariner
										value = 5
									}
								}
							}
						}
					}	
					else = {
						scope:activity = {
							add_activity_log_entry = {
								key = sailing_completed_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								
								root = { add_trait = lifestyle_mariner }
							}
						}
					} 
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.8005.a.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8005.toast.a.failure
					increase_wounds_no_death_effect = { REASON = fight}
				}
			}
		}
		trigger_event = {
			id = sailing.8008
			days = 15
		}
	}
	
	option = { # Pelargir trading
		name = sailing.8005.b
		duel = {
			skill = stewardship
			value = mediocre_skill_rating
			50 = {		
				compare_modifier = {					
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.8005.b.success	
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8005.toast.b.success
					capital_province = {
						add_province_modifier = {
							modifier = trade_agreement_with_pelargir
							years = 5
						}
					}
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.8005.b.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8005.toast.b.failure
					add_prestige = minor_prestige_loss
				}
			}
		}		
		trigger_event = {
			id = sailing.8008
			days = 15
		}
	}	
	
	option = { # Steal a Royal Ship / Ship-king
		name = sailing.8005.c
		reverse_add_opinion = {
			target = title:c_pelargir.holder			
			modifier = raided_me_opinion
		}
		trigger = {
			# culture = { has_cultural_pillar = heritage_northern_adunaic }
			can_raid_across_water = yes
		}
		duel = {
			skill = intrigue
			value = high_skill_rating
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.8005.c.success	
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8005.toast.c.success
					remove_boat = yes
					add_character_modifier = large_boat_modifier
					remove_character_flag = hired_a_boat
					add_prestige = minor_prestige_gain
							
					trigger_event = {
						id = sailing.8006
						days = 15
					}
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.8005.c.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8005.toast.c.failure
					add_prestige = medium_prestige_loss
					increase_wounds_no_death_effect = { REASON = fight }
					trigger_event = {
						id = sailing.8007
						days = 15
					}
				}
			}
		}
	}
	
	option = { # Upgrade to RoyalShip by a fee of a small ship
		name = sailing.8005.d
		remove_short_term_gold = small_boat_cost
		remove_character_modifier = medium_boat_modifier
		remove_character_modifier = small_boat_modifier
		remove_character_modifier = small_damaged_boat_modifier
		remove_character_modifier = medium_damaged_boat_modifier
		remove_character_modifier = large_damaged_boat_modifier					
		add_character_modifier = large_boat_modifier		
		
		trigger_event = {
			id = sailing.8008
			days = 15
		}
	}
	
	option = { # Continue Sailing (reduced time to next event but nothing happens)
		name = sailing.8001.d
		trigger_event = {
			id = sailing.8008
			days = 15
		}
	}	
}

sailing.8006 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8006.t
	desc = sailing.8006.desc
	theme = sailing_activity
	override_background = {
		reference = royal_shipyard
	}
	
	left_portrait = {
		character = root
		animation = scheme
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = ecstasy
	}
	
	immediate = {
		title:c_pelargir.holder = { save_scope_as = sealord }
	}
	
	option = {
		name = sailing.8006.a
		trigger_event = {
			id = sailing.8008
			days = 15
		}
	}
}

sailing.8007 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8007.t
	desc = sailing.8007.desc
	theme = sailing_activity
	override_background = {
		reference = royal_shipyard
	}
	
	left_portrait = {
		character = root
		animation = anger
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = shame
	}
	option = {
		name = sailing.8007.a
		trigger_event = {
			id = sailing.8008
			days = 15
		}
	}
}

sailing.8008 = { # Osgiliath https://lotr.fandom.com/wiki/Osgiliath
	type = activity_event
	content_source = realms_dlc
	title = sailing.8008.t
	desc = sailing.8008.desc
	theme = sailing_activity
	override_background = {
		reference = temple_generic
	}
	
	left_portrait = {
		character = root
		animation = ecstasy
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = shock
	}
	
	option = { # Raiding of Osgiliath
		name = sailing.8008.a
		reverse_add_opinion = {
			target = title:c_osgiliath.holder			
			modifier = raided_me_opinion
		}
		trigger = {
			# culture = { has_cultural_pillar = heritage_northern_adunaic }
			can_raid_across_water = yes
		}
		duel = {
			skill = martial
			value = average_skill_rating
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.8008.a.success	
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8008.toast.a.success
					add_gold = medium_gold_value					
		
					trigger_event = {
						id = sailing.8013
						days = 15
					}
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.8008.a.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8008.toast.a.failure
					add_character_modifier = { 
						modifier = minor_injures_from_sabotage
						years = 2
					}
					trigger_event = {
						id = sailing.8010
						days = 15
					}
				}
			}
		}
	}
	
	option = { # Look for the Dome of Stars https://lotr.fandom.com/wiki/Dome_of_Stars Palantir Lost to Castamir the Usurper
		name = sailing.8008.b
		duel = {
			skill = learning
			value = average_skill_rating
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.8008.b.success	
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8008.toast.b.success
					add_learning_skill = 1							
		
					trigger_event = {
						id = sailing.8011
						days = 15
					}
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.8008.b.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8008.toast.b.failure
					add_stress = 2
					trigger_event = {
						id = sailing.8012
						days = 15
					}
				}
			}
		}
	}
	
	option = { # Continue Sailing (reduced time to next event but nothing happens)
		name = sailing.8001.d
		trigger_event = {
			id = sailing.8013
			days = 15
		}
	}
}

sailing.8009 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8009.t
	desc = sailing.8009.desc
	orphan = yes # LotR - TODO - Figure out why?
	theme = sailing_activity
	override_background = {
		reference = temple_generic
	}
	
	left_portrait = {
		character = root
		animation = steward
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = personality_greedy
	}
	option = {
		name = sailing.8009.a
		trigger_event = {
			id = sailing.8013
			days = 15
		}
	}
}

sailing.8010 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8010.t
	desc = sailing.8010.desc
	theme = sailing_activity
	override_background = {
		reference = temple_generic
	}
	
	left_portrait = {
		character = root
		animation = disapproval
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = disapproval
	}
	option = {
		name = sailing.8010.a
		trigger_event = {
			id = sailing.8013
			days = 15
		}
	}
}

sailing.8011 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8011.t
	desc = sailing.8011.desc
	theme = sailing_activity
	override_background = {
		reference = temple_generic
	}
	
	left_portrait = {
		character = root
		animation = ecstasy
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = shock
	}
	option = {
		name = sailing.8010.a
		trigger_event = {
			id = sailing.8013
			days = 15
		}
	}
}

sailing.8012 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8012.t
	desc = sailing.8012.desc
	theme = sailing_activity
	override_background = {
		reference = temple_generic
	}
	
	left_portrait = {
		character = root
		animation = sadness
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = sadness
	}
	option = {
		name = sailing.8010.a
		trigger_event = {
			id = sailing.8013
			days = 15
		}
	}
}

sailing.8013 = { # Cair Andros: Garrison Control http://tolkiengateway.net/wiki/Cair_Andros
	type = activity_event
	content_source = realms_dlc
	title = sailing.8013.t
	desc = sailing.8013.desc
	theme = sailing_activity
	override_background = {
		reference = on_river
	}
	
	left_portrait = {
		character = root
		animation = anger
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = anger
	}
	
	option = { # Garrison control: Diplomacy to let you continue
		name = sailing.8013.a
		duel = {
			skill = diplomacy
			value = high_skill_rating
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.8013.a.success	
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8013.toast.a.success								
					add_diplomacy_lifestyle_perk_points = 1
					trigger_event = {
						id = sailing.8014
						days = 15
					}
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.8013.a.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8013.toast.a.failure
					add_stress = 2
					trigger_event = { # Come back without experience
						id = sailing.8015
						days = 15
					}
				}
			}
		}
	}
	
	option = { # Garrison control: Confrontation
		name = sailing.8013.b
		reverse_add_opinion = {
			target = title:c_aranelaith.holder			
			modifier = angry_opinion
			opinion = -15
		}
		duel = {
			skill = martial
			value = high_skill_rating
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				desc = sailing.8013.b.success	
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8013.toast.b.success								
					add_martial_lifestyle_perk_points = 1
					trigger_event = {
						id = sailing.8016
						days = 15
					}
					# Mariner skill
					if = {
						limit = { has_trait = lifestyle_mariner }
						scope:activity = {
							add_activity_log_entry = {
								key = sailing_completed_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								
								root = {
									add_trait_xp = {
										trait = lifestyle_mariner
										value = 5
									}
								}
							}
						}
					}	
					else = {
						scope:activity = {
							add_activity_log_entry = {
								key = sailing_completed_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								
								root = { add_trait = lifestyle_mariner }
							}
						}
					} 
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.8013.b.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8013.toast.b.failure
					increase_wounds_no_death_effect = { REASON = fight }
					trigger_event = { 
						id = sailing.8017
						days = 15
					}
				}
			}
		}
	}
	
	option = { # The way is shut - we should go back
		name = sailing.6010.a
		trigger_event = { # Come back without experience
			id = sailing.9002
			days = 15
		}
	}
}

sailing.8014 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8014.t
	desc = sailing.8014.desc
	theme = sailing_activity
	override_background = {
		reference = on_river
	}
	
	left_portrait = {
		character = root
		animation = personality_bold
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = personality_callous
	}
	option = {
		name = sailing.8014.a
		trigger_event = {
			id = sailing.8018
			days = 15
		}
	}
}

sailing.8015 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8015.t
	desc = sailing.8015.desc
	theme = sailing_activity
	override_background = {
		reference = on_river
	}
	left_portrait = {
		character = root
		animation = anger
	}
	
	right_portrait = {
		character = scope:first_mate
		animation = sadness
	}
	option = {
		name = sailing.8015.a
		trigger_event = {
			id = sailing.9002
			days = 15
		}
	}
}

sailing.8016 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8016.t
	desc = sailing.8016.desc
	theme = sailing_activity
	override_background = {
		reference = on_river
	}
	
	left_portrait = {
		character = root
		animation = rage
	}
	
	right_portrait = {
		character = scope:first_mate
		animation = personality_content
	}
	option = {
		name = sailing.8014.a
		trigger_event = {
			id = sailing.8018
			days = 15
		}
	}
}

sailing.8017 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8017.t
	desc = sailing.8017.desc
	theme = sailing_activity
	override_background = {
		reference = on_river
	}
	
	left_portrait = {
		character = root
		animation = sick
	}
	
	right_portrait = {
		character = scope:first_mate
		animation = shame
	}
	option = {
		name = sailing.6010.a
		trigger_event = {
			id = sailing.9002
			days = 15
		}
	}
}

sailing.8018 = { # Wetwang as an extension of the Dead Marshes
	type = activity_event
	content_source = realms_dlc
	title = sailing.8018.t
	desc = sailing.8018.desc
	theme = sailing_activity
	override_background = {
		reference = wilderness_wetlands
	}
	
	left_portrait = {
		character = root
		animation = worry
	}
	
	right_portrait = {
		character = scope:first_mate
		animation = fear
	}
		
	option = { # Explore the marshes https://lotr.fandom.com/wiki/Dead_Marshes
		name = sailing.8018.a
		duel = {
			skill = prowess
			value = high_skill_rating
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				desc = sailing.8018.a.success	
				random_dummy_gender_effect = yes
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8018.toast.a.success
					add_stress = minor_stress_impact_gain
					create_artifact_weapon_effect = {
						OWNER = root		
						CREATOR = scope:dummy_gender
						SET_WEAPON_TYPE = flag:no
					}
					trigger_event = {
						id = sailing.8019
						days = 15
					}		
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.8018.a.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8018.toast.a.failure
					add_stress = major_stress_impact_gain
				}				
				trigger_event = {
					id = sailing.8020
					days = 15
				}		
			}
		}	
	}
	
	option = { # Continue Sailing (reduced time to next event but nothing happens)
		name = sailing.8001.d
		trigger_event = {
			id = sailing.8021
			days = 15
		}
	}
}

sailing.8019 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8019.t
	desc = sailing.8019.desc
	theme = sailing_activity
	override_background = {
		reference = wilderness_wetlands
	}
	
	left_portrait = {
		character = root
		animation = fear
	}
	
	right_portrait = {
		character = scope:first_mate
		animation = fear
	}
	option = {
		name = sailing.8019.a
		trigger_event = {
			id = sailing.8021
			days = 15
		}
	}
}

sailing.8020 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8020.t
	desc = sailing.8020.desc
	theme = sailing_activity
	override_background = {
		reference = wilderness_wetlands
	}
	
	left_portrait = {
		character = root
		animation = fear
	}
	
	right_portrait = {
		character = scope:first_mate
		animation = worry
	}
	option = {
		name = sailing.8019.a
		trigger_event = {
			id = sailing.8021
			days = 15
		}
	}
}

sailing.8021 = { # Falls of Rauros / Argonath https://lotr.fandom.com/wiki/Falls_of_Rauros
	type = activity_event
	content_source = realms_dlc
	title = sailing.8021.t
	desc = sailing.8021.desc
	theme = sailing_activity
	override_background = {
		reference = argonath
	}
	
	left_portrait = {
		character = root
		animation = ecstasy
	}
	
	right_portrait = {
		character = scope:first_mate
		animation = happiness
	}

	option = { # Observe the Argonath and Meditate
		name = sailing.6010.a
		send_interface_toast = {
			left_icon = ROOT
			title = sailing.8021.toast.a.success
			add_character_modifier = {
				modifier = visited_the_argonath			
				years = 10
			}
			trigger_event = { # Come back with experience
				id = sailing.9001
				days = 15
			}			
		}
	}
}

# Harnen
# 8100 - Harnen Delta
# 8101 - Amakuhd
# 8102-3 - Amrum
# 8103 - Chelkar
# 8104-6 - Pezarsan
# 8107+ - Pezarsan
			
sailing.8100 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8100.t
	desc = sailing.8100.desc
	theme = sailing_activity
	override_background = {
		reference = black_ship
	}
	left_portrait = {
		character = root
		animation = war_defender
	}
	
	right_portrait = {
		character = scope:first_mate
		animation = rage
	}

	option = { # Engage - ship is undamaged
		name = sailing.8100.a
		trigger = { owns_an_undamaged_boat = yes }
		random_list = {
			50 = { # Success
				modifier = {
					add = 20
					has_trait_xp = {
						trait = lifestyle_mariner
						value < 50
					}
				}		
				modifier = {
					add = 40
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}	
				modifier = {
					add = 60
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8100.toast.a.success
					add_gold = medium_gold_value
					trigger_event = {
						id = sailing.8101
						days = 15
					}
					# Mariner skill
					if = {
						limit = { has_trait = lifestyle_mariner }
						scope:activity = {
							add_activity_log_entry = {
								key = sailing_completed_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								
								root = {
									add_trait_xp = {
										trait = lifestyle_mariner
										value = 5
									}
								}
							}
						}
					}	
					else = {
						scope:activity = {
							add_activity_log_entry = {
								key = sailing_completed_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								
								root = { add_trait = lifestyle_mariner }
							}
						}
					} 
				}
			}
			50 = { #Injuries and damaged ship
				modifier = {
					add = -20
					has_trait_xp = {
						trait = lifestyle_mariner
						value < 50
					}
				}		
				modifier = {
					add = -40
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}	
				modifier = {
					add = -60
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8100.toast.a.failure
					damage_ship = yes
					increase_wounds_no_death_effect = { REASON = fight }
					trigger_event = {
						id = sailing.8101
						days = 15
					}
				}				
			}
		}
	}
	
	option = { # Engage - ship is damaged
		name = sailing.8100.b
		trigger = { owns_an_undamaged_boat = no }
		random_list = {
			25 = { #Success
				modifier = {
					add = 20
					has_trait_xp = {
						trait = lifestyle_mariner
						value < 50
					}
				}		
				modifier = {
					add = 40
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}	
				modifier = {
					add = 60
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8100.toast.b.success
					add_prowess_skill = 1
					trigger_event = {
						id = sailing.8101
						days = 15
					}
					# Mariner skill
					if = {
						limit = { has_trait = lifestyle_mariner }
						scope:activity = {
							add_activity_log_entry = {
								key = sailing_completed_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								
								root = {
									add_trait_xp = {
										trait = lifestyle_mariner
										value = 5
									}
								}
							}
						}
					}	
					else = {
						scope:activity = {
							add_activity_log_entry = {
								key = sailing_completed_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								
								root = { add_trait = lifestyle_mariner }
							}
						}
					} 
				}
			}
			75 = { #Shipwreck
				modifier = {
					add = -20
					has_trait_xp = {
						trait = lifestyle_mariner
						value < 50
					}
				}		
				modifier = {
					add = -40
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}	
				modifier = {
					add = -60
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8100.toast.b.failure
					increase_wounds_effect = { REASON = fight }
					damage_ship = yes
					add_character_flag = shipwreck					
					trigger_event = { # Come back home no experience
						id = sailing.9002
						days = 15
					}
				}
			}
		}
	}	
	
	option = { # Naval maneuver
		name = sailing.8100.c
		trigger = { 
			NOR = {
				has_character_flag = has_tried_to_enter_harnen
			}
		}
		random_list = {
			50 = { #Success
				modifier = {
					add = 20
					has_trait_xp = {
						trait = lifestyle_mariner
						value < 50
					}
				}		
				modifier = {
					add = 40
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}	
				modifier = {
					add = 60
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8100.toast.c.success
					add_martial_lifestyle_xp = minor_lifestyle_xp
					add_character_flag = {
						flag = has_tried_to_enter_harnen
						years = 3
					}
					trigger_event = {
						id = sailing.8101
						days = 15
					}
				}
			}
			50 = { #Detected!
				modifier = {
					add = -20
					has_trait_xp = {
						trait = lifestyle_mariner
						value < 50
					}
				}		
				modifier = {
					add = -40
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}	
				modifier = {
					add = -60
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8100.toast.c.failure
					add_character_flag = {
						flag = has_tried_to_enter_harnen
						years = 3
					}
					add_prestige = minor_prestige_loss
					trigger_event = { # Unable to sneak, only combat or retreat available
						id = sailing.8100
						days = 15
					}
				}
			}
		}
	}	
	
	option = { # Don't enter the Harnen, come back without experience
		name = sailing.8100.d
		trigger_event = {
			id = sailing.9002
			days = 15
		}
	}
}

sailing.8101 = { # Bronze tower of Ancalimon
	type = activity_event
	content_source = realms_dlc
	title = sailing.8101.t
	desc = sailing.8101.desc
	theme = sailing_activity
	override_background = {
		reference = docks_adunai
	}

	left_portrait = {
		character = root
		animation = personality_content
	}
	
	immediate = {
		character:lineofelros15 = {
			save_scope_as = ancalimon
		}
		create_character = {
			template = priest_character_template
			location = scope:activity.activity_location
			culture = culture:haruze
			dynasty = none
			gender_female_chance = 50
			save_scope_as = priest
		}
	}

	option = { # Join the celebrations
		name = sailing.8101.a
		random_list = {
			50 = { # Too much attention
				custom_tooltip = sailing.8101.tt
				trigger_event = {
					id = sailing.8111
					days = 5
				}
			}
			50 = { # Good time			
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8101.toast.success
					add_stress = medium_stress_loss
					trigger_event = {
						id = sailing.8102
						days = 15
					}
				}
			}
		}
	}

	option = { # Perform
		name = sailing.8101.b
		random_list = {
			75 = { # Too much attention			
				custom_tooltip = sailing.8101.tt
				modifier = {
					add = -10
					has_trait_xp = {
						trait = lifestyle_mariner
						value > 25
					}
				}
				modifier = {
					add = -10
					has_trait_xp = {
						trait = lifestyle_mariner
						value > 50
					}
				}
				modifier = {
					add = -10
					has_trait_xp = {
						trait = lifestyle_mariner
						value > 75
					}
				}
				modifier = {
					add = 50
					has_trait = drunkard
				}
				modifier = {
					add = -10
					has_trait = shy
				}
				modifier = {
					add = -10
					has_trait = lazy
				}
				modifier = {
					add = -10
					has_trait = calm
				}
				modifier = {
					add = -10
					has_trait = inappetetic
				}
				trigger_event = {
					id = sailing.8111
					days = 5
				}
			}
			25 = { # You celebrate
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8101.toast.success

					if = {
						limit = {
							has_trait = lifestyle_traveler
						}
						add_trait_xp = {
							trait = lifestyle_traveler
							track = travel
							value = 25
						}
					}
					# Mariner skill
					else_if = {
						limit = { has_trait = lifestyle_mariner }
						scope:activity = {
							add_activity_log_entry = {
								key = sailing_completed_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								
								root = {
									add_trait_xp = {
										trait = lifestyle_mariner
										value = 5
									}
								}
							}
						}
					}	
					else = {
						scope:activity = {
							add_activity_log_entry = {
								key = sailing_completed_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								
								root = { add_trait = lifestyle_mariner }
							}
						}
					} 
					add_piety = minor_piety_gain
					add_prestige = minor_prestige_gain
					trigger_event = {
						id = sailing.8102
						days = 15
					}
				}
			}
		}
	}

	option = { # You discover something is not right...
		name = sailing.8101.c
		trigger = {
			OR = {
				has_trait = schemer
				root.intrigue >= 12
			}
		}
		send_interface_toast = {
			left_icon = ROOT
			title = sailing.8101.toast.success
			
			if = {
				limit = {
					has_trait = schemer
				}
				random = {
					chance = 15
					add_trait = schemer
				}
			}
			# Mariner skill
			else_if = {
				limit = { has_trait = lifestyle_mariner }
				scope:activity = {
					add_activity_log_entry = {
						key = sailing_completed_log
						tags = { good }
						# this line below adds the entry to the Effects section of the conclusion UI
						show_in_conclusion = yes
						character = root
						
						root = {
							add_trait_xp = {
								trait = lifestyle_mariner
								value = 5
							}
						}
					}
				}
			}	
			else = {
				scope:activity = {
					add_activity_log_entry = {
						key = sailing_completed_log
						tags = { good }
						# this line below adds the entry to the Effects section of the conclusion UI
						show_in_conclusion = yes
						character = root
						
						root = { add_trait = lifestyle_mariner }
					}
				}
			} 
			trigger_event = {
				id = sailing.8102
				days = 15
			}
		}
	}

	option = { # Leave the celebrations
		name = sailing.8101.d
		trigger_event = {
			id = sailing.8102
			days = 15
		}
	}
	after = {
		scope:priest = {
			silent_disappearance_effect = yes
		}
	}
}

sailing.8111 = { # Bronze tower of Ancalimon: angry priests
	type = activity_event
	content_source = realms_dlc
	title = sailing.8111.t
	desc = sailing.8111.desc
	theme = sailing_activity
	override_background = {
		reference = temple
	}
	
	left_portrait = {
		character = root
		animation = dancing
	}

	right_portrait = {
		character = scope:priest
		animation = angry
	}
	
	immediate = {
		character:lineofelros15 = {
			save_scope_as = ancalimon
		}
		create_character = {
			template = priest_character_template
			location = scope:activity.activity_location
			culture = culture:haruze
			dynasty = none
			gender_female_chance = 50
			save_scope_as = priest
		}
	}

	option = { 
		name = sailing.8111.a
		random_list = {
			50 = { # Run away
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8111.toast.success
					trigger_event = {
						id = sailing.8102
						days = 15
					}
				}
			}
			50 = { # harmed
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8111.toast.failure
					increase_wounds_effect = { REASON = whipping }
					trigger_event = {
						id = sailing.8102
						days = 15
					}
				}
			}
		}
	}
	after = {		
		add_stress = medium_stress_gain
		add_piety = medium_piety_loss
	}
}

sailing.8102 = { # Harad Crossroads (Amrun)
	type = activity_event
	content_source = realms_dlc
	title = sailing.8102.t
	desc = sailing.8102.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	override_background = {
		reference = docks_adunai
	}
	left_portrait = {
		character = root
		animation = personality_zealous
	}
	
	right_portrait = {
		character = scope:first_mate
		animation = personality_callous
	}

	option = { # Sabotage the Bridge over the Harnen
		name = sailing.8102.a
		trigger = {
			# culture = { has_cultural_pillar = heritage_northern_adunaic }
			can_raid_across_water = yes
		}
		reverse_add_opinion = {
			target = title:c_harnen.holder			
			modifier = raided_me_opinion
		}
		send_interface_toast = {			
			title = sailing.8102.toast.a.success
			add_dread = minor_dread_gain
			add_gold = minor_gold_value
			trigger_event = { 
				id = sailing.8104
				days = 15
			}
			# Mariner skill
			if = {
				limit = { has_trait = lifestyle_mariner }
				scope:activity = {
					add_activity_log_entry = {
						key = sailing_completed_log
						tags = { good }
						# this line below adds the entry to the Effects section of the conclusion UI
						show_in_conclusion = yes
						character = root
						
						root = {
							add_trait_xp = {
								trait = lifestyle_mariner
								value = 5
							}
						}
					}
				}
			}	
			else = {
				scope:activity = {
					add_activity_log_entry = {
						key = sailing_completed_log
						tags = { good }
						# this line below adds the entry to the Effects section of the conclusion UI
						show_in_conclusion = yes
						character = root
						
						root = { add_trait = lifestyle_mariner }
					}
				}
			} 
		}
	}
	
	option = { # Intrigues in the Cross Road
		name = sailing.8102.b
		duel = {
			skill = intrigue
			value = high_skill_rating
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				desc = sailing.8102.b.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8102.toast.b.success
					add_intrigue_skill = 1				
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.8102.b.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8102.toast.b.failure
					add_prestige = minor_prestige_loss
				}
			}
		}
					
		trigger_event = {
			id = sailing.8104
			days = 15
		}		
	}
	
	option = { # Learning Northern Apysaic language
		name = sailing.8102.c
		remove_short_term_gold = major_gold_value
		learn_language = language_northern_apysaic		
		trigger_event = {
			id = sailing.8103
			days = 15
		}
	}	
	
	option = { # Continue sailing
		name = sailing.8001.d
		trigger_event = {
			id = sailing.8104
			days = 15
		}
	}
}

sailing.8103 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8103.t
	desc = sailing.8103.desc
	theme = sailing_activity
	override_background = {
		reference = wilderness_desert
	}
	left_portrait = {
		character = root
		animation = admiration
	}
	option = {
		name = sailing.8103.a
		send_interface_toast = {
			left_icon = ROOT
			title = sailing.8103.toast.a.success			
			trigger_event = {
				id = sailing.8104
				days = 15
			}
		}
	}
}

sailing.8104 = { # Pezarsan
	type = activity_event
	content_source = realms_dlc
	title = sailing.8104.t
	desc = sailing.8104.desc
	theme = sailing_activity
	override_background = {
		reference = market_east	
	}
	left_portrait = {
		character = root
		animation = steward
	}
	
	right_portrait = {
		character = scope:first_mate
		animation = sick
	}

	option = { # Visit the Gambling spot
		name = sailing.8104.a
		send_interface_toast = {
			left_icon = ROOT
			title = sailing.8104.toast.a.success			
			trigger_event = {
				id = sailing.8105
				days = 15
			}
		}
	}
	
	option = { # Caravans from Khand
		name = sailing.8104.b
		send_interface_toast = {
			left_icon = ROOT
			title = sailing.8104.toast.b.success			
			trigger_event = {
				id = sailing.8106
				days = 15
			}
		}		
	}
	
	
	option = { # Time to come back home
		name = sailing.6010.a
		trigger_event = {
			id = sailing.9002
			days = 15
		}
	}
}

sailing.8105 = { # Artifact bid
	type = activity_event
	content_source = realms_dlc
	title = sailing.8105.t
	desc = sailing.8105.desc
	theme = sailing_activity
	override_background = {
		reference = market_east	
	}
	left_portrait = {
		character = root
		animation = personality_greedy
	}

	option = { # Buy something shiny
		name = sailing.8105.a
		random_dummy_gender_effect = yes
		send_interface_toast = {
			left_icon = ROOT
			title = sailing.8105.toast.a.success						
			remove_short_term_gold = medium_gold_value
			create_artifact_armor_effect = {
				OWNER = root		
				CREATOR = scope:dummy_gender
				SET_ARMOR_TYPE = flag:no
			}
			trigger_event = {
				id = sailing.8107
				days = 15
			}
		}
	}	
	
	option = { # Time to come back home
		name = sailing.6010.a
		trigger_event = {
			id = sailing.9002
			days = 15
		}
	}

}

sailing.8106 = { # Caravans
	type = activity_event
	content_source = realms_dlc
	title = sailing.8106.t
	desc = sailing.8106.desc
	theme = sailing_activity
	override_background = {
		reference = market_east	
	}
	left_portrait = {
		character = root
		animation = steward
	}

	option = { # Buy a cargo of luxury and delicacy items
		name = sailing.8106.a
		send_interface_toast = {
			left_icon = ROOT
			title = sailing.8106.toast.a.success
			remove_short_term_gold = 150
			capital_province = {
				add_province_modifier = {
					modifier = caravans_from_pezarsan
					years = 5
				}
			}			
			trigger_event = {
				id = sailing.8107
				days = 15
			}
		}
	}

	option = { # Time to come back home
		name = sailing.6010.a
		trigger_event = {
			id = sailing.9002
			days = 15
		}
	}
}
# Khand
sailing.8107 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.8107.t
	desc = sailing.8107.desc
	theme = sailing_activity
	override_background = {
		reference = rhun	
	}
	left_portrait = {
		character = root
		animation = stress
	}
	right_portrait = {
		character = scope:first_mate
		animation = disapproval
	}

	option = { # We sail to Starlurtsa Khand
		name = sailing.8107.a
		add_dread = medium_dread_gain
		random = {
			chance = 30
			add_trait = weak
		}
		
		trigger_event = {			
			id = sailing.8108
			days = 15
		}
	}

	option = { # Time to come back home
		name = sailing.8107.b
		trigger_event = {
			id = sailing.9002
			days = 15
		}
	}
}

sailing.8108 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.8108.t
	desc = sailing.8108.desc
	theme = sailing_activity
	override_background = {
		reference = market_east	
	}
	left_portrait = {
		character = root
		animation = admiration
	}

	option = { # We visit the temple
		name = sailing.8108.a
		send_interface_toast = {
			left_icon = ROOT
			title = sailing.8108.toast.a.success
			add_trait = devoted
		}
		trigger_event = {			
			id = sailing.8109
			days = 15
		}
	}

	option = { # We visit the monuments
		name = sailing.8108.b
		send_interface_toast = {
			left_icon = ROOT
			title = sailing.8108.toast.b.success
			add_trait = desert_warrior
		}
		trigger_event = {			
			id = sailing.8109
			days = 15
		}
	}

	option = { # We visit the Slave Market
		name = sailing.8108.c
		
		trigger_event = {			
			id = sailing.8110
			days = 15
		}
	}

	option = { # We hire Camels Riders
		name = sailing.8108.d
		remove_short_term_gold = 150
		send_interface_toast = {
			left_icon = ROOT
			title = sailing.8108.toast.d.success
			spawn_army = {
				men_at_arms = {
					type = desert_screamers
					stacks = 1
				}
				inheritable = no
				location = root.capital_province
				name = camels_from_khand
			}
		}
		trigger_event = {			
			id = sailing.8109
			days = 15
		}
	}
}

sailing.8109 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.8109.t
	desc = sailing.8109.desc
	theme = sailing_activity
	override_background = {
		reference = market_east	
	}
	left_portrait = {
		character = root
		animation = admiration
	}

	option = {
		name = sailing.8109.a
		trigger_event = {			
			id = sailing.9001
			days = 15
		}
	}	
}

# Slave market
sailing.8110 = { 
	type = activity_event
	content_source = realms_dlc
	title = sailing.8110.t
	desc = sailing.8110.desc
	theme = sailing_activity
	override_background = {
		reference = market_east	
	}
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:slave
		animation = anger
	}
	immediate = {
		create_character = {
			template = peasant_character
			location = root.capital_province
			culture = culture:variag
			faith = faith:faith_lurmsakun
			dynasty = none
			gender_female_chance = 50
			save_scope_as = slave
		}
	}	

	option = { # Buy and keep a slave as a courtier
		name = sailing.8110.a		
		remove_short_term_gold = 75
		add_courtier = scope:slave
		add_dread = minor_dread_gain
	}
		
	option = { # Buy a slave to release
		name = sailing.8110.b
		remove_short_term_gold = 75
		add_prestige = major_prestige_gain
		add_dread = medium_dread_loss
		set_nickname_effect = { NICKNAME = nick_the_emancipator }
		scope:slave = {
			move_to_pool_at = title:c_starlurtsa_khand.title_province
		}
	}
		
	option = { # You don't need a slave
		name = sailing.8110.c	
	}

	after = {
		trigger_event = {			
			id = sailing.8109
			days = 15
		}
	}	
}

# Gwathlo
# by ispanets
# 8201 - Lond Daer Enedth
# 8211 - Tharbad
# 8221 - Swanfleet
# a) - 8231 - Ost-in-Edhil
#    - 8241 - Khazad-Dum
# b) - 8251 - The Angle
#    - 8261 - The Last Bridge
#    - 8271 - Cameth Brin

sailing.8201 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8201.t
	desc = sailing.8201.desc
	theme = sailing_activity
	override_background = {
		reference = on_river
	}
	left_portrait = {
		character = root
		animation = happiness
	}
		
	right_portrait = {
		character = scope:first_mate
		animation = ecstasy
	}

	option = { # Explore Lond Daer Enedh
		name = sailing.8201.a
		duel = {
			skill = stewardship
			value = high_skill_rating
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				desc = sailing.8201.a.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8201.toast.a.success
					add_gold = minor_gold_value

					reverse_add_opinion = {
						target = title:c_lond_daer.holder						
						modifier = raided_me_opinion
					}
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.8201.a.failure
				send_interface_toast = {
					left_icon = title:c_lond_daer.holder
					title = sailing.8201.toast.a.failure					
					remove_short_term_gold = minor_gold_value			
				}
			}
		}
					
		trigger_event = {
			id = sailing.8211
			days = 15
		}		
	}
	
	option = { # Continue sailing
		name = sailing.8201.b
					
		trigger_event = {
			id = sailing.8211
			days = 15
		}		
	}
}

sailing.8211 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8211.t
	desc = sailing.8211.desc
	theme = sailing_activity
	override_background = {
		reference = tharbad	
	}
	left_portrait = {
		character = root
		animation = ecstasy
	}

	option = { # Explore the fire in Tharbad (Dunadan Rangers)
		name = sailing.8211.a		
		create_character = {					
			#template = lotr_dunedain_traveler_template
			faith = faith:faith_edain
			dynasty = none
			culture = culture:dunedain
			gender_female_chance = 50
			save_scope_as = dunadan1
			location = root.capital_province
		}
				
		create_character = {					
			#template = lotr_dunedain_traveler_template
			faith = faith:faith_edain
			dynasty = none
			culture = culture:dunedain
			gender_female_chance = 50
			save_scope_as = dunadan2
			location = root.capital_province
		}	
				
		create_character = {					
			#template = lotr_dunedain_traveler_template
			faith = faith:faith_edain
			dynasty = none
			culture = culture:dunedain
			gender_female_chance = 50
			save_scope_as = dunadan3
			location = root.capital_province
		}	
		trigger_event = {		
			id = sailing.8212
			days = 15
		}
	}
	option = { # Approach the Dark Figures
		name = sailing.8211.b
		
		create_character = {
			template = servant_character
			location = root.capital_province
			culture = culture:enedhwaithrim
			faith = faith:faith_dunlending_turthalis 
			gender_female_chance = 50
			save_scope_as = brigand1
			dynasty = none
		}
		create_character = {
			template = servant_character
			location = root.capital_province
			culture = culture:enedhwaithrim
			faith = faith:faith_dunlending_turthalis 
			gender_female_chance = 50
			save_scope_as = brigand2
			dynasty = none
		}
		create_character = {
			template = servant_character
			location = root.capital_province
			culture = culture:enedhwaithrim
			faith = faith:faith_dunlending_turthalis 
			gender_female_chance = 50
			save_scope_as = brigand3
			dynasty = none
		}

		trigger_event = {		
			id = sailing.8213
			days = 15
		}
	}
	option = { # Continue sailing
		name = sailing.8211.c
					
		trigger_event = {
			id = sailing.8221
			days = 15
		}		
	}
}

sailing.8212 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8212.t
	desc = sailing.8212.desc
	theme = sailing_activity
	override_background = {
		reference = on_river
	}
	left_portrait = {
		character = root
		animation = worry
	}
	right_portrait = {
		character = scope:dunadan1
		animation = worry
	}
	lower_left_portrait = {
		character = scope:dunadan2
		animation = worry
	}
	lower_right_portrait = {
		character = scope:dunadan3
		animation = worry
	}

	
	option = { # State your allegiance to rangers
		name = sailing.8212.a
		
		if = {
			limit = {
				faith_is_evil = no
			}
			trigger_event = {
				id = sailing.8214
				days = 15
			}		
		}
		else = {
			trigger_event = {
				id = sailing.8215
				days = 15
			}		
		}
	}	
}

sailing.8213 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8213.t
	desc = sailing.8213.desc
	theme = sailing_activity
	override_background = {
		reference = tharbad	
	}
	left_portrait = {
		character = root
		animation = fear
	}
	right_portrait = {
		character = scope:brigand1
		animation = aggressive_dagger
	}
	lower_left_portrait = {
		character = scope:brigand2
		animation = aggressive_dagger
	}
	lower_right_portrait = {
		character = scope:brigand3
		animation = aggressive_dagger
	}

	option = { # State your allegiance to brigands
		name = sailing.8213.a
		
		if = {
			limit = {
				faith_is_evil = yes
			}
			trigger_event = {
				id = sailing.8216
				days = 15
			}		
		}
		else = {
			trigger_event = {
				id = sailing.8217
				days = 15
			}		
		}
	}	
}

# Dunadan Rangers, good faith
sailing.8214 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8214.t
	desc = sailing.8214.desc
	theme = sailing_activity
	override_background = {
		reference = on_river
	}
	left_portrait = {
		character = root
		animation = bold
	}	
	right_portrait = {
		character = scope:dunadan1
		animation = bold
	}
	lower_left_portrait = {
		character = scope:dunadan2
		animation = bold
	}
	lower_right_portrait = {
		character = scope:dunadan3
		animation = bold
	}

	option = { 
		name = sailing.8214.a	
		add_martial_lifestyle_xp = medium_lifestyle_xp
		trigger_event = {
			id = sailing.8221
			days = 15
		}		
	}
}

# Dunadan Rangers, evil faith
sailing.8215 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8215.t
	desc = sailing.8215.desc
	theme = sailing_activity
	override_background = {
		reference = tharbad	
	}
	left_portrait = {
		character = root
		animation = fear
	}
	
	right_portrait = {
		character = scope:dunadan1
		animation = angry
	}
	lower_left_portrait = {
		character = scope:dunadan2
		animation = angry
	}
	lower_right_portrait = {
		character = scope:dunadan3
		animation = angry
	}

	option = { 
		name = sailing.8215.a		
		add_prestige = medium_prestige_loss
		trigger_event = {
			id = sailing.8221
			days = 15
		}		
	}
}

# Brigands, evil faith
sailing.8216 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8216.t
	desc = sailing.8216.desc
	theme = sailing_activity
	override_background = {
		reference = tharbad	
	}
	
	left_portrait = {
		character = root
		animation = bold
	}
	right_portrait = {
		character = scope:brigand1
		animation = aggressive_dagger
	}
	lower_left_portrait = {
		character = scope:brigand2
		animation = aggressive_dagger
	}
	lower_right_portrait = {
		character = scope:brigand3
		animation = aggressive_dagger
	}

	option = { 
		name = sailing.8216.a	
		add_dread = medium_dread_gain
		trigger_event = {
			id = sailing.8221
			days = 15
		}		
	}
}

# Brigands, but good faith
sailing.8217 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8217.t
	desc = sailing.8217.desc
	theme = sailing_activity
	override_background = {
		reference = tharbad	
	}
	left_portrait = {
		character = root
		animation = fear
	}
	right_portrait = {
		character = scope:brigand1
		animation = aggressive_dagger
	}
	lower_left_portrait = {
		character = scope:brigand2
		animation = aggressive_dagger
	}
	lower_right_portrait = {
		character = scope:brigand3
		animation = aggressive_dagger
	}

	option = { 
		name = sailing.8217.a		
		increase_wounds_no_death_effect = { REASON = fight }
		add_character_modifier = { 
			modifier = robbed_by_brigands	
			years = 5
		}
		trigger_event = {
			id = sailing.8221
			days = 15
		}		
	}
}

# Swanfleet
sailing.8221 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8221.t
	desc = sailing.8221.desc
	theme = sailing_activity
	override_background = {
		reference = wilderness_wetlands
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = scope:first_mate
		animation = personality_bold
	}	

	option = { 
		name = sailing.8221.a		
		trigger_event = {
			id = sailing.8231
			days = 15
		}		
	}
	option = { 
		name = sailing.8221.b
		trigger_event = {
			id = sailing.8251
			days = 15
		}		
	}
}

# Ost-in-Edhil
sailing.8231 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8231.t
	desc = sailing.8231.desc
	theme = sailing_activity
	override_background = {
		reference = eregion_ruins	
	}
	left_portrait = {
		character = root
		animation = personality_honorable
	}

	option = {
		name = sailing.8231.a
		trigger = {
			learning >= high_skill_rating
		}
		add_learning_lifestyle_xp = medium_lifestyle_experience
		trigger_event = {
			id = sailing.8232
			days = 15
		}		
	}
	option = { 
		name = sailing.8231.b
		trigger = {
			learning < high_skill_rating
		}
		trigger_event = {
			id = sailing.8235
			days = 15
		}		
	}
}

# Ost-in-Edhil - I recognize the place
sailing.8232 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8232.t
	desc = sailing.8232.desc
	theme = sailing_activity
	override_background = {
		reference = eregion_ruins	
	}
	left_portrait = {
		character = root
		animation = personality_honorable
	}

	option = {
		name = sailing.8232.a
		trigger_event = {
			id = sailing.8233
			days = 15
		}		
	}
	option = { 
		name = sailing.8232.b
		trigger_event = {
			id = sailing.8235
			days = 15
		}		
	}
}

# Ost-in-Edhil - Crebain
sailing.8233 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8233.t
	desc = sailing.8233.desc
	theme = sailing_activity
	override_background = {
		reference = eregion_crebain	
	}
	left_portrait = {
		character = root
		animation = fear
	}
	right_portrait = {
		character = scope:first_mate
		animation = fear
	}

	option = { # Hide!
		name = sailing.8233.a
		duel = {
			skill = prowess
			value = medium_skill_rating
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				desc = sailing.8233.a.success	
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8233.toast.a.success
					#add_trait = adventurer
					trigger_event = {
						id = sailing.8234
						days = 15
					}		
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.8233.a.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8233.toast.a.failure
					add_trait = one_eyed
				}				
				trigger_event = {
					id = sailing.8234
					days = 15
				}		
			}
		}	
	}
}

# After crebain
sailing.8234 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8234.t
	desc = sailing.8234.desc
	theme = sailing_activity
	override_background = {
		reference = eregion_ruins	
	}
	left_portrait = {
		character = root
		animation = anger
	}

	option = { 
		name = sailing.8234.a
		random_dummy_gender_effect = yes
		send_interface_toast = {
			left_icon = ROOT
			title = sailing.8234.toast.a.success
			create_artifact_armor_effect = {
				OWNER = root		
				CREATOR = scope:dummy_gender
				SET_ARMOR_TYPE = flag:no
			}
		}
		trigger_event = {
			id = sailing.8235
			days = 15
		}
	}
	option = { 
		name = sailing.8234.b	
		random_dummy_gender_effect = yes		
		send_interface_toast = {
			left_icon = ROOT
			title = sailing.8234.toast.b.success
			create_artifact_armor_effect = {
				OWNER = root		
				CREATOR = scope:dummy_gender
				SET_ARMOR_TYPE = flag:no
			}
		}
		trigger_event = {
			id = sailing.9002
			days = 15
		}
	}
}

# The path to the mountains
sailing.8235 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8235.t
	desc = sailing.8235.desc
	theme = sailing_activity
	override_background = {
		reference = dimril_dale	
	}
	left_portrait = {
		character = root
		animation = disapproval
	}

	option = { 
		name = sailing.8235.a		
		add_learning_skill = 1
		trigger_event = {
			id = sailing.8241
			days = 15
		}
	}

	option = { 
		name = sailing.8235.b		
		add_martial_skill = 1
		trigger_event = {
			id = sailing.8241
			days = 15
		}
	}

	option = { 
		name = sailing.8235.c		
		add_stewardship_skill = 1
		trigger_event = {
			id = sailing.8241
			days = 15
		}
	}

	option = { 
		name = sailing.8235.d		
		add_trait = paranoid
		trigger_event = {
			id = sailing.8241
			days = 15
		}
	}
}

# Moria
sailing.8241 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8241.t
	desc = sailing.8241.desc
	theme = sailing_activity
	override_background = {
		reference = durins_door	
	}
	left_portrait = {
		character = root
		animation = fear
	}

	# Explain the situation
	option = {
		name = sailing.8241.a
		duel = {
			skill = martial
			value = 12
			10 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = sailing.8241.a.success	
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8241.toast.a.success
					add_prestige = major_prestige_gain
				}
				custom_tooltip = sailing.8241.a.success.tt
			}
			90 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.8241.a.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8241.toast.a.failure
					increase_wounds_no_death_effect = { REASON = fight }
				}
				
				custom_tooltip = sailing.8241.a.failure.tt				
			}
		}
	}

	after = {
		trigger_event = {
			id = sailing.9001
			days = 15
		}	
	}
}

# The Angle
sailing.8251 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8251.t
	desc = sailing.8251.desc
	theme = sailing_activity
	override_background = {
		reference = on_river
	}
	left_portrait = {
		character = root
		animation = happiness
	}

	# Fishing at the Angle
	option = {
		name = sailing.8251.a		
		custom_tooltip = sailing.8251.a.desc
		random_list = {
			20 = { 
				modifier = {
					add = 15
					has_trait_xp = {
						trait = lifestyle_mariner
						value < 50
					}
				}		
				modifier = {
					add = 30
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}	
				modifier = {
					add = 45
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8251.toast.a.success
					add_gold = medium_gold_value
					
					add_character_modifier = {
						modifier = ate_good_meal
						days = 365
					}
				}
			}
			50 = { 
				modifier = {
					add = -15
					has_trait_xp = {
						trait = lifestyle_mariner
						value < 50
					}
				}		
				modifier = {
					add = -30
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}	
				modifier = {
					add = -45
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8251.toast.a.failure
					add_character_modifier = {
						modifier = ate_good_meal
						days = 365
					}
				}
			}
		}
	}

	after = {
		trigger_event = {
			id = sailing.8261
			days = 15
		}	
	}
}

# The Last Bridge
sailing.8261 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8261.t
	desc = sailing.8261.desc
	theme = sailing_activity
	override_background = {
		reference = last_bridge	
	}
	right_portrait = {
		character = root
		animation = personality_bold
	}

	option = { 
		name = sailing.8261.a
		trigger_event = {
			id = sailing.8262
			days = 15
		}
	}
}

# The TrollShaws
sailing.8262 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8262.t
	desc = sailing.8262.desc
	theme = sailing_activity
	override_background = {
		reference = fangorn	
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}
	

	option = { 
		name = sailing.8262.a
		if = {
			limit = {
				NOT = { has_character_flag = had_nickname_event}
				lotr_gets_nicknames_trigger = yes
			}
			random = {
				chance = 20
				give_nickname = nick_rhudaur_explorer
				add_character_flag = { flag = had_nickname_event }
			}
		}
		add_piety = 50
		trigger_event = {
			id = sailing.8271
			days = 15
		}
	}
	
	option = { 
		name = sailing.8262.b
		#if = {
		#	limit = {
		#		NOT = { has_character_flag = had_nickname_event}
		#	}
		#	random = {
		#		chance = 30
		#		give_nickname = nick_troll_seeker
		#		add_character_flag = { flag = had_nickname_event }
		#	}
		#}
		add_prestige = 100
		trigger_event = {
			id = sailing.8263
			days = 15
		}
	}
}

# The Trollshaws - Trolls!
sailing.8263 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8263.t
	desc = sailing.8263.desc
	theme = sailing_activity
	override_background = {
		reference = trollshaws	
	}
	lower_center_portrait = {
		character = root
		animation = fear
	}
	right_portrait = {
		character = scope:troll
		animation = marshal
	}
	immediate = {
		
		random_county_in_region = {
			region = middleearth_west_arnor_rhudaur
			title_province = { save_scope_as = rhudaur_province }
		}
		
		create_character = { # Create a new troll
			culture = culture:hill_troll
			faith = faith:way_of_strength
			gender_female_chance = 0
			location = scope:rhudaur_province
			save_scope_as = troll
		}
	}
	# Engage the Trolls
	option = { 
		name = sailing.8263.a
		trigger_event = {			
			id = sailing.8264
			days = 15
		}
		if = {
			limit = {
				NOT = { has_character_flag = had_nickname_event}
			}
			random = {
				chance = 35
				set_nickname_effect = { NICKNAME = nick_troll_seeker }
				add_character_flag = { flag = had_nickname_event }
			}
		}
	}

	# Hide
	option = { 
		name = sailing.8263.b
		trigger_event = {			
			id = sailing.8265
			days = 15
		}
	}

	# Run
	option = { 
		name = sailing.8263.c
		add_trait = craven
		trigger_event = {			
			id = sailing.9002
			days = 15
		}
	}
	

	after = {
		scope:troll = {
			silent_disappearance_effect = yes
		}
	}	
}

# The Trollshaws - Trolls - engaging
sailing.8264 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8264.t
	desc = sailing.8264.desc
	theme = sailing_activity
	override_background = {
		reference = trollshaws	
	}
	left_portrait = {
		character = root
		animation = aggressive_dagger
	}
	right_portrait = {
		character = scope:troll
		animation = dummy
	}
	immediate = {
		random_county_in_region = {
			region = middleearth_west_arnor_rhudaur
			title_province = { save_scope_as = rhudaur_province }
		}
		
		create_character = { # Create a new troll
			culture = culture:hill_troll
			faith = faith:way_of_strength
			gender_female_chance = 0
			location = scope:rhudaur_province
			save_scope_as = troll
		}
	}
	option = {
		name = sailing.8264.a
		duel = {
			skill = prowess
			value = 12
			30 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				random_list = {
					30 = {					
						desc = sailing.8264.a.critical_success
						random_dummy_gender_effect = yes
						send_interface_toast = {
							left_icon = ROOT
							title = sailing.8264.toast.a.critical_success
							add_gold = medium_gold_value
							create_artifact_weapon_effect = {
								OWNER = root		
								CREATOR = scope:dummy_gender
								SET_WEAPON_TYPE = flag:no
							}
						}
						custom_tooltip = sailing.8264.a.critical_success.tt
					}
					70 = {
						desc = sailing.8264.a.success
						send_interface_toast = {
							left_icon = ROOT
							title = sailing.8264.toast.a.success
							add_gold = major_gold_value							
						}						
					}
				}				
				trigger_event = {			
					id = sailing.9001
					days = 15
				}
			}
			70 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.8264.a.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.8264.toast.a.failure
					increase_wounds_no_death_effect = { REASON = fight }
				}
				
				trigger_event = {			
					id = sailing.9002
					days = 15
				}
			}
		}
	}
	

	after = {
		scope:troll = {
			silent_disappearance_effect = yes
		}
	}
}

# The Trollshaws - Trolls - hiding
sailing.8265 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8265.t
	desc = sailing.8265.desc
	theme = sailing_activity
	override_background = {
		reference = trollshaws	
	}
	left_portrait = {
		character = root
		animation = bold
	}
	
	option = {
		name = sailing.8265.a
		add_gold = minor_gold_value
		trigger_event = {			
			id = sailing.9001
			days = 15
		}
	}
}

# The Forsaken Inn: Discarded, but maybe for future exploration events in Eriador...
#sailing.8263 = {
#	type = activity_event
#	content_source = realms_dlc
#	title = sailing.8263.t
#	desc = sailing.8263.desc
#	theme = tavern
#	left_portrait = {
#		character = root
#		animation = personality_bold
#	}
#
#	option = { 
#		name = sailing.8263.a
#		trigger = {
#			is_orc = no
#		}
#		add_trait = drunkard
#		random = {
#			chance = 50
#			random_ruler = {
#					limit = {
#						NOR = {
#							this = root
#							this = root.liege_or_court_owner
#							this = root.top_liege
#						}						
#						in_diplomatic_range = root
#					}
#					save_scope_as = secret_ruler
#				}
#				random_list = {
#					# Deviant
#					100 = {
#						trigger = {
#							scope:secret_ruler = {				
#								NOR = {
#									has_trait = celibate
#									has_trait = chaste
#									any_secret = { secret_type = secret_deviant }
#									has_trait = deviant
#								}
#							}
#						}
#						modifier = {
#							scope:secret_ruler = {
#								has_trait = lustful
#							}
#							add = 50
#						}
#						scope:secret_ruler = {
#							give_deviant_secret_or_trait_effect = yes
#						}
#					}
#					# Homosexual
#					100 = {
#						trigger = {
#							scope:secret_ruler = {
#								is_male = yes
#								OR = {
#									has_sexuality = homosexual
#									has_sexuality = bisexual
#								}
#								NOT = { has_trait = celibate }
#								NOR = {
#									any_secret = { secret_type = secret_homosexual }
#									has_trait = sodomite
#								}
#							}
#						}
#						modifier = {
#							scope:secret_ruler = {
#								has_trait = chaste
#							}
#							add = -50
#						}
#						scope:secret_ruler = {
#							give_homosexual_secret_or_nothing_effect = yes
#						}
#					}
#					# Cannibal
#					100 = {
#						trigger = {
#							scope:secret_ruler = {
#								OR = {
#									has_trait = lunatic
#									has_trait = possessed
#									ai_compassion <= high_negative_ai_value
#								}
#								NOR = {
#									any_secret = { secret_type = secret_cannibal }
#									has_trait = cannibal
#								}
#							}
#						}
#						ai_compassion_target_modifier = { VALUE = -50 }
#						scope:secret_ruler = {
#							give_cannibal_secret_or_trait_effect = yes
#						}
#					}
#					# Non-believer
#					100 = {
#						trigger = {
#							scope:secret_ruler = {
#								NOR = {
#									has_trait = zealous
#									any_secret = { secret_type = secret_non_believer }
#									has_character_modifier = known_non_believer
#								}
#							}
#						}
#						ai_zeal_target_modifier = { VALUE = -50 }
#						scope:secret_ruler = {
#							give_non_believer_secret_effect = yes
#						}
#					}
#					# Witch
#					100 = {
#						trigger = {
#							scope:secret_ruler = {
#								NOR = {
#									has_trait = zealous
#									any_secret = { secret_type = secret_witch }
#									has_trait = witch
#								}
#							}
#						}
#						modifier = {
#							scope:secret_ruler = {
#								OR = {
#									has_trait = lifestyle_mystic
#									has_trait = lifestyle_herbalist
#								}
#							}
#							add = 50
#						}
#						scope:secret_ruler = {
#							ai_greed_target_modifier = { VALUE = 50 }
#						}
#					}
#				}
#			send_interface_toast = {
#				left_icon = ROOT
#				title = sailing.8263.toast.a.success
#				add_hook = {
#					type = weak_blackmail_hook
#					target = scope:secret_ruler
#				}
#			}
#		}
#
#		trigger_event = {
#			id = sailing.8271
#			days = 15
#		}
#	}
#
#	option = {
#		name = sailing.8263.b
#		duel = {
#			skill = intrigue
#			40 = {		
#				compare_modifier = {
#					value = scope:duel_value
#					multiplier = 3.5
#					min = -49
#				}
#				desc = sailing.8263.b.success	
#				send_interface_toast = {
#					left_icon = ROOT
#					title = sailing.8263.toast.b.success
#					add_gold = medium_gold_value
#					add_dread = medium_dread
#				}
#				
#			}
#			60 = {		
#				compare_modifier = {
#					value = scope:duel_value
#					multiplier = -3.5
#					min = -49
#				}
#				desc = sailing.8263.b.failure
#				send_interface_toast = {
#					left_icon = ROOT
#					title = sailing.8263.toast.b.failure
#					increase_wounds_no_death_effect = { REASON = fight }
#				}			
#			}
#		}
#	}
#
#	option = {
#		name = sailing.8263.c
#		trigger = {
#			is_orc = yes
#		}
#		duel = {
#			skill = prowess
#			25 = {		
#				compare_modifier = {
#					value = scope:duel_value
#					multiplier = 3.5
#					min = -49
#				}
#				desc = sailing.8263.c.success
#				random_dummy_gender_effect = yes
#				send_interface_toast = {
#					left_icon = ROOT
#					title = sailing.8263.toast.c.success
#					add_gold = minor_gold_value
#					
#					create_artifact_weapon_effect = {
#						OWNER = root		
#						CREATOR = scope:dummy_gender
#						SET_WEAPON_TYPE = flag:no
#					}
#					add_dread = medium_dread
#				}
#				
#			}
#			75 = {		
#				compare_modifier = {
#					value = scope:duel_value
#					multiplier = -3.5
#					min = -49
#				}
#				desc = sailing.8263.c.failure
#				send_interface_toast = {
#					left_icon = ROOT
#					title = sailing.8263.toast.c.failure
#					increase_wounds_no_death_effect = { REASON = fight }
#				}			
#			}
#		}
#	}
#
#	after = {
#		trigger_event = {
#			id = sailing.8271
#			days = 15
#		}
#	}
#	
#}

# Cameth Brin
sailing.8271 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.8271.t
	desc = sailing.8271.desc
	theme = sailing_activity
	override_background = {
		reference = carrock	
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}

	option = { 
		name = sailing.8271.a
		
		add_trait = architect
		random = {
			chance = 50		
			add_trait = possessed_1			
		}			
		
		trigger_event = {
			id = sailing.9001
			days = 15
		}
	}

	option = { 
		name = sailing.8271.b
		
		random = {
			chance = 50			
			add_trait = rough_terrain_expert
		}	

		trigger_event = {
			id = sailing.9001
			days = 15
		}
	}

	
	option = { 
		name = sailing.8271.c
		
		trigger_event = {
			id = sailing.9002
			days = 15
		}
	}
}

############################
## Random events in port
## 9000-9999
## by Jamie-san
############################

#9001: successful expedition (by Jamie-san)
#9002: unsuccessful expedition (by ispanets)

# Successful mission
sailing.9001 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.9001.t
	desc = sailing.9001.desc
	theme = sailing_activity
	
	left_portrait = {
		character = root
		animation = happiness
	}
	
	right_portrait = {
		character = scope:first_mate
		animation = happiness
	}

	option = { # I'm back!
		name = sailing.9001.a
	}

	immediate = {
		hidden_effect = {
			# ispanets: Experience
			add_martial_lifestyle_xp = minor_lifestyle_xp
			
			# ispanets: Charter
			# - Pay for damage
			# - Return charter and get money back
			if = {
				limit = {
					has_character_flag = hired_a_boat
				}
				repair_ship = yes
				return_charter = yes
			}

			# ispanets: Owns a ship
			# - Repair is managed by sailing.1004 before next journey
			# but if there has been a shipwreck, I need to remove the ship
			if = {
				limit = {
					AND = {
						has_character_flag = shipwreck						
						NOT = {
							has_character_flag = hired_a_boat
						}
					}
				}
				remove_boat = yes
			}		
			# - Returning is not necessary when owning

			# Mariner skill
			if = {
				limit = { has_trait = lifestyle_mariner }
				scope:activity = {
					add_activity_log_entry = {
						key = gained_sailor_xp_log_title
						tags = { good }
						# this line below adds the entry to the Effects section of the conclusion UI
						show_in_conclusion = yes
						character = root
						
						root = {
							add_trait_xp = {
								trait = lifestyle_mariner
								value = 5
							}
						}
					}
				}
			}	
			else = {
				scope:activity = {
					add_activity_log_entry = {
						key = gained_sailor_trait_log_title
						tags = { good }
						# this line below adds the entry to the Effects section of the conclusion UI
						show_in_conclusion = yes
						character = root
						
						root = { add_trait = lifestyle_mariner }
					}
				}
			} 
		}
	}

	after = {
		#End the activity
		trigger_event = sailing.9003
	}
}

# UNSUCCESSFUL EXPEDITION
sailing.9002 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.9002.t
	desc = sailing.9002.desc
	theme = sailing_activity
	
	left_portrait = {
		character = root
		animation = sadness
	}
	right_portrait = {
		character = scope:first_mate
		animation = sadness
	}

	option = { # I'm back!
		name = sailing.9002.a
	}

	immediate = {
		hidden_effect = {
			# ispanets: No experience
			
			# ispanets: Charter
			# - Pay for damage
			# - Return charter and get money back
			if = {
				limit = {
					has_character_flag = hired_a_boat
				}
				repair_ship = yes
				return_charter = yes
			}

			# ispanets: Owns a ship
			# - Repair is managed by sailing.1004 before next journey
			# but if there has been a shipwreck, I need to remove the ship
			if = {
				limit = {
					AND = {
						has_character_flag = shipwreck						
						OR = {														
							has_character_modifier = small_boat_modifier
							has_character_modifier = medium_boat_modifier
							has_character_modifier = large_boat_modifier
							has_character_modifier = small_damaged_boat_modifier
							has_character_modifier = medium_damaged_boat_modifier
							has_character_modifier = large_damaged_boat_modifier
						}
					}
				}
				remove_boat = yes
			}			
			# - Returning is not necessary when owning

			# Mariner skill
			if = {
				limit = { has_trait = lifestyle_mariner }
				scope:activity = {
					add_activity_log_entry = {
						key = sailing_completed_log
						tags = { good }
						# this line below adds the entry to the Effects section of the conclusion UI
						show_in_conclusion = yes
						character = root
						
						root = {
							add_trait_xp = {
								trait = lifestyle_mariner
								value = 5
							}
						}
					}
				}
			}	
			else = {
				scope:activity = {
					add_activity_log_entry = {
						key = sailing_completed_log
						tags = { good }
						# this line below adds the entry to the Effects section of the conclusion UI
						show_in_conclusion = yes
						character = root
						
						root = { add_trait = lifestyle_mariner }
					}
				}
			} 
		}
	}

	after = {
		#End the activity
		trigger_event = sailing.9003
	}
}

# WRAP-UP EVENT 
sailing.9003 = {
	hidden = yes	
	immediate = {
		scope:activity = {
			every_attending_character = {
				# Mariner skill
				if = {
					limit = { has_trait = lifestyle_mariner }
					add_trait_xp = {
						trait = lifestyle_mariner
						value = 5
					}
				}
				else = {
					add_trait = lifestyle_mariner
				}
			}
		}	
	
		sailing_completed_log_entry_effect = yes			
		scope:host = {
			if = {
				limit = { has_character_modifier = small_boat_modifier }
				remove_character_modifier = small_boat_modifier
			}
			if = {
				limit = { has_character_modifier = medium_boat_modifier }
				remove_character_modifier = medium_boat_modifier
			}
			if = {
				limit = { has_character_modifier = large_boat_modifier }
				remove_character_modifier = large_boat_modifier
			}
			if = {
				limit = { has_character_modifier = small_damaged_boat_modifier }
				remove_character_modifier = small_damaged_boat_modifier
			}
			if = {
				limit = { has_character_modifier = medium_damaged_boat_modifier }
				remove_character_modifier = medium_damaged_boat_modifier
			}
			if = {
				limit = { has_character_modifier = large_damaged_boat_modifier }
				remove_character_modifier = large_damaged_boat_modifier
			}
			if = {
				limit = { has_character_flag = hired_a_boat }
				remove_character_flag = hired_a_boat
			}
			if = { 
				limit = { has_character_flag = sailing_exploration }
				remove_character_flag = sailing_exploration
			}
			if = { 
				limit = { has_character_flag = river_sailing_exploration }
				remove_character_flag = river_sailing_exploration
			}
			if = { 
				limit = { has_character_flag = meneltarma_on_course }
				remove_character_flag = meneltarma_on_course
			}
			if = { 
				limit = { has_character_flag = sailing_piracy_mission }
				remove_character_flag = sailing_piracy_mission
			}
		}
		scope:activity = {	
			hidden_effect = { skip_activity_phase = yes }
		}
	}
}

###########################
### ispanets: Piracy ###
### 9100-9200
### 9100: Start piracy random events

### 9110: Coastal Province Raid
### 9111: Guards detect you before arriving at the coast
### 9114: Arrives at the coast

### 9120: Merchant ship encounter

### 9130: Another pirate ship encounter
### 9131: Duel won to the pirate leader

###########################
sailing.9100 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.9100.t
	desc = sailing.9100.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	
	left_portrait = {
		character = root
		animation = rage
	}
	right_portrait = {
		character = scope:first_mate
		animation = rage
	}

	option = {
		name = sailing.9100.a
		trigger_event = {
			id = sailing.9110
			days = 15
		}
	}

	option = {
		name = sailing.9100.b
		trigger_event = {
			on_action = first_random_piracy_events_at_sea
			days = 15
		}
	}
}

# ispanets: Coastal Provinces Raid
sailing.9110 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.9110.t
	desc = sailing.9110.desc
	theme = sailing_activity
	override_background = {
		reference = royal_shipyard
	}
	
	left_portrait = {
		character = root
		animation = rage
	}
	right_portrait = {
		character = scope:first_mate
		animation = rage
	}
	
	immediate = {
		random_province = {
			limit = {
				is_coastal = yes
				NOR = {
					culture = root.location.culture
					culture = root.culture
					trigger_if = {
						limit = {
							exists = county.empire
							exists = root.location.empire
						}
						county.empire = root.location.empire
					}
					trigger_if = {
						limit = { 
							exists = county.kingdom
							exists = root.location.kingdom
						}
						county.kingdom = root.location.kingdom
					}
					geographical_region = middleearth_valinor
					culture = culture:wastelands
				}
			}
			save_scope_as = piracy_destination_1
		}
		random_province = {
			limit = {
				is_coastal = yes
				NOR = {
					this = scope:piracy_destination_1
					culture = root.location.culture
					culture = root.culture
					trigger_if = {
						limit = {
							exists = county.empire
							exists = root.location.empire
						}
						county.empire = root.location.empire
					}
					trigger_if = {
						limit = { 
							exists = county.kingdom
							exists = root.location.kingdom
						}
						county.kingdom = root.location.kingdom
					}
					geographical_region = middleearth_valinor
					culture = culture:wastelands
				}
			}
			save_scope_as = piracy_destination_2
		}
		random_province = {
			limit = {
				is_coastal = yes
				NOR = {
					this = scope:piracy_destination_1
					this = scope:piracy_destination_2
					county.culture = root.culture
					trigger_if = {
						limit = {
							exists = county.empire
							exists = root.location.empire
						}
						county.empire = root.location.empire
					}
					trigger_if = {
						limit = { 
							exists = county.kingdom
							exists = root.location.kingdom
						}
						county.kingdom = root.location.kingdom
					}
					geographical_region = middleearth_valinor
					culture = culture:wastelands
				}
			}
			save_scope_as = piracy_destination_3
		}
	}

	option = {
		name = sailing.9110.a
		scope:piracy_destination_1.barony_controller = {
			add_opinion = {
				modifier = angry_opinion
				target = root
				opinion = -30
			}
			save_scope_as = selected_piracy_destination_baron
		}
		scope:piracy_destination_1 = {
			save_scope_as = selected_piracy_destination
		}
	}
	option = {
		name = sailing.9110.b
		scope:piracy_destination_2.barony_controller = {
			add_opinion = {
				modifier = angry_opinion
				target = root
				opinion = -30
			}
			save_scope_as = selected_piracy_destination_baron
		}
		scope:piracy_destination_2 = {
			save_scope_as = selected_piracy_destination
		}
	}
	option = {
		name = sailing.9110.c
		scope:piracy_destination_3.barony_controller = {
			add_opinion = {
				modifier = angry_opinion
				target = root
				opinion = -30
			}
			save_scope_as = selected_piracy_destination_baron
		}
		scope:piracy_destination_3 = {
			save_scope_as = selected_piracy_destination
		}
	}
	
	after = {
		trigger_event = {
			on_action = coastal_piracy_events
			days = 15
		}
	}
}

# Encounter before arriving
sailing.9111 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.9111.t
	desc = sailing.9111.desc
	theme = sailing_activity
	override_background = {
		reference = black_ship
	}
	
	left_portrait = {
		character = root
		animation = anger
	}
	right_portrait = {
		character = scope:first_mate
		animation = anger
	}

	option = { # Attack (undamaged ship)
		name = sailing.9111.a
		trigger = { owns_an_undamaged_boat = yes }		
		duel = {
			skill = martial
			value = 12
			50 = { #Success
				compare_modifier = {
					value = {
						value = scope:duel_value
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value < 50
								}
							}
							add = 20
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 50
									value < 100
								}
							}
							add = 40
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 100
								}
							}
							add = 60
						}
					}
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9111.a.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9111.toast.a.success
					add_martial_lifestyle_xp = 100
					add_prestige = minor_prestige_gain
					trigger_event = {
						id = sailing.9114
						days = 15
					}
				}
			}
			50 = { #Failure
				compare_modifier = {
					value = {
						value = scope:duel_value
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value < 50
								}
							}
							add = -20
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 50
									value < 100
								}
							}
							add = -40
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 100
								}
							}
							add = -60
						}
					}
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9111.a.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9111.toast.a.failure
					damage_ship = true
					increase_wounds_effect = { REASON = fight }
					trigger_event = {
						id = sailing.9114
						days = 15
					}
				}
			}
		}
	}	

	option = { # Attack (damaged ship)
		name = sailing.9111.b
		trigger = { owns_an_undamaged_boat = no }		
		duel = {
			skill = martial
			value = 12
			25 = { #Success
				compare_modifier = {
					value = {
						value = scope:duel_value
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value < 50
								}
							}
							add = 20
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 50
									value < 100
								}
							}
							add = 40
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 100
								}
							}
							add = 60
						}
					}
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9111.b.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9111.toast.b.success
					add_prowess_skill = 1
					add_martial_lifestyle_xp = 200
					trigger_event = {
						id = sailing.9114
						days = 15
					}
				}
			}
			75 = { #Failure - shipwreck
				compare_modifier = {
					value = {
						value = scope:duel_value
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value < 50
								}
							}
							add = -20
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 50
									value < 100
								}
							}
							add = -40
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 100
								}
							}
							add = -60
						}
					}
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9111.b.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9111.toast.b.failure					
					increase_wounds_effect = { REASON = fight }
					damage_ship = yes
					add_character_flag = shipwreck		
					trigger_event = {
						id = sailing.9002
						days = 15
					}
				}
			}
		}
	}

	option = { # Naval maneuvre (undamaged)
		name = sailing.9111.c
		trigger = { owns_an_undamaged_boat = yes }
		random_list = {
			50 = { #Success
				modifier = {
					add = 20
					has_trait_xp = {
						trait = lifestyle_mariner
						value < 50
					}
				}		
				modifier = {
					add = 40
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}	
				modifier = {
					add = 60
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				desc = sailing.9111.c.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9111.toast.c.success
					add_martial_lifestyle_xp = 50
					trigger_event = {
						id = sailing.9114
						days = 15
					}
				}
			}
			50 = {
				modifier = {
					add = -20
					has_trait_xp = {
						trait = lifestyle_mariner
						value < 50
					}
				}		
				modifier = {
					add = -40
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}	
				modifier = {
					add = -60
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				desc = sailing.9111.c.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9111.toast.c.failure
					increase_wounds_effect = { REASON = fight }
					damage_ship = yes				
					trigger_event = { # Come back home no experience
						id = sailing.9002
						days = 15
					}
				}
			}
		}
	}

	option = { # Naval maneuvre (damaged)
		name = sailing.9111.d
		trigger = { owns_an_undamaged_boat = no }
		random_list = {
			50 = { #Success
				modifier = {
					add = 20
					has_trait_xp = {
						trait = lifestyle_mariner
						value < 50
					}
				}		
				modifier = {
					add = 40
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}	
				modifier = {
					add = 60
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				desc = sailing.9111.d.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9111.toast.d.success
					add_martial_lifestyle_xp = 100
					trigger_event = {
						id = sailing.9114
						days = 15
					}
				}
			}
			50 = { # Shipwreck
				modifier = {
					add = -20
					has_trait_xp = {
						trait = lifestyle_mariner
						value < 50
					}
				}		
				modifier = {
					add = -40
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 50
						value < 100
					}
				}	
				modifier = {
					add = -60
					has_trait_xp = {
						trait = lifestyle_mariner
						value >= 100
					}
				}
				desc = sailing.9111.d.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9111.toast.d.failure
					increase_wounds_effect = { REASON = fight }
					damage_ship = yes			
					add_character_flag = shipwreck		
					trigger_event = { # Come back home no experience
						id = sailing.9002
						days = 15
					}
				}
			}
		}
	}

	option = { # Retreat!
		name = sailing.9111.e
		trigger_event = {
			id = sailing.9002
			days = 15
		}
	}
}

# Arrived
sailing.9114 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.9114.t
	desc = sailing.9114.desc
	theme = sailing_activity
	
	left_portrait = {
		character = root
		animation = rage
	}
	right_portrait = {
		character = scope:first_mate
		animation = rage
	}
	
	immediate = {
		scope:selected_piracy_destination_baron = {
			random_courtier = { save_scope_as = local_villager }
		}
	}

	option = { # Sabotage the production
		name = sailing.9114.a	
		duel = {
			skill = martial
			value = average_skill_rating
			35 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9114.a.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9114.toast.a.success					
					add_dread = minor_dread_gain
					scope:selected_piracy_destination = {
						add_province_modifier = {
							modifier = province_sabotaged_by_pirates
							years = 1
						}						
					}
					
					trigger_event = {
						id = sailing.9001
						days = 15
					}
				}
			}
			65 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.9114.a.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9114.toast.a.failure
					add_dread = minor_dread_loss
					add_prestige = minor_prestige_loss
					increase_wounds_effect = { REASON = fight }					
					trigger_event = {
						id = sailing.9002
						days = 15
					}
				}
			}
		}
	}

	option = { # Pillage settlement
		name = sailing.9114.b
		duel = {
			skill = stewardship
			value = average_skill_rating
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9114.b.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9114.toast.b.success
					add_dread = minor_dread_gain					
					add_gold = medium_gold_value
					
					trigger_event = {
						id = sailing.9001
						days = 15
					}
				}
			}
			50 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.8102.b.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9114.toast.b.failure
					add_dread = minor_dread_loss
					increase_wounds_effect = { REASON = fight }
					
					trigger_event = {
						id = sailing.9002
						days = 15
					}
				}
			}
		}
	}


	option = { # Duel the baron
		name = sailing.9114.c
		duel = {
			skill = prowess
			value = average_skill_rating
			20 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9114.c.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9114.toast.c.success
					# Wound baron
					scope:selected_piracy_destination_baron = {
						add_opinion = {
							modifier = angry_opinion
							target = root
							opinion = -100
						}
						add_prestige = -100
						increase_wounds_effect = { REASON = duel }
					}
					add_prestige = 100
					
					trigger_event = {
						id = sailing.9001
						days = 15
					}
				}
			}
			80 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.9114.d.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9114.toast.d.failure	
					scope:selected_piracy_destination_baron = {
						add_opinion = {
							modifier = angry_opinion
							target = root
							opinion = -30
						}
						add_prestige = 100
					}									
					increase_wounds_effect = { REASON = duel }
					add_prestige = -100
					
					trigger_event = {
						id = sailing.9002
						days = 15
					}
				}
			}
		}
	}


	option = { # Hijack villagers
		name = sailing.9114.d

		duel = {
			skill = intrigue
			value = average_skill_rating
			30 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9114.d.success
				
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9114.toast.d.success	
					
		
					# # Try to fetch an existing character					
					# create_character = {
						# template = servant_character
						# location = scope:selected_piracy_destination.capital_province
						# culture = scope:selected_piracy_destination.culture
						# faith = scope:selected_piracy_destination.faith
						# dynasty = none
						# trait = peasant_leader 
						# save_scope_as = different_culture_peasant	
					# }
							
					# scope:different_culture_peasant = {
						# court_event_character_flag_effect = yes
					# }
					imprison_character_effect = {
						TARGET = scope:local_villager
						IMPRISONER = root
					}		
					
					trigger_event = {
							id = sailing.9001
							days = 15
					}				
				}				
			}
			60 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = sailing.9114.d.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9114.toast.d.failure					
					add_dread = minor_dread_loss
					increase_wounds_effect = { REASON = fight }
					
					trigger_event = {
						id = sailing.9002
						days = 15
					}
				}
			}
		}
	}
	option = {
		name = sailing.9114.e
		trigger_event = {
			id = sailing.9002
			days = 15
		}
	}

}

# Merchant ship encounter
sailing.9120 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.9120.t
	desc = sailing.9120.desc
	theme = sailing_activity
	override_background = {
		reference = ocean
	}
	
	left_portrait = {
		character = root
		animation = anger
	}
	right_portrait = {
		character = scope:first_mate
		animation = anger
	}

	option = { # Attack (undamaged ship)
		name = sailing.9120.a
		trigger = { owns_an_undamaged_boat = yes }		
		duel = {
			skill = martial
			value = 12
			50 = { #Success
				compare_modifier = {
					value = {
						value = scope:duel_value
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value < 50
								}
							}
							add = 20
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 50
									value < 100
								}
							}
							add = 40
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 100
								}
							}
							add = 60
						}
					}
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9120.a.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9120.toast.a.success
					add_martial_lifestyle_xp = 100
					add_gold = minor_gold_value
					trigger_event = {
						on_action = following_random_piracy_events_at_sea
						days = 15
					}
				}
				# Mariner skill
				if = {
					limit = { has_trait = lifestyle_mariner }
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = {
								add_trait_xp = {
									trait = lifestyle_mariner
									value = 5
								}
							}
						}
					}
				}	
				else = {
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = { add_trait = lifestyle_mariner }
						}
					}
				} 
			}
			50 = { #Failure
				compare_modifier = {
					value = {
						value = scope:duel_value
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value < 50
								}
							}
							add = -20
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 50
									value < 100
								}
							}
							add = -40
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 100
								}
							}
							add = -60
						}
					}
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9120.a.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9120.toast.a.failure
					damage_ship = true
					increase_wounds_effect = { REASON = fight }
					trigger_event = {
						on_action = following_random_piracy_events_at_sea
						days = 15
					}
				}
			}
		}
	}	

	option = { # Attack (damaged ship)
		name = sailing.9120.b
		trigger = { owns_an_undamaged_boat = no }		
		duel = {
			skill = martial
			value = 12
			25 = { #Success
				compare_modifier = {
					value = {
						value = scope:duel_value
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value < 50
								}
							}
							add = 20
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 50
									value < 100
								}
							}
							add = 40
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 100
								}
							}
							add = 60
						}
					}
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9120.b.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9120.toast.b.success
					add_prowess_skill = 1
					add_martial_lifestyle_xp = 200
					trigger_event = {
						on_action = following_random_piracy_events_at_sea
						days = 15
					}
				}
				# Mariner skill
				if = {
					limit = { has_trait = lifestyle_mariner }
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = {
								add_trait_xp = {
									trait = lifestyle_mariner
									value = 5
								}
							}
						}
					}
				}	
				else = {
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = { add_trait = lifestyle_mariner }
						}
					}
				} 
			}
			75 = { #Failure - shipwreck
				compare_modifier = {
					value = {
						value = scope:duel_value
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value < 50
								}
							}
							add = -20
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 50
									value < 100
								}
							}
							add = -40
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 100
								}
							}
							add = -60
						}
					}
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9120.b.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9120.toast.b.failure					
					increase_wounds_effect = { REASON = fight }
					damage_ship = yes
					add_character_flag = shipwreck		
					trigger_event = {
						id = sailing.9002
						days = 15
					}
				}
			}
		}
	}

	option = { # Hijack (undamaged ship)
		name = sailing.9120.c
		trigger = { owns_an_undamaged_boat = yes }
		duel = {
			skill = intrigue
			value = 12
			50 = { #Success
				compare_modifier = {
					value = {
						value = scope:duel_value
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value < 50
								}
							}
							add = 20
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 50
									value < 100
								}
							}
							add = 40
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 100
								}
							}
							add = 60
						}
					}
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9120.c.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9120.toast.c.success
					capital_province = {
						add_province_modifier = {
							modifier = merchant_ship_hijacking
							days = 365
						}
					}
					trigger_event = {
						on_action = following_random_piracy_events_at_sea
						days = 15
					}
				}
				# Mariner skill
				if = {
					limit = { has_trait = lifestyle_mariner }
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = {
								add_trait_xp = {
									trait = lifestyle_mariner
									value = 5
								}
							}
						}
					}
				}	
				else = {
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = { add_trait = lifestyle_mariner }
						}
					}
				} 
			}
			50 = { #Failure - returning home
				compare_modifier = {
					value = {
						value = scope:duel_value
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value < 50
								}
							}
							add = -20
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 50
									value < 100
								}
							}
							add = -40
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 100
								}
							}
							add = -60
						}
					}
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9120.c.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9120.toast.c.failure
					increase_wounds_effect = { REASON = fight }
					trigger_event = {
						id = sailing.9002
						days = 15
					}
				}
			}
		}
	}

	option = { # Hijack (damaged ship)
		name = sailing.9120.d
		trigger = { owns_an_undamaged_boat = no }
		duel = {
			skill = intrigue
			value = 12
			25 = { #Success
				compare_modifier = {
					value = {
						value = scope:duel_value
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value < 50
								}
							}
							add = 20
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 50
									value < 100
								}
							}
							add = 40
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 100
								}
							}
							add = 60
						}
					}
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9120.d.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9120.toast.d.success
					capital_province = {
						add_province_modifier = {
							modifier = merchant_ship_hijacking
							days = 365
						}
					}
					trigger_event = {
						on_action = following_random_piracy_events_at_sea
						days = 15
					}
				}
				# Mariner skill
				if = {
					limit = { has_trait = lifestyle_mariner }
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = {
								add_trait_xp = {
									trait = lifestyle_mariner
									value = 5
								}
							}
						}
					}
				}	
				else = {
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = { add_trait = lifestyle_mariner }
						}
					}
				} 
			}
			75 = { #Failure - returning home
				compare_modifier = {
					value = {
						value = scope:duel_value
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value < 50
								}
							}
							add = -20
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 50
									value < 100
								}
							}
							add = -40
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 100
								}
							}
							add = -60
						}
					}
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9120.d.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9120.toast.d.failure
					increase_wounds_effect = { REASON = fight }
					trigger_event = {
						id = sailing.9002
						days = 15
					}
				}
			}
		}
	}

	option = { # Retreat!
		name = sailing.9120.e
		trigger_event = {
			id = sailing.9002
			days = 15
		}
	}
}

# Pirate ship encounter
sailing.9130 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.9130.t
	desc = sailing.9130.desc
	theme = sailing_activity
	override_background = {
		reference = black_ship
	}
	
	left_portrait = {
		character = root
		animation = anger
	}
	right_portrait = {
		character = scope:first_mate
		animation = anger
	}
	trigger = {
		exists = scope:selected_piracy_destination
	}

	immediate = {
		create_character = {
			template = errant_soldier_character
			location = capital_province
			culture = scope:selected_piracy_destination.culture
			faith = scope:selected_piracy_destination.faith
			dynasty = none
			trait = lunatic_1
			save_scope_as = dueled_pirate
		}
		random_province = {
			limit = {
				is_coastal = yes
				NOT = {
					culture = root.location.culture	
					culture = root.culture
					trigger_if = {
						limit = {
							exists = county.empire
							exists = root.location.empire
						}
						county.empire = root.location.empire
					}
					trigger_if = {
						limit = { 
							exists = county.kingdom
							exists = root.location.kingdom
						}
						county.kingdom = root.location.kingdom
					}
				}				
			}
			save_scope_as = selected_piracy_destination
		}
	}

	option = { # Attack (undamaged ship)
		name = sailing.9130.a
		trigger = { owns_an_undamaged_boat = yes }		
		duel = {
			skill = martial
			value = high_skill_rating
			50 = { #Success
				compare_modifier = {
					value = {
						value = scope:duel_value
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value < 50
								}
							}
							add = 20
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 50
									value < 100
								}
							}
							add = 40
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 100
								}
							}
							add = 60
						}
					}
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9130.a.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9130.toast.a.success
					add_martial_lifestyle_xp = 100
					add_prestige = minor_prestige_gain
					add_dread = minor_dread_gain
					trigger_event = {
						on_action = following_random_piracy_events_at_sea
						days = 15
					}
				}
				# Mariner skill
				if = {
					limit = { has_trait = lifestyle_mariner }
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = {
								add_trait_xp = {
									trait = lifestyle_mariner
									value = 5
								}
							}
						}
					}
				}	
				else = {
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = { add_trait = lifestyle_mariner }
						}
					}
				} 
			}
			50 = { #Failure
				compare_modifier = {
					value = {
						value = scope:duel_value
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value < 50
								}
							}
							add = -20
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 50
									value < 100
								}
							}
							add = -40
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 100
								}
							}
							add = -60
						}
					}
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9130.a.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9130.toast.a.failure
					damage_ship = true
					add_prestige = minor_prestige_loss
					increase_wounds_effect = { REASON = fight }
					trigger_event = {
						on_action = following_random_piracy_events_at_sea
						days = 15
					}
				}
			}
		}
	}	

	option = { # Attack (damaged ship)
		name = sailing.9130.b
		trigger = { owns_an_undamaged_boat = no }		
		duel = {
			skill = martial
			value = high_skill_rating
			25 = { #Success
				compare_modifier = {
					value = {
						value = scope:duel_value
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value < 50
								}
							}
							add = 20
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 50
									value < 100
								}
							}
							add = 40
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 100
								}
							}
							add = 60
						}
					}
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9130.b.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9130.toast.b.success
					add_prowess_skill = 1
					add_martial_lifestyle_xp = 100					
					add_prestige = minor_prestige_gain
					add_dread = minor_dread_gain
					trigger_event = {
						on_action = following_random_piracy_events_at_sea
						days = 15
					}
				}
				# Mariner skill
				if = {
					limit = { has_trait = lifestyle_mariner }
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = {
								add_trait_xp = {
									trait = lifestyle_mariner
									value = 5
								}
							}
						}
					}
				}	
				else = {
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = { add_trait = lifestyle_mariner }
						}
					}
				} 
			}
			75 = { #Failure - shipwreck
				compare_modifier = {
					value = {
						value = scope:duel_value
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value < 50
								}
							}
							add = -20
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 50
									value < 100
								}
							}
							add = -40
						}
						if = {
							limit = {
								has_trait_xp = {
									trait = lifestyle_mariner
									value >= 100
								}
							}
							add = -60
						}
					}
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9130.b.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9130.toast.b.failure					
					increase_wounds_effect = { REASON = fight }
					damage_ship = yes
					add_character_flag = shipwreck		
					trigger_event = {
						id = sailing.9002
						days = 15
					}
				}
			}
		}
	}

	option = { # Duel the Pirate Leader
		name = sailing.9130.c
		
		duel = {
			skill = prowess
			value = 12
			35 = { #Success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9130.c.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9130.toast.c.success
					add_prestige = 100
					trigger_event = sailing.9131
				}
				# Mariner skill
				if = {
					limit = { has_trait = lifestyle_mariner }
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = {
								add_trait_xp = {
									trait = lifestyle_mariner
									value = 5
								}
							}
						}
					}
				}	
				else = {
					scope:activity = {
						add_activity_log_entry = {
							key = sailing_completed_log
							tags = { good }
							# this line below adds the entry to the Effects section of the conclusion UI
							show_in_conclusion = yes
							character = root
							
							root = { add_trait = lifestyle_mariner }
						}
					}
				} 
			}
			65 = { #Failure - returning home
				compare_modifier = {
					value = scope:duel_value						
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9130.c.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9130.toast.c.failure					
					increase_wounds_effect = { REASON = duel }
					trigger_event = {
						id = sailing.9002
						days = 15
					}
				}
			}
		}
	}

	option = { # Retreat!
		name = sailing.9130.d
		trigger_event = {
			id = sailing.9002
			days = 15
		}
	}
}

sailing.9131 = {
	type = activity_event
	content_source = realms_dlc
	title = sailing.9131.t
	desc = sailing.9131.desc
	theme = sailing_activity
	override_background = {
		reference = black_ship
	}
	
	left_portrait = {
		character = root
		animation = anger
	}
	right_portrait = {
		character = scope:dueled_pirate
		animation = anger
	}

	option = { # Imprison him!
		name = sailing.9131.a
		add_trait = whip_master
		imprison = {
			target = scope:dueled_pirate
			type = dungeon
		}
	}

	option = { # Kill him!
		name = sailing.9131.b
		add_trait = sadistic
		execute_prisoner_effect = {
			VICTIM = scope:dueled_pirate
			EXECUTIONER = root
		}
	}

	option = { # Bribe him!
		name = sailing.9131.c
		
		send_interface_toast = {			
			left_icon = ROOT
			title = sailing.9131.toast.c.success
			remove_short_term_gold = medium_gold_value				
			create_character = {
				template = errant_soldier_character
				location = scope:activity.activity_location
				culture = scope:selected_piracy_destination.culture
				faith = scope:selected_piracy_destination.faith
				dynasty = none
				trait = lifestyle_mariner
				save_scope_as = dueled_pirate
			}
			scope:dueled_pirate = { set_employer = root }
		}	
	}

	option = { # Bribe his fleet!
		name = sailing.9131.d
		duel = {
			skill = diplomacy
			value = high_skill_rating
			50 = { #Success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9131.d.success
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9131.toast.d.success
					remove_short_term_gold = 150
					capital_province = {
						add_province_modifier = {
							modifier = levied_pirates
							years = 5
						}
					}	
				}
			}
			50 = { #
				compare_modifier = {
					value = scope:duel_value						
					multiplier = 1.5
					min = -49
				}
				desc = sailing.9131.d.failure
				send_interface_toast = {
					left_icon = ROOT
					title = sailing.9131.toast.d.failure
					add_prestige = medium_prestige_loss
				}
			}
		}
	}

	option = { # Release him!
		name = sailing.9131.e
		
		send_interface_toast = {			
			left_icon = ROOT
			title = sailing.9131.toast.e.success
			add_trait = compassionate
			add_prestige = minor_prestige_gain
			add_dread = minor_dread_loss	
		}
	}

	after = {
		trigger_event = {
			on_action = following_random_piracy_events_at_sea
			days = 15
		}
	}
}

 # Events for Exploring History

namespace = explore_history

################################
# SELECT AREA TO STUDY
# 0001-0999
# by Jamie-San
################################

# Period selection event
explore_history.0001 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.0001.t
	desc = explore_history.0001.desc
	theme = explore_history_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	cooldown = { days = 1 }

	immediate = {
		# Stop characters from planning multiple activities at once.
		add_character_flag = {
			flag = planning_an_activity
			days = 30
		}
	}
	
	option = { # Years of the Trees
		trigger = {
			scope:activity.activity_location = {
				OR = {
					unique_human_archives_trigger = yes
					unique_elven_archives_trigger = yes
				}
			}
		}
		name = explore_history.0001.a
		trigger_event = explore_history.0010
	}

	option = { # First Age
		trigger = {
			scope:activity.activity_location = {
				OR = {
					unique_human_archives_trigger = yes
					unique_elven_archives_trigger = yes
				}
			}
		}
		name = explore_history.0001.b
		trigger_event = explore_history.0020
	}

	option = { # Second Age
		name = explore_history.0001.c
		if = {
			limit = { scope:activity.activity_location = { geographical_region = middleearth_haradwaith } }
			trigger_event = explore_history.0030
		}
		else = { trigger_event = explore_history.0031 }
	}
	
	option = { # Third Age
		name = explore_history.0001.d
		trigger_event = explore_history.0040
	}
}

# Years of the Trees topic selection
explore_history.0010 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.0010.t
	desc = explore_history.0010.desc
	theme = explore_history_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	
	option = { # The Sundering of the Elves
		name = explore_history.0010.a
		trigger_event = {
			id = explore_history.1001
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:sundering_elves
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:sundering_elves
				}
				set_variable = {
					name = book_subject
					value = flag:diplomacy
				}
			}
		}	
	}
	option = { # Fëanor and the Disquiet of the Ñoldor
		name = explore_history.0010.b
		trigger_event = {
			id = explore_history.1011
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:disquiet_noldor
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:disquiet_noldor
				}
				set_variable = {
					name = book_subject
					value = flag:stewardship
				}
			}
		}
	}
	option = { # The First Kinslaying and the Exile of the Ñoldor
		name = explore_history.0010.c
		trigger_event = {
			id = explore_history.1021
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:kinslaying
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:kinslaying
				}
				set_variable = {
					name = book_subject
					value = flag:intrigue
				}
			}
		}
	}

	option = { # On second thoughts...
		name = explore_history.0010.d
		trigger_event = {
			id = explore_history.0001
			days = 1
		}
	}
}

# First Age topic selection
explore_history.0020 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.0020.t
	desc = explore_history.0020.desc
	theme = explore_history_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	
	option = { # The Siege of Angband and the Realms of Beleriand
		name = explore_history.0020.a
		trigger_event = {
			id = explore_history.2001
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:angband
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:angband
				}
				set_variable = {
					name = book_subject
					value = flag:martial
				}
			}
		}
	}
	
	option = { # Beren and Lúthien
		name = explore_history.0020.b
		trigger_event = {
			id = explore_history.2011
			days = 5
		}
		custom_tooltip = {
			text = unlock_beren_legend_tt
			add_character_flag = read_beren_legend
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:luthien
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:luthien
				}
				set_variable = {
					name = book_subject
					value = flag:learning
				}
			}
		}
	}
	
	option = { # The Children of Húrin
		name = explore_history.0020.c
		trigger_event = {
			id = explore_history.2021
			days = 5
		}
		custom_tooltip = {
			text = unlock_turin_legend_tt
			add_character_flag = read_turin_legend
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:hurin
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:hurin
				}
				set_variable = {
					name = book_subject
					value = flag:martial
				}
			}
		}
	}
	
	option = { # Tuor and the Fall of Gondolin
		name = explore_history.0020.d
		trigger_event = {
			id = explore_history.2031
			days = 5
		}
		custom_tooltip = {
			text = unlock_tuor_legend_tt
			add_character_flag = read_tuor_legend
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:fall_gondolin
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:fall_gondolin
				}
				set_variable = {
					name = book_subject
					value = flag:stewardship
				}
			}
		}
	}
	
	option = { # On second thoughts...
		name = explore_history.0020.e
		trigger_event = {
			id = explore_history.0001
			days = 1
		}
	}
}

# Second Age topic selection
explore_history.0030 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.0030.t
	desc = {
		first_valid = {
			desc = explore_history.0030.desc
		}
	}
	theme = explore_history_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	
	option = { # Númenor and the Elves
		name = explore_history.0030.a
		trigger_event = explore_history.0031
	}
	option = { # The colonies of Far Harad
		name = explore_history.0030.c
		trigger_event = explore_history.0032
	}	
	option = { # On second thoughts...
		name = explore_history.0030.d
		trigger_event = {
			id = explore_history.0001
			days = 1
		}
	}
}

# Númenor and the Elves topic selection
explore_history.0031 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.0031.t
	desc = explore_history.0031.desc
	theme = explore_history_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	option = { # The Lost Island of Númenor
		name = explore_history.0031.a
		trigger_event = {
			id = explore_history.3001
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:numenor
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:numenor
				}
				set_variable = {
					name = book_subject
					value = flag:learning
				}
			}
		}
	}
	option = { # Of Eregion and the Rings of Power
		name = explore_history.0031.b
		trigger_event = {
			id = explore_history.3031
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:eregion
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:eregion
				}
				set_variable = {
					name = book_subject
					value = flag:learning
				}
			}
		}
	}
	option = { # The Akallabêth
		name = explore_history.0031.c
		trigger_event = {
			id = explore_history.3051
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:akallabeth
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:akallabeth
				}
				set_variable = {
					name = book_subject
					value = flag:intrigue
				}
			}
		}
	}
	option = { # The Last Alliance
		name = explore_history.0031.d
		trigger = { 
			scope:activity.activity_location = {
				NOT = { geographical_region = middleearth_haradwaith_far }
			}
		}
		trigger_event = {
			id = explore_history.3061
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:last_alliance
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:last_alliance
				}
				set_variable = {
					name = book_subject
					value = flag:diplomacy
				}
			}
		}
	}
	option = { # On second thoughts...
		name = explore_history.0031.e
		trigger = { scope:activity.activity_location = { geographical_region = middleearth_haradwaith } }
		trigger_event = explore_history.0030
	}
	option = { # On second thoughts...
		name = explore_history.0031.f
		trigger = { scope:activity.activity_location = { not = { geographical_region = middleearth_haradwaith } } }
		trigger_event = {
			id = explore_history.0001
			days = 1
		}
	}
}

# The colonies of Far Harad
explore_history.0032 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.0032.t
	desc = explore_history.0032.desc
	theme = explore_history_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	
	option = { # The Foundation of Bellakar
		name = explore_history.0032.a
		trigger_event = {
			id = explore_history.3011
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:bellakar
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:bellakar
				}
				set_variable = {
					name = book_subject
					value = flag:stewardship
				}
			}
		}
	}
	option = { # The Storm-King of Ciryatanórë
		name = explore_history.0032.b
		trigger_event = {
			id = explore_history.3041
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:storm_king
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:storm_king
				}
				set_variable = {
					name = book_subject
					value = flag:martial
				}
			}
		}
	}	
	option = { # Bellakar & The Debt of Elendil
		name = explore_history.0032.c
		trigger_event = {
			id = explore_history.3021
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:debt_elendil
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:debt_elendil
				}
				set_variable = {
					name = book_subject
					value = flag:diplomacy
				}
			}
		}
	}
	option = { # On second thoughts...
		name = explore_history.0032.d
		trigger_event = explore_history.0030
	}
}

# Third Age topic selection
explore_history.0040 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.0040.t
	desc = explore_history.0040.desc
	theme = explore_history_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}
	
	option = { # Of the Eothed and the Oath of Eorl
		name = explore_history.0040.a
		trigger = { 
			scope:activity.activity_location = {
				NOT = { geographical_region = middleearth_haradwaith_far }
			}
		}
		trigger_event = {
			id = explore_history.4001
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:eorl
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:eorl
				}
				set_variable = {
					name = book_subject
					value = flag:martial
				}
			}
		}
	}

	option = { # Of Narkuzîr and Berúthiel
		name = explore_history.0040.b
		trigger = { is_elf = no	}
		trigger_event = {
			id = explore_history.4011
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:beruthiel
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:beruthiel
				}
				set_variable = {
					name = book_subject
					value = flag:diplomacy
				}
			}
		}
	}
	
	option = { #The Tedjin Conquest and Occupation of Bellakar
		name = explore_history.0040.c
		trigger = { scope:activity.activity_location = { geographical_region = middleearth_haradwaith } }
		trigger_event = {
			id = explore_history.4021
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:tedjin
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:tedjin
				}
				set_variable = {
					name = book_subject
					value = flag:martial
				}
			}
		}
	}
	
	option = { #The Kinstrife
		name = explore_history.0040.d
		trigger = { 
			scope:activity.activity_location = {
				NOT = { geographical_region = middleearth_haradwaith_far }
			}
		}
		trigger_event = {
			id = explore_history.4031
			days = 5
		}
		if = {
			limit = { has_character_flag = not_finished_reading }
			scope:activity = {
				set_variable = {
					name = book_topic_2
					value = flag:kinstrife
				}
			}
		}
		else = {
			scope:activity = {
				set_variable = {
					name = book_topic
					value = flag:kinstrife
				}
				set_variable = {
					name = book_subject
					value = flag:learning
				}
			}
		}
	}

	option = { # On second thoughts...
		name = explore_history.0040.e
		trigger_event = {
			id = explore_history.0001
			days = 1
		}
	}
}

# End of studies
explore_history.0050 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.0050.t
	desc = explore_history.0050.desc
	theme = explore_history_activity
	left_portrait = {
		character = root
		animation = personality_compassionate
	}
	
	immediate = {
		disburse_history_activity_rewards = yes
		scope:activity = { progress_activity_phase_after = { days = 1 } }
	}
	
	option = { # End activity
		name = explore_history.0050.a
		if = {
			limit = {
				lotr_gets_nicknames_trigger = yes
			}
			if = {
				limit = {
					is_elf = no
				}
				random = {
					chance = 10
					set_nickname_effect = { NICKNAME = nick_archivist }
				}
			}
			else = {
				random = {
					chance = 2
					set_nickname_effect = { NICKNAME = nick_archivist }
				}
			}
		}
	}
}

# Museum Shop event
explore_history.0060 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.0060.t
	desc = {
		desc = explore_history.0060.desc.intro
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:activity = {
						has_activity_option = { 
							category = special_type 
							option = explore_history_type_adunaic_propaganda
						}
					}
				}
				desc = explore_history.0060.desc.propaganda
			}
			desc = explore_history.0060.desc.standard
		}
		desc = explore_history.0060.desc.outro
	}
	theme = explore_history_activity
	left_portrait = {
		character = scope:host
		animation = happy
	}
	right_portrait = {
		character = scope:chronicler
		animation = chancellor
	}
	artifact = {
		position = lower_left_portrait
		target = scope:book_1
		trigger = { exists = scope:book_1 }
	}	
	artifact = {
		position = lower_right_portrait
		target = scope:book_2
		trigger = { exists = scope:book_2 }
	}
	
	cooldown = { weeks = 1 }
	
	immediate = {
		scope:activity = {
			every_attending_character = {
				limit = {
					location = scope:activity.activity_location
					OR = {
						has_court_position = chronicler_court_position
						has_court_position = antiquarian_court_position
						has_council_position = councillor_court_chaplain
					}
				}
				save_scope_as = chronicler
			}
		}
		explore_history_generate_first_book_effect = yes
		scope:newly_created_artifact = { save_scope_as = book_1 }
		if = {
			limit = {
				scope:activity = {
					AND = {
						has_activity_option = { 
							category = special_type 
							option = explore_history_type_standard
						}
						has_activity_option = {
							category = explore_history_funding
							option = explore_history_extra_funding
						}
					}
				}
			}
			explore_history_generate_second_book_effect = yes
			scope:newly_created_artifact = { save_scope_as = book_2 }
		}
	}
	
	option = {
		name = explore_history.0060.a
		custom_tooltip = explore_history.0060.a.tt
		scope:book_1 = {
			destroy_artifact = this
		}
		if = {
			limit = { exists = scope:book_2 }
			scope:book_2 = {
				destroy_artifact = this
			}
		}
		add_prestige = major_prestige_gain
		add_piety = major_piety_gain
	}
	
	option = {
		trigger = { not = { exists = scope:book_2 } }
		name = explore_history.0060.b
		custom_tooltip = explore_history.0060.b.tt
	}
	
	option = {
		name = explore_history.0060.c
		trigger = { exists = scope:book_2 }
		scope:book_2 = {
			destroy_artifact = this
		}
	}
	
	option = {
		name = explore_history.0060.d
		trigger = { exists = scope:book_2 }
		scope:book_1 = {
			destroy_artifact = this
		}
	}
}


# # Histories Invalidation for Host Death - Guests
explore_history.0063 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.0063.t
	desc = explore_history.0063.desc
	theme = explore_history_activity
	override_icon = {
		reference = "gfx/interface/icons/event_types/type_illness.dds"
	}
	left_portrait = {
		character = scope:host
	}
	
	option = {
		name = explore_history.0063.a
		custom_tooltip = explore_history.0063.a.tt
	}
}

#The host has been imprisoned - for host
explore_history.0064 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.0063.t
	desc = explore_history.0064.desc
	theme = explore_history_activity
	override_icon = {
		reference = "gfx/interface/icons/event_types/type_prison.dds"
	}
	left_portrait = {
		character = scope:host
		animation = prison_dungeon
	}

	immediate = {
		#hosted_successful_feast_interrupted_effect = yes
	}
	
	option = {
		name = explore_history.0064.a
	}
}

#The host has been imprisoned - for guests
explore_history.0065 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.0063.t
	desc = explore_history.0065.desc
	theme = explore_history_activity
	override_icon = {
		reference = "gfx/interface/icons/event_types/type_prison.dds"
	}
	left_portrait = {
		character = scope:host
		animation = prison_dungeon
	}
	
	option = {
		name = explore_history.0064.a
	}
}

# # Histories Invalidation for Host Death - Player Heir
explore_history.0070 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.0070.t
	desc = {
		desc = explore_history.0070.desc
		desc = explore_history.0070.desc.entourage
		desc = explore_history.0070.desc.ruler
	}
	theme = realm

	left_portrait = {
		character = root
		animation = worry
	}

	immediate = {}

	option = { 
		name = explore_history.0070.a
		custom_tooltip = explore_history.0070.tt
	}
}

# HOST: No guests showed up
# You're so alone.
###
explore_history.0110 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.0110.t
	desc = explore_history.0110.desc
	theme = explore_history_activity
	left_portrait = {
		character = scope:host
		animation = sadness
	}

	trigger = {
		scope:activity = {
			any_invited_character = {
				count > 1
				NOT = { this = root }
			}
			any_attending_character = {
				count < 1
				NOT = { this = root }
			}
		}
	}

	option = {
		name = feast.2003.a
		stress_impact = {
			base = minor_stress_impact_gain
			gregarious = minor_stress_impact_gain
		}
	}

	option = {
		name = feast.2003.b
		trigger = { has_trait = shy }
		exclusive = yes
		trait = shy
		stress_impact = {
			base = minor_stress_impact_loss
		}
	}
}

# Select a Chronicler #
explore_history.0540 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.0540.t
	desc = {
		desc = explore_history.0540.desc.intro
		first_valid = {
			triggered_desc = {
				trigger = {
					OR = {
						has_relation_rival = scope:chronicler_candidate_1
						opinion = {
							value <= low_negative_opinion
							target = scope:chronicler
						}
					}
				}
				desc = explore_history.0540.desc.hates_candidate_a
			}
			desc = explore_history.0540.desc.candidate_a
		}
		triggered_desc = {
			trigger = { exists = scope:chronicler_candidate_2 }
			desc = explore_history.0540.desc.nepotism
		}
		triggered_desc = {
			trigger = { exists = scope:chronicler_candidate_3 }
			desc = explore_history.0540.desc.enthusiasm
		}
		desc = explore_history.0540.desc.outro
	}
	theme = explore_history_activity
	left_portrait = {
		character = scope:host
		animation = thinking
	}
	center_portrait = {
		character = scope:chronicler_candidate_2
		animation = war_over_win
	}
	right_portrait = {
		character = scope:chronicler_candidate_1
		animation = admiration
	}
	lower_right_portrait = scope:chronicler_candidate_3

	trigger = {
		NOT = { employs_court_position = chronicler_court_position }
		has_dlc_feature = legends
	}
	
	cooldown = { months = 6 }

	immediate = {
		scope:activity = {
			ordered_attending_character = { # The best guy for the job
				limit = {
					OR = {
						is_vassal_of = root
						is_courtier_of = root
					}
					root = {
						can_appoint_char_to_court_position = {
							CHAR = prev
							COURT_POS = chronicler_court_position
						}
					}
				}
				order_by = aptitude:chronicler_court_position
				save_scope_as = chronicler_candidate_1
			}
			if = {
				limit = {
					NOT = { exists = scope:chronicler_candidate_1 }
				}
				if = {
					limit = {
						any_pool_character = {
							province = scope:activity.activity_location
							is_physically_able_ai_adult = yes
						}
					}
					random_pool_character = {
						province = scope:activity.activity_location
						limit = {
							is_physically_able_ai_adult = yes
						}
						save_scope_as = chronicler_candidate_1
					}
				}
				else = {
					hidden_effect = {
						create_character = {
							template = generic_peasant_character
							gender_female_chance = root_soldier_female_chance
							location = scope:activity.activity_location
							culture = scope:host.culture
							faith = scope:host.faith
							dynasty = none
							save_scope_as = chronicler_candidate_1
						}
					}
				}
			}
			if = {
				limit = {
					any_attending_character = {
						OR = {
							is_vassal_of = root
							is_courtier_of = root
						}
						OR = {
							is_close_or_extended_family_of = root
							has_relation_friend = root
							has_relation_lover = root
						}
						NOT = { has_relation_rival = root }
						root = {
							can_appoint_char_to_court_position = {
								CHAR = prev
								COURT_POS = chronicler_court_position
							}
						}
						NOT = { this = scope:chronicler_candidate_1 }
					}
				}
				random_attending_character = { # The nepotism pick
					limit = {
						OR = {
							is_vassal_of = root
							is_courtier_of = root
						}
						OR = {
							is_close_or_extended_family_of = root
							has_relation_friend = root
							has_relation_lover = root
						}
						NOT = { has_relation_rival = root }
						root = {
							can_appoint_char_to_court_position = {
								CHAR = prev
								COURT_POS = chronicler_court_position
							}
						}
						NOT = { this = scope:chronicler_candidate_1 }
					}
					save_scope_as = chronicler_candidate_2
				}
			}
			if = {
				limit = {
					any_attending_character = {
						OR = {
							is_vassal_of = root
							is_courtier_of = root
						}
						root = {
							can_appoint_char_to_court_position = {
								CHAR = prev
								COURT_POS = chronicler_court_position
							}
						}
						NOT = { this = scope:chronicler_candidate_1 }
						trigger_if = {
							limit = {
								exists = scope:chronicler_candidate_2
							}
							NOT = { this = scope:chronicler_candidate_2 }
						}
					}
				}
				random = {
					chance = 25
					ordered_attending_character = { # Second best guy for the job
						limit = {
							OR = {
								is_vassal_of = root
								is_courtier_of = root
							}
							root = {
								can_appoint_char_to_court_position = {
									CHAR = prev
									COURT_POS = chronicler_court_position
								}
							}
							NOT = { this = scope:chronicler_candidate_1 }
							trigger_if = {
								limit = {
									exists = scope:chronicler_candidate_2
								}
								NOT = { this = scope:chronicler_candidate_2 }
							}
						}
						order_by = {
							value = aptitude:chronicler_court_position
							add = ai_energy
						}
						save_scope_as = chronicler_candidate_3
					}
				}
			}
		}
	}

	option = { # Pick the best guy
		name = explore_history.0540.a
		court_position_grant_effect = {
			CANDIDATE = scope:chronicler_candidate_1
			POS = chronicler_court_position
			EMPLOYER = root
		}
		add_prestige = minor_prestige_gain
		ai_chance = {
			base = 10
			opinion_modifier = {
				who = root
				opinion_target = scope:chronicler_candidate_1
				min = 0
				max = 10
				multiplier = 0.5
			}
			modifier = {
				factor = 0.5
				has_trait = family_first
			}
			modifier = {
				factor = 0.5
				has_relation_rival = scope:chronicler_candidate_1
				NOT = { has_trait = forgiving }
			}
		}
	}

	option = { # Pick the nepotism target
		name = explore_history.0540.b
		trigger = {
			exists = scope:chronicler_candidate_2
		}
		court_position_grant_effect = {
			CANDIDATE = scope:chronicler_candidate_2
			POS = chronicler_court_position
			EMPLOYER = root
		}
		reverse_add_opinion = {
			target = scope:chronicler_candidate_2
	 		modifier = grateful_opinion
	 		opinion = 15
		}
		ai_chance = {
			base = 10
			opinion_modifier = {
				who = root
				opinion_target = scope:chronicler_candidate_2
				min = 0
				max = 10
				multiplier = 0.5
			}
			modifier = {
				factor = 2
				has_trait = family_first
			}
		}
	}

	option = { # Pick the third target
		name = explore_history.0540.c
		trigger = {
			exists = scope:chronicler_candidate_3
		}
		court_position_grant_effect = {
			CANDIDATE = scope:chronicler_candidate_3
			POS = chronicler_court_position
			EMPLOYER = root
		}
		random = {
			chance = 50
			set_relation_friend = {
				target = scope:chronicler_candidate_3
		 		reason = friend_made_me_chronicler
			}
		}
		ai_chance = {
			base = 5
			opinion_modifier = {
				who = root
				opinion_target = scope:chronicler_candidate_3
				min = 0
				max = 10
				multiplier = 0.5
			}
			modifier = {
				factor = 0.5
				has_trait = family_first
			}
			modifier = {
				factor = 0.5
				has_relation_rival = scope:chronicler_candidate_3
				NOT = { has_trait = forgiving }
			}
		}
	}

	option = { # Pick nobody
		name = explore_history.0540.d
		ai_chance = { # The AI should always pick someone, unless they're bankrupt
			base = 0
			modifier = {
				add = 100
				gold < tiny_gold_value
			}
		}
	}

	after = {
		# Update success chance
		scope:activity = {
			set_variable = {
				name = hunt_success_chance
				value = hunt_success_chance_value
			}
		}
	}
}

# Select an Antiquarian #
explore_history.0541 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.0541.t
	desc = {
		desc = explore_history.0541.desc.intro
		first_valid = {
			triggered_desc = {
				trigger = {
					OR = {
						has_relation_rival = scope:antiquarian_candidate_1
						opinion = {
							value <= low_negative_opinion
							target = scope:antiquarian
						}
					}
				}
				desc = explore_history.0541.desc.hates_candidate_a
			}
			desc = explore_history.0541.desc.candidate_a
		}
		triggered_desc = {
			trigger = { exists = scope:antiquarian_candidate_2 }
			desc = explore_history.0541.desc.nepotism
		}
		triggered_desc = {
			trigger = { exists = scope:antiquarian_candidate_3 }
			desc = explore_history.0541.desc.enthusiasm
		}
		desc = explore_history.0541.desc.outro
	}
	theme = explore_history_activity
	left_portrait = {
		character = scope:host
		animation = thinking
	}
	center_portrait = {
		character = scope:antiquarian_candidate_2
		animation = war_over_win
	}
	right_portrait = {
		character = scope:antiquarian_candidate_1
		animation = admiration
	}
	lower_right_portrait = scope:antiquarian_candidate_3

	trigger = {
		NOR = { 
			employs_court_position = antiquarian_court_position
			has_dlc_feature = legends
		}
	}
	
	cooldown = { months = 6 }

	immediate = {
		scope:activity = {
			ordered_attending_character = { # The best guy for the job
				limit = {
					OR = {
						is_vassal_of = root
						is_courtier_of = root
					}
					root = {
						can_appoint_char_to_court_position = {
							CHAR = prev
							COURT_POS = antiquarian_court_position
						}
					}
				}
				order_by = aptitude:antiquarian_court_position
				save_scope_as = antiquarian_candidate_1
			}
			if = {
				limit = {
					NOT = { exists = scope:antiquarian_candidate_1 }
				}
				if = {
					limit = {
						any_pool_character = {
							province = scope:activity.activity_location
							is_physically_able_ai_adult = yes
						}
					}
					random_pool_character = {
						province = scope:activity.activity_location
						limit = {
							is_physically_able_ai_adult = yes
						}
						save_scope_as = antiquarian_candidate_1
					}
				}
				else = {
					hidden_effect = {
						create_character = {
							template = generic_peasant_character
							gender_female_chance = root_soldier_female_chance
							location = scope:activity.activity_location
							culture = scope:host.culture
							faith = scope:host.faith
							dynasty = none
							save_scope_as = antiquarian_candidate_1
						}
					}
				}
			}
			if = {
				limit = {
					any_attending_character = {
						OR = {
							is_vassal_of = root
							is_courtier_of = root
						}
						OR = {
							is_close_or_extended_family_of = root
							has_relation_friend = root
							has_relation_lover = root
						}
						NOT = { has_relation_rival = root }
						root = {
							can_appoint_char_to_court_position = {
								CHAR = prev
								COURT_POS = antiquarian_court_position
							}
						}
						NOT = { this = scope:antiquarian_candidate_1 }
					}
				}
				random_attending_character = { # The nepotism pick
					limit = {
						OR = {
							is_vassal_of = root
							is_courtier_of = root
						}
						OR = {
							is_close_or_extended_family_of = root
							has_relation_friend = root
							has_relation_lover = root
						}
						NOT = { has_relation_rival = root }
						root = {
							can_appoint_char_to_court_position = {
								CHAR = prev
								COURT_POS = antiquarian_court_position
							}
						}
						NOT = { this = scope:antiquarian_candidate_1 }
					}
					save_scope_as = antiquarian_candidate_2
				}
			}
			if = {
				limit = {
					any_attending_character = {
						OR = {
							is_vassal_of = root
							is_courtier_of = root
						}
						root = {
							can_appoint_char_to_court_position = {
								CHAR = prev
								COURT_POS = antiquarian_court_position
							}
						}
						NOT = { this = scope:antiquarian_candidate_1 }
						trigger_if = {
							limit = {
								exists = scope:antiquarian_candidate_2
							}
							NOT = { this = scope:antiquarian_candidate_2 }
						}
					}
				}
				random = {
					chance = 25
					ordered_attending_character = { # Second best guy for the job
						limit = {
							OR = {
								is_vassal_of = root
								is_courtier_of = root
							}
							root = {
								can_appoint_char_to_court_position = {
									CHAR = prev
									COURT_POS = antiquarian_court_position
								}
							}
							NOT = { this = scope:antiquarian_candidate_1 }
							trigger_if = {
								limit = {
									exists = scope:antiquarian_candidate_2
								}
								NOT = { this = scope:antiquarian_candidate_2 }
							}
						}
						order_by = {
							value = aptitude:antiquarian_court_position
							add = ai_energy
						}
						save_scope_as = antiquarian_candidate_3
					}
				}
			}
		}
	}

	option = { # Pick the best guy
		name = explore_history.0541.a
		court_position_grant_effect = {
			CANDIDATE = scope:antiquarian_candidate_1
			POS = antiquarian_court_position
			EMPLOYER = root
		}
		add_prestige = minor_prestige_gain
		ai_chance = {
			base = 10
			opinion_modifier = {
				who = root
				opinion_target = scope:antiquarian_candidate_1
				min = 0
				max = 10
				multiplier = 0.5
			}
			modifier = {
				factor = 0.5
				has_trait = family_first
			}
			modifier = {
				factor = 0.5
				has_relation_rival = scope:antiquarian_candidate_1
				NOT = { has_trait = forgiving }
			}
		}
	}

	option = { # Pick the nepotism target
		name = explore_history.0541.b
		trigger = {
			exists = scope:antiquarian_candidate_2
		}
		court_position_grant_effect = {
			CANDIDATE = scope:antiquarian_candidate_2
			POS = antiquarian_court_position
			EMPLOYER = root
		}
		reverse_add_opinion = {
			target = scope:antiquarian_candidate_2
	 		modifier = grateful_opinion
	 		opinion = 15
		}
		ai_chance = {
			base = 10
			opinion_modifier = {
				who = root
				opinion_target = scope:antiquarian_candidate_2
				min = 0
				max = 10
				multiplier = 0.5
			}
			modifier = {
				factor = 2
				has_trait = family_first
			}
		}
	}

	option = { # Pick the third target
		name = explore_history.0541.c
		trigger = {
			exists = scope:antiquarian_candidate_3
		}
		court_position_grant_effect = {
			CANDIDATE = scope:antiquarian_candidate_3
			POS = antiquarian_court_position
			EMPLOYER = root
		}
		random = {
			chance = 50
			set_relation_friend = {
				target = scope:antiquarian_candidate_3
		 		reason = friend_made_me_antiquarian
			}
		}
		ai_chance = {
			base = 5
			opinion_modifier = {
				who = root
				opinion_target = scope:antiquarian_candidate_3
				min = 0
				max = 10
				multiplier = 0.5
			}
			modifier = {
				factor = 0.5
				has_trait = family_first
			}
			modifier = {
				factor = 0.5
				has_relation_rival = scope:antiquarian_candidate_3
				NOT = { has_trait = forgiving }
			}
		}
	}

	option = { # Pick nobody
		name = explore_history.0541.d
		ai_chance = { # The AI should always pick someone, unless they're bankrupt
			base = 0
			modifier = {
				add = 100
				gold < tiny_gold_value
			}
		}
	}

	after = {
		# Update success chance
		scope:activity = {
			set_variable = {
				name = hunt_success_chance
				value = hunt_success_chance_value
			}
		}
	}
}

# Welcome event #
explore_history.0550 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.0550.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { this = scope:host }
				desc = explore_history.0550.host
			}
			desc = explore_history.0550.guest
		}
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:activity = {
						has_activity_option = { category = special_type option = explore_history_type_adunaic_propaganda }
					}
				}
				desc = explore_history.0550.propaganda
			}
			desc = explore_history.0550.standard
		}
		first_valid = {
			triggered_desc = {
				trigger = {
					intent_target.location ?= root.location
				}
				desc = explore_history.0550.intent_arrived
			}
			triggered_desc = {
				trigger = { exists = intent_target }
				desc = explore_history.0550.intent
			}
		}
	}
	theme = explore_history_activity
	left_portrait = {
		character = root
		animation = chancellor
	}
	right_portrait = {
		character = scope:host
		trigger = {
			NOT = { root = scope:host }
		}
		animation = admiration
	}
	lower_right_portrait = intent_target
	artifact = {
		position = lower_left_portrait
		target = scope:newly_created_artifact
		trigger = { exists = scope:newly_created_artifact }
	}
	
	cooldown = { months = 6 }

	trigger = { is_ai = no }

	option = { # Pick the best guy
		name = explore_history.0550.a
	}
}

# Travel start event #
explore_history.0560 = {
	type = character_event
	title = explore_history.0560.t
	desc = {
		#Intro
		first_valid = {
			#Explore History
			triggered_desc = {
				trigger = { exists = scope:host }
				desc = explore_history.0560.desc_explore_history
			}
			#My Explore History
			triggered_desc = {
				desc = explore_history.0560.desc_my_explore_history
			}
		}
		#Relationship to host segway
		first_valid = {
			#Negative
			triggered_desc = {
				trigger = {
					exists = scope:host
					has_relation_rival = involved_activity.activity_host
				}
				desc = explore_history.0560.desc_explore_history_negative
			}
			#Positive
			triggered_desc = {
				trigger = {
					exists = scope:host
					has_any_good_relationship_with_character_trigger = { CHARACTER = scope:host }
				}
				desc = explore_history.0560.desc_explore_history_positive
			}
			#Default
			triggered_desc = {
				trigger = { exists = scope:host }
				desc = explore_history.0560.desc_explore_history_default
			}
		}
		#Trait flavor for my Explore History
		first_valid = {
			#Archivist
			triggered_desc = {
				trigger = {
					has_trait = lifestyle_archivist 
					NOT = { exists = scope:host }
					has_any_debilitating_illness = no
				}
				desc = explore_history.0560.desc_my_explore_history_archivist
			}
			#Humble
			triggered_desc = {
				trigger = {
					NOT = { exists = scope:host }
					OR = {
						has_trait = humble
						has_trait = shy
					}
					has_any_debilitating_illness = no
				}
				desc = explore_history.0560.desc_my_explore_history_humble
			}
			#Arrogant
			triggered_desc = {
				trigger = { 
					NOT = { exists = scope:host }
					has_any_debilitating_illness = no
				}
				desc = explore_history.0560.desc_my_explore_history_arrogant
			}
		}
		#Outro
		first_valid = {
			#Propaganda
			triggered_desc = {
				trigger = {
					exists = scope:host
					involved_activity = { has_activity_option = { category = special_type option = explore_history_type_adunaic_propaganda } }
				}
				desc = explore_history.0560.desc_explore_history_outro_propaganda
			}
			#Standard Explore History
			triggered_desc = {
				trigger = {
					exists = scope:host
					involved_activity = { 
						has_activity_option = { category = special_type option = explore_history_type_standard }
					}
				}
				desc = explore_history.0560.desc_explore_history_outro_standard
			}
			#My Propaganda
			triggered_desc = {
				trigger = {
					involved_activity = { has_activity_option = { category = special_type option = explore_history_type_adunaic_propaganda } }
				}
				desc = explore_history.0560.desc_my_explore_history_outro_propaganda
			}
			#Standard My Standard Explore History
			triggered_desc = {
				trigger = {
					involved_activity = { 
						has_activity_option = { category = special_type option = explore_history_type_standard }
					}
				}
				desc = explore_history.0560.desc_my_explore_history_outro_standard
			}
		}
	}
	theme = travel
	left_portrait = {
		character = root
		animation = happiness
	}
	#Show our Travel Leader
	right_portrait = {
		trigger = { exists = current_travel_plan.travel_leader }
		character = current_travel_plan.travel_leader
	}
	#Show our host
	lower_right_portrait = {
		trigger = { exists = scope:host }
		character = scope:host
	}
	trigger = {
		is_available_travelling = yes
		is_landed = yes
		exists = involved_activity
		involved_activity = { has_activity_type = activity_explore_history }
	}
	immediate = {
		play_music_cue = mx_cue_travel_start
		if = {
			limit = {
				NOT = { involved_activity.activity_host = root }
			}
			#Check if we dislike the host
			if = {
				limit = {
					OR = {
						has_relation_rival = involved_activity.activity_host
						opinion = {
							target = involved_activity.activity_host
							value < 10
						}
					}
				}
				add_character_flag = we_dislike_host
			}
			#Save the scope for loc
			involved_activity.activity_host = { save_scope_as = host }
		}
	}
	#Giddy up!
	option = { 
		name = {
			text = {
				first_valid = {
					#Yeah, yeah ...
					triggered_desc = {
						trigger = {
							OR = {
								has_any_debilitating_illness = yes
								has_character_flag = we_dislike_host
								has_trait = craven
							}
						}
						desc = travel_start_event.1000.a_craven
					}
					#Everything is _awesome_
					triggered_desc = {
						desc = travel_start_event.1000.a
					}
				}
			}
		}
	}
	after = {
		if = {
			limit = { has_character_flag = we_dislike_host }
			remove_character_flag = we_dislike_host
		}
	}
}

################################
# AGE OF THE TREES
# 1001-1999
# by Jamie-San
################################

## The Sundering of the Elves
# Awakening of the Elves
explore_history.1001 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.1001.t
	desc = explore_history.1001.desc
	theme = explore_history_activity
	left_portrait = {
		character = root
		animation = personality_rational
	}

	option = { # Thankful for the Valar's protection
		name = explore_history.1001.a
		add_piety = 150
		if = {
			limit = {
				has_trait = cynical
			}		
			random = {
				chance = 33

				remove_trait = cynical
				add_trait_force_tooltip = zealous	
			}			
		}
	}

	option = { # Right that Melkor should be judged
		name = explore_history.1001.b
		add_piety = 150
		if = {
			limit = {
				has_trait = arbitrary
			}		
			random = {
				chance = 33
				remove_trait = arbitrary
				add_trait_force_tooltip = just
			}			
		}		
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
	}

	option = { # Inspired by Melkor's abilities
		name = explore_history.1001.c
		add_piety = -200
		add_intrigue_skill = 1
		if = {
			limit = {
				has_trait = compassionate
			}		
			random = {
				chance = 33
				remove_trait = compassionate
				add_trait_force_tooltip = sadistic
			}			
		}	
	}
	
	after = {
		trigger_event = {
			id = explore_history.1002
			days = 5
		}
	}
}

# The Avari
explore_history.1002 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.1002.t
	desc = explore_history.1002.desc
	theme = explore_history_activity
	override_background = {
		reference = wilderness_forest_deep
	}
	left_portrait = {
		character = root
		animation = personality_rational
	}

	option = { # Sympathy for the First Sundering
		name = explore_history.1002.a
		if = {
			limit = {
				has_trait = callous
			}		
			random = {
				chance = 33
				remove_trait = callous
				add_trait_force_tooltip = compassionate
			}			
		}
		else_if = {
			limit = {
				has_trait = sadistic
			}		
			random = {
				chance = 33
				remove_trait = sadistic
				add_trait_force_tooltip = compassionate
			}			
		}
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
	}

	option = { # Suspicion for the First Sundering
		name = explore_history.1002.b
		if = {
			limit = {
				has_trait = trusting
			}		
			random = {
				chance = 33
				remove_trait = trusting
				add_trait_force_tooltip = paranoid
			}			
		}	
		random = {
			chance = 50
			add_intrigue_skill = 1
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.1003
			days = 5
		}
	}
}


# The Vanyar
explore_history.1003 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.1003.t
	desc = explore_history.1003.desc
	theme = explore_history_activity
	override_background = {
		reference = garden
	}
	override_effect_2d = {
		reference = legend_glow
	}
	
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = character:lineofingwe3
		animation = personality_compassionate
	}
	
	

	option = { # Zealous devotion is inspiring
		name = explore_history.1003.a
		add_piety = 150
		if = {
			limit = {
				has_trait = lazy
			}		
			random = {
				chance = 33
				remove_trait = lazy
				add_trait_force_tooltip = diligent
			}			
		}	
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}	
	}

	option = { # I can't wait either!
		name = explore_history.1003.b
		add_piety = 150
		if = {
			limit = {
				has_trait = patient
			}		
			random = {
				chance = 33
				remove_trait = patient
				add_trait_force_tooltip = impatient
			}			
		}
	}

	option = { # Too much responsibility...
		name = explore_history.1003.c
		add_piety = -50
		add_stress = -30
		if = {
			limit = {
				has_trait = diligent
			}		
			random = {
				chance = 33
				remove_trait = diligent
				add_trait_force_tooltip = lazy
			}			
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.1004
			days = 5
		}
	}
}

# The Noldor
explore_history.1004 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.1004.t
	desc = explore_history.1004.desc
	theme = explore_history_activity
	override_background = {
		reference = gondolin
	}
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = character:linefinwe1
		animation = personality_honorable
		animate_if_dead = yes
	}

	option = { # Awe at craftsmanship
		name = explore_history.1004.a
		if = {
			limit = {
				has_trait = arrogant
			}		
			random = {
				chance = 33
				remove_trait = arrogant
				add_trait_force_tooltip = humble
			}			
		}
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}
		random = {
			chance = 50
			add_learning_skill = 1
		}
	}

	option = { # Woe for the Silmarils
		name = explore_history.1004.b
		if = {
			limit = {
				has_trait = forgiving
			}		
			random = {
				chance = 33
				remove_trait = forgiving
				add_trait_force_tooltip = vengeful
			}
		}
		random = {
			chance = 25
			add_diplomacy_lifestyle_perk_points = 1
		}	
		random = {
			chance = 25
			add_diplomacy_skill = 1
		}		
	}
	
	after = {
		trigger_event = {
			id = explore_history.1005
			days = 5
		}
	}
}

# The Teleri
explore_history.1005 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.1005.t
	desc = explore_history.1005.desc
	theme = explore_history_activity
	override_background = {
		reference = wilderness_forest_pine
	}
	left_portrait = {
		character = character:lineofcirdan
		animation = personality_content
	}
	right_portrait = {
		character = character:lineofolwe1
		animation = personality_rational
	}
	center_portrait = {
		character = character:lineofelwe3
		animation = personality_irrational
	}

	option = { # A lesson in perseverance
		name = explore_history.1005.a
		if = {
			limit = {
				has_trait = impatient
			}		
			random = {
				chance = 33
				remove_trait = impatient
				add_trait_force_tooltip = patient
			}
		}
		random = {
			chance = 50
			add_learning_skill = 1
		}
	}

	option = { # Middle-Earth has many wonders
		name = explore_history.1005.b
		if = {
			limit = {
				has_trait = ambitious
			}		
			random = {
				chance = 33
				remove_trait = ambitious
				add_trait_force_tooltip = content
			}
		}
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
	}

	option = { # Baffled at disunity
		name = explore_history.1005.c
		if = {
			limit = {
				has_trait = fickle
			}		
			random = {
				chance = 33
				remove_trait = fickle
				add_trait_force_tooltip = stubborn
			}
		}
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
	}
	
	after = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = explore_history_funding
						option = explore_history_extra_funding
					}
				}
				NOT = { has_character_flag = not_finished_reading }
			}
			add_character_flag = not_finished_reading
			trigger_event = {
				id = explore_history.0001
				days = 5
			}
		}
		else = {
			if = {
				limit = { has_character_flag = not_finished_reading }
				remove_character_flag = not_finished_reading
			}
			trigger_event = {
				id = explore_history.0050
				days = 5
			}
		}
	}
}

## Feanor and the Revolt of the Noldor
# The Youth of Feanor
explore_history.1011 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.1011.t
	desc = explore_history.1011.desc
	theme = explore_history_activity
	override_background = {
		reference = garden
	}
	left_portrait = { 
		character = character:linefinwe1
		animation = grief
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:linefinwe7
		animation = sadness
		animate_if_dead = yes
	}
	right_portrait = { 
		character = character:linefinwe2
		animation = grief
		animate_if_dead = yes
	}
	
	option = { # Such Wonders
		name = explore_history.1011.a
		random = {
			chance = 33
			add_stewardship_lifestyle_perk_points = 1
		}
	}

	option = { # Seven Sons
		name = explore_history.1011.b
		add_stress = 15
		random = {
			chance = 33
			add_intrigue_lifestyle_perk_points = 1
		}
	}

	option = { # Rest in the gardens
		name = explore_history.1011.c
		add_stress = -15	
	}
	
	after = {
		trigger_event = {
			id = explore_history.1012
			days = 5
		}
	}
}

# The release of Morgoth
explore_history.1012 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.1012.t
	desc = explore_history.1012.desc
	theme = explore_history_activity
	override_background = {
		reference = armory
	}
	left_portrait = { 
		character = character:linefinwe2 # Feanor
		animation = disapproval
		animate_if_dead = yes
	}
	#right_portrait = {
	#	character = #Morgoth
	#	animation = flirtation_left
	#}

	option = { # Morgoth's release
		name = explore_history.1012.a
		add_piety = -50
		random = {
			chance = 50
			add_learning_skill = 1
		}
	}

	option = { # Unaware agents
		name = explore_history.1012.b
		if = {
			limit = {
				has_trait = honest
			}		
			random = {
				chance = 33
				remove_trait = honest
				add_trait_force_tooltip = deceitful
			}			
		}	
		random = {
			chance = 50
			add_intrigue_skill = 1
		}
	}
	option = { # Teleri Shipwrights
		name = explore_history.1012.c	
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.1013
			days = 5
		}
	}
}


# The Silmarils and the unquiet of the Ñoldor
explore_history.1013 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.1013.t
	desc = explore_history.1013.desc
	theme = explore_history_activity
	override_background = {
		reference = laurelin
	}
	right_portrait = { 
		character = character:linefinwe2 
		animation = war_defender
		animate_if_dead = yes
	}
	
	option = { # Other use of material
		name = explore_history.1013.a	
		random = {
			chance = 33
			add_martial_lifestyle_perk_points = 1
		}	
	}

	option = { # The Valar kept so much hidden
		name = explore_history.1013.b
		random = {
			chance = 33
			add_diplomacy_lifestyle_perk_points = 1
		}
	}

	option = { # The Elves shouldn't hide in Aman
		name = explore_history.1013.c
		if = {
			limit = {
				has_trait = content
			}		
			random = {
				chance = 33
				remove_trait = content
				add_trait_force_tooltip = ambitious
			}			
		}
		random = {
			chance = 33
			add_stewardship_lifestyle_perk_points = 1
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.1014
			days = 5
		}
	}
}

# The death of the two Trees
explore_history.1014 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.1014.t
	desc = explore_history.1014.desc
	theme = explore_history_activity
	override_background = {
		reference = feast
	}
	center_portrait = { 
		character = character:linefinwe2 #Feanor
		animation = aggressive_sword
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:linefinwe4 #Fingolfin
		animation = disapproval
		animate_if_dead = yes
	}
	left_portrait = {
		character = character:linefinwe6 #Finarfin
		animation = shock
	}

	option = { # Strife between brothers
		name = explore_history.1014.a
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
	}

	option = { # Foolish banquet
		name = explore_history.1014.b	
		random = {
			chance = 50
			add_martial_skill = 1
		}		
	}
	option = { # A lesson in perseverance
		name = explore_history.1014.c
		add_prestige = 150
		if = {
			limit = {
				has_trait = shy
			}		
			random = {
				chance = 33
				remove_trait = shy
				add_trait_force_tooltip = gregarious
			}
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.1015
			days = 5
		}
	}
}

# The Oath of Fëanor
explore_history.1015 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.1015.t
	desc = explore_history.1015.desc
	theme = explore_history_activity
	override_background = {
		reference = bp1_bonfire
	}
	override_effect_2d = {
		reference = fog	
	}
	
	center_portrait = {
		character = character:linefinwe2 #Feanor
		animation = sword_coup_degrace
		triggered_outfit = {
			outfit_tags = { elven_war }
		}
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:linefinwe10 #Maedhros
		animation = sword_coup_degrace
		triggered_outfit = {
			outfit_tags = { elven_war_helm }
		}
		animate_if_dead = yes
	}
	left_portrait = {
		character = character:linefinwe13 #Caranthir
		animation = sword_coup_degrace
		triggered_outfit = {
			outfit_tags = { elven_war_helm }
		}
		animate_if_dead = yes
	}
	lower_left_portrait = {
		character = character:linefinwe11 #Maglor
	}
	lower_center_portrait = {
		character = character:linefinwe14 #Curufin
	}
	lower_right_portrait = {
		character = character:linefinwe12 #Celegorm
	}

	option = { # Sick rhymes
		name = explore_history.1015.a
		if = {
			limit = { has_trait = poet }		
			random = {
				chance = 50
				add_diplomacy_skill = 1
			}			
		}
		else = {		
			random = {
				chance = 25
				add_trait = poet
			}
		}
	}

	option = { # Will the Valar never do anything ?
		name = explore_history.1015.b
		if = {
			limit = {
				has_trait = patient
			}		
			random = {
				chance = 33
				remove_trait = patient
				add_trait_force_tooltip = impatient
			}
		}
		random = {
			chance = 50
			add_prowess_skill = 1
		}
	}

	option = { # Never swear by Eru
		name = explore_history.1015.c
		add_piety = 150
	}
	
	after = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = explore_history_funding
						option = explore_history_extra_funding
					}
				}
				NOT = { has_character_flag = not_finished_reading }
			}
			add_character_flag = not_finished_reading
			trigger_event = {
				id = explore_history.0001
				days = 5
			}
		}
		else = {
			if = {
				limit = { has_character_flag = not_finished_reading }
				remove_character_flag = not_finished_reading
			}
			trigger_event = {
				id = explore_history.0050
				days = 5
			}
		}
	}
}

## The Flight of the Noldor
# Setting off from Tirion
explore_history.1021 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.1021.t
	desc = explore_history.1021.desc
	theme = explore_history_activity
	override_background = {
		reference = alley_night_western
	}
	override_effect_2d = {
		reference = fog	
	}
	
	center_portrait = {
		character = character:linefinwe2 #Feanor
		animation = lantern
		animate_if_dead = yes
	}
	
	option = { # Hold on his people
		name = explore_history.1021.a
		random = {
			chance = 33
			add_diplomacy_lifestyle_perk_points = 1
		}
	}

	option = { # Defying the Valar
		name = explore_history.1021.b
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = cynical
			}		
			random = {
				chance = 33
				remove_trait = cynical
				add_trait_force_tooltip = zealous
			}			
		}	
	}

	option = { # Well supplied
		name = explore_history.1021.c
		random = {
			chance = 33
			add_martial_lifestyle_perk_points = 1
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.1022
			days = 5
		}
	}
}

# The First Kinslaying
explore_history.1022 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.1022.t
	desc = explore_history.1022.desc
	theme = explore_history_activity
	override_background = {
		reference = kinslaying
	}
	override_effect_2d = {
		reference = smoke	
	}	
	widgets = {
		widget = {
			gui = "lotr_shader_event_sparks"
			container = "lotr_shader_event_foreground"
		}
		widget = {
			gui = "lotr_shader_event_fire"
			container = "lotr_shader_event_background"
		}
	}
	
	left_portrait = {
		character = character:linefinwe4 #Fingolfin
		animation = sword_coup_degrace
		triggered_outfit = {
			outfit_tags = { elven_war }
		}
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:linefinwe2 #Feanor
		animation = aggressive_sword
		triggered_outfit = {
			outfit_tags = { elven_war }
		}
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofolwe1 #Olwë
		animation = shock
	}

	option = { # Slaughter in paradise
		name = explore_history.1022.a
		add_piety = 150
	}

	option = { # Nothing wrong
		name = explore_history.1022.b
		add_piety = -50
		if = {
			limit = {
				has_trait = calm
			}		
			random = {
				chance = 33
				remove_trait = calm
				add_trait_force_tooltip = wrathful
			}			
		}
		else_if = {
			limit = {
				has_trait = forgiving
			}		
			random = {
				chance = 33
				remove_trait = forgiving
				add_trait_force_tooltip = vengeful
			}			
		}
		else_if = {
			limit = {
				has_trait = compassionate
			}		
			random = {
				chance = 33
				remove_trait = compassionate
				add_trait_force_tooltip = callous
			}			
		}	
		random = {
			chance = 50
			add_prowess_skill = 1
		}
	}
	option = { # Logistics nightmare
		name = explore_history.1022.c	
		if = {
			limit = { has_trait = logistician }
			add_martial_lifestyle_xp = 300
		}
		else = {
			random = {
				chance = 75
				add_trait = logistician
			}
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.1023
			days = 5
		}
	}
}


# The Doom of Mandos
explore_history.1023 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.1023.t
	desc = explore_history.1023.desc
	theme = explore_history_activity
	override_background = {
		reference = wilderness_mountains
	}
	override_effect_2d = {
		reference = snow	
	}
	
	left_portrait = {
		character = character:linefinwe4 #Fingolfin
		animation = personality_rational
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:linefinwe2 #Feanor
		animation = personality_callous
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:linefinwe6 #Finarfin
		animation = shame
	}
	option = { # Harsh justice
		name = explore_history.1023.a	
		add_prestige = 150
		if = {
			limit = {
				has_trait = arbitrary
			}		
			random = {
				chance = 33
				remove_trait = arbitrary
				add_trait_force_tooltip = just
			}			
		}
		else_if = {
			limit = {
				has_trait = zealous
			}		
			random = {
				chance = 33
				remove_trait = zealous
				add_trait_force_tooltip = cynical
			}			
		}	
	}

	option = { # How far ?
		name = explore_history.1023.b
		add_piety = 150
	}

	option = { # Returning home
		name = explore_history.1023.c
		add_stress = -15
		if = {
			limit = {
				has_trait = diligent
			}		
			random = {
				chance = 33
				remove_trait = diligent
				add_trait_force_tooltip = lazy
			}			
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.1024
			days = 5
		}
	}
}

# Burning the Swan-ships
explore_history.1024 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.1024.t
	desc = explore_history.1024.desc
	theme = explore_history_activity
	override_background = {	
		reference = fp1_beached_longships
	}
	override_effect_2d = {
		reference = smoke
	}
	widgets = {
		widget = {
			gui = "lotr_shader_event_sparks"
			container = "lotr_shader_event_foreground"
		}
		widget = {
			gui = "lotr_shader_event_fire"
			container = "lotr_shader_event_background"
		}
	}
	
	right_portrait = {
		character = character:linefinwe2 #Feanor
		animation = laugh
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:linefinwe10 #Maedhros
		animation = beg
		animate_if_dead = yes
	}

	option = { # Terrible manner to treat subjects
		name = explore_history.1024.a
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
	}

	option = { # Deliberate betrayal
		name = explore_history.1024.b	
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}		
	}
	option = { # Better to be the traitor
		name = explore_history.1024.c
		if = {
			limit = {
				has_trait = trusting
			}		
			random = {
				chance = 33
				remove_trait = trusting
				add_trait_force_tooltip = paranoid
			}
		}
		random = {
			chance = 50
			add_intrigue_skill = 1
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.1025
			days = 5
		}
	}
}

# The Battle under the Stars
explore_history.1025 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.1025.t
	desc = explore_history.1025.desc
	theme = explore_history_activity
	override_background = {
		reference = battlefield
	}
	right_portrait = {
		character = character:linefinwe2
		animation = severelywounded
		triggered_outfit = {
			outfit_tags = { elven_war }
		}
		animate_if_dead = yes
	}


	option = { # Such a shame
		name = explore_history.1025.a
		random = {
			chance = 50
			add_learning_skill = 1
		}
	}

	option = { # Valiant
		name = explore_history.1025.b
		if = {
			limit = { has_trait = lifestyle_blademaster }
			random = {
				chance = 50
				add_trait_xp = {
					trait = lifestyle_blademaster
					value = 10
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_blademaster
			}
		}
	}

	option = { # Reckless
		name = explore_history.1025.c
		if = {
			limit = { has_trait = reckless }
			add_martial_lifestyle_xp = 300
		}
		else = {
			random = {
				chance = 75
				add_trait = reckless
			}
		}
	}
	
	after = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = explore_history_funding
						option = explore_history_extra_funding
					}
				}
				NOT = { has_character_flag = not_finished_reading }
			}
			add_character_flag = not_finished_reading
			trigger_event = {
				id = explore_history.0001
				days = 5
			}
		}
		else = {
			if = {
				limit = { has_character_flag = not_finished_reading }
				remove_character_flag = not_finished_reading
			}
			trigger_event = {
				id = explore_history.0050
				days = 5
			}
		}
	}
}


################################
# THE FIRST AGE
# 2001-2999
# by Jamie-San
################################

## The Siege of Angband and the Realms of Beleriand
# The Siege of Angband and the Realms of Beleriand
explore_history.2001 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.2001.t
	desc = explore_history.2001.desc
	theme = explore_history_activity
	override_background = {
		reference = armory
	}
	left_portrait = {
		character = root
		animation = personality_rational
	}

	option = { # Wise patience
		name = explore_history.2001.a
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
		if = {
			limit = {
				has_trait = impatient
			}		
			random = {
				chance = 33
				remove_trait = impatient
				add_trait_force_tooltip = patient
			}			
		}
	}

	option = { # Vigilance of the Noldor
		name = explore_history.2001.b
		random = {
			chance = 33
			add_martial_lifestyle_perk_points = 1
		}
	}

	option = { # Denfense was the right choice
		name = explore_history.2001.c
		random = {
			chance = 50
			add_martial_skill = 1
		}
		random = {
			chance = 50
			add_trait = unyielding_defender
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.2002
			days = 5
		}
	}
}

# Realms of the Seven Lords
explore_history.2002 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.2002.t
	desc = explore_history.2002.desc
	theme = explore_history_activity
	override_background = {
		reference = throne_room_noldor
	}
	left_portrait = {
		character = character:linefinwe10 #Maedhros
		animation = war_defender
		triggered_outfit = {
			outfit_tags = { elven_war }
		}
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:linefinwe13 #Caranthir
		animation = personality_honorable
		triggered_outfit = {
			outfit_tags = { elven_war }
		}
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:linefinwe15 #Amrod
		animation = personality_rational
		triggered_outfit = {
			outfit_tags = { elven_war }
		}
		animate_if_dead = yes
	}
	

	option = { # Maglor with only cavalry
		name = explore_history.2002.a
		random = {
			chance = 50
			add_prowess_skill = 1
		}
		random = {
			chance = 50
			add_trait = open_terrain_expert
		}
	}

	option = { # Caranthir's tolerance
		name = explore_history.2002.b
		add_prestige = 150
		random = {
			chance = 33
			add_stewardship_lifestyle_perk_points = 1
		}
	}

	option = { # Ambarussa farming
		name = explore_history.2002.c
		add_stress = -20
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
		if = {
			limit = {
				has_trait = brave
			}		
			random = {
				chance = 33

				remove_trait = brave
				add_trait_force_tooltip = craven
			}			
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.2003
			days = 5
		}
	}
}

# The Realms of the House of Fingolfin
explore_history.2003 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.2003.t
	desc = explore_history.2003.desc
	theme = explore_history_activity
	override_background = {
		reference = gondolin
	}
	left_portrait = {
		character = character:linefinwe20 #Fingon
		animation = personality_rational
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:linefinwe4 #Fingolfin
		animation = personality_honorable
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:linefinwe21 #Turgon
		animation = personality_zealous
		animate_if_dead = yes
	}

	option = { # Integrating the Hadorim
		name = explore_history.2003.a
		if = {
			limit = {
				has_trait = greedy
			}		
			random = {
				chance = 33

				remove_trait = greedy
				add_trait_force_tooltip = generous
			}			
		}		
		if = {
			limit = { has_trait = shrewd }
			random = {
				chance = 50
				add_learning_skill = 1
			}
		}
		else = {
			random = {
				chance = 20
				add_trait = shrewd
			}
		}
	}

	option = { # Abandoning Vinyamar
		name = explore_history.2003.b
		add_stewardship_skill = 1
		add_piety = -150
		if = {
			limit = {
				has_trait = content
			}		
			random = {
				chance = 33

				remove_trait = content
				add_trait_force_tooltip = ambitious
			}			
		}	
	}

	option = { # Turgon's secrecy
		name = explore_history.2003.c
		random = {
			chance = 50
			add_intrigue_skill = 1
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.2004
			days = 5
		}
	}
}

# The Realms of the House of Finarfin
explore_history.2004 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.2004.t
	desc = explore_history.2004.desc
	theme = explore_history_activity
	override_background = {
		reference = throne_room_noldor 
	}
	left_portrait = {
		character = character:linefinwe34 #Angrod
		animation = worry
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:linefinwe35 #Aegnor
		animation = personality_bold
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:linefinwe33 #Finrod
		animation = personality_honorable 
		animate_if_dead = yes
	}

	option = { # Minas Tirith
		name = explore_history.2004.a
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}
	}

	option = { # Kindness to Beor
		name = explore_history.2004.b
		add_prestige = 150
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
	}

	option = { # Felagund
		name = explore_history.2004.c
		if = {
			limit = {
				has_trait = lazy
			}		
			random = {
				chance = 33
				remove_trait = lazy
				add_trait_force_tooltip = diligent
			}			
		}	
		random = {
			chance = 50
			add_stewardship_skill = 1
		}		
	}
	
	after = {
		trigger_event = {
			id = explore_history.2005
			days = 5
		}
	}
}

# Kingdoms of the Sindar
explore_history.2005 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.2005.t
	desc = explore_history.2005.desc
	theme = explore_history_activity
	override_background = {
		reference = luthien
	}
	right_portrait = {
		character = character:lineofelwe3 #Thingol
		animation = personality_cynical 
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofcirdan #Cirdan
		animation = personality_content
		animate_if_dead = yes
	}

	option = { # The gall of the Noldor
		name = explore_history.2005.a
		add_prestige = 150
		if = {
			limit = {
				has_trait = calm
			}		
			random = {
				chance = 33
				remove_trait = calm
				add_trait_force_tooltip = wrathful
			}			
		}
	}

	option = { # Friendship of the Falathrim
		name = explore_history.2005.b
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
	}

	option = { # Left alone
		name = explore_history.2005.c
		add_stress = -20
		if = {
			limit = {
				has_trait = gregarious
			}		
			random = {
				chance = 33
				remove_trait = gregarious
				add_trait_force_tooltip = shy
			}			
		}
	}
	
	after = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = explore_history_funding
						option = explore_history_extra_funding
					}
				}
				NOT = { has_character_flag = not_finished_reading }
			}
			add_character_flag = not_finished_reading
			trigger_event = {
				id = explore_history.0001
				days = 5
			}
		}
		else = {
			if = {
				limit = { has_character_flag = not_finished_reading }
				remove_character_flag = not_finished_reading
			}
			trigger_event = {
				id = explore_history.0050
				days = 5
			}
		}
	}
}

## Beren and Lúthien
# The Meeting
explore_history.2011 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.2011.t
	desc = explore_history.2011.desc
	theme = explore_history_activity
	override_background = {
		reference = luthien
	}
	left_portrait = {
		character = character:lineofbeor32 #Beren
		animation = flirtation
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofelwe4 #Lúthien
		animation = flirtation_left
		animate_if_dead = yes
	}

	option = { # Vegetarian diet
		name = explore_history.2011.a
		if = { 
			limit = { has_trait = lifestyle_herbalist }
			random = {
				chance = 30
				add_learning_lifestyle_perk_points = 1
			}
		}
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_herbalist
			}
		}
	}

	option = { # Dancing in the moonlight
		name = explore_history.2011.b
		add_stress = -20
	}

	option = { # Lore and Magic
		name = explore_history.2011.c
		random = {
			chance = 50
			add_learning_skill = 1
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.2012
			days = 5
		}
	}
}

# In Menegroth
explore_history.2012 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.2012.t
	desc = explore_history.2012.desc
	theme = explore_history_activity
	override_background = {
		reference = throne_room_thranduils_halls
	}
	left_portrait = {
		character = character:lineofelwe4 #Lúthien
		animation = beg
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofbeor32 #Beren
		animation = sadness 
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofelwe3 #Thingol
		animation = dismissal
		animate_if_dead = yes
	}

	option = { # Thingol was too lenient
		name = explore_history.2012.a
		add_prestige = 150
		if = {
			limit = {
				has_trait = just
			}		
			random = {
				chance = 33

				remove_trait = just
				add_trait_force_tooltip = arbitrary
			}			
		}
	}

	option = { # Smart Finrod
		name = explore_history.2012.b
		random = {
			chance = 33
			add_intrigue_lifestyle_perk_points = 1
		}
	}

	option = { # Tevildo
		name = explore_history.2012.c
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.2013
			days = 5
		}
	}
}

# Beleriand has talent
explore_history.2013 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.2013.t
	desc = explore_history.2013.desc
	theme = explore_history_activity
	override_background = {
		reference = throne_room_evil
	}
	left_portrait = {
		character = character:lineofsauron #Sauron
		animation = war_over_win 
	}
	right_portrait = {
		character = character:linefinwe33 #Finrod
		animation = prisondungeon
		animate_if_dead = yes
	}

	option = { # Finrod's Word
		name = explore_history.2013.a
		add_prestige = 150
		if = {
			limit = {
				has_trait = shy
			}		
			random = {
				chance = 33

				remove_trait = shy
				add_trait_force_tooltip = gregarious
			}			
		}		
		if = {
			limit = { has_trait = poet }		
			random = {
				chance = 50
				add_diplomacy_skill = 1
			}
		}
		else = {
			random = {
				chance = 25
				add_trait = poet
			}
		}
	}

	option = { # Celegorm's Move
		name = explore_history.2013.b
		random = {
			chance = 50
			add_intrigue_skill = 1
		}
	}

	option = { # Oromë's Creatures
		name = explore_history.2013.c
		add_piety = 100
	}
	
	after = {
		trigger_event = {
			id = explore_history.2014
			days = 5
		}
	}
}

# The humbling of Sauron
explore_history.2014 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.2014.t
	desc = explore_history.2014.desc
	theme = explore_history_activity
	override_background = {
		reference = farmland 
	}
	override_effect_2d = {
		reference = legend_glow	
	}
	left_portrait = {
		character = character:lineofelwe4 #Luthien
		animation = war_over_win
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofsauron #Sauron
		animation = stress
	}

	option = { # Celegorm strikes again
		name = explore_history.2014.a
		if = {
			limit = {
				has_trait = forgiving
			}		
			random = {
				chance = 33

				remove_trait = forgiving
				add_trait_force_tooltip = vengeful
			}			
		}
		random = {
			chance = 50
			add_martial_skill = 1
		}
	}

	option = { # Sauron's werewolves
		name = explore_history.2014.b
		random = {
			chance = 33
			add_martial_lifestyle_perk_points = 1
		}
	}

	option = { # Angrist
		name = explore_history.2014.c
		random = {
			chance = 50
			add_prowess_skill = 1
		}		
	}
	
	after = {
		trigger_event = {
			id = explore_history.2015
			days = 5
		}
	}
}

# The Angband Heist
explore_history.2015 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.2015.t
	desc = explore_history.2015.desc
	theme = explore_history_activity
	override_background = {
		reference = throne_room_west
	}
	left_portrait = {
		character = character:lineofbeor32 #Beren
		animation = severelywounded
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofelwe4 #Luthien
		animation = bold
		animate_if_dead = yes
	}

	option = { # Luthien's voice
		name = explore_history.2015.a
		random = {
			chance = 33
			add_diplomacy_lifestyle_perk_points = 1
		}
	}

	option = { # Thingol's request has consequences
		name = explore_history.2015.b
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
	}

	option = { # Why only one Silmaril ?
		name = explore_history.2015.c
		if = {
			limit = {
				has_trait = generous
			}		
			random = {
				chance = 33
				remove_trait = generous
				add_trait_force_tooltip = greedy
			}			
		}
		random = {
			chance = 33
			add_stewardship_lifestyle_perk_points = 1
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.2016
			days = 5
		}
	}
}

# Many partings
explore_history.2016 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.2016.t
	desc = explore_history.2016.desc
	theme = explore_history_activity
	override_background = {
		reference = garden
	}
	left_portrait = {
		character = character:lineofelwe4 #Luthien
		animation = newborn
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofbeor32 #Beren
		animation = personality_content
		animate_if_dead = yes
	}

	option = { # Luthien's choice
		name = explore_history.2016.a
		add_piety = 150
		if = {
			limit = {
				has_trait = ambitious
			}		
			random = {
				chance = 33
				remove_trait = ambitious
				add_trait_force_tooltip = content
			}			
		}
	}

	option = { # What a hunt
		name = explore_history.2016.b
		if = {
			limit = { has_trait = lifestyle_hunter }
			random = {
				chance = 50
				add_trait_xp = {
					trait = lifestyle_hunter
					track = hunter
					value = 10
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_hunter
			}
		}	
	}

	option = { # Healing
		name = explore_history.2016.c
		if = {
			limit = { has_trait = lifestyle_physician }
			random = {
				chance = 50
				add_trait_xp = {
					trait = lifestyle_physician
					value = 10
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_physician
			}
		}	
	}
	
	after = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = explore_history_funding
						option = explore_history_extra_funding
					}
				}
				NOT = { has_character_flag = not_finished_reading }
			}
			add_character_flag = not_finished_reading
			trigger_event = {
				id = explore_history.0001
				days = 5
			}
		}
		else = {
			if = {
				limit = { has_character_flag = not_finished_reading }
				remove_character_flag = not_finished_reading
			}
			trigger_event = {
				id = explore_history.0050
				days = 5
			}
		}
	}
}

## The Children of Húrin by Brice Underhill
# Nirnaeth Arnoediad
explore_history.2021 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.2021.t
	desc = explore_history.2021.desc
	theme = explore_history_activity
	override_background = {
		reference = battlefield
	}
	override_effect_2d = {
		reference = rain
	}
	left_portrait = {
		character = character:lineofhador6 #Huor
		animation = severelywounded
		triggered_outfit = {
			outfit_tags = { elven_war_helm }
		}
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofhador5 #Húrin
		animation = personality_honorable
		triggered_outfit = {
			outfit_tags = { elven_war_helm }
		}
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:linefinwe21 #Turgon
		animation = marshal
		triggered_outfit = {
			outfit_tags = { elven_war }
		}
		animate_if_dead = yes
	}

	option = { # To the last man
		name = explore_history.2021.a
		if = {
			limit = { has_trait = unyielding_defender }
			add_martial_lifestyle_xp = 300
		}
		else = {
			random = {
				chance = 75
				add_trait = unyielding_defender
			}
		}
	}

	option = { # Survival by secrecy
		name = explore_history.2021.b
		random = {
			chance = 50
			add_intrigue_skill = 1
		}
	}

	option = { # Morgoth's magic
		name = explore_history.2021.c
		add_piety = -150
		random = {
			chance = 25
			add_secret = { type = secret_witch }
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.2022
			days = 5
		}
	}
}

# Turin in Doriath
explore_history.2022 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.2022.t
	desc = explore_history.2022.desc
	theme = explore_history_activity
	override_background = {
		reference = throne_room_thranduils_halls
	}
	left_portrait = {
		character = character:lineofhador7 #Túrin
		animation = personality_bold
		triggered_outfit = {
			outfit_tags = { elven_war_helm }
		}
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofelwe3 #Thingol
		animation = personality_forgiving
		animate_if_dead = yes
	}

	option = { # Saeros had it coming
		name = explore_history.2022.a
		random = {
			chance = 50
			add_prowess_skill = 1
		}
		if = {
			limit = {
				has_trait = forgiving
			}		
			random = {
				chance = 33
				remove_trait = forgiving
				add_trait_force_tooltip = vengeful
			}			
		}	
	}

	option = { # Student of Thingol
		name = explore_history.2022.b
		random = {
			chance = 50
			add_learning_skill = 1
		}
	}

	option = { # In peaceful Doriath
		name = explore_history.2022.c
		add_stress = -15
	}
	
	after = {
		trigger_event = {
			id = explore_history.2023
			days = 5
		}
	}
}

# The land of the Helm and Bow
explore_history.2023 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.2023.t
	desc = explore_history.2023.desc
	theme = explore_history_activity
	override_background = {
		reference = ep2_hunt_foggy_forest
	}
	override_effect_2d = {
		reference = fog
	}
	left_portrait = {
		character = character:lineofhador7 #Túrin
		animation = marshal
		triggered_outfit = {
			outfit_tags = { elven_war }
		}
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofbeleg #Beleg
		triggered_outfit = {
			outfit_tags = { elven_war }
		}
		animation = hunting_longbow_rest_arrow_default
		animate_if_dead = yes
	}

	option = { # Mim was ill-treated
		name = explore_history.2023.a
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}				
	}

	option = { # The Orcs trapped them
		name = explore_history.2023.b
		random = {
			chance = 50
			add_martial_skill = 1
		}
	}

	option = { # How were they supplied ?
		name = explore_history.2023.c
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.2024
			days = 5
		}
	}
}

# The Mormegil of Nargothrond
explore_history.2024 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.2024.t
	desc = explore_history.2024.desc
	theme = explore_history_activity
	override_background = {
		reference = gondolin_fall
	}
	override_effect_2d = {
		reference = smoke
	}
	widgets = {
		widget = {
			gui = "lotr_shader_event_sparks"
			container = "lotr_shader_event_foreground"
		}
		widget = {
			gui = "lotr_shader_event_fire"
			container = "lotr_shader_event_background"
		}
	}
	
	left_portrait = {
		character = character:lineofhador7 #Túrin
		animation = marshal
		triggered_outfit = {
			outfit_tags = { elven_war_helm }
		}
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:linefinwe42 #Finduilas
		animation = prisonhouse
		animate_if_dead = yes
	}

	option = { # Fighting on the field was a mistake
		name = explore_history.2024.a
		random = {
			chance = 33
			add_martial_lifestyle_perk_points = 1
		}	
	}

	option = { # Vala Ulmo unheeded
		name = explore_history.2024.b
		if = {
			limit = { has_trait = lifestyle_mystic }
			random = {
				chance = 50
				add_trait_xp = {
					trait = lifestyle_mystic
					value = 10
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_mystic
			}
		}
		if = {
			limit = {
				has_trait = cynical
			}		
			random = {
				chance = 33
				remove_trait = cynical
				add_trait_force_tooltip = zealous
			}			
		}
	}

	option = { # He faced his enemy with honour
		name = explore_history.2024.c
		add_prestige = 150
		if = {
			limit = {
				has_trait = deceitful
			}		
			random = {
				chance = 33
				remove_trait = deceitful
				add_trait_force_tooltip = honest
			}			
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.2025
			days = 5
		}
	}
}

# Cabed-en-Aras
explore_history.2025 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.2025.t
	desc = explore_history.2025.desc
	theme = explore_history_activity
	override_background = {
		reference = wilderness_mountains 
	}
	override_effect_2d = {
		reference = rain
	}
	left_portrait = {
		character = character:lineofhador7 #Túrin
		animation = pain
		triggered_outfit = {
			outfit_tags = { western_war }
		}
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofhador9 #Nienor
		animation = shock
		animate_if_dead = yes
	}

	option = { # Turin once again faced the enemy
		name = explore_history.2025.a
		add_prestige = 150
		if = {
			limit = {
				has_trait = fickle
			}		
			random = {
				chance = 33
				remove_trait = fickle
				add_trait_force_tooltip = stubborn
			}			
		}	
	}

	option = { # Defeat of Glaurung
		name = explore_history.2025.b
		if = {
			limit = { has_trait = lifestyle_blademaster }
			random = {
				chance = 50
				add_trait_xp = {
					trait = lifestyle_blademaster
					value = 10
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_blademaster
			}
		}	
	}

	option = { # He did what with his sister ?
		name = explore_history.2025.c
		trigger = { # Added here so that nazgul/maiar/valar cant get deviant trait
			lotr_is_spirit_culture_trigger = no
		}
		add_piety = -150
		random = {
			chance = 33
			add_secret = { type = secret_deviant }
		}
		add_intrigue_skill = 1
	}
	
	after = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = explore_history_funding
						option = explore_history_extra_funding
					}
				}
				NOT = { has_character_flag = not_finished_reading }
			}
			add_character_flag = not_finished_reading
			trigger_event = {
				id = explore_history.0001
				days = 5
			}
		}
		else = {
			if = {
				limit = { has_character_flag = not_finished_reading }
				remove_character_flag = not_finished_reading
			}
			trigger_event = {
				id = explore_history.0050
				days = 5
			}
		}
	}
}


## Tuor and the Fall of Gondolin by Brice Underhill
# Nirnaeth Arnoediad
explore_history.2031 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.2031.t
	desc = explore_history.2031.desc
	theme = explore_history_activity
	override_background = {
		reference = battlefield
	}
	override_effect_2d = {
		reference = rain
	}
	center_portrait = {
		character = character:lineofhador6 #Huor
		animation = personality_honorable
		triggered_outfit = {
			outfit_tags = { elven_war_helm }
		}
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofbeor26 #Rian
		animation = grief
		animate_if_dead = yes
	}

	option = { # To the last man
		name = explore_history.2031.a
		random = {
			chance = 50
			add_prowess_skill = 1
		}
	}

	option = { # Friends to the elven King
		name = explore_history.2031.b
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
	}

	option = { # Sheltering the widow
		name = explore_history.2031.c
		add_prestige = 150
	}
	
	after = {
		trigger_event = {
			id = explore_history.2032
			days = 5
		}
	}
}

# Tuor in Mithrim
explore_history.2032 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.2032.t
	desc = explore_history.2032.desc
	theme = explore_history_activity
	override_background = {
		reference = throne_room_tribal
	}
	center_portrait = {
		character = character:lineofhador10 # Tuor
		animation = prisonhouse
		outfit_tags = { beggar_rags }
		animate_if_dead = yes
	}


	option = { # Hiding in caves
		name = explore_history.2032.a
		random = {
			chance = 50
			add_intrigue_skill = 1
		}
		trigger_event = {
			id = explore_history.2033
			days = 5
		}
	}

	option = { # Dangerous Prey
		name = explore_history.2032.b
		if = {
			limit = { has_trait = lifestyle_hunter }
			random = {
				chance = 50
				add_trait_xp = {
					trait = lifestyle_hunter
					track = hunter
					value = 10
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_hunter
			}
		}	
	}

	option = { # Thralldom is despicable
		name = explore_history.2032.c
		add_piety = 150
	}
	
	after = {
		trigger_event = {
			id = explore_history.2033
			days = 5
		}
	}
}

# Nevrast
explore_history.2033 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.2033.t
	desc = explore_history.2033.desc
	theme = explore_history_activity
	override_background = {
		reference = ulmo
	}
	center_portrait = {
		character = character:lineofhador10 #Tuor
		animation = personality_zealous
		animate_if_dead = yes
	}
	override_effect_2d = {
		reference = rain
	}

	option = { # Followed Ulmo's advice
		name = explore_history.2033.a
		add_piety = 150
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}
	}

	option = { # Half a year at the beach
		name = explore_history.2033.b
		add_stress = -15
	}

	option = { # The call of the sea
		name = explore_history.2033.c
		if = {
			limit = { has_trait = lifestyle_mariner }
			random = {
				chance = 50
				add_trait_xp = {
					trait = lifestyle_mariner
					value = 5
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_mariner
			}
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.2034
			days = 5
		}
	}
}

# Gondolin
explore_history.2034 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.2034.t
	desc = explore_history.2034.desc
	theme = explore_history_activity
	override_background = {
		reference = gondolin
	}
	override_effect_2d = {
		reference = legend_glow
	}
	center_portrait = {
		character = character:lineofhador10 #Tuor
		animation = wedding_groom_right
	}
	left_portrait = {
		character = character:linefinwe25 #Idril
		animation = wedding_bride_left
	}
	right_portrait = {
		character = character:linefinwe21 #Turgon
		animation = happy
		animate_if_dead = yes
	}

	option = { # City so fair
		name = explore_history.2034.a
		random = {
			chance = 33
			add_stewardship_lifestyle_perk_points = 1
		}
	}

	option = { # What have the Valar ever done for us ?
		name = explore_history.2034.b
		add_piety = -50
		add_prestige = 150
			if = {
			limit = {
				has_trait = zealous
			}		
			random = {
				chance = 33
				remove_trait = zealous
				add_trait_force_tooltip = cynical
			}			
		}	
	}

	option = { # Marrying an elven princess
		name = explore_history.2034.c
		add_character_modifier = {
			modifier = lessons_in_seduction
			years = 5
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.2035
			days = 5
		}
	}
}

# The Fall of Gondolin
explore_history.2035 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.2035.t
	desc = explore_history.2035.desc
	theme = explore_history_activity
	override_background = {
		reference = gondolin_fall
	}
	override_effect_2d = {
		reference = smoke
	}
	widgets = {
		widget = {
			gui = "lotr_shader_event_sparks"
			container = "lotr_shader_event_foreground"
		}
		widget = {
			gui = "lotr_shader_event_fire"
			container = "lotr_shader_event_background"
		}
	}
	
	center_portrait = {
		character = character:lineofhador10 #Tuor
		animation = aggressive_axe
		triggered_outfit = {
			outfit_tags = { elven_war_helm }
		}
	}
	right_portrait = {
		character = character:linefinwe32 # Maeglin
		animation = aggressive_mace
		triggered_outfit = {
			outfit_tags = { elven_war }
		}
		animate_if_dead = yes
	}

	option = { # Morgoth's plan
		name = explore_history.2035.a
		add_piety = -50
		add_trait = military_engineer
	}

	option = { # Admiration of elven warriors
		name = explore_history.2035.b
		random = {
			chance = 50
			add_martial_skill = 1
		}
	}

	option = { # Glorfindel
		name = explore_history.2035.c
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}
	}
	
	after = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = explore_history_funding
						option = explore_history_extra_funding
					}
				}
				NOT = { has_character_flag = not_finished_reading }
			}
			add_character_flag = not_finished_reading
			trigger_event = {
				id = explore_history.0001
				days = 5
			}
		}
		else = {
			if = {
				limit = { has_character_flag = not_finished_reading }
				remove_character_flag = not_finished_reading
			}
			trigger_event = {
				id = explore_history.0050
				days = 5
			}
		}
	}
}
################################
# THE SECOND AGE
# 3001-3999
# by Jamie-San
################################

## The Lost Island of Númenor
# The Founding of Númenor
explore_history.3001 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3001.t
	desc = explore_history.3001.desc
	theme = explore_history_activity
	override_background = {
		reference = throne_room_mediterranean
	}
	center_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = character:lineofelros1
		animation = personality_forgiving
		animate_if_dead = yes
	}

	option = { # Awed by Elven generosity
		name = explore_history.3001.a
		add_piety = 150
		if = {
			limit = {
				has_trait = greedy
			}		
			random = {
				chance = 33

				remove_trait = greedy
				add_trait_force_tooltip = generous
			}			
		}
		random = {
			chance = 50
			add_learning_skill = 1
		}
	}

	option = { # The Edain deserved recognition!
		name = explore_history.3001.b
		add_piety = -50
		add_prestige = 150
		if = {
			limit = {
				has_trait = humble
			}		
			random = {
				chance = 33
				remove_trait = humble
				add_trait_force_tooltip = arrogant
			}			
		}	
	}

	option = { # So much hard work!
		name = explore_history.3001.c
		if = {
			limit = {
				has_trait = lazy
			}		
			random = {
				chance = 33
				remove_trait = lazy
				add_trait_force_tooltip = diligent
			}			
		}	
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.3002
			days = 5
		}
	}
}

# Forostar and Orrostar
explore_history.3002 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3002.t
	desc = explore_history.3002.desc
	theme = explore_history_activity
	override_background = {
		reference = wilderness_mountains
	}
	center_portrait = {
		character = root
		animation = personality_rational
	}

	option = { # Oh to live the simple life...
		name = explore_history.3002.a
		if = {
			limit = {
				has_trait = ambitious
			}		
			random = {
				chance = 33

				remove_trait = ambitious
				add_trait_force_tooltip = content
			}			
		}
		add_stress = -20
	}

	option = { # I can't swim!
		name = explore_history.3002.b
		add_prestige = -50
		if = {
			limit = {
				has_trait = brave
			}		
			random = {
				chance = 33
				remove_trait = brave
				add_trait_force_tooltip = craven
			}			
		}	
		random = {
			chance = 50
			add_intrigue_skill = 1
		}
	}

	option = { # How did they move it all?
		name = explore_history.3002.c	
		add_stewardship_lifestyle_xp = 500
	}
	
	after = {
		trigger_event = {
			id = explore_history.3003
			days = 5
		}
	}
}

# Hyarnustar and Andustar
explore_history.3003 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3003.t
	desc = explore_history.3003.desc
	theme = explore_history_activity
	override_background = {
		reference = docks_dunedain
	}
	center_portrait = {
		character = root
		animation = personality_rational
	}

	option = { # Wine? Why not!
		name = explore_history.3003.a
		if = {
			limit = {
				has_trait = temperate
			}		
			random = {
				chance = 33

				remove_trait = temperate
				add_trait_force_tooltip = gluttonous
			}			
		}
		if = {
			limit = {
				NOT = { has_trait = drunkard }
				can_be_drunkard = yes
			}		
			random = {
				chance = 5
				add_trait = drunkard
			}			
		}
		add_stress = -25
	}

	option = { # I bet those lords got what they wanted
		name = explore_history.3003.b
		if = {
			limit = {
				has_trait = just
			}		
			random = {
				chance = 33
				remove_trait = just
				add_trait_force_tooltip = arbitrary
			}			
		}	
		random = {
			chance = 50
			add_intrigue_skill = 1
		}
	}

	option = { # Mallorn melancholy
		name = explore_history.3003.c	
		random = {
			chance = 25
			add_learning_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			add_learning_skill = 1
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.3004
			days = 5
		}
	}
}

# Hyarrostar and Mittalmar
explore_history.3004 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3004.t
	desc = explore_history.3004.desc
	theme = explore_history_activity
	override_background = {
		reference = armenelos
	}
	center_portrait = {
		character = root
		animation = personality_rational
	}

	option = { # So busy!
		name = explore_history.3004.a
		add_prestige = -50
		if = {
			limit = {
				has_trait = gregarious
			}		
			random = {
				chance = 33

				remove_trait = gregarious
				add_trait_force_tooltip = shy
			}			
		}
		random = {
			chance = 5
			add_trait = reclusive
		}
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}
	}

	option = { # Fun at the docks
		name = explore_history.3004.b
		add_piety = -50
		if = {
			limit = {
				has_trait = chaste
			}		
			random = {
				chance = 33
				remove_trait = chaste
				add_trait_force_tooltip = lustful
			}			
		}
		random = {
				chance = 33
				add_intrigue_lifestyle_perk_points = 1
			}
	}

	option = { # Court alliances fascinate me
		name = explore_history.3004.c
		if = {
			limit = {
				has_trait = honest
			}		
			random = {
				chance = 33
				remove_trait = honest
				add_trait_force_tooltip = deceitful
			}			
		}	
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.3005
			days = 5
		}
	}
}

# The Meneltarma
explore_history.3005 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3005.t
	desc = explore_history.3005.desc
	theme = explore_history_activity
	override_background = {
		reference = meneltarma
	}
	override_effect_2d = {
		reference = legend_glow
	}
	center_portrait = {
		character = root
		animation = personality_rational
	}

	option = { # Such tranquility
		name = explore_history.3005.a
		add_piety = 150
		if = {
			limit = {
				has_trait = wrathful
			}		
			random = {
				chance = 33

				remove_trait = wrathful
				add_trait_force_tooltip = calm
			}			
		}
	}

	option = { # Keep your suckling pigs, I'll take fruit
		name = explore_history.3005.b
		if = {
			limit = {
				has_trait = gluttonous
			}		
			random = {
				chance = 33
				remove_trait = gluttonous
				add_trait_force_tooltip = temperate
			}			
		}	
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
	}

	option = { # Obligatory silence? Pah!
		name = explore_history.3005.c
		add_piety = -50
		if = {
			limit = {
				has_trait = shy
			}		
			random = {
				chance = 33
				remove_trait = shy
				add_trait_force_tooltip = gregarious
			}			
		}	
		if = {
			limit = { has_trait = lifestyle_reveler }
			random = {
				chance = 50
				add_trait_xp = {
					trait = lifestyle_reveler
					value = 10
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_reveler
			}
		}			
	}
	
	after = {
		trigger_event = {
			id = explore_history.0050
			days = 5
		}
		add_character_flag = learned_about_numenor
	}
}

## The Foundation of Bellakar by RedArkady
# The First Ships
explore_history.3011 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3011.t
	desc = explore_history.3011.desc
	theme = explore_history_activity
	override_background = {
		reference = market_east
	}
	center_portrait = {
		character = root
		animation = personality_rational
	}

	option = { # Ah! To have seen Bellakar’s golden shores
		name = explore_history.3011.a
		if = {
			limit = { has_trait = poet }		
			random = {
				chance = 50
				add_learning_skill = 1
			}			
		}
		else = {
			random = {
				chance = 25
				add_trait = poet
			}
		}
	}

	option = { # Bellakar was a primitive place
		name = explore_history.3011.b
		add_prestige = 150
		if = {
			limit = {
				has_trait = humble
			}		
			random = {
				chance = 33
				remove_trait = humble
				add_trait_force_tooltip = arrogant
			}			
		}	
	}

	option = { # Bellakar was riddled with heathens
		name = explore_history.3011.c
		add_piety = 150
		if = {
			limit = {
				has_trait = cynical
			}		
			random = {
				chance = 33
				remove_trait = cynical
				add_trait_force_tooltip = zealous
			}			
		}	
	}
	
	after = {
		trigger_event = {
			id = explore_history.3012
			days = 5
		}
	}
}

# The Bellakaranî City-States
explore_history.3012 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3012.t
	desc = explore_history.3012.desc
	theme = explore_history_activity
	override_background = {
		reference = docks_adunai
	}
	center_portrait = {
		character = character:lineofciryandur1 # Ciryandur
		animation = personality_honorable
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofelros9 # Tar Surion
		animation = personality_compassionate
		animate_if_dead = yes
	}
		

	option = { # Governing such different cities
		name = explore_history.3012.a
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}
	}

	option = { # We have fallen far
		name = explore_history.3012.b
		random = {
				chance = 50
				add_learning_skill = 1
			}
		if = {
			limit = {
				has_trait = arrogant
			}		
			random = {
				chance = 33
				remove_trait = arrogant
				add_trait_force_tooltip = humble
			}			
		}	
	}

	option = { # Through the blending of the settlers
		name = explore_history.3012.c	
		add_prestige = 150
	}
	
	after = {
		trigger_event = {
			id = explore_history.3013
			days = 5
		}
	}
}

# The Fifteen Years War
explore_history.3013 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3013.t
	desc = explore_history.3013.desc
	theme = explore_history_activity
	override_background = {
		reference = battlefield
	}
	center_portrait = {
		character = character:lineofelros14 # Tar Atanamir
		animation = war_attacker
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofciryandur9 # Ciryandur II
		animation = dismissal
		animate_if_dead = yes
	}

	option = { # Alas! That the heirs of Eärendil
		name = explore_history.3013.a
		if = {
			limit = {
				has_trait = cynical
			}		
			random = {
				chance = 33

				remove_trait = cynical
				add_trait_force_tooltip = humble
			}			
		}
		add_piety = 150
	}

	option = { # Ciryandur was a fool 
		name = explore_history.3013.b
		if = {
			limit = {
				has_trait = just
			}		
			random = {
				chance = 33
				remove_trait = just
				add_trait_force_tooltip = cynical
			}			
		}	
		random = {
			chance = 50
			add_intrigue_skill = 1
		}
	}

	option = { # Interesting that Ciryandur held out for 15 years
		name = explore_history.3013.c	
		random = {
			chance = 25
			add_martial_skill = 1
		}
		random = {
			chance = 25
			add_trait = unyielding_defender
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.3014
			days = 5
		}
	}
}

# The Bâitha’n-Kadîr
explore_history.3014 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3014.t
	desc = explore_history.3014.desc
	theme = explore_history_activity
	override_background = {
		reference = fp2_throne_room
	}
	center_portrait = {
		character = character:lineofelros28 # Pharazôn
		animation = personality_callous
		animate_if_dead = yes
	}

	option = { # Any ruler must understand how to balance
		name = explore_history.3014.a
		random = {
			chance = 25
			add_learning_skill = 1
		}
		random = {
			chance = 25
			add_stewardship_skill = 1
		}
	}

	option = { # If I neglect my subjects 
		name = explore_history.3014.b
		add_prestige = 150
		if = {
			limit = {
				has_trait = just
			}		
			random = {
				chance = 33
				remove_trait = just
				add_trait_force_tooltip = cynical
			}			
		}	
		
		random = {
				chance = 50
				add_intrigue_skill = 1
			}
	}

	option = { # Ah Pharazon. Mightiest of soldiers
		name = explore_history.3014.c
		add_piety = 150
		if = {
			limit = {
				has_trait = cynical
			}		
			random = {
				chance = 33
				remove_trait = cynical
				add_trait_force_tooltip = zealous
			}			
		}	
	}
	
	after = {
		trigger_event = {
			id = explore_history.3015
			days = 5
		}
	}
}

# The Korlean War
explore_history.3015 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3015.t
	desc = explore_history.3015.desc
	theme = explore_history_activity
	override_background = {
		reference = fp2_courtyard
	}
	center_portrait = {
		character = character:lineofelros28 #Pharazôn
		animation = war_over_win
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofsauron # Sauron
		animation = prisonhouse
	}
	
	option = { # Alas for Númenor
		name = explore_history.3015.a
		add_prestige = 150
		if = {
			limit = {
				has_trait = arrogant
			}		
			random = {
				chance = 33
				remove_trait = arrogant
				add_trait_force_tooltip = humble
			}			
		}
	}

	option = { # Never again will The Shadow
		name = explore_history.3015.b
		if = {
			limit = {
				has_trait = content
			}		
			random = {
				chance = 33
				remove_trait = content
				add_trait_force_tooltip = zealous
			}			
		}	
		random = {
			chance = 33
			add_trait = holy_warrior
		}
	}

	option = { # I really should keep an eye on Korlea
		name = explore_history.3015.c
		add_piety = 150
		if = {
			limit = {
				has_trait = trusting
			}		
			random = {
				chance = 33
				remove_trait = trusting
				add_trait_force_tooltip = paranoid
			}			
		}	
	}
	
	after = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = explore_history_funding
						option = explore_history_extra_funding
					}
				}
				NOT = { has_character_flag = not_finished_reading }
			}
			add_character_flag = not_finished_reading
			trigger_event = {
				id = explore_history.0001
				days = 5
			}
		}
		else = {
			if = {
				limit = { has_character_flag = not_finished_reading }
				remove_character_flag = not_finished_reading
			}
			trigger_event = {
				id = explore_history.0050
				days = 5
			}
		}
	}
}

## Bellakar & the Debt of Elendil by RedArkady
# Bellakar and the Downfall of Númenór
explore_history.3021 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3021.t
	desc = explore_history.3021.desc
	theme = explore_history_activity
	override_background = {
		reference = downfall
	}
	center_portrait = {
		character = character:lineofelros28 # Ar-Pharazôn
		animation = shock
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofsauron # Sauron
		animation = fear
	}
	

	option = { # So much loss
		name = explore_history.3021.a
		random = {
				chance = 50
				add_learning_skill = 1
			}
		if = {
			limit = {
				has_trait = sadistic
			}		
			random = {
				chance = 33
				remove_trait = sadistic
				add_trait_force_tooltip = humble
			}			
		}	
	}

	option = { # Númenór received just payment for its blasphemy
		name = explore_history.3021.b
		add_piety = 150
		if = {
			limit = {
				has_trait = just
			}		
			random = {
				chance = 33
				remove_trait = just
				add_trait_force_tooltip = zealous
			}			
		}	
	}

	option = { # At least Elendil escaped
		name = explore_history.3021.c
		if = {
			limit = {
				has_trait = arrogant
			}		
			random = {
				chance = 33
				remove_trait = arrogant
				add_trait_force_tooltip = humble
			}			
		}	
		random = {
			chance = 33
			add_stewardship_lifestyle_perk_points = 1
		}			
	}

	after = {
		trigger_event = {
			id = explore_history.3022
			days = 5
		}
	}
}

# The Aftermath
explore_history.3022 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3022.t
	desc = explore_history.3022.desc
	theme = explore_history_activity
	override_background = {
		reference = throne_room_dunedain
	}
	override_effect_2d = {
		reference = legend_glow
	}
	center_portrait = {
		character = character:lineofelendil #Elendil
		animation = personality_zealous
		animate_if_dead = yes
	}

	option = { # Elendil was a great man
		name = explore_history.3022.a
		random = {
				chance = 33
				add_learning_lifestyle_perk_points = 1
			}	
		
		if = {
			limit = {
				has_trait = arrogant
			}		
			random = {
				chance = 33
				remove_trait = arrogant
				add_trait_force_tooltip = humble
			}			
		}	
	}

	option = { # If we had acknowledged Elendil 
		name = explore_history.3022.b
		add_piety = 150
		if = {
			limit = {
				has_trait = temperate
			}		
			random = {
				chance = 33
				remove_trait = temperate
				add_trait_force_tooltip = zealous
			}			
		}	
	}

	option = { # Wise to give the Bellekaze a share 
		name = explore_history.3022.c	
		random = {
				chance = 50
				add_stewardship_skill = 1
			}	
		
		if = {
			limit = {
				has_trait = arrogant
			}		
			random = {
				chance = 33
				remove_trait = arrogant
				add_trait_force_tooltip = humble
			}			
		}			
	}
	
	after = {
		trigger_event = {
			id = explore_history.3023
			days = 5
		}
	}
}

# The Last Alliance
explore_history.3023 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3023.t
	desc = explore_history.3023.desc
	theme = explore_history_activity
	override_background = {
		reference = docks_dunedain
	}
	center_portrait = {
		character = character:lineoftumakveh0 # Zagarthor
		animation = personality_honorable
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofanarion1 # Anarion
		animation = worry
		triggered_outfit = {
			outfit_tags = { gondor_war_prince }
		}
		animate_if_dead = yes
	}

	option = { # Only united will the Faithful triumph
		name = explore_history.3023.a
		if = {
			limit = {
				has_trait = temperate
			}		
			random = {
				chance = 33

				remove_trait = temperate
				add_trait_force_tooltip = zealous
			}			
		}
		add_piety = 150
	}

	option = { # Maybe Bellakar should have looked
		name = explore_history.3023.b
		if = {
			limit = {
				has_trait = calm
			}		
			random = {
				chance = 33
				remove_trait = calm
				add_trait_force_tooltip = cynical
			}			
		}	
		add_prestige = 150
	}

	option = { # Maybe Bellakar should have looked to its own affairs
		name = explore_history.3023.c	
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
		if = {
			limit = {
				has_trait = diligent
			}		
			random = {
				chance = 33
				remove_trait = diligent
				add_trait_force_tooltip = fickle
			}			
		}			
	}
	
	after = {
		trigger_event = {
			id = explore_history.3024
			days = 5
		}
	}
}

# The Debt of Elendil
explore_history.3024 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3024.t
	desc = explore_history.3024.desc
	theme = explore_history_activity
	override_background = {
		reference = army_camp
	}
	center_portrait = {
		character = character:lineofelendil #Elendil
		animation = personality_forgiving
		triggered_outfit = {
			outfit_tags = { gondor_war_prince }
		}
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineoftumakveh0 # Zagarthor
		animation = personality_content
		animate_if_dead = yes
	}

	option = { #  Would Elendil have felt the same if Bellakar
		name = explore_history.3024.a
		random = {
			chance = 25
			add_martial_skill = 1
		}
		random = {
			chance = 25
			add_intrigue_skill = 1
		}
	}

	option = { # I wonder how much that ring was worth 
		name = explore_history.3024.b
		random = {
			chance = 33
			add_stewardship_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = generous
			}		
			random = {
				chance = 33
				remove_trait = generous
				add_trait_force_tooltip = greedy
			}			
		}	
	}

	option = { # Zagarthôr was a military genius
		name = explore_history.3024.c
		random = {
			chance = 33
			add_martial_lifestyle_perk_points = 1
		}
		random = {
			chance = 33
			add_trait = strategist
		}			
	}
	
	after = {
		trigger_event = {
			id = explore_history.3025
			days = 5
		}
	}
}

# Bellakar and the Ship Kings
explore_history.3025 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3025.t
	desc = explore_history.3025.desc
	theme = explore_history_activity
	override_background = {
		reference = throne_room_dunedain
	}
	center_portrait = {
		character = character:lineoftumakveh24 #Arzagar
		animation = personality_honorable
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofanarion19 #Ciryandil
		animation = personality_forgiving
		animate_if_dead = yes
	}

	option = { # Perhaps the old alliance should be reforged
		name = explore_history.3025.a
		random = {
			chance = 33
			add_diplomacy_lifestyle_perk_points = 1
		}
	}

	option = { # The heir of Bellakar should not have been patronised
		name = explore_history.3025.b
		add_prestige = 150
		if = {
			limit = {
				has_trait = patient
			}		
			random = {
				chance = 33
				remove_trait = patient
				add_trait_force_tooltip = vengeful
			}			
		}	
	}

	option = { # I really should dig out that Quenya dictionary
		name = explore_history.3025.c
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}		
	}
	
	after = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = explore_history_funding
						option = explore_history_extra_funding
					}
				}
				NOT = { has_character_flag = not_finished_reading }
			}
			add_character_flag = not_finished_reading
			trigger_event = {
				id = explore_history.0001
				days = 5
			}
		}
		else = {
			if = {
				limit = { has_character_flag = not_finished_reading }
				remove_character_flag = not_finished_reading
			}
			trigger_event = {
				id = explore_history.0050
				days = 5
			}
		}
	}	
}


## Of Eregion and the Rings of Power
#The founding of Lindon and Eregion
explore_history.3031 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3031.t
	desc = explore_history.3031.desc
	theme = explore_history_activity
	override_background = {
		reference = docks_elven
	}
	left_portrait = {
		character = character:linefinwe41 #Gil-Galad
		animation = personality_honorable
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:linefinwe27 #Elrond
		animation = personality_rational
	}
	center_portrait = {
		character = character:lineofcirdan #Cirdan
		animation = personality_content
	}

	option = { # 6000 years ago
		name = explore_history.3031.a
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}
	}

	option = { # Dearly love Middle-Earth
		name = explore_history.3031.b
		random = {
			chance = 33
			add_stewardship_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = callous
			}		
			random = {
				chance = 33

				remove_trait = callous
				add_trait_force_tooltip = compassionate
			}			
		}
	}

	option = { # Restless Celebrimbor
		name = explore_history.3031.c
		add_prestige = 150
		if = {
			limit = {
				has_trait = patient
			}		
			random = {
				chance = 33

				remove_trait = patient
				add_trait_force_tooltip = impatient
			}			
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.3032
			days = 5
		}
	}
}

#Eregion and Khazad-Dûm
explore_history.3032 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3032.t
	desc = explore_history.3032.desc
	theme = explore_history_activity
	override_background = {
		reference = eregion
	}
	override_effect_2d = {
		reference = legend_glow
	}
	
	center_portrait = {
		character = character:linefinwe18 #Celebrimbor
		animation = dismissal
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:linefinwe36 #Galadriel
		animation = disapproval
	}
	lower_left_portrait = {
		character = character:lineofdurinIII #Durin III
	}

	option = { # Legendary craftsmen
		name = explore_history.3032.a
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
		if = {
			limit = {
				has_trait = lazy
			}		
			random = {
				chance = 33

				remove_trait = lazy
				add_trait_force_tooltip = diligent
			}			
		}
	}

	option = { # Friendship between Dwarves and Elves
		name = explore_history.3032.b
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
		if = {
			limit = {
				has_trait = shy
			}		
			random = {
				chance = 33

				remove_trait = shy
				add_trait_force_tooltip = gregarious
			}			
		}
	}

	option = { # Finwë's heirs quarreling
		name = explore_history.3032.c
		add_diplomacy_lifestyle_xp = 500
	}
	
	after = {
		trigger_event = {
			id = explore_history.3033
			days = 5
		}
	}
}

#The deception of Annatar
explore_history.3033 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3033.t
	desc = explore_history.3033.desc
	theme = explore_history_activity
	override_background = {
		reference = armory
	}
	center_portrait = {
		character = character:linefinwe18 # Celebrimbor
		animation = admiration
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofsauron # Sauron
		animation = flirtation_left
	}

	option = { # Escape judgment
		name = explore_history.3033.a
		random = {
			chance = 50
			add_martial_skill = 1
		}
		
		if = {
			limit = {
				has_trait = arbitrary
			}		
			random = {
				chance = 33

				remove_trait = arbitrary
				add_trait_force_tooltip = just
			}			
		}
	}
	

	option = { # Santa Claus
		name = explore_history.3033.b
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}
	}

	option = { # Falling for the same trick
		name = explore_history.3033.c
		random = {
			chance = 20
			add_trait = shrewd
		}
		if = {
			limit = { has_trait = shrewd }
			random = {
				chance = 50
				add_learning_skill = 1
			}
		}
		if = {
			limit = {
				has_trait = trusting
			}		
			random = {
				chance = 33
				remove_trait = trusting
				add_trait_force_tooltip = paranoid
			}			
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.3034
			days = 5
		}
	}
}

#The forging of the Rings
explore_history.3034 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3034.t
	desc = explore_history.3034.desc
	theme = explore_history_activity
	override_background = {
		reference = grond
	}
	override_effect_2d = {
		reference = smoke
	}
	widgets = {
		widget = {
			gui = "lotr_shader_event_sparks"
			container = "lotr_shader_event_foreground"
		}
		widget = {
			gui = "lotr_shader_event_fire"
			container = "lotr_shader_event_background"
		}
	}
	
	center_portrait = {
		character = character:linefinwe18 # Celebrimbor
		animation = shock
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofsauron # Sauron
		scripted_animation = duel_wield_weapon
	}

	option = { # Fire and Blood
		name = explore_history.3034.a
		if = {
			limit = { has_trait = military_engineer }
			add_martial_lifestyle_xp = 300
		}
		else = {
			random = {
				chance = 75
				add_trait = military_engineer
			}
		}
	}
	

	option = { # Sauron's deceit
		name = explore_history.3034.b
		random = {
			chance = 33
			add_intrigue_lifestyle_perk_points = 1
		}
	}

	option = { # Power of the Rings
		name = explore_history.3034.c
		add_piety = -50
		add_prestige = 150
		if = {
			limit = {
				has_trait = content
			}		
			random = {
				chance = 33
				remove_trait = content
				add_trait_force_tooltip = ambitious
			}			
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.3035
			days = 5
		}
	}
}

#The Three, the Seven and the Nine
explore_history.3035 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3035.t
	desc = explore_history.3035.desc
	theme = explore_history_activity
	override_background = {
		reference = alley_night_western
	}
	override_effect_2d = {
		reference = fog
	}
	left_portrait = {
		character = character:nazgul1 # Witch King
		animation = personality_callous
	}
	right_portrait = {
		character = character:nazgul2 # Khamûl
		animation = personality_callous
	}
	center_portrait = {
		character = character:goldenking1 # Golden King
		animation = personality_callous
	}
	lower_center_portrait = {
		character = character:nazgul5 # Blind Sorcerer
	}
	lower_right_portrait = {
		character = character:nazgul4 # Yí Indûr
	}


	option = { # Fighting corruption
		name = explore_history.3035.a
		if = {
			limit = { has_trait = holy_warrior }
			add_martial_lifestyle_xp = 300
		}
		else = {
			random = {
				chance = 75
				add_trait = holy_warrior
			}
		}
		if = {
			limit = {
				has_trait = cynical
			}		
			random = {
				chance = 33
				remove_trait = cynical
				add_trait_force_tooltip = zealous
			}			
		}
	}
	

	option = { # Elven Rings
		name = explore_history.3035.b
		random = {
			chance = 50
			add_intrigue_skill = 1
		}
	}

	option = { # Useful Seven
		name = explore_history.3035.c
		add_piety = -150
		random = {
			chance = 66
			add_stewardship_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = generous
			}		
			random = {
				chance = 33
				remove_trait = generous
				add_trait_force_tooltip = greedy
			}			
		}
	}
	
	after = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = explore_history_funding
						option = explore_history_extra_funding
					}
				}
				NOT = { has_character_flag = not_finished_reading }
			}
			add_character_flag = not_finished_reading
			trigger_event = {
				id = explore_history.0001
				days = 5
			}
		}
		else = {
			if = {
				limit = { has_character_flag = not_finished_reading }
				remove_character_flag = not_finished_reading
			}
			trigger_event = {
				id = explore_history.0050
				days = 5
			}
		}
	}
}

## The Storm-King of Ciryatanórë by Voskey
# A Numenorean Colony
explore_history.3041 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3041.t
	desc = explore_history.3041.desc
	theme = explore_history_activity
	override_background = {
		reference = market_tribal
	}
	center_portrait = {
		character = character:lineofelros13 # Tar-Ciryatan
		animation = personality_honorable
		animate_if_dead = yes
	}

	option = { # Wait, more colonies?
		name = explore_history.3041.a
		random = {
				chance = 33
				add_learning_lifestyle_perk_points = 1
		}
	}

	option = { # Númenór swimming in money
		name = explore_history.3041.b
		random = {
			chance = 33
			add_stewardship_lifestyle_perk_points = 1
		}
	}

	option = { # Aggressive expansion
		name = explore_history.3041.c
		random = {
			chance = 33
			add_martial_lifestyle_perk_points = 1
		}			
	}
	
	after = {
		trigger_event = {
			id = explore_history.3042
			days = 5
		}
	}

}

# Herundil's Ambition
explore_history.3042 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3042.t
	desc = explore_history.3042.desc
	theme = explore_history_activity
	override_background = {
		reference = fp2_throne_room
	}
	
	center_portrait = {
		character = character:nazgul5 # Khôrahil
		animation = personality_callous
	}
	right_portrait = {
		character = character:goldenking1 # Golden King
		animation = personality_callous
	}

	option = { # Powerful colony
		name = explore_history.3042.a
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}	
	}

	option = { # The Dark Lord has no allies 
		name = explore_history.3042.b
		random = {
			chance = 50
			add_learning_skill = 1
		}
	}

	option = { # Storm-King, eh? 
		name = explore_history.3042.c	
		add_prestige = 150
		if = {
			limit = {
				has_trait = humble
			}		
			random = {
				chance = 33
				remove_trait = humble
				add_trait_force_tooltip = arrogant
			}			
		}	
		if = {
			limit = {
				has_trait = content
			}		
			random = {
				chance = 33
				remove_trait = content
				add_trait_force_tooltip = ambitious
			}			
		}		
	}
	
	after = {
		trigger_event = {
			id = explore_history.3043
			days = 5
		}
	}
}

# Treasonous Lords
explore_history.3043 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3043.t
	desc = explore_history.3043.desc
	theme = explore_history_activity
	override_background = {
		reference = alley_night_western
	}
	override_effect_2d = {
		reference = fog
	}
	
	center_portrait = {
		character = character:nazgul5 # Khôrahil
		animation = scheme
	}
	right_portrait = {
		character = character:goldenking1 # Golden King
		animation = schadenfreude
	}

	option = { # Adûnaphel's motives
		name = explore_history.3043.a
		random = {
			chance = 50
			add_intrigue_lifestyle_perk_points = 1
		}
	}

	option = { # Bellakar encircled?
		name = explore_history.3043.b
		random = {
			chance = 50
			add_diplomacy_lifestyle_perk_points = 1
		}
	}

	option = { # Can never be ready enough
		name = explore_history.3043.c	
		Random_list = { 
			37 = { 
				add_trait = organizer
			} 
			37 = { 
				add_trait = cautious_leader
			}
			26 = {}
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.3044
			days = 5
		}
	}
}

# The War of the Renegades
explore_history.3044 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3044.t
	desc = explore_history.3044.desc
	theme = explore_history_activity
	override_background = {
		reference = battlefield
	}
	
	center_portrait = {
		character = character:lineofelros15 # Tar-Ancalimon
		animation = war_over_win
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:nazgul5 # Khôrahil
		animation = disgust
	}

	option = { #  Adûnaphel's diversion
		name = explore_history.3044.a
		random = {
			chance = 33
			add_martial_lifestyle_perk_points = 1
		}
	}

	option = { # Man, that Lord of Korlea 
		name = explore_history.3044.b
		random = {
			chance = 33
			add_diplomacy_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = lazy
			}		
			random = {
				chance = 33
				remove_trait = lazy
				add_trait_force_tooltip = diligent
			}			
		}
	}

	option = { # Show me the body!
		name = explore_history.3044.c
		random = {
			chance = 33
			add_intrigue_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = trusting
			}		
			random = {
				chance = 33
				remove_trait = trusting
				add_trait_force_tooltip = paranoid
			}			
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.3045
			days = 5
		}
	}
}

# Fates of a King and his Kingdom
explore_history.3045 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3045.t
	desc = explore_history.3045.desc
	theme = explore_history_activity
	override_background = {
		reference = throne_room_sauron
	}
	
	center_portrait = {
		character = character:lineofsauron #Sauron
		animation = personality_callous
	}
	right_portrait = {
		character = character:nazgul5 # Khôrahil
		animation = stress
	}

	option = { # The Dark Lord's claim
		name = explore_history.3045.a
		if = {
			limit = { has_trait = lifestyle_mystic }
			random = {
				chance = 50
				add_trait_xp = {
					trait = lifestyle_mystic
					value = 10
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_mystic
			}
		}
	}

	option = { # Name changes
		name = explore_history.3045.b
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}
	}

	option = { # A Lord's just reward
		name = explore_history.3045.c
		random = {
			chance = 33
			add_stewardship_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = arbitrary
			}		
			random = {
				chance = 33
				remove_trait = arbitrary
				add_trait_force_tooltip = just
			}			
		}
	}
	
	after = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = explore_history_funding
						option = explore_history_extra_funding
					}
				}
				NOT = { has_character_flag = not_finished_reading }
			}
			add_character_flag = not_finished_reading
			trigger_event = {
				id = explore_history.0001
				days = 5
			}
		}
		else = {
			if = {
				limit = { has_character_flag = not_finished_reading }
				remove_character_flag = not_finished_reading
			}
			trigger_event = {
				id = explore_history.0050
				days = 5
			}
		}
	}
}

## The Akallabêth
# The Ban of the Valar
explore_history.3051 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3051.t
	desc = explore_history.3051.desc
	theme = explore_history_activity
	override_background = {
		reference = armenelos
	}
	
	center_portrait = {
		character = root
		animation = personality_rational
	}

	option = { # A fraction of that knowledge
		name = explore_history.3051.a
		random = {
				chance = 33
				add_learning_lifestyle_perk_points = 1
		}
	}

	option = { # Grateful Valar
		name = explore_history.3051.b
		add_piety = 150
		if = {
			limit = {
				has_trait = cynical
			}		
			random = {
				chance = 33
				remove_trait = cynical
				add_trait_force_tooltip = zealous
			}			
		}
	}

	option = { # They had it all
		name = explore_history.3051.c
		add_stress = -15
		if = {
			limit = {
				has_trait = ambitious
			}		
			random = {
				chance = 33
				remove_trait = ambitious
				add_trait_force_tooltip = content
			}			
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.3052
			days = 5
		}
	}
}

# The War of the Elves and Sauron
explore_history.3052 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3052.t
	desc = explore_history.3052.desc
	theme = explore_history_activity
	override_background = {
		reference = docks_elven
	}
	center_portrait = {
		character = character:lineofelros12 # Tar-Minastir
		animation = personality_honorable
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:linefinwe41 # Gil-Galad
		animation = beg
		animate_if_dead = yes
	}

	option = { # The call of the sea
		name = explore_history.3052.a
		if = {
			limit = { has_trait = lifestyle_mariner }
			random = {
				chance = 50
				add_trait_xp = {
					trait = lifestyle_mariner
					value = 5
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_mariner
			}
		}
		if = {
			limit = {
				has_trait = lazy
			}		
			random = {
				chance = 33
				remove_trait = lazy
				add_trait_force_tooltip = diligent
			}			
		}
	}

	option = { # Firm friends
		name = explore_history.3052.b
		random = {
			chance = 33
			add_diplomacy_lifestyle_perk_points = 1
		}
	}

	option = { # War fleet 
		name = explore_history.3052.c	
		random = {
				chance = 33
				add_martial_lifestyle_perk_points = 1
		}		
		if = {
			limit = {
				has_trait = content
			}		
			random = {
				chance = 33
				remove_trait = content
				add_trait_force_tooltip = ambitious
			}			
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.3053
			days = 5
		}
	}
}

# The Prideful Glory of Númenor
explore_history.3053 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3053.t
	desc = explore_history.3053.desc
	theme = explore_history_activity
	override_background = {
		reference = docks_adunai
	}
	override_effect_2d = {
		reference = legend_glow
	}
	center_portrait = {
		character = character:lineofelros14 # Tar-Atanamir
		animation = disapproval
		animate_if_dead = yes
	}

	option = { # Selfish Valar
		name = explore_history.3053.a
		add_piety = -150
		random = {
				chance = 66
				add_intrigue_lifestyle_perk_points = 1
		}	
		if = {
			limit = {
				has_trait = generous
			}		
			random = {
				chance = 33
				remove_trait = generous
				add_trait_force_tooltip = greedy
			}			
		}
	}

	option = { # Elven Pity
		name = explore_history.3053.b
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}	
		if = {
			limit = {
				has_trait = callous
			}		
			random = {
				chance = 33
				remove_trait = callous
				add_trait_force_tooltip = compassionate
			}			
		}
	}


	option = { # So much wealth
		name = explore_history.3053.c	
		random = {
			chance = 33
			add_stewardship_lifestyle_perk_points = 1
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.3054
			days = 5
		}
	}
}

# The Rise of the King's Men
explore_history.3054 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3054.t
	desc = explore_history.3054.desc
	theme = explore_history_activity
	override_background = {
		reference = docks_dunedain
	}
	center_portrait = {
		character = character:lineofelros15 # Tar-Ancalimon
		animation = personality_callous
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofelatan11 # Mírendil
		animation = personality_compassionate
		animate_if_dead = yes
	}

	option = { #  Friendship rekindled
		name = explore_history.3054.a
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
		if = {
			limit = {
				has_trait = shy
			}		
			random = {
				chance = 33
				remove_trait = shy
				add_trait_force_tooltip = gregarious
			}			
		}
	}

	option = { # Turning from bliss 
		name = explore_history.3054.b
		if = {
			limit = { has_trait = lifestyle_mystic }
			random = {
				chance = 50
				add_trait_xp = {
					trait = lifestyle_mystic
					value = 10
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_mystic
			}
		}
		if = {
			limit = {
				has_trait = cynical
			}		
			random = {
				chance = 33
				remove_trait = cynical
				add_trait_force_tooltip = zealous
			}			
		}
	}

	option = { # Way of the world
		name = explore_history.3054.c
		random = {
			chance = 33
			add_martial_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = compassionate
			}		
			random = {
				chance = 33
				remove_trait = compassionate
				add_trait_force_tooltip = callous
			}			
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.3055
			days = 5
		}
	}
}

# The Humbling of Sauron, Take Two
explore_history.3055 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3055.t
	desc = explore_history.3055.desc
	theme = explore_history_activity
	override_background = {
		reference = battlefield
	}
	right_portrait = {
		character = character:lineofsauron #Sauron
		animation = prisonhouse
	}
	center_portrait = {
		character = character:lineofelros28 # Pharazôn
		animation = war_over_win
		animate_if_dead = yes
	}

	option = { # Left Sauron no chance
		name = explore_history.3055.a
		random = {
			chance = 50
			add_martial_skill = 1
		}
		if = {
			limit = {
				has_trait = calm
			}		
			random = {
				chance = 33
				remove_trait = calm
				add_trait_force_tooltip = wrathful
			}			
		}
	}

	option = { # Incestuous usurper
		name = explore_history.3055.b
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
		if = {
			limit = {
				has_trait = arbitrary
			}		
			random = {
				chance = 33
				remove_trait = arbitrary
				add_trait_force_tooltip = just
			}			
		}
	}

	option = { # Won't end well
		name = explore_history.3055.c
		random = {
			chance = 20
			add_trait = shrewd
		}
		if = {
			limit = { has_trait = shrewd }
			random = {
				chance = 50
				add_learning_skill = 1
			}
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.3056
			days = 5
		}
	}
}

# The Downfall of Numenor
explore_history.3056 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3056.t
	desc = explore_history.3056.desc
	theme = explore_history_activity
	override_background = {
		reference = downfall
	}
	
	override_effect_2d = {
		reference = smoke
	}
	widgets = {
		widget = {
			gui = "lotr_shader_event_sparks"
			container = "lotr_shader_event_foreground"
		}
		widget = {
			gui = "lotr_shader_event_fire"
			container = "lotr_shader_event_background"
		}
	}
	
	center_portrait = {
		character = character:lineofsauron #Sauron
		animation = schadenfreude
	}
	left_portrait = {
		character = character:lineofelros28 # Pharazôn
		animation = shock
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofelendil #Elendil
		animate_if_dead = yes
	}

	option = { # Tragic loss
		name = explore_history.3056.a
		add_learning_lifestyle_xp = 300
	}

	option = { # Lord of lies
		name = explore_history.3056.b
		random = {
			chance = 33
			add_intrigue_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = honest
			}		
			random = {
				chance = 33
				remove_trait = honest
				add_trait_force_tooltip = deceitful
			}			
		}
	}

	option = { # Faithful loyalty
		name = explore_history.3056.c
		random = {
			chance = 33
			add_diplomacy_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = deceitful
			}		
			random = {
				chance = 33
				remove_trait = deceitful
				add_trait_force_tooltip = honest
			}			
		}
	}
	
	after = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = explore_history_funding
						option = explore_history_extra_funding
					}
				}
				NOT = { has_character_flag = not_finished_reading }
			}
			add_character_flag = not_finished_reading
			trigger_event = {
				id = explore_history.0001
				days = 5
			}
		}
		else = {
			if = {
				limit = { has_character_flag = not_finished_reading }
				remove_character_flag = not_finished_reading
			}
			trigger_event = {
				id = explore_history.0050
				days = 5
			}
		}
	}
}

## The Last Alliance
# The Downfall and the Nine Ships
explore_history.3061 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3061.t
	desc = explore_history.3061.desc
	theme = explore_history_activity
	override_background = {
		reference = docdocks_elvenks_elf
	}
	center_portrait = {
		character = character:lineofelendil #Elendil
		animation = personality_honorable
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:linefinwe41 #Gil-Galad
		animation = personality_forgiving
		triggered_outfit = {
			outfit_tags = { elven_war }
		}
		animate_if_dead = yes
	}
	lower_left_portrait = {
		character = character:lineofanarion1 #Anarion
		animate_if_dead = yes
	}
	lower_center_portrait = {
		character = character:lineisildur0  #Isildur
		animate_if_dead = yes
	}

	option = { # Lhûn and Pelargir
		name = explore_history.3061.a
		if = {
			limit = { has_trait = lifestyle_mariner }
			random = {
				chance = 50
				add_trait_xp = {
					trait = lifestyle_mariner
					value = 5
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_mariner
			}
		}
	}

	option = { # They never stopped
		name = explore_history.3061.b
		random = {
				chance = 50
				add_stewardship_skill = 1
		}
		if = {
			limit = {
				has_trait = lazy
			}		
			random = {
				chance = 33
				remove_trait = lazy
				add_trait_force_tooltip = diligent
			}			
		}
	}

	option = { # Welcome reprieve
		name = explore_history.3061.c
		add_stress = -15
	}
	
	after = {
		trigger_event = {
			id = explore_history.3062
			days = 5
		}
	}
}

# The Return of the Dark Lord
explore_history.3062 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3062.t
	desc = explore_history.3062.desc
	theme = explore_history_activity
	override_background = {
		reference = throne_room_sauron
	}
	center_portrait = {
		character = character:lineofsauron #Sauron
		animation = schadenfreude
	}

	option = { # They always come back
		name = explore_history.3062.a
		random = {
				chance = 33
				add_intrigue_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = trusting
			}		
			random = {
				chance = 33
				remove_trait = trusting
				add_trait_force_tooltip = paranoid
			}			
		}
	}

	option = { # Let him grow strong
		name = explore_history.3062.b
		if = {
			limit = { has_trait = aggressive_attacker }
			add_martial_lifestyle_xp = 300
		}
		else = {
			random = {
				chance = 75
				add_trait = aggressive_attacker
			}
		}
		if = {
			limit = {
				has_trait = forgiving
			}		
			random = {
				chance = 33
				remove_trait = forgiving
				add_trait_force_tooltip = vengeful
			}			
		}			
	}

	option = { # Vengeful haradrim
		name = explore_history.3062.c
		random = {
				chance = 33
				add_diplomacy_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = callous
			}		
			random = {
				chance = 33
				remove_trait = callous
				add_trait_force_tooltip = compassionate
			}			
		}
		else_if = {
			limit = {
				has_trait = sadistic
			}		
			random = {
				chance = 33
				remove_trait = sadistic
				add_trait_force_tooltip = compassionate
			}			
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.3063
			days = 5
		}
	}
}

# The Siege of Gondor
explore_history.3063 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3063.t
	desc = explore_history.3063.desc
	theme = explore_history_activity
	override_background = {
		reference = battlefield_dunedain
	}
	override_effect_2d = {
		reference = smoke
	}
	override_effect_2d = {
		reference = smoke
	}
	widgets = {
		widget = {
			gui = "lotr_shader_event_sparks"
			container = "lotr_shader_event_foreground"
		}
		widget = {
			gui = "lotr_shader_event_fire"
			container = "lotr_shader_event_background"
		}
	}
	
	left_portrait = {
		character = character:lineofanarion1 #Anarion
		animation = war_defender
		triggered_outfit = {
			outfit_tags = { gondor_war_prince }
		}
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineisildur0 #Isildur
		animation = shock
		triggered_outfit = {
			outfit_tags = { gondor_war_prince }
		}
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofsauron #Sauron
		animation = scheming
	}

	option = { # Hold his ground
		name = explore_history.3063.a
		if = {
			limit = {
				has_trait = unyielding_defender
			}
			add_martial_lifestyle_xp = 300
		}
		else = {
			random = {
				chance = 75
				add_trait = unyielding_defender
			}
		}
		if = {
			limit = {
				has_trait = fickle
			}		
			random = {
				chance = 33
				remove_trait = fickle
				add_trait_force_tooltip = stubborn
			}			
		}
	}

	option = { # Isildur's choice
		name = explore_history.3063.b
		random = {
				chance = 50
				add_stewardship_skill = 1
		}			
	}

	option = { # Useless Seeing Stones ?
		name = explore_history.3063.c
		random = {
				chance = 20
				add_trait = shrewd
		}
		if = {
			limit = { has_trait = shrewd }
			random = {
				chance = 50
				add_learning_skill = 1
			}
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.3064
			days = 5
		}
	}
}

# A Last Alliance of Elves and Men
explore_history.3064 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3064.t
	desc = explore_history.3064.desc
	theme = explore_history_activity
	override_background = {
		reference = imladris
	}
	
	left_portrait = {
		character = character:lineofelendil #Elendil
		animation = war_defender
		triggered_outfit = {
			outfit_tags = { gondor_war_prince }
		}
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:linefinwe41 #Gil-Galad
		animation = personality_rational
		triggered_outfit = {
			outfit_tags = { elven_war }
		}
		animate_if_dead = yes
	}
	lower_left_portrait = {
		character = character:lineoforopher1 #Oropher
		animate_if_dead = yes
	}
	lower_right_portrait = {
		character = character:lineofamdir1 #Amdir
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:linefinwe27 #Elrond
		animation = personality_forgiving
		triggered_outfit = {
			outfit_tags = { elven_war }
		}
	}

	option = { # Such a force
		name = explore_history.3064.a
		if = {
			limit = {
				has_trait = logistician
			}
			add_stewardship_lifestyle_xp = 300
		}
		else = {
			random = {
				chance = 75
				add_trait = logistician
			}
		}
		if = {
			limit = {
				has_trait = patient
			}		
			random = {
				chance = 33
				remove_trait = patient
				add_trait_force_tooltip = impatient
			}			
		}
	}

	option = { #They must have lost
		name = explore_history.3064.b
		add_learning_lifestyle_perk_points = 1
		random = {
				chance = 10
				add_trait = depressed_1 
		}		
	}

	option = { # Forging alliances
		name = explore_history.3064.c
		add_diplomacy_lifestyle_xp = 300
		if = {
			limit = {
				has_trait = shy
			}		
			random = {
				chance = 33
				remove_trait = shy
				add_trait_force_tooltip = gregarious
			}			
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.3065
			days = 5
		}
	}
}

# Dagorlad and the Siege of Barad-Dûr
explore_history.3065 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.3065.t
	desc = explore_history.3065.desc
	theme = explore_history_activity
	override_background = {
		reference = wilderness_volcanic
	}
	override_effect_2d = {
		reference = smoke
	}
	widgets = {
		widget = {
			gui = "lotr_shader_event_sparks"
			container = "lotr_shader_event_foreground"
		}
		widget = {
			gui = "lotr_shader_event_fire"
			container = "lotr_shader_event_background"
		}
	}
	
	left_portrait = {
		character = character:lineisildur0 #Isildur
		animation = dismissal
		triggered_outfit = {
			outfit_tags = { gondor_war_prince }
		}
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:linefinwe27 #Elrond
		animation = beg
		triggered_outfit = {
			outfit_tags = { elven_war }
		}
		animate_if_dead = yes
	}
	lower_left_portrait = {
		character = character:lineofelendil #Elendil
	}
	lower_center_portrait = {
		character = character:lineofsauron #Sauron
	}
	lower_right_portrait = {
		character = character:linefinwe41 #Gil-Galad
	}

	option = { # Such a force
		name = explore_history.3065.a
		random = {
				chance = 25
				add_trait = poet
		}
		if = {
			limit = {
				has_trait = poet
			}
			random = {
				chance = 33
				add_diplomacy_lifestyle_perk_points = 1
			}
		}
	}

	option = { #Isildur was weak
		name = explore_history.3065.b
		random = {
				chance = 50
				add_learning_skill = 1
		}
		if = {
			limit = {
				has_trait = humble
			}		
			random = {
				chance = 33
				remove_trait = humble
				add_trait_force_tooltip = arrogant
			}			
		}
	}

	option = { # Skill in battle
		name = explore_history.3065.c
		if = {
			limit = { has_trait = lifestyle_blademaster }
			random = {
				chance = 50
				add_trait_xp = {
					trait = lifestyle_blademaster
					value = 10
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_blademaster
			}
		}
	}
	
	after = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = explore_history_funding
						option = explore_history_extra_funding
					}
				}
				NOT = { has_character_flag = not_finished_reading }
			}
			add_character_flag = not_finished_reading
			trigger_event = {
				id = explore_history.0001
				days = 5
			}
		}
		else = {
			if = {
				limit = { has_character_flag = not_finished_reading }
				remove_character_flag = not_finished_reading
			}
			trigger_event = {
				id = explore_history.0050
				days = 5
			}
		}
	}
}

################################
# THE THIRD AGE
# 4001-4999
# by Jamie-San
################################

# Marhwini's People
explore_history.4001 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.4001.t
	desc = explore_history.4001.desc
	theme = explore_history_activity
	override_background = {
		reference = on_river
	}
	center_portrait = {
		character = character:linefram2 #Mahrwini
		animation = war_attacker
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofanarion40 #Calimehtar
		animation = war_over_win
		animate_if_dead = yes
	}

	option = { # No victory without cooperation
		name = explore_history.4001.a
		add_piety = 150
		if = {
			limit = {
				has_trait = arrogant
			}		
			random = {
				chance = 33

				remove_trait = arrogant
				add_trait_force_tooltip = humble
			}			
		}
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
	}

	option = { # Should've hunted them down
		name = explore_history.4001.b
		add_piety = -100
		if = {
			limit = {
				has_trait = forgiving
			}		
			random = {
				chance = 33
				remove_trait = forgiving
				add_trait_force_tooltip = vengeful
			}			
		}
		if = {
			limit = { has_trait = aggressive_attacker }
			add_martial_lifestyle_xp = 300
		}
		else = {
			random = {
				chance = 75
				add_trait = aggressive_attacker
			}
		}
	}

	option = { # Nice cavalry charge bro...
		name = explore_history.4001.c
		random = {
			chance = 25
			add_martial_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			add_martial_skill = 1
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.4002
			days = 5
		}
	}
}

# The Éothéod
explore_history.4002 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.4002.t
	desc = explore_history.4002.desc
	theme = explore_history_activity
	override_background = {
		reference = city_north
	}
	override_effect_2d = {
		reference = snow
	}
	
	center_portrait = {
		character = character:linefram6 #Fram
		animation = war_over_win
		animate_if_dead = yes
	}

	option = { # Angmar is fascinating!
		name = explore_history.4002.a
		if = {
			limit = {
				has_trait = cynical
			}		
			random = {
				chance = 33
				remove_trait = cynical
				add_trait_force_tooltip = zealous
			}			
		}
		random = {
			chance = 50
			add_learning_skill = 1
		}	
	}

	option = { # Such bravery!
		name = explore_history.4002.b
		add_piety = 150
		if = {
			limit = {
				has_trait = craven
			}		
			random = {
				chance = 33
				remove_trait = craven
				add_trait_force_tooltip = brave
			}			
		}	
		random = {
			chance = 50
			add_martial_skill = 1
		}
	}

	option = { # Yeh right...
		name = explore_history.4002.c
		add_piety = -50
		if = {
			limit = {
				has_trait = zealous
			}		
			random = {
				chance = 33
				remove_trait = zealous
				add_trait_force_tooltip = cynical
			}			
		}	
		random = {
			chance = 25
			add_intrigue_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			add_intrigue_skill = 1
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.4003
			days = 5
		}
	}
}

# Stranded
explore_history.4003 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.4003.t
	desc = explore_history.4003.desc
	theme = explore_history_activity
	override_background = {
		reference = wilderness_steppe
	}
	right_portrait = {
		character = character:linesteward23
		animation = shock
		triggered_outfit = {
			outfit_tags = { gondor_war_prince }
		}
		animate_if_dead = yes
	}

	option = { # Trust in the Éothéod
		name = explore_history.4003.a
		if = {
			limit = {
				has_trait = paranoid
			}		
			random = {
				chance = 33

				remove_trait = paranoid
				add_trait_force_tooltip = trusting
			}			
		}
		random = {
			chance = 33
			add_diplomacy_lifestyle_perk_points = 1
		}
	}

	option = { # The fools...
		name = explore_history.4003.b
		if = {
			limit = {
				has_trait = impatient
			}		
			random = {
				chance = 33
				remove_trait = impatient
				add_trait_force_tooltip = patient
			}			
		}
		if = {
			limit = { has_trait = unyielding_defender }
			add_martial_lifestyle_xp = 300
		}
		else = {
			random = {
				chance = 75
				add_trait = unyielding_defender
			}
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.4004
			days = 5
		}
	}
}

# The Ride of Eorl
explore_history.4004 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.4004.t
	desc = explore_history.4004.desc
	theme = explore_history_activity
	override_background = {
		reference = wilderness_steppe
	}
	override_effect_2d = {
		reference = legend_glow
	}
	
	center_portrait = {
		character = character:6000000 #Eorl
		animation = war_attacker
		animate_if_dead = yes
	}

	option = { # Gondor called for aid, and Eorl answered
		name = explore_history.4004.a
		add_piety = 150
		if = {
			limit = {
				has_trait = deceitful
			}		
			random = {
				chance = 33
				remove_trait = deceitful
				add_trait_force_tooltip = honest
			}			
		}
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
	}

	option = { # The fools...
		name = explore_history.4004.b
		add_piety = -50
		add_prestige = 150
		if = {
			limit = {
				has_trait = content
			}		
			random = {
				chance = 33
				remove_trait = content
				add_trait_force_tooltip = ambitious
			}			
		}	
		random = {
			chance = 50
			add_martial_skill = 1
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.4005
			days = 5
		}
	}
}

# The Oath
explore_history.4005 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.4005.t
	desc = explore_history.4005.desc
	theme = explore_history_activity
	override_background = {
		reference = minas_tirith
	}
	
	right_portrait = {
		character = character:6000000
		animation = personality_compassionate
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:linesteward23
		animation = flirtation
		animate_if_dead = yes
	}

	option = { # An alliance in name only
		name = explore_history.4005.a
		if = {
			limit = {
				has_trait = stubborn
			}		
			random = {
				chance = 33

				remove_trait = stubborn
				add_trait_force_tooltip = fickle
			}			
		}
		random = {
			chance = 25
			add_intrigue_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			add_intrigue_skill = 1
		}
	}

	option = { # A strong alliance
		name = explore_history.4005.b
		if = {
			limit = {
				has_trait = callous
			}		
			random = {
				chance = 33
				remove_trait = callous
				add_trait_force_tooltip = compassionate
			}			
		}	
		random = {
			chance = 25
			add_diplomacy_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			add_diplomacy_skill = 1
		}
	}

	option = { # A whole kingdom?!
		name = explore_history.4005.c
		if = {
			limit = {
				has_trait = generous
			}		
			random = {
				chance = 33
				remove_trait = generous
				add_trait_force_tooltip = greedy
			}			
		}	
		random = {
			chance = 25
			add_stewardship_lifestyle_perk_points = 1
		}
		random = {
			chance = 25
			add_stewardship_skill = 1
		}
	}
	
	after = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = explore_history_funding
						option = explore_history_extra_funding
					}
				}
				NOT = { has_character_flag = not_finished_reading }
			}
			add_character_flag = not_finished_reading
			trigger_event = {
				id = explore_history.0001
				days = 5
			}
		}
		else = {
			if = {
				limit = { has_character_flag = not_finished_reading }
				remove_character_flag = not_finished_reading
			}
			trigger_event = {
				id = explore_history.0050
				days = 5
			}
		}
	}
}

## Of Narkuzîr and Berúthiel by Voskey
# A Tumakveh Prince in Gondor
explore_history.4011 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.4011.t
	desc = explore_history.4011.desc
	theme = explore_history_activity
	override_background = {
		reference = throne_room_dunedain
	}
	
	center_portrait = {
		character = character:lineoftumakveh15 # Narkuzîr
		animation = admiration
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofanarion15 # Tarannon
		animation = flirtation_left
		animate_if_dead = yes
	}

	option = { # Fostering a friendship
		name = explore_history.4011.a
		random = {
				chance = 50
				add_diplomacy_skill = 1
			}
		if = {
			limit = {
				has_trait = shy
			}		
			random = {
				chance = 33
				remove_trait = shy
				add_trait_force_tooltip = gregarious
			}			
		}	
	}

	option = { # Narkuzîr was lucky
		name = explore_history.4011.b
		random = {
				chance = 50
				add_intrigue_skill = 1
			}
		if = {
			limit = {
				has_trait = gregarious
			}		
			random = {
				chance = 33
				remove_trait = gregarious
				add_trait_force_tooltip = cynical
			}			
		}	
	}

	option = { # Such arrogance from the line of Elendil
		name = explore_history.4011.c
		if = {
			limit = {
				has_trait = arrogant
			}		
			random = {
				chance = 33
				remove_trait = arrogant
				add_trait_force_tooltip = humble
			}			
		}	
		random = {
				chance = 33
				add_learning_lifestyle_perk_points = 1
			}			
	}
	
	after = {
		trigger_event = {
			id = explore_history.4012
			days = 5
		}
	}

}

# A New King’s Plans
explore_history.4012 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.4012.t
	desc = explore_history.4012.desc
	theme = explore_history_activity
	override_background = {
		reference = fp2_temple
	}
	
	center_portrait = {
		character = character:lineoftumakveh15 # Narkuzîr
		animation = personality_zealous
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofanarion15 # Tarannon
		animation = personality_rational
		animate_if_dead = yes
	}
	
	option = { # Letting minor religious disagreements...
		name = explore_history.4012.a
		random = {
				chance = 50
				add_stewardship_skill = 1
			}	
		
		if = {
			limit = {
				has_trait = zealous
			}		
			random = {
				chance = 33
				remove_trait = zealous
				add_trait_force_tooltip = calm
			}			
		}	
	}

	option = { # Such an ambitious scheme! 
		name = explore_history.4012.b
		random = {
				chance = 50
				add_intrigue_skill = 1
			}
		if = {
			limit = {
				has_trait = temperate
			}		
			random = {
				chance = 33
				remove_trait = temperate
				add_trait_force_tooltip = ambitious
			}			
		}	
	}

	option = { # Narkuzîr’s Reforms 
		name = explore_history.4012.c	
		random = {
				chance = 50
				add_learning_skill = 1
			}	
		
		if = {
			limit = {
				has_trait = arrogant
			}		
			random = {
				chance = 33
				remove_trait = arrogant
				add_trait_force_tooltip = humble
			}			
		}			
	}
	
	after = {
		trigger_event = {
			id = explore_history.4013
			days = 5
		}
	}
}

# Narkuzîr’s Reforms
explore_history.4013 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.4013.t
	desc = explore_history.4013.desc
	theme = explore_history_activity
	override_background = {
		reference = fp2_throne_room
	}
	
	center_portrait = {
		character = character:lineoftumakveh15 # Narkuzîr
		animation = personality_cynical
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineoftumakveh17 # Zâirinzil
		animation = disapproval
		animate_if_dead = yes
	}
	
	option = { # Good advisors like Artârik are a blessing
		name = explore_history.4013.a
		if = {
			limit = {
				has_trait = paranoid
			}		
			random = {
				chance = 33

				remove_trait = paranoid
				add_trait_force_tooltip = trusting
			}			
		}
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
	}

	option = { # So Zâirinzil was able to fool the King
		name = explore_history.4013.b
		if = {
			limit = {
				has_trait = trusting
			}		
			random = {
				chance = 33
				remove_trait = trusting
				add_trait_force_tooltip = paranoid
			}			
		}	
		random = {
			chance = 50
			add_intrigue_skill = 1
		}
	}

	option = { # Successes in foreign policy
		name = explore_history.4013.c	
		random = {
			chance = 50
			add_diplomacy_skill = 1
		}
		if = {
			limit = {
				has_trait = just
			}		
			random = {
				chance = 33
				remove_trait = just
				add_trait_force_tooltip = cynical
			}			
		}			
	}
	
	after = {
		trigger_event = {
			id = explore_history.4014
			days = 5
		}
	}
}

# A short-lived Alliance
explore_history.4014 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.4014.t
	desc = explore_history.4014.desc
	theme = explore_history_activity
	override_background = {
		reference = docks_dunedain
	}
	
	center_portrait = {
		character = character:lineofanarion15 # Tarannon
		animation = personality_callous
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineoftumakveh18 # Berúthiel
		animation = worry
		animate_if_dead = yes
	}
	
	option = { #  For the good of the realm
		name = explore_history.4014.a
		random = {
			chance = 33
			add_stewardship_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = compassionate
			}		
			random = {
				chance = 33
				remove_trait = compassionate
				add_trait_force_tooltip = cynical
			}			
		}			
	}

	option = { # Could the rumours about Berúthiel be true?
		name = explore_history.4014.b
		random = {
			chance = 33
			add_intrigue_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = trusting
			}		
			random = {
				chance = 33
				remove_trait = trusting
				add_trait_force_tooltip = paranoid
			}			
		}	
	}

	option = { # Alliances are fickle things
		name = explore_history.4014.c
		random = {
			chance = 33
			add_martial_lifestyle_perk_points = 1
		}
		random = {
			chance = 33
			add_trait = strategist
		}			
	}
	
	after = {
		trigger_event = {
			id = explore_history.4015
			days = 5
		}
	}
}

# The End of a Golden Age
explore_history.4015 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.4015.t
	desc = explore_history.4015.desc
	theme = explore_history_activity
	override_background = {
		reference = army_camp
	}
	
	center_portrait = {
		character = character:lineoftumakveh15 # Narkuzîr
		animation = shame
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineoftumakveh16 # Artârik
		animation = war_over_win
		animate_if_dead = yes
	}
	
	option = { # Nothing like a great victory to gain popularity !
		name = explore_history.4015.a
		random = {
				chance = 50
				add_prowess_skill = 1
				}
		if = {
			limit = {
				has_trait = compassionate
			}		
			random = {
				chance = 33
				remove_trait = compassionate
				add_trait_force_tooltip = arrogant
			}			
		}
	}

	option = { # Perhaps Artârik should have just seized the throne earlier.
		name = explore_history.4015.b
		if = {
			limit = { has_trait = aggressive_attacker }
			add_martial_lifestyle_xp = 300
		}
		else = {
			random = {
				chance = 75
				add_trait = aggressive_attacker
			}
		}
		if = {
			limit = {
				has_trait = patient
			}		
			random = {
				chance = 33
				remove_trait = patient
				add_trait_force_tooltip = impatient
			}			
		}	
	}

	option = { # And so, yet another Realm-in-Exile started to decline
		name = explore_history.4015.c
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}		
	}
	
	after = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = explore_history_funding
						option = explore_history_extra_funding
					}
				}
				NOT = { has_character_flag = not_finished_reading }
			}
			add_character_flag = not_finished_reading
			trigger_event = {
				id = explore_history.0001
				days = 5
			}
		}
		else = {
			if = {
				limit = { has_character_flag = not_finished_reading }
				remove_character_flag = not_finished_reading
			}
			trigger_event = {
				id = explore_history.0050
				days = 5
			}
		}
	}
}

## The Tedjin Conquest and Occupation of Bellakar by Voskey
# Zagarkhâd's Plan
explore_history.4021 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.4021.t
	desc = explore_history.4021.desc
	theme = explore_history_activity
	override_background = {
		reference = docks_adunai
	}
	
	center_portrait = {
		character = character:lineofanarion15 # Tarannon
		animation = war_over_win
		animate_if_dead = yes
	}

	option = { # Other vulnerabilities
		name = explore_history.4021.a
		if = {
			limit = { has_trait = flexible_leader }
			add_martial_lifestyle_xp = 300
		}
		else = {
			random = {
				chance = 75
				add_trait = flexible_leader
			}
		}
	}

	option = { # Tumakveh were blind
		name = explore_history.4021.b
		random = {
			chance = 33
			add_intrigue_lifestyle_perk_points = 1
		}
	}

	option = { # Hardy folk
		name = explore_history.4021.c
		if = {
			limit = { has_trait = desert_warrior }
			add_martial_lifestyle_xp = 300
		}
		else = {
			random = {
				chance = 75
				add_trait = desert_warrior
			}
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.4022
			days = 5
		}
	}
}

# The Tedjin Invasion
explore_history.4022 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.4022.t
	desc = explore_history.4022.desc
	theme = explore_history_activity
	override_background = {
		reference = burning_building
	}
	override_effect_2d = {
		reference = smoke
	}
	override_effect_2d = {
		reference = smoke
	}
	widgets = {
		widget = {
			gui = "lotr_shader_event_sparks"
			container = "lotr_shader_event_foreground"
		}
		widget = {
			gui = "lotr_shader_event_fire"
			container = "lotr_shader_event_background"
		}
	}
	
	center_portrait = {
		character = character:lineofjoamtuv1 # Joam-Tuv
		animation = war_attacker
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineoftumakveh20 # Êruzagar
		animation = fear
		animate_if_dead = yes
	}
	
	option = { # Leadership disputes
		name = explore_history.4022.a
		random = {
			chance = 33
			add_diplomacy_lifestyle_perk_points = 1
		}	
	}

	option = { # Complacent Bellakar
		name = explore_history.4022.b
		random = {
				chance = 50
				add_martial_skill = 1
			}
		if = {
			limit = {
				has_trait = lazy
			}		
			random = {
				chance = 50
				remove_trait = lazy
				add_trait_force_tooltip = diligent
			}			
		}	
	}

	option = { # Nîlûlondê treachery
		name = explore_history.4022.c	
		random = {
			chance = 50
			add_intrigue_skill = 1
		}				
	}
	
	after = {
		trigger_event = {
			id = explore_history.4023
			days = 5
		}
	}
}

# Bellakar under Foreign Occupation
explore_history.4023 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.4023.t
	desc = explore_history.4023.desc
	theme = explore_history_activity
	override_background = {
		reference = rhun
	}
	
	center_portrait = {
		character = character:izindubeth1 # Imrathôr
		animation = personality_zealous
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofjoamtuv1 # Joam-Tuv
		animation = dismissal
		animate_if_dead = yes
	}
	
	option = { # Religious zealotry
		name = explore_history.4023.a
		if = {
			limit = { has_trait = lifestyle_mystic }
			random = {
				chance = 50
				add_trait_xp = {
					trait = lifestyle_mystic
					value = 10
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_mystic
			}
		}
		if = {
			limit = {
				has_trait = cynical
			}		
			random = {
				chance = 33
				remove_trait = cynical
				add_trait_force_tooltip = zealous
			}			
		}
	}

	option = { # Building fortresses
		name = explore_history.4023.b
		random = {
			chance = 25
			add_martial_skill = 1
		}
		random = {
			chance = 25
			add_stewardship_skill = 1
		}
	}
	
	option = { # Challenge of settling down
		name = explore_history.4023.c	
		random = {
			chance = 33
			add_stewardship_lifestyle_perk_points = 1
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.4024
			days = 5
		}
	}
}

# Adûnuzîr's Reconquest
explore_history.4024 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.4024.t
	desc = explore_history.4024.desc
	theme = explore_history_activity
	override_background = {
		reference = fp2_throne_room
	}
	
	center_portrait = {
		character = character:lineoftumakveh22 # Arphazân
		animation = war_over_win
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofjoamtuv1 # Joam_Tuv
		animation = severelywounded
		animate_if_dead = yes
	}
	
	option = { #  Why not just kill him?
		name = explore_history.4024.a
		random = {
			chance = 33
			add_intrigue_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = honest
			}		
			random = {
				chance = 33
				remove_trait = honest
				add_trait_force_tooltip = deceitful
			}			
		}
	}

	option = { # Bozishnara support
		name = explore_history.4024.b
		random = {
			chance = 33
			add_diplomacy_lifestyle_perk_points = 1
		}
	}

	option = { # Soriya naval expertise
		name = explore_history.4024.c
		random = {
			chance = 33
			add_martial_lifestyle_perk_points = 1
		}			
	}
	
	after = {
		trigger_event = {
			id = explore_history.4025
			days = 5
		}
	}
}

# The End of Tedjin Rule
explore_history.4025 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.4025.t
	desc = explore_history.4025.desc
	theme = explore_history_activity
	override_background = {
		reference = battlefield
	}
	override_effect_2d = {
		reference = smoke
	}
	
	center_portrait = {
		character = character:lineoftumakveh21 # Adûnuzîr
		animation = war_over_win
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofjoamtuv3 # Ogtaï
		animation = severelywounded
		animate_if_dead = yes
	}
	lower_center_portrait ={
		character = character:lineofjoamtuv2 # Joam-Kator
	}
	option = { # Infighting at home
		name = explore_history.4025.a
		random = {
			chance = 33
			add_stewardship_lifestyle_perk_points = 1
		}
	}

	option = { # Persistent Tumakveh
		name = explore_history.4025.b
		random = {
			chance = 33
			add_learning_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_trait = fickle
			}		
			random = {
				chance =33
				remove_trait = fickle
				add_trait_force_tooltip = stubborn
			}			
		}
	}

	option = { # Always duelling enemy leaders
		name = explore_history.4025.c
		if = {
			limit = { has_trait = lifestyle_blademaster }
			random = {
				chance = 50
				add_trait_xp = {
					trait = lifestyle_blademaster
					value = 10
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_blademaster
			}
		}
		if = {
			limit = {
				has_trait = craven
			}		
			random = {
				chance = 33
				remove_trait = craven
				add_trait_force_tooltip = brave
			}			
		}
	}
	
	after = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = explore_history_funding
						option = explore_history_extra_funding
					}
				}
				NOT = { has_character_flag = not_finished_reading }
			}
			add_character_flag = not_finished_reading
			trigger_event = {
				id = explore_history.0001
				days = 5
			}
		}
		else = {
			if = {
				limit = { has_character_flag = not_finished_reading }
				remove_character_flag = not_finished_reading
			}
			trigger_event = {
				id = explore_history.0050
				days = 5
			}
		}
	}
}

## The Kinstrife by Brice Underhill
# Romendacil and Vidugavia
explore_history.4031 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.4031.t
	desc = explore_history.4031.desc
	theme = explore_history_activity
	override_background = {
		reference = ep2_wedding_ceremony_western
	}
	
	center_portrait = {
		character = character:lineofanarion26 # Valacar
		animation = wedding_groom_right
		triggered_outfit = {
			outfit_tags = { gondor_prince }
		}
		animate_if_dead = yes
	}
	left_portrait = {
		character = character:linerhovanion3 # Vidumavi
		animation = wedding_bride_left
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofanarion24 #Romendacil II
		animation = stress
		animate_if_dead = yes
	}
	lower_right_portrait = {
		character = character:linerhovanion1 #Vidugavia
	}
	
	option = { # Reliable allies
		name = explore_history.4031.a
		add_diplomacy_lifestyle_xp = 300
		if = {
			limit = {
				has_trait = paranoid
			}		
			random = {
				chance = 33
				remove_trait = paranoid
				add_trait_force_tooltip = trusting
			}			
		}
	}

	option = { # Mission went a little too far
		name = explore_history.4031.b
		add_character_modifier = {
			modifier = lessons_in_seduction
			years = 5
		}
	}

	option = { # A prince should know better
		name = explore_history.4031.c
		add_prestige = 150
	}

	after = {
		trigger_event = {
			id = explore_history.4032
			days = 5
		}
	}
}

# Growing Unrest on the Coast
explore_history.4032 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.4032.t
	desc = explore_history.4032.desc
	theme = explore_history_activity
	override_background = {
		reference = docks_dunedain
	}
	
	left_portrait = {
		character = character:lineofanarion26 # Valacar
		animation = worry
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofanarion53 # Castamir
		animation = dismissal
		triggered_outfit = {
			outfit_tags = { gondor_prince }
		}
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofanarion27 # Eldacar
		animation = personality_compassionate
		triggered_outfit = {
			outfit_tags = { gondor_prince }
		}
		animate_if_dead = yes
	}
	
	option = { # Wise ruler
		name = explore_history.4032.a
		random = {
				chance = 33
				add_diplomacy_lifestyle_perk_points = 1
			}	
		if = {
			limit = {
				has_trait = wrathful
			}		
			random = {
				chance = 33
				remove_trait = wrathful
				add_trait_force_tooltip = calm
			}			
		}
	}

	option = { # Sneaky cadets
		name = explore_history.4032.b
		add_intrigue_lifestyle_xp = 300
		if = {
			limit = {
				has_trait = trusting
			}		
			random = {
				chance = 33
				remove_trait = trusting
				add_trait_force_tooltip = paranoid
			}			
		}	
	}

	option = { # Mysterious blessing
		name = explore_history.4032.c	
		if = {
			limit = { has_trait = lifestyle_mystic }
			random = {
				chance = 50
				add_trait_xp = {
					trait = lifestyle_mystic
					value = 10
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_mystic
			}
		}			
	}
	
	after = {
		trigger_event = {
			id = explore_history.4033
			days = 5
		}
	}
}

# Osgiliath in Flames
explore_history.4033 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.4033.t
	desc = explore_history.4033.desc
	theme = explore_history_activity
	override_background = {
		reference = battlefield_dunedain
	}
	override_effect_2d = {
		reference = smoke
	}
	widgets = {
		widget = {
			gui = "lotr_shader_event_sparks"
			container = "lotr_shader_event_foreground"
		}
		widget = {
			gui = "lotr_shader_event_fire"
			container = "lotr_shader_event_background"
		}
	}
	
	
	left_portrait = {
		character = character:lineofanarion27 # Eldacar
		animation = shock
		triggered_outfit = {
			outfit_tags = { gondor_war_prince }
		}
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofanarion53 # Castamir
		animation = aggressive_sword
		triggered_outfit = {
			outfit_tags = { gondor_war_prince }
		}
		animate_if_dead = yes
	}
	center_portrait = {
		character = character:lineofanarion28 # Ornendil
		animation = severelywounded
		triggered_outfit = {
			outfit_tags = { gondor_prince }
		}
	}
	
	option = { # Osgiliath burnt
		name = explore_history.4033.a
		random = {
			chance = 50
			add_learning_skill = 1
		}
	}

	option = { # Ruthless general
		name = explore_history.4033.b
		if = {
			limit = { has_trait = military_engineer }
			add_martial_lifestyle_xp = 300
		}
		else = {
			random = {
				chance = 75
				add_trait = military_engineer
			}
		}
		if = {
			limit = {
				has_trait = compassionate
			}		
			random = {
				chance = 33
				remove_trait = compassionate
				add_trait_force_tooltip = callous
			}			
		}
	}
	
	option = { # Killing a kinsman
		name = explore_history.4033.c	
		add_piety = 150
		if = {
			limit = {
				has_trait = deceitful
			}		
			random = {
				chance = 33
				remove_trait = deceitful
				add_trait_force_tooltip = honest
			}			
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.4034
			days = 5
		}
	}
}

# The Return of the King
explore_history.4034 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.4034.t
	desc = explore_history.4034.desc
	theme = explore_history_activity
	override_background = {
		reference = docks_dunedain
	}
	
	right_portrait = {
		character = character:lineofanarion53 # Castamir
		animation = personality_callous
		animate_if_dead = yes
	}
	
	option = { #  Ill rule
		name = explore_history.4034.a
		random = {
			chance = 50
			add_stewardship_skill = 1
		}
		if = {
			limit = {
				has_trait = arbitrary
			}		
			random = {
				chance = 33
				remove_trait = arbitrary
				add_trait_force_tooltip = just
			}			
		}
	}

	option = { # Crossing Gondor without opposition
		name = explore_history.4034.b
		if = {
			limit = { has_trait = organizer }
			add_martial_lifestyle_xp = 300
		}
		else = {
			random = {
				chance = 75
				add_trait = organizer
			}
		}
	}

	option = { # Both Heritages
		name = explore_history.4034.c
		add_character_modifier = {
			modifier = open_minded_modifier
		}
	}
	
	after = {
		trigger_event = {
			id = explore_history.4035
			days = 5
		}
	}
}

# The Usurper's Fate
explore_history.4035 = {
	type = activity_event
	content_source = realms_dlc
	title = explore_history.4035.t
	desc = explore_history.4035.desc
	theme = explore_history_activity
	override_background = {
		reference = black_ship
	}
	override_effect_2d = {
		reference = smoke
	}
	
	center_portrait = {
		character = character:lineofanarion27 # Eldacar
		animation = war_over_win
		triggered_outfit = {
			outfit_tags = { gondor_war_prince }
		}
		animate_if_dead = yes
	}
	right_portrait = {
		character = character:lineofanarion53 # Castamir
		animation = severelywounded
		triggered_outfit = {
			outfit_tags = { gondor_war_prince }
		}
		animate_if_dead = yes
	}
	lower_right_portrait ={
		character = character:lineofcastamir2 # Castaher
	}
	
	option = { # Good Navy
		name = explore_history.4035.a
		if = {
			limit = { has_trait = lifestyle_mariner }
			random = {
				chance = 50
				add_trait_xp = {
					trait = lifestyle_mariner
					value = 5
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_mariner
			}
		}
	}

	option = { # Persistent Tumakveh
		name = explore_history.4035.b
		if = {
			limit = { has_trait = lifestyle_blademaster }
			random = {
				chance = 50
				add_trait_xp = {
					trait = lifestyle_blademaster
					value = 10
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_blademaster
			}
		}
	}

	option = { # Always duelling enemy leaders
		name = explore_history.4035.c
		random = {
				chance = 33
				add_diplomacy_lifestyle_perk_points = 1
		}	
	}
	
	after = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = explore_history_funding
						option = explore_history_extra_funding
					}
				}
				NOT = { has_character_flag = not_finished_reading }
			}
			add_character_flag = not_finished_reading
			trigger_event = {
				id = explore_history.0001
				days = 5
			}
		}
		else = {
			if = {
				limit = { has_character_flag = not_finished_reading }
				remove_character_flag = not_finished_reading
			}
			trigger_event = {
				id = explore_history.0050
				days = 5
			}
		}
	}
}

######################
# MAINTENANCE EVENTS #
# 9000 - 9999        #
######################

# Gross Exaggeration

scripted_trigger explore_history_9000_overenthusiastic_researcher = {
	is_ai = yes
	is_participant_in_activity = scope:activity
	location = root.location
}

explore_history.9000 = { #Balrog Inflation
	type = activity_event
	content_source = realms_dlc
	title = explore_history.9000.t
	desc = explore_history.9000.desc
	theme = explore_history_activity
	
	center_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:overenthusiastic_researcher
		animation = happy
	}
	
	cooldown = { months = 6 }
	
	trigger = {
		scope:activity = {
			any_attending_character = { explore_history_9000_overenthusiastic_researcher = yes }
		}
	}
	
	immediate = {
		scope:activity = {
			random_attending_character = {
				limit = {
					has_council_position = councillor_court_chaplain
					explore_history_9000_overenthusiastic_researcher = yes
				}
				alternative_limit = {
					has_court_position = chronicler_court_position
					explore_history_9000_overenthusiastic_researcher = yes
				}
				alternative_limit = {
					has_court_position = antiquarian_court_position
					explore_history_9000_overenthusiastic_researcher = yes
				}
				alternative_limit = {
					explore_history_9000_overenthusiastic_researcher = yes
				}
				save_scope_as = overenthusiastic_researcher
			}
		}
	}
	
	option = { # Roll with it
		name = explore_history.9000.a
		trigger = {
			NOT = {
				OR = {
					has_trait = shrewd
					has_trait_rank = {
						trait = intellect_good
						rank > 0
					}
					learning > 20
				}
				has_trait = honest
			}
		}
		add_prestige = minor_prestige_gain
	}

	option = { # Pish posh !
		name = explore_history.9000.b
		trigger = {
			NOT = {
				has_trait_rank = {
					trait = intellect_bad
					rank > 0
				}
			}
		}
		random_list	= {
			50 = { add_piety = minor_piety_gain }
			50 = { add_learning_skill = 1 }
		}
	}
}

explore_history.9001 = { #A Puzzling Family Tree
	type = activity_event
	content_source = realms_dlc
	title = explore_history.9001.t
	desc = explore_history.9001.desc
	theme = explore_history_activity
	
	center_portrait = {
		character = root
		animation = stress
	}
	lower_left_portrait = {
		character = character:linefinwe41 #Gil-galad
	}
	lower_center_portrait = {
		character = character:linefinwe39 #Orodreth
	}
	lower_right_portrait = {
		character = character:linefinwe20 #Fingon
	}
	
	cooldown = { months = 6 }
	
	trigger = {
		NOT = { this = character:linefinwe41 } #Gil-Galad
	}
	
	option = { # We all make mistakes
		name = explore_history.9001.a
		
		stress_impact = {
			base = hunt_stress_loss_value #-30
			compassionate = minor_stress_impact_loss
			patient = minor_stress_impact_loss
			forgiving = medium_stress_impact_loss
			callous = medium_stress_impact_gain
			arrogant = minor_stress_impact_gain
			impatient = minor_stress_impact_gain
			wrathful = medium_stress_impact_gain
		}
		add_piety = minor_piety_gain
	}

	option = { # Burn this !
		name = explore_history.9001.b
		stress_impact = {
			base = hunt_stress_loss_value #-30
			compassionate = minor_stress_impact_gain
			patient = minor_stress_impact_gain
			forgiving = medium_stress_impact_gain
			callous = medium_stress_impact_loss
			arrogant = minor_stress_impact_loss
			impatient = minor_stress_impact_loss
			wrathful = medium_stress_impact_loss
		}
		add_piety = minor_prestige_gain
	}
	
	option = { # Fingon <3 Maedhros
		name = explore_history.9001.c
		trigger = {
			or = {
				has_trait = eccentric
				has_sexuality = homosexual
				has_sexuality = bisexual
			}
		}
		add_piety = medium_piety_gain
	}
}

explore_history.9002 = { #His Boots are Yellow?
	type = activity_event
	content_source = realms_dlc
	title = explore_history.9002.t
	desc = explore_history.9002.desc
	theme = explore_history_activity
	
	center_portrait = {
		character = root
		animation = boredom
	}
	
	cooldown = { months = 6 }
	
	option = { #Silly sing-song
		name = explore_history.9002.a
		add_diplomacy_lifestyle_xp = 100
	}

	option = { #Madman
		name = explore_history.9002.b
		add_learning_lifestyle_xp = 100
	}
	
	option = { #Eru incarnate
		name = explore_history.9002.c
		if = {
			limit = { has_trait = eccentric }
			add_piety = minor_piety_gain
		}
		else = {
			random = {
				chance = 25
				add_trait_force_tooltip = eccentric
			}
		}
	}
}

explore_history.9003 = { #A Prince of Cats
	type = activity_event
	content_source = realms_dlc
	title = explore_history.9003.t
	desc = explore_history.9003.desc
	theme = explore_history_activity
	
	center_portrait = {
		character = root
		animation = disapproval
	}
	
	cooldown = { months = 6 }
	
	option = { #Too divorced
		name = explore_history.9003.a
		add_learning_lifestyle_xp = 100
	}

	option = { #Curious
		name = explore_history.9003.b
		add_diplomacy_lifestyle_xp = 100
	}
	
	option = { #Evil cats
		name = explore_history.9003.c
		if = {
			limit = { has_trait = eccentric }
			add_piety = minor_piety_gain
		}
		else = {
			random = {
				chance = 25
				add_trait_force_tooltip = eccentric
			}
		}
	}
}

explore_history.9004 = { #The Lost Road
	type = activity_event
	content_source = realms_dlc
	title = explore_history.9004.t
	desc = explore_history.9004.desc
	theme = explore_history_activity
	
	center_portrait = {
		character = root
		animation = personality_rational
	}
	
	cooldown = { months = 6 }
	
	option = { #Nonsense
		name = explore_history.9004.a
		add_learning_lifestyle_xp = 100
	}

	option = { #Worth exploring
		name = explore_history.9004.b
		if = {
			limit = { has_trait = lifestyle_mystic }
			random = {
				chance = 50
				add_trait_xp = {
					trait = lifestyle_mystic
					value = 10
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_mystic
			}
		}
	}
	
	option = { #Flying ships
		name = explore_history.9004.c
		if = {
			limit = { has_trait = eccentric }
			add_martial_lifestyle_xp = 100
		}
		else = {
			random = {
				chance = 25
				add_trait_force_tooltip = eccentric
			}
		}
	}
}

explore_history.9005 = { #Orcs' Origins
	type = activity_event
	content_source = realms_dlc
	title = explore_history.9005.t
	desc = explore_history.9005.desc
	theme = explore_history_activity
	
	center_portrait = {
		character = root
		animation = dismissal
	}
	
	cooldown = { months = 6 }
	
	option = { #What a waste of time!
		name = explore_history.9005.a
		add_learning_lifestyle_xp = 100
	}

	option = { #Odd timeline
		name = explore_history.9005.b
		if = {
			limit = { has_trait = lifestyle_archivist }
			if = {
				limit = {
					scope:activity = {
						has_activity_option = {
							category = special_type
							option = explore_history_type_standard
						}
					}
				}
				random = {
					chance = 50
					add_trait_xp = {
						trait = lifestyle_archivist
						track = historian
						value = 10
					}
				}
			}
			else = {
				random = {
					chance = 50
					add_trait_xp = {
						trait = lifestyle_archivist
						track = propagandist
						value = 10
					}
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_archivist
			}
		}
	}
}

explore_history.9006 = { #The History of Galadriel & Celeborn
	type = activity_event
	content_source = realms_dlc
	title = explore_history.9006.t
	desc = explore_history.9006.desc
	theme = explore_history_activity
	
	center_portrait = {
		character = root
		animation = disbelief
	}
	lower_left_portrait = {
		character = character:linefinwe36 #Galadriel
	}
	lower_center_portrait = {
		character = character:lineofelmo5 #Celeborn
	}
	
	trigger = {
		NOR = {
			this = character:linefinwe36 #Galadriel
			this = character:lineofelmo5 #Celeborn
		}
	}
	
	cooldown = { months = 6 }
	
	option = { #How frustrating!
		name = explore_history.9006.a
		add_learning_lifestyle_xp = 100
	}

	option = { #A coherent tale ?
		name = explore_history.9006.b
		if = {
			limit = { has_trait = lifestyle_archivist }
			if = {
				limit = {
					scope:activity = {
						has_activity_option = {
							category = special_type
							option = explore_history_type_standard
						}
					}
				}
				random = {
					chance = 50
					add_trait_xp = {
						trait = lifestyle_archivist
						track = historian
						value = 10
					}
				}
			}
			else = {
				random = {
					chance = 50
					add_trait_xp = {
						trait = lifestyle_archivist
						track = propagandist
						value = 10
					}
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_archivist
			}
		}
	}
}

explore_history.9007 = { #The Bellakar Delusion
	type = activity_event
	content_source = realms_dlc
	title = explore_history.9007.t
	desc = explore_history.9007.desc
	theme = explore_history_activity
	
	center_portrait = {
		character = root
		animation = disbelief
	}
	right_portrait = {
		character = scope:amused_researcher
		animation = laugh
	}
	lower_left_portrait = {
		character = scope:bellakarking
	}

	trigger = {
		NOT = { root.location = { geographical_region = middleearth_haradwaith_far } }
	}
	
	immediate = {
		if = {
			limit = { exists = title:e_bellakar.holder }
			title:e_bellakar.holder = {
				save_scope_as = bellakarking
			}
		}
		scope:activity = {
			random_attending_character = {
				limit = {
					has_council_position = councillor_court_chaplain
					explore_history_9000_overenthusiastic_researcher = yes
				}
				alternative_limit = {
					has_court_position = chronicler_court_position
					explore_history_9000_overenthusiastic_researcher = yes
				}
				alternative_limit = {
					has_court_position = antiquarian_court_position
					explore_history_9000_overenthusiastic_researcher = yes
				}
				alternative_limit = {
					explore_history_9000_overenthusiastic_researcher = yes
				}
				save_scope_as = amused_researcher
			}
		}
	}
	
	cooldown = { months = 6 }
	
	option = { #How droll!
		name = explore_history.9007.a
		add_stress = medium_stress_impact_loss
	}

	option = { #This makes sense!
		name = explore_history.9007.b
		if = {
			limit = { has_trait = eccentric }
			if = {
				limit = { NOT = { has_trait = lifestyle_mariner } }
				random = {
					chance = 25
					add_trait = lifestyle_mariner
				}
			}
			else = {
				add_stewardship_lifestyle_xp = 100
				add_stress = minor_stress_impact_loss
			}
		}	
		else = {
			if = {
				limit = { NOT = { has_trait = lifestyle_mariner } }
				random = {
					chance = 25
					add_trait = lifestyle_mariner
				}
			}
			else = {
				add_stewardship_lifestyle_xp = 100
			}
			random = {
				chance = 25
				add_trait_force_tooltip = eccentric
			}
		}
	}
}

explore_history.9008 = { #The Lays of Beleriand
	type = activity_event
	content_source = realms_dlc
	title = explore_history.9008.t
	desc = explore_history.9008.desc
	theme = explore_history_activity
	
	center_portrait = {
		character = root
		animation = stress
	}
	
	cooldown = { months = 6 }
	
	option = { #I must try!
		name = explore_history.9008.a
		add_stress = minor_stress_impact_loss
		if = {
			limit = { has_trait = lifestyle_archivist }
			if = {
				limit = {
					scope:activity = {
						has_activity_option = {
							category = special_type
							option = explore_history_type_standard
						}
					}
				}
				random = {
					chance = 50
					add_trait_xp = {
						trait = lifestyle_archivist
						track = historian
						value = 10
					}
				}
			}
			else = {
				random = {
					chance = 50
					add_trait_xp = {
						trait = lifestyle_archivist
						track = propagandist
						value = 10
					}
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_archivist
			}
		}
	}

	option = { # Forget it
		name = explore_history.9008.b
		add_stress = minor_stress_impact_loss
	}
	
	option = { # If I sing out loud ?
		name = explore_history.9008.c
		if = {
			limit = { has_trait = eccentric }
			if = {
				limit = { NOT = { has_trait = poet } }
				random = {
					chance = 25
					add_trait = poet
				}
			}
			else = {
				add_diplomacy_lifestyle_xp = 100
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = poet
			}
			random = {
				chance = 25
				add_trait_force_tooltip = eccentric
			}
		}
	}
}

explore_history.9009 = { #King Trotter?
	type = activity_event
	content_source = realms_dlc
	title = explore_history.9009.t
	desc = explore_history.9009.desc
	theme = explore_history_activity
	
	center_portrait = {
		character = root
		animation = shock
	}
	
	trigger = {
		NOT = {
			dynasty = {
				any_dynasty_member = {
					even_if_dead = yes
					has_character_flag = is_aragorn
				}
			}
		}
		is_target_in_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:aragorn_returned_to_gondor
		}
	}
	
	cooldown = { months = 6 }
	
	option = { #Halfling half-truths
		name = explore_history.9009.a
		add_stress = minor_stress_impact_loss
		if = {
			limit = { has_trait = lifestyle_archivist }
			if = {
				limit = {
					scope:activity = {
						has_activity_option = {
							category = special_type
							option = explore_history_type_standard
						}
					}
				}
				random = {
					chance = 50
					add_trait_xp = {
						trait = lifestyle_archivist
						track = historian
						value = 10
					}
				}
			}
			else = {
				random = {
					chance = 50
					add_trait_xp = {
						trait = lifestyle_archivist
						track = propagandist
						value = 10
					}
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_archivist
			}
		}
	}
	
	option = { #Could it be true ?
		name = explore_history.9009.b
		if = {
			limit = { has_trait = eccentric }
			add_learning_lifestyle_xp = 100
		}	
		else = {
			add_learning_lifestyle_xp = 100
			random = {
				chance = 25
				add_trait_force_tooltip = eccentric
			}
		}
	}
}

explore_history.9010 = { #Round-Earth Society
	type = activity_event
	content_source = realms_dlc
	title = explore_history.9010.t
	desc = explore_history.9010.desc
	theme = explore_history_activity
	
	center_portrait = {
		character = root
		animation = personality_irrational
	}
	
	cooldown = { months = 6 }
	
	option = { #Bonkers
		name = explore_history.9010.a
		if = {
			limit = { has_trait = lifestyle_mariner }
			random = {
				chance = 50
				add_trait_xp = {
					trait = lifestyle_mariner
					value = 5
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_mariner
			}
		}
	}
	
	option = { #Newsletter
		name = explore_history.9010.b
		if = {
			limit = { has_trait = eccentric }
			if = { limit = { NOT = { has_trait = journaller } } 
				random = {
					chance = 25
					add_trait = journaller
				}
			}
			else = {
				add_learning_lifestyle_xp = 100
			}
		}
		else = {
			if = { limit = { NOT = { has_trait = journaller } }
				random = {
					chance = 25
					add_trait = journaller
				}
			}
			else = {
				add_learning_lifestyle_xp = 100
			}
			random = {
				chance = 25
				add_trait_force_tooltip = eccentric
			}
		}
	}
}

explore_history.9011 = { #Amazing Rings of Power
	orphan = yes # Remove this once added to on_action
	type = activity_event
	content_source = realms_dlc
	title = explore_history.9011.t
	desc = explore_history.9011.desc
	theme = explore_history_activity
	
	center_portrait = {
		character = root
		animation = personality_irrational
	}
	
	artifact = {
		position = lower_right_portrait
		target = scope:newly_created_artifact
	}
	
	cooldown = { months = 6 }
	
	immediate = {
		create_artifact_rop_effect = { OWNER = this }
		scope:newly_created_artifact = { save_scope_as = RoP }
	}
	
	option = { #Burn it
		name = explore_history.9011.a
		scope:RoP = { destroy_artifact = this }
		if = {
			limit = { has_trait = lifestyle_archivist }
			if = {
				limit = {
					scope:activity = {
						has_activity_option = {
							category = special_type
							option = explore_history_type_standard
						}
					}
				}
				random = {
					chance = 50
					add_trait_xp = {
						trait = lifestyle_archivist
						track = historian
						value = 10
					}
				}
			}
			else = {
				random = {
					chance = 50
					add_trait_xp = {
						trait = lifestyle_archivist
						track = propagandist
						value = 10
					}
				}
			}
		}	
		else = {
			random = {
				chance = 25
				add_trait = lifestyle_archivist
			}
		}
		add_stress = minor_stress_impact_loss
	}
	
	option = { #More !
		name = explore_history.9011.b
		if = {
			limit = { has_trait = eccentric }
			add_prestige = minor_prestige_gain
		}
		else = {
			random = {
				chance = 25
				add_trait_force_tooltip = eccentric
			}
		}
	}
}
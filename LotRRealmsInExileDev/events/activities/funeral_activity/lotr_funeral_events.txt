# Events for the Funeral activity
namespace = lotr_funeral

lotr_funeral.0001 = { # Inspire Hope during a funeral
	type = activity_event
	title = lotr_funeral.0001.t
	desc = lotr_funeral.0001.desc
	theme = funeral_activity
	left_portrait = {
		character = root
		triggered_animation = {
			trigger = {
				faith = { has_doctrine_parameter = bewailment_funeral }
			}
			animation = wailing
		}
		triggered_animation = {
			trigger = {
				NOT = {
					faith = { has_doctrine_parameter = bewailment_funeral }
				}
			}
			animation = grief
		}
	}
	right_portrait = {
		character = scope:grieving_elf
		animation = crying 
	}
	cooldown = { years = 2 }

	trigger = {
		has_activity_intent = inspire_hope_intent
	}
	
	immediate = {
		scope:activity = {
			random_attending_character = { 
				limit = { NOT = { this = root } }
				save_scope_as = grieving_elf 
			}
		}
	}

	option = { # We must fight on without him, Jim
		name = lotr_funeral.0001.a
		reason = activity_intent
		add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_very_low_hope }
	}

	after = {
		remove_character_flag = busy_in_banquet_event
	}
}


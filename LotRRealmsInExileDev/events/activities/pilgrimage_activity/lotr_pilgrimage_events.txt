namespace = lotr_pilgrimage

## Elven Pilgrimage Events
#	lotr_pilgrimage.0001		--- The Holy Site's Aura ~~~ Aerien
#	lotr_pilgrimage.0002		--- A Walk in the Woods  ~~~ Aerien

#### Elven Pilgrimage Events ####

# The Holy Site's Aura
lotr_pilgrimage.0001 = {
	type = activity_event
	title = lotr_pilgrimage.0001.t
	desc = lotr_pilgrimage.0001.desc
	theme = pilgrimage_destination
	left_portrait = {
		character = root
		animation = thinking
	}
	right_portrait = {
		character = scope:pilgrim_elf
		animation = interested
		camera = camera_event_center_away
	}

	cooldown = { years = 1 }

	trigger = {
		# Correct intent for raising hope
		has_activity_intent = inspire_hope_intent
	}
	
	immediate = {
		scope:activity = {
			random_attending_character = { 
				limit = { NOT = { this = root } }
				save_scope_as = pilgrim_elf 
			}
		}
	}
	
	option = { # As long as this place stands, our hope endures.
		name = lotr_pilgrimage.0001.a 
		add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_inspiring_speech }
	}
	
	option = { # Come, let's not stand around like idiots.
		name = lotr_pilgrimage.0001.b
		add_piety = major_piety_gain
	}
}

lotr_pilgrimage.0002 = { # A Walk in the Woods
	title = lotr_pilgrimage.0002.t
	type = activity_event
	desc = lotr_pilgrimage.0002.desc
	content_source = realms_dlc
	theme = pilgrimage_destination
	override_background = { reference = ep2_hunt_foggy_forest }
	trigger = {
		# Correct intent for raising hope
		is_elf = yes
	}
	right_portrait = {
		character = root
		animation = storyteller
	}
	left_portrait = {
		character = scope:pilgrimage_elf
		animation = happiness
	}
	immediate = {
		scope:activity = {
			random_attending_character = { 
				limit = { NOT = { this = root } }
				save_scope_as = pilgrimage_elf 
			}
		}
	}
	option = { # We must not despair against the Long Defeat
		name = lotr_pilgrimage.0002.a
		add_legitimacy = medium_legitimacy_gain
		add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_inspiring_speech }
	}
	option = { # I shall inspire my vassals and councillors
		name = lotr_pilgrimage.0002.b
		every_vassal = {
			add_opinion = {
				target = root
				modifier = friendliness_opinion
				opinion = 15
			}
		}
		every_tributary = {
			limit = { suzerain = root }
			add_opinion = {
				target = root
				modifier = friendliness_opinion
				opinion = 15
			}
		}
		every_councillor = {
			add_opinion = {
				target = root
				modifier = friendliness_opinion
				opinion = 15
			}
		}
	}
	after = {
		if = {
			limit = { scope:activity = { has_activity_type = activity_roaming } }
			add_character_flag = roaming_gain_hope 
		}
	}
}
namespace = dwarven_racial

## Game Start Events ##

dwarven_racial.0100 = { # Grant extra age and lifestyle experience to deceased dwarves
	scope = none
	hidden = yes

    immediate = {

		#Dwarf-fathers born (and died) in the Years of the Trees
		character:lineofdurinI = { # Durin the Deathless, born in the Years of the Trees, dies near the end of the First Age, crafted the Helm of Durin
			change_age = 1985
			add_trait_xp = {
				trait = lifestyle_artifact_crafting
				track = armour_smith
				value = 100
			}
		}
		character:lineofuriI ?= { # Uri the Scarred
			change_age = 985
		}
		character:lineofdwalinI = { # Dwalin the Wise
			change_age = 1009
		}
		character:lineofsindriI ?= { # Sindri the Rich
			change_age = 989
		}
		character:lineofthulinI ?= { # Thulin the Swift
			change_age = 997
		}
		character:lineofthrarI ?= { # Thrar the Proud
			change_age = 990
		}
		character:lineofbavorI ?= { # Bavor the Cold
			change_age = 994
		}

		### Dwarves

		# Longbeards
		character:lineofdurinII = { # Durin II, crafted the Durin's Axe

			add_trait_xp = {
				trait = lifestyle_artifact_crafting
				track = weapon_smith
				value = 100
			}
		}

		# Firebeards
		character:lineofuriIwife ?= { # born and died in the Years of the Trees
			change_age = 253
		}
		character:lineofuri0a ?= {  # born and died in the Years of the Trees
			change_age = 240
		}
		character:lineofuri0b ?= {  # born and died in the Years of the Trees
			change_age = 264
		}
		character:lineofuri0c ?= {  # born and died in the Years of the Trees
			change_age = 242
		}
		character:lineofuri0d ?= {  # born and died in the Years of the Trees
			change_age = 251
		}
		character:lineoftelchar1 = { # Telchar of Nogrod

			add_trait_xp = {
				trait = lifestyle_artifact_crafting
				track = weapon_smith
				value = 100
			}
			add_trait_xp = {
				trait = lifestyle_artifact_crafting
				track = armour_smith
				value = 100
			} 
			add_trait_xp = {
				trait = lifestyle_artifact_crafting
				track = jewel_smith
				value = 100
			}
		}
		character:lineofgamilzirak = { # Gamil Zirak, master of Telchar

			add_trait_xp = {
				trait = lifestyle_artifact_crafting
				track = weapon_smith
				value = 100
			}
			add_trait_xp = {
				trait = lifestyle_artifact_crafting
				track = armour_smith
				value = 100
			} 
			add_trait_xp = {
				trait = lifestyle_artifact_crafting
				track = jewel_smith
				value = 100
			}
		}

		# Broadbeams
		character:lineofdwalinIwife ?= {  # born and died in the Years of the Trees
			change_age = 276
		}
		character:lineofdwalin0a ?= {  # born and died in the Years of the Trees
			change_age = 230
		}
		character:lineofdwalin0b ?= {  # born and died in the Years of the Trees
			change_age = 275
		}
		character:lineofdwalin0c ?= {  # born and died in the Years of the Trees
			change_age = 250
		}
		character:lineofdwalin0d ?= {  # born and died in the Years of the Trees
			change_age = 225
		}
		# Ironfists
		character:lineofsindriIwife ?= {  # born and died in the Years of the Trees
			change_age = 235
		}
		character:lineofsindri0a ?= {  # born and died in the Years of the Trees
			change_age = 220
		}
		character:lineofsindri0b ?= {  # born and died in the Years of the Trees
			change_age = 255
		}
		character:lineofsindri0c ?= {  # born and died in the Years of the Trees
			change_age = 240
		}
		character:lineofsindri0cbrother1 ?= {  # born and died in the Years of the Trees
			change_age = 145
		}
		character:lineofsindri0cbrother2 ?= {  # born and died in the Years of the Trees
			change_age = 162
		}
		character:lineofsindri0csister ?= {  # born and died in the Years of the Trees
			change_age = 273
		}
		character:lineofsindri0d ?= {  # born and died in the Years of the Trees
			change_age = 205
		}
		character:lineofdhrim0 ?= {  # born and died in the Years of the Trees
			change_age = 262
		}
		character:lineoftahm = { # Tahm, the traveling Ironfist craftsman

			add_trait_xp = {
				trait = lifestyle_artifact_crafting
				track = jewel_smith
				value = 100
			}
		}

		# Stiffbeards
		character:lineofthulinIwife ?= {  # born and died in the Years of the Trees
			change_age = 264
		}
		character:lineofthulin0a ?= {  # born and died in the Years of the Trees
			change_age = 112
		}
		character:lineofthulin0abrother ?= {  # born and died in the Years of the Trees
			change_age = 236
		}
		character:lineofthulin0b ?= {  # born and died in the Years of the Trees
			change_age = 228
		}
		character:lineofthulin0c ?= {  # born and died in the Years of the Trees
			change_age = 230
		}
		character:lineofthulin0c1 ?= {  # born and died in the Years of the Trees
			change_age = 226
		}
		character:lineofthulin0cbrother ?= {  # born and died in the Years of the Trees
			change_age = 170
		}
		character:lineofthulin0c2 ?= {  # born and died in the Years of the Trees
			change_age = 10
		}
		character:lineofthulin0d ?= {  # born and died in the Years of the Trees
			change_age = 255
		}

		# Blacklocks
		character:lineofthrarIwife ?= {  # born and died in the Years of the Trees
			change_age = 276
		}
		character:lineofthrar0a ?= {  # born and died in the Years of the Trees
			change_age = 230
		}
		character:lineofthrar0b ?= {  # born and died in the Years of the Trees
			change_age = 245
		}
		character:lineofthrar0c ?= {  # born and died in the Years of the Trees
			change_age = 240
		}
		character:lineofthrar0d ?= {  # born and died in the Years of the Trees
			change_age = 205
		}
		character:lineofthrar51 = { # Fullâ VII Flamehand

			add_trait_xp = {
				trait = lifestyle_artifact_crafting
				track = weapon_smith
				value = 100
			}
			add_trait_xp = {
				trait = lifestyle_artifact_crafting
				track = armour_smith
				value = 100
			} 
		}

		# Stonefoots
		character:lineofbavorIwife ?= {  # born and died in the Years of the Trees
			change_age = 278
		}
		character:lineofbavor0a ?= {  # born and died in the Years of the Trees
			change_age = 220
		}
		character:lineofbavor0b ?= {  # born and died in the Years of the Trees
			change_age = 235
		}
		character:lineofbavor0c ?= {  # born and died in the Years of the Trees
			change_age = 230
		}
		character:lineofbavor0d ?= {  # born and died in the Years of the Trees
			change_age = 225
		}
		character:lineofzabad = { # Zabad the Jewelwright
			change_age = 275
			add_trait_xp = {
				trait = lifestyle_artifact_crafting
				track = jewel_smith
				value = 100
			}
		}
    }
}

## BEARD CARE EVENTS ##
scripted_effect beard_care_standard_effect = { 
		add_stress = medium_stress_loss
		add_character_modifier = {
			modifier = beard_care_standard_modifier
			years = 2
		}
}
scripted_effect beard_care_good_effect = {
		add_stress = major_stress_loss
		add_character_modifier = {
			modifier = beard_care_good_modifier
			years = 2
		}
}
scripted_effect beard_care_bad_effect = {
		add_stress = medium_stress_gain
		add_character_modifier = {
			modifier = beard_care_bad_modifier
			years = 2
		}
}

dwarven_racial.1001 = { # It goes fine
	type = character_event

	title = dwarven_racial.1001.t
	desc = dwarven_racial.1001.desc
	theme = dwarven
	override_background = { reference = relaxing_room }
	
	left_portrait = {
		character = root
		animation = personality_content
	}
	
	immediate = {
		beard_care_standard_effect = yes
	}

	option = { # It's good, maybe not perfect, but good.
		name = dwarven_racial.1001.a
	}
}

dwarven_racial.1002 = { # It goes great
	type = character_event

	title = dwarven_racial.1002.t
	desc = dwarven_racial.1002.desc
	theme = dwarven
	override_background = { reference = relaxing_room }
	
	left_portrait = {
		character = root
		animation = happiness
	}
	
	immediate = {
		beard_care_good_effect = yes
	}

	option = { # It's amazing
		name = dwarven_racial.1002.a
	}
}

dwarven_racial.1003 = { # It goes terrible
	type = character_event

	title = dwarven_racial.1003.t
	desc = dwarven_racial.1003.desc
	theme = dwarven
	override_background = { reference = relaxing_room }
	
	left_portrait = {
		character = root
		animation = shock
	}
	
	immediate = {
		beard_care_bad_effect = yes
	}

	option = { # You've ruined it
		name = dwarven_racial.1003.a
	}
}

dwarven_racial.2000 = {
	hidden = yes
	immediate = {
		if = {
			limit = {
				scope:my_dorfdad = {
					OR = {
						death_reason = death_crucified
						death_reason = death_burned_witch
						death_reason = death_torture
						death_reason = death_execution_blood_eagle
						death_reason = death_execution_blot
						death_reason = death_execution
						death_reason = death_dungeon
						death_reason = death_ritually_hung_then_eaten
						death_reason = death_ritually_hung
						death_reason = death_ritually_eaten
						death_reason = death_hostage_execution
						death_reason = death_botched_decapitation
						death_reason = death_decapitated
						death_reason = death_sacrificed_to_gods
						death_reason = death_eaten
						death_reason = death_kennel
						death_reason = death_killed_while_attempting_murder
						death_reason = death_chariot_race_trick
						death_reason = death_snake
						death_reason = death_thrown_onto_chariot_track
						death_reason = death_thrown_off_kathisma
						death_reason = death_poison
						death_reason = death_crocodile
						death_reason = death_dog_attack
						death_reason = death_wolves
						death_reason = death_bear
						death_reason = death_plotting
						death_reason = death_script_cruelty
						death_reason = death_murder
						death_reason = death_ended_on_feast_table
						death_reason = death_head_ripped_off
						death_reason = death_cloven_in_half
						death_reason = death_viciously_dismembered
						death_reason = death_ripped_apart_limb_by_limb
						death_reason = death_chopped_to_pieces
						death_reason = death_heart_ripped_out
						death_reason = death_fear
						death_reason = death_skull_cracked_open
						death_reason = death_strangled_with_own_intestines
						death_reason = death_carp_accident
					}
				}
				NOT = {
					scope:my_dorfdad_killer = {
						any_secret = {
							type = secret_murder
							secret_target = scope:my_dorfdad
							any_secret_knower = { count = 0 }
						}
					}
				}
			}
			scope:my_dorfdad_killer = {
				save_scope_as = executioner
				scope:my_dorfdad = { save_scope_as = victim }
				killed_dwarf_father_effect = yes
			}
		}
	}
}
namespace = rangers

# Events about Aragorn
#		rangers.0100	Chieftain of the Dúnedain Rangers - Introduction to Aragorn.
#		rangers.0100	Dunedain Encampments of Eriador
#       rangers.0200	Death of Gilraen


rangers.0100 = { # Introduction to Aragorn
	title = rangers.0100.t
	desc = rangers.0100.desc
	theme = stewardship_duty_focus
	left_portrait = {
		character = root
		animation = idle
	}
	
	option = { # From the ashes a fire shall be woken
		name = rangers.0100.a
		#custom_tooltip = rangers.0100.a.tt
		every_living_character = { # Every landed Dunedain Ranger in Arnor gets the chance to swear fealty.
			limit = {
				is_independent_ruler = yes
				culture = culture:dunedain_ranger
				location.empire = title:e_arnor
				NOT = { has_title = title:d_northern_dunedain }
			}
			trigger_event = rangers.0101
		}
	}
}

rangers.0101 = { # Dunedain Encampments - chance to swear fealty
	immediate = {
		title:d_northern_dunedain.holder = { save_scope_as = dunedain_chieftain }
	}
	title = rangers.0101.t
	desc = rangers.0101.desc
	theme = stewardship_duty_focus
	left_portrait = {
		character = root
		animation = idle
	}

	right_portrait = {
		character = scope:dunedain_chieftain
		animation = idle
	}

	option = { # Heed the call of the chieftain!
		name = rangers.0101.a
		create_title_and_vassal_change = {
			type = swear_fealty
			save_scope_as = change
		}
		root = {
			change_liege = {
				liege = scope:dunedain_chieftain
				change = scope:change
			}
			add_opinion = {
				modifier = became_vassal
				target = scope:dunedain_chieftain
				opinion = 10
			}
		}
		resolve_title_and_vassal_change = scope:change

		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.

			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}

			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}

			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	option = { # We need to act on our own for now.
		name = rangers.0101.b
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.

			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 0
			}

			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 30
			}

			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
}

rangers.0200 = { # Death of Gilraen
	title = rangers.0200.t
	desc = rangers.0200.desc
	theme = stewardship_duty_focus
	left_portrait = {
		character = character:lineisildur42
		animation = worry
	}
	right_portrait = {
		character = character:linegilraen1
		animation = sadness
	}
	
	option = { # Farewell, Mother
		name = rangers.0200.a
		character:linegilraen1 = {
			death = { death_reason = death_natural_causes }
		}
	}
}


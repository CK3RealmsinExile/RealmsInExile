namespace = mordor

#############################################
# Mordor.1000-1199 ~ Witch-king LW Events #
#############################################
# 1000-1009 Decision Events
# 1010-1019 Return of Sauron
# 1020-1029 Necromancer Events

mordor.1000 = { # Initial dilemma
	content_source = realms_dlc
	type = character_event
	title = mordor.1000.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = already_seen_list
				}
				desc = mordor.1000.desc.a
			}
			desc = mordor.1000.desc
		}
	}
	theme = realm
	trigger = { is_ai = no }
	override_background = { reference = throne_room }
	left_portrait = {
		character = root
		animation = marshal_mace
	}
	
	immediate = {
		play_music_cue = lotr_cue_nazgul
	}
	
	option = { # Strengthen the development of the orcish war machine 
		name = mordor.1000.a
		trigger = { NOT = { has_character_flag = witchking_orc_development } }
	}
	option = { # Despoil Ithilien
		name = mordor.1000.b
		trigger = { NOT = { has_character_flag = witchking_despoil_ithilien } }
	}
	option = { # Build up the defenses
		name = mordor.1000.c
		trigger = { NOT = { has_character_flag = witchking_strengthen_defences } }
	}
	option = { # Humble the Núrniags
		name = mordor.1000.d
		trigger = { NOT = { has_character_flag = witchking_humble_nurniags } }
	}
	option = { # Industry
		name = mordor.1000.e
		trigger = { NOT = { has_character_flag = witchking_develop_industry } }
	}
	option = { # Call for the return of Sauron
		name = mordor.1000.f
		trigger = {
			AND = {
				has_character_flag = witchking_orc_development
				has_character_flag = witchking_strengthen_defences
				has_character_flag = witchking_humble_nurniags
				has_character_flag = witchking_despoil_ithilien
				has_character_flag = witchking_develop_industry
			}
		}
	}
	after = {
		add_character_flag = already_seen_list
	}
}

# Decision Events
mordor.1001 = { # Defenses strengthened
	content_source = realms_dlc
	type = character_event
	title = mordor.1001.t
	desc = mordor.1001.desc
	theme = martial
	left_portrait = {
		character = root
		animation = marshal_mace
	}
	immediate = {
		show_as_tooltip = {
			title:c_minas_ithil = {
				change_development_level = 5
			}
			title:c_morannon = {
				change_development_level = 5
			}
		}
		add_character_flag = witchking_strengthen_defences
	}
	option = { # We still have work to do...
		name = mordor.1001.a 
		next_mission_effect = yes
	}
}

mordor.1002 = { # Orc army raised
	content_source = realms_dlc
	type = character_event
	title = mordor.1002.t
	desc = mordor.1002.desc
	theme = war
	left_portrait = {
		character = root
		animation = marshal_mace
	}
	immediate = {
		show_as_tooltip = {
			root.culture = { 
				add_innovation ?= innovation_bombard
				add_innovation ?= innovation_standing_armies
			}
		}
		add_character_flag = witchking_orc_development
	}
	option = { # Uruks
		name = mordor.1002.a 
		root.culture = { 
			add_innovation = innovation_uruks
		}
		create_maa_regiment = {
			type = mountainorc_warriors
			check_can_recruit = no
			size = 1
		}
		next_mission_effect = yes
	}
	option = { # Caragor
		name = mordor.1002.b
		root.culture = { 
			add_innovation = innovation_caragor
		}
		create_maa_regiment = {
			type = caragor_pack
			check_can_recruit = no
			size = 1
		}
		next_mission_effect = yes
	}
	option = { # Olog-hai
		name = mordor.1002.c
		root.culture = { 
			add_innovation = innovation_olog_hai
		}
		create_maa_regiment = {
			type = olog_hai
			check_can_recruit = no
			size = 1
		}
		next_mission_effect = yes
	}
}

mordor.1003 = { # Slave economy reorganized
	content_source = realms_dlc
	type = character_event
	title = mordor.1003.t
	desc = mordor.1003.desc
	theme = stewardship
	left_portrait = {
		character = root
		animation = menacing
	}
	immediate = {
		add_character_flag = witchking_humble_nurniags
	}
	option = { # Keep the status quo
		name = mordor.1003.a 
		trigger = {
			title:k_nurn.holder != root
		}
		add_character_modifier = { 
			modifier = nurn_status_quo
			years = 20
		}
		title:k_nurn.holder ?= {
			vassal_contract_set_obligation_level = {
                type = religious_rights
                level = 1
            }
			vassal_contract_set_obligation_level = {
                type = title_revocation_rights
                level = 1
            }
		}

		next_mission_effect = yes
	}
	option = { # Increase Taxes
		name = mordor.1003.b
		trigger = {
			title:k_nurn.holder != root
		}
		title:k_nurn.holder ?= {
			vassal_contract_set_obligation_level = {
                type = religious_rights
                level = 1
            }
			vassal_contract_set_obligation_level = {
                type = title_revocation_rights
                level = 1
            }

			root.culture = { 
				add_innovation ?= innovation_scutage # If you don't have it
			}
			vassal_contract_set_obligation_level = {
				type = special_contract #Scutage
				level = 1
            }
			vassal_contract_set_obligation_level = {
               type = feudal_government_taxes
               level = 4
            }
		}
		next_mission_effect = yes
	}
	option = { # Devolve power
		name = mordor.1003.c
		trigger = {
			title:k_nurn.holder != root
		}
		title:k_nurn = {
			every_de_jure_county = {
				limit = {
					holder.culture = culture:nurniag
				}
				add_county_modifier = {
					modifier = autonomus_nurn
					years = 20
				}
			}
		}

		add_realm_law = crown_authority_0

		title:k_nurn.holder ?= {
			vassal_contract_set_obligation_level = {
                type = religious_rights
                level = 1
            }
			vassal_contract_set_obligation_level = {
                type = title_revocation_rights
                level = 1
            }
			
			vassal_contract_set_obligation_level = {
               type = feudal_government_taxes
               level = 1
            }
		}

		next_mission_effect = yes
	}
	option = { # Handle this myself
		name = mordor.1003.d
		title:k_nurn = { # Revoke Nurn
			save_scope_as = landed_title
			holder = {save_scope_as = recipient save_scope_as = recipient }
			root = { save_scope_as = actor }
			revoke_title_interaction_effect = yes
			create_title_and_vassal_change = {
				type = revoked
				save_scope_as = change
				add_claim_on_loss = yes
			}
			change_title_holder = {
				holder = root
				change = scope:change
			}
			resolve_title_and_vassal_change = scope:change
		}

		next_mission_effect = yes
	}
	option = { # A New Lieutenant
		name = mordor.1003.e

		title:k_nurn = { # Revoke Nurn
			save_scope_as = landed_title
			holder = {save_scope_as = recipient save_scope_as = recipient }
			root = { save_scope_as = actor }
			revoke_title_interaction_effect = yes
			create_title_and_vassal_change = {
				type = revoked
				save_scope_as = change
				add_claim_on_loss = yes
			}
			change_title_holder = {
				holder = character:nazgul5 # Give it to Khorahil
				change = scope:change
			}
			resolve_title_and_vassal_change = scope:change
		}
		title:d_nurn = { # Revoke Nurn duchy
			save_scope_as = landed_title
			holder = {save_scope_as = recipient save_scope_as = recipient }
			root = { save_scope_as = actor }
			revoke_title_interaction_effect = yes
			create_title_and_vassal_change = {
				type = revoked
				save_scope_as = change2
				add_claim_on_loss = yes
			}
			change_title_holder = {
				holder = character:nazgul5 # Give it to Khorahil
				change = scope:change2
			}
			resolve_title_and_vassal_change = scope:change2
		}
		title:c_thaurband = { # Revoke Nurn county
			save_scope_as = landed_title
			holder = {save_scope_as = recipient save_scope_as = recipient }
			root = { save_scope_as = actor }
			revoke_title_interaction_effect = yes
			create_title_and_vassal_change = {
				type = revoked
				save_scope_as = change3
				add_claim_on_loss = yes
			}
			change_title_holder = {
				holder = character:nazgul5 # Give it to Khorahil
				change = scope:change3
			}
			resolve_title_and_vassal_change = scope:change3
		}


		character:nazgul5 = {
			add_character_modifier = {
				modifier = overseer_of_nurn
				years = 20
			}
		}

		next_mission_effect = yes
	}
}

mordor.1004 = { # Ithilien despoiled
	content_source = realms_dlc
	type = character_event
	title = mordor.1004.t
	desc = mordor.1004.desc
	theme = dread
	left_portrait = {
		character = root
		animation = menacing
	}
	override_background = { reference = wilderness_forest }
	immediate = {
		show_as_tooltip = {
			add_dread = major_dread_gain
			add_short_term_gold = 200
			title:k_ithilien = {
				every_de_jure_county = {
					limit = { 
						NOT = {
							duchy = title:d_minas_ithil
						}
						OR = {
							holder.top_liege = root
							any_neighboring_county = {
								holder.top_liege = root
							}
						}
					}
					change_development_level = -2
				}
			}
			add_character_modifier = {
				modifier = timber_of_ithilien
				years = 5
			}
		}
		add_character_flag = witchking_despoil_ithilien
	}
	option = { # We still have work to do...
		name = mordor.1004.a
		next_mission_effect = yes
	}
}

mordor.1005 = { # Industry built
	content_source = realms_dlc
	type = character_event
	title = mordor.1005.t
	desc = mordor.1005.desc
	theme = realm
	left_portrait = {
		character = root
		animation = marshal_mace
	}

	option = { # We still have work to do...
		name = mordor.1005.a
		next_mission_effect = yes
		add_character_flag = witchking_develop_industry
	}
}


# Return of Sauron events

mordor.1010 = { # Sauron reacts to being offered to return
	content_source = realms_dlc
	type = character_event
	title = mordor.1010.t
	desc = mordor.1010.desc
	theme = realm
	override_background = { reference = throne_room } 
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = scope:witchking 
		animation = marshal_mace
	}
	immediate = {
		title:k_morgul.holder = { save_scope_as = witchking }
	}
	option = { # I will return to Mordor
		name = mordor.1010.a 
		show_as_tooltip = {
			get_title = title:e_mordor
			get_title = title:k_dark_lord
			get_title = title:k_gorgoroth
			get_title = title:d_barad_dur
			get_title = title:c_barad_dur
			title:c_barad_dur.title_province = { add_building = wonder_baraddur_03 }
		}
		ai_chance = { base = 100 }
		scope:witchking = { trigger_event = mordor.1011 }
	}
	option = { # Continue in Dol Guldur
		name = mordor.1010.b 
		add_piety = minor_piety_gain
	}
}

mordor.1011 = { # Return of Sauron
	content_source = realms_dlc
	type = character_event
	title = mordor.1011.t
	desc = mordor.1011.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = scope:sauron 
		animation = marshal
	}
	trigger = { 
		AND = {
			has_title = title:e_mordor 
			completely_controls = title:k_gorgoroth
		}
	}
	on_trigger_fail = { #Try again two decades later
		trigger_event = {
			id = mordor.1011
			years = 20
		}
	}
	immediate = {
		character:lineofsauron =  { save_scope_as = sauron }
		character:lineoffeanor2 = { save_scope_as = maglor }
		every_tributary = {
			limit = { suzerain = root }
			add_to_list = tributaries_to_transfer
		}
	}
	option = { # Lord of Mordor!
		name = mordor.1011.a 
		scope:sauron = {
			get_title = title:c_barad_dur
			get_title = title:d_barad_dur
			get_title = title:k_gorgoroth
			get_title = title:k_dark_lord
			get_title = title:e_mordor
			change_first_name = "Sauron"
			give_nickname = nick_the_deceiver_sauron
			add_character_flag = had_nickname_event
		}
		
		every_in_list = { # All of the Witch-king's tributaries (if any) go to Sauron
			list = tributaries_to_transfer
			start_tributary = {
				contract_group = tributary_subjugated
				suzerain = scope:sauron
			}
		}

		# Witch-King swears fealty	
		create_title_and_vassal_change = {
			type = swear_fealty
			save_scope_as = change
			add_claim_on_loss = no
		}
		change_liege = {
			liege = scope:sauron
			change = scope:change
		}
		resolve_title_and_vassal_change = scope:change
		
		set_primary_title_to = title:k_morgul
		
		# Barad-Dur duchy handling
		create_title_and_vassal_change = {
			type = swear_fealty
			save_scope_as = thirdchange
			add_claim_on_loss = no
		}
		title:d_barad_dur = {
			every_dejure_vassal_title_holder = {
				limit = {
					NOT = { liege = scope:sauron }
					faith_is_evil = yes
				}
				change_liege = {
					liege = scope:sauron
					change = scope:thirdchange
				}
			}
		}
		resolve_title_and_vassal_change = scope:thirdchange
		
		# Everyone in Mordor swears to Sauron
		hidden_effect = {
			create_title_and_vassal_change = {
				type = swear_fealty
				save_scope_as = secondchange
				add_claim_on_loss = no
			}
			
			title:e_mordor = {
				every_dejure_vassal_title_holder = {
					limit = {
						NOT = { liege = scope:sauron }
						faith_is_evil = yes
						highest_held_title_tier >= tier_duchy
					}
					change_liege = {
						liege = scope:sauron
						change = scope:secondchange
					}
				}
			}
			resolve_title_and_vassal_change = scope:secondchange
		}
		
		# Add Barad-dur
		title:c_barad_dur.title_province = {
			remove_building = wonder_baraddur_02
			add_special_building = wonder_baraddur_03
		}

		# Nazgul innovations 
		culture:ringwraith = {
			add_innovation ?= innovation_machicolations
			add_innovation ?= innovation_bombard
			add_innovation ?= innovation_royal_armory
			add_innovation ?= innovation_standing_armies
			add_innovation ?= innovation_sappers
			add_innovation ?= innovation_plate_armor
			add_innovation ?= innovation_primogeniture
			add_innovation ?= innovation_cranes
			#add_innovation = innovation_noblesse_oblige
			add_innovation ?= innovation_rightful_ownership
			#add_innovation = innovation_ermine_cloaks
			add_innovation ?= innovation_court_officials
			add_innovation ?= innovation_development_04 # Renaissance Thought
			add_innovation ?= innovation_currency_04
			add_innovation ?= innovation_formalized_emissaries
			add_innovation ?= innovation_uruks
			add_innovation ?= innovation_caragor
			add_innovation ?= innovation_olog_hai
		}
		
		# Wtich-King chooses who to play
		trigger_event = {
			id = mordor.1012
			days = 5
		}

		if = { # Handle Nurn if you own it.
			limit = {
				root = { has_title = title:k_nurn }
			}
			scope:sauron = {
				get_title = title:k_nurn
				trigger_event = {
					id = mordor.1013
					days = 8
				}
			}
		}

		scope:sauron = { # Handle Dol Guldur
			trigger_event = {
				id = mordor.1014
				days = 12
			}
		}
	}
	
	after = {
		scope:sauron = { remove_character_flag = unknown_sauron_flag }
		if = {
			limit = { # Major News
				NOT = { has_game_rule = no_news }
			}
			every_player = { #Global News Announcement
				trigger_event = news_event.0042
			}
		}
		if = { # If Maglor is alive, trigger his event chain (depending on lore game rule)
			limit = {
				scope:maglor = {
					is_alive = yes
					is_landed = yes
				}
			}
			scope:maglor = {
				trigger_event = {
					id = lotr_intro_events.0008
					days = 7
				}
			}
		}
	}
}

mordor.1012 = { # Choose who to play as 
	content_source = realms_dlc
	type = character_event
	title = mordor.1012.t
	desc = mordor.1012.desc
	theme = realm
	trigger = { scope:sauron = { is_ai = yes } }

	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = scope:sauron 
		animation = menacing
	}
	immediate = {
		character:lineofsauron =  { save_scope_as = sauron }
	}

	option = { # Continue as the Witch-king
		name = mordor.1012.a 
		add_prestige = minor_prestige_gain
	}
	option = { # Continue as Sauron 
		name = mordor.1012.b 
		set_player_character = scope:sauron
	}
}

mordor.1013 = { # Sauron handles Nurn
	content_source = realms_dlc
	type = character_event
	title = mordor.1013.t
	desc = mordor.1013.desc
	theme = realm
	override_background = { reference = throne_room }
	left_portrait = {
		character = root
		animation = personality_irrational
	}

	immediate = {
		character:nazgul1 = { save_scope_as = witchking }
		ordered_vassal = {
			order_by = current_military_strength
			limit = {
				culture = culture:nurniag
				any_sub_realm_county = {
					kingdom = title:k_nurn
				}
			}
			save_scope_as = nurniag_king
		}
	}

	option = { # Restore the Nurniags
		name = mordor.1013.a 

		scope:nurniag_king = { get_title = title:k_nurn }

		add_prestige = major_prestige_gain
		add_character_modifier = { 
			modifier = nurn_status_quo
			years = 20
		}

		title:k_nurn.holder ?= {
			vassal_contract_set_obligation_level = {
                type = religious_rights
                level = 1
            }
			vassal_contract_set_obligation_level = {
                type = title_revocation_rights
                level = 1
            }
		}

		ai_chance = { base = 100 }
	}
	option = { # Give it to Khorahil
		name = mordor.1013.b 

		character:nazgul5 = { get_title = title:k_nurn }
		title:d_nurn = { # Revoke Nurn duchy
			save_scope_as = landed_title
			holder = {save_scope_as = recipient save_scope_as = recipient }
			root = { save_scope_as = actor }
			revoke_title_interaction_effect = yes
			create_title_and_vassal_change = {
				type = revoked
				save_scope_as = change2
				add_claim_on_loss = yes
			}
			change_title_holder = {
				holder = character:nazgul5 # Give it to Khorahil
				change = scope:change2
			}
			resolve_title_and_vassal_change = scope:change2
		}
		title:c_thaurband = { # Revoke Nurn county
			save_scope_as = landed_title
			holder = {save_scope_as = recipient save_scope_as = recipient }
			root = { save_scope_as = actor }
			revoke_title_interaction_effect = yes
			create_title_and_vassal_change = {
				type = revoked
				save_scope_as = change3
				add_claim_on_loss = yes
			}
			change_title_holder = {
				holder = character:nazgul5 # Give it to Khorahil
				change = scope:change3
			}
			resolve_title_and_vassal_change = scope:change3
		}

		character:nazgul5 = {
			add_character_modifier = {
				modifier = overseer_of_nurn
				years = 20
			}
		}
	}
	option = { # Continue to administer Nurn yourself
		name = mordor.1013.c 
		add_dread = major_dread_gain
	}
	after = {
		trigger_event = {
			id = mordor.1014
			days = 3 
		}
	}
}

mordor.1014 = { # Decide what to do with Dol Guldur
	content_source = realms_dlc
	type = character_event
	title = mordor.1014.t
	desc = mordor.1014.desc
	theme = dread
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:khamul
		animation = marshal 
	}
	trigger = { has_title = title:d_amon_lanc }

	immediate = { 
		character:nazgul2 = { save_scope_as = khamul }
		#character:nazgul7 = { save_scope_as = goldenboy }
		scope:khamul = { 
			every_held_title = {
				limit = {
					empire = title:e_mordor
				}
				add_to_list = khamul_titles
			}
		}
		every_held_title = {
			limit = {
				empire = title:e_greenwood
			}
			add_to_list = dol_guldur_titles
		}
	} 
	option = { # Send Khamûl to Dol Guldur
		name = mordor.1014.a 
		every_in_list = { # Sauron gives everything in Greenwood to Khamul
			list = dol_guldur_titles
			create_title_and_vassal_change = {
				type = returned
				save_scope_as = dol_guldur_change
			}
			change_title_holder = {
				holder = scope:khamul
				change = scope:dol_guldur_change
			}
			resolve_title_and_vassal_change = scope:dol_guldur_change
		}
		every_in_list = { # Sauron takes all titles in Mordor from Khamul
			list = khamul_titles
			create_title_and_vassal_change = {
				type = returned
				save_scope_as = k_change
			}
			change_title_holder = {
				holder = root
				change = scope:k_change
			}
			resolve_title_and_vassal_change = scope:k_change
		}
		# People around Dol Guldur swear to Khamul
		title:d_amon_lanc = {
			every_in_de_jure_hierarchy = {
				limit = {
					tier = tier_county
					holder ?= { 
						is_ai = yes
						faith_is_evil = yes
					}
				}
				holder = {
					create_title_and_vassal_change = {
						type = swear_fealty							
						save_scope_as = change
						add_claim_on_loss = no
					}
					change_liege = {
						liege = scope:khamul
						change = scope:change
					}
					resolve_title_and_vassal_change = scope:change
				}
			}
		}
		trigger_event = {
			id = mordor.1015
			days = 10
		}
		ai_chance = { base = 100 }
	}
	option = { # Keep Dol Guldur for yourself
		name = mordor.1014.b
		title:d_amon_lanc = {
			every_in_de_jure_hierarchy = {
				limit = {
					tier = tier_county
					holder ?= { 
						is_ai = yes
						faith_is_evil = yes
						is_independent_ruler = yes
					}
				}
				holder = {
					create_title_and_vassal_change = {
						type = swear_fealty
						save_scope_as = change
						add_claim_on_loss = no
					}
					change_liege = {
						liege = root
						change = scope:change
					}
					resolve_title_and_vassal_change = scope:change
				}
			}
		}
	}
}

mordor.1015 = { # Decide if Khamûl should be independent
	content_source = realms_dlc
	type = character_event
	title = mordor.1015.t
	desc = mordor.1015.desc
	theme = crown
	left_portrait = {
		character = root
		animation = inspect_weapon
	}
	right_portrait = {
		character = scope:khamul
		animation = war_defender 
	}
	immediate = { 
		character:nazgul2 = { save_scope_as = khamul }
	} 
	option = { # Give Khâmul free reign
		name = mordor.1015.a 
		scope:khamul = {
			get_title = title:k_amon_lanc
			add_short_term_gold = 200
		}	
		title:k_amon_lanc = { # Everyone in Dol Guldur swears to him
			every_in_de_jure_hierarchy = {
				limit = {
					tier = tier_duchy
					holder ?= { 
						is_ai = yes
						faith_is_evil = yes
						is_nazgul = no
						is_independent_ruler = yes
					}
				}
				holder = {
					create_title_and_vassal_change = {
						type = swear_fealty
						save_scope_as = change
						add_claim_on_loss = no
					}
					change_liege = {
						liege = scope:khamul
						change = scope:change
					}
					resolve_title_and_vassal_change = scope:change
				}
			}
		}
		scope:khamul = {
			create_title_and_vassal_change = {
				type = independency
				save_scope_as = firstchange
				add_claim_on_loss = yes
			}
			becomes_independent = {
				change = scope:firstchange
			}
			resolve_title_and_vassal_change = scope:firstchange
		}
		character:nazgul2 = {
			start_tributary = {
				contract_group = tributary_subjugated
				suzerain = character:lineofsauron
			}
		}
		every_county_in_region = {
			region = middleearth_west_rhovanion
			limit = {
				holder = {
					is_elf = yes
				}
			}
			holder = {
				trigger_event = mordor.1016 # Elves are informed of the new threat
			}
		}
		ai_chance = { base = 100 }
	}
	option = { # Give Khâmul free reign & play as him
		name = mordor.1015.b 
		scope:khamul = {
			get_title = title:k_amon_lanc
			add_short_term_gold = 200
		}	
		title:k_amon_lanc = {
			every_in_de_jure_hierarchy = {
				limit = {
					tier = tier_duchy
					holder ?= { 
						is_ai = yes
						faith_is_evil = yes
						is_nazgul = no
						is_independent_ruler = yes
					}
				}
				holder = {
					create_title_and_vassal_change = {
						type = swear_fealty
						save_scope_as = change
						add_claim_on_loss = no
					}
					change_liege = {
						liege = scope:khamul
						change = scope:change
					}
					resolve_title_and_vassal_change = scope:change
				}
			}
		}
		scope:khamul = {
			create_title_and_vassal_change = {
				type = independency
				save_scope_as = firstchange
				add_claim_on_loss = yes
			}
			becomes_independent = {
				change = scope:firstchange
			}
			resolve_title_and_vassal_change = scope:firstchange
		}
		character:nazgul2 = {
			start_tributary = {
				contract_group = tributary_subjugated
				suzerain = character:lineofsauron
			}
		}
		set_player_character = scope:khamul

		every_county_in_region = {
			region = middleearth_west_rhovanion
			limit = {
				holder = {
					is_elf = yes
				}
			}
			holder = {
				trigger_event = mordor.1016 # Elves are informed of the new threat
			}
		}
	}
	option = { # Keep Khamûl as your vassal
		name = mordor.1015.c
		custom_tooltip = mordor.1015.c.tt
		add_prestige = medium_prestige_gain
		add_dread = medium_dread_gain
	}
}

mordor.1016 = { # Elves informed of the new threat in Dol Guldur
	content_source = realms_dlc
	type = character_event
	title = mordor.1016.t
	desc = mordor.1016.desc
	theme = dread
	left_portrait = {
		character = root
		animation = shock
	}
	right_portrait = {
		character = scope:khamul
		animation = menacing 
	}
	immediate = { 
		character:nazgul2 = { save_scope_as = khamul }
	} 
	cooldown = { days = 7 }
	
	option = { # Dark times are upon us.
		name = mordor.1016.a 
	}
}

# Necromancer events
mordor.1022 = { # Elves uncover the truth behind the Necromancer
	content_source = realms_dlc
	type = character_event
	title = mordor.1022.t
	desc = mordor.1022.desc
	theme = dread
	left_portrait = {
		character = root
		animation = shock
	}
	right_portrait = {
		character = scope:sauron
		animation = menacing 
	}
	immediate = { 
		character:lineofsauron = { save_scope_as = sauron }
	} 
	option = { # We must vanquish this evil 
		name = mordor.1022.a 
	}
}

mordor.1023 = { # I am so back. ~Sauron
	content_source = realms_dlc
	type = character_event
	title = mordor.1023.t
	desc = mordor.1023.desc
	theme = dread
	left_portrait = {
		character = root
		animation = menacing
	}
	option = { # I am SO back.
		name = mordor.1023.a 
	}
}

mordor.1024 = { # Sauron reveals himself
	content_source = realms_dlc
	type = character_event
	title = mordor.1024.t
	desc = {
		first_valid = {
		    triggered_desc = {
		        trigger = {
					faith_is_evil = yes
		        }
		        desc = mordor.1024.desc.evil
		    }
		}
		desc = mordor.1024.desc.good
	}
	theme = dread
	left_portrait = {
		character = root
		triggered_animation = {
			trigger = {
				faith_is_evil = yes
			}
			animation = happiness
		}
		triggered_animation = {
			trigger = {
				faith_is_evil = no
			}
			animation = shock
		}
	}
	right_portrait = {
		character = scope:sauron
		animation = menacing 
	}
	immediate = { 
		character:lineofsauron = { save_scope_as = sauron }
	} 
	option = { # We must vanquish this evil 
		name = mordor.1024.a 
	}
}


### Watch on Mordor Events ###
mordor.2000 = { # Watch on Mordor, Orc creates duchy in k_gorgoroth
	content_source = realms_dlc
	type = character_event
	title = mordor.2000.t
	desc = mordor.2000.desc
	theme = dread
	left_portrait = {
		character = root
		animation = menacing
	}
	right_portrait = {
		character = scope:chancellor
		animation = scheme
	}
	immediate = {
		if = {
			limit = {
				exists = cp:councillor_chancellor
			}
			cp:councillor_chancellor = { save_scope_as = chancellor }
		}
		else = {
			random_courtier_or_guest = { save_scope_as = chancellor }
		}
		hidden_effect = {
			every_courtier_or_guest = {
				add_opinion = {
					modifier = impressed_opinion
					opinion = 25
					target = root
				}
			}
		}
	}
	option = { # I'm telling everyone!
		name = mordor.2000.a
		custom_tooltip = mordor.2000.a.tt
		add_prestige = medium_prestige_gain
		add_dread = medium_dread_gain
		stress_impact = {
			ambitious = minor_stress_impact_loss
			gregarious = minor_stress_impact_loss
			humble = minor_stress_impact_gain
			content = minor_stress_impact_gain
			temperate = minor_stress_impact_gain
			lazy = minor_stress_impact_gain
		}
		duel = {
			skill = diplomacy
			value = medium_skill_rating
			70 = {
				desc = mordor.2000.a.success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3
				}
                send_interface_toast = {
					left_icon = ROOT
					title = mordor.2000.a.success.toast
					every_independent_ruler = {
						limit = {
							capital_county.kingdom ?= title:k_gorgoroth
							NOT = {
								this = root
							}
							is_orc = yes
						}
						add_opinion = {
							modifier = impressed_opinion
							opinion = 10
							target = root
						}
					}
					spawn_army = {
						uses_supply = no
						levies = 0
						name = soldier_orcs_of_mordor
						men_at_arms = {
							type = orc_warriors
							stacks = 5
						}
						location = capital_province
					}
				}
			}
			30 = {
				desc = mordor.2000.a.failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3
				}  
                send_interface_toast = {
					left_icon = ROOT
					title = mordor.2000.a.failure.toast
					every_independent_ruler = {
						limit = {
							capital_county.kingdom ?= title:k_gorgoroth
							NOT = {
								this = root
							}
							is_orc = yes
						}
						add_opinion = {
							modifier = angry_opinion
							opinion = -20
							target = root
						}
					}
					spawn_army = {
						uses_supply = no
						levies = 100
						name = scum_of_mordor
						men_at_arms = {
							type = orc_rabble
							stacks = 3
						}
						location = capital_province
					}
				}
			}
        }
		ai_chance = {
			base = 10
			modifier = {
				add = 10
				has_trait = greedy
			}
			modifier = {
				add = 10
				has_trait = ambitious
			}
			modifier = {
				add = 10
				has_trait = gregarious
			}
		}
		root = {
			save_scope_as = watch_on_mordor_target
		}
		title:d_watch_on_mordor.holder = {
			trigger_event = {
				id = mordor.2001
				days = { 5 7 } # change to 30 60
			}
		}
	}
	option = { # I'm telling no-one...
		name = mordor.2000.b
		add_prestige = minor_prestige_loss # Who are you if you don't tell people? Nobody deserving of fame...
		add_dread = minor_dread_loss # Who are you if you don't tell people? A coward...
		stress_impact = {
			ambitious = minor_stress_impact_gain
			gregarious = minor_stress_impact_gain
			humble = minor_stress_impact_loss
			humble = minor_stress_impact_loss
			content = minor_stress_impact_loss
			temperate = minor_stress_impact_loss
			lazy = minor_stress_impact_loss
		}
		spawn_army = {
			uses_supply = no
			levies = 500
			name = rabble_of_mordor
			men_at_arms = {
				type = orc_rabble
				stacks = 5
			}
			location = capital_province
		}
		ai_chance = {
			base = 10
			modifier = {
				add = 10
				has_trait = humble
			}
			modifier = {
				add = 10
				has_trait = content
			}
			modifier = {
				add = 10
				has_trait = temperate
			}
			modifier = {
				add = 10
				has_trait = lazy
			}
		}
	}
}
 
mordor.2001 = { # Watch on Mordor, Watch is notified
	type = character_event
	title = mordor.2001.t
	desc = mordor.2001.desc
	theme = dread
	trigger = { 
		root = {
			faith_is_good = yes
			is_orc = no
		}	
	}
	left_portrait = {
		character = root
		animation = shock
	}
	right_portrait = {
		character = scope:watch_on_mordor_target
		animation = threatening
	}
	option = { # Gondor Help Help Help Help Help
		name = mordor.2001.a
		start_travel_plan = {
			destination = root.liege.capital_county.title_province
			travel_with_domicile = no
			return_trip = yes
			players_use_planner = no
			on_arrival_event = mordor.2002
			on_arrival_destinations = all_but_last
		}
		custom_tooltip = mordor.2001.a.tt
		ai_chance = {
			base = 10
			modifier = {
				add = 20
				has_trait = craven
			}
			modifier = {
				add = 10
				has_trait = trusting
			}
			modifier = {
				add = 10
				has_trait = humble
			}
		}
	}
	option = { # Let us stop them soon
		name = mordor.2001.b
		add_prestige = medium_prestige_gain
		duel = {
			skill = martial
			value = medium_skill_rating
			60 = {
				desc = mordor.2001.b.success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3
				}
				every_ruler = {
					limit = {
						capital_county.empire ?= title:e_gondor
						NOT = {
							this = root
						}
						is_orc = no
						faith_is_good = yes
					}
					hidden_effect = {
						add_opinion = {
							modifier = impressed_opinion
							opinion = 10
							target = root
						}
					}
				}
			}
			40 = { # Nothing happens
				desc = mordor.2001.b.failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3
				}
			}
        }
		ai_chance = {
			base = 10
			modifier = {
				add = 20
				has_trait = brave
			}
			modifier = {
				add = 10
				has_trait = calm
			}
			modifier = {
				add = 10
				has_trait = diligent
			}
		}
	}
	option = { # We will kill them now!
		name = mordor.2001.c
		add_prestige = major_prestige_gain
		add_piety = minor_piety_gain
		duel = {
			skill = martial
			value = medium_skill_rating
			70 = {
				desc = mordor.2001.c.success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3
				}
                every_ruler = {
					limit = {
						capital_county.empire ?= title:e_gondor
						NOT = {
							this = root
						}
						is_orc = no
						faith_is_good = yes
					}
					hidden_effect = {
						add_opinion = {
							modifier = impressed_opinion
							opinion = 25
							target = root
						}
					}
				}
			}
			30 = { # Nothing happens
				desc = mordor.2001.c.failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -2
				}
			}
        }
		start_war = {
			casus_belli = watch_on_mordor_destroy_duchy
			target = scope:watch_on_mordor_target
			target_title = scope:watch_on_mordor_target.primary_title
		}
		ai_chance = {
			base = 10
			modifier = {
				add = 20
				has_trait = wrathful
			}
			modifier = {
				add = 10
				has_trait = ambitious
			}
			modifier = {
				add = 5
				has_trait = stubborn
			}
			modifier = {
				add = 5
				has_trait = zealous
			}
		}
		scope:watch_on_mordor_target = {
			trigger_event = {
				id = mordor.2006
				days = 1
			}
		}
	}
}

mordor.2002 = { # Watch on Mordor, Watch Pleads Case
	type = character_event
	title = mordor.2002.t
	desc = mordor.2002.desc
	theme = gondor
	override_background = {
		reference = minas_tirith
	}
	trigger = { 
		root = {
			faith_is_good = yes
			is_orc = no
		}	
	}
	left_portrait = {
		character = root
		animation = admiration
	}
	right_portrait = {
		character = scope:gondor_liege
		animation = war_defender
	}
	lower_center_portrait = scope:watch_on_mordor_target
	immediate = { 
		root.liege = { save_scope_as = gondor_liege }
	} 
	option = { # Gondor Help Help Help Help Help
		name = mordor.2002.a
		scope:gondor_liege = {
			trigger_event = {
				id = mordor.2003
				days = 1
			}
		}
	}
}

mordor.2003 = { # Watch on Mordor, Gondor Listens
	type = character_event
	title = mordor.2003.t
	desc = mordor.2003.desc
	theme = gondor
	override_background = {
		reference = minas_tirith
	}
	trigger = { 
		root = {
			faith_is_good = yes
			is_orc = no
		}	
	}
	left_portrait = {
		character = root
		animation = war_defender
	}
	right_portrait = {
		character = scope:lord_commander
		animation = admiration
	}
	lower_center_portrait = scope:watch_on_mordor_target
	immediate = { 
		title:d_watch_on_mordor.holder = { save_scope_as = lord_commander }
	} 
	option = { # Gondor Hate You! Go and Fail and Die!
		name = mordor.2003.a
		scope:lord_commander = {
			add_character_flag = gondor_sends_watch_no
			add_opinion = {
				modifier = disappointed_opinion
				opinion = -25
				target = root
			}
		}
		every_vassal = {
			limit = { has_vassal_stance = glory_hound }
			custom = every_glory_hound_vassal
			add_opinion = {
				modifier = disappointed_opinion
				target = root
				opinion = -25
			}
		}
		every_vassal = {
			limit = { has_vassal_stance = belligerent }
			custom = every_belligerent_vassal
			add_opinion = {
				modifier = disappointed_opinion
				target = root
				opinion = -25
			}
		}
		every_vassal = {
			limit = { has_vassal_stance = parochial }
			custom = every_parochial_vassal
			add_opinion = {
				modifier = approving_opinion
				target = root
				opinion = 15
			}
		}
		every_vassal = {
			limit = { has_vassal_stance = courtly }
			custom = every_courtly_vassal
			add_opinion = {
				modifier = approving_opinion
				target = root
				opinion = 15
			}
		}
		ai_chance = {
			base = 60
			modifier = {
				add = 20
				has_trait = craven
			}
			modifier = {
				add = 10
				has_trait = lazy
			}
			modifier = {
				add = 10
				has_trait = fickle
			}
		}
		scope:lord_commander = {
			trigger_event = {
				id = mordor.2004
				days = 1
			}
		}
	}
	option = { # Gondor Help You... just... a little
		name = mordor.2003.b
		remove_short_term_gold = 50
		scope:lord_commander = {
			add_character_flag = gondor_sends_watch_troop
			add_opinion = {
				modifier = approving_opinion
				opinion = 10
				target = root
			}
		}
		every_vassal = {
			limit = { has_vassal_stance = glory_hound }
			custom = every_glory_hound_vassal
			add_opinion = {
				modifier = approving_opinion
				target = root
				opinion = 10
			}
		}
		every_vassal = {
			limit = { has_vassal_stance = belligerent }
			custom = every_belligerent_vassal
			add_opinion = {
				modifier = approving_opinion
				target = root
				opinion = 10
			}
		}
		every_vassal = {
			limit = { has_vassal_stance = parochial }
			custom = every_parochial_vassal
			add_opinion = {
				modifier = disappointed_opinion
				target = root
				opinion = -20
			}
		}
		every_vassal = {
			limit = { has_vassal_stance = courtly }
			custom = every_courtly_vassal
			add_opinion = {
				modifier = disappointed_opinion
				target = root
				opinion = -20
			}
		}
		scope:lord_commander = {
			spawn_army = {
				uses_supply = no
				inheritable = no
				name = watch_auxiliaries
				levies = 200
				men_at_arms = {
					type = gondorian_bowmen
					stacks = 2
				}
				men_at_arms = {
					type = gondorian_footmen
					stacks = 2
				}
				location = capital_province
			}
		}
		ai_chance = {
			base = 10
			modifier = {
				add = 20
				has_trait = temperate
			}
			modifier = {
				add = 10
				has_trait = just
			}
			modifier = {
				add = 10
				has_trait = diligent
			}
		}
		scope:lord_commander = {
			trigger_event = {
				id = mordor.2004
				days = 1
			}
		}
	}
	option = { # Gondor Help a lot!
		name = mordor.2003.c
		scope:lord_commander = {
			add_opinion = {
				modifier = impressed_opinion
				opinion = 25
				target = root
			}
		}
		every_vassal = {
			limit = { has_vassal_stance = glory_hound }
			custom = every_glory_hound_vassal
			add_opinion = {
				modifier = impressed_opinion
				target = root
				opinion = 25
			}
		}
		every_vassal = {
			limit = { has_vassal_stance = belligerent }
			custom = every_belligerent_vassal
			add_opinion = {
				modifier = impressed_opinion
				target = root
				opinion = 25
			}
		}
		every_vassal = {
			limit = { has_vassal_stance = parochial }
			custom = every_parochial_vassal
			add_opinion = {
				modifier = disappointed_opinion
				target = root
				opinion = -40
			}
		}
		every_vassal = {
			limit = { has_vassal_stance = courtly }
			custom = every_courtly_vassal
			add_opinion = {
				modifier = disappointed_opinion
				target = root
				opinion = -40
			}
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 10
				has_trait = brave
			}
			modifier = {
				add = 10
				has_trait = wrathful
			}
			modifier = {
				add = 5
				has_trait = vengeful
			}
			modifier = {
				add = 5
				has_trait = zealous
			}
		}
		scope:lord_commander = {
			trigger_event = {
				id = mordor.2005
				days = 1
			}
		}
	}
}

mordor.2004 = { # Watch on Mordor, Watch has army or not
	type = character_event
	title = mordor.2004.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = gondor_sends_watch_no
				}
				desc = mordor.2004.desc.no_troop
			}		
			triggered_desc = {
				trigger = {
					has_character_flag = gondor_sends_watch_troop
				}
				desc = mordor.2004.desc.troop
			}			
		}
		desc = mordor.2004.desc
	}
	theme = gondor
	override_background = {
		reference = minas_tirith
	}
	left_portrait = {
		character = root
		animation = thinking
	}
	right_portrait = {
		character = scope:watch_on_mordor_target
		animation = threatening
	}
	immediate = { 
		root.liege = { save_scope_as = gondor_liege }
	} 
	option = { # Gondor left us now
		name = mordor.2004.a
		add_prestige = medium_prestige_gain
		if = {
			limit = {
				has_character_flag = gondor_sends_watch_no
			}
			remove_character_flag = gondor_sends_watch_no
		}
		if = {
			limit = {
				has_character_flag = gondor_sends_watch_troop
			}
			remove_character_flag = gondor_sends_watch_troop
		}
	}
}

mordor.2005 = { # Watch on Mordor, Watch will Fight!
	type = character_event
	title = mordor.2005.t
	desc = mordor.2005.desc
	theme = gondor
	override_background = {
		reference = minas_tirith
	}
	left_portrait = {
		character = root
		animation = aggressive_sword
	}
	right_portrait = {
		character = scope:watch_on_mordor_target
		animation = threatening
	}
	lower_center_portrait = scope:gondor_liege
	immediate = { 
		root.liege = { save_scope_as = gondor_liege }
	} 
	option = { # Gondor fight!
		name = mordor.2005.a
		add_prestige = major_prestige_gain
		add_piety = minor_piety_gain
		start_war = {
			casus_belli = watch_on_mordor_destroy_duchy
			target = scope:watch_on_mordor_target
			target_title = scope:watch_on_mordor_target.primary_title
		}
		random_character_war = {
			limit = {
				using_cb = duchy_conquest_cb
				primary_attacker = root
				primary_defender = scope:watch_on_mordor_target
			}
			add_attacker = scope:gondor_liege
		}
		scope:watch_on_mordor_target = {
			trigger_event = {
				id = mordor.2007
				days = 1
			}
		}
	}
}

mordor.2006 = { # Orc receives notice about Watch fighting w/o Gondor
	type = character_event
	title = mordor.2006.t
	desc = mordor.2006.desc
	theme = gondor
	override_background = {
		reference = minas_tirith
	}
	left_portrait = {
		character = root
		animation = thinking
	}
	right_portrait = {
		character = scope:lord_commander
		animation = threatening
	}
	immediate = { 
		title:d_watch_on_mordor.holder = { save_scope_as = lord_commander }
	} 
	option = { # Let them come! We will kill them...
		name = mordor.2006.a
	}
}

mordor.2007 = { # Orc receives notice about Watch fighting w/ Gondor
	type = character_event
	title = mordor.2007.t
	desc = mordor.2007.desc
	theme = gondor
	override_background = {
		reference = minas_tirith
	}
	left_portrait = {
		character = root
		animation = shock
	}
	right_portrait = {
		character = scope:lord_commander
		animation = aggressive_sword
	}
	lower_center_portrait = scope:gondor_liege
	immediate = { 
		title:d_watch_on_mordor.holder = { save_scope_as = lord_commander }
		root.liege = { save_scope_as = gondor_liege }
	}
	option = { # Fuck!
		name = mordor.2007.a
	}
}
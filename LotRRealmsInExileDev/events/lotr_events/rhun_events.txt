namespace = rhun

### Rhûn Events ###
#	rhun.0010 - Introduction to the Logath I.
#	rhun.0011 - Introduction to the Logath II.
#	rhun.0012 - Hûz starting event

rhun.0010 = { # Introduction to the Logath II.
	title = rhun.0010.t
	desc = rhun.0010.desc
	theme = realm
	right_portrait = {
		character = root
		animation = admiration
	}
	override_background = { event_background = wilderness_forest_pine }
	trigger = {
		is_ai = no
		is_available_even_at_war_adult = yes
		NOT = { has_character_flag = had_event_lotr_yearly_rhun_0011 }
		has_culture = culture:logath
		capital_province = { geographical_region = middleearth_rhun_dorwinion }
	}
	immediate = { add_character_flag = { flag = had_event_lotr_yearly_rhun_0011 } }
	option = { # The people of the vine now call for our amazonians.
		name = rhun.0010.a
		root.capital_county = {
			add_county_modifier = {
				modifier = dorwinion_foederati_modifier
				years = 10
			}
		}
		culture:logath = {
			change_cultural_acceptance = {
				target = culture:dorwinionrim
				value =	5
			}
		}
#		random_neighboring_top_liege_realm_owner = { # Send Dorwinion Kingdom a small Easterling "foederati" army.
#			limit = {
#				is_at_war_with_liege = no
#				AND = {
#					has_title = title:k_dorwinion
#					culture:dorwinionrim
#				}
#			}
#			trigger_event = {
#				id = rhun.0012
#				days = { 10 50 }
#			}
#		}
	}
	option = { # What can the short men offer us for livestock.
		name = rhun.0010.b
		root.capital_county = {
			add_county_modifier = {
				modifier = dwarven_breadbasket_modifier
				years = 10
			}
		}
#		culture:logath = {
#			change_cultural_acceptance = {
#				target = culture:longbeards
#				value =	3
#			}
#		}
	}
}
rhun.0011 = { # Introduction to the Logath III.
	title = rhun.0011.t
	desc = rhun.0011.desc
	theme = realm
	right_portrait = {
		character = root
		animation = admiration
	}
	override_background = { event_background = wilderness_forest_pine }
	trigger = {
		is_ai = no
		is_available_even_at_war_adult = yes
		NOT = { has_character_flag = had_event_lotr_yearly_rhun_0011 }
		has_culture = culture:logath
		capital_province = { geographical_region = middleearth_rhun_dorwinion }
	}
	immediate = { add_character_flag = { flag = had_event_lotr_yearly_rhun_0011 } }
	option = { # The courtly women of Dale trade items of great beauty.
		name = rhun.0011.a
		root.capital_county = {
			add_county_modifier = {
				modifier = dale_trade_modifier
				years = 10
			}
		}
		culture:logath = {
			change_cultural_acceptance = {
				target = culture:dalemen
				value =	3
			}
		}
	}
	option = { # Migration is in our blood, assemble our great Easterling host!
		name = rhun.0011.b
		root.capital_county = {
			add_county_modifier = {
				modifier = great_easterling_host_modifier
				years = 10
			}
		}
		add_character_modifier = {
			modifier = formed_great_easterling_host_modifier
			years = 10
		}
	}
}
rhun.0012 = { # Hûz starting event
	title = rhun.0012.t
	desc = rhun.0012.desc
	theme = family
	left_portrait = {
		character = root
		animation = shame
	}
	right_portrait = {
		character = character:lineofszrel1
		animation = pain
	}

	immediate = { #
		if = {
		limit = {is_ai = yes}
		get_title = title:d_dacranamel
		add_gold = 333
		add_dread = 100
		add_prestige = 1200
		#spawn_army = {		 
				#uses_supply = no
				#inheritable = yes
				#name = Loke_Rim_Host
				#men_at_arms = {
					#type = easterling_pikemen
					#stacks = 4
				#}
				#men_at_arms = {
					#type = loke_innas_rim
					#stacks = 10
				#}
				location = capital_province
			#}
		}
		add_unpressed_claim = title:c_palcana
		add_unpressed_claim = title:c_rhonada
		add_unpressed_claim = title:c_martakend
		add_unpressed_claim = title:c_serverna
		add_unpressed_claim = title:c_dargeca
	}	
	
	option = { # 
		name = rhun.0012.a
		custom_tooltip = rhun.0012.a.tt
		trigger_event = {
			id = rhun.0013
			days = 0
		}
	}

	option = { # 
		name = rhun.0012.b
		custom_tooltip = rhun.0012.b.tt
		character:lineofzhamian3 = {
			trigger_event = {
				id = rhun.0014	
				years = 14
			}	
		}	
	}
}

rhun.0013 = { # Hûz starting event part 2
	title = rhun.0013.t
	desc = rhun.0013.desc
	theme = learning_scholarship_focus
	override_background = corridor_night
	left_portrait = {
		character = root
		animation = lantern
	}
	right_portrait = {
		character = character:lineofhuz181
		animation = chancellor
	}
	option = { # 
		name = rhun.0013.a
		custom_tooltip = rhun.0013.a.tt
		character:lineofzhamian3 = {
			trigger_event = {
				id = rhun.0014	
				years = 14
			}	
		}	
	}
}

rhun.0014 = { # Zhamik gotta die of death
	type = character_event
	hidden = yes
    option = { #
         death = yes
	}	
 }

rhun.0015 = { # Dorwinion taken
	type = character_event
	title = rhun.0015.t
	desc = rhun.0015.desc
	theme = dread
	#override_background = corridor_night
	left_portrait = {
		character = root
		animation = laugh
	}
	right_portrait = {
		character = title:d_folyavuld.holder
		animation = beg
	}

	immediate = {
		get_title = title:c_szrel_kain
	}

	option = { # maintain local elites, yet force them to help fund the seat of tyrants
		name = rhun.0015.a
		custom_tooltip = rhun.0015.a.tt
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.

			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}

			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}

			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 34
			}
		}
		add_gold = 800
		title:d_folyavuld.holder = {
                vassal_contract_set_obligation_level = {
                    type = title_revocation_rights
                    level = 1
                }
                vassal_contract_set_obligation_level = {
                    type = religious_rights 
                    level = 1
               }
            #   vassal_contract_set_obligation_level = {
            #       type = special_contract_scutage 
            #       level = 1
            #   }
				vassal_contract_set_obligation_level = {
                    type = special_contract 
                    level = 1
                }
            }
			title:d_folyavuld.holder = { get_title = title:k_dorwinion }
		trigger_event = {
			id = rhun.0016	
			years = 5
		}
	}			
	option = { # dismantle dorwinion power structure
	name = rhun.0015.b
	custom_tooltip = rhun.0015.b.tt
	ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.

			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 0
			}

			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 30
			}

			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 66
			}
		}
	remove_short_term_gold = 150						
	add_dread = 100
	hidden_effect = {
	get_title = title:c_riavod	get_title = title:c_carasanor	get_title = title:c_urusvuld get_title = title:c_econiva 	get_title = title:c_aldenavi		get_title = title:c_caradsurga		get_title = title:c_rinnavod			get_title = title:c_ilanin		get_title = title:c_eldrast		get_title = title:c_gyula		get_title = title:c_bennek		get_title = title:c_yselvod			get_title = title:c_ost_gailnen		get_title = title:c_minovuld		get_title = title:c_aklerina		get_title = title:c_aldanira		get_title = title:c_caras_sant	get_title = title:c_arasant		get_title = title:c_kelperia		get_title = title:c_aldena	get_title = title:c_pargeltir		get_title = title:c_eryn_gwinion		get_title = title:c_saelin		get_title = title:c_maribor		get_title = title:c_lugos		get_title = title:c_visegrod		get_title = title:c_maethgannen		get_title = title:c_ladhirolk		get_title = title:c_kardavan		get_title = title:c_iaurgobel	get_title = title:c_kelperia		get_title = title:c_aldena	get_title = title:c_pargeltir		get_title = title:c_eryn_gwinion		get_title = title:c_saelin		get_title = title:c_maribor		get_title = title:c_lugos		get_title = title:c_visegrod		get_title = title:c_maethgannen		get_title = title:c_ladhirolk		get_title = title:c_kardavan		get_title = title:c_dannavuld	
	destroy_title = title:k_dorwinion
	}
	trigger_event = {
		id = rhun.0016	
		months = 1
		}	
	}
}
	
rhun.0016 = {	#Sauron influences Huz-Margoz to attack Nelornieth
	title = rhun.0016.t
	desc =  rhun.0016.desc
	theme = dread
	override_background = dungeon
	left_portrait = {
		character = root
		animation = spymaster
	}
	#right_portrait = {
		#character = character:lineofsauron
		#animation = chancellor
	#}
	option = { # enables decision to cleanse nelornieth
		name = rhun.0016.a
		custom_tooltip = rhun.0016.a.tt
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.

			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}

			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}

			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 34
			}
		}
		add_character_flag = huz_learn_of_nelornieth
		trigger = {
			has_trait = zealous
		}
		trigger_event = {
		id = rhun.0017	
		}	
	}
	option = { # Flee from the malign presense and fail the quest chain
		name = rhun.0016.b
		custom_tooltip = rhun.0016.b.tt
		add_stress = 125	
		add_trait = craven
	}	
}

rhun.0017 = {	#Sauron influences Huz-Margoz to attack Nelornieth part 2
	title = rhun.0017.t
	desc = rhun.0017.desc
	theme = mental_break
	override_background = fangorn
	left_portrait = {
		character = root
		animation = lunatic
	}
	#right_portrait = {
		#character = character:lineofsauron
		#animation = chancellor
	#}
	option = { # enables decision to cleanse nelornieth
		name = rhun.0017.a
		add_trait = zealous
		custom_tooltip = rhun.0017.a.tt
		add_unpressed_claim = title:k_nelornieth
		hidden_effect = {
			make_claim_strong = title:k_nelornieth
		}
		primary_heir = { 
			add_character_flag = huz_learn_of_nelornieth
			add_unpressed_claim = title:k_nelornieth
		}	
	}	
	after = {
		add_stress = 69
	}
}


rhun.0018 = { # Check on Szreldor owning Dale
	hidden = yes
	option = {
		if = {
			limit = { completely_controls = title:d_dalelands}
			title:k_dale= { set_de_jure_liege_title = title:e_szreldor }
			title:k_logathavuld = { set_de_jure_liege_title = title:e_szreldor }
			}
		else_if = {
			limit = { 
				NOT = { completely_controls = title:d_dalelands} 
			}
			title:e_szreldor.holder = {
				trigger_event = { # Check status on Adunaim conquests
					id = rhun.0018
					years = 1
				}
			}
		}
	}
}


rhun.0019 = { # Check on Szreldor owning Dale
	hidden = yes
	option = {
		if = {
			limit = { completely_controls = title:d_nimbregardh}
			title:k_nelornieth= { set_de_jure_liege_title = title:e_szreldor }
			}
		else_if = {
			limit = { 
				NOT = { completely_controls = title:d_nimbregardh} 
			}
			title:e_szreldor.holder = {
				trigger_event = { # Check status on Adunaim conquests
					id = rhun.0019
					years = 1
				}
			}
		}
	}
}


rhun.0021 = { #check on szreldor owning nelornieth
	hidden = yes
	option = {
		title:k_nelornieth = { set_de_jure_liege_title = title:e_szreldor }
	}
}

rhun.0022 = { #ai forms szreldor after taking either nelornieth or dale
	hidden = yes
	option = {
	if = {
		limit = {is_ai = yes}
		give_nickname = nick_gilded_star
		get_title = title:e_szreldor
		set_house = character:lineofszrel1.house
		title:k_nelornieth = { set_de_jure_liege_title = title:e_szreldor }
		title:k_dale= { set_de_jure_liege_title = title:e_szreldor }
		title:k_logathavuld = { set_de_jure_liege_title = title:e_szreldor }
		title:k_dorwinion = { set_de_jure_liege_title = title:e_szreldor }
		title:k_brownlands = { set_de_jure_liege_title = title:e_szreldor }
		title:k_usrievar = { set_de_jure_liege_title = title:e_szreldor }
		title:k_south_rhovanion = { set_de_jure_liege_title = title:e_szreldor }	
		title:k_ehwathrumavuld = { set_de_jure_liege_title = title:e_szreldor }
		set_primary_title_to = title:e_szreldor
		destroy_title = title:e_golden_realm_rhun
		change_government = feudal_government
		}
	}	
}


rhun.0023 = { # Hûz takes "decision_margoz_prepare_easterling_host" to prepare for war on Dorwinion
	title = rhun.0023.t
	desc = rhun.0023.desc
	theme = claim_throne_scheme
	#override_background = corridor_night
	left_portrait = {
		character = root
		animation = 	chess_certain_win
	}
	right_portrait = {
		character = title:k_dorwinion.holder
		animation = 	stress
	}
	option = { # 
		name = rhun.0023.a
		custom_tooltip = rhun.0023.a.tt
		#character:lineofzhamian3 = {
			#trigger_event = {
				#id = rhun.0014	
				#years = 14
			#}	
		#}	
	}
}
namespace = lotr_house_customizer

# Event that fires on game start to tell you the instructions
lotr_house_customizer.0001 = {
	type = character_event
	title = lotr_house_customizer.0001.t
	desc = lotr_house_customizer.0001.desc

	theme = family

	override_background = { reference = physicians_study }

	right_portrait = {
		character = root
		animation = throne_room_writer
	}

	immediate = { play_music_cue = "mx_cue_succession" }

	#I want to select an extinct house to play as.
	option = {
		name = lotr_house_customizer.0001.a
		# Fire the Extinct House List Selection
		if = {
			limit = {
				OR = {
					is_orc = yes
					is_hobbit = yes
				}
			}
			trigger_event = lotr_house_customizer.0003
		}
		else = { trigger_event = lotr_house_customizer.0002 }
	}

	#I want to select a living house to play as.
	option = { name = lotr_house_customizer.0001.b }
}

#Region Select for Extinct Houses
lotr_house_customizer.0002 = {
	type = character_event
	title = lotr_house_customizer.0002.t
	desc = lotr_house_customizer.0002.desc

	theme = family

	override_background = { reference = physicians_study }

	right_portrait = {
		character = root
		animation = throne_room_writer
	}

	immediate = { play_music_cue = "mx_cue_succession" }

	#Displays Extinct Numenor Houses

	option = {
		name = lotr_house_customizer.0002.dwarves
		trigger = { is_dwarf = yes }
		trigger_event = lotr_house_customizer.0013
	}

	option = {
		name = lotr_house_customizer.0002.beleriand
		trigger = {
			OR = {
				is_human = yes
				is_elf = yes
			}
		}
		trigger_event = lotr_house_customizer.0014
	}

	option = {
		name = lotr_house_customizer.0002.numenor
		trigger = { is_human = yes }
		trigger_event = lotr_house_customizer.0010
	}

	option = {
		name = lotr_house_customizer.0002.gondor
		trigger = { is_human = yes }
		trigger_event = lotr_house_customizer.0011
	}

	option = {
		name = lotr_house_customizer.0002.arnor
		trigger = { is_human = yes }
		trigger_event = lotr_house_customizer.0012
	}

	option = {
		name = lotr_house_customizer.0002.bellakar
		trigger = { is_human = yes }
		trigger_event = lotr_house_customizer.0015
	}

	option = {
		name = lotr_house_customizer.0002.umbar
		trigger = { is_human = yes }
		trigger_event = lotr_house_customizer.0016
	}

	option = {
		name = lotr_house_customizer.0002.rhovanion
		trigger = {
			OR = {
				is_human = yes
				is_elf = yes
			}
		}
		trigger_event = lotr_house_customizer.0018
	}

	option = {
		name = lotr_house_customizer.0002.a
		trigger_event = lotr_house_customizer.0003
	}
}

#Region Select for Extinct Houses 2
lotr_house_customizer.0003 = {
	type = character_event
	title = lotr_house_customizer.0002.t
	desc = lotr_house_customizer.0002.desc

	theme = family

	override_background = { reference = physicians_study }

	right_portrait = {
		character = root
		animation = throne_room_writer
	}

	immediate = { play_music_cue = "mx_cue_succession" }

	option = {
		name = lotr_house_customizer.0002.enedhwaith
		trigger = { is_human = yes }
		trigger_event = lotr_house_customizer.0023
	}

	option = {
		name = lotr_house_customizer.0002.shire
		trigger = { is_hobbit = yes }
		trigger_event = lotr_house_customizer.0024
	}

	option = {
		name = lotr_house_customizer.0002.rhun
		trigger = { is_human = yes }
		trigger_event = lotr_house_customizer.0019
	}

	option = {
		name = lotr_house_customizer.0002.khand
		trigger = { is_human = yes }
		trigger_event = lotr_house_customizer.0020
	}

	option = {
		name = lotr_house_customizer.0002.thanihazad
		trigger = { is_human = yes }
		trigger_event = lotr_house_customizer.0017
	}

	option = {
		name = lotr_house_customizer.0002.khy
		trigger = { is_human = yes }
		trigger_event = lotr_house_customizer.0021
	}

	option = {
		name = lotr_house_customizer.0002.sirayn
		trigger = { is_human = yes }
		trigger_event = lotr_house_customizer.0022
	}

	option = {
		name = lotr_house_customizer.0002.orc
		trigger = { is_orc = yes }
		trigger_event = lotr_house_customizer.0025
	}

	option = {
		name = lotr_house_customizer.0003.a
		trigger = {
			NOR = {
				is_orc = yes
				is_hobbit = yes
			}
		}
		trigger_event = lotr_house_customizer.0002
	}
}

### REGION SELECTION ###

#Select Extinct Numenor
lotr_house_customizer.0010 = {
	type = character_event
	title = lotr_house_customizer.0010.t
	desc = lotr_house_customizer.0010.desc

	theme = family

	override_background = { reference = physicians_study }

	right_portrait = {
		character = root
		animation = throne_room_writer
	}

	immediate = { play_music_cue = "mx_cue_succession" }

	#Elros
	option = {
		name = lotr_house_customizer.0010.elros
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofelros1 }
			is_human = yes
		}
		character:lineofelros25 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	#Andunie
	option = {
		name = lotr_house_customizer.0010.andunie
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofelatan2 }
			is_human = yes
		}
		character:lineofelatan19 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	#Ciryatirionath
	option = {
		name = lotr_house_customizer.0010.ciryatirionath
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:ciryamirdad }
			is_human = yes
		}
		character:lineofciryamir6 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Back Option
	option = {
		name = lotr_house_customizer.back_option
		if = {
			limit = {
				OR = {
					is_orc = yes
					is_hobbit = yes
				}
			}
			trigger_event = lotr_house_customizer.0003
		}
		else = { trigger_event = lotr_house_customizer.0002 }
	}
}

#Select Extinct Gondor
lotr_house_customizer.0011 = {
	type = character_event
	title = lotr_house_customizer.0011.t
	desc = lotr_house_customizer.0010.desc

	theme = family

	override_background = { reference = physicians_study }

	right_portrait = {
		character = root
		animation = throne_room_writer
	}

	immediate = { play_music_cue = "mx_cue_succession" }

	#Anárionath
	option = {
		name = lotr_house_customizer.0011.anarioni
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofanarion1 }
			is_human = yes
		}
		character:lineofanarion51 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	#Oronturioni
	option = {
		name = lotr_house_customizer.0011.oronturioni
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineoforontur1 }
			is_human = yes
		}
		character:lineoforontur41 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	#Roquendilioni
	option = {
		name = lotr_house_customizer.0011.roquendil
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofroquendil1 }
			is_human = yes
		}
		character:lineofroquendil49 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	#Ciryatanioni
	option = {
		name = lotr_house_customizer.0011.ciryatanioni
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofciryaheri0 }
			is_human = yes
		}
		character:lineofciryaheri39 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	#Castamir
	option = {
		name = lotr_house_customizer.0011.castamirioni
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofanarion25 }
			is_human = yes
		}
		character:lineofcastamir53 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	#Vëanturionath
	option = {
		name = lotr_house_customizer.0011.veanturionath
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineveantur1 }
			is_human = yes
		}
		character:predolamroth40 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	#Astaldanossë
	option = {
		name = lotr_house_customizer.0011.astaldanosse
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofingoldur1 }
			is_human = yes
		}
		character:lineofingoldur23a3a1 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	#Gundorionath
	option = {
		name = lotr_house_customizer.0011.gundorionath
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofgundor1 }
			is_human = yes
		}
		character:lineofgundor38 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	#Ostomirionath
	option = {
		name = lotr_house_customizer.0011.ostomirionath
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineostomir1 }
			is_human = yes
		}
		character:lineostomir28 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Back Option
	option = {
		name = lotr_house_customizer.back_option
		if = {
			limit = {
				OR = {
					is_orc = yes
					is_hobbit = yes
				}
			}
			trigger_event = lotr_house_customizer.0003
		}
		else = { trigger_event = lotr_house_customizer.0002 }
	}
}

#Select Extinct Arnor
lotr_house_customizer.0012 = {
	type = character_event
	title = lotr_house_customizer.0012.t
	desc = lotr_house_customizer.0010.desc

	theme = family

	override_background = { reference = physicians_study }

	right_portrait = {
		character = root
		animation = throne_room_writer
	}

	immediate = { play_music_cue = "mx_cue_succession" }

	# Elendil
	option = {
		name = lotr_house_customizer.0012.elendilioni
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofelendil } }
		character:lineofelendil = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Silivnir
	option = {
		name = lotr_house_customizer.0012.silivnirion
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofsilivnir1 } }
		character:lineofsilivnir1 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Galadhionath
	option = {
		name = lotr_house_customizer.0012.galadhionath
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:linerhudaur1 } }
		character:linerhudaur1 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Thorondorionath
	option = {
		name = lotr_house_customizer.0012.thorondorionath
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:linecardolan1 } }
		character:lineofcardolan8 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Aranborionath
	option = {
		name = lotr_house_customizer.0012.aranborionath
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofaranbor2 } }
		character:lineofaranbor5 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Caladir
	option = {
		name = lotr_house_customizer.0012.caladir
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofcaladir1 } }
		character:lineofcaladir45 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Eketyaion
	option = {
		name = lotr_house_customizer.0012.eketyaion
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofeketya1 } }
		character:lineofeketya85 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Back Option
	option = {
		name = lotr_house_customizer.back_option
		if = {
			limit = {
				OR = {
					is_orc = yes
					is_hobbit = yes
				}
			}
			trigger_event = lotr_house_customizer.0003
		}
		else = { trigger_event = lotr_house_customizer.0002 }
	}
}

#Select Extinct Dwarves
lotr_house_customizer.0013 = {
	type = character_event
	title = lotr_house_customizer.0013.t
	desc = lotr_house_customizer.0010.desc

	theme = family

	override_background = { reference = physicians_study }

	right_portrait = {
		character = root
		animation = throne_room_writer
	}

	immediate = { play_music_cue = "mx_cue_succession" }

	# Sindri
	option = {
		name = lotr_house_customizer.0013.sindri
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofsindriI } }
		character:lineofsindriVI = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Thulin
	option = {
		name = lotr_house_customizer.0013.thulin
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofthulinI } }
		character:lineofthulin117 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Bavor
	option = {
		name = lotr_house_customizer.0013.bavor
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofbavorI } }
		character:lineofbavor88 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	option = {
		name = lotr_house_customizer.0002.a
		trigger_event = lotr_house_customizer.2013
	}

	# Back Option
	option = {
		name = lotr_house_customizer.back_option
		if = {
			limit = {
				OR = {
					is_orc = yes
					is_hobbit = yes
				}
			}
			trigger_event = lotr_house_customizer.0003
		}
		else = { trigger_event = lotr_house_customizer.0002 }
	}
}

#Select Extinct Dwarves
lotr_house_customizer.2013 = {
	type = character_event
	title = lotr_house_customizer.0013.t
	desc = lotr_house_customizer.0010.desc

	theme = family

	override_background = { reference = physicians_study }

	right_portrait = {
		character = root
		animation = throne_room_writer
	}

	immediate = { play_music_cue = "mx_cue_succession" }

	# Az-Ganur
	option = {
		name = lotr_house_customizer.0013.azganur
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofazganur1 } }
		character:lineofazganur27 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Telchar
	option = {
		name = lotr_house_customizer.0013.telchar
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineoftelchar1 } }
		character:lineoftelchar1 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Narvi
	option = {
		name = lotr_house_customizer.0013.narvi
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofnarvi } }
		character:lineofnarvi = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Gamil Zirak
	option = {
		name = lotr_house_customizer.0013.gamil_zirak
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofgamilzirak } }
		character:lineofgamilzirak = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Dourhand
	option = {
		name = lotr_house_customizer.0013.dourhand
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofdourhand1 } }
		character:lineofdourhand17 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Bronzebeard
	option = {
		name = lotr_house_customizer.0013.bronzebeard
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofbronzebeard1 } }
		character:lineofbronzebeard18 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Baruk Odlig
	option = {
		name = lotr_house_customizer.0013.barukodlig
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofbarukodlig1 } }
		character:lineofbarukodlig1 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Grúni
	option = {
		name = lotr_house_customizer.0013.gruni
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:linegruni1 } }
		character:linegruni30 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Back Option
	option = {
		name = lotr_house_customizer.back_option
		trigger_event = lotr_house_customizer.00013
	}
}

#Select Extinct Beleriend
lotr_house_customizer.0014 = {
	type = character_event
	title = lotr_house_customizer.0014.t
	desc = lotr_house_customizer.0010.desc

	theme = family

	override_background = { reference = physicians_study }

	right_portrait = {
		character = root
		animation = throne_room_writer
	}

	immediate = { play_music_cue = "mx_cue_succession" }

	# Gil-galad
	option = {
		name = lotr_house_customizer.0014.gilgalad
		trigger = { is_elf = yes }
		character:lineoforodreth4 = { save_scope_as = hc_selection }
		add_character_flag = gil_child
		trigger_event = lotr_house_customizer.0100
	}

	# Ecthelion Lord of the House of the Fountain
	option = {
		name = lotr_house_customizer.0014.ecthelion
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofecthelion }
			is_elf = yes
		}
		character:lineofecthelion = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Rauggoth 'Rog' Lord of the House of the Hammer of Wrath
	option = {
		name = lotr_house_customizer.0014.rog
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofrauggoth }
			is_elf = yes
		}
		character:lineofrauggoth = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Egalmoth Lord of the House of the Heavenly Arch
	option = {
		name = lotr_house_customizer.0014.egalmoth
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofegalmoth }
			is_elf = yes
		}
		character:lineofegalmoth = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Duilin Lord of the House of the Swallow
	option = {
		name = lotr_house_customizer.0014.duilin
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofduilin }
			is_elf = yes
		}
		character:lineofduilin = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Salgant Lord of the House of the Harp
	option = {
		name = lotr_house_customizer.0014.salgant
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofsalgant }
			is_elf = yes
		}
		character:lineofsalgant = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Beor
	option = {
		name = lotr_house_customizer.0014.beor
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofbeor1 }
			is_human = yes
		}
		character:lineofbeor22 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Haleth
	option = {
		name = lotr_house_customizer.0014.haleth
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofhaleth1 }
			is_human = yes
		}
		character:lineofhaleth14 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Back Option
	option = {
		name = lotr_house_customizer.back_option
		if = {
			limit = {
				OR = {
					is_orc = yes
					is_hobbit = yes
				}
			}
			trigger_event = lotr_house_customizer.0003
		}
		else = { trigger_event = lotr_house_customizer.0002 }
	}
}

#Select Extinct Bellakar
lotr_house_customizer.0015 = {
	type = character_event
	title = lotr_house_customizer.0015.t
	desc = lotr_house_customizer.0010.desc

	theme = family

	override_background = { reference = physicians_study }

	right_portrait = {
		character = root
		animation = throne_room_writer
	}

	immediate = { play_music_cue = "mx_cue_succession" }

	# Vâtrathôr
	option = {
		name = lotr_house_customizer.0015.vatrathor
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofvatrathor2 } }
		character:lineofvatrathor12 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Mûlphazgânî
	option = {
		name = lotr_house_customizer.0015.mulphazgani
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofmulphazgan2 } }
		character:lineofmulphazgan2 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Borodiriath
	option = {
		name = lotr_house_customizer.0015.borodiriath
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineborodiriath1 } }
		character:lineborodiriath108 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Back Option
	option = {
		name = lotr_house_customizer.back_option
		if = {
			limit = {
				OR = {
					is_orc = yes
					is_hobbit = yes
				}
			}
			trigger_event = lotr_house_customizer.0003
		}
		else = { trigger_event = lotr_house_customizer.0002 }
	}
}

#Select Extinct Umbar
lotr_house_customizer.0016 = {
	type = character_event
	title = lotr_house_customizer.0016.t
	desc = lotr_house_customizer.0010.desc

	theme = family

	override_background = { reference = physicians_study }

	right_portrait = {
		character = root
		animation = throne_room_writer
	}

	immediate = { play_music_cue = "mx_cue_succession" }

	# Zimrhuliôn
	option = {
		name = lotr_house_customizer.0016.zimrhulion
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofsealord6 } }
		character:lineumbar8 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Kastarhôn
	option = {
		name = lotr_house_customizer.0016.kastarhon
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofsealord7 } }
		character:lineumbar17 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Celevnorionath
	option = {
		name = lotr_house_customizer.0016.telemnarion
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:linetelemnarion3 } }
		character:linetelemnarion13 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Fuinurîm
	option = {
		name = lotr_house_customizer.0016.herumbaran
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineherumor5 } }
		character:lineherumor8 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Fuinurîm
	option = {
		name = lotr_house_customizer.0016.fuinurim
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineherumor7 } }
		character:lineherumor7 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Back Option
	option = {
		name = lotr_house_customizer.back_option
		if = {
			limit = {
				OR = {
					is_orc = yes
					is_hobbit = yes
				}
			}
			trigger_event = lotr_house_customizer.0003
		}
		else = { trigger_event = lotr_house_customizer.0002 }
	}
}

#Select Extinct Thani-Hazad
lotr_house_customizer.0017 = {
	type = character_event
	title = lotr_house_customizer.0017.t
	desc = lotr_house_customizer.0010.desc

	theme = family

	override_background = { reference = physicians_study }

	right_portrait = {
		character = root
		animation = throne_room_writer
	}

	immediate = { play_music_cue = "mx_cue_succession" }

	# Nimruzîrî
	option = {
		name = lotr_house_customizer.0017.nimruziri
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofprinceimrazor10 } }
		character:lineofnimruziir39 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Zagarnarduwi
	option = {
		name = lotr_house_customizer.0017.zagarnarduwi
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofprinceimrazor11 } }
		character:linehammerdel26 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Zimrathôni
	option = {
		name = lotr_house_customizer.0017.zimrathoni
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofprinceimrazor12 } }
		character:linealsarias10 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Dâiruhîn
	option = {
		name = lotr_house_customizer.0017.dairuhin
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofprinceimrazor13 } }
		character:lineazariroth31 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Azûlhîn
	option = {
		name = lotr_house_customizer.0017.azulhin
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofazruben1 } }
		character:lineofazruben10 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Ezirkhôn
	option = {
		name = lotr_house_customizer.0017.ezirkhon
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineezirkhon2 } }
		character:lineezirkhon7 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Ezirkhôn
	option = {
		name = lotr_house_customizer.0017.kinyarni
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:linearkinyarn1 } }
		character:linearkinyarn23 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Back Option
	option = {
		name = lotr_house_customizer.back_option
		trigger_event = lotr_house_customizer.0003
	}
}

#Select Extinct Rhovanion
lotr_house_customizer.0018 = {
	type = character_event
	title = lotr_house_customizer.0018.t
	desc = lotr_house_customizer.0010.desc

	theme = family

	override_background = { reference = physicians_study }

	right_portrait = {
		character = root
		animation = throne_room_writer
	}

	immediate = { play_music_cue = "mx_cue_succession" }

	# Aivadiurion
	option = {
		name = lotr_house_customizer.0018.aivadiurion
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofdale1 }
			is_human = yes
		}
		character:lineofdale36 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Girionsson
	option = {
		name = lotr_house_customizer.0018.girionsson
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofdale37 }
			is_human = yes
		}
		character:lineofdale45 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Haldirionath
	option = {
		name = lotr_house_customizer.0018.haldirionath
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:haldirdad }
			is_human = yes
		}
		character:dorhunen17 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Alciswardia
	option = {
		name = lotr_house_customizer.0018.alciswardia
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:linerhovanion1 }
			is_human = yes 
		}
		character:linerhovanion18 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Lohtûrling
	option = {
		name = lotr_house_customizer.0018.lohturling
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:linefram2 }
			is_human = yes
		}
		character:linefram17 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Amdir
	option = {
		name = lotr_house_customizer.0018.amdir
		trigger = {
			lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofamdir1 }
			is_elf = yes
		}
		character:lineofamdir3 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Back Option
	option = {
		name = lotr_house_customizer.back_option
		trigger_event = lotr_house_customizer.0003
	}
}

#Select Extinct Rhun
lotr_house_customizer.0019 = {
	type = character_event
	title = lotr_house_customizer.0019.t
	desc = lotr_house_customizer.0010.desc

	theme = family

	override_background = { reference = physicians_study }

	right_portrait = {
		character = root
		animation = throne_room_writer
	}

	immediate = { play_music_cue = "mx_cue_succession" }

	# Szrel
	option = {
		name = lotr_house_customizer.0019.szrel
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofszrel1 } }
		character:lineofszrel27 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Pultai
	option = {
		name = lotr_house_customizer.0019.pultai
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofpultai1 } }
		character:lineofpultai9 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Back Option
	option = {
		name = lotr_house_customizer.back_option
		trigger_event = lotr_house_customizer.0003
	}
}

#Select Extinct Khand
lotr_house_customizer.0020 = {
	type = character_event
	title = lotr_house_customizer.0020.t
	desc = lotr_house_customizer.0010.desc

	theme = family

	override_background = { reference = physicians_study }

	right_portrait = {
		character = root
		animation = throne_room_writer
	}

	immediate = { play_music_cue = "mx_cue_succession" }

	# OvathaIV
	option = {
		name = lotr_house_customizer.0020.ovathaIV
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:ovathaIV } }
		character:ovathaIV = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# OvathaV
	option = {
		name = lotr_house_customizer.0020.ovathaV
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:ovathaV } }
		character:ovathaV = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# OvathaVI
	option = {
		name = lotr_house_customizer.0020.ovathaVI
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofskakali1 } }
		character:lineofskakali13 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# OvathaVIII
	option = {
		name = lotr_house_customizer.0020.ovathaVIII
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:ovathaVIII } }
		character:line_malikar_3 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Back Option
	option = {
		name = lotr_house_customizer.back_option
		trigger_event = lotr_house_customizer.0003
	}
}

#Select Extinct Khy
lotr_house_customizer.0021 = {
	type = character_event
	title = lotr_house_customizer.0021.t
	desc = lotr_house_customizer.0010.desc

	theme = family

	override_background = { reference = physicians_study }

	right_portrait = {
		character = root
		animation = throne_room_writer
	}

	immediate = { play_music_cue = "mx_cue_succession" }

	# Haxâmanâhan
	option = {
		name = lotr_house_customizer.0021.haxamanish
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofhaxamanish1 } }
		character:lineofhaxamanish88 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Ardâcheran
	option = {
		name = lotr_house_customizer.0021.ardacheran
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofardacher1 } }
		character:lineofardacher17 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Artaxshâsan
	option = {
		name = lotr_house_customizer.0021.artaxshasan
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofartaxshasa1 } }
		character:lineofartaxshasa19 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Phaxsharân
	option = {
		name = lotr_house_customizer.0021.phaxsharan
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofphaxsharan1 } }
		character:lineofphaxsharan26 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Balakhôrhîn
	option = {
		name = lotr_house_customizer.0021.balukhorin
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:linelordadmiral1 } }
		character:linelordadmiral1 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Back Option
	option = {
		name = lotr_house_customizer.back_option
		trigger_event = lotr_house_customizer.0003
	}
}

#Select Extinct Sirayn
lotr_house_customizer.0022 = {
	type = character_event
	title = lotr_house_customizer.0022.t
	desc = lotr_house_customizer.0010.desc

	theme = family

	override_background = { reference = physicians_study }

	right_portrait = {
		character = root
		animation = throne_room_writer
	}

	immediate = { play_music_cue = "mx_cue_succession" }

	# Bulganadha
	option = {
		name = lotr_house_customizer.0022.bulganadha
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofsikentr0 } }
		character:lineofsikentr0 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Back Option
	option = {
		name = lotr_house_customizer.back_option
		trigger_event = lotr_house_customizer.0003
	}
}

#Select Extinct Enedhwaith
lotr_house_customizer.0023 = {
	type = character_event
	title = lotr_house_customizer.0023.t
	desc = lotr_house_customizer.0010.desc

	theme = family

	override_background = { reference = physicians_study }

	right_portrait = {
		character = root
		animation = throne_room_writer
	}

	immediate = { play_music_cue = "mx_cue_succession" }

	# Frecaling
	option = {
		name = lotr_house_customizer.0023.frecaling
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineprefreca2 } }
		character:lineoffreca11 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Handirionath
	option = {
		name = lotr_house_customizer.0023.handirionath
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofhandir17 } }
		character:lineofhandir81 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Arastilionath
	option = {
		name = lotr_house_customizer.0023.arastilionath
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:linearastil1 } }
		character:linearastil16 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Handarod
	option = {
		name = lotr_house_customizer.0023.handarod
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:linehandarod1 } }
		character:linehandarod21 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Back Option
	option = {
		name = lotr_house_customizer.back_option
		trigger_event = lotr_house_customizer.0003
	}
}

#Select Extinct Shire
lotr_house_customizer.0024 = {
	type = character_event
	title = lotr_house_customizer.0024.t
	desc = lotr_house_customizer.0010.desc

	theme = family

	override_background = { reference = physicians_study }

	right_portrait = {
		character = root
		animation = throne_room_writer
	}

	immediate = { play_music_cue = "mx_cue_succession" }

	# Oldbuck
	option = {
		name = lotr_house_customizer.0024.oldbuck
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofoldbuck1 } }
		character:lineofoldbuck11 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Back Option
	option = {
		name = lotr_house_customizer.back_option
		trigger_event = lotr_house_customizer.0003
	}
}

#Select Extinct Orcish
lotr_house_customizer.0025 = {
	type = character_event
	title = lotr_house_customizer.0025.t
	desc = lotr_house_customizer.0010.desc

	theme = family

	override_background = { reference = physicians_study }

	right_portrait = {
		character = root
		animation = throne_room_writer
	}

	immediate = { play_music_cue = "mx_cue_succession" }

	# Morgwar
	option = {
		name = lotr_house_customizer.0025.morgwar
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofskorg1 } }
		character:lineofskorg5 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Urundur
	option = {
		name = lotr_house_customizer.0025.urundur
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofskorg6 } }
		character:lineofskorg7 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Skorgrim
	option = {
		name = lotr_house_customizer.0025.skorgrim
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofskorg8 } }
		character:lineofurro2 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Lokikrah
	option = {
		name = lotr_house_customizer.0025.lokikrah
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofurro14 } }
		character:lineofurro24 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Gurhoi
	option = {
		name = lotr_house_customizer.0025.gurhoi
		trigger = { lotr_is_house_extinct_history_trigger = { FOUNDER = character:lineofbalcog1 } }
		character:lineofbalcog26 = { save_scope_as = hc_selection }
		trigger_event = lotr_house_customizer.0100
	}

	# Back Option
	option = {
		name = lotr_house_customizer.back_option
		trigger_event = lotr_house_customizer.0003
	}
}

######################################################
### HOUSE CONVERSION AND CHARACTER RELATION EVENTS ###
######################################################

# This event handles the EXTINCT HOUSE conversion
lotr_house_customizer.0100 = {
	type = character_event
	title = lotr_house_customizer.0100.t
	desc = lotr_house_customizer.0100.desc

	theme = family

	override_background = { reference = study }

	left_portrait = {
		character = root
		animation = throne_room_writer
	}

	right_portrait = {
		character = scope:hc_selection
		animation = throne_room_writer
	}

	immediate = { play_music_cue = "mx_cue_succession" }

	#I want to play as their sibling
	option = {
		name = lotr_house_customizer.0100.a
		trigger = {
			OR = {
				scope:hc_selection.mother ?= { is_lotr_adult = yes }
				scope:hc_selection.father ?= { is_lotr_adult = yes }
			}
			OR = {
				scope:hc_selection.mother ?= { same_race = { TARGET = root } }
				scope:hc_selection.father ?= { same_race = { TARGET = root } }
			}
			NOT = { has_character_flag = gil_child }
		}
		if = { # You have the bastard trait
			limit = {
				exists = scope:hc_selection.father
				scope:hc_selection.father.primary_title.tier >= scope:hc_selection.mother.primary_title.tier
				has_trait = bastard
			}
			set_house = scope:hc_selection.father.house
			set_father = scope:hc_selection.father
		}
		else_if = { # You selected a father
			limit = {
				exists = scope:hc_selection.father
				exists = scope:hc_selection.father.house
				scope:hc_selection.father.primary_title.tier >= scope:hc_selection.mother.primary_title.tier
			}
			set_house = scope:hc_selection.father.house
			set_father = scope:hc_selection.father
			if = { # Check for and set valid mother
				limit = { scope:hc_selection.mother ?= { is_lotr_adult = yes } }
				set_mother = scope:hc_selection.mother
			}
		}
		else = { # You selected a mother
			set_house = scope:hc_selection.mother.house
			set_mother = scope:hc_selection.mother
			if = { # Check for and set valid father
				limit = { scope:hc_selection.father ?= { is_lotr_adult = yes } }
				set_father = scope:hc_selection.father
			}
		}

		if = { #If any child is not the same house
			limit = { any_child = {	NOT = { house = root.house } } }
			every_child = { #Then we scope to every possible child and set their house as YOUR house.
				limit = { NOT = { house = root.house } }
				set_house = root.house
			}
		}
		hidden_effect = { remove_trait = house_customizer }
		#trigger_event = lotr_house_customizer.0022

		# Remind them of the option
		show_as_unavailable = { always = yes }
		if = {
			limit = { is_dwarf = yes }
			set_culture = scope:hc_selection.culture
		}
	}

	#I want to play as their child
	option = {
		name = lotr_house_customizer.0100.b
		trigger = { scope:hc_selection = { is_lotr_adult = yes } }
		if = { # You have the bastard trait
			limit = {
				scope:hc_selection = { is_male = yes }
				has_trait = bastard
			}
			set_house = scope:hc_selection.house
			set_father = scope:hc_selection
		}
		else_if = { # You selected a father
			limit = { scope:hc_selection = { is_male = yes } }
			set_house = scope:hc_selection.house
			set_father = scope:hc_selection
			if = {
				limit = { # Check for and set valid mother
					scope:hc_selection.primary_spouse ?= {
						is_female = yes
						is_lotr_adult = yes
					}
				}
				set_mother = scope:hc_selection.primary_spouse
			}
		}
		else = { # You selected a mother
			set_house = scope:hc_selection.house
			set_mother = scope:hc_selection
			if = {
				limit = { # Check for and set valid father
					scope:hc_selection.primary_spouse ?= {
						is_male = yes
						is_lotr_adult = yes
					}
				}
				set_father = scope:hc_selection.primary_spouse
			}
		}

		if = { #If any child is not the same house
			limit = { any_child = { NOT = { house = root.house } } }
			every_child = { #Then we scope to every possible child and set their house as YOUR house.
				limit = { NOT = { house = root.house } }
				set_house = root.house
			}
		}
		hidden_effect = { remove_trait = house_customizer }
		# Remind them of the option
		show_as_unavailable = { always = yes }
		if = {
			limit = { is_dwarf = yes }
			set_culture = scope:hc_selection.culture
		}
	}

	#I want to play as their relative
	option = {
		name = lotr_house_customizer.0100.c
		trigger = {
			scope:hc_selection = {
				any_close_or_extended_family_member = {
					even_if_dead = yes
					is_lotr_adult = yes
					house = scope:hc_selection.house
				}
			}
			NOT = { has_character_flag = gil_child }
		}
		add_character_flag = relative_pop_extinct
		trigger_event = lotr_house_customizer.0200
		if = {
			limit = { is_dwarf = yes }
			set_culture = scope:hc_selection.culture
		}
	}
	
	#I want no ancestors
	option = {
		name = lotr_house_customizer.0100.d
		trigger = { NOT = { has_character_flag = gil_child } }
		add_character_flag = relative_pop_extinct
		add_character_flag = no_ancestors
		trigger_event = lotr_house_customizer.0200
		if = {
			limit = { is_dwarf = yes }
			set_culture = scope:hc_selection.culture
		}
	}

	# I want to choose a different house
	option = {
		name = lotr_house_customizer.0100.back
		custom_tooltip = lotr_house_customizer.0100.back.tt
		if = {
			limit = {
				OR = {
					is_orc = yes
					is_hobbit = yes
				}
			}
			trigger_event = lotr_house_customizer.0003
		}
		else = { trigger_event = lotr_house_customizer.0002 }
	}
	after = { remove_character_flag = gil_child }
}

# This event handles the LIVING HOUSE conversion (specifically, from the interaction)
lotr_house_customizer.0101 = {
	type = character_event
	title = lotr_house_customizer.0100.t
	desc = lotr_house_customizer.0100.desc

	theme = family

	override_background = { reference = study }

	left_portrait = {
		character = root
		animation = throne_room_writer
	}

	right_portrait = {
		character = scope:hc_selection
		animation = throne_room_writer
	}

	immediate = {
		play_music_cue = "mx_cue_succession"
		scope:recipient = { save_scope_as = hc_selection }
		# Mother may be needed, so generate one if one doesn't exist
		if = {
			limit = { NOT = { exists = scope:hc_random_mother } }
			create_character = {
				template = generic_female_peasant_character
				culture = root.culture
				employer = root
				age = root.appropriate_parent_age
				gender = female
				save_scope_as = hc_random_mother
				after_creation = { copy_inheritable_appearance_from = root }
			}
		}
		# Father may be needed, so generate one if one doesn't exist
		if = {
			limit = { NOT = { exists = scope:hc_random_father } }
			create_character = {
				template = generic_peasant_character
				culture = root.culture
				employer = root
				age = root.appropriate_parent_age
				gender = male
				save_scope_as = hc_random_father
				after_creation = { copy_inheritable_appearance_from = root }
			}
		}
		if = { # Scope for localization
			limit = { scope:hc_selection = { is_male = yes } }
			scope:hc_random_mother = { save_scope_as = second_parent }
		}
		if = { # Scope for localization
			limit = { scope:hc_selection = { is_female = yes } }
			scope:hc_random_father = { save_scope_as = second_parent }
		}
	}

	#I want to play as their sibling
	option = {
		name = lotr_house_customizer.0100.a
		trigger = {
			OR = {
				exists = scope:hc_selection.mother
				exists = scope:hc_selection.father
			}
			OR = {
				scope:hc_selection.mother ?= {
					OR = {
						can_be_parent_of = root
						#For some reason can_be_parent_of doesn't work with female characters?
						16 <= {
							value = scope:hc_selection.mother.age
							subtract = root.age
						}
					}
				}
				scope:hc_selection.father ?= { can_be_parent_of = root }
			}
		}
		if = { # You have the bastard trait
			limit = {
				scope:hc_selection.father.primary_title.tier >= scope:hc_selection.mother.primary_title.tier
				exists = scope:hc_selection.father.house
				has_trait = bastard
			}
			set_house = scope:hc_selection.father.house
			set_father = scope:hc_selection.father
			set_mother = scope:hc_random_mother
			# Other random parent no longer needed
			hidden_effect = { scope:hc_random_father = { death = { death_reason = death_disappearance } } }
		}
		else_if = { # You selected a father
			limit = { scope:hc_selection.father.primary_title.tier >= scope:hc_selection.mother.primary_title.tier exists = scope:hc_selection.father.house }
			set_house = scope:hc_selection.father.house
			set_father = scope:hc_selection.father
			if = { # Check for and set valid mother
				limit = {
					scope:hc_selection.mother ?= {
						OR = {
							can_be_parent_of = root
							#For some reason can_be_parent_of doesn't work with female characters?
							16 <= {
								value = scope:hc_selection.mother.age
								subtract = root.age
							}
						}
					}
				}
				set_mother = scope:hc_selection.mother
			}
			hidden_effect = { # Random parents no longer needed
				scope:hc_random_mother = { death = { death_reason = death_disappearance } }
				scope:hc_random_father = { death = { death_reason = death_disappearance } }
			}
		}
		else = { # You selected a mother
			set_house = scope:hc_selection.mother.house
			set_mother = scope:hc_selection.mother
			if = { # Check for and set valid father
				limit = { scope:hc_selection.father ?= { can_be_parent_of = root } }
				set_father = scope:hc_selection.father
			}
			hidden_effect = { # Random parents no longer needed
				scope:hc_random_father = { death = { death_reason = death_disappearance } }
				scope:hc_random_mother = { death = { death_reason = death_disappearance } }
			}
		}

		if = { #If any child is not the same house
			limit = { any_child = { NOT = { house = root.house } } }
			every_child = { #Then we scope to every possible child and set their house as YOUR house.
				limit = { NOT = { house = root.house } }
				set_house = root.house
			}
		}

		hidden_effect = { remove_trait = house_customizer }

		# Remind them of the option
		show_as_unavailable = { always = yes }
		if = {
			limit = { is_dwarf = yes }
			set_culture = scope:hc_selection.culture
		}
	}

	#I want to play as their child
	option = {
		name = lotr_house_customizer.0100.b
		trigger = {
			scope:hc_selection = {
				OR = {
					can_be_parent_of = root
					#For some reason can_be_parent_of doesn't work with female characters?
					16 <= {
						value = scope:hc_selection.age
						subtract = root.age
					}
				}
			}
		}
		if = { # You selected a father
			limit = { scope:hc_selection = { is_male = yes } }
			set_house = scope:hc_selection.house
			set_father = scope:hc_selection

			hidden_effect = { # Random parents no longer needed
				scope:hc_random_mother = { death = { death_reason = death_disappearance } }
				scope:hc_random_father = { death = { death_reason = death_disappearance } }
			}
		}
		else = { # You selected a mother
			set_house = scope:hc_selection.house
			set_mother = scope:hc_selection

			hidden_effect = { # Random parents no longer needed
				scope:hc_random_mother = { death = { death_reason = death_disappearance } }
				scope:hc_random_father = { death = { death_reason = death_disappearance } }
			}
		}

		if = { #If any child is not the same house
			limit = { any_child = { NOT = { house = root.house } } }
			every_child = { #Then we scope to every possible child and set their house as YOUR house.
				limit = { NOT = { house = root.house } }
				set_house = root.house
			}
		}
		hidden_effect = { remove_trait = house_customizer }

		# Remind them of the option
		show_as_unavailable = { always = yes }
		if = {
			limit = { is_dwarf = yes }
			set_culture = scope:hc_selection.culture
		}
	}

	#I want to play as their child but have a parent assigned to me
	option = {
		name = lotr_house_customizer.0100.bb
		trigger = {
			scope:hc_selection = {
				OR = {
					can_be_parent_of = root
					#For some reason can_be_parent_of doesn't work with female characters?
					16 <= {
						value = scope:hc_selection.age
						subtract = root.age
					}
				}
			}
		}
		if = { # You have the bastard trait
			limit = {
				scope:hc_selection = { is_male = yes }
				has_trait = bastard
			}
			set_house = scope:hc_selection.house
			set_father = scope:hc_selection
			set_mother = scope:hc_random_mother
			# Other random parent no longer needed
			hidden_effect = { scope:hc_random_father = { death = { death_reason = death_disappearance } } }
		}
		else_if = { # You selected a father
			limit = { scope:hc_selection = { is_male = yes } }
			set_house = scope:hc_selection.house
			set_father = scope:hc_selection
			if = {
				limit = { # Check for and set valid mother
					scope:hc_selection.primary_spouse ?= {
						is_female = yes
						OR = {
							can_be_parent_of = root
							#For some reason can_be_parent_of doesn't work with female characters?
							16 <= {
								value = scope:hc_selection.primary_spouse.age
								subtract = root.age
							}
						}
					}
				}
				set_mother = scope:hc_selection.primary_spouse

				hidden_effect = { # Random parents no longer needed
					scope:hc_random_mother = { death = { death_reason = death_disappearance } }
					scope:hc_random_father = { death = { death_reason = death_disappearance } }
				}
			}
			else_if = { # Otherwise set random mother
				limit = {
					scope:hc_selection = {
						OR = {
							is_married = no
							primary_spouse = { NOT = { can_be_parent_of = root } }
						}
					}
				}
				set_mother = scope:hc_random_mother
				# Other random parent no longer needed
				hidden_effect = { scope:hc_random_father = { death = { death_reason = death_disappearance } } }
			}
		}
		else = { # You selected a mother
			set_house = scope:hc_selection.house
			set_mother = scope:hc_selection
			if = {
				limit = { # Check for and set valid father
					scope:hc_selection.primary_spouse ?= {
						is_male = yes
						can_be_parent_of = root
					}
				}
				set_father = scope:hc_selection.primary_spouse

				hidden_effect = { # Random parents no longer needed
					scope:hc_random_father = { death = { death_reason = death_disappearance } }
					scope:hc_random_mother = { death = { death_reason = death_disappearance } }
				}
			}
			else_if = { # Otherwise set random father
				limit = {
					scope:hc_selection = {
						OR = {
							is_married = no
							primary_spouse = { NOT = { can_be_parent_of = root } }
						}
					}
				}
				set_father = scope:hc_random_father
				# Other random parent no longer needed
				hidden_effect = { scope:hc_random_mother = { death = { death_reason = death_disappearance } } }
			}
		}

		if = { #If any child is not the same house
			limit = { any_child = { NOT = { house = root.house } } }
			every_child = { #Then we scope to every possible child and set their house as YOUR house.
				limit = { NOT = { house = root.house } }
				set_house = root.house
			}
		}
		hidden_effect = { remove_trait = house_customizer }

		# Remind them of the option
		show_as_unavailable = { always = yes }
		if = {
			limit = { is_dwarf = yes }
			set_culture = scope:hc_selection.culture
		}
	}

	#I want to play as their relative
	option = {
		name = lotr_house_customizer.0100.c
		trigger = {
			scope:hc_selection = {
				any_close_or_extended_family_member = {
					even_if_dead = yes
					is_lotr_adult = yes
					house = scope:hc_selection.house
				}
			}
		}
		add_character_flag = relative_pop_living
		trigger_event = lotr_house_customizer.0200

		hidden_effect = { # Random parents no longer needed
			scope:hc_random_mother = { death = { death_reason = death_disappearance } }
			scope:hc_random_father = { death = { death_reason = death_disappearance } }
		}
		if = {
			limit = { is_dwarf = yes }
			set_culture = scope:hc_selection.culture
		}
	}

	# I want to choose a different house
	option = {
		name = lotr_house_customizer.0100.back
		custom_tooltip = lotr_house_customizer.0101.back.tt
		trigger_event = lotr_house_customizer.0001
		hidden_effect = { # Random parents no longer needed
			scope:hc_random_mother = { death = { death_reason = death_disappearance } }
			scope:hc_random_father = { death = { death_reason = death_disappearance } }
		}
	}
}

lotr_house_customizer.0200 = {
	type = character_event
	title = lotr_house_customizer.0200.t
	desc = lotr_house_customizer.0200.desc
	theme = family
	override_background = { reference = study }
	left_portrait = {
		character = root
		animation = throne_room_writer
	}
	right_portrait = scope:hc_selection

#	widget = {
#		is_shown = { is_ai = no }
#		gui = "agot_character_selection_two_options"
#		container = "custom_widgets_container"
#	}

	immediate = {
		# Populate List
		if = { # You chose extinct
			limit = { has_character_flag = relative_pop_extinct }
			scope:hc_selection = {
				every_close_or_extended_family_member = {
					even_if_dead = yes
					limit = {
						is_lotr_adult = yes
						house = scope:hc_selection.house
					}
					root = {
						add_to_variable_list = {
							name = possible_characters
							target = prev
						}
					}
				}
			}
		}
		else_if = { # You chose living
			limit = { has_character_flag = relative_pop_living }
			scope:hc_selection = {
				every_close_or_extended_family_member = {
					even_if_dead = yes
					limit = {
						OR = {
							can_be_parent_of = root
							#For some reason can_be_parent_of doesn't work with female characters?
							16 <= {
								value = root.age
								subtract = age
							}
						}
						is_lotr_adult = yes
						house = scope:hc_selection.house
					}
					root = {
						add_to_variable_list = {
							name = possible_characters
							target = prev
						}
					}
				}
			}
		}
		# Order List
		ordered_in_list = {
			variable = possible_characters
			order_by = age
			root = { set_variable = { name = si_selected_character value = prev } }
			save_scope_as = hc_random_relative_selection
		}
	}

	option = {
		name = "lotr_house_customizer.0200.ex"
		trigger = { has_character_flag = relative_pop_extinct NOT = { has_character_flag = no_ancestors } }
		# Ordered List Maintenance
		var:si_selected_character = { save_scope_as = hc_random_relative_selection }
		clear_variable_list = possible_characters
		# House Customizer Maintenance
		set_house = scope:hc_random_relative_selection.house

		if = { # You selected a father
			limit = { scope:hc_random_relative_selection = { is_male = yes } }
			set_father = scope:hc_random_relative_selection
			if = {
				limit = { # Check for and set valid mother
					scope:hc_random_relative_selection.primary_spouse ?= {
						is_female = yes
						is_lotr_adult = yes
					}
				}
				set_mother = scope:hc_random_relative_selection.primary_spouse
			}
		}
		else = { # You selected a mother
			set_mother = scope:hc_random_relative_selection
			if = {
				limit = { # Check for and set valid father
					scope:hc_random_relative_selection.primary_spouse ?= {
						is_male = yes
						is_lotr_adult = yes
					}
				}
				set_father = scope:hc_random_relative_selection.primary_spouse
			}
		}

		if = { #If any child is not the same house
			limit = { any_child = { NOT = { house = root.house } } }
			every_child = { #Then we scope to every possible child and set their house as YOUR house.
				limit = { NOT = { house = root.house } }
				set_house = root.house
			}
		}
		remove_character_flag = relative_pop_extinct
		hidden_effect = { remove_trait = house_customizer }
	}

	option = {
		name = "lotr_house_customizer.0200.li"
		trigger = { has_character_flag = relative_pop_living NOT = { has_character_flag = no_ancestors } }
		# Ordered List Maintenance
		var:si_selected_character = { save_scope_as = hc_random_relative_selection }
		clear_variable_list = possible_characters
		# House Customizer Maintenance
		set_house = scope:hc_random_relative_selection.house #Set's the player's house to the selection's house

		if = { # You have the bastard trait
			limit = {
				scope:hc_random_relative_selection = { is_male = yes }
				has_trait = bastard
			}
			set_father = scope:hc_random_relative_selection
		}
		else_if = { # You selected a father
			limit = { scope:hc_random_relative_selection = { is_male = yes } }
			set_father = scope:hc_random_relative_selection
			if = {
				limit = { # Check for and set valid mother
					scope:hc_random_relative_selection.primary_spouse ?= {
						is_female = yes
						OR = {
							can_be_parent_of = root
							#For some reason can_be_parent_of doesn't work with female characters?
							16 <= {
								value = scope:hc_random_relative_selection.primary_spouse.age
								subtract = root.age
							}
						}
					}
				}
				set_mother = scope:hc_random_relative_selection.primary_spouse
			}
		}
		else = { # You selected a mother
			set_mother = scope:hc_random_relative_selection
			if = {
				limit = { # Check for and set valid father
					scope:hc_random_relative_selection.primary_spouse ?= {
						is_male = yes
						can_be_parent_of = root
					}
				}
				set_father = scope:hc_random_relative_selection.primary_spouse
			}
		}

		if = { #If any child is not the same house
			limit = { any_child = { NOT = { house = root.house } } }
			every_child = { #Then we scope to every possible child and set their house as YOUR house.
				limit = { NOT = { house = root.house } }
				set_house = root.house
			}
				if = {
					limit = { is_dwarf = yes }
					set_culture = scope:hc_selection.culture
				}
		}
		remove_character_flag = relative_pop_living
		hidden_effect = { remove_trait = house_customizer }
	}

	option = {
		name = "lotr_house_customizer.0200.no"
		trigger = { has_character_flag = no_ancestors }
		# Ordered List Maintenance
		var:si_selected_character = { save_scope_as = hc_random_relative_selection }
		clear_variable_list = possible_characters
		# House Customizer Maintenance
		set_house = scope:hc_random_relative_selection.house #Set's the player's house to the selection's house

		if = { # You have the bastard trait
			limit = { has_trait = bastard }
			hidden_effect = { remove_trait = bastard }
		}

		if = { #If any child is not the same house
			limit = { any_child = { NOT = { house = root.house } } }
			every_child = { #Then we scope to every possible child and set their house as YOUR house.
				limit = { NOT = { house = root.house } }
				set_house = root.house
				if = {
					limit = { is_dwarf = yes }
					set_culture = scope:hc_selection.culture
				}
			}
		}
		remove_character_flag = relative_pop_extinct
		hidden_effect = { remove_trait = house_customizer }
	}

	# On second thought - extinct
	option = {
		name = lotr_house_customizer.0200.back
		custom_tooltip = lotr_house_customizer.0200.back.tt
		trigger = { has_character_flag = relative_pop_extinct }
		clear_variable_list = possible_characters
		remove_character_flag = relative_pop_extinct
		trigger_event = lotr_house_customizer.0100
	}

	# On second thought - living
	option = {
		name = lotr_house_customizer.0200.back
		custom_tooltip = lotr_house_customizer.0200.back.tt
		trigger = { has_character_flag = relative_pop_living }
		clear_variable_list = possible_characters
		remove_character_flag = relative_pop_living
		trigger_event = lotr_house_customizer.0101
	}
}
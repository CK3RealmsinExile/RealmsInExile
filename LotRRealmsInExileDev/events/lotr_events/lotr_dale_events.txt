namespace = dale

### Dale trade vs. warfare event chain ###
 #triggered after King Bain's intro event

dale.0001 = { # The royal council
	content_source = realms_dlc
	type = character_event
	title = dale.0001.t
	desc = dale.0001.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:chancellor
		animation = chancellor
	}
	override_background = {
		reference = council_chamber
	}
	immediate = {
		if = {
    		limit = { 
				NOT = {
					exists = root.cp:councillor_chancellor
				}
			}
			create_character = {
				template = beautiful_peasant_character
				employer = root
				gender_female_chance = 25
				save_scope_as = new_chancellor
			}
			hidden_effect = {
				assign_councillor_type = {
					type = councillor_chancellor
					target = scope:new_chancellor
					remove_existing_councillor = no
				}
			}
		}
		root.cp:councillor_chancellor = { save_scope_as = chancellor }
	}
	
	option = { # We'll focus on our trade
		name = dale.0001.a 
		add_character_modifier = dale_trade_focus
		title:k_dale.holder = {
			trigger_event = {
				id = dale.0002
				days = { 60 120 }
			}
		}
	}
	
	option = { # We should invest in our military
		name = dale.0001.b 
		add_character_modifier = dale_military_focus
		title:k_dale.holder = {
			trigger_event = {
				id = dale.0002
				days = { 60 120 }
			}
		}
	}
}

dale.0002 = { # A question of alliance
	content_source = realms_dlc
	type = character_event
	title = dale.0002.t
	desc = dale.0002.desc
	theme = realm
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:marshal
		animation = marshal
	}
	override_background = {
		reference = throne_room
	}
	immediate = {
		if = {
    		limit = { 
				NOT = {
					exists = root.cp:councillor_marshal
				}
			}
			create_character = {
				template = beautiful_peasant_character
				employer = root
				gender_female_chance = 25
				save_scope_as = new_marshal
			}
			hidden_effect = {
				assign_councillor_type = {
					type = councillor_marshal
					target = scope:new_marshal
					remove_existing_councillor = no
				}
			}
		}
		root.cp:councillor_marshal = { save_scope_as = marshal }
		
		if = {
			limit = {
				exists = title:k_erebor.holder
			}
			title:k_erebor.holder = { save_scope_as = ereborholder }
		}
		
		if = { 
			limit = {
				exists = title:k_lasgalen.holder 
			}
			title:k_lasgalen.holder = { save_scope_as = lasgalenholder }
		}
	}
	
	option = { # We'll renew our old alliance with the dwarves
		name = dale.0002.a 
		trigger = { 
			exists = title:k_erebor.holder
			title:k_erebor.holder = { 
				is_dwarf = yes 
				faith_is_good = yes
			}
		}
		custom_tooltip = dale.0002.a.tt
		create_alliance = {
			target = scope:ereborholder
			allied_through_owner = root
			allied_through_target = scope:ereborholder
		}
		scope:ereborholder = {
			add_opinion = {
				modifier = perk_negotiated_alliance_opinion
				target = root
			}
		}
		hidden_effect = {
			culture = { 
				add_innovation = innovation_formalized_emissaries
			}
			scope:ereborholder.culture = { 
				add_innovation = innovation_formalized_emissaries
			}
		}
		# trigger_event = {
			# id = dale.0003
			# days = { 60 120 }
		# }
	}
	
	option = { # Let us approach the elves of the Woodland realm
		name = dale.0002.b
		trigger = { 
			exists = title:k_lasgalen.holder
			title:k_lasgalen.holder = { 
				is_elf = yes 
				faith_is_good = yes
			}
		}
		custom_tooltip = dale.0002.b.tt
		create_alliance = {
			target = scope:lasgalenholder
			allied_through_owner = root
			allied_through_target = scope:lasgalenholder
		}
		scope:lasgalenholder = {
			add_opinion = {
				modifier = perk_negotiated_alliance_opinion
				target = root
			}
		}
		hidden_effect = {
			culture = { 
				add_innovation = innovation_formalized_emissaries
			}
			scope:lasgalenholder.culture = { 
				add_innovation = innovation_formalized_emissaries
			}
		}
		# trigger_event = {
			# id = dale.0003
			# days = { 60 120 }
		# }
	}
	
	# option = { # Dorwinion will aid us against the Easterlings
		# name = dale.0002.c
		# trigger = { 
			# exists = title:k_dorwinion.holder
			# title:k_dorwinion.holder = { 
				# faith_is_good = yes
			# }
		# }
		# create_alliance = {
			# target = title:k_dorwinion.holder
			# allied_through_owner = root
			# allied_through_target = title:k_dorwinion.holder
		# }
		# hidden_effect = {
			# culture = { 
				# add_innovation = innovation_formalized_emissaries
			# }
			# title:k_dorwinion.holder.culture = { 
				# add_innovation = innovation_formalized_emissaries
			# }
		# }
		# # trigger_event = {
			# # id = dale.0003
			# # days = { 60 120 }
		# # }
	# }
	
	option = { # We will rely on our own strength
		name = dale.0002.d 
		add_prestige = major_prestige_gain
		
		# trigger_event = {
			# id = dale.0003
			# days = { 60 120 }
		# }
	}
}
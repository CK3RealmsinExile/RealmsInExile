namespace = elven_racial

#########################
## ELVEN RACIAL EVENTS ##
#########################

############################# Elven Racial Event
# elven_racial.0001 - 0008 	~ Elven Pregnancy events
# elven_racial.0009 - 0103	~ Elven Game start events
# elven_racial.0200 - 0250	~ Elven CB events
# elven_racial.0300 - 0350	~ Elven scheme events
# elven_racial.0400 - 0650	~ Elven general events
# elven_racial.1000 - 1050 	~ Sailing West events
# elven_racial.1200 - 1299 	~ Wander the Forest events

## Elven Pregnancy

elven_racial.0001 = { #Start trying for a child
	content_source = realms_dlc
	type = character_event
	title = elven_racial.0001.t
	desc = elven_racial.0001.desc
	theme = pregnancy

	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = primary_spouse
		animation = admiration
	}

	trigger = {
		NOR = {
			has_character_flag = elf_childbirth_ongoing
			has_character_modifier = elf_childraising_modifier
			is_married = no
		}
		# # Playable characters need hope level 2 to have kids
		# hope_level > 1
		# primary_spouse.hope_level > 1
		# trigger_if = { #NPCs need hope level 3 to have kids
			# limit = {
				# is_playable_character = no
				# primary_spouse = { is_playable_character = no }
			# }
			# hope_level > 2
			# primary_spouse.hope_level > 2
		# }
	}
	on_trigger_fail = { #NPCs will try again in 5-10 years
		if = {
			limit = {
				is_playable_character = no
				primary_spouse = { is_playable_character = no }
			}
			trigger_event = {
				id = elven_racial.0001
				years = { 5 10 }
			}
		}
	}

	option = { # Fingers crossed!
		name = elven_racial.0001.a
		add_character_flag = elf_childbirth_ongoing
		primary_spouse = { add_character_flag = elf_childbirth_ongoing }
		trigger_event = { #Successful
			id = elven_racial.0002
			days = { 180 720 }
		}
	}
}

elven_racial.0002 = { #Pregnant!
	content_source = realms_dlc
	type = character_event
	title = elven_racial.0002.t
	desc = elven_racial.0002.desc
	theme = pregnancy

	trigger = { is_married = yes }

	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = primary_spouse
		animation = happiness
	}
	
	immediate = {
		add_elven_hope_effect = { VALUE = medium_elven_hope_gain HOPE_EFFECT = effect_elven_very_low_hope } # Pregnancy is a hopeful sign 
	}
	
	option = { # Here we go!
		name = elven_racial.0002.a
		add_trait = elf_pregnant_1
		primary_spouse = { add_trait = elf_pregnant_1 }
		if = {
			limit = {
				is_female = yes
			}
			save_scope_as = mother
			primary_spouse = { save_scope_as = father }
		}
		else = {
			save_scope_as = father
			primary_spouse = { save_scope_as = mother }
		}
		hidden_effect = {
			random_list = {
				99 = {
					trigger_event = {
						id = elven_racial.0006 #Single baby
						days = { 2904 3576 } #Target 9 years, human sd of births is c. 14 days therefore 95% occur within +/- 28days. Elven gestation 12 times longer so +/- 336 for elves. i.e. 8-10 years about
					}
				}
				1 = {
					trigger_event = {
						id = elven_racial.0007 #Twins
						days = { 2904 3576 } #Target 9 years, human sd of births is c. 14 days therefore 95% occur within +/- 28days. Elven gestation 12 times longer so +/- 336 for elves. i.e. 8-10 years about
					}
				}
			}
			scope:mother = {
				set_variable = {
					name = year_became_pregnant
					value = current_year
				}
			}
		}
		trigger_event = { # Focused Fea
			id = elven_racial.0003
			days = { 180 270 }
		}
		primary_spouse = { #Set up more child willingness model if not exists
			if = {
				limit = {
					NOT = { has_variable = more_children_willingness }
				}
				if = {
					limit = {
						OR = {
							dynasty ?= { has_dynasty_perk = lotr_elven_legacy_5 }
							root.dynasty ?= { has_dynasty_perk = lotr_elven_legacy_5 }
						}
					}
					set_variable = {
						name = more_children_willingness
						value = { 50 150 }
					}
				}
				else = {
					set_variable = {
						name = more_children_willingness
						value = { 10 115 }
					}
				}
			}
		}
	}
}

elven_racial.0003 = { #First focused fea
	content_source = realms_dlc
	type = character_event
	title = elven_racial.0003.t
	desc = elven_racial.0003.desc
	theme = pregnancy

	left_portrait = {
		character = root
		animation = love
	}
	right_portrait = {
		character = primary_spouse
		animation = happiness
	}

	trigger = { is_married = yes }

	option = { # We shall focus our energies
		name = elven_racial.0003.a
		if = {
			limit = {
				OR = {
					dynasty = { has_dynasty_perk = lotr_elven_legacy_5 }
					root.dynasty = { has_dynasty_perk = lotr_elven_legacy_5 }
				}
			}
			custom_tooltip = current_fea
			custom_tooltip = fea_cost_5
		}
		add_character_flag = focused_fea_1
		change_trait_rank = {
			trait = elf_pregnant
			rank = 1
		}
		primary_spouse = {
			change_trait_rank = {
				trait = elf_pregnant
				rank = 1
			}
			change_variable = { #Subtract willingness for additional effort involved
				name = more_children_willingness
				subtract = 5
			}
		}
		trigger_event = {
			id = elven_racial.0004
			days = { 270 360 }
		}
		ai_chance = {
			base = 80
		}
	}

	option = { # We shall enjoy this special time
		name = elven_racial.0003.b
		if = {
			limit = {
				OR = {
					dynasty = { has_dynasty_perk = lotr_elven_legacy_5 }
					root.dynasty = { has_dynasty_perk = lotr_elven_legacy_5 }
				}
			}
			custom_tooltip = current_fea
		}
		ai_chance = {
			base = 20
		}
	}
}

elven_racial.0004 = { #Second focused fea
	content_source = realms_dlc
	type = character_event
	title = elven_racial.0004.t
	desc = elven_racial.0004.desc
	theme = pregnancy

	left_portrait = {
		character = root
		animation = love
	}
	right_portrait = {
		character = primary_spouse
		animation = happiness
	}

	trigger = { is_married = yes }

	option = { # We shall focus our energies
		name = elven_racial.0004.a
		if = {
			limit = {
				OR = {
					dynasty = { has_dynasty_perk = lotr_elven_legacy_5 }
					root.dynasty = { has_dynasty_perk = lotr_elven_legacy_5 }
				}
			}
			custom_tooltip = current_fea
			custom_tooltip = fea_cost_10
		}
		add_character_flag = focused_fea_2
		remove_character_flag = focused_fea_1
		change_trait_rank = {
			trait = elf_pregnant
			rank = 1
		}
		primary_spouse = {
			change_trait_rank = {
				trait = elf_pregnant
				rank = 1
			}
			change_variable = { #Subtract willingness for additional effort involved
				name = more_children_willingness
				subtract = 10
			}
		}
		trigger_event = {
			id = elven_racial.0005
			days = { 270 360 }
		}
		ai_chance = {
			base = 60
		}
	}

	option = { # We shall enjoy this special time
		name = elven_racial.0004.b
		if = {
			limit = {
				OR = {
					dynasty = { has_dynasty_perk = lotr_elven_legacy_5 }
					root.dynasty = { has_dynasty_perk = lotr_elven_legacy_5 }
				}
			}
			custom_tooltip = current_fea
		}
		ai_chance = {
			base = 40
		}
	}
}

elven_racial.0005 = { #Final focused fea
	content_source = realms_dlc
	type = character_event
	title = elven_racial.0005.t
	desc = elven_racial.0005.desc
	theme = pregnancy

	left_portrait = {
		character = root
		animation = love
	}
	right_portrait = {
		character = primary_spouse
		animation = happiness
	}

	trigger = { is_married = yes }

	option = { # We shall focus our energies
		name = elven_racial.0005.a
		if = {
			limit = {
				OR = {
					dynasty = { has_dynasty_perk = lotr_elven_legacy_5 }
					root.dynasty = { has_dynasty_perk = lotr_elven_legacy_5 }
				}
			}
			custom_tooltip = current_fea
			custom_tooltip = fea_cost_15
		}
		add_character_flag = focused_fea_3
		remove_character_flag = focused_fea_2
		change_trait_rank = {
			trait = elf_pregnant
			rank = 1
		}
		primary_spouse = {
			change_trait_rank = {
				trait = elf_pregnant
				rank = 1
			}
			change_variable = { #Subtract willingness for additional effort involved
				name = more_children_willingness
				subtract = 15
			}
		}
		ai_chance = {
			base = 40
		}
	}

	option = { # We shall enjoy this special time
		name = elven_racial.0005.b
		if = {
			limit = {
				OR = {
					dynasty = { has_dynasty_perk = lotr_elven_legacy_5 }
					root.dynasty = { has_dynasty_perk = lotr_elven_legacy_5 }
				}
			}
			custom_tooltip = current_fea
		}
		ai_chance = {
			base = 60
		}
	}
}

elven_racial.0006 = { #Birth - single baby
	content_source = realms_dlc
	type = character_event
	title = elven_racial.0006.t
	desc = elven_racial.0006.desc
	theme = pregnancy

	left_portrait = {
		character = root
		animation = newborn
	}
	right_portrait = {
		character = primary_spouse
		animation = happiness
	}
	lower_center_portrait = {
		character = scope:child
		animation = happiness
	}

	trigger = {
		OR = {
			is_married = yes
			is_female = yes
		}
	}

	immediate = {
		#play_music_cue_once = { TRACK = mx_cue_birth }
		
		scope:mother = {
			remove_variable = year_became_pregnant
		}
		if = {
			limit = { is_female = yes }
			create_character = {
				faith = root.faith
				culture = root.culture
				location = root.location
				mother = root 
				father = root.primary_spouse
				gender_female_chance = 50
				age = 0
				save_scope_as = child
				after_creation = {
					scope:child = { replace_unelven_traits = yes }
				}
			}
			hidden_effect = {
				if = {
					limit = { matrilinear_marriage = yes }
					scope:child = { set_house = root.house }
				}
				else = { scope:child = { set_house = root.primary_spouse.house } }
			}
		}
		else = {
			create_character = {
				faith = root.faith
				culture = root.culture
				location = root.location
				mother = root.primary_spouse
				father = root
				gender_female_chance = 50
				age = 0
				save_scope_as = child
				after_creation = {
					scope:child = { replace_unelven_traits = yes }
				}
			}
			hidden_effect = {
				if = {
					limit = { matrilinear_marriage = yes }
					scope:child = { set_house = root.primary_spouse.house }
				}
				else = { scope:child = { set_house = root.house } }
			}
		}
		hidden_effect = {
			if = {
				limit = { exists = root.employer }
				scope:child = {
					set_employer = root.employer
				}
			}
			else = {
				scope:child = {
					set_employer = root
				}
			}
		}
		if = {
			limit = {
				has_character_flag = focused_fea_1
			}
			remove_character_flag = focused_fea_1
			hidden_effect = {
				scope:child = {
					random_list = {
						50 = { add_diplomacy_skill = 1 }
						50 = { add_diplomacy_skill = 2 }
					}
					random_list = {
						50 = { add_martial_skill = 1 }
						50 = { add_martial_skill = 2 }
					}
					random_list = {
						50 = { add_stewardship_skill = 1 }
						50 = { add_stewardship_skill = 2 }
					}
					random_list = {
						50 = { add_intrigue_skill = 1 }
						50 = { add_intrigue_skill = 2 }
					}
					random_list = {
						50 = { add_learning_skill = 1 }
						50 = { add_learning_skill = 2 }
					}
					random_list = {
						50 = { add_prowess_skill = 1 }
						50 = { add_prowess_skill = 2 }
					}
				}
				remove_trait = elf_pregnant_2
				primary_spouse = { remove_trait = elf_pregnant_2 }
			}
		}
		else_if = {
			limit = {
				has_character_flag = focused_fea_2
			}
			remove_character_flag = focused_fea_2
			hidden_effect = {
				scope:child = {
					random_list = {
						50 = { add_diplomacy_skill = 2 }
						50 = { add_diplomacy_skill = 3 }
					}
					random_list = {
						50 = { add_martial_skill = 2 }
						50 = { add_martial_skill = 3 }
					}
					random_list = {
						50 = { add_stewardship_skill = 2 }
						50 = { add_stewardship_skill = 3 }
					}
					random_list = {
						50 = { add_intrigue_skill = 2 }
						50 = { add_intrigue_skill = 3 }
					}
					random_list = {
						50 = { add_learning_skill = 2 }
						50 = { add_learning_skill = 3 }
					}
					random_list = {
						50 = { add_prowess_skill = 2 }
						50 = { add_prowess_skill = 3 }
					}
				}
				remove_trait = elf_pregnant_3
				primary_spouse = { remove_trait = elf_pregnant_3 }
			}
		}
		else_if = {
			limit = {
				has_character_flag = focused_fea_3
			}
			remove_character_flag = focused_fea_3
			hidden_effect = {
				scope:child = {
					random_list = {
						50 = { add_diplomacy_skill = 3 }
						50 = { add_diplomacy_skill = 5 }
					}
					random_list = {
						50 = { add_martial_skill = 3 }
						50 = { add_martial_skill = 5 }
					}
					random_list = {
						50 = { add_stewardship_skill = 3 }
						50 = { add_stewardship_skill = 5 }
					}
					random_list = {
						50 = { add_intrigue_skill = 3 }
						50 = { add_intrigue_skill = 5 }
					}
					random_list = {
						50 = { add_learning_skill = 3 }
						50 = { add_learning_skill = 5 }
					}
					random_list = {
						50 = { add_prowess_skill = 3 }
						50 = { add_prowess_skill = 5 }
					}
				}
				remove_trait = elf_pregnant_4
				primary_spouse = { remove_trait = elf_pregnant_4 }
			}
		}
		else = {
			remove_trait = elf_pregnant_1
			primary_spouse = { remove_trait = elf_pregnant_1 }
		}
		if = {
			limit = {
				any_child = {
					count = 1
				}
			}
			create_character_memory = {
				type = first_born
				participants = {
					child = scope:child
				}
			}
		}
		else = {
			create_character_memory = {
				type = child_born
				participants = {
					child = scope:child
				}
			}
		}
		primary_spouse = {
			if = {
				limit = {
					any_child = {
						count = 1
					}
				}
				create_character_memory = {
					type = first_born
					participants = {
						child = scope:child
					}
				}
			}
			else = {
				create_character_memory = {
					type = child_born
					participants = {
						child = scope:child
					}
				}
			}
		}
		add_character_modifier = {
			modifier = elf_childraising_modifier
			years = 50
		}
		primary_spouse = {
			remove_character_flag = elf_childbirth_ongoing
			add_character_modifier = {
				modifier = elf_childraising_modifier
				years = 50
			}
			change_variable = { #Reduce willingness for effort of childbirth
				name = more_children_willingness
				subtract = { 25 35 }
			}
		}
		remove_character_flag = elf_childbirth_ongoing
	}

	widgets = {
		widget = {
			is_shown = {
				allow_naming_on_birth_of_child_trigger = { CHILD = scope:child }
			}
			gui = "event_window_widget_name_child"
			container = "dynamic_birth_name"
			controller = name_character
			setup_scope = { scope:child = { save_scope_as = name_character_target } }
		}
	}

	option = { # A baby!
		name = elven_racial.0006.a
		add_elven_hope_effect = { VALUE = medium_elven_hope_gain HOPE_EFFECT = effect_elven_hope_child_has_been_born } # Baby be cute
		if = {
			limit = {
				OR = {
					dynasty = { has_dynasty_perk = lotr_elven_legacy_5 }
					root.dynasty = { has_dynasty_perk = lotr_elven_legacy_5 }
				}
			}
			custom_tooltip = current_fea
		}
		trigger_event = {
			id = elven_racial.0008
			months = 1
		}
	}
}

elven_racial.0007 = { #Birth - twins
	content_source = realms_dlc
	type = character_event
	title = elven_racial.0007.t
	desc = elven_racial.0007.desc
	theme = pregnancy

	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = primary_spouse
		animation = newborn
	}
	lower_left_portrait = {
		character = scope:child
		animation = happiness
	}
	lower_right_portrait = {
		character = scope:child_2
		animation = happiness
	}

	trigger = {
		OR = {
			is_married = yes
			is_female = yes
		}
	}

	immediate = {
		#play_music_cue_once = { TRACK = mx_cue_birth }
		
		scope:mother = {
			remove_variable = year_became_pregnant
		}
		if = {
			limit = { is_female = yes }
			create_character = {
				faith = root.faith
				culture = root.culture
				location = root.location
				mother = root 
				father = root.primary_spouse
				gender_female_chance = 50
				age = 0
				trait = twin
				save_scope_as = child
				after_creation = {
					scope:child = { replace_unelven_traits = yes }
				}
			}
			create_character = {
				faith = root.faith
				culture = root.culture
				location = root.location
				mother = root 
				father = root.primary_spouse
				gender_female_chance = 50
				age = 0
				trait = twin
				save_scope_as = child_2
				after_creation = {
					scope:child_2 = { replace_unelven_traits = yes }
				}
			}
			hidden_effect = {
				if = {
					limit = { matrilinear_marriage = yes }
					scope:child = { set_house = root.house }
				}
				else = { scope:child = { set_house = root.primary_spouse.house } }
				if = {
					limit = { matrilinear_marriage = yes }
					scope:child_2 = { set_house = root.house }
				}
				else = { scope:child_2 = { set_house = root.primary_spouse.house } }
			}
		}
		else = {
			create_character = {
				faith = root.faith
				culture = root.culture
				location = root.location
				mother = root.primary_spouse 
				father = root
				gender_female_chance = 50
				age = 0
				trait = twin
				save_scope_as = child
				after_creation = {
					scope:child = { replace_unelven_traits = yes }
				}
			}
			create_character = {
				faith = root.faith
				culture = root.culture
				location = root.location
				mother = root.primary_spouse 
				father = root
				gender_female_chance = 50
				age = 0
				trait = twin
				save_scope_as = child_2
				after_creation = {
					scope:child_2 = { replace_unelven_traits = yes }
				}
			}
			hidden_effect = {
				if = {
					limit = { matrilinear_marriage = yes }
					scope:child = { set_house = root.primary_spouse.house }
				}
				else = { scope:child = { set_house = root.house } }
				if = {
					limit = { matrilinear_marriage = yes }
					scope:child_2 = { set_house = root.primary_spouse.house }
				}
				else = { scope:child_2 = { set_house = root.house } }
			}
		}
		hidden_effect = {
			if = {
				limit = { exists = root.employer }
				scope:child = {
					set_employer = root.employer
				}
			}
			else = {
				scope:child = {
					set_employer = root
				}
			}
			if = {
				limit = { exists = root.employer }
				scope:child_2 = {
					set_employer = root.employer
				}
			}
			else = {
				scope:child_2 = {
					set_employer = root
				}
			}
		}
		if = {
			limit = {
				has_character_flag = focused_fea_1
			}
			remove_character_flag = focused_fea_1
			hidden_effect = {
				scope:child = {
					random_list = {
						50 = { add_diplomacy_skill = 1 }
						50 = { add_diplomacy_skill = 2 }
					}
					random_list = {
						50 = { add_martial_skill = 1 }
						50 = { add_martial_skill = 2 }
					}
					random_list = {
						50 = { add_stewardship_skill = 1 }
						50 = { add_stewardship_skill = 2 }
					}
					random_list = {
						50 = { add_intrigue_skill = 1 }
						50 = { add_intrigue_skill = 2 }
					}
					random_list = {
						50 = { add_learning_skill = 1 }
						50 = { add_learning_skill = 2 }
					}
					random_list = {
						50 = { add_prowess_skill = 1 }
						50 = { add_prowess_skill = 2 }
					}
				}
				scope:child_2 = {
					random_list = {
						50 = { add_diplomacy_skill = 1 }
						50 = { add_diplomacy_skill = 2 }
					}
					random_list = {
						50 = { add_martial_skill = 1 }
						50 = { add_martial_skill = 2 }
					}
					random_list = {
						50 = { add_stewardship_skill = 1 }
						50 = { add_stewardship_skill = 2 }
					}
					random_list = {
						50 = { add_intrigue_skill = 1 }
						50 = { add_intrigue_skill = 2 }
					}
					random_list = {
						50 = { add_learning_skill = 1 }
						50 = { add_learning_skill = 2 }
					}
					random_list = {
						50 = { add_prowess_skill = 1 }
						50 = { add_prowess_skill = 2 }
					}
				}
				remove_trait = elf_pregnant_2
				primary_spouse = { remove_trait = elf_pregnant_2 }
			}
		}
		else_if = {
			limit = {
				has_character_flag = focused_fea_2
			}
			remove_character_flag = focused_fea_2
			hidden_effect = {
				scope:child = {
					random_list = {
						50 = { add_diplomacy_skill = 2 }
						50 = { add_diplomacy_skill = 3 }
					}
					random_list = {
						50 = { add_martial_skill = 2 }
						50 = { add_martial_skill = 3 }
					}
					random_list = {
						50 = { add_stewardship_skill = 2 }
						50 = { add_stewardship_skill = 3 }
					}
					random_list = {
						50 = { add_intrigue_skill = 2 }
						50 = { add_intrigue_skill = 3 }
					}
					random_list = {
						50 = { add_learning_skill = 2 }
						50 = { add_learning_skill = 3 }
					}
					random_list = {
						50 = { add_prowess_skill = 2 }
						50 = { add_prowess_skill = 3 }
					}
				}
				scope:child_2 = {
					random_list = {
						50 = { add_diplomacy_skill = 2 }
						50 = { add_diplomacy_skill = 3 }
					}
					random_list = {
						50 = { add_martial_skill = 2 }
						50 = { add_martial_skill = 3 }
					}
					random_list = {
						50 = { add_stewardship_skill = 2 }
						50 = { add_stewardship_skill = 3 }
					}
					random_list = {
						50 = { add_intrigue_skill = 2 }
						50 = { add_intrigue_skill = 3 }
					}
					random_list = {
						50 = { add_learning_skill = 2 }
						50 = { add_learning_skill = 3 }
					}
					random_list = {
						50 = { add_prowess_skill = 2 }
						50 = { add_prowess_skill = 3 }
					}
				}
				remove_trait = elf_pregnant_3
				primary_spouse = { remove_trait = elf_pregnant_3 }
			}
		}
		else_if = {
			limit = {
				has_character_flag = focused_fea_3
			}
			remove_character_flag = focused_fea_3
			hidden_effect = {
				scope:child = {
					random_list = {
						50 = { add_diplomacy_skill = 3 }
						50 = { add_diplomacy_skill = 5 }
					}
					random_list = {
						50 = { add_martial_skill = 3 }
						50 = { add_martial_skill = 5 }
					}
					random_list = {
						50 = { add_stewardship_skill = 3 }
						50 = { add_stewardship_skill = 5 }
					}
					random_list = {
						50 = { add_intrigue_skill = 3 }
						50 = { add_intrigue_skill = 5 }
					}
					random_list = {
						50 = { add_learning_skill = 3 }
						50 = { add_learning_skill = 5 }
					}
					random_list = {
						50 = { add_prowess_skill = 3 }
						50 = { add_prowess_skill = 5 }
					}
				}
				scope:child_2 = {
					random_list = {
						50 = { add_diplomacy_skill = 3 }
						50 = { add_diplomacy_skill = 5 }
					}
					random_list = {
						50 = { add_martial_skill = 3 }
						50 = { add_martial_skill = 5 }
					}
					random_list = {
						50 = { add_stewardship_skill = 3 }
						50 = { add_stewardship_skill = 5 }
					}
					random_list = {
						50 = { add_intrigue_skill = 3 }
						50 = { add_intrigue_skill = 5 }
					}
					random_list = {
						50 = { add_learning_skill = 3 }
						50 = { add_learning_skill = 5 }
					}
					random_list = {
						50 = { add_prowess_skill = 3 }
						50 = { add_prowess_skill = 5 }
					}
				}
				remove_trait = elf_pregnant_4
				primary_spouse = { remove_trait = elf_pregnant_4 }
			}
		}
		create_character_memory = {
			type = twins_born
			participants = {
				child = scope:child
				child_2 = scope:child_2
			}
		}
		primary_spouse = {
			create_character_memory = {
				type = twins_born
				participants = {
					child = scope:child
					child_2 = scope:child_2
				}
			}
		}
		remove_character_flag = elf_childbirth_ongoing
		add_character_modifier = {
			modifier = elf_childraising_modifier
			years = 50
		}
		primary_spouse = {
			remove_character_flag = elf_childbirth_ongoing
			add_character_modifier = {
				modifier = elf_childraising_modifier
				years = 50
			}
			change_variable = { #Reduce willingness for effort of childbirth
				name = more_children_willingness
				subtract = { 50 70 }
			}
		}
	}

	widgets = {
		widget = {
			is_shown = {
				allow_naming_on_birth_of_child_trigger = { CHILD = scope:child }
			}
			gui = "event_window_widget_name_child"
			container = "dynamic_birth_name"
			controller = name_character
			setup_scope = { scope:child = { save_scope_as = name_character_target } }
		}
		widget = {
			is_shown = {
				allow_naming_on_birth_of_child_trigger = { CHILD = scope:child_2 }
			}
			gui = "event_window_widget_name_child"
			container = "dynamic_birth_name"
			controller = name_character
			setup_scope = { scope:child_2 = { save_scope_as = name_character_target } }
		}
	}

	option = { # Two babies!
		name = elven_racial.0007.a
		add_elven_hope_effect = { VALUE = major_elven_hope_gain HOPE_EFFECT = effect_elven_hope_twins_has_been_born } # Twins? BIG if true!
		if = {
			limit = {
				OR = {
					dynasty = { has_dynasty_perk = lotr_elven_legacy_5 }
					root.dynasty = { has_dynasty_perk = lotr_elven_legacy_5 }
				}
			}
			custom_tooltip = current_fea
		}
		trigger_event = {
			id = elven_racial.0008
			months = 1
		}
	}
}

elven_racial.0008 = { #Spouse no longer willing to have any children
	content_source = realms_dlc
	type = character_event
	title = elven_racial.0008.t
	desc = elven_racial.0008.desc
	theme = pregnancy

	left_portrait = {
		character = root
		animation = love
	}
	right_portrait = {
		character = primary_spouse
		animation = happiness
	}

	trigger = {
		primary_spouse ?= {
			var:more_children_willingness <= 0
		}
	}

	option = { # Wasn't it wonderful though?
		name = elven_racial.0008.a
		if = {
			limit = {
				OR = {
					dynasty = { has_dynasty_perk = lotr_elven_legacy_5 }
					root.dynasty = { has_dynasty_perk = lotr_elven_legacy_5 }
				}
			}
			custom_tooltip = current_fea
		}
		add_character_modifier = elf_child_limit_modifier
		primary_spouse = {
			add_character_modifier = elf_child_limit_modifier
			remove_variable = more_children_willingness
		}
	}
}

## Game Start - Elven mechanics setup

elven_racial.0009 = { #Fired for every character at game start
	scope = none
	hidden = yes

	immediate = {
		# Doing this will supposedly trigger the `on_natural_death_second_chance`
		# that will prevent death and send major elves to Tirion's court
		# and minor elves will get a "sailed_west" specific natural death
		# if = {
		# 	limit = {
		# 		is_elf = yes
		# 		NOT = {
		# 			has_perk = know_thyself_perk
		# 		}
		# 	}
		# 	add_perk = know_thyself_perk
		# }
		if = {
			limit = {
				is_elf = yes
				any_child = {
					count = all
					age < 350
				}
			}
			#Do Nothing - these guys may still have children
		}
		else_if = {
			limit = {
				is_elf = yes
				any_child = {
					count = all
					age >= 350
				}
			}
			#Otherwise if any kid is over 350, they're done with childbirth
			add_character_modifier = elf_child_limit_modifier
		}

		if = {
			limit = {
				is_elf = yes
				any_spouse = {
					count > 0
				}
			}
			if = {
				limit = { NOT = { has_relation_soulmate = primary_spouse } }
				set_relation_soulmate = primary_spouse
			}
		}
	}
}

elven_racial.0011 = { # Forced conversion to elven government type
	scope = none
	hidden = yes

	trigger = {
		is_elf = yes
		NOT = { government_has_flag = government_is_elven }
	}

	immediate = {
		change_government = elven_government
	}
}

elven_racial.0100 = { #Correct historical elf ages
	scope = none
	hidden = yes

	immediate = {
		### The Elf-Fathers ###
		# Nos Imin
		character:lineofimin1 = { # Imin, first-awoken of the Elves
			change_age = 4310
		}
		character:lineofimin2 = { # Iminye, wife of Imin
			change_age = 4307
		}
		character:lineofimin3 = { # Indoglaure
			change_age = 4260
		}
		character:lineofimin4 = { # Ithe
			change_age = 4259
		}
		character:lineofimin5 = { # Galadon
			change_age = 4210
		}
		character:lineofimin6 = { # Indiye
			change_age = 4212
		}
		character:lineofimin7 = { # Indoclar
			change_age = 4160
		}
		character:lineofimin8 = { # Indise
			change_age = 4158
		}
		character:lineofimin9 = { # Inid
			change_age = 4107
		}
		character:lineofimin10 = { # Galye
			change_age = 4104
		}
		# Nos Tata
		character:lineoftata1 = { # Tata, second-awoken of the Elves
			change_age = 4309
		}
		character:lineoftata2 = { # Tatie, wife of Tata
			change_age = 4306
		}
		character:lineoftata3 = { # Calayondo
			change_age = 4264
		}
		character:lineoftata4 = { # Hinye
			change_age = 4266
		}
		character:lineoftata5 = { # Eldacasa
			change_age = 4218
		}
		character:lineoftata6 = { # Riganna
			change_age = 4220
		}
		character:lineoftata7 = { # Endero
			change_age = 4172
		}
		character:lineoftata8 = { # Falassi
			change_age = 4170
		}
		character:lineoftata9 = { # Feganir
			change_age = 4125
		}
		character:lineoftata10 = { # Esede
			change_age = 4124
		}
		character:lineoftata11 = { # Maidros, father of Finwe
			change_age = 4079
		}
		character:lineoftata12 = { # Miretari, mother of Finwe
			change_age = 4079
		}
		# Nos Enel
		character:lineofenel1 = { # Enel, third-awoken of the Elves
			change_age = 4308
		}
		character:lineofenel2 = { # Enelye, wife of Enel
			change_age = 4305
		}
		character:lineofenel3 = { # Arwe
			change_age = 4246
		}
		character:lineofenel4 = { # Nenye
			change_age = 4244
		}
		character:lineofenel5 = { # Galwe
			change_age = 4180
		}
		character:lineofenel6 = { # Delye
			change_age = 4180
		}
		character:lineofenel7 = { # Tugwe
			change_age = 4113
		}
		character:lineofenel8 = { # Elenye
			change_age = 4114
		}
		character:lineofenel9 = { # Wolwe
			change_age = 4046
		}
		character:lineofenel10 = { # Domye
			change_age = 4045
		}
		character:lineofenel11 = { # Wiswe
			change_age = 4030
		}
		character:lineofenel12 = { # Orye
			change_age = 4023
		}
		character:lineofenel13 = { # Ronwe
			change_age = 3980
		}
		character:lineofenel14 = { # Tarwende
			change_age = 3979
		}
		character:lineofenel15 = { # Wathare
			change_age = 3934
		}

		### The Vanyar ###
		# Nos Ingwe
		character:lineofingwe1 = { # Ilion, Father of Ingwe
			change_age = 4058
		}
		character:lineofingwe2 = { # Ingwe, King of the Vanyar
			change_age = 4005
		}
		character:lineofingwe3 = { # Indiel, sister of Ingwe
			change_age = 3990
		}
		character:lineofingwe4 = { # Ingwion, Prince of All the Elves
			change_age = 3952
		}
		character:lineofingwe5 = { # Vanime, Princess of the Vanyar
			change_age = 3641
		}
		character:lineofingwe6 = { # Ingwiel, Princess of the Vanyar
			change_age = 3301
		}
		character:lineofingwe7 = { # Ingil, Prince of the Vanyar
			change_age = 3178
		}
		character:lineofingwe8 = { # Indis, second wife of Finwe
			change_age = 3950
		}
		# Nos Gilmandur
		character:lineofgilmandur1 = { # Gilmandur, Maternal Grandfather of Ingwe
			change_age = 103
		}
		character:lineofgilmandur2 = { # Gilmien, Maternal Grandmother of Ingwe
			change_age = 104
		}
		character:lineofgilmandur3 = { # Isilwen, Mother of Ingwe
			change_age = 4065
		}
		# Nos Malantur
		character:lineofmalantur1 = { # Malantur, father of Ilwen
			change_age = 4054
		}
		character:lineofmalantur2 = { # Iliniel, mother of Ilwen
			change_age = 4050
		}
		character:lineofmalantur3 = { # Ilwen, wife of Ingwe
			change_age = 4003
		}
		character:lineofmalantur4 = { # Palacendo, advisor of Ingwe
			change_age = 3976
		}
		character:lineofmalantur5 = { # Yavien
			change_age = 3960
		}
		character:lineofmalantur6 = { # Laicolasse
			change_age = 3600
		}
		character:lineofmalantur7 = { # Isilme
			change_age = 3340
		}
		character:lineofmalantur8 = { # Astaldo
			change_age = 2824
		}
		character:lineofmalantur9 = { # Elestirne
			change_age = 564
		}
		character:lineofmalantur10 = { # Estelmo
			change_age = 1990
		}
		character:lineofmalantur11 = { # Elenwe, wife of Turgon
			change_age = 1876
		}
		# Nos Incanus
		character:lineofincanus1 = { # Incanus
			change_age = 4059
		}
		character:lineofincanus2 = { # Itarille
			change_age = 4057
		}
		character:lineofincanus3 = { # Istawe, husband of Indiel, father of Indis
			change_age = 4001
		}
		# Melda
		character:lineofamarie = { # Amarie, beloved of Finrod
		 	change_age = 2106
		}

		### The Noldor ###
		# Nos Finwe
		character:lineoffinwe1 = { # Finwe
			change_age = 3979
		}
		character:lineoffinwe2 = { # Miriel
			change_age = 882
		}
		character:lineoffinwe3 = { # Feanor
			change_age = 3170
			
			add_trait_xp = {
				trait = lifestyle_archivist
				track = historian
				value = 100
			}
			add_trait_xp = {
				trait = lifestyle_artifact_crafting
				track = weapon_smith
				value = 100
			}
			add_trait_xp = {
				trait = lifestyle_artifact_crafting
				track = armour_smith
				value = 100
			}
			add_trait_xp = {
				trait = lifestyle_artifact_crafting
				track = jewel_smith
				value = 100
			}
			add_trait_xp = {
				trait = lifestyle_artifact_crafting
				track = enchanting_smith
				value = 100
			}
		}
		character:lineoffinwe4 = { # Findis
			change_age = 3016
		}
		character:lineoffinwe5 = { # Fingolfin
			change_age = 2968
		}
		character:lineoffinwe6 = { # Anaire, wife of Fingolfin
			change_age = 2777
		}
		character:lineoffinwe7 = { # Lalwen
			change_age = 2931
		}
		character:lineoffinwe8 = { # Finarfin
			change_age = 2873
		}
		# Nos Feanor
		character:lineoffeanor1 = { # Maedhros
			change_age = 2087
		}
		character:lineoffeanor2 = { # Maglor
			change_age = 1915
		}
		character:lineoffeanor3 = { # Celegorm
			change_age = 1886
		}
		character:lineoffeanor4 = { # Caranthir
			change_age = 1819
		}
		character:lineoffeanor5 = { # Ailinel, wife of Caranthir
			change_age = 1423
		}
		character:lineoffeanor6 = { # Curufin
			change_age = 1771
		}
		character:lineoffeanor7 = { # Almare, wife of Curufin
			change_age = 1771
		}
		character:lineoffeanor8 = { # Amrod
			change_age = 1531
		}
		character:lineoffeanor9 = { # Amras
			change_age = 1531
		}
		character:lineoffeanor10 = { # Celebrimbor
			change_age = 621

			add_trait_xp = {
				trait = lifestyle_artifact_crafting
				track = enchanting_smith
				value = 100
			}

			add_trait_xp = {
				trait = lifestyle_artifact_crafting
				track = jewel_smith
				value = 100
			}
		}
		# Nos Fingolfin
		character:lineoffingolfin1 = { # Fingon
			change_age = 2106
		}
		character:lineoffingolfin2 = { # Turgon
			change_age = 1914
		}
		character:lineoffingolfin3 = { # Aredhel
			change_age = 1320
		}
		character:lineoffingolfin4 = { # Eol
			change_age = 3795
		}
		character:lineoffingolfin5 = { # Argon
			change_age = 1110
		}
		character:lineoffingolfin6 = { # Idril
			change_age = 201
		}
		# Nos Finarfin
		character:lineoffinarfin1 = { # Finrod
			change_age = 1914
		}
		character:lineoffinarfin2 = { # Angrod
			change_age = 1704
		}
		character:lineoffinarfin3 = { # Eldalote
			change_age = 1697
		}
		character:lineoffinarfin4 = { # Aegnor
			change_age = 1500
		}
		character:lineoffinarfin5 = { # Galadriel
			change_age = 1290
		}
		# Nos Orodreth
		character:lineoforodreth1 = { # Orodreth
			change_age = 50
		}
		character:lineoforodreth2 = { # Finduiloth, wife of Orodreth
			change_age = 90
		}
		# Nacilion
		character:lineofnacilionvector = { # Vector
			change_age = 1977
		}
		# Nos Sanastea
		character:lineofnemcraft = { # Sanastea
			change_age = 1359
		}
		# Nos Mahtan
		character:lineofmahtan1 = { # Mahtan, father of Nerdanel
			change_age = 3835
		}
		character:lineofmahtan2 = { # Istarnie, mother of Nerdanel
			change_age = 3799
		}
		character:lineofmahtan3 = { # Nerdanel, wife of Feanor
			change_age = 3112
		}
		# Nos Rumil
		character:lineofrumil1 = { # Rumil, loremaster
			change_age = 3500
		}
		character:lineofrumil2 = { # Tolwen, wife of Rumil
			change_age = 3450
		}
		character:lineofrumil3 = { # Lindisse, wife of Maglor
			change_age = 1922
		}
		# Nos Guilin
		character:lineofguilin1 = { # Guilin
			change_age = 1920
		}
		# Nos Laurinalote
		character:lineofglorfindel = { # Glorfindel
			change_age = 1900
		}
		# Nos Nambaruthe
		character:lineofrauggoth = { # Rauggoth 'Rog'
			change_age = 2000
		}
		# Nos Thavn a Minas Loss
		character:lineofpenlod1 = { # Penlod
			change_age = 1840
		}
		character:lineofpenlod2 = { # Lossewen
			change_age = 1804
		}
		# Nos Amonnil
		character:lineofamonnil1 = { # Amonnil, father of Pengolodh, loremaster
			change_age = 200
		}
		character:lineofamonnil2 = { # Saelin, mother of Pengolodh, loremaster
			change_age = 540
		}
		# Nos Aranwe
		character:lineofaranwe1 = { # Aranwe
			change_age = 682
		}
		character:lineofaranwe2 = { # Voronwe the Mariner
			change_age = 180
		}
		# Nos Erestor
		character:lineoferestor = { # Erestor
			change_age = 1906
		}
		# Nos Ainarion
		character:lineofainarion1 = { # Ainarion
			change_age = 1034
		}
		character:lineofainarion2 = { # Astarielle
			change_age = 990
		}
		# Nos Faelivrin
		character:lineoffaelivrin1 = { # Faelivrin
			change_age = 2540
		}
		character:lineoffaelivrin2 = { # Feremariel
			change_age = 2200
		}
		character:lineoffaelivrin3 = { # Lachglin
			change_age = 1140
		}
		character:lineoffaelivrin5 = { # Saldan
			change_age = 1010
		}
		character:lineoffaelivrin6 = { # Fornaeth the Hardline Feanorian
			change_age = 901
		}
		character:lineoffaelivrin7 = { # Morfana
			change_age = 880
		}
		# Nos Inglor
		character:lineofinglor1 = { # Inglor of Nargothrond
			change_age = 120
		}
		character:lineofinglor2 = { # Edhelwen of Doriath
			change_age = 284
		}
		# Nos Lauriel
		character:lineoflauriel = { # Lauriel
			change_age = 1498
		}
		# Nos Mithrim
		character:lineofmithrimion1 = { # Mektar
			change_age = 2200
		}
		character:lineofmithrimion2 = { # Lavaneth
			change_age = 893
		}

		### The Teleri and Sindar ###
		# Nos Elwe
		character:lineofelwe1 = { # Elu Thingol
			change_age = 3915
		}
		character:lineofelwe2 = { # Luthien
			change_age = 2874
		}
		# Nos Olwe
		character:lineofolwe1 = { # Olwe
			change_age = 3905
		}
		character:lineofolwe2 = { # Tinelun, Olwe's Wife
			change_age = 3895
		}
		character:lineofolwe3 = { # Eärwë, first prince of Alqualonde
			change_age = 2884
		}
		character:lineofolwe4 = { # Elulindo, second prince of Alqualonde
			change_age = 2803
		}
		character:lineofolwe5 = { # Eärwen, wife of Finarfin
			change_age = 2754
		}
		# Nos Elmo
		character:lineofelmo1 = { # Elmo of Doriath
			change_age = 3893
		}
		character:lineofelmo2 = { # Wife of Elmo
			change_age = 3866
		}
		character:lineofelmo3 = { # Galadhon, son of Elmo
			change_age = 1983
		}
		character:lineofelmo4 = { # Alafwen, Wife of Galadhon
			change_age = 2003
		}
		character:lineofelmo5 = { # Celeborn, husband of Galadriel
			change_age = 1101
		}
		character:lineofelmo6 = { # Galathil, father of Nimloth
			change_age = 1054
		}
		character:lineofelmo7 = { # Lalorniel, wife of Galathil
			change_age = 1066
		}
		# Nos Nowe
		character:lineofcirdan = { # Cirdan, Lord of the Havens
			change_age = 3968
		}
		# Nos Amdir
		character:lineofamdir1 = { # Amdír, King of Lórinand
			change_age = 994
		}
		# Nos Oropher
		character:lineoforopher1 = { # Oropher, King of the Greenwood
			change_age = 1002
		}
		character:lineoforopher2 = { # Nemireth, wife of Oropher
			change_age = 942
		}
		# Nos Bornmir
		character:lineofbornmir1 = { # Bornmir, King of the Sirrandrai
			change_age = 3100
		}
		# Daeron
		character:lineofdaeron = { # Daeron, chief minstrel of Doriath
			change_age = 2703
		}
		# Nos Mablung
		character:lineofmablung = { # Mablung, chief captain of Doriath
			change_age = 2990
		}
		# Cuthalion
		character:lineofbeleg = { # Beleg Strongbow, captain of the Marchwardens of Doriath
			change_age = 2100
		}
		# Nellas
		character:lineofnellas1 = { # Nellas, maiden of Doriath
			change_age = 101
		}
		character:lineofnellas2 = { # Bardir, husband of Nellas
			change_age = 100
		}
		# Nos Alwedon
		character:lineofalwedon1 = { # Alwedon
			change_age = 80
		}
		character:lineofalwedon2 = { # Dailwen
			change_age = 10
		}
		# Nos Urindo
		character:lineofurindo1 = { # Urindo
			change_age = 180
		}
		character:lineofurindo2 = { # Nerdo
			change_age = 3770
		}
		character:lineofurindo3 = { # Linditta
			change_age = 3094
		}
		character:lineofurindo4 = { # Celeserwen, kin of Cirdan
			change_age = 578
		}
		# Lendain
		character:lineofcethlond = { # Cethlond, leader of the Edhellond
			change_age = 1403
		}

		### The Nandor and Laiquendi ###
		# Nos Lenwe
		character:lineoflenwe1 = { # Lenwe
			change_age = 3000
		}
		character:lineoflenwe2 = { # Eliniel, wife of Lenwe
			change_age = 3319
		}
		character:lineoflenwe3 = { # Denethor, King of the Laiquendi
			change_age = 3820
		}
		# Nos Ithilbor
		character:lineofithilbor1 = { # Ithilbor, chief of the Guest-elves
			change_age = 3700
		}
		character:lineofithilbor2 = { # Emelien, wife of Ithilbor
			change_age = 3580
		}
		character:lineofithilbor3 = { # Saeros, councillor of Doriath
			change_age = 2765
		}

		### The Hisildi ###
		# Nos Nurwe
		character:lineofnurwe1 = { # Nurwë, leader of the Tatyarin Avari who remained at Cuivienen, Finwe's uncle
			change_age = 4061
		}
		character:lineofnurwe2 = { # Tû (or Túvo), eldest son of Nurwë, king of the Hisildi at the dawn of the sun
			change_age = 2087
		}
		character:lineofnurwe3 = { # Dardariann, grand-daughter of Nurwë, Queen of the Wildwood in the Second Age
			change_age = 621
		}
		# Nos Morwe
		character:lineofmorwe1 = { # Morwë, leader of the Nelyarin Avari who remained at Cuivienen, Cirdan's Brother
		 	change_age = 3955
		}

		### The Cuind ###
		# Nos Meglasul
		character:lineofmeglasul1 = { # Meglasul, leader of the Cuind Elves and Survivor of Cuivienen
			change_age = 3004
		}
		character:lineofmeglasul2 = { # Alagwind, longtime friend and eventual wife of Meglasul
			change_age = 2120
		}

		### The Kinn-lai ###
		# Tainalann-lai
		character:lineoftainalann1 = { # Tainalann, leader of the Kinn-lai in their wanderings
			change_age = 770
		}
		character:lineoftainalann2 = { # Tiivpai, wife of Tainalann and mother torn between the siblings
			change_age = 760
		}
		# Eltavash-lai
		character:lineofeltavash1 = { # Eltavash
			change_age = 550
		}
		# Lodveg-lai
		character:lineoflodveg1 = { #Lodveg
			change_age = 110
		}
		character:lineoflodveg2 = { #Laadesh
			change_age = 110
		}
		# Enna-lai #TEMP
		character:lineoffirsttalilanelder1 = { # Artathinde # VERY TEMP NAME
			change_age = 604
		}
		character:lineoffirsttalilanelder2 = { # Melyanna # VERY TEMP NAME
			change_age = 595
		}
		# Attea-lai #TEMP
		character:lineofsecondtalilanelder1 = { # Rodnor # VERY TEMP NAME
			change_age = 201
		}
		character:lineofsecondtalilanelder2 = { # Ambawen # VERY TEMP NAME
			change_age = 290
		}

		### Immortals ###
		# Istari
		character:lineofsaruman = { # Saruman
			change_age = 14373 # not counting 33,537 years of the Lamps due it causing an overflow error
		}
		character:lineofgandalf = { # Gandalf
			change_age = 14373 # not counting 33,537 years of the Lamps due it causing an overflow error
		}
		character:lineofradagast = { # Radagast
			change_age = 14373 # not counting 33,537 years of the Lamps due it causing an overflow error
		}
		character:lineofpallando = { # Pallando
			change_age = 14373 # not counting 33,537 years of the Lamps due it causing an overflow error
		}
		character:lineofalatar = { # Alatar
			change_age = 14373 # not counting 33,537 years of the Lamps due it causing an overflow error
		}
		# Tercano Manweva
		character:lineofeonwe = { # Eonwe
			change_age = 14373 # not counting 33,537 years of the Lamps due it causing an overflow error
		}
		# Toril
		character:lineofmelian = { # Melian
			change_age = 14374 # not counting 33,537 years of the Lamps due it causing an overflow error, but she gets an extra year to makeup for the missing year in the history file
		}
		# Ulmonduri (1)
		character:lineofosse = { # Osse
			change_age = 14373 # not counting 33,537 years of the Lamps due it causing an overflow error
		}
		# Ulmonduri (2)
		character:lineofuinen = { # Uinen
			change_age = 14373 # not counting 33,537 years of the Lamps due it causing an overflow error
		}
		# Ohto
		character:lineofmakar = { # Makar
			change_age = 14373 # not counting 33,537 years of the Lamps due it causing an overflow error
		}
		character:lineofmeasse = { # Measse
			change_age = 14373 # not counting 33,537 years of the Lamps due it causing an overflow error
		}
		# Melkondili
		character:lineofsauron = { # Sauron
			change_age = 14373 # not counting 33,537 years of the Lamps due it causing an overflow error
		}
		# Wilderness Holder
		character:k_wastelands_holder = { # Tom Bombadil
			change_age = 14374 # not counting 33,537 years of the Lamps due it causing an overflow error, but he must be the oldest of all still, so he gets an extra year
		}
	}
}

elven_racial.0102 = { #Ruler Design Elf Age Set
	content_source = realms_dlc
	type = character_event
	title = elven_racial.0102.t
	desc = elven_racial.0102.desc
	theme = elven

	left_portrait = {
		character = root
		animation = personality_bold
	}

	immediate = {

		hidden_effect = {
			initialise_elven_holdings = yes
			change_government = elven_government
		}
	}

	option = { # Third Age
		name = elven_racial.0102.a
		custom_tooltip = {
			text = elven_racial.0102.a.tt
			set_age = { 120 2999 }
		}
	}

	option = { # Second Age
		name = elven_racial.0102.b
		custom_tooltip = {
			text = elven_racial.0102.b.tt
			set_age = { 3000 6440 }
		}
	}

	option = { # First Age
		name = elven_racial.0102.c
		custom_tooltip = {
			text = elven_racial.0102.c.tt
			set_age = { 6441 7030 }
		}
	}

	option = { # Age of the Trees
		name = elven_racial.0102.d
		custom_tooltip = {
			text = elven_racial.0102.d.tt
			set_age = 7031
		}
	}
	option = { # Unchanged
		name = elven_racial.0102.e
		custom_tooltip = elven_racial.0102.e.tt
	}
}

elven_racial.0103 = { #Ruler Design Elf Age Set Clone for Landless Characters
	content_source = realms_dlc
	type = character_event
	title = elven_racial.0102.t
	desc = elven_racial.0102.desc
	theme = elven

	left_portrait = {
		character = root
		animation = personality_bold
	}

	option = { # Third Age
		name = elven_racial.0102.a
		custom_tooltip = {
			text = elven_racial.0102.a.tt
			set_age = { 120 2999 }
		}
	}

	option = { # Second Age
		name = elven_racial.0102.b
		custom_tooltip = {
			text = elven_racial.0102.b.tt
			set_age = { 3000 6440 }
		}
	}

	option = { # First Age
		name = elven_racial.0102.c
		custom_tooltip = {
			text = elven_racial.0102.c.tt
			set_age = { 6441 7030 }
		}
	}

	option = { # Age of the Trees
		name = elven_racial.0102.d
		custom_tooltip = {
			text = elven_racial.0102.d.tt
			set_age = 7031
		}
	}
	option = { # Unchanged
		name = elven_racial.0102.e
		custom_tooltip = elven_racial.0102.e.tt
	}
}

## Elven CB Events

elven_racial.0200 = { # Vanquish Darkness CB - war start event to convert and end war
	content_source = realms_dlc
	type = character_event
	title = elven_racial.0200.t
	desc = elven_racial.0200.desc
	theme = elven

	left_portrait = {
		character = root
		animation = war_defender
	}
	right_portrait = {
		character = scope:attacker
		animation = war_attacker
	}

	option = { # I yield!
		name = elven_racial.0200.a
		trigger = {
			NOT = { is_orc = yes }
		}
		add_prestige = -250
		capital_county = {
			vanquish_darkness_generate_new_holder_culture_and_faith = yes
		}
		scope:attacker = {
			send_interface_toast = {
				title = elven_racial.0200.toast.t
				left_icon = scope:attacker
				right_icon = scope:defender
				scope:defender = {
					set_character_faith = scope:holder_faith
				}
				add_elven_hope_effect = { VALUE = medium_elven_hope_gain HOPE_EFFECT = effect_elven_hope_vanquished_darkness_cb_won } # Yay we won!
			}
		}
		ai_chance = {
			base = 0
		}
	}

	option = { # Never!
		name = elven_racial.0200.b
		add_piety = 200
		ai_chance = {
			base = 100
		}
	}
}

elven_racial.0201 = { # Vanquish Darkness CB - Laamp version
	content_source = realms_dlc
	type = character_event
	title = elven_racial.0201.t
	desc = elven_racial.0201.desc
	theme = war

	left_portrait = {
		character = root
		animation = war_defender
	}
	right_portrait = {
		character = scope:attacker
		animation = war_attacker
	}

	option = { # I yield!
		name = elven_racial.0201.a
		trigger = {
			NOT = { is_orc = yes }
		}
		add_prestige = -250
		capital_county = {
			vanquish_darkness_generate_new_holder_culture_and_faith = yes
		}
		scope:attacker = {
			send_interface_toast = {
				title = elven_racial.0201.toast.t
				left_icon = scope:attacker
				right_icon = scope:defender
				scope:defender = {
					set_character_faith = scope:holder_faith
				}
				add_elven_hope_effect = { VALUE = medium_elven_hope_gain HOPE_EFFECT = effect_elven_hope_vanquished_darkness_cb_won }
			}
		}
		ai_chance = {
			base = 10
		}
	}

	option = { # Never!
		name = elven_racial.0201.b
		add_piety = 200
		ai_chance = {
			base = 90
		}
	}
}

elven_racial.0202 = { # Vanquish Darkness CB - get offered titles if you're a claimant
	content_source = realms_dlc
	type = character_event
	title = elven_racial.0202.t
	desc = elven_racial.0202.desc
	theme = diplomacy

	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:elven_chancellor
		animation = chancellor
	}
	immediate = {
		# Gather a few scopes for the event loc
		random_courtier = { 
			limit = { is_married = no }
			save_scope_as = elven_chancellor
		}
		ordered_in_list = {
			variable = vanquish_darkness_titles_to_offer
			save_scope_as = renewal_title 
		}
	}
	option = { # I accept
		name = elven_racial.0202.a
		every_held_title = { # Get rid of Laamp
			limit = { is_landless_type_title = yes }
			root = { destroy_title = prev }
		}
		every_in_list = {
			variable = vanquish_darkness_titles_to_offer
			this ?= { 
				save_scope_as = the_county
				root = {
					get_title = scope:the_county
					if = { 
						limit = {
							scope:the_temporary_ruler.primary_title.tier >= tier_duchy
						}
						create_title_and_vassal_change = {
							type = swear_fealty
							save_scope_as = change
						}
						change_liege = {
							liege = scope:the_temporary_ruler
							change = scope:change
						}
						resolve_title_and_vassal_change = scope:change
					}
				}
			}
		}
	}

	option = { # No I'll stay a laamp
		name = elven_racial.0202.b
		every_in_list = {
			variable = vanquish_darkness_titles_to_offer
			this ?= { 
				save_scope_as = the_county
				scope:elven_chancellor = {
					get_title = scope:the_county
					if = { # Reconsider later how to make this work
						limit = {
							scope:the_temporary_ruler.primary_title.tier >= tier_duchy
						}
						create_title_and_vassal_change = {
							type = swear_fealty
							save_scope_as = change
						}
						change_liege = {
							liege = scope:the_temporary_ruler
							change = scope:change
						}
						resolve_title_and_vassal_change = scope:change
					}
				}
			}
		}
	}
	after = {
		clear_variable_list = vanquish_darkness_titles_to_offer
	}
}

## Elven Scheme Events

elven_racial.0300 = { # Reject non-elf romance and seduce attempts where chance is zero
	content_source = realms_dlc
	type = character_event
	title = elven_racial.0300.t
	desc = elven_racial.0300.desc
	theme = elven

	left_portrait = {
		character = scope:owner
		animation = flirtation
	}
	right_portrait = {
		character = scope:target
		animation = dismissal
	}

	option = { # It is not meant to be
		name = elven_racial.0300.a
		custom_tooltip = seduce_outcome.blocked_from_seduction

		scope:target = { seduction_block_character_effect = { CHARACTER = scope:owner } }

		if = {
			limit = { exists = scope:scheme }
			scope:scheme = {
				end_scheme = yes
			}
		}

		reverse_add_opinion = {
			target = scope:target
			modifier = respect_opinion
			opinion = -25
		}
	}
}

## Elven General events

elven_racial.0400 = { #Elven guest management
	hidden = yes
	trigger = {
		is_elf = yes
		scope:host = { NOT = { is_elf = yes } }
	}
	immediate = {
		if = {
			limit = {
				or = {
					culture = { has_cultural_pillar = heritage_calaquendi }
					not = { exists = culture.culture_head }
				}
			}
			move_to_pool_at = title:k_imladris.holder.location
		}
		else = {
			move_to_pool_at = culture.culture_head.location
		}
	}
}

elven_racial.0500 = { #Introduction to Elven characters
	title = elven_racial.0500.t
	desc = elven_racial.0500.desc
	content_source = realms_dlc
	theme = elven

	left_portrait = {
		character = root
		animation = thinking
	}

	trigger = { is_elf = yes }

	option = { # All right, I get it
		name = elven_racial.0500.a
	}
}

elven_racial.0600 = { #Elven marriage handling
	hidden = yes

	trigger = {
		is_ai = yes
		NOT = { root = character:lineofelrond4 } #Arwen
		is_married = no
		is_betrothed = no
	}

	immediate = {
		random_relation = {
			type = soulmate
			save_scope_as = soulmate
		}
		if = {
			limit = {
				scope:soulmate = { is_ai = yes }
				lotr_marriage_to_allowed = { TARGET = scope:soulmate }
			}
			if = {
				limit = {
					has_dlc_feature = tours_and_tournaments
					has_dlc_feature = advanced_activities
					OR = {
						is_close_family_of = root.liege
						scope:soulmate = { is_close_family_of = scope:soulmate.liege }
					}
					NOT = { has_character_flag = elven_marriage_delayed }
				}
				add_character_flag = elven_marriage_delayed
				trigger_event = {
					id = elven_racial.0600
					years = 1
				}
			}
			else = {
				if = {
					limit = { has_character_flag = elven_marriage_delayed }
					remove_character_flag = elven_marriage_delayed
				}
				marry = scope:soulmate
			}
		}
	}
}

elven_racial.0700 = { #Widow event for Elves 
	content_source = realms_dlc
	type = character_event
	title = elven_racial.0700.t
	desc = elven_racial.0700.desc
	theme = unfriendly
	left_portrait = {
		character = root
		animation = grief
	}
	right_portrait = {
		character = scope:dead_character
		animation = pain
	}
	
	option = { # Become a widow
		name = elven_racial.0700.a
		add_trait = widowed
		add_piety = 250
		stress_impact = {
			base = major_stress_impact_gain
		}
	}

}

## Sailing west events ##

elven_racial.1000 = { # Where to go?
	title = elven_racial.1000.t
	desc = {
		desc = elven_racial.1000.a.desc
		first_valid = {
			triggered_desc = { # Are you Cirdan?
				trigger = {
					has_title = title:c_mithrhulond
				}
				desc = elven_racial.1000.cirdan.desc
			}
			triggered_desc = { # Can you go to Mithlond?
				trigger = {
					in_diplomatic_range = title:c_mithrhulond.holder
					title:c_mithrhulond.holder = {
						faith_is_evil = no
					}
					NOT = { has_title = title:c_edhellond }
				}
				desc = elven_racial.1000.mithlond.desc
			}
		}
		first_valid = {
			triggered_desc = { # Do you hold Edhellond?
				trigger = {
					has_title = title:c_edhellond
				}
				desc = elven_racial.1000.amroth.desc
			}
			triggered_desc = { # Are you in Edhellond?
				trigger = {
					in_diplomatic_range = title:c_edhellond.holder
					title:c_edhellond.holder = {
						faith_is_evil = no
					}
					NOT = {
						province:420 = {
							has_building = wonder_edhellond_02
						}
						has_title = title:c_mithrhulond
					}
				}
				desc = elven_racial.1000.edhellond.desc
			}
		}
		triggered_desc = {
			trigger = {
				NOT = {
					has_title = title:c_mithrhulond
					has_title = title:c_edhellond
				}
			}
			desc = elven_racial.1000.coast.desc
		}
		desc = elven_racial.1000.b.desc
	}
	content_source = realms_dlc
	theme = elven

	right_portrait = {
		character = root
		animation = thinking
	}

	immediate = {
		save_scope_as = departing_elf
		# Find backup sailing point
		if = { # Capital is coastal
			limit = {
				capital_province = {
					is_coastal = yes
				}
			}
			capital_province = {
				save_scope_as = sailing_point
			}
		}
		else_if = { # Somewhere in your realm
			limit = {
				any_sub_realm_county = {
					is_coastal_county = yes
				}
			}
			random_sub_realm_barony = {
				limit = {
					title_province = { is_coastal = yes }
				}
				title_province = {
					save_scope_as = sailing_point
				}
			}
		}
		else_if = { # People in Arnor/Lindon sail to Lindon
			limit = {
				capital_province = {
					OR = {
						geographical_region = middleearth_west_arnor
						geographical_region = middleearth_west_eregion
						geographical_region = middleearth_west_beleriand
						geographical_region = middleearth_forodwaith
						geographical_region = middleearth_mountains_blue
					}
				}
			}
			random_province = {
				limit = {
					geographical_region = middleearth_west_beleriand
					is_coastal = yes
					county.holder = {
						faith_is_good = yes
					}
				}
				save_scope_as = sailing_point
			}

		}
		else_if = { # People in Enedhwiath sail from Enedhwaith
			limit = {
				capital_province = {
					OR = {
						geographical_region = middleearth_west_enedhwaith
						geographical_region = middleearth_west_isengard
					}
				}
			}
			random_province = {
				limit = {
					geographical_region = middleearth_west_enedhwaith
					is_coastal = yes
					county.holder = {
						faith_is_good = yes
					}
				}
				save_scope_as = sailing_point
			}

		}
		else_if = { # People elsewhere in Western Middle Earth, Rhun, or Mordor sail from Gondor
			limit = {
				capital_province = {
					OR = {
						geographical_region = middleearth_west
						geographical_region = middleearth_mordor
						geographical_region = middleearth_rhun
						geographical_region = middleearth_mountains_iron
						geographical_region = middleearth_mountains_misty
					}
				}
			}
			random_province = {
				limit = {
					geographical_region = middleearth_west_gondor
					is_coastal = yes
					county.holder = {
						faith_is_good = yes
					}
				}
				save_scope_as = sailing_point
			}

		}
		else_if = { # People in Harad sail from Harad
			limit = {
				capital_province = {
					OR = {
						geographical_region = middleearth_harad
					}
				}
			}
			random_province = {
				limit = {
					geographical_region = middleearth_harad
					is_coastal = yes
					county.holder = {
						faith_is_good = yes
					}
				}
				save_scope_as = sailing_point
			}
		}
		else_if = { # People from Thani-Hazad  sail from Thani-Hazad
			limit = {
				capital_province = {
					OR = {
						geographical_region = middleearth_uttersouth_thanihazad
						geographical_region = middleearth_mountains_yellow
					}
				}
			}
			random_province = {
				limit = {
					geographical_region = middleearth_uttersouth_thanihazad
					is_coastal = yes
					county.holder = {
						faith_is_good = yes
					}
				}
				save_scope_as = sailing_point
			}

		}
		else_if = { # People from Utter South sail from usakan
			limit = {
				capital_province = {
					OR = {
						geographical_region = middleearth_uttersouth
					}
				}
			}
			random_province = {
				limit = {
					geographical_region = middleearth_uttersouth_mumakan
					is_coastal = yes
					county.holder = {
						faith_is_good = yes
					}
				}
				save_scope_as = sailing_point
			}

		}
		else_if = { # People from Ormal sail from Ormal
			limit = {
				capital_province = {
					geographical_region = middleearth_harad_bayoformal
				}
			}
			random_province = {
				limit = {
					geographical_region = middleearth_harad_bayoformal
					is_coastal = yes
					county.holder = {
						faith_is_good = yes
					}
				}
				save_scope_as = sailing_point
			}

		}
#		else_if = { # People from Ormal sail from Ormal
#			limit = {
#				capital_province = {
#					geographical_region = middleearth_harad_bayoformal
#				}
#			}
#			random_province = {
#				limit = {
#					geographical_region = middleearth_harad_bayoformal
#					is_coastal = yes
#					county.holder = {
#						faith_is_good = yes
#					}
#				}
#				save_scope_as = sailing_point
#			}
#
#		}
		else = { #Find the sea somewhere!
			random_province = {
				limit = {
					is_coastal = yes
					faith_is_good = yes
				}
				save_scope_as = sailing_point
			}
		}
	}

	option = { # Sail from Mithlond
		name = elven_racial.1000.a
		trigger = {
			in_diplomatic_range = title:c_mithrhulond.holder
			title:c_mithrhulond.holder = {
				faith_is_evil = no
			}
			NOT = { has_title = title:c_edhellond }
		}

		custom_tooltip = elven_racial.1000.a.tt
		province:4266 = {
			save_scope_as = sailing_point
		}
	}

	option = { # Sail from Edhellond
		name = elven_racial.1000.b
		trigger = {
			in_diplomatic_range = title:c_edhellond.holder
			title:c_edhellond.holder = {
				faith_is_evil = no
			}
			NOT = {
				province:420 = {
					has_building = wonder_edhellond_02
				}
				has_title = title:c_mithrhulond
			}
		}
		custom_tooltip = elven_racial.1000.b.tt
		province:420 = {
			save_scope_as = sailing_point
		}
	}
	option = { # I shall make my own ship
		name = elven_racial.1000.c
		trigger = {
			NOR = {
				has_title = title:c_mithrhulond
				has_title = title:c_edhellond
			}
		}
		custom_tooltip = elven_racial.1000.c.tt
	}
	after = {
		trigger_event = elven_racial.1003
	}
}

elven_racial.1001 = { # The Havens (whichever they are)
	title = elven_racial.1001.t
	content_source = realms_dlc
	theme = elven

	desc = {
		first_valid = {
			triggered_desc = { # Are you Cirdan?
				trigger = {
					has_title = title:c_mithrhulond
				}
				desc = elven_racial.1001.cirdan.desc
			}
			triggered_desc = { # Do you hold Edhellond?
				trigger = {
					has_title = title:c_edhellond
				}
				desc = elven_racial.1001.amroth.desc
			}
			triggered_desc = { # Are you in Edhellond?
				trigger = {
					OR = {
						location = province:420
						location = province:423
						location = province:421
					}
				}
				desc = elven_racial.1001.edhellond.desc
			}
			triggered_desc = { # Are you in Mithlond
				trigger = {
					OR = {
						location = province:4266
						location = province:4274
					}
				}
				desc = elven_racial.1001.mithlond.desc
			}
			# You're somewhere else
			desc = elven_racial.1001.desc
		}
	}

	override_background = { reference = docks_elven }

	right_portrait = {
		character = root
		animation = personality_content
	}
	left_portrait = {
		character = scope:guide
		animation = chaplain
	}

	immediate = {
		scope:sailing_point.county.holder = {
			if = {
				limit = {
					root != this
					is_elf = yes
				}
				save_scope_as = guide
			}
		}
	}

	option = { # All is now ready
		name = elven_racial.1001.a
		trigger_event = {
			id = elven_racial.1002
		}
	}
}

elven_racial.1002 = { # Far Green Country
	title = elven_racial.1002.t
	desc = elven_racial.1002.desc
	content_source = realms_dlc
	theme = sailing_activity

	override_background = { reference = docks_elven }

	right_portrait = {
		character = root
		animation = ecstasy
	}

	option = { # A swift sunrise
		name = elven_racial.1002.a

		hidden_effect = {
			if = {
				limit = { this = character:lineoffeanor2 }
				random_artifact = {
					limit = { has_variable = silmaril }
					save_scope_as = silmaril
				}
			}
			if = {
				limit = { exists = scope:silmaril }
				destroy_artifact = scope:silmaril
				add_character_flag = had_silmaril
			}
		}
		if = { # The Last Ship | Achievement
			limit = {
				NOT = { exists = global_var:lotr_achievement_52 }
				is_ai = no
				realms_achievements_enabled = yes
				root = character:lineofcirdan
			}
			set_global_variable = lotr_achievement_52
		}
		depose = yes
		every_claim = {
			root = { remove_claim = prev }
		}
		add_trait = sailed_west
		#remove_character_flag = departing_for_valinor
		custom_tooltip = {
			text = sail_to_valinor
			set_employer = title:k_tirion.holder
		}
		hidden_effect = {
			if = {
				limit = { has_character_flag = had_silmaril }
				create_artifact_silmaril_effect = { OWNER = this }
			}
		}
	}
}

elven_racial.1003 = { # Farewell to home
	title = elven_racial.1003.t
	desc = elven_racial.1003.desc
	content_source = realms_dlc
	theme = elven

	left_portrait = {
		character = root
		animation = personality_content
	}

	right_portrait = {
		character = root.primary_heir
		animation = crying
	}

	immediate = {
		primary_heir = {
			save_scope_as = sad_heir
		}
	}
	option = { # Farewell, friends!
		name = elven_racial.1003.a
		custom_tooltip = elven_racial.1000.c.tt
		if = {
			limit = {
				location = scope:sailing_point
			}
			trigger_event = elven_racial.1001
		}
		else = {
			start_travel_plan = { #Travel to the coast
				destination = scope:sailing_point
				on_arrival_event = elven_racial.1001
				return_trip = no
				players_use_planner = no
				on_arrival_destinations = all
			}
			hidden_effect = { #give free caravan master
				if = {
					limit = { NOT = { employs_court_position = travel_leader_court_position } }
					create_character = {
						template = foreign_architect_template
						employer = root
						save_scope_as = caravan_master
					}
					appoint_court_position = {
						recipient = scope:caravan_master
						court_position = travel_leader_court_position
					}
				}
			}
		}
	}
	option = { # I have too much still to do!
		name = elven_racial.1003.b
		custom_tooltip = elven_racial.1003.b.tt
		#remove_character_flag = departing_for_valinor
	}
}

elven_racial.1004 = { # Elven lieges get a last chance to try to stop their vassals and courtiers from sailing
	title = elven_racial.1004.t
	desc = elven_racial.1004.desc
	content_source = realms_dlc
	theme = elven
	orphan = yes
	override_background = { reference = docks_elven }

	left_portrait = {
		character = root
		animation = worry
	}

	right_portrait = {
		character = scope:elf_trying_to_depart
		animation = sadness
	}

	immediate = {
		random_vassal = {
			limit = { has_character_flag = elf_trying_to_sail }
			save_scope_as = elf_trying_to_depart
		}
		random_courtier = {
			limit = { has_character_flag = elf_trying_to_sail }
			save_scope_as = elf_trying_to_depart
		}
	}
	
	option = { # PLEASE. STAY.
		name = elven_racial.1004.a
		trigger = { is_ai = no }
		duel = {
			skill = diplomacy
			target = scope:elf_trying_to_depart
			# You convince them to stay
			40 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				min = 5
				send_interface_toast = {
					type = event_toast_effect_good
					title = elven_racial.1004.a.tt.success
					left_icon = root
					right_icon = scope:elf_trying_to_depart
					custom_tooltip = elven_racial.1004.a.tt.success
				}
				add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_convinced_to_stay }
				scope:elf_trying_to_depart = { remove_character_flag = elf_trying_to_sail }
			}
			# Your words fail to convince them
			60 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				min = 10
				custom_tooltip = sail_to_valinor_toast
				hidden_effect = {
					send_interface_toast = {
						type = event_toast_effect_bad
						title = sail_to_valinor_toast
						left_icon = root
						right_icon = scope:elf_trying_to_depart
						custom_tooltip = sail_to_valinor_toast_desc
					}
				}
				add_elven_hope_effect = { VALUE = minimal_elven_hope_loss HOPE_EFFECT = effect_elven_hope_character_sailed_west }
				scope:elf_trying_to_depart = {
					depose = yes
					hidden_effect = {
						every_claim = {
							root = { remove_claim = prev }
						}
					}
					add_trait = sailed_west
					remove_character_flag = elf_trying_to_sail
					hidden_effect = {
						set_employer = title:k_tirion.holder
					}
				}
			}
		}
	}
	
	option = { # None of us can refuse the call of the sea. Go in peace.
		name = elven_racial.1004.b
		add_piety = minor_piety_gain
		custom_tooltip = sail_to_valinor_toast
		hidden_effect = {
			send_interface_toast = {
				title = sail_to_valinor_toast
				type = event_toast_effect_bad
				left_icon = root
				right_icon = scope:elf_trying_to_depart
				custom_tooltip = sail_to_valinor_toast_desc
			}
		}
		scope:elf_trying_to_depart = {
			depose = yes
			hidden_effect = {
				every_claim = {
					root = { remove_claim = prev }
				}
			}
			add_trait = sailed_west
			remove_character_flag = elf_trying_to_sail
			hidden_effect = {
				set_employer = title:k_tirion.holder
			}
		}
	}
}

## Wander the Forests events ##

elven_racial.1200 = { # Choosing a destination
	hidden = yes
	immediate = {
		if = {
			limit = { is_landed = yes }	
			random_realm_province = {
				limit = {
					OR = {
						terrain = forest
						terrain = jungle
						terrain = deep_forest
						terrain = mallorn_forest
					}
					NOT = { this = root.capital_province }
				}
				save_scope_as = destiny_forest_province
			}
		}
		else_if = {
			limit = {
				domicile.domicile_location = {
					any_neighboring_province = {
						OR = {
							terrain = forest
							terrain = jungle
							terrain = deep_forest
							terrain = mallorn_forest
						}
					}
				}
			}
			domicile.domicile_location = {
				random_neighboring_province = {
					limit = {
						OR = {
							terrain = forest
							terrain = jungle
							terrain = deep_forest
							terrain = mallorn_forest
						}
					}
					save_scope_as = destiny_forest_province
				}
			}
		}
		else = {
			domicile.domicile_location = {
				save_scope_as = destiny_forest_province
			}
		}
		trigger_event = elven_racial.1201
	}
}

elven_racial.1201 = { # Setting out
	title = elven_racial.1201.t
	type = character_event
	desc = elven_racial.1201.desc
	content_source = realms_dlc
	theme = elven
	override_background = { reference = throne_room }
	left_portrait = {
		character = root
		animation = personality_bold
	}
	option = { # I'm off
		name = elven_racial.1201.a
		custom_tooltip = elven_racial.1201.a.tt
		start_travel_plan = { #Travel to the forest
			destination = scope:destiny_forest_province
			players_use_planner = yes
			on_arrival_event = elven_racial.1202
		}
	}
}

elven_racial.1202 = { # Arrival - get a random event
	hidden = yes
	immediate = {
		root.location = { save_scope_as = destiny_forest_province }
		#current_travel_plan ?= { abort_travel_plan = yes }
		trigger_event = {
			on_action = elven_forest_events
		}
	}
}

elven_racial.1210 = { # Find a dying stag
	title = elven_racial.1210.t
	type = character_event
	desc = elven_racial.1210.desc
	content_source = realms_dlc
	theme = elven
	override_background = { reference = ep2_hunt_forest_cave }
	left_portrait = {
		character = root
		animation = sadness
	}
	immediate = {
		add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_wandered_the_forests } # We are sad about this
	}
	option = { # All things must come to an end
		name = elven_racial.1210.a
		add_piety = minor_piety_gain
		if = {
			limit = { has_government = landless_adventurer_government }
			domicile ?= { change_provisions = medium_provisions_gain }
		}
	}
	option = { # Attempt to heal it
		name = elven_racial.1210.b
		random = {
			chance = 25
			add_learning_skill = 1
		}
		random = {
			chance = 50 
			add_elven_hope_effect = { VALUE = medium_elven_hope_gain HOPE_EFFECT = effect_elven_hope_wandered_the_forests }
		}
	}
	after = {
		trigger_event = elven_racial.1299
	}
}

elven_racial.1211 = { # Starlight from above
	title = elven_racial.1211.t
	type = character_event
	desc = elven_racial.1211.desc
	content_source = realms_dlc
	theme = elven
	override_background = { reference = ep2_forest_managed }
	override_effect_2d = {
		reference = legend_glow
	}
	left_portrait = {
		character = root
		animation = survey
	}
	option = { # I feel safe under Elentári's light
		name = elven_racial.1211.a
		add_stress = -30
		add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_wandered_the_forests }
	}
	option = { # I wonder what the future might bring
		name = elven_racial.1211.b
		random = {
			chance = 35
			if = {
				limit = { has_trait = lifestyle_mystic }
				add_trait_xp = {
					trait = lifestyle_mystic
					value = lifestyle_mystic_xp_gain_minor_value
				}
			}
			else = { add_trait = lifestyle_mystic }
		}
	}
	after = {
		trigger_event = elven_racial.1299
	}
}

elven_racial.1212 = { # The young sapling
	title = elven_racial.1212.t
	type = character_event
	desc = elven_racial.1212.desc
	content_source = realms_dlc
	theme = travel_pilgrimage
	override_background = { reference = wilderness_forest_pine }
	left_portrait = {
		character = root
		animation = happiness
	}
	option = { # A joyous discovery 
		name = elven_racial.1212.a 
		add_prestige = minor_prestige_gain
		add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_wandered_the_forests }
	}
	option = { # I shall tend to it myself
		name = elven_racial.1212.b
		random = {
			chance = 25
			if = {
				limit = { has_trait = lifestyle_gardener }
				add_learning_lifestyle_xp = 100
			}
			else = { add_trait = lifestyle_gardener }
		}
	}
	after = {
		trigger_event = elven_racial.1299
	}
}

elven_racial.1213 = { # A glimpse of rare plumage
	title = elven_racial.1213.t
	type = character_event
	desc = elven_racial.1213.desc
	content_source = realms_dlc
	theme = diplomacy
	override_background = { reference = wilderness_forest }
	right_portrait = {
		character = root
		animation = admiration
	}
	option = { # Old forests hold new promises
		name = elven_racial.1213.a
		add_stress = -20
		add_legitimacy = miniscule_legitimacy_gain
	}
	option = { # A sign of fair days
		name = elven_racial.1213.b
		random = {
			chance = 25
			if = {
				limit = { has_trait = lifestyle_poet }
				add_diplomacy_lifestyle_xp = 100
			}
			else = { add_trait = lifestyle_poet }
		}
	}
	after = {
		trigger_event = elven_racial.1299
	}
}

elven_racial.1214 = { # Drunken revelry
	title = elven_racial.1214.t
	type = character_event
	desc = elven_racial.1214.desc
	content_source = realms_dlc
	theme = feast_activity
	override_background = { reference = ep2_forest_managed }
	left_portrait = {
		character = scope:elven_drunk
		animation = wedding_drunk
	}
	right_portrait = {
		character = root
		animation = thinking
	}
	trigger = {
		is_elf = yes
		is_landed = yes
		OR = {
			AND = {
				culture = culture:lasgalendrim
				capital_county = { culture = culture:lasgalendrim }
			}
			AND = {
				culture = culture:penni
				capital_county = { culture = culture:penni }
			}
		}
	}
	immediate = {
		create_character = {
			age = { young_age middle_age }
			culture = root.capital_county.culture
			faith = root.capital_county.faith
			dynasty = none
			location = root.location
			gender_female_chance = 50
			# Traits.
			## Education.
			random_traits_list = {
				count = 1
				education_diplomacy_1 = {}
				education_diplomacy_2 = {}
				education_intrigue_1 = {}
				education_intrigue_2 = {}
				education_martial_1 = {}
				education_martial_2 = {}
				education_stewardship_1 = {}
				education_stewardship_2 = {}
				education_learning_1 = {}
				education_learning_2 = {}
			}
			save_scope_as = elven_drunk
			after_creation = {
				scope:elven_drunk = { replace_unelven_traits = yes }
			}
		}
	}
	option = { # Join in the merriment
		name = elven_racial.1214.a
		add_stress = -30
		random = {
			chance = 5
			if = {
				limit = { has_trait = drunkard }
			}
			else = { add_trait = drunkard }
		}
		random = {
			chance = 40 
			add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_wandered_the_forests }
		}
	}
	option = { # This is not how Elves behave
		name = elven_racial.1214.b
		add_diplomacy_lifestyle_xp = 300
	}
	after = {
		trigger_event = elven_racial.1299
		hidden_effect = { scope:elven_drunk = { silent_disappearance_effect = yes } }
	}
}

elven_racial.1215 = { # Solace Beneath the Stars
	title = elven_racial.1215.t
	type = character_event
	desc = elven_racial.1215.desc
	content_source = realms_dlc
	theme = elven
	override_background = { reference = wilderness_forest_deep }
	right_portrait = {
		character = root
		animation = thinking
	}
	option = { # It is beautiful beneath Varda's lights
		name = elven_racial.1215.a
		add_stress = -60
		add_prestige = minor_prestige_gain
	}
	option = { # After all that has happened, I am still here.
		trigger = {
			OR = {
				has_trait = depressed_1
				has_trait = depressed_genetic
			}
		}
		name = elven_racial.1215.b
		add_stress = -10
		if = {
			limit = { has_trait = depressed_1 }
			remove_trait = depressed_1
		}
		else = {
			remove_trait = depressed_genetic
		}
		add_prestige = minor_prestige_gain
	}
	after = {
		trigger_event = elven_racial.1299
	}
	option = { # May our hope be restored
		name = elven_racial.1215.c
		add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_wandered_the_forests }
	}
}

elven_racial.1216 = { # A Feast in the Forest
	title = elven_racial.1216.t
	type = character_event
	desc = elven_racial.1216.desc
	content_source = realms_dlc
	theme = feast_activity
	override_background = { reference = wilderness_forest_deep }
	left_portrait = {
		character = root
		animation = toast_goblet
	}
	right_portrait = {
		character = scope:random_courtier
		animation = dancing
	}
	immediate = {
		random_courtier = { save_scope_as = random_courtier }
	}
	option = { # Let's hope everything goes well!
		name = elven_racial.1216.a
		custom_tooltip = elven_racial.1216.a.tt
		hidden_effect = {
			random_list = {
				50 = { # It's a happy party
					trigger_event = elven_racial.1217
				}
				50 = { # The feast is disturbed
					trigger_event = elven_racial.1218
				}
			}
		}
	}
}

elven_racial.1217 = { # Happy feast
	title = elven_racial.1217.t
	type = character_event
	desc = elven_racial.1217.desc
	content_source = realms_dlc
	theme = feast_activity
	override_background = { reference = ep2_forest_managed }
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:random_courtier
		animation = toast
	}
	immediate = {
		random_courtier = { save_scope_as = random_courtier }
	}
	option = { # How nice!
		name = elven_racial.1217.a
		add_prestige = medium_prestige_gain
		add_stress = -20 
		add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_wandered_the_forests }
		add_character_modifier = {
			modifier = ate_good_meal
			years = 2
		}
		if = {
			limit = { has_government = landless_adventurer_government }
			domicile ?= { change_provisions = medium_provisions_gain }
		}
	}
	after = {
		trigger_event = elven_racial.1299
	}
}

elven_racial.1218 = { # Disturbed feast
	title = elven_racial.1218.t
	type = character_event
	desc = elven_racial.1218.desc
	content_source = realms_dlc
	theme = unfriendly
	override_background = { reference = wilderness_forest_deep }
	left_portrait = {
		character = root
		animation = anger
	}
	right_portrait = {
		character = scope:uninvited_traveler
		animation = beg
	}
	immediate = {
		if = {	# Rhovanion
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_west_rhovanion }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 28
				gender_female_chance = 20
				culture = culture:woodmen
				faith = faith:faith_woodmen
				trait = lifestyle_traveler
				trait = beauty_bad_1
				save_scope_as = uninvited_traveler
			}
		}
		else_if = {	 # Eriador
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_west_arnor }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 28
				gender_female_chance = 20
				culture = culture:hillmen
				faith = faith:faith_hillmen
				trait = lifestyle_traveler
				trait = beauty_bad_1
				save_scope_as = uninvited_traveler
			}
		}
		else_if = {	 # Enedhwaith
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_west_enedhwaith }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 28
				gender_female_chance = 20
				culture = culture:enedhwaithrim
				faith = faith:faith_gwathuirim_dynion
				trait = lifestyle_traveler
				trait = beauty_bad_1
				save_scope_as = uninvited_traveler
			}
		}
		else_if = {	 # Gondor
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_west_gondor }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 28
				gender_female_chance = 20
				culture = culture:orodbedhrim
				faith = faith:faith_edain
				trait = lifestyle_traveler
				trait = beauty_bad_1
				save_scope_as = uninvited_traveler
			}
		}
		else_if = {	 # Rhûn
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_rhun }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 28
				gender_female_chance = 20
				culture = culture:igath
				faith = faith:faith_rhun_pantheistic
				trait = lifestyle_traveler
				trait = beauty_bad_1
				save_scope_as = uninvited_traveler
			}
		}
		else_if = {	 # Lindon
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_west_beleriand }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 99
				gender_female_chance = 20
				culture = culture:broadbeams
				faith = faith:faith_broadbeams
				trait = lifestyle_traveler
				trait = beauty_bad_1
				save_scope_as = uninvited_traveler
			}
		}
		else_if = {	 # Harad
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_harad }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 27
				gender_female_chance = 20
				culture = culture:arani
				faith = faith:faith_arani
				trait = lifestyle_traveler
				trait = beauty_bad_1
				save_scope_as = uninvited_traveler
			}
		}
		else_if = {	 # Utter South
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_uttersouth }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 27
				gender_female_chance = 20
				culture = culture:usakani
				faith = faith:faith_amav
				trait = lifestyle_traveler
				trait = beauty_bad_1
				save_scope_as = uninvited_traveler
			}
		}
		else = {	 # Fallback
			create_character = {
				dynasty = none
				location = root.location
				age = 27
				gender_female_chance = 20
				culture = culture:leofring
				faith = faith:faith_midde_court
				trait = lifestyle_traveler
				trait = beauty_bad_1
				save_scope_as = uninvited_traveler
			}
		}
	}
	option = { # How rude! We're outta here.
		name = elven_racial.1218.a
		add_prestige = minor_prestige_gain
		add_dread = miniscule_dread_gain
		add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_wandered_the_forests }
		stress_impact = {
			arrogant = major_stress_impact_loss
			paranoid = major_stress_impact_loss
			callous = medium_stress_impact_loss
			shy = medium_stress_impact_loss
			humble = medium_stress_impact_gain
			compassionate = major_stress_impact_gain
			trusting = medium_stress_impact_gain
			gregarious = major_stress_impact_gain
		}
	}
	option = { # *FINE* you can stay
		name = elven_racial.1218.b
		add_prestige = medium_prestige_loss
		add_character_modifier = {
			modifier = ate_good_meal
			years = 2
		}
		stress_impact = {
			arrogant = major_stress_impact_gain
			paranoid = major_stress_impact_gain
			callous = medium_stress_impact_gain
			shy = medium_stress_impact_gain
			humble = medium_stress_impact_loss
			compassionate = major_stress_impact_loss
			trusting = medium_stress_impact_loss
			gregarious = major_stress_impact_loss
		}
	}
	after = {
		trigger_event = elven_racial.1299
		hidden_effect = { scope:uninvited_traveler = { silent_disappearance_effect = yes } }
	}
}

elven_racial.1219 = { # Accursed Enemies
	title = elven_racial.1219.t
	type = character_event
	desc = elven_racial.1219.desc
	content_source = realms_dlc
	theme = dread
	left_portrait = {
		character = root
		animation = shock
	}
	right_portrait = {
		character = scope:orc_tresspasser
		animation = aggressive_axe
	}
	immediate = {
		if = {	# Rhovanion
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_west_rhovanion }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = { young_age middle_age }
				gender_female_chance = 0
				culture = culture:kazgumhoth
				faith = faith:sons_of_sauron
				save_scope_as = orc_tresspasser
			}
		}
		else_if = {	 # Eriador
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_west_arnor }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = { young_age middle_age }
				gender_female_chance = 0
				culture = culture:worauthai_madur
				faith = faith:way_of_strength
				save_scope_as = orc_tresspasser
			}
		}
		else_if = {	 # Enedhwaith
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_west_enedhwaith }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 28
				gender_female_chance = 0
				culture = culture:isengard_urukhai
				faith = faith:white_hand_cult
				save_scope_as = orc_tresspasser
			}
		}
		else_if = {	 # Rhûn
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_rhun }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 28
				gender_female_chance = 0
				culture = culture:kazgumhoth
				faith = faith:sons_of_sauron
				save_scope_as = orc_tresspasser
			}
		}
		else_if = {	 # Lindon
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_west_beleriand }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = { young_age middle_age }
				gender_female_chance = 0
				culture = culture:generic_goblin
				faith = faith:way_of_strength
				save_scope_as = orc_tresspasser
			}
		}
		else_if = {	 # Harad
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_harad }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 27
				gender_female_chance = 0
				culture = culture:rukhashai
				faith = faith:sons_of_sauron
				save_scope_as = orc_tresspasser
			}
		}
		else_if = {	 # Utter South
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_uttersouth }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 27
				gender_female_chance = 0
				culture = culture:rukhashai
				faith = faith:volcano_cult
				save_scope_as = orc_tresspasser
			}
		}
		else_if = {	 # Bay of Ormal
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_harad_bayoformal }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 27
				gender_female_chance = 0
				culture = culture:rukhashai
				faith = faith:volcano_cult
				save_scope_as = orc_tresspasser
			}
		}
		else = {	 # Fallback
			create_character = {
				dynasty = none
				location = root.location
				age = { young_age middle_age }
				gender_female_chance = 0
				culture = culture:generic_goblin
				faith = faith:sons_of_sauron
				save_scope_as = orc_tresspasser
			}
		}
	}
	option = { # Slay the intruders! To arms!
		name = elven_racial.1219.a
		stress_impact = {
			craven = medium_stress_impact_gain
			paranoid = medium_stress_impact_gain
			brave = medium_stress_impact_loss
			just = medium_stress_impact_loss
		}
		duel = {
 			skill = prowess
			target = scope:orc_tresspasser
 			60 = {
				# You're successful
 				desc = elven_racial.1219.a.success
 				compare_modifier = {
 					value = scope:duel_value
 					multiplier = 3.5
 					min = -49
 				}
 				hidden_effect = {
					send_interface_toast = {
						title = elven_racial.1219.a.success
						left_icon = root
						right_icon = scope:orc_tresspasser
					}
				}
				add_prestige = medium_prestige_gain
				add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_wandered_the_forests }
				scope:orc_tresspasser = { death = { death_reason = death_fight killer = root } }
				if = {
					limit = { has_government = landless_adventurer_government }
					domicile ?= { change_provisions = medium_provisions_gain }
				}
 			}
 			40 = {
 				# You failed
 				desc = elven_racial.1219.a.failure
 				compare_modifier = {
 					value = scope:duel_value
 					multiplier = -3.5
 					min = -49
 				}
				hidden_effect = {
					send_interface_toast = {
						title = elven_racial.1219.a.failure
						left_icon = root
						right_icon = scope:orc_tresspasser
					}
				}
				increase_wounds_effect = { REASON = fight }
				add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_wandered_the_forests }
				hidden_effect = { scope:orc_tresspasser = { silent_disappearance_effect = yes } }
 			}
		}
	}
	option = { # Run Away
		name = elven_racial.1219.b
		add_prestige = major_prestige_loss
		add_legitimacy = minor_legitimacy_loss
		add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_wandered_the_forests }
		stress_impact = {
			brave = medium_stress_impact_gain
			just = medium_stress_impact_gain
			craven = medium_stress_impact_loss
			paranoid = medium_stress_impact_loss
		}
		ai_chance = {
			base = 0 
		}
	}
	after = {
		trigger_event = elven_racial.1299
	}
}

elven_racial.1220 = { # A Hope Rekindled
	title = elven_racial.1220.t
	type = character_event
	desc = elven_racial.1220.desc
	content_source = realms_dlc
	theme = elven
	override_background = { reference = ep2_hunt_foggy_forest }
	right_portrait = {
		character = root
		animation = storyteller
	}
	left_portrait = {
		character = scope:random_council_member
		animation = happiness
	}
	immediate = {
		random_councillor = { save_scope_as = random_council_member }
	}
	option = { # We must not despair against the Long Defeat
		name = elven_racial.1220.a
		add_legitimacy = medium_legitimacy_gain
		add_elven_hope_effect = { VALUE = medium_elven_hope_gain HOPE_EFFECT = effect_elven_hope_wandered_the_forests }
	}
	option = { # I shall inspire my vassals and councillors
		name = elven_racial.1220.b
		every_vassal = {
			add_opinion = {
				target = root
				modifier = friendliness_opinion
				opinion = 15
			}
		}
		every_tributary = {
			limit = { suzerain = root }
			add_opinion = {
				target = root
				modifier = friendliness_opinion
				opinion = 15
			}
		}
		every_councillor = {
			add_opinion = {
				target = root
				modifier = friendliness_opinion
				opinion = 15
			}
		}
	}
	after = {
		trigger_event = elven_racial.1299
	}
}

elven_racial.1221 = { # An Undisturbed Moment
	title = elven_racial.1221.t
	type = character_event
	desc = elven_racial.1221.desc
	content_source = realms_dlc
	theme = love
	override_background = { reference = wilderness_forest_pine }
	trigger = {
	    is_married = yes
		NOT = { root.primary_spouse = { is_in_valinor = yes } }
	}
	right_portrait = {
		character = root
		animation = flirtation
	}
	left_portrait = {
		character = primary_spouse
		animation = admiration
	}
	immediate = { root.primary_spouse = { save_scope_as = elven_spouse } }
	option = { # What a wonderful, rare occasion
		name = elven_racial.1221.a
		root = {
			had_sex_with_effect = {
				CHARACTER = scope:elven_spouse
				PREGNANCY_CHANCE = 75
			}
		}
		stress_impact = {
			base = medium_stress_impact_loss
			lustful = minor_stress_impact_loss
			rakish = minor_stress_impact_loss
			chaste = major_stress_impact_gain
			shy = medium_stress_impact_gain
			impatient = minor_stress_impact_gain
		}
	}
	option = { # Let's just talk, just you and me
		name = elven_racial.1221.b
		scope:elven_spouse = {
			add_opinion = {
				target = root
				modifier = friendliness_opinion
				opinion = 50
			}
		}
	}
	after = {
		trigger_event = elven_racial.1299
	}
}

elven_racial.1222 = { # How to Fight in the Forest
	title = elven_racial.1222.t
	type = character_event
	desc = elven_racial.1222.desc
	content_source = realms_dlc
	theme = martial_chivalry_focus
	override_background = { reference = wilderness_forest }
	left_portrait = {
		character = root
		animation = throne_room_one_handed_passive_1
	}
	right_portrait = {
		character = scope:elven_marshal
		animation = marshal
	}
	trigger = { exists = cp:councillor_marshal }
	immediate = { root.cp:councillor_marshal = { save_scope_as = elven_marshal } }
	option = { # Show me how to fight in the forest
		name = elven_racial.1222.a
		random = {
			chance = 50
			if = {
				limit = { has_trait = forest_fighter }
				add_trait_xp = {
					trait = forest_fighter
					value = 20
				}
			}
			else = {
				add_trait = forest_fighter
			}
		}
	}
	option = { # Some sparring would be great
		name = elven_racial.1222.b
		random = {
			chance = 50
			if = {
				limit = { has_trait = lifestyle_blademaster }
				add_trait_xp = {
					trait = lifestyle_blademaster
					value = 20
				}
			}
			else = {
				add_trait = lifestyle_blademaster
			}
		}
	}
	after = {
		trigger_event = elven_racial.1299
	}
}

elven_racial.1223 = { # A Voice on the Wind
    title = elven_racial.1223.t
	type = character_event
    desc = elven_racial.1223.desc
	content_source = realms_dlc
	theme = learning_theology_focus
	override_background = { reference = wilderness_forest }
	left_portrait = {
		character = root
		animation = survey_staff
	}
	right_portrait = {
		character = scope:chaplain
		animation = worry
	}
	trigger = {
		exists = root.cp:councillor_court_chaplain
	}
	immediate = {
		root.cp:councillor_court_chaplain = { save_scope_as = chaplain }
	}
    option = {
        name = elven_racial.1223.a # Follow the voice
        add_learning_lifestyle_xp = 250
        if = {
            limit = { NOT = { has_trait = lifestyle_mystic } }
            add_trait = lifestyle_mystic
        }
		else = {
			add_trait_xp = {
				trait = lifestyle_mystic
				value = 20
			}
		}
    }

    option = {
        name = elven_racial.1223.b # Remain on the path
        add_piety = 75
        add_opinion = {
            target = scope:chaplain
            modifier = pleased_opinion
			opinion = 20
        }
	}
	after = {
		trigger_event = elven_racial.1299
	}
}

elven_racial.1224 = { # Ruins of a Long Lost Age
    title = elven_racial.1224.t
	type = character_event
    desc = elven_racial.1224.desc
	content_source = realms_dlc
	theme = learning
	override_background = { reference = ep2_forest_managed }
	left_portrait = {
		character = root
		animation = interested
	}
    option = {
        name = elven_racial.1224.a # Study the carvings
        random_list = {
			50 = {
				add_learning_lifestyle_xp = 200
			}
			50 = {
				add_learning_lifestyle_perk_points = 1
			}
		}
    }

    option = {
        name = elven_racial.1224.b # Offer a prayer
        add_piety = medium_piety_gain
		add_legitimacy = miniscule_legitimacy_gain
    }

    option = {
        name = elven_racial.1224.c # Remember in silence
        add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_wandered_the_forests }
    }
	after = {
		trigger_event = elven_racial.1299
	}
}

elven_racial.1225 = { # Character Development
    title = elven_racial.1225.t
	type = character_event
    desc = elven_racial.1225.desc
	content_source = realms_dlc
	theme = friendly
	override_background = { reference = wilderness_forest_pine }
	left_portrait = {
		character = root
		animation = pondering
	}
    option = { # I should strive for all elvendom
        name = elven_racial.1225.a 
		trigger = { NOT = { has_trait = zealous } }
		if = { 	
			limit = { has_trait = cynical }
			remove_trait = cynical 
		}
		else = {
			random_character_trait = {
				limit = { has_trait_category = personality }
				root = { remove_trait = prev } 
			}
		}
		add_trait = zealous 
    }

    option = { # No, I am who I am
        name = elven_racial.1225.b 
        add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_wandered_the_forests }
    }
	after = {
		trigger_event = elven_racial.1299
	}
}

elven_racial.1226 = { # A Crate of Provisions
    title = elven_racial.1226.t
	type = character_event
    desc = elven_racial.1226.desc
	content_source = realms_dlc
	theme = stewardship
	override_background = { reference = wilderness_forest_deep }
	left_portrait = {
		character = root
		animation = interested
	}
    option = { # Sell it
        name = elven_racial.1226.a 
		add_short_term_gold = minor_gold_value
    }

    option = { # Use the provisions
        name = elven_racial.1226.b 
      	if = {
			limit = { has_government = landless_adventurer_government }
			domicile ?= { change_provisions = medium_provisions_gain }
		}
		else = {
			add_stewardship_lifestyle_xp = 250
		}
    }
	after = {
		trigger_event = elven_racial.1299
	}
}

elven_racial.1299 = { # Returning home
	title = elven_racial.1299.t
	type = character_event
	desc = elven_racial.1299.desc
	content_source = realms_dlc
	theme = elven
	override_background = { reference = wilderness_forest }
	left_portrait = {
		character = root
		animation = personality_content
	}
	option = { # I'm going home
		name = elven_racial.1299.a
		custom_tooltip = elven_racial.1299.a.tt
	}
}

### Border Patrol Events ###
elven_racial.1400 = { # Choosing a destination
	hidden = yes
	immediate = {
		if = {
			limit = { exists = top_liege }
			top_liege = {
				random_realm_county = {
					limit = {
						any_neighboring_county = {
							NOR = {
								culture = { has_cultural_pillar = heritage_quendi }
								culture = { has_cultural_pillar = heritage_calaquendi }
								culture = { has_cultural_pillar = heritage_lomiquendi }
								culture = { has_cultural_pillar = heritage_moriquendi }
							}
						}
					}
					random_neighboring_county = {
						limit = {
							NOR = {
								culture = { has_cultural_pillar = heritage_quendi }
								culture = { has_cultural_pillar = heritage_calaquendi }
								culture = { has_cultural_pillar = heritage_lomiquendi }
								culture = { has_cultural_pillar = heritage_moriquendi }
							}
						}
						save_scope_as = patrol_target_county
					}
				}
			}
		}
		else = {
			random_realm_county = {
				limit = {
					any_neighboring_county = {
						NOR = {
							culture = { has_cultural_pillar = heritage_quendi }
							culture = { has_cultural_pillar = heritage_calaquendi }
							culture = { has_cultural_pillar = heritage_lomiquendi }
							culture = { has_cultural_pillar = heritage_moriquendi }
						}
					}
				}
				random_neighboring_county = {
					limit = {
						NOR = {
							culture = { has_cultural_pillar = heritage_quendi }
							culture = { has_cultural_pillar = heritage_calaquendi }
							culture = { has_cultural_pillar = heritage_lomiquendi }
						}
					}
					save_scope_as = patrol_target_county
				}
			}
		}
		trigger_event = elven_racial.1401
	}
}

elven_racial.1401 = { # Setting out
	title = elven_racial.1401.t
	type = character_event
	desc = elven_racial.1401.desc
	content_source = realms_dlc
	theme = migration
	override_background = { reference = market_elven }
	left_portrait = {
		character = root
		animation = marshal
	}
    lower_right_portrait = { character = scope:knight1 }
    lower_left_portrait = { character = scope:knight2 }
	immediate = { 
		add_character_flag = wear_armor 
        random_knight = {
            limit = { is_ai = yes }
            save_scope_as = knight1
        }
        random_knight = {
            limit = {
                NOT = { this = scope:knight1 }
                is_ai = yes
            }
            save_scope_as = knight2
        }
	}
	option = { # I'm off
		name = elven_racial.1401.a
		custom_tooltip = elven_racial.1401.a.tt
		start_travel_plan = { #Travel to the border
			destination = scope:patrol_target_county.title_province
			players_use_planner = yes
			on_arrival_event = elven_racial.1402
		}
	}
    after = {
		custom_tooltip = {
			text = elven_racial.1401.tt_1
			current_travel_plan = { add_companion = scope:knight1 }
		}
		custom_tooltip = {
			text = elven_racial.1401.tt_2
			current_travel_plan = { add_companion = scope:knight2 }
		}
    }
}

elven_racial.1402 = { # Arrival - get a random event
	hidden = yes
	immediate = {
		root.location = { save_scope_as = border_patrol_province }
		trigger_event = {
			on_action = elven_patrol_events
		}
	}
}

elven_racial.1403 = { # Accursed Enemies
	title = elven_racial.1403.t
	type = character_event
	desc = elven_racial.1403.desc
	content_source = realms_dlc
	theme = battle
	left_portrait = {
		character = root
		animation = hunting_longbow_aim_arrow_default
	}
	right_portrait = {
		character = scope:orc_tresspasser
		animation = aggressive_axe
	}
	immediate = {
		if = {	# Rhovanion
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_west_rhovanion }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = { young_age middle_age }
				gender_female_chance = 0
				culture = culture:kazgumhoth
				faith = faith:sons_of_sauron
				save_scope_as = orc_tresspasser
			}
		}
		else_if = {	 # Eriador
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_west_arnor }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = { young_age middle_age }
				gender_female_chance = 0
				culture = culture:worauthai_madur
				faith = faith:way_of_strength
				save_scope_as = orc_tresspasser
			}
		}
		else_if = {	 # Enedhwaith
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_west_enedhwaith }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 28
				gender_female_chance = 0
				culture = culture:isengard_urukhai
				faith = faith:white_hand_cult
				save_scope_as = orc_tresspasser
			}
		}
		else_if = {	 # Rhûn
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_rhun }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 28
				gender_female_chance = 0
				culture = culture:kazgumhoth
				faith = faith:sons_of_sauron
				save_scope_as = orc_tresspasser
			}
		}
		else_if = {	 # Lindon
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_west_beleriand }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = { young_age middle_age }
				gender_female_chance = 0
				culture = culture:generic_goblin
				faith = faith:way_of_strength
				save_scope_as = orc_tresspasser
			}
		}
		else_if = {	 # Harad
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_harad }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 27
				gender_female_chance = 0
				culture = culture:rukhashai
				faith = faith:sons_of_sauron
				save_scope_as = orc_tresspasser
			}
		}
		else_if = {	 # Utter South
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_uttersouth }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 27
				gender_female_chance = 0
				culture = culture:rukhashai
				faith = faith:volcano_cult
				save_scope_as = orc_tresspasser
			}
		}
		else_if = {	 # Bay of Ormal
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_harad_bayoformal }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 27
				gender_female_chance = 0
				culture = culture:rukhashai
				faith = faith:volcano_cult
				save_scope_as = orc_tresspasser
			}
		}
		else = {	 # Fallback
			create_character = {
				dynasty = none
				location = root.location
				age = { young_age middle_age }
				gender_female_chance = 0
				culture = culture:generic_goblin
				faith = faith:sons_of_sauron
				save_scope_as = orc_tresspasser
			}
		}
	}
	option = { # Slay the intruders! To arms!
		name = elven_racial.1219.a
		skill = prowess
		stress_impact = {
			craven = medium_stress_impact_gain
			paranoid = medium_stress_impact_gain
			brave = medium_stress_impact_loss
			just = medium_stress_impact_loss
		}
		duel = {
 			skill = prowess
			target = scope:orc_tresspasser
 			50 = {
				# You're successful
 				desc = elven_racial.1219.a.success
 				compare_modifier = {
 					value = scope:duel_value
 					multiplier = 3.5
 					min = -49
 				}
 				hidden_effect = {
					send_interface_toast = {
						title = elven_racial.1219.a.success
						left_icon = root
						right_icon = scope:orc_tresspasser
						add_prestige = medium_prestige_gain
						show_as_tooltip = { add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border } }
					}
				}
				scope:orc_tresspasser = { death = { death_reason = death_fight killer = root } }
				add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
				scope:border_patrol_province.county = {
					if = { 
						limit = { is_wastelands = no }
						change_county_control = 25 
					}
				}
 			}
 			50 = {
 				# You failed
 				desc = elven_racial.1219.a.failure
 				compare_modifier = {
 					value = scope:duel_value
 					multiplier = -3.5
 					min = -49
 				}
				hidden_effect = {
					send_interface_toast = {
						title = elven_racial.1219.a.failure
						left_icon = root
						right_icon = scope:orc_tresspasser
						show_as_tooltip = { add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_border_patrol_failed } }
					}
				}
				increase_wounds_effect = { REASON = fight }
				add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_border_patrol_failed }
				hidden_effect = { scope:orc_tresspasser = { silent_disappearance_effect = yes } }
				if = {
					limit = { has_government = landless_adventurer_government }
					add_character_flag = laamp_patrol_failed
				}
 			}
		}
	}
	option = { # Run Away
		name = elven_racial.1219.b
		add_prestige = major_prestige_loss
		add_legitimacy = minor_legitimacy_loss
		add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
		stress_impact = {
			brave = medium_stress_impact_gain
			just = medium_stress_impact_gain
			craven = medium_stress_impact_loss
			paranoid = medium_stress_impact_loss
		}
		if = {
			limit = { has_government = landless_adventurer_government }
			add_character_flag = laamp_patrol_failed
		}
		ai_chance = {
			base = 0 
		}
	}
	after = {
		trigger_event = elven_racial.1499
	}
}

elven_racial.1404 = { # Orc Marauders
	content_source = realms_dlc
	type = character_event
	title = elven_racial.1404.t
	desc = elven_racial.1404.desc
	theme = raid

	left_portrait = {
		character = root
		animation = throne_room_two_handed_passive_shield
		camera = camera_event_left_away_3_4
	}
	right_portrait = {
		character = scope:orc_raider
		animation = menacing
	}
	
	lower_left_portrait = {
		trigger = { 
			exists = scope:knight1
		}
		character = scope:knight1
		animation = marshal
	}
	lower_right_portrait = {
		trigger = { 
			exists = scope:knight2
		}
		character = scope:knight2
		animation = marshal
	}
	
	immediate = {
		play_music_cue = lotr_cue_elves
		if = {	# Rhovanion
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_west_rhovanion }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = { young_age middle_age }
				gender_female_chance = 0
				culture = culture:kazgumhoth
				faith = faith:sons_of_sauron
				save_scope_as = orc_raider
			}
		}
		else_if = {	 # Eriador
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_west_arnor }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = { young_age middle_age }
				gender_female_chance = 0
				culture = culture:worauthai_madur
				faith = faith:way_of_strength
				save_scope_as = orc_raider
			}
		}
		else_if = {	 # Enedhwaith
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_west_enedhwaith }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 28
				gender_female_chance = 0
				culture = culture:isengard_urukhai
				faith = faith:white_hand_cult
				save_scope_as = orc_raider
			}
		}
		else_if = {	 # Rhûn
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_rhun }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 28
				gender_female_chance = 0
				culture = culture:kazgumhoth
				faith = faith:sons_of_sauron
				save_scope_as = orc_raider
			}
		}
		else_if = {	 # Lindon
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_west_beleriand }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = { young_age middle_age }
				gender_female_chance = 0
				culture = culture:generic_goblin
				faith = faith:way_of_strength
				save_scope_as = orc_raider
			}
		}
		else_if = {	 # Harad
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_harad }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 27
				gender_female_chance = 0
				culture = culture:rukhashai
				faith = faith:sons_of_sauron
				save_scope_as = orc_raider
			}
		}
		else_if = {	 # Utter South
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_uttersouth }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 27
				gender_female_chance = 0
				culture = culture:rukhashai
				faith = faith:volcano_cult
				save_scope_as = orc_raider
			}
		}
		else_if = {	 # Bay of Ormal
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_harad_bayoformal }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = 27
				gender_female_chance = 0
				culture = culture:rukhashai
				faith = faith:volcano_cult
				save_scope_as = orc_tresspasser
			}
		}
		else = {	 # Fallback
			create_character = {
				dynasty = none
				location = root.location
				age = { young_age middle_age }
				gender_female_chance = 0
				culture = culture:generic_goblin
				faith = faith:sons_of_sauron
				save_scope_as = orc_raider
			}
		}
	}
	
	option = { # Knight 1 tries to drive off the orcs
		name = elven_racial.1404.a
		skill = martial
		trigger = { 
			exists = scope:knight1
		}
		scope:knight1 = {
			duel = {
				skill = martial 
				value = 14
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = elven_racial.1404.a.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:knight1
							title = elven_racial.1404.success.toast.t
							add_prestige = minor_prestige_gain
							add_martial_lifestyle_xp = minor_lifestyle_xp
							add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
						}
					}
					scope:border_patrol_province.county = {
						if = { 
							limit = { is_wastelands = no }
							change_county_control = 25 
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = elven_racial.1404.a.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:knight1
							title = elven_racial.1404.failure.toast.t
							scope:knight1 = {
								increase_wounds_effect = {
									REASON = fight
								}
							}
							add_prestige = medium_prestige_loss	
							add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_border_patrol_failed }
							stress_impact = {
								just = medium_stress_impact_gain
								wrathful = medium_stress_impact_gain
								vengeful = medium_stress_impact_gain
								sadistic = minor_stress_impact_gain							
							}
						}
						if = {
							limit = { has_government = landless_adventurer_government }
							add_character_flag = laamp_patrol_failed
						}
					}					
				}
			}
		}
	}
	option = { # Knight 2 tries to drive off the orcs
		name = elven_racial.1404.b
		skill = prowess
		trigger = { 
			exists = scope:knight2
		}
		scope:knight2 = {
			duel = {
				skill = prowess 
				value = 14
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = elven_racial.1404.b.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:knight2
							title = elven_racial.1404.success.toast.t
							add_prestige = minor_prestige_gain
							add_martial_lifestyle_xp = minor_lifestyle_xp
							add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
						}
					}
					scope:border_patrol_province.county = {
						if = { 
							limit = { is_wastelands = no }
							change_county_control = 25 
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = elven_racial.1404.b.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:knight2
							title = elven_racial.1404.failure.toast.t							
							scope:knight2 = {
								increase_wounds_effect = {
									REASON = fight
								}
							}
							add_prestige = medium_prestige_loss	
							add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_border_patrol_failed }
							stress_impact = {
								just = medium_stress_impact_gain
								wrathful = medium_stress_impact_gain
								vengeful = medium_stress_impact_gain
								sadistic = minor_stress_impact_gain									
							}
						}
						if = {
							limit = { has_government = landless_adventurer_government }
							add_character_flag = laamp_patrol_failed
						}
					}					
				}
			}
		}
	}
	option = { # You
		name = elven_racial.1404.c
		root = {
			duel = {
				skill = prowess 
				value = 14
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = elven_racial.1404.c.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							title = elven_racial.1404.success.toast.t
							add_prestige = minor_prestige_gain
							add_martial_lifestyle_xp = minor_lifestyle_xp
							add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
						}
					}
					scope:border_patrol_province.county = {
						if = { 
							limit = { is_wastelands = no }
							change_county_control = 25 
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = elven_racial.1404.c.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							title = elven_racial.1404.failure.toast.t							
							increase_wounds_effect = {
								REASON = fight
							}
							add_prestige = medium_prestige_loss	
							add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_border_patrol_failed }
							stress_impact = {
								just = medium_stress_impact_gain
								wrathful = medium_stress_impact_gain
								vengeful = medium_stress_impact_gain
								sadistic = minor_stress_impact_gain							
							}
						}
						if = {
							limit = { has_government = landless_adventurer_government }
							add_character_flag = laamp_patrol_failed
						}
					}					
				}
			}
		}
	}
	after = {
		trigger_event = {
			id = elven_racial.1499
		}
		scope:orc_raider = {
			silent_disappearance_effect = yes
		}
	}
}

elven_racial.1405 = { # A Human Village
    title = elven_racial.1405.t
	type = character_event
    desc = elven_racial.1405.desc
	content_source = realms_dlc
	theme = diplomacy
	override_background = { reference = market_tribal }
	left_portrait = {
		character = root
		animation = survey
		camera = camera_event_very_left
	}
	right_portrait = {
		character = scope:human_villager
		animation = thinking
	}
	trigger = {
		scope:border_patrol_province.county.holder = {
			is_human = yes 
		}
	}
	immediate = {
		create_character = {
			template = peasant_character
			dynasty = none
			location = root.location
			culture = root.location.culture
			faith = root.location.faith
			gender_female_chance = 50
			save_scope_as = human_villager
			after_creation = {
				set_to_lowborn = yes
			}
		}
	}
    option = {
        name = elven_racial.1405.a # Offer kind advice
		add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
		root.location.culture = {
			change_cultural_acceptance = {
				target = root.culture
				value = 25
				desc = cultural_acceptance_gain_event
			}
		}
    }

    option = {
        name = elven_racial.1405.b # Keep out of sight
		add_intrigue_lifestyle_xp = 200
        random = {
			chance = 33
			if = {
				limit = { has_trait = cautious_leader }
				add_trait_xp = {
					trait = cautious_leader
					value = 20 
				}
			}
			else = {
				add_trait = cautious_leader
			}
		}
	}
	
	after = {
		trigger_event = {
			id = elven_racial.1499
		}
		scope:human_villager = {
			silent_disappearance_effect = yes
		}
	}
}

elven_racial.1406 = { # The Orc Camp
	content_source = realms_dlc
	type = character_event
	title = elven_racial.1406.t
	desc = elven_racial.1406.desc
	theme = intrigue_skulduggery_focus
	
	override_background = {
		reference = orc_camp
	}
	left_portrait = {
		character = root
		animation = survey
		camera = camera_event_left_away
	}
	
	lower_left_portrait = {
		trigger = { 
			exists = scope:knight1
		}
		character = scope:knight1
		animation = marshal
	}
	lower_right_portrait = {
		trigger = { 
			exists = scope:knight2
		}
		character = scope:knight2
		animation = marshal
	}

	immediate = {
	}
	
	option = { # Knight tries to sabotage the camp
		name = elven_racial.1406.a
		skill = intrigue
		trigger = { 
			exists = scope:knight1
		}
		scope:knight1 = {
			duel = {
				skill = intrigue 
				value = 14
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = elven_racial.1406.a.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:knight1
							title = elven_racial.1406.success.toast.t
							add_prestige = minor_prestige_gain
							add_intrigue_lifestyle_xp = minor_lifestyle_xp
							add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = elven_racial.1406.a.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:knight1
							title = elven_racial.1406.failure.toast.t
							scope:knight1 = {
								increase_wounds_effect = {
									REASON = fight
								}
							}
							add_prestige = medium_prestige_loss	
							stress_impact = {
								just = medium_stress_impact_gain
								wrathful = medium_stress_impact_gain
								vengeful = medium_stress_impact_gain
								sadistic = minor_stress_impact_gain							
							}
							add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_border_patrol_failed }
						}
						if = {
							limit = { has_government = landless_adventurer_government }
							add_character_flag = laamp_patrol_failed
						}
					}					
				}
			}
		}
	}
	option = { # Knight 2
		name = elven_racial.1406.b
		skill = intrigue
		trigger = { 
			exists = scope:knight2
		}
		scope:knight2 = {
			duel = {
				skill = intrigue 
				value = 16
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = elven_racial.1406.b.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:knight2
							title = elven_racial.1406.success.toast.t
							add_prestige = minor_prestige_gain
							add_intrigue_lifestyle_xp = minor_lifestyle_xp
							add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = elven_racial.1406.b.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:knight2
							title = elven_racial.1406.failure.toast.t							
							scope:knight2 = {
								increase_wounds_effect = {
									REASON = fight
								}
							}
							add_prestige = medium_prestige_loss	
							stress_impact = {
								just = medium_stress_impact_gain
								wrathful = medium_stress_impact_gain
								vengeful = medium_stress_impact_gain
								sadistic = minor_stress_impact_gain									
							}
							add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_border_patrol_failed }
						}
						if = {
							limit = { has_government = landless_adventurer_government }
							add_character_flag = laamp_patrol_failed
						}
					}					
				}
			}
		}
	}
	option = { # You
		name = elven_racial.1406.c
		skill = intrigue
		root = {
			duel = {
				skill = intrigue 
				value = 16
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = elven_racial.1406.c.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							title = elven_racial.1406.success.toast.t
							add_prestige = minor_prestige_gain
							add_intrigue_lifestyle_xp = minor_lifestyle_xp
							add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = elven_racial.1406.c.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							title = elven_racial.1406.failure.toast.t							
							increase_wounds_effect = {
								REASON = fight
							}
							add_prestige = medium_prestige_loss	
							stress_impact = {
								just = medium_stress_impact_gain
								wrathful = medium_stress_impact_gain
								vengeful = medium_stress_impact_gain
								sadistic = minor_stress_impact_gain							
							}
							add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_border_patrol_failed }
						}
					}					
				}
			}
		}
	}
	 after = {
	 	trigger_event = {
	 		id = elven_racial.1499
		}
	}
}

elven_racial.1407 = { # No Enemies Sighted
    title = elven_racial.1407.t
	type = character_event
    desc = elven_racial.1407.desc
	content_source = realms_dlc
	theme = migration

	left_portrait = {
		character = root
		animation = survey
		camera = camera_event_left_away_3_4
	}

	trigger = {
		scope:border_patrol_province.county.holder = {
			is_orc = no 
			is_nazgul = no
		}
	}

    option = {
        name = elven_racial.1407.a # A nice calm patrol
		add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
    }

	after = {
		trigger_event = {
			id = elven_racial.1499
		}
	}
}

elven_racial.1408 = { # The Trolls
	content_source = realms_dlc
	type = character_event
	title = elven_racial.1408.t
	desc = elven_racial.1408.desc
	theme = intrigue_skulduggery_focus
	
	override_background = {
		reference = terrain_travel
	}
	lower_center_portrait = {
		character = root
		animation = thinking
	}
	right_portrait = {
		character = scope:wild_troll
		animation = menacing
	}
	
	lower_left_portrait = {
		trigger = { 
			exists = scope:knight1
		}
		character = scope:knight1
		animation = eavesdrop
	}
	lower_right_portrait = {
		trigger = { 
			exists = scope:knight2
		}
		character = scope:knight2
		animation = scheme
	}
	
	immediate = {
		create_character = { # Create a new troll
			culture = culture:mountain_troll
			faith = faith:way_of_strength
			gender_female_chance = 0
			location = root.location
			save_scope_as = wild_troll
		}
	}
	
	option = { # Companion 1
		name = elven_racial.1408.a
		skill = diplomacy
		trigger = { 
			exists = scope:knight1
		}
		scope:knight1 = {
			duel = {
				skill = diplomacy 
				value = 14
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = elven_racial.1408.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:knight1
							title = elven_racial.1408.success.toast.t
							type = event_toast_effect_good
							add_prestige = minor_prestige_gain
							add_diplomacy_lifestyle_xp = minor_lifestyle_xp
							add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = elven_racial.1408.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:knight1
							title = elven_racial.1408.failure.toast.t
							type = event_toast_effect_bad
							scope:knight1 = {
								increase_wounds_effect = {
									REASON = fight
								}
							}
							add_prestige = medium_prestige_loss	
							stress_impact = {
								just = medium_stress_impact_gain
								wrathful = medium_stress_impact_gain
								vengeful = medium_stress_impact_gain
								sadistic = minor_stress_impact_gain							
							}
							add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_border_patrol_failed }
						}
						if = {
							limit = { has_government = landless_adventurer_government }
							add_character_flag = laamp_patrol_failed
						}
					}					
				}
			}
		}
	}
	option = { # Companion 2
		name = elven_racial.1408.b
		skill = intrigue
		trigger = { 
			exists = scope:knight1
		}
		scope:knight2 = {
			duel = {
				skill = intrigue 
				value = 14
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = elven_racial.1408.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:knight2
							type = event_toast_effect_good
							title = elven_racial.1408.success.toast.t
							add_prestige = minor_prestige_gain
							add_intrigue_lifestyle_xp = minor_lifestyle_xp
							add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = elven_racial.1408.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:knight2
							title = elven_racial.1408.failure.toast.t	
							type = event_toast_effect_bad
							scope:knight1 = {
								increase_wounds_effect = {
									REASON = fight
								}
							}
							add_prestige = medium_prestige_loss	
							stress_impact = {
								just = medium_stress_impact_gain
								wrathful = medium_stress_impact_gain
								vengeful = medium_stress_impact_gain
								sadistic = minor_stress_impact_gain									
							}
							add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_border_patrol_failed }
						}
						if = {
							limit = { has_government = landless_adventurer_government }
							add_character_flag = laamp_patrol_failed
						}
					}					
				}
			}
		}
	}
	option = { # You
		name = elven_racial.1408.c
		skill = diplomacy
		root = {
			duel = {
				skill = diplomacy 
				value = 14
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = elven_racial.1408.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							title = elven_racial.1408.success.toast.t
							type = event_toast_effect_good
							add_prestige = minor_prestige_gain
							add_diplomacy_lifestyle_xp = minor_lifestyle_xp
							add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = elven_racial.1408.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							title = elven_racial.1408.failure.toast.t	
							type = event_toast_effect_bad
							increase_wounds_effect = {
								REASON = fight
							}
							add_prestige = medium_prestige_loss	
							stress_impact = {
								just = medium_stress_impact_gain
								wrathful = medium_stress_impact_gain
								vengeful = medium_stress_impact_gain
								sadistic = minor_stress_impact_gain							
							}
							add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_border_patrol_failed }
						}
						if = {
							limit = { has_government = landless_adventurer_government }
							add_character_flag = laamp_patrol_failed
						}
					}					
				}
			}
		}
	}
	after = {
		scope:wild_troll = {
			silent_disappearance_effect = yes
		}
		trigger_event = elven_racial.1499
	}
}

elven_racial.1409 = { # Friendly Travelers
    title = elven_racial.1409.t
	type = character_event
    desc = elven_racial.1409.desc
	content_source = realms_dlc
	theme = elven

	left_portrait = {
		character = root
		animation = marshal_shield
	}
	right_portrait = {
		character = scope:wandering_elf
		animation = happiness 
	}
	immediate = {
		create_character = {
			faith = root.faith
			culture = root.culture
			location = root.location
			dynasty = none
			diplomacy = { 8 14 }
			stewardship = { 8 14 }
			martial = { 8 14 }
			intrigue = { 8 14 }
			learning = { 8 14 }
			prowess = { 8 14 }
			gender_female_chance = 50
			age = { 1056 4404 }
			save_scope_as = wandering_elf	
			after_creation = {
				scope:wandering_elf = { replace_unelven_traits = yes }
			}
		}
	}
    option = { # We wish them luck
        name = elven_racial.1409.a 
		add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
		hidden_effect = { scope:wandering_elf = { silent_disappearance_effect = yes } }
    }
	option = { # Recruit them 
		name = elven_racial.1409.b
		add_legitimacy = minor_legitimacy_gain
		add_prestige = minor_prestige_gain
		add_courtier = scope:wandering_elf 
	}
	
	after = {
		trigger_event = {
			id = elven_racial.1499
		}
	}
}

elven_racial.1410 = { # An Elven Waystone
	type = character_event
	content_source = realms_dlc
	title = elven_racial.1410.t
	desc = elven_racial.1410.desc
	theme = elven
	override_background = {
		reference = fp1_runestone	
	}
	left_portrait = {
		character = root
		animation = pondering
	}
	option = { # Try to study it
		name = elven_racial.1410.a
		skill = learning 
		root = {
			duel = {
				skill = learning 
				value = 11
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = elven_racial.1410.a.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							title = elven_racial.1410.success.toast.t
							add_prestige = minor_prestige_gain
							add_learning_lifestyle_xp = minor_lifestyle_xp
							add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = elven_racial.1410.a.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							title = elven_racial.1410.failure.toast.t							
							add_prestige = minor_prestige_loss	
							add_stress = 40
						}
					}					
				}
			}
		}
	}
	option = { # Just admire it
		name = elven_racial.1410.b 
		add_piety = minor_piety_gain
		add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
	}
	after = {
		trigger_event = {
			id = elven_racial.1499
		}
	}
}

elven_racial.1411 = { # The Abandoned Village
	type = character_event
	content_source = realms_dlc
	title = elven_racial.1411.t
	desc = elven_racial.1411.desc
	theme = migration
	override_background = {
		reference = fp1_tribal_temple	
	}
	left_portrait = {
		character = root
		animation = worry
	}
	option = { # Investigate 
		name = elven_racial.1411.a
		skill = intrigue 
		root = {
			duel = {
				skill = intrigue 
				value = 11
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = elven_racial.1411.a.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							title = elven_racial.1411.success.toast.t
							type = event_toast_effect_good
							add_prestige = minor_prestige_gain
							add_intrigue_lifestyle_xp = minor_lifestyle_xp
							add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = elven_racial.1411.a.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							title = elven_racial.1411.failure.toast.t	
							type = event_toast_effect_bad
							add_prestige = minor_prestige_loss	
							add_stress = 30
							add_elven_hope_effect = { VALUE = minimal_elven_hope_loss HOPE_EFFECT = effect_elven_hope_border_patrol_failed  }
						}
					}
					if = {
						limit = { has_government = landless_adventurer_government }
						add_character_flag = laamp_patrol_failed
					}					
				}
			}
		}
	}
	option = { # Move on
		name = elven_racial.1411.b 
		add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
	}
	option = { # Search it for supplies
		name = elven_racial.1411.c
		add_gold = minor_gold_value 
		add_piety = minor_piety_loss
		if = { limit = { has_government = landless_adventurer_government } 
			domicile ?= { change_provisions = { value = 500 } }
		}
	}
	after = {
		trigger_event = {
			id = elven_racial.1499
		}
	}
}

elven_racial.1412 = { # Set up camp?
    title = elven_racial.1412.t
	type = character_event
    desc = elven_racial.1412.desc
	content_source = realms_dlc
	theme = laamp
	override_background = {
		reference = wilderness_activity
	}
	left_portrait = {
		character = root
		animation = throne_room_two_handed_passive_shield
		camera = camera_event_very_left
	}

	trigger = {
		scope:border_patrol_province = {
			has_holding_type = wastelands_holding
		}
	}
	
	option = { # Let's set up a colony 
		name = elven_racial.1412.a
		ai_chance = { base = 0 }
		trigger = { has_government = elven_government }
		ai_colonisation_effect = { WASTELANDS = scope:border_patrol_province ROOT_SCOPE = root }
		remove_short_term_gold = major_gold_value 
	}

    option = { # Let's just be off
        name = elven_racial.1412.b
		add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
    }
	
	option = { # Let's go foraging 
		name = elven_racial.1412.c 
		trigger = { has_government = landless_adventurer_government }
		domicile ?= { change_provisions = { value = 700 } }
	}

	after = {
		trigger_event = {
			id = elven_racial.1499
		}
	}
}

elven_racial.1413 = { # Trespassers
    title = elven_racial.1413.t
	type = character_event
    desc = elven_racial.1413.desc
	content_source = realms_dlc
	theme = elven
	override_background = {
		reference = wilderness_activity
	}
	left_portrait = {
		character = root
		animation = throne_room_one_handed_passive_1
		camera = camera_event_very_left
	}
	right_portrait = {
		character = scope:trespasser_leader 
		animation = beg
	}
	immediate = {
		if = {	# Rhovanion
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_west_rhovanion }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = { young_age middle_age }
				gender_female_chance = 50
				culture = culture:woodmen
				faith = faith:faith_woodmen
				save_scope_as = trespasser_leader
			}
		}
		else_if = {	 # Eriador
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_west_arnor }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = { young_age middle_age }
				gender_female_chance = 50
				culture = culture:hillmen
				faith = faith:faith_westmen
				save_scope_as = trespasser_leader
			}
		}
		else_if = {	 # Enedhwaith
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_west_enedhwaith }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = { young_age middle_age }
				gender_female_chance = 50
				culture = culture:enedhwaithrim
				faith = faith:faith_gwathuirim_dynion
				save_scope_as = trespasser_leader
			}
		}
		else_if = {	 # Rhûn
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_rhun }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = { young_age middle_age }
				gender_female_chance = 50
				culture = culture:ulgath
				faith = faith:faith_rhun_pantheistic
				save_scope_as = trespasser_leader
			}
		}
		else_if = {	 # Lindon
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_west_beleriand }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = { young_age middle_age }
				gender_female_chance = 50
				culture = culture:lossoth
				faith = faith:faith_westward_waves
				save_scope_as = trespasser_leader
			}
		}
		else_if = {	 # Harad
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_harad }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = { young_age middle_age }
				gender_female_chance = 50
				culture = culture:arani
				faith = faith:faith_arani
				save_scope_as = trespasser_leader
			}
		}
		else_if = {	 # Utter South
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_uttersouth }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = { young_age middle_age }
				gender_female_chance = 50
				culture = culture:sederi
				faith = faith:faith_sederi
				save_scope_as = trespasser_leader
			}
		}
		else_if = {	 # Bay of Ormal
			limit = {
				root.capital_county.title_province ?= { geographical_region = middleearth_harad_bayoformal }
			}
			create_character = {
				dynasty = none
				location = root.location
				age = { young_age middle_age }
				gender_female_chance = 50
				culture = culture:poan
				faith = faith:faith_lalit
				save_scope_as = trespasser_leader
			}
		}
		else = {	 # Fallback
			create_character = {
				dynasty = none
				location = root.location
				age = { young_age middle_age }
				gender_female_chance = 50
				culture = culture:corsair
				faith = faith:faith_corsair
				save_scope_as = trespasser_leader
			}
		}
	}
	option = { # Ask them to turn back
		name = elven_racial.1413.a
		skill = diplomacy 
		root = {
			duel = {
				skill = diplomacy 
				value = 12
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = elven_racial.1413.a.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							title = elven_racial.1413.success.toast.t
							type = event_toast_effect_good
							add_prestige = minor_prestige_gain
							add_diplomacy_lifestyle_xp = minor_lifestyle_xp
							add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = elven_racial.1413.a.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							type = event_toast_effect_bad
							title = elven_racial.1413.failure.toast.t							
							add_prestige = minor_prestige_loss	
							add_stress = 50
						}
					}
					# if = {
						# limit = { has_government = landless_adventurer_government }
						# add_character_flag = laamp_patrol_failed
					# }							
				}
			}
		}
	}

    option = { # Expel them 
        name = elven_racial.1413.b
		skill = martial
		add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
		scope:trespasser_leader.location.culture = {
			change_cultural_acceptance = {
				target = root.culture
				value = -25
				desc = cultural_acceptance_loss_event
			}
		}
    }
	
	option = { # Trade with them 
		name = elven_racial.1413.c 
		add_gold = medium_gold_value
		if = { 
			limit = { has_government = landless_adventurer_government }
			domicile ?= { change_provisions = { value = 500 } }
		}
	}
	
	option = { # Allow them to settle 
		name = elven_racial.1413.d
		trigger = { 
			has_government = elven_government 
			scope:border_patrol_province = { has_holding_type = wastelands_holding }
		}
		ai_colonisation_effect = { WASTELANDS = scope:border_patrol_province ROOT_SCOPE = scope:trespasser_leader }
		scope:trespasser_leader = {
			start_tributary = {
				contract_group = tributary_subjugated
				suzerain = root.top_liege
			}
		}
	}

	after = {
		trigger_event = {
			id = elven_racial.1499
		}
	}
}

elven_racial.1414 = { # Find mysterious tracks
    title = elven_racial.1414.t
	type = character_event
    desc = elven_racial.1414.desc
	content_source = realms_dlc
	theme = intrigue
	override_background = {
		reference = wilderness_activity
	}
	left_portrait = {
		character = root
		animation = pondering
		camera = camera_event_right
	}
	
	option = { # Let's investigate... 
		name = elven_racial.1414.a
		custom_tooltip = elven_racial.1414.a.tt 
		hidden_effect = {
			random_list = {
				15 = { # Find a low tier bow artifact
					create_artifact_weapon_effect = {
						OWNER = root
						CREATOR = root
						SET_WEAPON_TYPE = flag:artifact_weapon_type_bow
					}
					add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
				}
				20 = { # You get lost 
					root = {
						send_interface_toast = {
							type = event_toast_effect_bad
							left_icon = root
							title = elven_racial.1414.lost.toast.t							
							add_prestige = minor_prestige_loss	
							add_stress = 40
							add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_border_patrol_failed }
						}
					}
					if = {
						limit = { has_government = landless_adventurer_government }
						add_character_flag = laamp_patrol_failed
					}
				}
				25 = { # Nothing happens 
					root = {
						send_interface_toast = {
							type = event_toast_effect_neutral
							left_icon = root
							title = elven_racial.1414.neutral.toast.t	
							add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
						}
					}
				}
				20 = { # You find and slay orcs 
					root = {
						send_interface_toast = {
							type = event_toast_effect_good
							left_icon = root
							title = elven_racial.1414.orcs.toast.t							
							add_prestige = minor_prestige_gain	
							add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
						}
					}
				}
				15 = { # Find some loot 
					root = {
						send_interface_toast = {
							type = event_toast_effect_good
							left_icon = root
							title = elven_racial.1414.loot.toast.t							
							add_gold = minor_gold_value
							add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
							if = { 
								limit = { has_government = landless_adventurer_government }
								domicile ?= { change_provisions = { value = 600 } }
							}	
						}
					}
				}
				5 = { # Find an exquisite artifact 
					create_artifact_armor_effect = {
						OWNER = root
						CREATOR = root
						SET_ARMOR_TYPE = flag:no
					}
					scope:newly_created_artifact ?= {
						set_artifact_description = elven_racial.1414.artifact_desc
						set_artifact_rarity = famed
					}
				}
			}
		}		
	}

    option = { # Let's just be off
        name = elven_racial.1414.b
		add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
    }

	after = {
		trigger_event = {
			id = elven_racial.1499
		}
	}
}

elven_racial.1415 = { # Dwarven Caravan
	type = character_event
	content_source = realms_dlc
	title = elven_racial.1415.t
	desc = elven_racial.1415.desc
	theme = dwarven
	override_background = {
		reference = wilderness_activity
	}	
	left_portrait = {
		character = root 
		animation = thinking 
	}

	right_portrait = {
		character = scope:dwarven_merchant
		animation = personality_callous
	}
	immediate = {
		create_character = {
			template = random_dwarf_template
			location = root.location
			save_scope_as = dwarven_merchant
		}
	}
	option = { # Exchange news and greetings
		name = elven_racial.1415.a
		skill = diplomacy
		add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
	}

	option = { # Buy Iron or Gemstones
		name = elven_racial.1415.b
		remove_short_term_gold = 85
		random_list = {
			25 = {
				create_metal_gem_artifact = {
					METAL = copper
					MODIFIER = artifact_monthly_minor_prestige_1_modifier
				}
				set_metal_gem_variable = { METAL = copper }
				send_interface_toast = {
					left_icon = ROOT
					title = elven_racial.1415.b.copper
				}
			}
			25 = {
				create_metal_gem_artifact = {
					METAL = iron
					MODIFIER = artifact_monthly_minor_prestige_1_modifier
				}
				set_metal_gem_variable = { METAL = iron }
				send_interface_toast = {
					left_icon = ROOT
					title = elven_racial.1415.b.iron
				}
			}
			25 = {
				create_metal_gem_artifact = {
					METAL = ruby
					MODIFIER = artifact_monthly_minor_prestige_2_modifier
				}
				set_metal_gem_variable = { METAL = ruby }
				send_interface_toast = {
					left_icon = ROOT
					title = elven_racial.1415.b.ruby
				}
			}
			25 = {
				create_metal_gem_artifact = {
					METAL = diamond
					MODIFIER = artifact_monthly_minor_prestige_3_modifier
				}
				set_metal_gem_variable = { METAL = diamond }
				send_interface_toast = {
					left_icon = ROOT
					title = elven_racial.1415.b.diamond
				}
			}
		}
	}
	
	option = { # Laamp: Buy provisions for a bargain
		name = elven_racial.1415.c 
		trigger = { has_government = landless_adventurer_government }
		remove_short_term_gold = minor_gold_value
		domicile ?= { change_provisions = { value = 1000 } }
	}
	
	after = {
		trigger_event = {
			id = elven_racial.1499
		}
		scope:dwarven_merchant = { silent_disappearance_effect = yes }
	}
}

elven_racial.1416 = { # Gondorian Adventurers
	type = character_event
	content_source = realms_dlc
	title = elven_racial.1416.t
	desc = elven_racial.1416.desc
	theme = gondor
	override_background = {
		reference = wilderness_activity
	}	
	left_portrait = {
		character = root 
		animation = marshal_shield 
	}

	right_portrait = {
		character = scope:gondorian_adventurer
		animation = throne_room_one_handed_passive_1
	}
	immediate = {
		create_character = {
			gender_female_chance = 25
			location = root.location
			template = new_warrior_character
			age = { 22 30 }
			faith = faith:faith_edain
			culture = culture:gondorian
			save_scope_as = gondorian_adventurer
			trait = blood_of_numenor_1
		}
	}
	option = { # Exchange news and greetings
		name = elven_racial.1416.a
		add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
		add_prestige = minor_prestige_gain
		add_legitimacy = minor_legitimacy_gain
		scope:gondorian_adventurer = { silent_disappearance_effect = yes }
	}

	option = { # Recruit them
		name = elven_racial.1416.b
		add_courtier = scope:gondorian_adventurer
	}
	
	option = { # It's good to know other people keep watch over these lands
		name = elven_racial.1416.b 
		add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_patrolled_the_border }
		ai_chance = { base = 0 }
		scope:gondorian_adventurer = { 
			create_landless_adventurer_title_effect = {
				REASON = flag:voluntary
				FLAVOR_CHAR = root
			}
			hidden_effect = { add_short_term_gold = 400 }
		}
        create_alliance = {
            target = scope:gondorian_adventurer
            allied_through_owner = root
            allied_through_target = scope:gondorian_adventurer
        }
        scope:gondorian_adventurer = {
            add_opinion = {
                modifier = event_negotiated_alliance_opinion
                target = root
            }
        }
		custom_tooltip = elven_racial.1416.alliance
	}
	
	after = {
		trigger_event = {
			id = elven_racial.1499
		}
	}
}

elven_racial.1499 = { # Returning home
	title = elven_racial.1499.t
	type = character_event
	desc = elven_racial.1499.desc
	content_source = realms_dlc
	theme = elven
	left_portrait = {
		character = root
		animation = throne_room_one_handed_passive_1
	}
	option = { # I'm going home
		name = elven_racial.1499.a
		remove_character_flag = wear_armor
		if = {
			limit = { 
				any_character_active_contract = {
					has_task_contract_type = lotr_laamp_6001
				}
			}
			custom_tooltip = elven_racial.1499.a.tt.laamp
			random_character_active_contract = {
				limit = { has_task_contract_type = lotr_laamp_6001 }
				this.task_contract_location = { save_scope_as = patrol_return_point }
			}
		}
		else = {
			custom_tooltip = elven_racial.1499.a.tt
		}
	}
	after = {
		hidden_effect = {
			if = {
				limit = { has_government = landless_adventurer_government }
				current_travel_plan ?= { abort_travel_plan = yes }
				start_travel_plan = { #Travel to the contract giver's capital
					destination = scope:patrol_return_point
					players_use_planner = no
					on_arrival_event = lotr_laamp_contract_schemes.6003
					#return_trip = no # One way
				}
			}
		}
	}
}


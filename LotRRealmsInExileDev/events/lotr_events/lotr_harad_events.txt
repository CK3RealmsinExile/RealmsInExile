namespace = harad

### Harad Events ###

# 		harad.0014-0025 #Flavor Events

#		harad.1000 #Unify Harad

harad.0101 = { # The War in Pezarsan
	content_source = realms_dlc
	type = character_event
	title = harad.0101.t
	desc = harad.0101.desc
	theme = war
	override_background = {
		reference = harad_drylands
	}
	left_portrait = {
		character = root
		animation = personality_zealous
	}
	right_portrait = {
		character = character:lineofarzagarnom7
		animation = anger
	}
	
	option = { # The encircling serpent shall have its neck cut off
		name = harad.0101.a
	}
}

harad.0202 = { #Victory in Pezarsan
	content_source = realms_dlc
	type = character_event
	title = harad.0202.t
	desc = harad.0202.desc
	theme = war
	left_portrait = {
		character = root
		animation = schadenfreude
	}
	right_portrait = {
		character = title:k_haruzan.holder
		animation = personality_bold
	}
	
	option = { # Of course I will keep my promise good cousin!
		name = harad.0202.a
		create_title_and_vassal_change = {
			type = created
			save_scope_as = change
			add_claim_on_loss = no
		}
		title:k_pezarsan = {
			change_title_holder = {
				holder = title:k_haruzan.holder
				change = scope:change
			}
		}
		title:d_haruzan = {
			change_title_holder = {
				holder = title:k_haruzan.holder
				change = scope:change
			}
		}
		title:c_argon = {
			change_title_holder = {
				holder = title:k_haruzan.holder
				change = scope:change
			}
		}
		title:c_nithagasag = {
			change_title_holder = {
				holder = title:k_haruzan.holder
				change = scope:change
			}
		}
		resolve_title_and_vassal_change = scope:change
		create_title_and_vassal_change = {
			type = swear_fealty
			save_scope_as = title_change
			add_claim_on_loss = no
		}
		change_liege = {
			liege = title:k_haruzan.holder
			change = scope:title_change
		}
		resolve_title_and_vassal_change = scope:title_change
		add_prestige = 200
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 80
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
		title:k_haruzan.holder = { # Notify King of Haruzan (Suladan)
			trigger_event = {
				id = harad.0204
				days = 10
			}
		}
	}

	option = { # On second thoughts...
		name = harad.0202.b
		title:k_haruzan.holder = {
			add_pressed_claim = title:k_pezarsan
			set_relation_rival = root
		}
		add_prestige = -300
		add_piety_level = -1
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 0
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 20
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
		root = {
			save_scope_as = perfidious_cousin
		}
		title:k_haruzan.holder = { # Notify King of Haruzan (Suladan)
			trigger_event = {
				id = harad.0205
				months = 3
			}
		}
	}
}

harad.0203 = { #Defeat in Pezarsan
	content_source = realms_dlc
	type = character_event
	title = harad.0203.t
	desc = harad.0203.desc
	theme = war
	left_portrait = {
		character = root
		animation = shame
	}
	right_portrait = {
		character = title:k_haruzan.holder
		animation = anger
	}
	
	option = { # Even in defeat, a debt must be repaid
		name = harad.0203.a
		create_title_and_vassal_change = {
			type = swear_fealty
			save_scope_as = title_change
			add_claim_on_loss = no
		}
		change_liege = {
			liege = title:k_haruzan.holder
			change = scope:title_change
		}
		resolve_title_and_vassal_change = scope:title_change
		if = {
			limit = {
				has_trait = ambitious
			}		
			remove_trait = ambitious
			add_trait_force_tooltip = content
		}			
	}
}

harad.0204 = {# Pezarsan secured - West or East?
	content_source = realms_dlc
	type = character_event
	title = harad.0204.t
	desc = harad.0204.desc
	theme = war
	left_portrait = {
		character = root
		animation = personality_bold
	}
	
	option = { # We must punish Chelkar! Unlocks decision to send ultimatum to Chelkar demanding submission
		name = harad.0204.a
		custom_tooltip = harad.0204.a.tt
		add_to_global_variable_list = {
			name = haruzan_expansion_routes
			target = flag:haruzan_eastern_expansion
		}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 30
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 40
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 33
			}
		}
	}
	option = { # Secure the West! Unlocks decisions to try to vassalize the Umbarean lords (prioritized by AI on account of the 'Race for Mirlond' effect)
		name = harad.0204.b
		custom_tooltip = harad.0204.b.tt
		add_to_global_variable_list = {
			name = haruzan_expansion_routes
			target = flag:haruzan_westward_expansion
		}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 50
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 33
			}
		}
	}
	option = { # Don't expand
		name = harad.0204.c
		custom_tooltip = harad.0204.c.tt # Will LOCK the decision/event expansion routes for Haruzan!
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 0
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 10
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 33
			}
		}
	}
}

harad.0205 = {# Perfidious Cousin!
	content_source = realms_dlc
	type = character_event
	title = harad.0205.t
	desc = harad.0205.desc
	theme = war
	left_portrait = {
		character = root
		animation = anger
	}
	right_portrait = {
		character = scope:perfidious_cousin
		animation = schadenfreude
	}
	
	option = { # You will pay dearly for this!
		name = harad.0205.a
		title:k_haruzan.holder = {
			trigger_event = { # Check on if Pezarsan has been conquered by Haruzan
				id = harad.0217
				years = 1
			}
		}
	}
}

harad.0206 = { # Haruzan demands submission of Chelkar!
	content_source = realms_dlc
	type = character_event
	title = harad.0206.t
	desc = harad.0206.desc
	theme = war
	left_portrait = {
		character = title:k_haruzan.holder
		animation = anger
	}
	right_portrait = {
		character = root
		animation = disapproval
	}
	
	option = { # I will never submit!
		name = harad.0206.a
		custom_tooltip = harad.0206.a.tt # This might very well lead to an invasion!
		title:k_haruzan.holder = {
			trigger_event = harad.0207
		}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 80
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 60
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 33
			}
		}
	}
	option = { # Send him a counter-offer...
		name = harad.0206.b
		custom_tooltip = harad.0206.b.tt # Offer to bend the knee in exchange for religious protection and exemption from fighting in wars
		title:k_haruzan.holder = {
			trigger_event = harad.0208
		}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 20
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 30
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 33
			}
		}
	}
	option = { # We have no choice
		name = harad.0206.c
		create_title_and_vassal_change = {
			type = created
			save_scope_as = change
			add_claim_on_loss = no
		}
		title:k_chelkar = {
				change_title_holder = {
					holder = title:k_haruzan.holder
					change = scope:change
				}
			}
		title:d_huk_saromis.holder = {
			change_liege = {
				liege = title:k_haruzan.holder
				change = scope:change 
			}
		}
		resolve_title_and_vassal_change = scope:change

		title:k_haruzan.holder = {
			trigger_event = harad.0210
		}
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 0
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 20
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 33
			}
		}
	}
}

harad.0207 = { # Chelkar refuses our demands!
	content_source = realms_dlc
	type = character_event
	title = harad.0207.t
	desc = harad.0207.desc
	theme = war
	left_portrait = {
		character = root 
		animation = anger
	}
	right_portrait = {
		character = title:k_chelkar.holder
		animation = dismissal
	}
	
	option = { # So you have chosen... death
		name = harad.0207.a
		start_war = { # Invade Chelkar!
			casus_belli = invasion_war 
			target = title:k_chelkar.holder 
			target_title = title:k_chelkar
		}
		root = {
			trigger_event = {
			id = harad.0211 # War status check
			months = 1
			}
		}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 90
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	option = { # He called our bluff
		name = harad.0207.b
		add_prestige = -500 # A humiliating defeat
		add_prestige_level = -1
		title:k_chelkar.holder = {
			trigger_event = harad.0209 # Haruzan backs down!
		}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 10
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 30
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
}

harad.0208 = { # Chelkar gives a counter-offer
	content_source = realms_dlc
	type = character_event
	title = harad.0208.t
	desc = harad.0208.desc
	theme = war
	left_portrait = {
		character = root 
		animation = cynical
	}
	right_portrait = {
		character = title:k_chelkar.holder
		animation = dismissal
	}
	
	option = { # This is an insult!
		name = harad.0208.a
		start_war = { # Invade Chelkar!
			casus_belli = invasion_war 
			target = title:k_chelkar.holder 
			target_title = title:k_chelkar
		}
		root = {
			trigger_event = {
			id = harad.0211 # War status check
			months = 1
			}
		}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 60
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	option = { # Perhaps I can agree to this
		name = harad.0208.b
		create_title_and_vassal_change = {
            type = created
            save_scope_as = change
            add_claim_on_loss = no
        }
        if = { # On the very slim chance Haruzan has gained an imperial title, vassalize wholesale
            limit = { 
                highest_held_title_tier = tier_empire
            }
            title:k_chelkar.holder = {
                change_liege = {
                    liege = root
                    change = scope:change 
                }
            }
            
            resolve_title_and_vassal_change = scope:change
            
            title:k_chelkar.holder = {
                vassal_contract_set_obligation_level = {
                    type = title_revocation_rights
                    level = 1
                }
                vassal_contract_set_obligation_level = {
                    type = religious_rights 
                    level = 1
                }
            #	vassal_contract_set_obligation_level = {
            #		type = special_contract_scutage 
            #		level = 1
            #	}
				vassal_contract_set_obligation_level = {
                    type = special_contract 
                    level = 1
                }
            }
        }
        else = { # Otherwise, transfer vassals and vassalize
            title:k_chelkar = {
                change_title_holder_include_vassals = {
                    holder = root
                    change = scope:change
                }
            }
            title:d_huk_saromis.holder = {
                change_liege = {
                    liege = root
                    change = scope:change 
                }
            }
            
            resolve_title_and_vassal_change = scope:change
            
            title:d_huk_saromis.holder = {
                vassal_contract_set_obligation_level = {
                    type = title_revocation_rights
                    level = 1
                }
                vassal_contract_set_obligation_level = {
                    type = religious_rights 
                    level = 1
                }
            #	vassal_contract_set_obligation_level = {
            #		type = special_contract_scutage 
            #		level = 1
            #	}
				vassal_contract_set_obligation_level = {
                    type = special_contract 
                    level = 1
                }
            }
			title:d_azran.holder = {
                vassal_contract_set_obligation_level = {
                    type = title_revocation_rights
                    level = 1
                }
                vassal_contract_set_obligation_level = {
                    type = religious_rights 
                    level = 1
                }
            #	vassal_contract_set_obligation_level = {
            #		type = special_contract_scutage 
            #		level = 1
            #	}
				vassal_contract_set_obligation_level = {
                    type = special_contract 
                    level = 1
                }
            }
			title:d_kajbah.holder = {
                vassal_contract_set_obligation_level = {
                    type = title_revocation_rights
                    level = 1
                }
                vassal_contract_set_obligation_level = {
                    type = religious_rights 
                    level = 1
                }
            #	vassal_contract_set_obligation_level = {
            #		type = special_contract_scutage 
            #		level = 1
            #	}
				vassal_contract_set_obligation_level = {
                    type = special_contract 
                    level = 1
                }
            }
        }
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 30
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 40
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
}

harad.0209 = { # Haruzan backs down!
	content_source = realms_dlc
	type = character_event
	title = harad.0209.t
	desc = harad.0209.desc
	theme = war
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = title:k_haruzan.holder 
		animation = grief
	}
	
	option = { # Run back to Amrun!
		name = harad.0209.a
		add_prestige = 500 # A great victory
		add_prestige_level = 1
	}
}

harad.0210 = { # Chelkar accepts submission!
	content_source = realms_dlc
	type = character_event
	title = harad.0210.t
	desc = harad.0210.desc
	theme = war
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = title:k_chelkar.holder 
		animation = shame
	}
	
	option = { # Our Hegemony Grows!
		name = harad.0210.a
		add_prestige = 500 # A great victory
		add_prestige_level = 1
	}
}

harad.0211 = { # Status of the War check
	hidden = yes
	theme = war
	left_portrait = {
		character = root
		animation = bold
	}
	
	option = { #War is Ongoing
        trigger = {
            title:k_haruzan.holder = {
                any_character_war = {
                    using_cb = invasion_war
                    primary_defender = title:k_chelkar.holder
                    primary_attacker = title:k_haruzan.holder
                }
            }
        }
        trigger_event = {
            id = harad.0211
            months = 1
        }
    }
    
    option = { #War is Done
        trigger = {
            title:k_haruzan.holder = {
                NOT = {
                    any_character_war = {
                        using_cb = invasion_war
                        primary_defender = title:k_chelkar.holder
                        primary_attacker = title:k_haruzan.holder
                    }
                }
            }
        }
        trigger_event = {
            id = harad.0212
        }
    }
}

harad.0212 = { # Fate of the Invasion of Chelkar
	hidden = yes
	theme = war
	left_portrait = {
		character = root
		animation = personality_bold
	}
	
	option = {
		if = {
			limit = {
				title:k_chelkar.holder = { # If the capital duchy has fallen, we can assume the war was won
					NOT = {
						completely_controls = title:d_huk_saromis
					}
				}
			}
			trigger_event = harad.0213 # Chelkar Crushed
		}
		else_if = {
			limit = {
				title:k_chelkar.holder = { # If the capital duchy hasn't fallen, we can assume the war was lost
					completely_controls = title:d_huk_saromis
				}
			}
			trigger_event = harad.0214 # Chelkar Endures
		}
	}
}

harad.0213 = { # Chelkar is beaten by Haruzan
	content_source = realms_dlc
	type = character_event
	title = harad.0213.t
	desc = harad.0213.desc
	theme = war
	left_portrait = {
		character = root
		animation = personality_bold
	}
	
	option = { # Our Hegemony Grows!
		name = harad.0210.a
		add_prestige = 500 # A great victory
		add_prestige_level = 1
		destroy_title = title:k_chelkar
	}
}

harad.0214 = { # Haruzan is defeated by Chelkar
	content_source = realms_dlc
	type = character_event
	title = harad.0214.t
	desc = harad.0214.desc
	theme = war
	left_portrait = {
		character = title:k_chelkar.holder
		animation = bold
	}
	right_portrait = {
		character = root
		animation = grief
	}
	
	option = { # A humiliating defeat
		name = harad.0214.a
		add_prestige = -500 # A humiliating defeat
		add_prestige_level = -1
		title:k_chelkar.holder = { # Celebrations in Chelkar
			trigger_event = {
				id = harad.0215
				months = 1
			}
		}
	}
}

harad.0215 = { # Victorious Chelkar
	content_source = realms_dlc
	type = character_event
	title = harad.0215.t
	desc = harad.0215.desc
	theme = war
	left_portrait = {
		character = title:k_chelkar.holder
		animation = bold
	}
	right_portrait = {
		character = root
		animation = grief
	}
	
	option = { # Run back to Amrun!
		name = harad.0215.a
		add_prestige = 500 # A great victory
		add_prestige_level = 1
	}
}

harad.0216 = { # Control over Chelkar accomplished?
	hidden = yes
	theme = diplomacy_majesty_focus
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	
	option = {
		if = { # If successful
			limit = {
				title:k_haruzan.holder = {
					completely_controls = title:d_huk_saromis
					completely_controls = title:d_azran 
				}
			}
			title:k_haruzan.holder = {
				trigger_event = {
					id = harad.0217
				}
			}
		}
		else_if = {
			limit = {
				NOT = {
					title:k_haruzan.holder = {
						completely_controls = title:d_huk_saromis 
						completely_controls = title:d_azran 
					}
				}
			}
			title:k_haruzan.holder = {
				trigger_event = {
					id = harad.216
					years = 1
				}
			}
		}
	}
}

harad.0217 = { # Chelkar Reclaimed
	content_source = realms_dlc
	type = character_event
	title = harad.0217.t
	desc = harad.0217.desc
	theme = diplomacy_majesty_focus
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	
	option = {
		name = harad.0217.a
		add_prestige = 500
		if = { # If not already taken, unlock the route to take the Western Coast 
			limit = {
				NOT = {
					is_target_in_global_variable_list = { 
						name = haruzan_expansion_routes
						target = flag:harnen_submission_demanded
					}	
				}
			}
			add_to_global_variable_list = {
				name = haruzan_expansion_routes
				target = flag:haruzan_westward_expansion
			}
			custom_tooltip = harad.0204.b.tt # Westward expansion unlocked
			if = {
				limit = { # If not taken through the decision, add to the list (bypass decision)
					NOT = {
						is_target_in_global_variable_list = { 
							name = haruzan_expansion_routes
							target = flag:chelkar_submission_demanded
						}	
					}
				}
				add_to_global_variable_list = {
					name = haruzan_expansion_routes
					target = flag:haruzan_eastern_expansion
				}
				add_to_global_variable_list = {
					name = haruzan_expansion_routes
					target = flag:chelkar_submission_demanded
				}
			}
		}
		else_if = { # If expansion east and west have been accomplished...
			limit = {
				AND = {
					is_target_in_global_variable_list = { # East
						name = haruzan_expansion_routes
						target = flag:chelkar_submission_demanded
					}
					is_target_in_global_variable_list = { # West
						name = haruzan_expansion_routes
						target = flag:harnen_submission_demanded
					}
				}
			}
			title:k_haruzan.holder = {
				trigger_event = {
					id = harad.0226 # Haradwaith Rises Anew
					years = 1
				}
			}
		}
	}
}

harad.0218 = { # Betrayed - control over Pezarsan established?
	hidden = yes
	theme = diplomacy_majesty_focus
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	
	option = {
		if = { # If successful
			limit = {
				OR = { # If the King of Haruzan is the King of Pezarsan as well
					title:k_haruzan.holder = {
						has_title = title:k_pezarsan 
					}
					AND = { # If Perzarsan is held by nobody and the requisite land is controlled by the King of Haruzan
						title:k_pezarsan.holder = { exists = no }
						title:k_haruzan.holder = { # Pezarsan starting area + Perfidious Cousin land!
							completely_controls = title:d_haruzan
							completely_controls = title:c_hannan 
							completely_controls = title:c_khumar 
							completely_controls = title:c_parzee 
							completely_controls = title:c_mahur 
							completely_controls = title:c_enmahadh
						}
					}
				}
			}
			title:k_haruzan.holder = {
				trigger_event = {
					id = harad.0219
				}
			}
		}
		else_if = {
			limit = {
				NOT = {
					title:k_haruzan.holder = {
						has_title = title:k_pezarsan 
					}
				}
			}
			title:k_haruzan.holder = {
				trigger_event = {
					id = harad.218
					years = 1
				}
			}
		}
	}
}

harad.0219 = { # Perfidious Cousin punished! Which way to expand now?
	content_source = realms_dlc
	type = character_event
	title = harad.0219.t
	desc = harad.0219.desc
	theme = war
	left_portrait = {
		character = root
		animation = rage
	}
	right_portrait = {
		character = scope:perfidious_cousin
		animation = shock
	}
	
	option = { # We must punish Chelkar! Unlocks decision to send ultimatum to Chelkar demanding submission
		name = harad.0204.a
		custom_tooltip = harad.0204.a.tt
		add_to_global_variable_list = {
			name = haruzan_expansion_routes
			target = flag:haruzan_eastern_expansion
		}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 30
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 40
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 33
			}
		}
	}
	option = { # Secure the West! Unlocks decisions to try to vassalize the Umbarean lords (prioritized by AI on account of the 'Race for Mirlond' effect)
		name = harad.0204.b
		custom_tooltip = harad.0204.b.tt
		add_to_global_variable_list = {
			name = haruzan_expansion_routes
			target = flag:haruzan_westward_expansion
		}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 50
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 33
			}
		}
	}
	option = { # Don't expand
		name = harad.0204.c
		custom_tooltip = harad.0204.c.tt # Will LOCK the decision/event expansion routes for Haruzan!
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 0
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 10
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 33
			}
		}
	}
}


### Westward Haruzan Expansion - submission of the Umbarean lords ###

harad.0220 = { # Haruzan demands submission of the Harnen
	content_source = realms_dlc
	type = character_event
	immediate = { # For localization to work
        title:k_haruzan.holder = { save_scope_as = haruzan_king }
    }
	title = harad.0220.t
	desc = harad.0220.desc
	theme = war
	left_portrait = {
		character = root
		animation = stress
	}
	right_portrait = {
		character = title:k_haruzan.holder
		animation = personality_callous
	}

	option = { # Scions of Numenor, bow to savages? Never!
		name = harad.0220.a
		root = {
			save_scope_as = defiant_umbarean
		}
		scope:haruzan_king = {
			trigger_event = {
				id = harad.0221
				days = { 30 90 }
			}
		}
		add_character_flag = harnen_subjugation_defied
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 90
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
			modifier = { # Haruze Culture
				has_culture = culture:haruze
				add = -70
			}
		}
	}
	
	option = { # We have no choice
		name = harad.0220.b
		create_title_and_vassal_change = {
			type = swear_fealty
			save_scope_as = title_change
			add_claim_on_loss = no
		}
		change_liege = {
			liege = title:k_haruzan.holder
			change = scope:title_change
		}
		resolve_title_and_vassal_change = scope:title_change
		root = {
			save_scope_as = submissive_umbarean
		}
		scope:haruzan_king = {
			trigger_event = {
				id = harad.0222
				days = { 30 90 }
			}
		}
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 10
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 30
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
			modifier = { # Haruze Culture
				has_culture = culture:haruze
				add = 70
			}
		}
	}
}

harad.0221 = { # The Umbarean Lord refuses!"
	content_source = realms_dlc
	type = character_event
	title = harad.0221.t
	desc = harad.0221.desc
	theme = war
	left_portrait = {
		character = title:k_haruzan.holder
		animation = anger
	}
	right_portrait = {
		character = scope:defiant_umbarean
		animation = personality_callous
	}
	
	option = { # Then you shall be pushed back into the sea!
		name = harad.0221.a
		scope:defiant_umbarean = {
			every_held_title = {
				limit = {
					OR = {
						this = title:d_forethir 
						this = title:c_mirlond 
						this = title:c_harthalond 
						this = title:c_korb_ugarta 
						this = title:c_menost 
						this = title:d_ramlond 
						this = title:c_ramlond 
						this = title:c_kiba 
						this = title:c_celebiant
					}
				}
				root = {
					add_pressed_claim = prev
				}
			}
		}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 90
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	option = { # We cannot hope to defeat them by strength of arms
		name = harad.0221.b
		add_prestige = -500 # A humiliating defeat
		#scope:defiant_umbarean = {
		#	trigger_event = {
		#		id = harad.0223 # Haruzan backs down!
		#		days = 30
		#	}
		#}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 10
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 30
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
}
	
harad.0222 = { # The Umbarean Lord Accepts Submission
	content_source = realms_dlc
	type = character_event
	title = harad.0222.t
	desc = harad.0222.desc
	theme = diplomacy_majesty_focus
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	right_portrait = {
		character = scope:submissive_umbarean
		animation = personality_content
	}
	
	option = { # A King honors his word
		name = harad.0222.a
		scope:submissive_umbarean = {
            vassal_contract_set_obligation_level = {
                type = title_revocation_rights
                level = 1
            }
		}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 90
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
}
	
harad.0224 = { # Control over the Harnen established?
	hidden = yes
	theme = diplomacy_majesty_focus
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	
	option = {
		if = { # If successful
			limit = {
				title:k_haruzan.holder = {
					completely_controls = title:c_mirlond 
					completely_controls = title:c_harthalond 
					completely_controls = title:c_korb_ugarta
					completely_controls = title:d_ramlond 
					completely_controls = title:c_ramlond 
					completely_controls = title:c_kiba 
					completely_controls = title:c_celebiant 
				}
			}
			trigger_event = harad.0225
		}
		else_if = {
			limit = {
				NOT = {
					title:k_haruzan.holder = {
						completely_controls = title:c_mirlond 
						completely_controls = title:c_harthalond 
						completely_controls = title:c_korb_ugarta
						completely_controls = title:d_ramlond 
						completely_controls = title:c_ramlond 
						completely_controls = title:c_kiba 
						completely_controls = title:c_celebiant
					}
				}
			}
			title:k_haruzan.holder = {
				trigger_event = {
					id = harad.0224
					years = 1
				}
			}
		}
	}
}

harad.0225 = { # The Harnen is secured!
	content_source = realms_dlc
	type = character_event
	title = harad.0225.t
	desc = harad.0225.desc
	theme = diplomacy_majesty_focus
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	
	option = {
		name = harad.0225.a
		add_prestige = 500
		if = { # If not already taken, unlock the route to take Chelkar 
			limit = {
				NOT = {
					is_target_in_global_variable_list = { 
						name = haruzan_expansion_routes
						target = flag:chelkar_submission_demanded
					}
				}
			}
			add_to_global_variable_list = {
					name = haruzan_expansion_routes
					target = flag:haruzan_eastern_expansion
			}
			custom_tooltip = harad.0204.a.tt
			if = {
				limit = { # If not taken through the decision, add to the list (bypass decision)
					NOT = {
						is_target_in_global_variable_list = { 
							name = haruzan_expansion_routes
							target = flag:harnen_submission_demanded
						}	
					}
				}
				add_to_global_variable_list = {
					name = haruzan_expansion_routes
					target = flag:haruzan_westward_expansion
				}
				add_to_global_variable_list = {
					name = haruzan_expansion_routes
					target = flag:harnen_submission_demanded
				}
			}
		}
		else_if = { # If expansion east and west have been accomplished...
			limit = {
				AND = {
					is_target_in_global_variable_list = { # East
						name = haruzan_expansion_routes
						target = flag:haruzan_eastern_expansion
					}
					is_target_in_global_variable_list = { # West
						name = haruzan_expansion_routes
						target = flag:haruzan_westward_expansion
					}
				}
			}
			title:k_haruzan.holder = {
				trigger_event = {
					id = harad.0226 # Haradwaith Rises Anew
					years = 1
				}
			}
		}
	}
}

harad.0226 = { # Haradwaith Rises Anew
	content_source = realms_dlc
	type = character_event
	title = harad.0226.t
	desc = harad.0226.desc
	theme = diplomacy_majesty_focus
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	
	option = {
		name = harad.0226.a
		if = {
			limit = {
				title:k_haruzan.holder = {
					realm_size > 35
				}
				NOT = { exists = title:e_haradwaith.holder }
			}
			#Create the title and make it primary
			create_title_and_vassal_change = {
				type = created
				save_scope_as = title_change
				add_claim_on_loss = yes
			}
			title:e_haradwaith = {
				change_title_holder = {
					holder = root
					change = scope:title_change
				}
			}
			resolve_title_and_vassal_change = scope:title_change
			set_primary_title_to = title:e_haradwaith
		}
		root.dynasty = {
			add_dynasty_prestige_level = 1
		}
		hidden_effect = { #Juke note: a little goodie to buff AI haruzan
			title:k_haruzan.holder = {
				if = {
					limit = {
						is_ai = yes
					}
					spawn_army = {	 
						uses_supply = yes
						inheritable = yes
						name = imported_mumakil
						men_at_arms = {
							type = war_mumak
							stacks = 1
						}
						location = capital_province
					}
				}
			}
		}
	}
}


### Purchase Mumakil Decision - Meet with Trader ###

harad.0500 = { # Meeting with the Mumakil Traders
	content_source = realms_dlc
	type = character_event
	immediate = {
		create_character = {
			template = pool_repopulate_stewardship #merchant_template
			location = scope:capital_barony
			save_scope_as = mumakil_merchant
		}
		#hidden_effect = {
		#	scope:mumakil_merchant = {
		#		IF = {
		#			limit = {
		#				NOR = { culture = { has_cultural_pillar = heritage_mumakan } } # The greatest traders are from distant Mumakan
		#			}
		#			random_list = {
		#				50 = { add_trait = lifestyle_gardener }
		#				50 = { add_trait = lifestyle_herbalist }
		#			}
		#		}
		#	}
		#}
	}
	title = harad.0500.t
	desc = harad.0500.desc
	theme = war
	override_background = { reference = harad_1 }
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	right_portrait = { # Spawned Mumakil trader
		character = scope:mumakil_merchant
		animation = personality_greedy
	}
	
	option = { # I will pay the upfront cost
		name = {
			text = {
				first_valid = {
					triggered_desc = {
						trigger = {
							palace_of_haruzan_cheaper_purchase_mumakil_trigger = yes
						}
						desc = harad.0500.a.amrun
					}
					desc = harad.0500.a
				}
			}
		}
		if = {
			limit = {
				palace_of_haruzan_cheaper_purchase_mumakil_trigger = yes
			}
			custom_tooltip = harad.0500.discount.tt
		}
		remove_short_term_gold = mumakil_purchase_cost
		spawn_army = {		 
			uses_supply = yes
			inheritable = yes
			name = imported_mumakil
			men_at_arms = {
				type = war_mumak
				stacks = 1
			}
			location = capital_province
		}
	}
	
	option = { # I will haggle with the merchant
		name = {
			text = {
				first_valid = {
					triggered_desc = {
						trigger = {
							palace_of_haruzan_cheaper_purchase_mumakil_trigger = yes
						}
						desc = harad.0500.b.amrun
					}
					desc = harad.0500.b
				}
			}
		}
		if = {
			limit = {
				palace_of_haruzan_cheaper_purchase_mumakil_trigger = yes
			}
			custom_tooltip = harad.0500.discount.tt
		}
		duel = {
			skill = stewardship
			target = scope:mumakil_merchant
			# You successfully barter down the price of the Mumakil
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				desc = harad.0500.b.tt_success
				send_interface_toast = {
					title = harad.0500.b.tt_success
					left_icon = root
					add_prestige = minor_prestige_gain
					stress_impact = {
						greedy = medium_stress_impact_loss
					}
				}
				remove_short_term_gold = decreased_mumakil_purchase_cost
				spawn_army = {		 
					uses_supply = yes
					inheritable = yes
					name = imported_mumakil
					men_at_arms = {
						type = war_mumak
						stacks = 1
					}
					location = capital_province
				}
			}
			# You completely fail to barter with the merchant and end up paying a much higher price
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				desc = harad.0500.b.tt_failure
				send_interface_toast = {	
					title = harad.0500.b.tt_failure
					left_icon = root
					add_prestige = minor_prestige_loss
					add_stress = minor_stress_impact_gain
					stress_impact = {
						greedy = medium_stress_impact_gain
					}
				}
				remove_short_term_gold = increased_mumakil_purchase_cost
				spawn_army = {		 
					uses_supply = yes
					inheritable = yes
					name = imported_mumakil
					men_at_arms = {
						type = war_mumak
						stacks = 1
					}
					location = capital_province
				}
			}
		}
	}
	
	option = { # I've changed my mind
		name = harad.0500.c
		remove_decision_cooldown = decision_purchase_mumakil
	}
}


##########################################
# Mumak at Large!
# by BaelishPasta
# 0014
##########################################

#Decide what to do with a rampaging Mumak
harad.0014 = {
	content_source = realms_dlc
	type = character_event
	content_source = realms_dlc
	type = character_event
	title = harad.0014.t
	desc = harad.0014.desc
	
	theme = realm
	left_portrait = {
		character = root
		animation = stress
	}

	trigger = {
		is_orc = no
		is_elf = no
		capital_county.title_province = {
			OR = {
				geographical_region = middleearth_haradwaith
				geographical_region = middleearth_uttersouth
			}
		}
		is_independent_ruler = yes
		NOT = { has_character_flag = had_event_harad_0014 }	
	}

	immediate = {
		add_character_flag = {
			flag = had_event_harad_0014
			years = 5
		}
	}


	#Option 1: Let the beast be.
	option = {
		name = harad.0014.a

		#No cost, county gets angry
		add_prestige = minor_prestige_loss
		capital_county = {
			add_county_modifier = {
				modifier = harad_0014_mumak_at_large_modifier
				days = 730
			}		
		}
		stress_impact = {
			compassionate = major_stress_impact_gain
			sadistic = medium_stress_impact_loss
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_rationality = 2
			}
		}
	}
	
	
	#Option 2: Have the beast put down.
	option = {
		name = harad.0014.b
		remove_short_term_gold = minor_gold_value_check
		duel = {
			skill = martial
			value = medium_skill_rating
			30 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
				}
				desc = harad.0014.b.message_1
				send_interface_toast = {
					type = event_toast_effect_good
					left_icon = scope:capital
					title = harad.0014.b.message_1
					add_prestige = minor_prestige_gain
					capital_county = {
						add_county_modifier = {
							modifier = harad_0014_mumak_dead_modifier
							days = 730
						}
					}
				}
				modifier = {
					culture = { has_innovation = innovation_mumakil_domestication }
					factor = 1.5
				}
			}
				
		
			10 = {
				desc = harad.0014.b.message_2
				send_interface_toast = {
					type = event_toast_effect_bad
					left_icon = scope:capital
					title = harad.0014.b.message_2
					add_prestige = miniscule_prestige_loss
					add_stress = minor_stress_gain
					capital_county = {
						add_county_modifier = {
							modifier = harad_0014_mumak_at_large_modifier
							days = 730
					
						}		
					}
				}
			}
		}
		
		stress_impact = {
			greedy = medium_stress_impact_gain
			}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_rationality = 2
				}
			}
		}

	#Option 3: Have the beast tamed.
	option = {
		name = harad.0014.c

		remove_short_term_gold = medium_gold_value_check
		duel = {
			skill = stewardship
			value = high_skill_rating
			20 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
				}
				desc = harad.0014.c.message_1
				send_interface_toast = {
					type = event_toast_effect_good
					left_icon = scope:capital
					title = harad.0014.c.message_1
					add_prestige = medium_prestige_gain
					capital_county = {
						add_county_modifier = {
							modifier = harad_0014_mumak_tamed_modifier
							days = 730
						}
					}
				}
				modifier = {
					culture = { has_innovation = innovation_mumakil_domestication }
					factor = 1.5
				}
			}
				
		
			30 = {
				desc = harad.0014.c.message_2
				send_interface_toast = {
					type = event_toast_effect_bad
					left_icon = scope:capital
					title = harad.0014.c.message_2
					add_prestige = miniscule_prestige_loss
					add_stress = minor_stress_gain
					capital_county = {
						add_county_modifier = {
							modifier = harad_0014_mumak_at_large_modifier
							days = 730
					
						}		
					}
				}
			}
		}		
		
		stress_impact = {
			greedy = major_stress_impact_gain
		}
		ai_chance = {
			base = 50
			ai_value_modifier = {
				ai_greed = -3
			}
		}			
	}
}

################################
# A Mighty Mumak
# by BaelishPasta
# Based on "A Mighty Elephant" by Emil Tisander
################################


harad.0015 = {
	content_source = realms_dlc
	type = character_event
	title = harad.0015.t
	desc = harad.0015.desc
	theme = martial
	override_background = {
		reference = throne_room
	}
	
	left_portrait = {
		character = root
	}
	right_portrait = scope:marshal #cp:councillor_marshal
	
	trigger = {
		NOT = { has_character_flag = had_event_harad_0015 }
		NOT = { has_character_modifier = harad_0015_personal_war_mumak_modifier }
		is_available_adult = yes
		is_at_war = no
		number_maa_regiments_of_type = {
			type = war_mumak
			value > 0
		}
		exists = cp:councillor_marshal
		is_independent_ruler = yes
		is_orc = no
		is_elf = no
		capital_county.title_province = {
			OR = {
				geographical_region = middleearth_haradwaith
				geographical_region = middleearth_uttersouth
			}
		}
	}
	
	immediate = {
		add_character_flag = {
			flag = had_event_harad_0015
			years = 25
		}
		
		cp:councillor_marshal = {
			save_scope_as = marshal
		}
		
	}
	
	option = { #Keep it yourself
		name = harad.0015.a
		
		add_character_modifier = {
			modifier = harad_0015_personal_war_mumak_modifier
			years = 40
		}
		add_prestige = minor_prestige_gain
		stress_impact = {
			generous = minor_stress_impact_gain
		}
		
		ai_chance = {
			base = 100
			modifier = {
				add = 50
				has_trait = greedy
			}
			modifier = {
				add = 50
				prowess = 10
			}
		}
	}
	option = { #Gift it to your Marshal
		name = harad.0015.b
		
		trigger = {
			exists = scope:marshal
			scope:marshal = {
				NOT = { has_character_modifier = harad_0015_personal_war_mumak_modifier }
			}
		}
		
		scope:marshal = {
			add_character_modifier = {
				modifier = harad_0015_personal_war_mumak_modifier
				years = 40
			}
			add_opinion = {
				modifier = respect_opinion
				target = root
				opinion = 20
			}
		}
		
		ai_chance = {
			base = 100
			modifier = {
				add = 200
				reverse_opinion = {
					target = scope:marshal
					value <= 0
				}
			}
		}
	}
	option = { #Sell it
		name = harad.0015.c
		
		add_gold = minor_gold_max_value
			
		scope:marshal = {
			add_opinion = {
				modifier = respect_opinion
				target = root
				opinion = -20
			}
		}
		
		ai_chance = {
			base = 200
		}
	}
	
}

##########################################
# Heatwave
# by BaelishPasta
# 0016
##########################################

#A heatwave strikes your capital
harad.0016 = {
	content_source = realms_dlc
	type = character_event
	title = harad.0016.t
	desc = harad.0016.desc
	
	theme = realm
	override_background = {
		reference = wilderness_desert
	}
	
	left_portrait = {
		character = root
		animation = pain
	}

	trigger = {
		is_independent_ruler = yes
		capital_county.title_province = {
			terrain = dune_sea
		}
		NOT = { has_character_flag = had_event_harad_0016 }	
	}

	immediate = {
		add_character_flag = {
			flag = had_event_harad_0016
			years = 5
		}
	}

	#Option 1: What do you want me to do?
	option = {
		name = harad.0016.a

		add_prestige = minor_prestige_loss
		add_stress = minor_stress_gain
		stress_impact = {
			compassionate = major_stress_impact_gain
			sadistic = medium_stress_impact_loss
		}		
		duel = {
			skill = stewardship
			value = high_skill_rating
			10 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
				}
				desc = harad.0016.a.message_1
				send_interface_toast = {
					type = event_toast_effect_good
					left_icon = scope:capital
					title = harad.0016.a_1
					capital_county = {
						add_county_modifier = {
							modifier = harad_0016_mild_heatwave_modifier
							days = 365
							}
						}
					}
				}
				
		
			30 = {
				desc = harad.0016.a.message_2
				send_interface_toast = {
					type = event_toast_effect_bad
					left_icon = scope:capital
					title = harad.0016.a_2
					capital_county = {
						add_county_modifier = {
							modifier = harad_0016_major_heatwave_modifier
							days = 365
					
						}		
					}
				}
			}
			
			
			50 = {
				desc = harad.0016.a.message_3
				send_interface_toast = {
					type = event_toast_effect_bad
					left_icon = scope:capital
					title = harad.0016.a_3
					capital_county = {
						add_county_modifier = {
							modifier = harad_0016_severe_heatwave_modifier
							days = 365
					
						}		
					}
				}
			}
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_greed = 0.25
			}
			modifier = {	
				add = 30
				has_trait = sadistic
			}
			modifier = {	
				add = 30
				has_trait = arbitrary
			}
			modifier = {	
				add = -30
				has_trait = compassionate
			}
		}
	}
	
	#Option 2: Minor preparations
	option = {
		name = harad.0016.b

		remove_short_term_gold = minor_gold_value_check
		add_prestige = minor_prestige_gain
		add_stress = minor_stress_gain
		stress_impact = {
			greedy = major_stress_impact_gain
		}		
		duel = {
			skill = stewardship
			value = high_skill_rating
			30 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
				}
				desc = harad.0016.b.message_1
				send_interface_toast = {
					type = event_toast_effect_good
					left_icon = scope:capital
					title = harad.0016.b_1
					capital_county = {
						add_county_modifier = {
							modifier = harad_0016_mild_heatwave_modifier
							days = 365
							}
						}
					}
				}
				
		
			30 = {
				desc = harad.0016.b.message_2
				send_interface_toast = {
					type = event_toast_effect_bad
					left_icon = scope:capital
					title = harad.0016.b_2
					capital_county = {
						add_county_modifier = {
							modifier = harad_0016_major_heatwave_modifier
							days = 365
					
						}		
					}
				}
			}
			
			
			30 = {
				desc = harad.0016.b.message_3
				send_interface_toast = {
					type = event_toast_effect_bad
					left_icon = scope:capital
					title = harad.0016.b_3
					capital_county = {
						add_county_modifier = {
							modifier = harad_0016_severe_heatwave_modifier
							days = 365
					
						}		
					}
				}
			}
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_greed = -0.25
			}
			modifier = {	
				add = 30
				has_trait = compassionate
			}
			modifier = {	
				add = -30
				has_trait = greedy
			}
		}
	}	

	#Option 3: All prepare
	option = {
		name = harad.0016.c

		remove_short_term_gold = medium_gold_value_check
		add_prestige = medium_prestige_gain
		add_stress = 0
		stress_impact = {
			greedy = major_stress_impact_gain
		}		
		duel = {
			skill = stewardship
			value = high_skill_rating
			60 = {		
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
				}
				desc = harad.0016.c.message_1
				send_interface_toast = {
					type = event_toast_effect_good
					left_icon = scope:capital
					title = harad.0016.c_1
					capital_county = {
						add_county_modifier = {
							modifier = harad_0016_mild_heatwave_modifier
							days = 365
							}
						}
					}
				}
				
		
			30 = {
				desc = harad.0016.c.message_2
				send_interface_toast = {
					type = event_toast_effect_bad
					left_icon = scope:capital
					title = harad.0016.c_2
					capital_county = {
						add_county_modifier = {
							modifier = harad_0016_major_heatwave_modifier
							days = 365
					
						}		
					}
				}
			}
			
			
			10 = {
				desc = harad.0016.c.message_3
				send_interface_toast = {
					type = event_toast_effect_bad
					left_icon = scope:capital
					title = harad.0016.c_3
					capital_county = {
						add_county_modifier = {
							modifier = harad_0016_severe_heatwave_modifier
							days = 365
					
						}		
					}
				}
			}
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_greed = -0.25
			}
			modifier = {	
				add = 30
				has_trait = compassionate
			}
			modifier = {	
				add = -30
				has_trait = greedy
			}
		}
	}
}

### Unify Harad

harad.1000 = {
	content_source = realms_dlc
	type = character_event
	title = harad.1000.t
	desc = harad.1000.desc
	theme = crown
	override_background = {
		reference = throne_room_east
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}
	
	option = { 
		name = harad.1000.a
		add_prestige = 1500
		add_character_modifier = unified_harad_modifier
		if = {
			limit = { prestige_level = 0 }
			add_prestige_level = 5
		}
		else_if = {
			limit = { prestige_level = 1 }
			add_prestige_level = 4
		}
		else_if = {
			limit = { prestige_level = 2 }
			add_prestige_level = 3
		}
		else_if = {
			limit = { prestige_level = 3 }
			add_prestige_level = 2
		}
		else_if = {
			limit = { prestige_level = 4 }
			add_prestige_level = 1
		}
		root.dynasty = {
			add_dynasty_prestige = 1000
			add_dynasty_prestige_level = 2
		}
	}
}


### Long Winter story content ###

harad.2000 = { ## Harwan Invades Gondor - The Harrying of the Coasts begins
	content_source = realms_dlc
	type = character_event
	title = harad.2000.t
	desc = harad.2000.desc
	theme = war
	override_background = {
		reference = throne_room_east
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}
	immediate = {
		if = {
			limit = { 
				exists = title:e_gondor.holder
			}
			title:e_gondor.holder = { 
				save_scope_as = gondor 
			}
		}
		else_if = {
			limit = { 
				exists = title:e_gondor_steward.holder 
			}
			title:e_gondor_steward.holder = { 
				save_scope_as = gondor 
			}
		}
		else_if = {
			limit = { 
				exists = title:e_castamir.holder 
			}
			title:e_castamir.holder = { 
				save_scope_as = gondor 
			}
		}
		
		if = {
			limit = { 
				scope:gondor = { 
					any_vassal = { 
						any_held_title = { 
							target_is_de_jure_liege_or_above = title:k_harondor 
						} 
					} 
				} 
			}
			title:k_harondor = { 
				save_scope_as = target_kingdom 
			}
		}
	}
	
	option = {
		name = harad.2000.a 
		# Start War
		start_war = { # Harrying of the Coasts
			casus_belli = lotr_harrying_of_the_coasts_cb
			target = scope:gondor
			target_title = title:k_harondor
		}
		# Alert Gondor
		title:c_minas_tirith.holder.top_liege = {
			trigger_event = {
				id = gondor.3900
				days = 1
			}
		}
		# Invite Umbar
		if = {
			limit = { 
				and = {
					exists = title:k_umbar.holder 
					title:k_umbar.holder.liege = root
				}
			}
			title:k_umbar.holder = {
				trigger_event = {
					id = harad.2001
					days = 1
				}
			}
		}
		# Invite Harnendor
		if = {
			limit = { 
				and = {
					exists = title:k_mirlond.holder 
					title:k_mirlond.holder.liege = root
				}
			}
			title:k_mirlond.holder = {
				trigger_event = {
					id = harad.2001
					days = 1
				}
			}
		}
		if = {
			limit = { # Major News
				NOT = { has_game_rule = no_news }
			}
			every_player = { #Global News Announcement
				trigger_event = news_event.0040
			}
		}
	}
}

harad.2001 = { # Harrying of the Coasts - Umbar's invitation
	content_source = realms_dlc
	type = character_event
	title = harad.2001.t
	desc = harad.2001.desc
	theme = war
	override_background = {
		reference = black_ship
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}
	immediate = {
		if = {
			limit = { exists = title:e_gondor.holder }
			title:e_gondor.holder = { save_scope_as = gondor }
		}
		else_if = {
			limit = { exists = title:e_gondor_steward.holder }
			title:e_gondor_steward.holder = { save_scope_as = gondor }
		}
		else_if = {
			limit = { exists = title:e_castamir.holder }
			title:e_castamir.holder = { save_scope_as = gondor }
		}
		
		if = {
			limit = { 
				scope:gondor = { 
					any_vassal = { 
						any_held_title = { 
							target_is_de_jure_liege_or_above = title:k_harondor 
						} 
					} 
				} 
			}
			title:k_harondor = { save_scope_as = target_kingdom }
		}
		root.liege = { 
			save_scope_as = liege 
		}
	}
	
	option = { # Join the war 
		name = harad.2001.a
		add_piety = 100
		add_prestige = 200 
		# Join the war
		scope:liege = {
			every_character_war = {
				limit = {
					OR = {
						is_defender = scope:gondor
					}
				}
				add_attacker = root
			}
		}
		# Modifiers
		if = {
			limit = { is_ai = yes }
			remove_character_modifier = lotr_preparing_the_fleets_modifier
			add_character_modifier = {
				modifier = lotr_fleets_long_prepared_umbar_ai_modifier
				years = 10
			}
		}
		else = {
			remove_character_modifier = lotr_preparing_the_fleets_modifier
			add_character_modifier = {
				modifier = lotr_fleets_long_prepared_umbar_modifier
				years = 5
			}
		}
		# Event troops
		if = {
			limit = {
				has_title = title:k_umbar
			}
			spawn_army = {
				levies = 1000
				men_at_arms = {
					type = corsair_warriors
					stacks = 6
				}
				men_at_arms = {
					type = abrazanim_warbows
					stacks = 2
				}
				location = capital_province
				inheritable = no
				uses_supply = no
				name = second_fleet		
			}
		}
		if = {
			limit = {
				has_title = title:k_mirlond
				completely_controls = title:c_mirlond
			}
			spawn_army = {
				levies = 2000
				men_at_arms = {
					type = corsair_warriors
					stacks = 2
				}
				men_at_arms = {
					type = haradrim_radiers
					stacks = 4
				}
				location = capital_province
				inheritable = no
				uses_supply = no
				name = third_fleet		
			}
		}
		if = {
			limit = {
				has_character_flag = lotr_further_preparations
			}
			spawn_army = {
				levies = 1000
				men_at_arms = {
					type = corsair_warriors
					stacks = 6
				}
				men_at_arms = {
					type = abrazanim_warbows
					stacks = 2
				}
				location = capital_province
				inheritable = no
				uses_supply = no
				name = fifth_fleet		
			}
		}
		# Let Harwan know
		if = {
			limit = {
				has_title = title:k_umbar
			}
			scope:liege = {
				trigger_event = {
					id = harad.2005
					days = 1
				}
			}
		}
		if = {
			limit = {
				has_title = title:k_mirlond
			}
			scope:liege = {
				trigger_event = {
					id = harad.2006
					days = 2
				}
			}
		}

		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 90
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 75
			}
		}
	}
	option = { # Refuse 
		name = harad.2001.b 
		add_prestige = -500
		add_piety = -250
		every_vassal = {
			limit = {
				faith = faith:faith_corsair
			}
			add_opinion = {
				modifier = didnt_raid_opinion
				target = root
			}
		}
		root.liege = {
			add_opinion = {
				modifier = dishonoured_oath_of_alliegeance_opinion
				target = root
			}
		}

		# Let Harwan know about the refusal
		if = {
			limit = {
				has_title = title:k_umbar
			}
			scope:liege = {
				trigger_event = {
					id = harad.2007
					days = 1
				}
			}
		}
		if = {
			limit = {
				has_title = title:k_mirlond
			}
			scope:liege = {
				trigger_event = {
					id = harad.2008
					days = 2
				}
			}
		}

		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 0
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 10
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 25
			}
		}
	}
}

# Make these trigger for Umbar too

harad.2002 = { # Harrying of the Coasts - victory
	content_source = realms_dlc
	type = character_event
	title = harad.2002.t
	desc = harad.2002.desc
	theme = war
	override_background = {
		reference = black_ship
	}
	left_portrait = {
		character = root
		animation = schadenfreude
	}
	
	# cooldown = { days = 5 }
	
	option = { # Harwan
		name = harad.2002.a

		trigger = {
			has_title = title:e_haradwaith
		}

		add_prestige = medium_prestige_gain
		get_title = title:k_harondor

		remove_character_modifier = lotr_fleets_long_prepared_harwan_modifier

		title:k_umbar.holder = { #Trigger same event for Umbar
			trigger_event = harad.2002
		}
		title:k_mirlond.holder = { # Triger for Mirlond if kingdom
			trigger_event = harad.2002
		}
	}
	option = {  # Everyone who isn't Harwan
		name = harad.2002.b

		trigger = {
			NOT = {
				has_title = title:e_haradwaith
			}
		}

		add_gold = 1000
		add_prestige = medium_prestige_gain

		remove_character_modifier = lotr_fleets_long_prepared_umbar_modifier
	}
}

harad.2003 = { # Harrying of the Coasts - defeat
	content_source = realms_dlc
	type = character_event
	title = harad.2003.t
	desc = harad.2003.desc
	theme = war
	override_background = {
		reference = black_ship
	}
	left_portrait = {
		character = root
		animation = disbelief
	}

	option = { # Harwan
		name = harad.2003.a

		trigger = {
			has_title = title:e_haradwaith
		}
 
		every_vassal = { # Corsair vassals get angry 
			limit = {
				faith = faith:faith_corsair
			}
			add_opinion = {
				modifier = didnt_raid_opinion
				target = root
			}
		}
		add_prestige = -750

		remove_character_modifier = lotr_fleets_long_prepared_harwan_modifier

		title:k_umbar.holder = { #Trigger same event for Umbar
			trigger_event = harad.2003
		}
		title:k_mirlond.holder = { # Triger for Mirlond if kingdom
			trigger_event = harad.2003
		}
	}
	
	option = {  # Everyone who isn't Harwan
		name = harad.2003.b

		trigger = {
			NOT = {
				has_title = title:e_haradwaith
			}
		}

		remove_short_term_gold = 200 
		every_vassal = { # Corsair vassals get angry 
			limit = {
				faith = faith:faith_corsair
			}
			add_opinion = {
				modifier = didnt_raid_opinion
				target = root
			}
		}
		add_prestige = -750

		remove_character_modifier = lotr_fleets_long_prepared_umbar_modifier
	}
}

harad.2004 = { # Harrying of the Coasts - white peace
	content_source = realms_dlc
	type = character_event
	title = harad.2004.t
	desc = harad.2004.desc
	theme = war
	override_background = {
		reference = black_ship
	}
	left_portrait = {
		character = root
		animation = disbelief
	}
	
	option = { # Harwan
		name = harad.2004.a

		trigger = {
			has_title = title:e_haradwaith
		}

		add_prestige = 200
		add_pressed_claim = title:k_harondor

		remove_character_modifier = lotr_fleets_long_prepared_harwan_modifier

		title:k_umbar.holder = { #Trigger same event for Umbar
			trigger_event = harad.2004
		}
		title:k_mirlond.holder = { # Triger for Mirlond if kingdom
			trigger_event = harad.2004
		}
	}

	option = {  # Everyone who isn't Harwan
		name = harad.2004.b

		trigger = {
			NOT = {
				has_title = title:e_haradwaith
			}
		}

		add_gold = 200
		add_prestige = 100

		remove_character_modifier = lotr_fleets_long_prepared_umbar_modifier
	}
}

harad.2005 = { ## The Harrying of the Coast - Umbar joins
	content_source = realms_dlc
	type = character_event
	title = harad.2005.t
	desc = harad.2005.desc
	theme = war
	override_background = {
		reference = black_ship
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = title:k_umbar.holder
		animation = aggressive_sword
	}
	immediate = {
	}
	
	option = {
		name = harad.2005.a 
		add_prestige = 50
		spawn_army = {
			levies = 500
			men_at_arms = {
				type = corsair_warriors
				stacks = 3
			}
			location = capital_province
			inheritable = no
			uses_supply = no
			name = umbar_raiders		
		}
	}
}

harad.2006 = { ## The Harrying of the Coast - Harnendor joins
	content_source = realms_dlc
	type = character_event
	title = harad.2006.t
	desc = harad.2006.desc
	theme = war
	override_background = {
		reference = black_ship
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = title:k_mirlond.holder
		animation = aggressive_sword
	}
	immediate = {
	}
	
	option = {
		name = harad.2006.a 
		add_prestige = 50
		spawn_army = {
			levies = 500
			men_at_arms = {
				type = corsair_warriors
				stacks = 3
			}
			location = capital_province
			inheritable = no
			uses_supply = no
			name = mirlond_raiders		
		}
	}
}

harad.2007 = { ## The Harrying of the Coast - Umbar refuses
	content_source = realms_dlc
	type = character_event
	title = harad.2007.t
	desc = harad.2007.desc
	theme = war
	override_background = {
		reference = black_ship
	}
	left_portrait = {
		character = root
		animation = anger
	}
	right_portrait = {
		character = title:k_umbar.holder
		animation = fear
	}
	immediate = {
	}
	
	option = {
		name = harad.2007.a 
		add_prestige = -50
		# add title revocation reason
	}
}

harad.2008 = { ## The Harrying of the Coast - Harnendor refuses
	content_source = realms_dlc
	type = character_event
	title = harad.2008.t
	desc = harad.2008.desc
	theme = war
	override_background = {
		reference = black_ship
	}
	left_portrait = {
		character = root
		animation = anger
	}
	right_portrait = {
		character = title:k_mirlond.holder
		animation = fear
	}
	immediate = {
	}
	
	option = {
		name = harad.2008.a 
		add_prestige = -50
		# add title revocation reason

	}
}

harad.2999 = {
	hidden = yes
	trigger = { is_ai = yes }
	immediate = { add_character_flag = bypass_normal_requirements }
}

harad.2500 = {
	content_source = realms_dlc
	type = character_event
	title = harad.2500.t
	desc = harad.2500.desc
	theme = realm
	window = visit_settlement_window
	override_background = { reference = wilderness_desert }
	left_portrait = {
		character = root 
		animation = sword_coup_degrace
	}
	immediate = {
		show_as_tooltip = {
			title:d_darsalan = {
				set_de_jure_liege_title = title:k_koanoz
				change_development_level = 5
			}
			dynasty = { add_dynasty_prestige = 500 }
			add_prestige = massive_prestige_gain
			add_character_modifier = lord_of_the_dunes_modifier
		}
	}
	option = {
		name = harad.2500.a 
	}
}
		

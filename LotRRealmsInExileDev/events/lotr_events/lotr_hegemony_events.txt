namespace = lotr_hegemony

lotr_hegemony.0001 = {
	hidden = yes

	immediate = {
		if = {
			limit = { scope:title = title:h_mountains }
			trigger_event = lotr_hegemony.0002
		}
		else_if = {
			limit = { scope:title = title:h_reunited_kingdom }
			trigger_event = lotr_hegemony.0003
		}
		else_if = {
			limit = { scope:title = title:h_numenor_in_exile }
			trigger_event = lotr_hegemony.0004
		}
		else_if = {
			limit = { scope:title = title:h_pharazain }
			trigger_event = lotr_hegemony.0005
		}
		else_if = {
			limit = { scope:title = title:h_orc_horde }
			trigger_event = lotr_hegemony.0006
		}
		else_if = {
			limit = { scope:title = title:h_noldor }
			trigger_event = lotr_hegemony.0007
		}
	}
}

scripted_effect grant_independence_from_hegemony = {
	every_vassal = {
		save_scope_as = vassal
		if = {
			limit = { $TITLE$ = { any_in_de_jure_hierarchy = { this = scope:vassal.primary_title } } }
			create_title_and_vassal_change = {
				type = independency
				save_scope_as = change
				add_claim_on_loss = no
			}
			becomes_independent = { change = scope:change }
			resolve_title_and_vassal_change = scope:change
		}
	}
}

lotr_hegemony.0002 = {
	content_source = realms_dlc
	type = character_event
	title = lotr_hegemony.0002.title
	desc = lotr_hegemony.0002.desc
	theme = realm
	override_background = {
		reference = throne_room
	}

	trigger = { is_underground_race = no }

	right_portrait = {
		character = root
		animation = sadness
	}

	left_portrait = {
		trigger = { exists = cp:councillor_chancellor }
		character = cp:councillor_chancellor
		animation = chancellor
	}

	immediate = { grant_independence_from_hegemony = { TITLE = scope:title } }

	option = {
		name = lotr_hegemony.0002.a
		destroy_title = title:h_mountains
	}
}

lotr_hegemony.0003 = {
	content_source = realms_dlc
	type = character_event
	title = lotr_hegemony.0003.title
	desc = lotr_hegemony.0003.desc
	theme = realm
	override_background = {
		reference = throne_room
	}

	trigger = { is_human = no }

	right_portrait = {
		character = root
		animation = sadness
	}

	left_portrait = {
		trigger = { exists = cp:councillor_chancellor }
		character = cp:councillor_chancellor
		animation = chancellor
	}

	immediate = { grant_independence_from_hegemony = { TITLE = scope:title } }

	option = {
		name = lotr_hegemony.0003.a
		destroy_title = title:h_reunited_kingdom
	}
}

lotr_hegemony.0004 = {
	content_source = realms_dlc
	type = character_event
	title = lotr_hegemony.0004.title
	desc = lotr_hegemony.0004.desc
	theme = realm
	override_background = {
		reference = throne_room
	}

	trigger = { is_human = no }

	right_portrait = {
		character = root
		animation = sadness
	}

	left_portrait = {
		trigger = { exists = cp:councillor_chancellor }
		character = cp:councillor_chancellor
		animation = chancellor
	}

	immediate = { grant_independence_from_hegemony = { TITLE = scope:title } }

	option = {
		name = lotr_hegemony.0004.a
		destroy_title = title:h_numenor_in_exile
	}
}

lotr_hegemony.0005 = {
	content_source = realms_dlc
	type = character_event
	title = lotr_hegemony.0005.title
	desc = lotr_hegemony.0005.desc
	theme = realm
	override_background = {
		reference = throne_room
	}

	trigger = { is_human = no }

	right_portrait = {
		character = root
		animation = sadness
	}

	left_portrait = {
		trigger = { exists = cp:councillor_chancellor }
		character = cp:councillor_chancellor
		animation = chancellor
	}

	immediate = { grant_independence_from_hegemony = { TITLE = scope:title } }

	option = {
		name = lotr_hegemony.0005.a
		destroy_title = title:h_pharazain
	}
}

lotr_hegemony.0006 = {
	content_source = realms_dlc
	type = character_event
	title = lotr_hegemony.0006.title
	desc = lotr_hegemony.0006.desc
	theme = realm
	override_background = {
		reference = throne_room
	}
	
	trigger = { is_orc = no }

	right_portrait = {
		character = root
		animation = sadness
	}

	left_portrait = {
		trigger = { exists = cp:councillor_chancellor }
		character = cp:councillor_chancellor
		animation = chancellor
	}

	immediate = { grant_independence_from_hegemony = { TITLE = scope:title } }

	option = {
		name = lotr_hegemony.0006.a
		destroy_title = title:h_orc_horde
	}
}

lotr_hegemony.0007 = {
	content_source = realms_dlc
	type = character_event
	title = lotr_hegemony.0007.title
	desc = lotr_hegemony.0007.desc
	theme = realm
	override_background = {
		reference = throne_room
	}
	
	trigger = { is_elf = no }

	right_portrait = {
		character = root
		animation = sadness
	}

	left_portrait = {
		trigger = { exists = cp:councillor_chancellor }
		character = cp:councillor_chancellor
		animation = chancellor
	}

	immediate = { grant_independence_from_hegemony = { TITLE = scope:title } }

	option = {
		name = lotr_hegemony.0007.a
		destroy_title = title:h_noldor
	}
}

namespace = arnor

# arnor.0001 - 3000 ==> Arthedain
# arnor.3001 - 6000 ==> Cardolan
# arnor.6001 - 9000 ==> Rhuduar
# arnor.9001 - 9999 ==> Hidden/Management events

arnor.0001 = { # Argeleb rises to the throne (ispanets)
    content_source = realms_dlc
	type = character_event
	title = arnor.0001.t
	desc = arnor.0001.desc
	theme = stewardship_duty_focus
	override_background = {
		reference = fornost
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}
	
    option = {  # Ask Cardolan and Rhudaur for fealty
		name = arnor.0001.a
        
        ai_chance = {
			base = 100
		}
        title:k_rhudaur.holder = {
            trigger_event = {
				id = arnor.6002
				days = { 30 60 }
			}
        }
        title:k_cardolan.holder = {
            trigger_event = {
				id = arnor.3002
				days = { 30 60 }
			}
        }
	}
	option = {  # Ask only Cardolan for fealty
		name = arnor.0001.b
        
        ai_chance = {
			base = 0
		}
        title:k_cardolan.holder = {
            trigger_event = {
				id = arnor.3002
				days = { 30 60 }
			}
        }
	}
    option = {  # Ask only Rhudaur for fealty
		name = arnor.0001.c
        
        ai_chance = {
			base = 0
		}
        title:k_rhudaur.holder = {
            trigger_event = {
				id = arnor.6002
				days = { 30 60 }
			}
        }
	}
    option = {  # Do not ask for falty
		name = arnor.0001.d
        
        ai_chance = {
			base = 0
		}
	}
}


#################
### CARDOLAN ####
#################

arnor.3001 = { # Intro
    content_source = realms_dlc
	type = character_event
	title = arnor.3001.t
	desc = arnor.3001.desc
	theme = stewardship_duty_focus
	override_background = {
		reference = throne_room
    }
	left_portrait = {
		character = root
		animation = personality_bold
	}
    option = {  # Do not ask for falty
		name = arnor.3001.a
	}
}

arnor.3002 = { # Argeleb asks for fealty
	type = letter_event
	sender = scope:sender
	opening = arnor.3002.opening
	desc = arnor.3002.desc
    
    on_trigger_fail = { #Trigger invitation again if it was blocked because the character was handling another invitation
		trigger_event = {
			id = arnor.3002
			days = 1
		}
	}

    immediate = {
		title:k_arthedain.holder = {
			save_scope_as = sender
		}
		ROOT = {
			save_scope_as = recipient
		}
	}

    option = {  # Swear falty
		name = arnor.3002.a
        ai_chance = {
            base = 50
            modifier = {	# 100 if lore friendly
            	add = 50
            	has_game_rule = default_ai_behavior
            }
        }
        scope:recipient = {
			create_title_and_vassal_change = {
				type = swear_fealty
				save_scope_as = change
				add_claim_on_loss = yes
			}
			change_liege = {
				liege = scope:sender
				change = scope:change
			}
			resolve_title_and_vassal_change = scope:change
            # Creation of k_arnor title for Argeleb
            # TODO
		}
	}

    option = {  # Do not swear falty
		name = arnor.3002.b
        
        ai_chance = {
            base = 50
            modifier = {	# 0 if lore friendly
            	add = -50
            	has_game_rule = default_ai_behavior
            }
        }
        scope:sender = {
            add_pressed_claim = scope:recipient.primary_title
        }
        scope:recipient = { add_prestige = 150 }
	}
}

#################
### RHUDAUR  ####
#################

arnor.6001 = { # Intro
    content_source = realms_dlc
	type = character_event
	title = arnor.6001.t
	desc = arnor.6001.desc
	theme = stewardship_duty_focus
	override_background = {
		reference = throne_room
    }
	left_portrait = {
		character = root
		animation = personality_bold
	}
    option = { 
		name = arnor.6001.a
	}
}

arnor.6002 = { # Argeleb asks for fealty
	type = letter_event
	sender = scope:sender
	opening = arnor.6002.opening
	desc = arnor.6002.desc
    
    on_trigger_fail = { #Trigger invitation again if it was blocked because the character was handling another invitation
		trigger_event = {
			id = arnor.6002
			days = 1
		}
	}

    immediate = {
		title:k_arthedain.holder = {
			save_scope_as = sender
		}
		ROOT = {
			save_scope_as = recipient
		}
	}

    option = {  # Swear falty
		name = arnor.6002.a
        ai_chance = {
            base = 0 # It is allied to Angmar already
        }
        scope:recipient = {
            # Vassalization
			create_title_and_vassal_change = {
				type = swear_fealty
				save_scope_as = change
				add_claim_on_loss = yes
			}
			change_liege = {
				liege = scope:sender
				change = scope:change
			}
			resolve_title_and_vassal_change = scope:change

            # Creation of k_arnor title for Argeleb
            # TODO
		}
	}

    option = {  # Do not swear fealty
		name = arnor.6002.b
        ai_chance = {
            base = 100 # It is allied to Angmar already
        }
        scope:sender = {
            add_pressed_claim = scope:recipient.primary_title
        }
        scope:recipient = { add_prestige = 150 }
	}
}

namespace = lotr_thani_hazad

############################
#	lotr_thani_hazad.0000 - 500  ==> Storm-Host/An-Balkumagan Events
#	lotr_thani_hazad.1000 - 1200 ==> Stormhost spy at Balan-lai court event chain
#	lotr_thani_hazad.1999 - 2200 ==> Tulwangi Rebellion event chain
#	lotr_thani_hazad.3000 - 3500 ==> Imrazôr & Arimîth event chain
#	lotr_thani_hazad.5000 - 6999 ==> Seregul chain 
#	lotr_thani_hazad.9000 - 9999 ==> Balan-lai mechanic events  
#
#
#
#
#
#
#
#   lotr_thani_hazad.9000 - 9999 ==> Balan-lai events
############################

lotr_thani_hazad.0001 = { # Order to attack Bellakar
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.0001.t
	desc = lotr_thani_hazad.0001.desc
	theme = war
	override_background = { reference = docks_adunai }
	left_portrait = {
		character = root
		animation = aggressive_sword
	}
	right_portrait = {
		character = character:nazgul5
		animation = personality_dishonorable
	}
	option = {
		name = lotr_thani_hazad.0001.a

		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:recieved_murder_bellakar_order
		}
	}
}

lotr_thani_hazad.0002 = { # Pel is conquered by the mag special military operation
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.0002.t
	desc = lotr_thani_hazad.0002.desc
	theme = war
	override_background = { reference = docks_adunai }
	left_portrait = {
		character = root
		animation = aggressive_sword
	}
	# right_portrait = {
	# 	character = character:nazgul5
	# 	animation = personality_dishonorable
	# }
	option = {
		name = lotr_thani_hazad.0002.a
	}
}

###############################################################
### "Stormhost spy at Balan-lai court" event chain ~~ Aerien ##
###############################################################

lotr_thani_hazad.1000 = { # Set-up event for "Spy at Court" event chain
	hidden = yes
	immediate = {
		create_character = { # 
			age = { 55 65 }
			gender = male
			culture = culture:kharadunaim
			faith = faith:faith_thani_hazad
			dynasty = none
			employer = title:e_thon_an_kharlokh.holder
			save_scope_as = spy_father
		}

		create_character = { # 
			age = { 55 65 }
			gender = female
			culture = culture:kharadunaim
			faith = faith:faith_thani_hazad
			dynasty = none
			employer = title:e_thon_an_kharlokh.holder
			save_scope_as = spy_mother
		}
		create_character = { # Create a new character to become the spy
			employer = root
			age = { 20 35 }
			culture = culture:kharadunaim
			faith = faith:faith_thani_hazad
			dynasty = none
			gender_female_chance = 50
			father = scope:spy_father
			mother = scope:spy_mother
			intrigue = 11
			trait = shrewd
			trait = intellect_good_1
			save_scope_as = stormhost_spy
			#after_creation = {
			#	save_temporary_scope_as = 
			#}
		}	
		trigger_event = { # Time passes...
			id = lotr_thani_hazad.1001
			days = { 60 120 } 
		}
	}
}

lotr_thani_hazad.1001 = { # The spy attempts to gain your trust
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.1001.t
	desc = lotr_thani_hazad.1001.desc
	theme = party

	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:stormhost_spy
		animation = admiration
	}
	
	trigger = { # Check if the ruler in question is available
		is_available_adult = yes
		is_travelling = no
	}
	on_trigger_fail = { #Trigger the event at a later time
		trigger_event = {
			id = lotr_thani_hazad.1001
			days = { 120 180 }
		}
	}
	
	
	option = { # Show me what you wanted to show me.
		name = lotr_thani_hazad.1001.a
		hidden_effect =  {
			random_list = {
				34 = { trigger_event = lotr_thani_hazad.1020 } #Wine tasting
				33 = { trigger_event = lotr_thani_hazad.1030 } #Portrait painting
				33 = { trigger_event = lotr_thani_hazad.1040 } #Exotic bird
			}
		}
		scope:stormhost_spy = {
			add_opinion = {
				modifier = pleased_opinion
				opinion = 10
				target = root
			}
		}
	}
	option = { # Can't you see I'm busy?
		name = lotr_thani_hazad.1001.b
		trigger_event = { # Time passes...
			id = lotr_thani_hazad.1200
			days = { 60 180 }
		}
	}
	option = { # I don't trust you!
		name = lotr_thani_hazad.1001.c
		trigger = {
			OR = {
				has_trait = paranoid
				has_trait = shrewd
				has_trait = deceitful
				has_trait = irritable
			}
		}
		imprison = {
			target = scope:stormhost_spy
			type = dungeon
		}
		add_character_flag = imprisoned_stormhost_spy
		stress_impact = {
			base = minor_stress_impact_loss
		}
		trigger_event = { # You find out they were a spy
			id = lotr_thani_hazad.1200
			days = 15
		}
	}
	
	option = { # Dance with me instead!
		name = lotr_thani_hazad.1001.d
		trigger = {
			OR = {
				has_trait = gregarious
				has_trait = trusting
				has_trait = honest
				has_trait = rakish
			}
		}
		stress_impact = {
			base = major_stress_impact_loss
		}
		scope:stormhost_spy = {
			add_opinion = {
				modifier = pleased_opinion
				opinion = 50
				target = root
			}
		}
		trigger_event = { # Spy gained a bit of your trust
			id = lotr_thani_hazad.1100
			days = { 60 120 }
		} 
	}
}

lotr_thani_hazad.1020 = { # Wine tasting
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.1020.t
	desc = lotr_thani_hazad.1020.desc
	theme = party
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:stormhost_spy
		animation = happy
	}
	option = { # Let's drink!
		name = lotr_thani_hazad.1020.a
		stress_impact = {
			base = major_stress_impact_loss
		}
		scope:stormhost_spy = {
			add_opinion = {
				modifier = pleased_opinion
				opinion = 50
				target = root
			}
		}
		random_list = {
			95 = {
				add_prestige = 25
			}
			5 = { 
				add_prestige = 25
				add_trait = drunkard
			}
		}
		trigger_event = { # Spy gained a bit of your trust
			id = lotr_thani_hazad.1100
			days = { 60 120 }
		} 
	}
	option = { # Just a small dignified taste.
		name = lotr_thani_hazad.1020.b
		trigger = {
			NOR = {
				has_trait = drunkard
				has_trait = gluttonous
			}
		}
		add_prestige = 50
		trigger_event = { # Spy gained a bit of your trust
			id = lotr_thani_hazad.1100
			days = { 60 120 }
		} 
	}
	option = { # No, this isn't my style
		name = lotr_thani_hazad.1020.c
		trigger_event = { # Time passes...
			id = lotr_thani_hazad.1200
			days = { 60 180 }
		}
	}
}

lotr_thani_hazad.1030 = { # Portrait painting
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.1030.t
	desc = lotr_thani_hazad.1030.desc
	theme = friendly
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:stormhost_spy
		animation = happy
	}
	option = { # Let's do it!
		name = lotr_thani_hazad.1030.a
		stress_impact = {
			base = minor_stress_impact_loss
		}
		scope:stormhost_spy = {
			add_opinion = {
				modifier = pleased_opinion
				opinion = 50
				target = root
			}
		}
		remove_short_term_gold = 30
		add_prestige = 150
		add_legitimacy = 20
		root.dynasty = { add_dynasty_prestige = 50 }
		trigger_event = { # Spy gained a bit of your trust
			id = lotr_thani_hazad.1100
			days = { 60 120 }
		} 
	}
	option = { # What about I pay you with, uh, exposure?
		name = lotr_thani_hazad.1030.b
		trigger = {
			OR = {
				has_trait = greedy
				has_trait = poet
			}
		}
		scope:stormhost_spy = {
			add_opinion = {
				modifier = pleased_opinion
				opinion = 50
				target = root
			}
		}
		add_prestige = 50
		trigger_event = { # Spy gained a bit of your trust
			id = lotr_thani_hazad.1100
			days = { 60 120 }
		} 
	}
	option = { # No, this isn't my style
		name = lotr_thani_hazad.1030.c
		trigger_event = { # Time passes...
			id = lotr_thani_hazad.1200
			days = { 60 180 }
		}
	}
}

lotr_thani_hazad.1040 = { # Exotic Bird demonstration
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.1040.t
	desc = lotr_thani_hazad.1040.desc
	theme = friendly
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:stormhost_spy
		animation = happy
	}
	option = { # How marvellous!
		name = lotr_thani_hazad.1040.a
		stress_impact = {
			base = minor_stress_impact_loss
		}
		scope:stormhost_spy = {
			add_opinion = {
				modifier = pleased_opinion
				opinion = 50
				target = root
			}
		}
		trigger_event = { # Spy gained a bit of your trust
			id = lotr_thani_hazad.1100
			days = { 60 120 }
		} 
	}
	option = { # I must have it!
		name = lotr_thani_hazad.1040.b
		trigger = {
			OR = {
				has_trait = arrogant
				has_trait = eccentric
			}
		}
		scope:stormhost_spy = {
			add_opinion = {
				modifier = pleased_opinion
				opinion = 50
				target = root
			}
		}
		add_prestige = 300
		remove_short_term_gold = 25
		root.dynasty = { add_dynasty_prestige = 50 }
		stress_impact = {
			base = medium_stress_impact_loss
		}
		trigger_event = { # Spy gained a bit of your trust
			id = lotr_thani_hazad.1100
			days = { 60 120 }
		} 
	}
	option = { # No, this isn't my style
		name = lotr_thani_hazad.1040.c
		trigger_event = { # Time passes...
			id = lotr_thani_hazad.1200
			days = { 60 180 }
		}
	}
}

lotr_thani_hazad.1100 = { # Quick check if the spy was already made spymaster
	hidden = yes
	immediate = {
		if = {
			limit = {
				scope:stormhost_spy = {
					exists = root.cp:councillor_spymaster
					has_council_position = councillor_spymaster
				}
			}
			trigger_event = lotr_thani_hazad.1150
		}
		else = {
			trigger_event = lotr_thani_hazad.1101
		}
	}
}

lotr_thani_hazad.1101 = { # Spy attempts to make their move
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.1101.t
	desc = lotr_thani_hazad.1101.desc
	theme = friendly
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:stormhost_spy
		animation = personality_content 
	}
	#immediate = {
	#}
	option = { # Sure, I'll make you my spymaster. What could go wrong?
		name = lotr_thani_hazad.1101.a
		assign_councillor_type = {
			type = councillor_spymaster
			target = scope:stormhost_spy
			remove_existing_councillor = yes
		}
		trigger_event = { # The spy will try to fulfill his mission
			id = lotr_thani_hazad.1150
			days = { 60 180 }
		}
	}
	option = { # What? No!
		name = lotr_thani_hazad.1101.b
		trigger_event = { # Time passes...
			id = lotr_thani_hazad.1200
			days = { 60 180 }
		}
	}
	
	option = { # I don't trust you!
		name = lotr_thani_hazad.1101.c
		trigger = {
			OR = {
				has_trait = paranoid
				has_trait = shrewd
				has_trait = deceitful
				has_trait = schemer
			}
		}
		imprison = {
			target = scope:stormhost_spy
			type = dungeon
		}
		add_character_flag = imprisoned_stormhost_spy
		stress_impact = {
			base = minor_stress_impact_loss
		}
		trigger_event = { # You find out they were a spy
			id = lotr_thani_hazad.1200
			days = 15
		}
	}
}

lotr_thani_hazad.1150 = { # The spy tries to fulfill his mission
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.1150.t
	theme = intrigue
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { has_character_flag = spy_made_their_move }
				}
				desc = lotr_thani_hazad.1150.desc.new
			}
			desc = lotr_thani_hazad.1150.desc
		}
	}
	left_portrait = {
		character = root
		animation = personality_content
	}
	right_portrait = {
		character = scope:stormhost_spy
		animation = spymaster 
	}
	lower_center_portrait = { 
		character = scope:stormking
	}
	immediate = {
		title:e_thon_an_kharlokh.holder = { save_scope_as = stormking }
	}
	option = { # Become the stormking's tributary? Sounds great!
		name = lotr_thani_hazad.1150.a
		ai_chance = {
            base = 0 # AI should not choose to do this
        }
		custom_tooltip = event_thani_hazad_1155_a
        make_tributary = {
			TYPE = tributary_permanent
			TRIBUTARY = root
			SUZERAIN = scope:stormking
		}	
	}
	option = { # No! What a terrible idea!
		name = lotr_thani_hazad.1150.b
		scope:stormhost_spy = {
			add_opinion = {
				modifier = annoyed_opinion
				opinion = -10
				target = root
			}
		}
		trigger_event = { # The spy will try again
			id = lotr_thani_hazad.1150
			days = { 60 180 }
		}
		add_character_flag = spy_made_their_move
	}
	
	option = { # It's treason, then...
		name = lotr_thani_hazad.1150.c
		imprison = {
			target = scope:stormhost_spy
			type = dungeon
		}
		add_character_flag = imprisoned_stormhost_spy
		stress_impact = {
			base = minor_stress_impact_loss
		}
		trigger_event = { # You find out they were a spy
			id = lotr_thani_hazad.1200
			days = 15
		}
	}
	
	option = { # Don't suggest this again, you fool!
		name = lotr_thani_hazad.1150.d
		trigger = {
			has_character_flag = spy_made_their_move
		}
		scope:stormhost_spy = {
			add_opinion = {
				modifier = insulted_opinion
				opinion = -40
				target = root
			}
		}
		fire_councillor = cp:councillor_spymaster
		trigger_event = { # You find out they were a spy
			id = lotr_thani_hazad.1200
			days = { 30 60 }
		}
	}
}

lotr_thani_hazad.1200 = { # You find out the truth
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.1200.t
	theme = intrigue
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { has_character_flag = imprisoned_stormhost_spy }
				}
				desc = lotr_thani_hazad.1200.desc.new
			}
			desc = lotr_thani_hazad.1200.desc
		}
	}
	left_portrait = {
		character = root
		animation = shock
	}
	right_portrait = {
		character = scope:spymaster
		animation = spymaster
	}
	lower_center_portrait = {
		character = scope:stormhost_spy
	}
	immediate = {
		if = {
    		limit = { 
				NOT = {
					exists = root.cp:councillor_spymaster 
				}
			}
			create_character = { # 
				age = { 55 65 }
				gender = male
				culture = culture:kharadunaim
				faith = faith:faith_thani_hazad
				dynasty = none
				location = root.location
				save_scope_as = spymaster_father
			}

			create_character = { # 
				age = { 55 65 }
				gender = female
				culture = culture:kharadunaim
				faith = faith:faith_thani_hazad
				dynasty = none
				location = root.location
				save_scope_as = spymaster_mother
			}
			
			create_character = { # Create a replacement spymaster
				employer = root
				age = { 20 35 }
				culture = culture:kharadunaim
				faith = faith:faith_thani_hazad
				dynasty = none
				gender_female_chance = 50
				father = scope:spymaster_father
				mother = scope:spymaster_mother
				intrigue = 12
				trait = intellect_good_1
				trait = education_intrigue_3
				save_scope_as = spymaster
				
			}
			hidden_effect = {
				assign_councillor_type = {
					type = councillor_spymaster
					target = scope:spymaster
					remove_existing_councillor = no
				}
			}
		}
		root.cp:councillor_spymaster = { save_scope_as = spymaster }
		title:e_thon_an_kharlokh.holder = { save_scope_as = stormking }
	}
	option = { #execute them
		name = lotr_thani_hazad.1200.a
		scope:stormhost_spy = {
			death = {
				killer = root
				death_reason = death_execution
			}
		}
		add_prestige = 250
		add_legitimacy = 10
	}
	option = { # Show mercy, banish them
		name = lotr_thani_hazad.1200.b
		trigger = {
			OR = {
				has_trait = compassionate
				has_trait = forgiving
				has_trait = trusting
			}
		}
		scope:stormhost_spy = {
			release_from_prison = yes
		}
		scope:stormhost_spy = {
			banish = yes	
			hidden_effect = {
				add_opinion = {
					modifier = banished_me
					target = root
				}
			}			
		}
		add_piety = 200
		add_prestige = 100
		stress_impact = {
			base = major_stress_impact_loss
		}
	}
	option = { # Turn them into double agent
		name = lotr_thani_hazad.1200.c
		trigger = {
			OR = {
				has_trait = shrewd
				has_trait = deceitful
				has_trait = schemer
			}
		}
		add_intrigue_lifestyle_xp = 500
		add_legitimacy = 10
		scope:stormhost_spy = {
			release_from_prison = yes
		}
		hidden_effect = {
			scope:stormhost_spy = {
				set_employer = root
			}
		}
	}
}

####### Stormhost: Tulwangi/Tuladen Rebellion Events #######
# ( vanilla Zanj rebellion adaptation by Icy with Aerien ) #
############################################################

### Tulwangi Rebellion Setup ###
lotr_thani_hazad.1999 = {
 	scope = none
	hidden = yes
 	immediate = {
 		spawn_tulwangi_leader_character_effect = yes
 		scope:tulwangi_leader = {
 			# save_scope_as = story_owner
 			# create_story = story_tulwangi_rebellion
 			give_nickname = nick_storm_queller
 		}

 		title:c_rumyar.holder = {
 			add_visiting_courtier = scope:tulwangi_leader
 		}
 		title:c_rumyar.holder.top_liege = {
 			trigger_event = {
 				id = lotr_thani_hazad.2000
 			}
 			trigger_event = {
 				id = lotr_thani_hazad.2005
				days = { 90 160 }
 			}
		}
 	}
}
### tulwangi leader is riling up locals in Rumyar ###

lotr_thani_hazad.2000 = {
	content_source = realms_dlc
	type = character_event
	theme = realm
	title = lotr_thani_hazad.2000.t
	desc = lotr_thani_hazad.2000.desc

	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = scope:tulwangi_leader
		animation = personality_honorable
	}

	immediate = {
 		scope:tulwangi_leader = {
 			save_scope_as = outspoken_rebel
 		}
 	}

	option = { # The rebels shall fall
		name = lotr_thani_hazad.2000.a
		custom_tooltip = lotr_thani_hazad.2000.a.tt

		title:c_rumyar.holder.top_liege = {
			trigger_event = {
				id = lotr_thani_hazad.2001
				days = { 60 90 }
			}
		}

		title:e_bellakar.holder ?= { ## Notification Event
			trigger_event = {
				id = lotr_thani_hazad.2107
				days = { 60 90 }
			}
		}

		title:k_felaya.holder ?= {
			trigger_event = {
				id = lotr_thani_hazad.2110
				days = { 60 90 }
			}			
		}

		title:d_nykkea.holder ?= {
			trigger_event = {
				id = lotr_thani_hazad.2105
				days = { 60 90 }
			}			
		}

		title:d_holzoreth.holder ?= {
			trigger_event = {
				id = lotr_thani_hazad.2113
				days = { 60 90 }
			}			
		}

		title:k_ray.holder ?= {
			trigger_event = {
				id = lotr_thani_hazad.2100
				days = { 60 90 }
			}			
		}
		#root = { trigger_event = { id = lotr_thani_hazad.2010 days = 30 } } #Aerien note ~ this is triggered in the stormhost_murder_bellakar decision

		
	}

	# option = { ## Reform? NOT IMPLEMENTED
	# }
}
### Capture the Leader? ###

lotr_thani_hazad.2001 = {
	content_source = realms_dlc
 	type = character_event
 	theme = intrigue
 	override_background = { reference = farmland }
 	title = lotr_thani_hazad.2001.t
 	desc = lotr_thani_hazad.2001.desc

 	left_portrait = {
 		character = root
 		animation = marshal
 	}
 	right_portrait = {
 		character = scope:tulwangi_leader
 		animation = scheme
 	}

 	

 	#Try to arrest the upstart
 	option = {
 		name = lotr_thani_hazad.2001.a
 		duel = {
 			skill = intrigue
 			target = scope:outspoken_rebel
 			35 = {
				# You arrest him
 				desc = lotr_thani_hazad.2001.a.success
 				compare_modifier = {
 					value = scope:duel_value
 					multiplier = 3.5
 					min = -49
 				}
 				send_interface_toast = {
 					title = lotr_thani_hazad.2001.a.success
 					left_icon = root
 					right_icon = scope:outspoken_rebel
 					rightfully_imprison_character_effect = {
 						TARGET = scope:outspoken_rebel
 						IMPRISONER = root
 					}
 				}
 				inherit_tulwangi_rebellion_effect = yes
 			}
 			65 = {
 				# The upstart escapes
 				desc = lotr_thani_hazad.2001.a.failure
 				compare_modifier = {
 					value = scope:duel_value
 					multiplier = -3.5
 					min = -49
 				}
 				send_interface_toast = {
 					title = lotr_thani_hazad.2001.a.failure
 					custom_tooltip = lotr_tulwangi_rebellion_events_cause_greatly_strengthened_tt
 					custom_tooltip = lotr_tulwangi_rebellion_leaves_for_lahidas
 					left_icon = root
 					right_icon = scope:outspoken_rebel
 				}
 				hidden_effect = {
 					scope:tulwangi_leader = {
 						change_variable = {
 							name =  tulwangi_rebellion_strength_score
 							add = 4
 						}
 					}
 					title:c_lahidas.holder = {
 						hidden_effect = {
 							title:c_lahidas.holder = {
 								add_visiting_courtier = scope:outspoken_rebel
 							}
 						}
 					}
 					title:c_rumyar.holder.top_liege = {
 						trigger_event = {
 							id = lotr_thani_hazad.2002
 							days = { 150 180 }
 						}
 					}
 				}
 			}
 		}
 		root = {
 			progress_towards_rival_effect = {
 				REASON = lotr_tulwangi_rebellion_opressed_me
 				CHARACTER = scope:outspoken_rebel
 				OPINION = default_rival_opinion
 			}
 		}
 		stress_impact = {
 			paranoid = medium_stress_impact_loss
 			just = minor_stress_impact_loss
 			callous = minor_stress_impact_loss
 			sadistic = minor_stress_impact_loss
 			trusting = medium_stress_impact_gain
 			forgiving = medium_stress_impact_gain
 			compassionate = medium_stress_impact_gain
 		}
 		ai_chance = {
 			base = 100
 			modifier = {
 				factor = 0.5
 				OR = {
 					has_trait = trusting
 					has_trait = forgiving
 					has_trait = compassionate
 				}
 			}
 		}
 	}

 	#Ignore the upstart
 	option = {
 		name = lotr_thani_hazad.2001.c
 		custom_tooltip = lotr_tulwangi_rebellion_events_cause_greatly_strengthened_tt
 		scope:tulwangi_leader = {
 			change_variable = {
 				name =  tulwangi_rebellion_strength_score
 				add = 3
 			}
 		}
 		custom_tooltip = lotr_tulwangi_rebellion_leaves_for_lahidas
 		hidden_effect = {
 			title:c_lahidas.holder = {
 				add_visiting_courtier = scope:outspoken_rebel
 			}
 		}
 		title:c_rumyar.holder.top_liege = {
 			trigger_event = {
 				id = lotr_thani_hazad.2002
 				days = { 150 180 }
 			}
 		}
 		stress_impact = {
 			paranoid = medium_stress_impact_gain
 			just = minor_stress_impact_gain
 			callous = minor_stress_impact_gain
 			sadistic = medium_stress_impact_gain
 			trusting = medium_stress_impact_loss
 			forgiving = medium_stress_impact_loss
 			compassionate = medium_stress_impact_loss
 		}
 		ai_chance = {
 			base = 100
 			modifier = {
 				factor = 0.5
 				OR = {
 					has_trait = paranoid
 					has_trait = just
 					has_trait = callous
 					has_trait = sadistic
 				}
 			}
 		}
 	}
}

### Setup to find correct scope for lotr_thani_hazad.2003 and check if the rebel leader is dead or imprisoned
lotr_thani_hazad.2002 = {
 	scope = none
 	hidden = yes
 	immediate = {
 		if ={
 			#check if he is still alive and not in prison and is not an inheritor of the rebellion
 			limit = {
 				scope:tulwangi_leader = {
 					is_alive = yes
 					is_imprisoned = no
 					NOT = { has_character_flag = new_tulwangi_leader }
 				}
 			}
 			title:c_rumyar.holder.top_liege = {
 				trigger_event = {
 					id = lotr_thani_hazad.2003
				}
			}
 		}
 	}
}

### The rebel leader rouses his followers
lotr_thani_hazad.2003 = {
	content_source = realms_dlc
 	type = character_event
 	theme = realm
 	title = lotr_thani_hazad.2003.t
 	desc = lotr_thani_hazad.2003.desc
 	left_portrait = {
 		character = root
 		animation = dismissal
 	}
 	right_portrait = {
 		character = scope:tulwangi_leader
 		animation = personality_zealous
 	}

 	#Attempt to root out rebel sympathizers and dissuade people from joining them 
 	option = {
 		name = lotr_thani_hazad.2003.a
 		duel = {
 			skill = martial
 			target = scope:tulwangi_leader
 			40 = {
 				# You dissuade people from joining the rebels
 				desc = lotr_thani_hazad.2003.a.success
 				compare_modifier = {
 					value = scope:duel_value
 					multiplier = 3.5
 					min = -49
 				}
				custom_tooltip = lotr_tulwangi_rebellion_leaves_for_ishiqal
				hidden_effect = {
					title:c_ishiqal.holder = {
						add_visiting_courtier = scope:outspoken_rebel
					}
				}
 				send_interface_toast = {
 					title = lotr_thani_hazad.2003.a.success
 					add_legitimacy = 10
 					add_prestige = minor_prestige_gain
 					left_icon = root
 					right_icon = scope:tulwangi_leader
					add_dread = medium_dread_gain
 				}
 			}
 			60 = {
 				# The rebels are not intimidated
 				desc = lotr_thani_hazad.2003.a.failure
 				compare_modifier = {
 					value = scope:duel_value
 					multiplier = -3.5
 					min = -49
 				}
 				custom_tooltip = lotr_tulwangi_rebellion_events_cause_greatly_strengthened_tt
 				hidden_effect = {
 					title:c_ishiqal.holder = {
 						add_visiting_courtier = scope:outspoken_rebel
 					}
 				}
 				send_interface_toast = {
 					title = lotr_thani_hazad.2003.a.failure
 					left_icon = root
 					right_icon = scope:tulwangi_leader
					
 					scope:tulwangi_leader = {
 						add_prestige = medium_prestige_gain
 						add_pressed_claim = title:k_an_balkumagan
 						change_variable = {
 							name =  tulwangi_rebellion_strength_score
 							add = 5
 						}
 					}
					title:c_lahidas = {
						add_county_modifier = {
							modifier = lotr_tulwangi_rebellion_rebel_hotbed_modifier
							years = 3
						}
					}

 				}
 			}
 		}
 		root = {
 			progress_towards_rival_effect = {
 				REASON = lotr_tulwangi_rebellion_opressed_me
 				CHARACTER = scope:tulwangi_leader
 				OPINION = default_rival_opinion
 			}
 		}
 		stress_impact = {
 			paranoid = minor_stress_impact_loss
 			just = minor_stress_impact_loss
 			zealous = medium_stress_impact_loss
 			trusting = medium_stress_impact_gain
 			forgiving = medium_stress_impact_gain
 			cynical = medium_stress_impact_gain
 		}
 		ai_chance = {
 			base = 100
 			modifier = {
 				factor = 0.5
 				OR = {
 					has_trait = cynical
 					has_trait = trusting
 					has_trait = forgiving
 				}
 			}
 		}
 	}

 	#Ignore the rebels
 	option = {
 		name = lotr_thani_hazad.2003.b
 		custom_tooltip = lotr_tulwangi_rebellion_events_cause_strengthened_tt
		add_prestige = -250
 		scope:tulwangi_leader = {
 			add_prestige = medium_prestige_gain
 			add_pressed_claim = title:k_an_balkumagan
 			change_variable = {
 				name = tulwangi_rebellion_strength_score
 				add = 3
 			}
 		}
 		stress_impact = {
 			paranoid = minor_stress_impact_gain
 			just = minor_stress_impact_gain
 			zealous = medium_stress_impact_gain
 			trusting = minor_stress_impact_loss
 			forgiving = medium_stress_impact_loss
 			cynical = medium_stress_impact_loss
 		}
 		ai_chance = {
 			base = 100
 			modifier = {
 				factor = 0.5
 				OR = {
 					has_trait = paranoid
 					has_trait = just
 					has_trait = zealous
 				}
 			}
 		}
 	}
}

### Setup event to find the correct scope and check if the original upstart or the current tulwangi Leader is dead or imprisoned
lotr_thani_hazad.2005 = {
 	scope = none
 	hidden = yes
 	immediate = {
 		if = {
 			limit = {
 				scope:tulwangi_leader = {
 					OR = {
 						is_imprisoned = yes
 						is_alive = no
 						is_landed = yes
 					}
 				}
 			}
 			inherit_tulwangi_rebellion_effect = yes
 		}
 		title:c_rumyar.holder.top_liege = {
 			trigger_event = {
 				id = lotr_thani_hazad.2006
				days = { 150 180 }
 			}
 		}
 	}
}

### An envoy from the rebels ###
lotr_thani_hazad.2006 = {
	content_source = realms_dlc
 	type = character_event
 	theme = corruption
 	title = lotr_thani_hazad.2006.t
 	desc = {
 		desc = lotr_thani_hazad.2006.desc.a
 		triggered_desc = {
 			trigger = { scope:tulwangi_leader = { NOT =  { has_character_flag = new_tulwangi_leader } } }
 			desc = lotr_thani_hazad.2006.desc.b
 		}
 		desc = lotr_thani_hazad.2006.desc.c
 	}
 	left_portrait = {
 		character = root
 		animation = eyeroll
 	}
 	right_portrait = {
 		character = scope:outspoken_rebel
 		animation = worry
 	}
 	lower_left_portrait = {
 		trigger = { scope:tulwangi_leader = { NOT =  { has_character_flag = new_tulwangi_leader } } }
 		character = scope:tulwangi_leader
 	}

 	immediate = {
 		if = {
 			limit = { scope:tulwangi_leader = { NOT =  { has_character_flag = new_tulwangi_leader } } }
 			spawn_tulwangi_representative_character_effect = yes
 			scope:tulwangi_representative = { save_scope_as = outspoken_rebel }
 		}
 		else = {
 			scope:tulwangi_leader = { save_scope_as = outspoken_rebel }
 		}
 	}
	

 	#Make minor concessions to the tulwangi rebels
 	option = {
 		name = lotr_thani_hazad.2006.a

		add_prestige = -450
		every_vassal = {
			add_opinion = {
				modifier = angry_opinion
				opinion = -45
				target = root
			}
		}

 		scope:tulwangi_leader = {
 			change_variable = {
 				name =  tulwangi_rebellion_strength_score
 				add = 3
 			}
 		}
 		custom_tooltip = lotr_tulwangi_rebellion_events_cause_strengthened_tt
 		hidden_effect = {
 			title:c_rumyar.holder = {
 				if = {
 					limit = { NOT = { scope:tulwangi_leader = scope:outspoken_rebel }}
 					add_visiting_courtier = scope:tulwangi_leader
 				}
 				add_visiting_courtier = scope:outspoken_rebel
 			}
 		}

 		if = {
 			limit = {
 				NOT = { title:c_rumyar.holder = root }
 			}
 			progress_towards_rival_effect = {
 				REASON = lotr_tulwangi_rebellion_interfered_with_my_workers
 				CHARACTER = title:c_rumyar.holder
 				OPINION = default_rival_opinion
 			}
 		}

 		title:c_rumyar = {
 			add_county_modifier = {
 				modifier = lotr_tulwangi_rebellion_work_concessions_modifier
 				years = 5
 			}
 		}

		title:c_rumyar.holder.top_liege = {
 			trigger_event = {
 				id = lotr_thani_hazad.2007
				days = { 150 180 }
				
 			}
 		}

 		
 		stress_impact = {
 			compassionate = minor_stress_impact_loss
 			just = minor_stress_impact_loss
			forgiving = minor_stress_impact_loss
 			generous = minor_stress_impact_loss
 			content = minor_stress_impact_loss
 			callous = minor_stress_impact_gain
 			sadistic = medium_stress_impact_gain
 			ambitious = minor_stress_impact_gain
 			greedy = minor_stress_impact_gain
 		}
 		ai_chance = {
 			base = 100
 			modifier = {
 				factor = 0.5
				OR = {
 					has_trait = callous
 					has_trait = sadistic
 					has_trait = ambitious
 					has_trait = greedy
 				}
 			}
 		}
 	}

	# Ignore the rebels
 	option = {
 		name = lotr_thani_hazad.2006.b

 		scope:tulwangi_leader = {
 			change_variable = {
 				name = tulwangi_rebellion_strength_score
 				add = 5
 			}
 		}
 		custom_tooltip = lotr_tulwangi_rebellion_events_cause_greatly_strengthened_tt
 		hidden_effect = {
 			title:c_rumyar.holder = {
 				add_visiting_courtier = scope:tulwangi_leader
 				add_visiting_courtier = scope:tulwangi_representative
 			}
 		}
 		if = {
 			limit = {
 				NOT = { title:c_rumyar.holder = root  }
 			}
 			progress_towards_friend_effect = {
 				REASON = lotr_rival_stayed_out_of_my_business
 				CHARACTER = title:c_rumyar.holder
 				OPINION = default_friend_opinion
 			}
 		}

		title:c_ishiqal.holder.top_liege = {
 			trigger_event = {
 				id = lotr_thani_hazad.2007
				days = { 150 180 }
 			}
 		}
 		

 		stress_impact = {
 			compassionate = minor_stress_impact_gain
 			just = minor_stress_impact_gain
 			forgiving = minor_stress_impact_gain
 			generous = minor_stress_impact_gain
 			content = minor_stress_impact_gain
 			callous = minor_stress_impact_loss
 			sadistic = medium_stress_impact_loss
 			ambitious = minor_stress_impact_loss
 			greedy = minor_stress_impact_loss
 		}
 		ai_chance = {
 			base = 100
 			modifier = {
 				factor = 0.5
 				OR = {
 					has_trait = compassionate
 					has_trait = just
 					has_trait = forgiving
 					has_trait = generous
 				}
 			}
 		}
 	}

	# Traitors like you belong in my dungeon!
	option = {
		name = lotr_thani_hazad.2006.c
		imprison = {
			target = scope:outspoken_rebel
			type = dungeon
		}
		add_dread = medium_dread_gain
		add_tyranny = 50

		root = {
 			progress_towards_rival_effect = {
 				REASON = lotr_tulwangi_rebellion_opressed_me
 				CHARACTER = scope:tulwangi_leader
 				OPINION = default_rival_opinion
 			}
 		}
		title:c_ishiqal.holder.top_liege = {
 			trigger_event = {
 				id = lotr_thani_hazad.2007
				days = { 150 180 }
 			}
 		}

		scope:tulwangi_leader = {
 			change_variable = {
 				name =  tulwangi_rebellion_strength_score
 				add = 5
 			}
 		}

		stress_impact = {
 			compassionate = minor_stress_impact_gain
 			just = minor_stress_impact_gain
 			forgiving = minor_stress_impact_gain
 			generous = minor_stress_impact_gain
 			content = minor_stress_impact_gain
 			callous = minor_stress_impact_loss
 			sadistic = medium_stress_impact_loss
 			ambitious = minor_stress_impact_loss
 			greedy = minor_stress_impact_loss
 		}
		ai_chance = {
 			base = 100
 			modifier = {
 				factor = 0.5
 				OR = {
 					has_trait = compassionate
 					has_trait = just
 					has_trait = forgiving
 					has_trait = generous
 				}
 			}
 		}

	}
}

# Check if rebel leader is dead or imprisoned
lotr_thani_hazad.2007 = {
 	scope = none
 	hidden = yes
 	immediate = {
 		if = {
 			limit = {
 				scope:tulwangi_leader = {
 					OR = {
 						is_imprisoned = yes
 						is_alive = no
 						is_landed = yes
 					}
 				}
 			}
 			inherit_tulwangi_rebellion_effect = yes
 		}
 		title:c_ishiqal.holder.top_liege = {
 			trigger_event = {
 				id = lotr_thani_hazad.2008
				days = { 150 180 }
 			}
 		}
 	}
}

## Guards dead in Ishiqal ## 

lotr_thani_hazad.2008 = {
	content_source = realms_dlc
	type = character_event
	theme = realm
	override_background = {
		reference = wilderness
	}
	title = lotr_thani_hazad.2008.t
	desc = lotr_thani_hazad.2008.desc 

	left_portrait = {
		character = root
		animation = anger
	}

	right_portrait = {
		character = scope:tulwangi_leader
		animation = personality_bold
	}
	immediate = {
		scope:tulwangi_leader = {
			add_character_flag = tulwangi_leader_character
		}
	}
	option = { # Ignore the rebels
		name = lotr_thani_hazad.2008.a 
		custom_tooltip = lotr_thani_hazad.2008.a.tt
		add_prestige = -450
		every_vassal = {
			add_opinion = {
				modifier = annoyed_opinion
				opinion = -25
				target = root
			}
		}
		scope:tulwangi_leader = {
 			change_variable = {
 				name =  tulwangi_rebellion_strength_score
 				add = 5
 			}
 		}
		title:c_ishiqal.holder.top_liege = {
 			trigger_event = {
 				id = lotr_thani_hazad.2104
				days = { 150 180 }
 			}
 		}
		stress_impact = {
 			compassionate = minor_stress_impact_gain
 			just = minor_stress_impact_gain
 			forgiving = minor_stress_impact_gain
 			generous = minor_stress_impact_gain
 			content = minor_stress_impact_gain
 			callous = minor_stress_impact_loss
 			sadistic = medium_stress_impact_loss
 			ambitious = minor_stress_impact_loss
 			greedy = minor_stress_impact_loss
 		}
 		ai_chance = {
 			base = 100
 			modifier = {
 				factor = 0.5
 				OR = {
 					has_trait = compassionate
 					has_trait = just
 					has_trait = forgiving
 					has_trait = generous
 				}
 			}
 		}
		
	}

	option = { # Instigate Martial Law, and find him!
		name = lotr_thani_hazad.2008.b 
		custom_tooltip = lotr_thani_hazad.2008.b.tt
		title:c_ishiqal = {
 			add_county_modifier = {
 				modifier = lotr_tulwangi_rebellion_martial_law_modifier
 				years = 5
 			}
 		}
		
		title:c_ishiqal.holder.top_liege = {
 			trigger_event = {
 				id = lotr_thani_hazad.2009
				days = 35
 			}
 		}
		title:c_ishiqal.holder.top_liege = {
 			trigger_event = {
 				id = lotr_thani_hazad.2104
				days = 50
 			}
 		}

		stress_impact = {
 			compassionate = minor_stress_impact_gain
 			just = minor_stress_impact_gain
 			forgiving = minor_stress_impact_gain
 			generous = minor_stress_impact_gain
 			content = minor_stress_impact_gain
 			callous = minor_stress_impact_loss
 			sadistic = medium_stress_impact_loss
 			ambitious = minor_stress_impact_loss
 			greedy = minor_stress_impact_loss
 		}
		ai_chance = {
 			base = 100
 			modifier = {
 				factor = 0.5
 				OR = {
 					has_trait = compassionate
 					has_trait = just
 					has_trait = forgiving
 					has_trait = generous
 				}
 			}
 		}

	}
}

#### No luck in finding him 

lotr_thani_hazad.2009 = {
	content_source = realms_dlc
	type = character_event
	theme = realm
	title = lotr_thani_hazad.2009.t
	desc = lotr_thani_hazad.2009.desc 

	left_portrait = {
		character = root
		animation = rage
	}
	right_portrait = {
		character = title:c_ishiqal.holder
		animation = fear
	}
	
	option = { # Straight to Jail
		name = lotr_thani_hazad.2009.a
		if = {
			limit = {
				NOT = { title:c_ishiqal.holder = root }
			}
			imprison = {
				target = title:c_ishiqal.holder
				type = dungeon
			}
		}
		add_tyranny = 30
		add_dread = medium_dread_gain
		change_variable = {
 				name = tulwangi_rebellion_strength_score
 				add = 2
 			}

		stress_impact = {
 			compassionate = minor_stress_impact_gain
 			just = minor_stress_impact_gain
 			forgiving = minor_stress_impact_gain
 			generous = minor_stress_impact_gain
 			content = minor_stress_impact_gain
 			callous = minor_stress_impact_loss
 			sadistic = medium_stress_impact_loss
 			ambitious = minor_stress_impact_loss
 			greedy = minor_stress_impact_loss
 		}
		ai_chance = {
 			base = 100
 			modifier = {
 				factor = 0.5
 				OR = {
 					has_trait = compassionate
 					has_trait = just
 					has_trait = forgiving
 					has_trait = generous
 				}
 			}
 		}
	}

	option = { # I suppose there's not much we can do
		name = lotr_thani_hazad.2009.b
		change_variable = {
 				name = tulwangi_rebellion_strength_score
 				add = 2
 			}
		stress_impact = {
 			forgiving = minor_stress_impact_loss
 			generous = minor_stress_impact_loss
 			content = minor_stress_impact_loss
 			callous = minor_stress_impact_gain
 			sadistic = medium_stress_impact_gain
 			ambitious = minor_stress_impact_gain
 			greedy = minor_stress_impact_gain
 		}
		ai_chance = {
 			base = 100
 			modifier = {
 				factor = 0.5
 				OR = {
 					has_trait = wrathful
 					has_trait = sadistic
 					has_trait = arrogant
 					has_trait = vengeful
 				}
 			}
 		}
			
	}
}

# Check if rebel leader is dead or imprisoned
lotr_thani_hazad.2010 = {
 	scope = none
 	hidden = yes
 	immediate = {
		faith:faith_tulwang = { # make sure the rebel leader is the correct one and is scoped
			ordered_faith_character = {
				limit =  {
					has_character_flag = tulwangi_leader_character
				}
				save_scope_as = tulwangi_leader 
			}
		}
 		if = {
 			limit = {
 				scope:tulwangi_leader = {
 					OR = {
 						is_imprisoned = yes
 						is_alive = no
 						is_landed = yes
 					}
 				}
 			}
 			inherit_tulwangi_rebellion_effect = yes
 		}
 		title:c_ishiqal.holder.top_liege = {
 			trigger_event = {
 				id = lotr_thani_hazad.2011
				days = 90 # Wait a little while, so ideally the stormhost is sending its troops into bellakar and gets hit unprepared
 			}
 		}
 	}
}

### The uprising begins
lotr_thani_hazad.2011 = {
	content_source = realms_dlc
 	type = character_event
 	theme = battle
 	override_background = { reference = wilderness_wetlands }
 	title = lotr_thani_hazad.2011.t
 	desc = lotr_thani_hazad.2011.desc 
 	left_portrait = {
 		character = root
 		animation = shock
 	}
 	right_portrait = {
 		character = scope:tulwangi_leader
 		animation = celebrate_sword
 	}
 	immediate = {

 		# scope:tulwangi_leader = {
		# 	# give_nickname = nick_chief_of_the_tulwangi ~~ Aerien note: not needed
 		# 	hidden_effect = {
 		# 		random_owned_story = {
 		# 			limit = {
 		# 				story_type = story_tulwangi_rebellion
 		# 			}
 		# 			end_story = yes
 		# 		}
 		# 	}
 		# }
		hidden_effect = {
 			lotr_start_tulwangi_rebellion_effect = {
 				TARGET_COUNTY = title:c_rumyar
 				REBEL_LEADER = scope:tulwangi_leader
 			}
 			create_tulwangi_courtier_effect = {
 				EMPLOYER = scope:tulwangi_leader
 				LOCATION = scope:tulwangi_leader.location
 			}
 			create_tulwangi_courtier_effect = {
 				EMPLOYER = scope:tulwangi_leader
 				LOCATION = scope:tulwangi_leader.location
 			}
 			create_tulwangi_courtier_effect = {
 				EMPLOYER = scope:tulwangi_leader
 				LOCATION = scope:tulwangi_leader.location
 			}
 			create_tulwangi_courtier_effect = {
 				EMPLOYER = scope:tulwangi_leader
 				LOCATION = scope:tulwangi_leader.location
 			}
 		}
 	}

 	option = {
		name = lotr_thani_hazad.2011.a
		if = {
			limit = {
				title:c_rumyar.holder.top_liege = {
					has_character_flag = nykkea_army_sent_flag
				}
			}
			spawn_army = {
				name = tulwangi_uprising_corsair_troops
				levies = 400	
				men_at_arms = {
					type = light_footmen
					stacks = 8
				}
				location = capital_province
				uses_supply = no
				#origin = 			
			}
		}
 	}
}

### BACKUP War event ###
# In case the first war doesn't fire correctly #

lotr_thani_hazad.2020 = {
	hidden = yes
 	immediate = {
		hidden_effect = {
 			lotr_start_tulwangi_rebellion_effect = {
 				TARGET_COUNTY = title:c_rumyar
 				REBEL_LEADER = scope:tulwangi_leader
 			}
 			create_tulwangi_courtier_effect = {
 				EMPLOYER = scope:tulwangi_leader
 				LOCATION = scope:tulwangi_leader.location
 			}
 			create_tulwangi_courtier_effect = {
 				EMPLOYER = scope:tulwangi_leader
 				LOCATION = scope:tulwangi_leader.location
 			}
 			create_tulwangi_courtier_effect = {
 				EMPLOYER = scope:tulwangi_leader
 				LOCATION = scope:tulwangi_leader.location
 			}
 			create_tulwangi_courtier_effect = {
 				EMPLOYER = scope:tulwangi_leader
 				LOCATION = scope:tulwangi_leader.location
 			}
 		}
 	}
}

### Proxy War Events  ###
### Ray ###
lotr_thani_hazad.2100 = { # Ray's event - what to send?
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.2100.t
	desc = lotr_thani_hazad.2100.desc
	theme = war
	left_portrait = {
		character = root
		animation = personality_cynical
	}
	right_portrait = {
		character = scope:tulwangi_leader
		animation = personality_bold
	}
	
	option = { # Some Gold
		name = lotr_thani_hazad.2100.a
		remove_short_term_gold = 200
		scope:tulwangi_leader = { 
			trigger_event = lotr_thani_hazad.2101
		}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 25
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 35
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	option = { # Lots of Gold
		name = lotr_thani_hazad.2100.b
		remove_short_term_gold = 500
		scope:tulwangi_leader = { 
			trigger_event = lotr_thani_hazad.2102
		}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 25
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 35
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	option = { # Nothing
		name = lotr_thani_hazad.2100.c
		ai_chance = {
			base = 0
			modifier = {
				has_game_rule = default_ai_behavior
				add = 10 
			}
			modifier = {
				has_game_rule = weighted_ai_behavior 
				add = 25 
			}
			modifier = {
				has_game_rule = random_ai_behavior 
				add = 50
			}
		}
	}
}

lotr_thani_hazad.2101 = { # Ray sends small sum 
	content_source = realms_dlc
	type = character_event 
	title = lotr_thani_hazad.2101.t 
	desc = lotr_thani_hazad.2101.desc 
	theme = war 
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = title:k_ray.holder
		animation = personality_compassionate
	}
	option = {
		name = lotr_thani_hazad.2101.a
		add_gold = 250
		title:k_ray.holder = {
			add_hook = {
				target = root
				type = favor_hook
			}
		}
	}
	option = { # Nothing
		name = lotr_thani_hazad.2101.b
		ai_chance = {
			base = 0
		}
		hidden_effect = {
			title:k_ray.holder = {
				add_gold = 250
			}
		}
	}
}

lotr_thani_hazad.2102 = { # Ray sends large sum
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.2102.t
	desc = lotr_thani_hazad.2102.desc
	theme = war
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = title:k_ray.holder
		animation = personality_compassionate
	}
	
	option = {
		name = lotr_thani_hazad.2102.a
		add_gold = 500
		title:k_ray.holder = {
			add_hook = {
				target = root
				type = favor_hook
			}
		}
	}
	option = { # Nothing
		name = lotr_thani_hazad.2102.b
		hidden_effect = {
			title:k_ray.holder = {
				add_gold = 500
			}
		}
		ai_chance = {
			base = 0
		}
	}
}

### Sauron ###

lotr_thani_hazad.2104 = { # Sauron chastizes the Storm-King
	content_source = realms_dlc 
	type = character_event 
	title = lotr_thani_hazad.2104.t 
	desc = lotr_thani_hazad.2104.desc
	theme = realm 
	left_portrait = {
		character = root 
		animation = shame 
	}
	right_portrait = {
		character = title:e_mordor.holder 
		animation = disapproval
	}

	option = {
		name = lotr_thani_hazad.2104.a 
		add_prestige = -250 
		stress_impact = {
			base = minor_stress_impact_gain
			arrogant = medium_stress_impact_gain
		}
	}
}

#### Nykkea ###

lotr_thani_hazad.2105 = { # Nykkea's event - an opportunity?
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.2105.t
	desc = lotr_thani_hazad.2105.desc
	theme = war
	left_portrait = {
		character = root
		animation = schadenfreude
	}
	right_portrait = {
		character = title:e_thon_an_kharlokh.holder
		animation = personality_bold
	}
	
	option = { # Corsairs for money
		name = lotr_thani_hazad.2105.a
		add_gold = 350
		title:e_thon_an_kharlokh.holder = { #Spawn a few troops for rebels
			trigger_event = lotr_thani_hazad.2106
		}
		add_character_modifier = {
			modifier = lotr_tulwangi_rebellion_offered_mercenary_troops_modifier
			years = 20
		}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 66
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 60
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
	option = { # Nothing
		name = lotr_thani_hazad.2105.b
		ai_chance = {
			base = 0
		}
	}
}

lotr_thani_hazad.2106 = { #Nykkea offers mercenaries 
	content_source = realms_dlc 
	type = character_event 
	title = lotr_thani_hazad.2106.t
	desc = lotr_thani_hazad.2106.desc 
	theme = war 
	
	left_portrait = {
		character = root 
		animation = disapproval
	}
	right_portrait = {
		character = title:d_nykkea.holder
		animation = schadenfreude
	}

	option = { #I'll pay
		name = lotr_thani_hazad.2106.a 
		custom_tooltip = lotr_thani_hazad.2106.tt
		remove_short_term_gold = 350 
		title:d_nykkea.holder = {
			add_gold = 350 
		}
		add_character_flag = {
			flag = nykkea_army_sent_flag
		}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 20
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 33
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}

	}
	
	option = { # No thanks
		name = lotr_thani_hazad.2106.b 
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 20
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 33
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
}


### Rebel aligned proxy events ###

lotr_thani_hazad.2107 = { # Bellakar's event - what to send?
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.2107.t
	desc = lotr_thani_hazad.2107.desc
	theme = war
	left_portrait = {
		character = root
		animation = personality_cynical
	}
	right_portrait = {
		character = scope:tulwangi_leader
		animation = personality_bold
	}
	
	option = { # Some Gold
		name = lotr_thani_hazad.2107.a
		remove_short_term_gold = 200
		scope:tulwangi_leader = { #Spawn a few troops for reformists
			trigger_event = lotr_thani_hazad.2108
		}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 15
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 25
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	option = { # Lots of Gold
		name = lotr_thani_hazad.2107.b
		remove_short_term_gold = 500
		scope:tulwangi_leader = { #Spawn many troops for reformists
			trigger_event = lotr_thani_hazad.2109
		}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 20
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 25
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	option = { # Nothing
		name = lotr_thani_hazad.2107.c
		ai_chance = {
			base = 0
			modifier = {
				has_game_rule = default_ai_behavior
				add = 90 
			}
			modifier = {
				has_game_rule = weighted_ai_behavior 
				add = 25 
			}
			modifier = {
				has_game_rule = random_ai_behavior 
				add = 50
			}
		}
	}
} 

lotr_thani_hazad.2108 = { # Bellakar sends small sum
	content_source = realms_dlc
	type = character_event 
	title = lotr_thani_hazad.2108.t 
	desc = lotr_thani_hazad.2108.desc 
	theme = war 
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = title:e_bellakar.holder 
		animation = personality_compassionate
	}
	option = {
		name = lotr_thani_hazad.2108.a
		add_gold = 200
		title:e_bellakar.holder = {
			add_hook = {
				target = root
				type = favor_hook
			}
		}
	}
	option = { # Nothing
		name = lotr_thani_hazad.2108.b
		ai_chance = {
			base = 0
		}
		hidden_effect = {
			title:e_bellakar.holder = {
				add_gold = 500
			}
		}
	}
}

lotr_thani_hazad.2109 = { # Bellakar sends large sum
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.2109.t
	desc = lotr_thani_hazad.2109.desc
	theme = war
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = title:e_bellakar.holder
		animation = personality_compassionate
	}
	
	option = {
		name = lotr_thani_hazad.2109.a
		add_gold = 500
		title:e_bellakar.holder = {
			add_hook = {
				target = root
				type = favor_hook
			}
		}
	}
	option = { # Nothing
		name = lotr_thani_hazad.2109.b
		hidden_effect = {
			title:e_bellakar.holder = {
				add_gold = 500
			}
		}
		ai_chance = {
			base = 0
		}
	}
}

### Felaya ### 

lotr_thani_hazad.2110 = { # Felaya's - what to send?
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.2110.t
	desc = lotr_thani_hazad.2110.desc
	theme = war
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:tulwangi_leader
		animation = personality_bold
	}
	
	option = { # Small Army
		name = lotr_thani_hazad.2110.a
		remove_short_term_gold = 300
		scope:tulwangi_leader = { #Spawn a few troops for reformists
			trigger_event = lotr_thani_hazad.2111
		}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 10
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 20
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 33
			}
		}
	}
	option = { # Large Army
		name = lotr_thani_hazad.2110.b
		remove_short_term_gold = 500
		scope:tulwangi_leader = { #Spawn many troops for reformists
			trigger_event = lotr_thani_hazad.2112
		}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 50
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 33
			}
		}
	}
	
	option = { # Nothing
		name = lotr_thani_hazad.2110.c
		ai_chance = {
			base = 0
		}
	}
}

lotr_thani_hazad.2111 = { # Felaya sends small army
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.2111.t
	desc = lotr_thani_hazad.2111.desc
	theme = war
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = title:k_felaya.holder
		animation = personality_compassionate
	}
	
	option = {
		name = lotr_thani_hazad.2111.a
		add_gold = 300
		title:k_felaya.holder = {
			add_hook = {
				target = root
				type = favor_hook
			}
		}
	}
	option = { # Nothing
		name = lotr_thani_hazad.2111.b
		ai_chance = {
			base = 0
		}
	}
}

lotr_thani_hazad.2112 = { # Felaya sends large army
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.2112.t
	desc = lotr_thani_hazad.2112.desc
	theme = war
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = title:k_felaya.holder
		animation = personality_compassionate
	}
	
	option = {
		name = lotr_thani_hazad.2112.a
		add_gold = 500
		title:k_felaya.holder = {
			add_hook = {
				target = root
				type = favor_hook
			}
		}
	}
	option = { # Nothing
		name = lotr_thani_hazad.2112.b
		ai_chance = {
			base = 0
		}
	}
}

### Holzoreth ###

lotr_thani_hazad.2113 = { #Holzoreth's event
	content_source = realms_dlc 
	type = character_event
	title = lotr_thani_hazad.2113.t 
	desc = lotr_thani_hazad.2113.desc 
	theme = war
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:tulwangi_leader
		animation = personality_bold
	}

	option = { # Small Army
		name = lotr_thani_hazad.2113.a
		remove_short_term_gold = 100
		scope:tulwangi_leader = { #Spawn a few troops for reformists
			trigger_event = lotr_thani_hazad.2114
		}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 10
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 20
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 33
			}
		}
	}
	option = { # Large Army
		name = lotr_thani_hazad.2113.b
		remove_short_term_gold = 300
		scope:tulwangi_leader = { #Spawn many troops for reformists
			trigger_event = lotr_thani_hazad.2115
		}
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 50
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 33
			}
		}
	}
	option = { # Nothing
		name = lotr_thani_hazad.2113.c
		ai_chance = {
			base = 0
			modifier = {
				has_game_rule = default_ai_behavior
				add = 15 
			}
			modifier = {
				has_game_rule = weighted_ai_behavior 
				add = 25 
			}
			modifier = {
				has_game_rule = random_ai_behavior 
				add = 50
			}
		}
	}
}

lotr_thani_hazad.2114 = { # Holzoreth sends small army 
	content_source = realms_dlc
	type = character_event 
	title = lotr_thani_hazad.2114.t 
	desc = lotr_thani_hazad.2114.desc 
	theme = war 
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = title:d_holzoreth.holder
		animation = personality_compassionate
	}
	option = {
		name = lotr_thani_hazad.2114.a
		add_gold = 100
		title:d_holzoreth.holder = {
			add_hook = {
				target = root
				type = favor_hook
			}
		}
	}
	option = { # Nothing
		name = lotr_thani_hazad.2114.b
		ai_chance = {
			base = 0
		}
	}
}

lotr_thani_hazad.2115 = { # Holzoreth sends large army
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.2115.t
	desc = lotr_thani_hazad.2115.desc
	theme = war
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = title:d_holzoreth.holder
		animation = personality_compassionate
	}
	
	option = {
		name = lotr_thani_hazad.2115.a
		add_gold = 300
		title:d_holzoreth.holder = {
			add_hook = {
				target = root
				type = favor_hook
			}
		}
	}
	option = { # Nothing
		name = lotr_thani_hazad.2115.b
		ai_chance = {
			base = 0
		}
	}
}

### Event for Tuladen vassals ###
lotr_thani_hazad.2116 = {
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.2116.t
	desc = lotr_thani_hazad.2116.desc
	theme = war
	left_portrait = {
		character = root
		animation = personality_bold
	}
	immediate = {
		faith:faith_tulwang = { # make sure the rebel leader is the correct one and is scoped
			ordered_faith_character = {
				limit =  {
					has_character_flag = tulwangi_leader_character
				}
				save_scope_as = tulwangi_leader 
			}
		}
 	}

	option = { # Accept
		name = lotr_thani_hazad.2116.a 

		scope:tulwangi_leader = {
			random_character_war = {
				limit = { using_cb = lotr_tulwangi_rebellion_war }
				add_attacker = root
			}
		}

		ai_chance = {
			base = 1
		}
	}

	option = { # Refuse
		name = lotr_thani_hazad.2116.b 
		
		ai_chance = {
			base = 0
		}
	}

}

### Tulwangi Rebellion Ending Events ###

lotr_thani_hazad.2120 = { # The Fate of the Natives
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.2120.t 
	desc = lotr_thani_hazad.2120.desc 
	theme = dread 
	override_background = {
		reference = burning_building
	}
	left_portrait = {
		character = root 
		animation = marshal
	}

	option = { # Kill, Pillage, Loot
		name = lotr_thani_hazad.2120.a 
		custom_tooltip = lotr_thani_hazad.2120.a.tt
		add_gold = 550
		hidden_effect = {
			every_sub_realm_county = {
				limit = {
					duchy = title:d_bishra
					tier = tier_county
				}
				if = {
					limit = {
						NOT = { culture = root.culture }
					}
					add_county_modifier = {
						modifier = lotr_tulwangi_rebellion_pillaged_modifier
						years = 25
					}
				}
			}
		}
		stress_impact = {
 			compassionate = major_stress_impact_gain
 			just = major_stress_impact_gain
 			forgiving = major_stress_impact_gain
 			generous = minor_stress_impact_gain
 			content = minor_stress_impact_gain
 			callous = minor_stress_impact_loss
 			sadistic = major_stress_impact_loss
 			ambitious = minor_stress_impact_loss
 			greedy = minor_stress_impact_loss
			wrathful = major_stress_impact_loss
 		}
		ai_chance = {
 			base = 100
 			modifier = {
 				factor = 0.5
 				OR = {
 					has_trait = compassionate
 					has_trait = just
 					has_trait = forgiving
 					has_trait = generous
 				}
 			}
 		}
	}

	option = { # Enslave them all
		name = lotr_thani_hazad.2120.b 
		custom_tooltip = lotr_thani_hazad.2120.b.tt
		add_character_modifier = {
			modifier = lotr_tulwangi_rebellion_tulwangi_slaves_modifier
		}
		hidden_effect = {
			every_sub_realm_county = {
				limit = {
					duchy = title:d_bishra
					tier = tier_county
				}
				if = {
					limit = {
						NOT = { culture = root.culture }
					}
					add_county_modifier = {
						modifier = lotr_tulwangi_rebellion_pillaged_modifier
						years = 25
					}
				}
			}
		}
		stress_impact = {
 			compassionate = major_stress_impact_gain
 			just = minor_stress_impact_gain
 			forgiving = major_stress_impact_gain
 			generous = minor_stress_impact_gain
 			content = minor_stress_impact_gain
 			callous = minor_stress_impact_loss
 			sadistic = medium_stress_impact_loss
 			ambitious = minor_stress_impact_loss
 			greedy = minor_stress_impact_loss
			wrathful = major_stress_impact_loss
 		}
		ai_chance = {
 			base = 100
 			modifier = {
 				factor = 0.5
 				OR = {
 					has_trait = compassionate
 					has_trait = just
 					has_trait = forgiving
 					has_trait = generous
 				}
 			}
 		}
	}

	option = { # Only slightly pillage
		name = lotr_thani_hazad.2120.c 
		custom_tooltip = lotr_thani_hazad.2120.c.tt
		hidden_effect = {
			every_sub_realm_county = {
				limit = {
					duchy = title:d_bishra
					tier = tier_county
				}
				if = {
					limit = {
						NOT = { culture = root.culture }
					}
					add_county_modifier = {
						modifier = lotr_tulwangi_rebellion_slightly_pillaged_modifier
						years = 25
					}
				}
			}
		}
		stress_impact = {
 			compassionate = minor_stress_impact_loss
 			just = minor_stress_impact_loss
			forgiving = minor_stress_impact_loss
 			generous = minor_stress_impact_loss
 			content = minor_stress_impact_loss
 			callous = minor_stress_impact_gain
 			sadistic = medium_stress_impact_gain
 			ambitious = minor_stress_impact_gain
 			greedy = minor_stress_impact_gain
 		}
 		ai_chance = {
 			base = 100
 			modifier = {
 				factor = 0.5
				OR = {
 					has_trait = callous
 					has_trait = sadistic
					has_trait = wrathful
 					has_trait = ambitious
 					has_trait = greedy
 				}
 			}
 		}
	}
}

#########################################
##### Imrazôr & Arimîth event chain #####
############# by Aerien #################

lotr_thani_hazad.3000 = { # Do I still want to get married to him/her?
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3000.t  
	theme = lover_relation
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { has_title = title:d_karasalas }
				}
				desc = lotr_thani_hazad.3000.desc_arimith
			}
			desc = lotr_thani_hazad.3000.desc_imrazor
		}
	}
	left_portrait = {
		character = scope:imrazor
		animation = flirtation_left
	}
	right_portrait = {
		character = scope:arimith
		animation = admiration
	}
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
	}
	option = { # Yes, I will convince the other princes to allow this match!
		name = lotr_thani_hazad.3000.a
		if = {
			limit = {
				root = { has_title = title:d_karasalas } 
			}
			scope:imrazor = {
				add_opinion = {
					modifier = pleased_opinion
					opinion = 50
					target = root
				}
			}
		}
		else = {
			scope:arimith = {
				add_opinion = {
					modifier = pleased_opinion
					opinion = 50
					target = root
				}
			}
		}
		trigger_event = {
			id = lotr_thani_hazad.3002
			days = 5
		}
		add_character_flag = imrazor_chain_participant
		
	}
	option = { # No, I don't really love him/her anymore...
		name = lotr_thani_hazad.3000.b
		if = {
			limit = {
				root = { has_title = title:d_karasalas }
			}
			scope:imrazor = {
				add_opinion = {
					modifier = angry_opinion
					opinion = -50
					target = root
				}
			}

		}
		else = {
			scope:arimith = {
				add_opinion = {
					modifier = angry_opinion
					opinion = -50
					target = root
				}
			}
		
		}
		trigger_event = { # We're going separate ways from now on...
			id = lotr_thani_hazad.3001
			days = 5
		}
		
		ai_chance = {
			base = 0
		}
	}
	
	option = { # AI player ignores the event chain if another player is doing it
		trigger = {
			root = { is_ai = yes }
			OR = {
				AND = {
					root = { has_title = title:d_karasalas }
					scope:imrazor = { is_ai = no }
				}
				AND = {
					root = { has_title = title:d_alsarias }
					scope:arimith = { is_ai = no }
				}
			}
		}
		ai_chance = {
			base = 100
		}
		add_prestige = 50
	}
	
	option = { # If both are AI, only Imrazor does the event chain
		trigger = {
			root = { is_ai = yes }
			scope:imrazor = { is_ai = yes }
			root = { has_title = title:d_karasalas }
		}
		add_prestige = 50
		ai_chance = {
			base = 100
		}
	}
}

lotr_thani_hazad.3001 = { # Separate ways
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3001.t  
	theme = realm
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { has_title = title:d_karasalas }
				}
				desc = lotr_thani_hazad.3001.desc_arimith
			}
			desc = lotr_thani_hazad.3001.desc_imrazor
		}
	}
	left_portrait = {
		character = scope:imrazor
		animation = worry
	}
	right_portrait = {
		character = scope:arimith
		animation = disapproval
	}
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
		remove_cannot_marry_imrazor_arimith = yes
	}
	option = { # We will always be lovers 
		name = lotr_thani_hazad.3001.a
		if = {
			limit = {
				has_title = title:d_karasalas
			}
			scope:imrazor = {
				add_opinion = {
					modifier = pleased_opinion
					opinion = 50
					target = root
				}
			}
		}
		else = {
			scope:arimith = {
				add_opinion = {
					modifier = pleased_opinion
					opinion = 50
					target = root
				}
			}
		}
		hidden_effect = {
			title:d_alsarias.holder = {
				add_truce_both_ways = { 
					character = title:d_karasalas.holder
					years = 1
					name = TRUCE_TRADE_DEAL
				}
			}			
		}
	}
	option = { #It's over. Get over it!
		name = lotr_thani_hazad.3001.b
		scope:imrazor = {
			remove_relation_soulmate = scope:arimith
			remove_relation_lover = scope:arimith
		}
	}
}


lotr_thani_hazad.3002 = { # Decide when to start your visit tour of the princes
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3002.t  
	theme = alliance
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { has_title = title:d_karasalas }
				}
				desc = lotr_thani_hazad.3002.desc_arimith
			}
			desc = lotr_thani_hazad.3002.desc_imrazor
		}
	}
	left_portrait = {
		character = scope:imrazor
		animation = personality_compassionate
	}
	right_portrait = {
		character = scope:arimith
		animation = happiness
	}
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
		character:lineofgimilthani48 = { save_scope_as = phorakon }
		hidden_effect = {
			title:d_alsarias.holder = {
				add_truce_both_ways = { 
					character = title:d_karasalas.holder
					years = 5
					name = TRUCE_TRADE_DEAL
				}
			}
			scope:phorakon = { # Make him live just a bit longer
				add_character_modifier = {
					modifier = uncanny_health_lotr_modifier
					years = 3
				}
			}
		}
		hidden_effect = { #give free caravan master
			if = {
				limit = { NOT = { employs_court_position = travel_leader_court_position } }
				create_character = {
					template = foreign_architect_template
					employer = root
					save_scope_as = caravan_master
				}
				appoint_court_position = {
					recipient = scope:caravan_master
					court_position = travel_leader_court_position
				}
			}
		}
	}
	option = { # we'll start our journey now
		name = lotr_thani_hazad.3002.a
		add_prestige = 50
		set_variable = cannot_cancel_travel		
		add_character_flag = { # Make temporarily immune to disease
			flag = immune_to_disease
			years = 3
		}
		start_travel_plan = { #Travel to Phôrakon and Karaag
			destination = title:c_uruloni.title_province
			destination = title:c_azarideth.title_province
			on_arrival_on_action = imrazor_firsttrip_on_action
			return_trip = no
			players_use_planner = no
			on_arrival_destinations = all
		}
		ai_chance = {
			base = 100
		}
		
	}
	option = { # No, not yet...
		name = lotr_thani_hazad.3002.b
		trigger_event = {
			id = lotr_thani_hazad.3002
			days = { 60 90 }
		}
	}	
}

lotr_thani_hazad.3003 = { # Arrive at Phôrakon's court
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3003.t  
	theme = friendly
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { has_title = title:d_karasalas }
				}
				desc = lotr_thani_hazad.3003.desc_arimith
			}
			desc = lotr_thani_hazad.3003.desc_imrazor
		}
	}
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:phorakon
		animation = personality_compassionate
	}
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
		character:lineofgimilthani48 = { save_scope_as = phorakon }
	}
	option = { # He's given us his blessing! Awesome!
		name = lotr_thani_hazad.3003.a 
		add_prestige = 50
	}
}

lotr_thani_hazad.3103 = { # Phôrakon says no
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3103.t  
	theme = secret
	desc = lotr_thani_hazad.3103.desc
	left_portrait = {
		character = root
		animation = shock
	}
	right_portrait = {
		character = scope:phorakon
		animation = dismissal
	}
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
		character:lineofgimilthani48 = { save_scope_as = phorakon }
	}
	option = { #Nothing to be done
		name = lotr_thani_hazad.3103.a 
		custom_tooltip = lotr_thani_hazad.3103.a.tt
	}
}

lotr_thani_hazad.3004 = { # Arrive at Karaag's court
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3004.t  
	theme = friendly
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { has_title = title:d_karasalas }
				}
				desc = lotr_thani_hazad.3004.desc_arimith
			}
			desc = lotr_thani_hazad.3004.desc_imrazor
		}
	}
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	right_portrait = {
		character = scope:karaag
		animation = personality_content
	}
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
		character:lineazariroth75 = { save_scope_as = karaag }
		create_character = {
			template = foreign_architect_template
			employer = scope:karaag
			save_scope_as = trade_dispute_merchant
		}
	}
	option = { # Just bribe the merchants
		name = lotr_thani_hazad.3004.a 
		remove_short_term_gold = 50
		trigger_event = lotr_thani_hazad.3005
	}
	option = { # attempt to persuade them
		name = lotr_thani_hazad.3004.b 
		duel = {
 			skill = diplomacy
 			target = scope:trade_dispute_merchant
 			50 = {
				# You're successful
 				desc = lotr_thani_hazad.3004.a.success
 				compare_modifier = {
 					value = scope:duel_value
 					multiplier = 3.5
 					min = -49
 				}
 				send_interface_toast = {
 					title = lotr_thani_hazad.3004.a.success
 					left_icon = root
 					right_icon = scope:trade_dispute_merchant
 				}
 				trigger_event = lotr_thani_hazad.3005
				add_diplomacy_lifestyle_xp = medium_lifestyle_xp
 			}
 			50 = {
 				# You fail, gotta bribe them after all
 				desc = lotr_thani_hazad.3004.a.failure
 				compare_modifier = {
 					value = scope:duel_value
 					multiplier = -3.5
 					min = -49
 				}
 				send_interface_toast = {
 					title = lotr_thani_hazad.3004.a.failure
 					left_icon = root
 					right_icon = scope:trade_dispute_merchant
 				}
				remove_short_term_gold = 100
				trigger_event = lotr_thani_hazad.3005
 			}
 		}
	}
}

lotr_thani_hazad.3104 = { # Karaag refuses to meet with you 
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3104.t  
	theme = secret
	desc = lotr_thani_hazad.3104.desc
	left_portrait = {
		character = root
		animation = anger
	}
	right_portrait = {
		character = scope:karaag
		animation = dismissal
	}
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
		character:lineazariroth75 = { save_scope_as = karaag }
	}
	option = { #We must hope he doesn't participate in the next meeting of the princes
		name = lotr_thani_hazad.3104.a 
		custom_tooltip = lotr_thani_hazad.3104.a.tt
		trigger_event = lotr_thani_hazad.3114
	}
}

lotr_thani_hazad.3114 = { # Karaag refuses to meet with you - decide what to do next
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3114.t  
	theme = secret
	desc = lotr_thani_hazad.3114.desc
	left_portrait = {
		character = scope:imrazor
		animation = personality_rational
	}
	right_portrait = {
		character = scope:arimith
		animation = worry
	}
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
	}
	option = { # We must continue our journey.
		name = lotr_thani_hazad.3114.a 
		add_prestige = 50
		set_variable = cannot_cancel_travel
		start_travel_plan = { #Travel to Arzathroc
			destination = title:c_inzilloni.title_province
			destination = title:c_holzoreth.title_province
			on_arrival_on_action = imrazor_secondtrip_on_action
			return_trip = no
			players_use_planner = no
			on_arrival_destinations = all
		}
		ai_chance = {
			base = 100
		}
	}
	option = { # No, the others can wait for now - I've gotta go home!
		name = lotr_thani_hazad.3114.b 
		custom_tooltip = lotr_thani_hazad.3114.b.tt
		trigger_event = {
			id = lotr_thani_hazad.3006
			days = 180
		}
	}
}

lotr_thani_hazad.3005 = { # Completed Karaag's task
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3005.t  
	theme = friendly
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { has_title = title:d_karasalas }
				}
				desc = lotr_thani_hazad.3005.desc_arimith
			}
			desc = lotr_thani_hazad.3005.desc_imrazor
		}
	}
	left_portrait = {
		character = root
		animation = chancellor
	}
	right_portrait = {
		character = scope:karaag
		animation = personality_content
	}
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
		character:lineazariroth75 = { save_scope_as = karaag }
		hidden_effect = { #give free caravan master
			if = {
				limit = { NOT = { employs_court_position = travel_leader_court_position } }
				create_character = {
					template = foreign_architect_template
					employer = root
					save_scope_as = caravan_master
				}
				appoint_court_position = {
					recipient = scope:caravan_master
					court_position = travel_leader_court_position
				}
			}
		}
	}
	option = { # We did it! On to the next prince.
		name = lotr_thani_hazad.3005.a 
		add_prestige = 50
		set_variable = cannot_cancel_travel
		start_travel_plan = { #Travel to Arzathroc
			destination = title:c_inzilloni.title_province
			destination = title:c_holzoreth.title_province
			on_arrival_on_action = imrazor_secondtrip_on_action
			#on_arrival_event = lotr_thani_hazad.3007
			return_trip = no
			players_use_planner = no
			on_arrival_destinations = all
		}
		ai_chance = {
			base = 100
		}
	}
	option = { # No, the others can wait for now - I've gotta go home!
		name = lotr_thani_hazad.3005.b 
		custom_tooltip = lotr_thani_hazad.3005.b.tt
		trigger_event = {
			id = lotr_thani_hazad.3006
			days = 180
		}
	}
}

lotr_thani_hazad.3006 = { # After taking a break, is it time to continue the tour?
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3006.t  
	theme = alliance
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { has_title = title:d_karasalas }
				}
				desc = lotr_thani_hazad.3006.desc_arimith
			}
			desc = lotr_thani_hazad.3006.desc_imrazor
		}
	}
	left_portrait = {
		character = scope:imrazor
		animation = personality_compassionate
	}
	right_portrait = {
		character = scope:arimith
		animation = happiness
	}
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
		remove_variable = cannot_cancel_travel
		hidden_effect = {
			title:d_alsarias.holder = {
				add_truce_both_ways = { 
					character = title:d_karasalas.holder
					years = 5
					name = TRUCE_TRADE_DEAL
				}
			}
		}
		hidden_effect = { #give free caravan master
			if = {
				limit = { NOT = { employs_court_position = travel_leader_court_position } }
				create_character = {
					template = foreign_architect_template
					employer = root
					save_scope_as = caravan_master
				}
				appoint_court_position = {
					recipient = scope:caravan_master
					court_position = travel_leader_court_position
				}
			}
		}
	}
	option = { # we'll start our journey now
		name = lotr_thani_hazad.3006.a
		add_prestige = 50
		set_variable = cannot_cancel_travel
		start_travel_plan = { #Travel to Arzathroc
			destination = title:c_inzilloni.title_province
			destination = title:c_holzoreth.title_province
			on_arrival_on_action = imrazor_secondtrip_on_action
			#on_arrival_event = lotr_thani_hazad.3007
			return_trip = no
			players_use_planner = no
			on_arrival_destinations = all
		}
		
	}
	option = { # No, not yet...
		name = lotr_thani_hazad.3006.b
		trigger_event = {
			id = lotr_thani_hazad.3006
			days = { 60 90 }
		}
	}	
}
	
lotr_thani_hazad.3007 = { # Arrive at Arthazroc's court
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3007.t  
	theme = dread
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { has_title = title:d_karasalas }
				}
				desc = lotr_thani_hazad.3007.desc_arimith
			}
			desc = lotr_thani_hazad.3007.desc_imrazor
		}
	}
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	right_portrait = {
		character = scope:arzathroc
		animation = personality_cynical
	}
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
		character:lineofinzilloni43 = { save_scope_as = arzathroc }
	}	
	option = { # We owe him big time...
		name = lotr_thani_hazad.3007.a 
		scope:arzathroc = {
			add_hook = {
				target = root
				type = indebted_hook
			}
		}

	}
	option = { # Buy his vote
		name = lotr_thani_hazad.3007.b 
		remove_short_term_gold = 120
	}
}

lotr_thani_hazad.3107 = { # Arthazroc refuses your request
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3107.t  
	theme = secret
	desc = lotr_thani_hazad.3107.desc
	left_portrait = {
		character = root
		animation = worry
	}
	right_portrait = {
		character = scope:arzathroc
		animation = dismissal
	}
	immediate = {
		character:lineofinzilloni43 = { save_scope_as = arzathroc }
	}
	option = { #We've no choice but to press on
		name = lotr_thani_hazad.3107.a 
		custom_tooltip = lotr_thani_hazad.3107.a.tt
	}
}

lotr_thani_hazad.3008 = { # Arrive at Daroc's court
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3008.t  
	theme = martial
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { has_title = title:d_karasalas }
				}
				desc = lotr_thani_hazad.3008.desc_arimith
			}
			desc = lotr_thani_hazad.3008.desc_imrazor
		}
	}
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	right_portrait = {
		character = scope:daroc
		animation = marshal
	}
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
		character:linehammerdelgeneral50 = { save_scope_as = daroc }
	}
	option = { # Give him soldiers
		name = lotr_thani_hazad.3008.a 
		custom_tooltip = lotr_thani_hazad.3008.a.tt
		add_character_modifier = {
				modifier = sent_soldiers_to_holzoreth
				years = 5
			}
		scope:daroc = { 
			add_character_modifier = {
				modifier = holzoreth_border_bolstered
				years = 5
			}
		}
		trigger_event = lotr_thani_hazad.3009
	}
	option = { # Promise payment of his soldiers
		name = lotr_thani_hazad.3008.b
		custom_tooltip = lotr_thani_hazad.3008.b.tt
		add_character_modifier = {
				modifier = paying_soldiers_of_holzoreth
				years = 5
			}
		scope:daroc = { 
			add_character_modifier = {
				modifier = holzoreth_soldiers_paid
				years = 5
			}
		}
		trigger_event = lotr_thani_hazad.3009
	}
}

lotr_thani_hazad.3009 = { # Decide to go home or continue the trip
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3009.t  
	theme = friendly
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { has_title = title:d_karasalas }
				}
				desc = lotr_thani_hazad.3009.desc_arimith
			}
			desc = lotr_thani_hazad.3009.desc_imrazor
		}
	}
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:daroc
		animation = personality_content
	}
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
		character:linehammerdelgeneral50 = { save_scope_as = daroc }
		hidden_effect = { #give free caravan master
			if = {
				limit = { NOT = { employs_court_position = travel_leader_court_position } }
				create_character = {
					template = foreign_architect_template
					employer = root
					save_scope_as = caravan_master
				}
				appoint_court_position = {
					recipient = scope:caravan_master
					court_position = travel_leader_court_position
				}
			}
		}
	}
	option = { # Continue the travels and go to Derei
		name = lotr_thani_hazad.3009.a 
		add_prestige = 50
		set_variable = cannot_cancel_travel
		start_travel_plan = { #Travel to Derei
			destination = title:c_gimileth.title_province
			on_arrival_on_action = imrazor_thirdtrip_on_action
			#event = lotr_thani_hazad.3011
			return_trip = no
			players_use_planner = no
			on_arrival_destinations = all
		}
	}
	option = { # No, the others can wait for now - I've gotta go home!
		name = lotr_thani_hazad.3009.b 
		custom_tooltip = lotr_thani_hazad.3009.b.tt
		trigger_event = {
			id = lotr_thani_hazad.3010
			days = 240
		}
	}
}

lotr_thani_hazad.3010 = { # After taking a break, is it time to continue the tour?
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3010.t  
	theme = alliance
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { has_title = title:d_karasalas }
				}
				desc = lotr_thani_hazad.3010.desc_arimith
			}
			desc = lotr_thani_hazad.3010.desc_imrazor
		}
	}
	left_portrait = {
		character = scope:imrazor
		animation = personality_compassionate
	}
	right_portrait = {
		character = scope:arimith
		animation = happiness
	}
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
		remove_variable = cannot_cancel_travel
		hidden_effect = {
			title:d_alsarias.holder = {
				add_truce_both_ways = { 
					character = title:d_karasalas.holder
					years = 5
					name = TRUCE_TRADE_DEAL
				}
			}
		}
		hidden_effect = { #give free caravan master
			if = {
				limit = { NOT = { employs_court_position = travel_leader_court_position } }
				create_character = {
					template = foreign_architect_template
					employer = root
					save_scope_as = caravan_master
				}
				appoint_court_position = {
					recipient = scope:caravan_master
					court_position = travel_leader_court_position
				}
			}
		}
	}
	option = { # We'll continue our journey now
		name = lotr_thani_hazad.3010.a
		add_prestige = 50
		set_variable = cannot_cancel_travel
		start_travel_plan = { #Travel to Derei
			destination = title:c_gimileth.title_province
			on_arrival_on_action = imrazor_thirdtrip_on_action
			#event = lotr_thani_hazad.3011
			return_trip = no
			players_use_planner = no
			on_arrival_destinations = all
		}
		
	}
	option = { # No, not yet...
		name = lotr_thani_hazad.3010.b
		trigger_event = {
			id = lotr_thani_hazad.3010
			days = { 60 90 }
		}
	}	
}

lotr_thani_hazad.3011 = { # Arrive at Derei's court
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3011.t  
	theme = friendly
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { has_title = title:d_karasalas }
				}
				desc = lotr_thani_hazad.3011.desc_arimith
			}
			desc = lotr_thani_hazad.3011.desc_imrazor
		}
	}
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	right_portrait = {
		character = scope:derei
		animation = toast
	}
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
		character:lineofgimilethtwo107 = { save_scope_as = derei }
		hidden_effect = { #give free caravan master
			if = {
				limit = { NOT = { employs_court_position = travel_leader_court_position } }
				create_character = {
					template = foreign_architect_template
					employer = root
					save_scope_as = caravan_master
				}
				appoint_court_position = {
					recipient = scope:caravan_master
					court_position = travel_leader_court_position
				}
			}
		}
	}
	option = { # He is indecisive, we must find a way to convince him
		name = lotr_thani_hazad.3011.a 
		custom_tooltip = lotr_thani_hazad.3011.tt
		trigger_event = lotr_thani_hazad.3012 # Terilaen butts in
	}
}

lotr_thani_hazad.3012 = { # Terilaen shows up unexpected
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3012.t  
	theme = friendly
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { has_title = title:d_karasalas }
				}
				desc = lotr_thani_hazad.3012.desc_arimith
			}
			desc = lotr_thani_hazad.3012.desc_imrazor
		}
	}
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	right_portrait = {
		character = scope:terilaen
		animation = admiration
	}
	lower_center_portrait = {
		character = scope:derei
	}
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
		character:lineofgimilethtwo107 = { save_scope_as = derei }
		character:lineterilaen3 = { save_scope_as = terilaen }
		hidden_effect = { #give free caravan master
			if = {
				limit = { NOT = { employs_court_position = travel_leader_court_position } }
				create_character = {
					template = foreign_architect_template
					employer = root
					save_scope_as = caravan_master
				}
				appoint_court_position = {
					recipient = scope:caravan_master
					court_position = travel_leader_court_position
				}
			}
		}
	}
	option = { # Time to return home for now
		name = lotr_thani_hazad.3012.a 
		add_prestige = 50
		
		start_travel_plan = { #Travel home
			destination = root.capital_county.title_province
			on_arrival_on_action = imrazor_fourthtrip_on_action
			return_trip = no
			players_use_planner = no
			on_arrival_destinations = all
		}
	}
}

lotr_thani_hazad.3013 = { # Check if Seregul is alive
	hidden = yes
	immediate = {
		character:lineofagathohin173 = { save_scope_as = seregul }
		if = {
			limit = {
				scope:seregul = {
					is_alive = yes
				}
			}
			trigger_event = lotr_thani_hazad.3014 #Decide how to deal with Seregul
		}
		else = {
			trigger_event = lotr_thani_hazad.3015 #Decide if we want to visit the last prince
		}
	}
}

lotr_thani_hazad.3014 = { # After arriving home, we gotta think about Seregul
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3014.t  
	theme = intrigue
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { has_title = title:d_karasalas }
				}
				desc = lotr_thani_hazad.3014.desc_arimith
			}
			desc = lotr_thani_hazad.3014.desc_imrazor
		}
	}
	left_portrait = {
		character = scope:imrazor
		animation = personality_rational
	}
	right_portrait = {
		character = scope:arimith
		animation = personality_cynical
	}
	lower_center_portrait = {
		character = scope:seregul
	}
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
		character:lineofagathohin173 = { save_scope_as = seregul }
		character:lineofagathohin196 = { save_scope_as = seregulwife }
		character:lineofinigi9 = { save_scope_as = seregulvassal1 }
		character:lineofjinibi11 = { save_scope_as = seregulvassal2 } 
		remove_variable = cannot_cancel_travel
	}
	option = { # He must be removed from power - Abduct scheme
		name = lotr_thani_hazad.3014.a 
		add_prestige = -100
		add_piety = -150
		start_scheme = {
			type = abduct
			target = scope:seregul
		}
		every_scheme = {
			limit = {
				scheme_type = abduct
			}
			save_scope_as = scheme
			add_scheme_modifier = {
				type = extra_success_chance_modifier
			}
			scope:seregulwife = {
				force_add_to_scheme = {
					scheme = scope:scheme
					years = 5
				}
			}
			scope:seregulvassal1 = {
				force_add_to_scheme = {
					scheme = scope:scheme
					years = 5
				}
			}
			scope:seregulvassal2 = {
				force_add_to_scheme = {
					scheme = scope:scheme
					years = 5
				}
			}
			add_scheme_progress = 25
		}

		add_character_flag = abduct_seregul
	}
	option = { # Ignore Seregul, surely he'll be outvoted
		name = lotr_thani_hazad.3014.b 
		add_piety = 150
		add_prestige = 100
		trigger_event = {
			id = lotr_thani_hazad.3020 # The great council
			days = 120
		}
	}
}

lotr_thani_hazad.3015 = { # Consider if we want to visit Seregul's successor
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3015.t  
	theme = alliance
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { has_title = title:d_karasalas }
				}
				desc = lotr_thani_hazad.3015.desc_arimith
			}
			desc = lotr_thani_hazad.3015.desc_imrazor
		}
	}
	left_portrait = {
		character = scope:imrazor
		animation = personality_rational
	}
	right_portrait = {
		character = scope:arimith
		animation = personality_cynical
	}
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
		title:k_pel.holder = { save_scope_as = seregulsuccessor }
	}
	option = { # We should visit him/her
		name = lotr_thani_hazad.3015.a 
		hidden_effect = { #give free caravan master
			if = {
				limit = { NOT = { employs_court_position = travel_leader_court_position } }
				create_character = {
					template = foreign_architect_template
					employer = root
					save_scope_as = caravan_master
				}
				appoint_court_position = {
					recipient = scope:caravan_master
					court_position = travel_leader_court_position
				}
			}
		}
		start_travel_plan = { #Travel to Arpel
			destination = title:c_arpel.title_province
			on_arrival_on_action = imrazor_fifthtrip_on_action
			return_trip = no
			players_use_planner = no
			on_arrival_destinations = all
		}
	}
	option = { # No, we don't need to rely on their vote
		name = lotr_thani_hazad.3015.b 
		custom_tooltip = lotr_thani_hazad.3015.b.tt
		trigger_event = {
			id = lotr_thani_hazad.3020 # The great council
			days = 60
		}
	}
}

lotr_thani_hazad.3016 = { # Seregul was successfully abducted
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3016.t  
	theme = abduct_scheme
	desc = lotr_thani_hazad.3016.desc
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = scope:seregul
		animation = rage
	}
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
		character:lineofagathohin173 = { save_scope_as = seregul }
		imprison = {
			target = scope:seregul
			type = house_arrest
		}
		add_intrigue_lifestyle_xp = 500
	}
	option = { # He remains imprisoned until after we're married
		name = lotr_thani_hazad.3016.a
		add_piety = -50
		trigger_event = {
			id = lotr_thani_hazad.3020 # The great council
			days = 30
		}
		remove_character_flag = abduct_seregul
		add_character_flag = imprisoned_seregul
	}
	option = { # Let him go if he swears to vote yes
		name = lotr_thani_hazad.3016.b 
		add_piety = 50
		add_hook = {
		  	target = scope:seregul
		  	type = favor_hook
		}
		scope:seregul = {
			release_from_prison = yes
		}
		trigger_event = {
			id = lotr_thani_hazad.3020 # The great council
			days = 60
		}
		custom_tooltip = lotr_thani_hazad.3016.b.tt
	}
}

lotr_thani_hazad.3017 = { # Abduct scheme failed
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3017.t  
	theme = abduct_scheme
	desc = lotr_thani_hazad.3017.desc
	left_portrait = {
		character = root
		animation = worry
	}
	right_portrait = {
		character = scope:seregul
		animation = rage
	}
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
		character:lineofagathohin173 = { save_scope_as = seregul }
		scope:seregul = {
			add_opinion = {
				modifier = angry_opinion
				opinion = -100
				target = root
			}
		}
	}
	option = { # Nothing to be done about that now...
		name = lotr_thani_hazad.3017.a 
		custom_tooltip = lotr_thani_hazad.3017.a.tt
		remove_character_flag = abduct_seregul
		trigger_event = {
			id = lotr_thani_hazad.3020
			days = 30
		}
	}
}

lotr_thani_hazad.3018 = { # Visiting Seregul's successor
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3018.t  
	theme = diplomacy
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { has_title = title:d_karasalas }
				}
				desc = lotr_thani_hazad.3018.desc_arimith
			}
			desc = lotr_thani_hazad.3018.desc_imrazor
		}
	}
	left_portrait = {
		character = root
		animation = worry
	}
	right_portrait = {
		character = scope:seregul
		animation = rage
	}
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
		title:k_pel.holder = { save_scope_as = seregulsuccessor }
	}
	option = { # Bribe him/her
		name = lotr_thani_hazad.3018.a 
		remove_short_term_gold = 75
		trigger_event = { # The great council
			id = lotr_thani_hazad.3020
			days = 140 
		}
	}
	option = { # Offer a hook
		name = lotr_thani_hazad.3018.b 
		scope:seregulsuccessor = {
			add_hook = {
				type = favor_hook
				target = root
			}
		}
		trigger_event = { # The great council
			id = lotr_thani_hazad.3020
			days = 140 
		}
	}
}
		
lotr_thani_hazad.3020 = { # The great council
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3020.t  
	theme = marriage
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { has_character_flag = abduct_seregul }
				}
				desc = lotr_thani_hazad.3020.desc_seregul
				trigger = {
					root = { has_character_flag = imprisoned_seregul }
				}
				desc = lotr_thani_hazad.3020.desc_seregul_rots
			}
			desc = lotr_thani_hazad.3020.desc
		}
	}	
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:balan_lai_leader
		animation = chancellor
	}
	lower_left_portrait = { character = scope:balan_lai_member_1 }
	lower_center_portrait = { character = scope:balan_lai_member_2 }
	lower_right_portrait = { character = scope:balan_lai_member_3 }
	
	immediate = {
		title:d_balan_lai_leader.holder = { save_scope_as = balan_lai_leader }
		title:d_holzoreth.holder = { save_scope_as = balan_lai_member_1 }
		title:d_gimileth.holder = { save_scope_as = balan_lai_member_2 }
		title:d_rotharana.holder = { save_scope_as = balan_lai_member_3 }
		remove_character_flag = cannot_cancel_travel
		remove_cannot_marry_imrazor_arimith = yes 
	}
	option = { # Time to get married - Imrazôr edition
		name = lotr_thani_hazad.3020.a
		trigger = { 
			root = { has_title = title:d_alsarias }
		}
		
		if = {
			limit = {
				has_dlc_feature = tours_and_tournaments
				has_dlc_feature = advanced_activities
			}
			 
			add_character_flag = aragorn_gw
			
			#Setting up the betrothal
			create_betrothal = character:lineofkrassabarohin103
			set_grand_wedding_betrothal_variables = {
				SPOUSE_1 = root
				SPOUSE_2 = character:lineofkrassabarohin103
				HOST = root
				PROMISEE = scope:balan_lai_leader
			}
			
			#Opening the Grand Wedding window
			if = {
				limit = { is_ai = no }
				open_view_data = {
					view = activity_list_detail_host_window
					data = activity_type:activity_wedding
				}
			}
			
		}
		else = {
			marry = character:lineofkrassabarohin103
			set_relation_friend = character:lineofkrassabarohin103
		}
		
		trigger_event = {
			id = lotr_thani_hazad.3021
			years = 1
		}
	}
	
	option = { # Time to get married - Arimîth edition
		name = lotr_thani_hazad.3020.a
		trigger = { 
			root = { has_title = title:d_karasalas }
		}
		
		if = {
			limit = {
				has_dlc_feature = tours_and_tournaments
				has_dlc_feature = advanced_activities
			}
			
			add_character_flag = aragorn_gw
			
			#Setting up the betrothal
			create_betrothal_matrilineal  = character:linealsariastwo37
			set_grand_wedding_betrothal_variables = {
				SPOUSE_1 = root
				SPOUSE_2 = character:linealsariastwo37
				HOST = root
				PROMISEE = scope:balan_lai_leader
			}
			
			#Opening the Grand Wedding window
			if = {
				limit = { is_ai = no }
				open_view_data = {
					view = activity_list_detail_host_window
					data = activity_type:activity_wedding
				}
			}
			
		}
		else = {
			marry_matrilineal = character:linealsariastwo37
			set_relation_friend = character:linealsariastwo37
		}
		
		trigger_event = {
			id = lotr_thani_hazad.3021
			years = 1
		}
	}
}

lotr_thani_hazad.3021 = { # Give them an heir ~ End of the event chain
	hidden = yes
	immediate = {
		character:lineofkrassabarohin103 = { save_scope_as = arimith }
		character:linealsariastwo37 = { save_scope_as = imrazor }
		scope:arimith = {
			make_pregnant = { father = scope:imrazor number_of_children = 2 }
			set_pregnancy_gender = male
		}
		remove_character_flag = aragorn_gw
		remove_character_flag = cannot_cancel_travel
		remove_trait = fornicator
	}
}

#### Visiting the Princes - Reaction Events ####

lotr_thani_hazad.3030 = { # Reaction event for Phôrakôn
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3030.t  
	theme = alliance
	desc = lotr_thani_hazad.3030.desc
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:chain_participant
		animation = personality_compassionate
	}
	immediate = {
		character:linealsariastwo37 = { save_scope_as = imrazor }
		every_balan_lai_member = { 
			limit = {
				has_character_flag = imrazor_chain_participant
			}
			save_scope_as = chain_participant 
		}
	}
	option = { # Go in peace, son
		name = lotr_thani_hazad.3030.a 
		add_prestige = 150
		custom_tooltip = lotr_thani_hazad.3030.a.tt
		ai_chance = {
			base = 100
		} # Canon route
		scope:chain_participant = { trigger_event = lotr_thani_hazad.3003 }
	}
	option = { # No way
		name = lotr_thani_hazad.3030.b 
		add_prestige = -150
		custom_tooltip = lotr_thani_hazad.3030.b.tt
		scope:chain_participant = { trigger_event = lotr_thani_hazad.3103 }
	}
}

lotr_thani_hazad.3031 = { # Reaction event for Karaag
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3031.t  
	theme = alliance
	desc = lotr_thani_hazad.3031.desc
	left_portrait = {
		character = root
		animation = personality_cynical
	}
	right_portrait = {
		character = scope:chain_participant
		animation = personality_compassionate
	}
	immediate = {
		every_balan_lai_member = { 
			limit = {
				has_character_flag = imrazor_chain_participant
			}
			save_scope_as = chain_participant 
		}
	}
	option = { # Make them solve a trade dispute
		name = lotr_thani_hazad.3031.a 
		add_prestige = 150
		custom_tooltip = lotr_thani_hazad.3031.a.tt
		ai_chance = {
			base = 100
		} # Canon route
		scope:chain_participant = { trigger_event = lotr_thani_hazad.3004 }
	}
	option = { # Refuse to receive them
		name = lotr_thani_hazad.3031.b 
		add_prestige = -150
		custom_tooltip = lotr_thani_hazad.3031.b.tt
		scope:chain_participant = { trigger_event = lotr_thani_hazad.3104 }
	}
}

lotr_thani_hazad.3032 = { # Reaction event for Arthazroc
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.3032.t  
	theme = alliance
	desc = lotr_thani_hazad.3032.desc
	left_portrait = {
		character = root
		animation = personality_rational
	}
	right_portrait = {
		character = scope:chain_participant
		animation = personality_compassionate
	}
	immediate = {
		every_balan_lai_member = { 
			limit = {
				has_character_flag = imrazor_chain_participant
			}
			save_scope_as = chain_participant 
		}
	}
	option = { # Get them to pay you or owe a favour
		name = lotr_thani_hazad.3032.a 
		add_prestige = 150
		custom_tooltip = lotr_thani_hazad.3032.a.tt
		ai_chance = {
			base = 100
		} # Canon route
		scope:chain_participant = { trigger_event = lotr_thani_hazad.3007 }
	}
	option = { # Refuse their request
		name = lotr_thani_hazad.3032.b 
		add_prestige = -150
		custom_tooltip = lotr_thani_hazad.3032.b.tt
		scope:chain_participant = { trigger_event = lotr_thani_hazad.3107 }
	}
}
		
##### Seregul Event Chain #####

# Opening Event

# Choose vengence 

# Who to target first?

lotr_thani_hazad.5000 = {
	content_source = realms_dlc
	type = character_event
	theme = realm
	title = lotr_thani_hazad.5000.t
	desc = lotr_thani_hazad.5000.desc
	orphan = yes

	left_portrait = {
		character = root
		animation = dismissal
	}
	right_portrait = {
		character = character:lineofzuberi7
		animation = personality_bold
	}

	option = { # Focus South
		name = lotr_thani_hazad.5000.a
		add_character_modifier = {	#Some scheme bonuses for going southward
			modifier = seregul_focusing_south_modifier
			years = 2
		}
		trigger_event = {
			id = lotr_thani_hazad.5100
		   days = 30 
		}
	}

	option = { # East
		name = lotr_thani_hazad.5000.b
		add_character_modifier = {	#Mill buff
			modifier = seregul_focusing_east_modifier
			years = 2
		}
		trigger_event = {
			id = lotr_thani_hazad.5200
		   days = 30 
		}
	}

	option = { #West
		name = lotr_thani_hazad.5000.c
		add_character_modifier = {	#In realm diplo bonus
			modifier = seregul_focusing_west_modifier
			years = 2
		}
		trigger_event = {
			id = lotr_thani_hazad.5300
		   days = 30 
		}
	}

	option = { #Everything 
		name = lotr_thani_hazad.5000.d
		add_character_modifier = {	#Overextension modifeier
			modifier = seregul_focusing_everywhere_modifier
			years = 4
		}
		trigger_event = {
			id = lotr_thani_hazad.5100
			days = 15 
		}
		trigger_event = {
			id = lotr_thani_hazad.5200
			days = 30 
		}
		trigger_event = {
			id = lotr_thani_hazad.5300
			days = 45 
		}
	}
}

#Focus South 
lotr_thani_hazad.5100 = { #The Fate of the Mayor 
	content_source = realms_dlc
	type = character_event
	theme = rival_relation
	title = lotr_thani_hazad.5100.t
	desc = lotr_thani_hazad.5100.desc
	orphan = yes
	
	left_portrait = {
		character = root
		animation = eyeroll
	}
	right_portrait = {
		character = character:lineofzuberi7
		animation = personality_bold
	}
   
	option = { #Murder
		name = lotr_thani_hazad.5100.a 
		start_scheme = {
			target = character:lineofzuberi7
			type = murder
		}
	}

	option = { #Depose
		name = lotr_thani_hazad.5100.b 
		start_scheme = { #Placeholder until I can get my hands on RtP's schemes. For now, just vassalize him
			target = character:lineofzuberi7
			type = fabricate_hook
		}
	}

	option = { #Who needs subletly? War! (Annoys vassals)
		name = lotr_thani_hazad.5100.c
		start_war = {
			casus_belli = duchy_conquest_cb
			target = character:lineofzuberi7
			target_title = title:d_barasi
		}
		#vassal_opinion = -10 # Annoys vassals
	}

	
	
}

lotr_thani_hazad.5101 = { #The Fate of your wife
	content_source = realms_dlc
	type = character_event
	theme = bastardy
	title = lotr_thani_hazad.5101.t
	desc = lotr_thani_hazad.5101.desc
	orphan = yes

	left_portrait = {
		character = root
		animation = disgust
	}
	right_portrait = {
		character = character:lineofagathohin196
		animation = fear
	}
	lower_right_portrait = {
		character = character:lineofzuberi7
		animation =	flirtation
	}
   
	option = { #Imprision
		name = lotr_thani_hazad.5101.a 
		imprison = { 
			target = character:lineofagathohin196
			type = house_arrest
		}
	}
	option = { #Murder
		name = lotr_thani_hazad.5101.b 
		start_scheme = {
			target = character:lineofagathohin196
			type = murder
		}
		# vassal_opinon = -10
	}
	option = { #Ignore 
		name = lotr_thani_hazad.5101.c
		reverse_add_opinion = {
			target = character:lineofagathohin196
			modifier = grateful_opinion
			opinion = 15
			}
	}

}

lotr_thani_hazad.5102 = { #The Fate of the child 
	content_source = realms_dlc
	type = character_event
	theme = bastadry
	title = lotr_thani_hazad.5102.t
	desc = lotr_thani_hazad.5102.desc
	orphan = yes

	left_portrait = {
		character = root
		animation = disgust
	}
	right_portrait = {
		character = character:lineofagathohin209
		animation = fear
	}
	lower_right_portrait = {
		character = character:lineofzuberi7
		animation =	flirtation
	}
	lower_center_portrait = {
		character = character:lineofagathohin196
		animation =	flirtation
	}

	immediate = {
		
	}

	option = { #Imprision
		name = lotr_thani_hazad.5102.a 
		imprison = { 
			target = character:lineofagathohin209
			type = house_arrest
		}
		character:lineofagathohin209 = {
			add_pressed_claim = title:k_pel
			add_pressed_claim = title:d_pel
			add_pressed_claim = title:c_arpel
			add_pressed_claim = title:d_barasi
			add_pressed_claim = title:c_shalala	
		}
	}
	option = { #Murder
		name = lotr_thani_hazad.5102.b 
		start_scheme = {
			target = character:lineofagathohin209
			type = murder
		}
		character:lineofagathohin209 = {
			add_pressed_claim = title:k_pel
			add_pressed_claim = title:d_pel
			add_pressed_claim = title:c_arpel
			add_pressed_claim = title:d_barasi
			add_pressed_claim = title:c_shalala	
		}
		# vassal_opinon = -10
	}
	option = { #Legitimize
		name = lotr_thani_hazad.5102.c
		legitimize_bastard_interaction_opinions_effect = {
			BASTARD = character:lineofagathohin209
			HOUSE_HEAD = root
			LEGITIMIZER = root
		}

		if = { # Move the child to the legitimizer's court if relevant
			limit = {
				character:lineofagathohin209 ?= {
					NOT = { is_in_the_same_court_as_or_guest = root }
				}
				exists = court_owner
			}
			if = {
				limit = {
					character:lineofagathohin209 ?= {
						NOT = { is_courtier_of = ROOT } # Check that char is not already at your court (theoretical fix)
					}
					OR = {
						this = court_owner
						is_courtier_of = court_owner
					}
				}
				add_courtier = character:lineofagathohin209
			}
			else = {
				character:lineofagathohin209 ?= { visit_court_of = root.court_owner }
			}
		}
		character:lineofagathohin209 = {
			add_pressed_claim = title:k_pel
			add_pressed_claim = title:d_pel
			add_pressed_claim = title:c_arpel
			add_pressed_claim = title:d_barasi
			add_pressed_claim = title:c_shalala	
		}
	}
	trigger_event = {
		id = lotr_thani_hazad.5103
		days = 30 
	}
}

lotr_thani_hazad.5103 = { #How to deal with the city? 
	content_source = realms_dlc
	type = character_event
	theme = diplomacy_foreign_affairs_focus
	title = lotr_thani_hazad.5103.t
	desc = lotr_thani_hazad.5103.desc
	orphan = yes

	left_portrait = {
		character = root
		animation = personality_callous
	}
	right_portrait = {
		character = title:d_barasi.holder
		animation = worry
	}

	immediate = {
		
	}
   
	option = { #War
		name = lotr_thani_hazad.5103.a 
		start_war = {
			casus_belli = duchy_conquest_cb
			target = character:lineofzuberi7
			target_title = title:d_barasi
		}
		# reverse_add_opinion = {
		# 	target = character:lineofagathohin196
		# 	modifier = grateful_opinion
		# 	opinion = 15
		# 	} # Annoys vassals
	}

	option = { #Economic Strangle
		name = lotr_thani_hazad.5103.b 
		title:c_shalala = {
			add_county_modifier = {
				modifier = seregul_strangled_trade_modifier
				years = 5
			}
		}
	}
	
}

lotr_thani_hazad.5104 = { #What to do with the defeated? 
	content_source = realms_dlc
	type = character_event
	theme = corruption
	title = lotr_thani_hazad.5104.t
	desc = lotr_thani_hazad.5104.desc
	orphan = yes
	left_portrait = {
		character = root
		animation = celebrate_dagger
	}
	right_portrait = {
		character = title:d_barasi.holder
		animation = beg
	}

	immediate = {
		
	}
   
	option = { #I shall rule it!
		name = lotr_thani_hazad.5104.a
		# You keep in current state
	}

	option = { #I shall raze it
		name = lotr_thani_hazad.5104.b
		# Make into castle, you hold, hit buildings

	}
	option = { #I shall integrate it
		name = lotr_thani_hazad.5104.c 
		# Oligarch, vassals grumpy

	}
	option = { #I shall endure it
		name = lotr_thani_hazad.5104.d 
		# Leave as city 

	}
}

lotr_thani_hazad.5105 = { #What about the Druedain?
	content_source = realms_dlc
	type = character_event
	theme = corruption
	title = lotr_thani_hazad.5105.t
	desc = {
		desc = lotr_thani_hazad.5105.desc.a
		triggered_desc = {
			trigger = { scope:tulwangi_leader = { NOT =  { has_character_flag = new_tulwangi_leader } } }
			desc = lotr_thani_hazad.5105.desc.b
		}
		desc = lotr_thani_hazad.5105.desc.c
	}
	orphan = yes
	left_portrait = {
		character = root
		animation = eyeroll
	}
	right_portrait = {
		character = scope:outspoken_rebel
		animation = worry
	}
	lower_left_portrait = {
		trigger = { scope:tulwangi_leader = { NOT =  { has_character_flag = new_tulwangi_leader } } }
		character = scope:tulwangi_leader
	}

	immediate = {
		
	}
   
	option = { #Make minor concessions to the tulwangi rebels
		name = lotr_thani_hazad.5105.a 

	}
}

## Focus East
lotr_thani_hazad.5200 = { # Bandits and Magri
	content_source = realms_dlc
	type = character_event
	theme = corruption
	title = lotr_thani_hazad.5200.t
	desc = {
		desc = lotr_thani_hazad.5200.desc.a
		triggered_desc = {
			trigger = { scope:tulwangi_leader = { NOT =  { has_character_flag = new_tulwangi_leader } } }
			desc = lotr_thani_hazad.5200.desc.b
		}
		desc = lotr_thani_hazad.5200.desc.c
	}
	orphan = yes
	left_portrait = {
		character = root
		animation = eyeroll
	}
	right_portrait = {
		character = scope:outspoken_rebel
		animation = worry
	}
	lower_left_portrait = {
		trigger = { scope:tulwangi_leader = { NOT =  { has_character_flag = new_tulwangi_leader } } }
		character = scope:tulwangi_leader
	}

	immediate = {
		
	}
   
	option = { #Make minor concessions to the tulwangi rebels
		name = lotr_thani_hazad.5200.a 

	}
	
}

lotr_thani_hazad.5201 = { # How to Pacify the Bandits? 
	content_source = realms_dlc
	type = character_event
	theme = corruption
	title = lotr_thani_hazad.5201.t
	desc = {
		desc = lotr_thani_hazad.5201.desc.a
		triggered_desc = {
			trigger = { scope:tulwangi_leader = { NOT =  { has_character_flag = new_tulwangi_leader } } }
			desc = lotr_thani_hazad.5201.desc.b
		}
		desc = lotr_thani_hazad.5201.desc.c
	}
	orphan = yes
	left_portrait = {
		character = root
		animation = eyeroll
	}
	right_portrait = {
		character = scope:outspoken_rebel
		animation = worry
	}
	lower_left_portrait = {
		trigger = { scope:tulwangi_leader = { NOT =  { has_character_flag = new_tulwangi_leader } } }
		character = scope:tulwangi_leader
	}

	immediate = {
		
	}
   
	option = { #Make minor concessions to the tulwangi rebels
		name = lotr_thani_hazad.5201.a 

	}
	
}


lotr_thani_hazad.5202 = { # How to tackle the Mag? 
	content_source = realms_dlc
	type = character_event
	theme = corruption
	title = lotr_thani_hazad.5202.t
	desc = {
		desc = lotr_thani_hazad.5202.desc.a
		triggered_desc = {
			trigger = { scope:tulwangi_leader = { NOT =  { has_character_flag = new_tulwangi_leader } } }
			desc = lotr_thani_hazad.5202.desc.b
		}
		desc = lotr_thani_hazad.5202.desc.c
	}
	orphan = yes
	left_portrait = {
		character = root
		animation = eyeroll
	}
	right_portrait = {
		character = scope:outspoken_rebel
		animation = worry
	}
	lower_left_portrait = {
		trigger = { scope:tulwangi_leader = { NOT =  { has_character_flag = new_tulwangi_leader } } }
		character = scope:tulwangi_leader
	}

	immediate = {
		
	}
   
	option = { #Make minor concessions to the tulwangi rebels
		name = lotr_thani_hazad.5202.a 

	}
	
}

# Focus West
lotr_thani_hazad.5300 = { #Internal issues 
	content_source = realms_dlc
	type = character_event
	theme = corruption
	title = lotr_thani_hazad.5300.t
	desc = {
		desc = lotr_thani_hazad.5300.desc.a
		triggered_desc = {
			trigger = { scope:tulwangi_leader = { NOT =  { has_character_flag = new_tulwangi_leader } } }
			desc = lotr_thani_hazad.5300.desc.b
		}
		desc = lotr_thani_hazad.5300.desc.c
	}
	orphan = yes
	left_portrait = {
		character = root
		animation = eyeroll
	}
	right_portrait = {
		character = scope:outspoken_rebel
		animation = worry
	}
	lower_left_portrait = {
		trigger = { scope:tulwangi_leader = { NOT =  { has_character_flag = new_tulwangi_leader } } }
		character = scope:tulwangi_leader
	}

	immediate = {
		
	}
   
	option = { #Make minor concessions to the tulwangi rebels
		name = lotr_thani_hazad.5300.a 

	}
	
}

lotr_thani_hazad.5301 = { # Rallied for War 
	content_source = realms_dlc
	type = character_event
	theme = corruption
	title = lotr_thani_hazad.2006.t
	desc = {
		desc = lotr_thani_hazad.2006.desc.a
		triggered_desc = {
			trigger = { scope:tulwangi_leader = { NOT =  { has_character_flag = new_tulwangi_leader } } }
			desc = lotr_thani_hazad.2006.desc.b
		}
		desc = lotr_thani_hazad.2006.desc.c
	}
	orphan = yes
	left_portrait = {
		character = root
		animation = eyeroll
	}
	right_portrait = {
		character = scope:outspoken_rebel
		animation = worry
	}
	lower_left_portrait = {
		trigger = { scope:tulwangi_leader = { NOT =  { has_character_flag = new_tulwangi_leader } } }
		character = scope:tulwangi_leader
	}

	immediate = {
		
	}
   
	option = { #Make minor concessions to the tulwangi rebels
		name = lotr_thani_hazad.2006.a 

	}
}

lotr_thani_hazad.5302 = { # The issue of the Cuind 
	content_source = realms_dlc
	type = character_event
	theme = corruption
	title = lotr_thani_hazad.2006.t
	desc = {
		desc = lotr_thani_hazad.2006.desc.a
		triggered_desc = {
			trigger = { scope:tulwangi_leader = { NOT =  { has_character_flag = new_tulwangi_leader } } }
			desc = lotr_thani_hazad.2006.desc.b
		}
		desc = lotr_thani_hazad.2006.desc.c
	}
	orphan = yes
	left_portrait = {
		character = root
		animation = eyeroll
	}
	right_portrait = {
		character = scope:outspoken_rebel
		animation = worry
	}
	lower_left_portrait = {
		trigger = { scope:tulwangi_leader = { NOT =  { has_character_flag = new_tulwangi_leader } } }
		character = scope:tulwangi_leader
	}

	immediate = {
		
	}
   
	option = { #
		name = lotr_thani_hazad.2006.a 

	}
}

lotr_thani_hazad.5303 = { # Natives Subdued 
	content_source = realms_dlc
	type = character_event
	theme = corruption
	title = lotr_thani_hazad.2006.t
	desc = {
		desc = lotr_thani_hazad.2006.desc.a
		triggered_desc = {
			trigger = { scope:tulwangi_leader = { NOT =  { has_character_flag = new_tulwangi_leader } } }
			desc = lotr_thani_hazad.2006.desc.b
		}
		desc = lotr_thani_hazad.2006.desc.c
	}
	orphan = yes
	left_portrait = {
		character = root
		animation = eyeroll
	}
	right_portrait = {
		character = scope:outspoken_rebel
		animation = worry
	}
	lower_left_portrait = {
		trigger = { scope:tulwangi_leader = { NOT =  { has_character_flag = new_tulwangi_leader } } }
		character = scope:tulwangi_leader
	}

	immediate = {
		
	}
   
	option = { #Make minor concessions to the tulwangi rebels
		name = lotr_thani_hazad.2006.a 

	}
}



##### Balan-lai mechanic events #####

lotr_thani_hazad.9000 = { # Handling event to see which inheritance event to fire
	hidden = yes
	scope = none

	immediate = {
		if = { # Check the me as primary heir
			limit = {
				OR = { # Kharadunaim or Kharadunaim-descendant
					culture = culture:kharadunaim
					culture = { any_parent_culture_or_above = { this = culture:kharadunaim } }
				}
				is_independent_ruler = yes
				NOT = { has_trait = balan_lai_member }
			}
			save_scope_as = new_member
		}
		else_if = { # Check the former member's children
			limit = {
				scope:former_member = {
					any_child = {
						OR = { # Kharadunaim or Kharadunaim-descendant
							culture = culture:kharadunaim
							culture = { any_parent_culture_or_above = { this = culture:kharadunaim } }
						}
						is_independent_ruler = yes
						NOT = { has_trait = balan_lai_member }
					}
				}
			}
			scope:former_member = {
				ordered_child = {
					limit = {
						OR = { # Kharadunaim or Kharadunaim-descendant
							culture = culture:kharadunaim
							culture = { any_parent_culture_or_above = { this = culture:kharadunaim } }
						}
						is_independent_ruler = yes
						NOT = { has_trait = balan_lai_member }
					}
					order_by = age
					save_scope_as = new_member
				}
			}
		}
		else_if = { # Check the former member's extended family
			limit = {
				scope:former_member = {
					any_close_or_extended_family_member = {
						OR = { # Kharadunaim or Kharadunaim-descendant
							culture = culture:kharadunaim
							culture = { any_parent_culture_or_above = { this = culture:kharadunaim } }
						}
						is_independent_ruler = yes
						NOT = { has_trait = balan_lai_member }
					}
				}
			}
			scope:former_member = {
				ordered_close_or_extended_family_member = {
					limit = {
						OR = { # Kharadunaim or Kharadunaim-descendant
							culture = culture:kharadunaim
							culture = { any_parent_culture_or_above = { this = culture:kharadunaim } }
						}
						is_independent_ruler = yes
						NOT = { has_trait = balan_lai_member }
					}
					order_by = age
					save_scope_as = new_member
				}
			}
		}

		scope:new_member = { # Notify new member
			if = {
				limit = {
					this = title:d_balan_lai_leader.holder
				}
				trigger_event = lotr_thani_hazad.9002
			}
			else = {
				trigger_event = lotr_thani_hazad.9001
			}
		}

		title:k_wastelands = { add_to_variable_list = { name = balan_lai_members target = scope:new_member } }

		every_balan_lai_member = { # Notify other human members
			limit = {
				is_ai = no
			}
			trigger_event = lotr_thani_hazad.9003
		}
	}
}

lotr_thani_hazad.9001 = { # Inheritance of Balan-lai member trait by death of former member - not leader
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.9001.t
	desc = lotr_thani_hazad.9001.desc
	theme = crown
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	right_portrait = {
		character = scope:balan_lai_leader
		animation = personality_bold
	}
	immediate = {
		title:d_balan_lai_leader.holder = {
			save_scope_as = balan_lai_leader
		}
	}
	option = {
		name = lotr_thani_hazad.9001.a
		add_trait = balan_lai_member
		add_unpressed_claim = title:d_balan_lai_leader
	}
}

lotr_thani_hazad.9002 = { # Inheritance of Balan-lai member trait by death of former member - leader
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.9002.t
	desc = lotr_thani_hazad.9002.desc
	theme = crown
	right_portrait = {
		character = root
		animation = personality_bold
	}
	option = {
		name = lotr_thani_hazad.9002.a
		add_trait = balan_lai_member
		add_unpressed_claim = title:d_balan_lai_leader
	}
}

lotr_thani_hazad.9003 = { # Notification event for other Balan-Lai member of new inherited member
	content_source = realms_dlc
	type = character_event
	title = {
		first_valid = {
			triggered_desc = {
				trigger = { 
					scope:new_member = title:d_balan_lai_leader.holder
				}
				desc = lotr_thani_hazad.9003.t.leader
			}
			desc = lotr_thani_hazad.9003.t.nonleader
		}
	}	
	desc = {
		desc = lotr_thani_hazad.9003.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					limit = {
						scope:new_member = title:d_balan_lai_leader.holder
					}
				}
				desc = lotr_thani_hazad.9003.desc_leader
			}
			desc = lotr_thani_hazad.9003.desc_nonleader
		}
	}
	theme = crown
	left_portrait = {
		character = root
		animation = personality_bold
	}
	right_portrait = {
		character = scope:new_member
		animation = personality_honorable
	}
	option = {
		name = lotr_thani_hazad.9003.a
	}
}

lotr_thani_hazad.9010 = { # Veto opportunity for new member seeking to join
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.9010.t	
	desc = lotr_thani_hazad.9010.desc
	theme = crown
	left_portrait = {
		character = root
		animation = personality_cynical
	}
	right_portrait = {
		character = scope:potential_joiner
		animation = personality_honorable
	}

	immediate = {
		add_character_flag = {
			flag = has_passed_judgement_on_new_balan_lai_joiner
			years = 1
		}
	}

	option = { # Welcome them to our ranks
		name = lotr_thani_hazad.9010.a
		if = { # See if any other members need to be offered veto
			limit = {
				any_balan_lai_member = {
					NOT = {
						has_character_flag = has_passed_judgement_on_new_balan_lai_joiner
					}
				}
			}
			random_balan_lai_member = {
				limit = {
					NOT = {
						has_character_flag = has_passed_judgement_on_new_balan_lai_joiner
					}
				}
				trigger_event = lotr_thani_hazad.9010 # Ask next member
			}
		}
		else = {
			scope:potential_joiner = {
				trigger_event = lotr_thani_hazad.9011  # Inform new joiner they are successful
			}
			every_balan_lai_member = {
				limit = {
					is_ai = no
				}
				trigger_event = lotr_thani_hazad.9012  # Inform existing human council member of the new joiner
			}
		}
		ai_chance = {
			base = 100
			modifier = {
				opinion = {
					target = scope:potential_joiner
					value < -50
				}
				add = -20
			}
			modifier = {
				opinion = {
					target = scope:potential_joiner
					value < -60
				}
				add = -20
			}
			modifier = {
				opinion = {
					target = scope:potential_joiner
					value < -70
				}
				add = -20
			}
			modifier = {
				opinion = {
					target = scope:potential_joiner
					value < -80
				}
				add = -20
			}
			modifier = {
				opinion = {
					target = scope:potential_joiner
					value < -90
				}
				add = -20
			}
			modifier = {
				has_relation_rival = scope:potential_joiner
				multiply = 0
			}
		}
	}
	option = { # Veto their investiture
		name = lotr_thani_hazad.9010.b
		save_scope_as = vetoing_member
		scope:potential_joiner = {
			trigger_event = lotr_thani_hazad.9013  # Inform new joiner they are vetoed
		}
		every_balan_lai_member = {
			limit = {
				is_ai = no
				NOT = { this = root }
			}
			trigger_event = lotr_thani_hazad.9014  # Inform existing human council member of the veto
		}
		ai_chance = {
			base = 0
			modifier = {
				opinion = {
					target = scope:potential_joiner
					value < -50
				}
				add = 20
			}
			modifier = {
				opinion = {
					target = scope:potential_joiner
					value < -60
				}
				add = 20
			}
			modifier = {
				opinion = {
					target = scope:potential_joiner
					value < -70
				}
				add = 20
			}
			modifier = {
				opinion = {
					target = scope:potential_joiner
					value < -80
				}
				add = 20
			}
			modifier = {
				opinion = {
					target = scope:potential_joiner
					value < -90
				}
				add = 20
			}
			modifier = {
				has_relation_rival = scope:potential_joiner
				add = 100
			}
		}
	}
}

lotr_thani_hazad.9011 = { # Inform new joiner they are successful
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.9011.t
	desc = lotr_thani_hazad.9011.desc
	theme = crown
	left_portrait = {
		character = title:d_balan_lai_leader.holder
		animation = personality_bold
	}
	right_portrait = {
		character = root
		animation = personality_honorable
	}
	option = {
		name = lotr_thani_hazad.9011.a
		add_trait = balan_lai_member
		add_unpressed_claim = title:d_balan_lai_leader
		add_prestige = 500
	}
	after = {
		every_balan_lai_member = {
			remove_character_flag = has_passed_judgement_on_new_balan_lai_joiner
		}
	}
}

lotr_thani_hazad.9012 = { # Inform existing human council member of the new joiner
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.9012.t
	desc = lotr_thani_hazad.9012.desc
	theme = crown
	left_portrait = {
		character = title:d_balan_lai_leader.holder
		animation = personality_bold
	}
	right_portrait = {
		character = scope:potential_joiner
		animation = personality_honorable
	}
	option = {
		name = lotr_thani_hazad.9012.a
	}
}

lotr_thani_hazad.9013 = { # Inform new joiner they are vetoed
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.9013.t
	desc = lotr_thani_hazad.9013.desc
	theme = crown
	left_portrait = {
		character = scope:vetoing_member
		animation = disapproval
	}
	right_portrait = {
		character = root
		animation = stress
	}
	option = {
		name = lotr_thani_hazad.9013.a
	}
	after = {
		every_balan_lai_member = {
			remove_character_flag = has_passed_judgement_on_new_balan_lai_joiner
		}
	}
}

lotr_thani_hazad.9014 = { # Inform existing human council member of the veto
	content_source = realms_dlc
	type = character_event
	title = lotr_thani_hazad.9014.t
	desc = lotr_thani_hazad.9014.desc
	theme = crown
	left_portrait = {
		character = scope:vetoing_member
		animation = disapproval
	}
	right_portrait = {
		character = scope:potential_joiner
		animation = stress
	}
	option = {
		name = lotr_thani_hazad.9014.a
	}
}
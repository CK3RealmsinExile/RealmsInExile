namespace = rangers

# Events about Aragorn
#		rangers.0101	Dunedain Encampments of Eriador
#       rangers.0200	Death of Gilraen
# Long Winter Start Date Events
#		rangers.0300	Growing Orc Activity
#		rangers.0301	Visiting Elrond
#		rangers.0302	Elrond hears rumours of Orcs
#		rangers.0303	Elrond receives Arassuil
#		rangers.0304	Elrond gives his counsel

rangers.0101 = { # Dunedain Encampments - chance to swear fealty
	content_source = realms_dlc
	type = character_event
	immediate = {
		title:d_northern_dunedain.holder = { save_scope_as = dunedain_chieftain }
	}
	title = rangers.0101.t
	desc = rangers.0101.desc
	theme = stewardship_duty_focus
	left_portrait = {
		character = root
		animation = idle
	}

	right_portrait = {
		character = scope:dunedain_chieftain
		animation = idle
	}

	option = { # Heed the call of the chieftain!
		name = rangers.0101.a
		create_title_and_vassal_change = {
			type = swear_fealty
			save_scope_as = change
		}
		root = {
			change_liege = {
				liege = scope:dunedain_chieftain
				change = scope:change
			}
			add_opinion = {
				modifier = became_vassal
				target = scope:dunedain_chieftain
				opinion = 10
			}
		}
		resolve_title_and_vassal_change = scope:change

		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.

			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}

			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}

			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	option = { # We need to act on our own for now.
		name = rangers.0101.b
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.

			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 0
			}

			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 30
			}

			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
}

rangers.0200 = { # Death of Gilraen
	content_source = realms_dlc
	type = character_event
	title = rangers.0200.t
	desc = rangers.0200.desc
	theme = stewardship_duty_focus
	left_portrait = {
		character = character:lineisildur42
		animation = worry
	}
	right_portrait = {
		character = character:linegilraen1
		animation = dead
	}
	
	option = { # Farewell, Mother
		name = rangers.0200.a
		character:linegilraen1 = {
			death = { death_reason = death_natural_causes }
		}
	}
}

### Long Winter Start Date Events ###

rangers.0300 = { # Growing Orc Activity
	content_source = realms_dlc
	type = character_event
	title = rangers.0300.t
	desc = rangers.0300.desc
	theme = dread
	window = visit_settlement_window
	#trigger = { is_ai = no }
	override_background = { reference = wilderness_forest }
	left_portrait = {
		character = root
		animation = worry
	}
	right_portrait = {
		character = scope:azog
		animation = aggressive_sword
	}
	immediate = {
		title:c_durins_hall.holder.top_liege = { save_scope_as = azog }
		title:c_imladris.holder.top_liege = { trigger_event = rangers.0302 }
	}
	option = { # I shall seek the counsel of Elrond of Rivendell
		name = rangers.0300.a
		custom_tooltip = rangers.0300.a.tt
		add_character_flag = arassuil_seek_elronds_counsel
	}
}

rangers.0301 = { # Visit Elrond
	content_source = realms_dlc
	type = character_event
	title = rangers.0301.t
	desc = rangers.0301.desc
	theme = friend_relation
	window = visit_settlement_window
	override_background = { reference = throne_room_rivendell }
	left_portrait = {
		character = root
		animation = throne_room_conversation_1
	}
	right_portrait = {
		character = scope:elrond
		animation = personality_rational
	}
	immediate = {
		title:c_imladris.holder.top_liege = { save_scope_as = elrond }
	}
	option = { # 
		name = rangers.0301.a
		add_stress = -10
		title:c_imladris.holder.top_liege = { trigger_event = rangers.0303 }
	}
}

rangers.0302 = { # Elrond hears rumours of Orcs
	content_source = realms_dlc
	type = character_event
	title = rangers.0302.t
	desc = rangers.0302.desc
	theme = diplomacy_foreign_affairs_focus
	override_background = { reference = throne_room_rivendell }
	left_portrait = {
		character = root
		animation = reading
	}
	right_portrait = {
		character = scope:son_of_elrond
		animation = marshal
	}
	immediate = {
		root.primary_heir = { save_scope_as = son_of_elrond }
	}
	option = { # I will reach out to the Dúnedain
		name = rangers.0302.a
		custom_tooltip = rangers.0302.a.tt
	}
}

rangers.0303 = { # Elrond gives his counsel 
	content_source = realms_dlc
	type = character_event
	title = rangers.0303.t
	desc = rangers.0303.desc
	theme = friend_relation
	override_background = { reference = throne_room_rivendell }
	left_portrait = {
		character = root
		animation = throne_room_conversation_2
	}
	right_portrait = {
		character = scope:dunedain_chieftain
		animation = throne_room_two_handed_passive_1
	}
	immediate = {
		title:d_northern_dunedain.holder = { save_scope_as = dunedain_chieftain }
	}
	option = { # Set a trap for the Orc's leader
		name = rangers.0303.a
	}
	option = { # Strike at the heart of our enemy
		name = rangers.0303.b
		add_character_flag = elrond_strike_moria
	}
	after = {
		scope:dunedain_chieftain = { trigger_Event = rangers.0304 }
	}
}

rangers.0304 = { # Receive Elrond's counsel 
	content_source = realms_dlc
	type = character_event
	title = rangers.0304.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:elrond = { has_character_flag = elrond_strike_moria }
				}
				desc = rangers.0304.desc.a
			}
			desc = rangers.0304.desc
		}
	}
	theme = friend_relation
	override_background = { reference = throne_room_rivendell }
	window = visit_settlement_window
	left_portrait = {
		character = root
		animation = throne_room_two_handed_passive_1
	}
	right_portrait = {
		character = scope:elrond
		animation = throne_room_conversation_2
	}
	immediate = {
	}
	option = { # I will consider your wisdom
		name = rangers.0304.a
		custom_tooltip = rangers.0304.a.tt 
	}
	after = {
		start_travel_plan = { #Travel home
			destination = root.capital_county.title_province
			on_arrival_event = rangers.0305
			return_trip = no
			players_use_planner = no
			on_arrival_destinations = all
		}
	}
}

rangers.0305 = { # Returning to the Angle
	content_source = realms_dlc
	type = character_event
	title = rangers.0305.t
	desc = rangers.0305.desc
	theme = martial_chivalry_focus
	window = visit_settlement_window
	override_background = { reference = wilderness_forest_deep }
	left_portrait = {
		character = root
		animation = inspect_weapon
	}
	immediate = { title:c_durins_hall.holder.top_liege = { save_scope_as = azog } }
	option = { # I must end this threat to Eriador. It is my duty.
		name = rangers.0305.a
		custom_tooltip = rangers.0305.a.tt
		add_character_flag = arassuil_dealing_with_azog
	}
}

rangers.0306 = { # Lay a Trap
	content_source = realms_dlc
	type = character_event
	title = rangers.0306.t
	desc = rangers.0306.desc
	theme = intrigue
	window = visit_settlement_window
	override_background = { reference = wilderness_forest_deep }
	left_portrait = {
		character = root
		animation = bow_drawn
	}
	immediate = { title:c_durins_hall.holder.top_liege = { save_scope_as = azog } }
	option = { # I will end this here and now
		name = rangers.0306.a
		custom_tooltip = rangers.0306.a.tt
		add_prestige = 50
	}
}

rangers.0307 = { # Fight a duel
	content_source = realms_dlc
	type = character_event
	title = rangers.0307.t
	desc = rangers.0307.desc
	theme = dread
	window = visit_settlement_window
	override_background = { reference = durins_door }
	left_portrait = {
		character = root
		animation = aggressive_sword
	}
	immediate = { title:c_durins_hall.holder.top_liege = { save_scope_as = azog } }
	option = { # I will end this here and now
		name = rangers.0307.a
		custom_tooltip = rangers.0307.a.tt
		add_prestige = 50
	}
}

rangers.0308 = { # Start a war
	content_source = realms_dlc
	type = character_event
	title = rangers.0308.t
	desc = rangers.0308.desc
	theme = war
	window = visit_settlement_window
	override_background = { reference = wilderness_mountains }
	left_portrait = {
		character = root
		animation = war_attacker
	}
	immediate = { title:c_durins_hall.holder.top_liege = { save_scope_as = azog } }
	option = { # I will end this here and now
		name = rangers.0308.a
		custom_tooltip = rangers.0308.a.tt
		add_prestige = 50
	}
}
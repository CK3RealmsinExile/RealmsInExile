namespace = nurnoth

nurnoth.0001 = { #Slaves secretly convert to their good faith
	hidden = yes

	trigger = {
		is_from_ruler_designer = no
		culture = culture:nurnoth
		faith = faith:faith_nurn_slave
		NOT = {
			any_secret = { secret_type = secret_crypto_religionist }
			exists = secret_faith
			secret_faith = faith:faith_nurn_good
		}
	}


	immediate = {
		random_list = {
			50 = {
				modifier = {
					has_trait = brave
					add = 10
				}
				modifier = {
					has_trait = just
					add = 10
				}
				modifier = {
					has_trait = stubborn
					add = 10
				}
				modifier = {
					has_trait = craven
					add = -10
				}
				modifier = {
					has_trait = paranoid
					add = -10
				}
				modifier = {
					has_trait = sadistic
					add = -10
				}
				make_character_crypto_religionist_effect = { CRYPTO_RELIGION = faith:faith_nurn_good }
			}
			50 = {
				modifier = {
					has_trait = brave
					add = -10
				}
				modifier = {
					has_trait = just
					add = -10
				}
				modifier = {
					has_trait = stubborn
					add = -10
				}
				modifier = {
					has_trait = craven
					add = 10
				}
				modifier = {
					has_trait = paranoid
					add = 10
				}
				modifier = {
					has_trait = sadistic
					add = 10
				}
			}
		}
	}

}

nurnoth.0002 = { #Slaves take over, always happens if Sauron dies
	hidden = yes
	
	immediate = {
		culture:nurnoth = {
			remove_culture_tradition = tradition_spartan
			remove_culture_tradition = tradition_loyal_soldiers
			add_culture_tradition = tradition_collective_lands
			add_culture_tradition = tradition_greatswords
			if = {
				limit = {
					has_dlc_feature = legacy_of_persia
				}
				add_culture_tradition = tradition_fp3_fierce_independence
			}
		}
		hidden_effect = {
			create_character = {
				location = root.capital_province
				culture = culture:nurnoth
				faith = faith:faith_nurn_good
				gender = male
				age = { 30 50 }
				random_traits = no
				random_traits_list = {
					count = 2
					gregarious = {}
					ambitious = {}
					temperate  = {}
					generous = {}
					diligent = {}
					honest = {}
					compassionate = {}
					stubborn = {}
				}
				trait = just
				trait = brave
				trait = peasant_leader
				trait = education_diplomacy_4
				gender_female_chance = 0
				save_scope_as = slave_leader
			}
			create_title_and_vassal_change = {
				type = usurped
				save_scope_as = change
				add_claim_on_loss = yes
			}
			title:c_thaurband = {
				change_title_holder = {
					holder = scope:slave_leader
					change = scope:change
				}
			}
			title:k_nurn = {
				change_title_holder = {
					holder = scope:slave_leader
					change = scope:change
				}
			}
			scope:slave_leader = {
				change_government = oligarchy_government
				give_nickname = nick_the_liberator
			}
			title:c_ulurzu = {
				add_to_list = nurnoth_vassal_counties
			}
			title:c_gurthrant = {
				add_to_list = nurnoth_vassal_counties
			}
			title:c_nurumurl = {
				add_to_list = nurnoth_vassal_counties
			}
			title:c_maghak = {
				add_to_list = nurnoth_vassal_counties
			}
			title:c_tarkorul = {
				add_to_list = nurnoth_vassal_counties
			}
			title:c_nargil = {
				add_to_list = nurnoth_vassal_counties
			}
			title:c_luglurak = {
				add_to_list = nurnoth_vassal_counties
			}
			title:c_nurnen = {
				add_to_list = nurnoth_vassal_counties
			}
			title:c_culduin = {
				add_to_list = nurnoth_vassal_counties
			}
			title:c_ulgath = {
				add_to_list = nurnoth_vassal_counties
			}
			title:c_zarok = {
				add_to_list = nurnoth_vassal_counties
			}
			title:c_ioriag = {
				add_to_list = nurnoth_vassal_counties
			}
			title:c_sturlurza_nurn = {
				add_to_list = nurnoth_vassal_counties
			}
			title:c_khenanak = {
				add_to_list = nurnoth_vassal_counties
			}
			title:c_amnash = {
				add_to_list = nurnoth_vassal_counties
			}
			title:c_burkh_nurn = {
				add_to_list = nurnoth_vassal_counties
			}
			title:c_caran = {
				add_to_list = nurnoth_vassal_counties
			}
			title:c_nurgost = {
				add_to_list = nurnoth_vassal_counties
			}
			every_county = {
				limit = {
					is_in_list = nurnoth_vassal_counties
				}
				save_scope_as = current_target_county
				create_character = {
					location = scope:slave_leader.capital_province
					culture = culture:nurnoth
					faith = faith:faith_nurn_good
					gender = male
					age = { 30 50 }
					random_traits = yes
					trait = peasant_leader
					gender_female_chance = 0
					save_scope_as = slave_vassal
				}
				scope:current_target_county = {
					change_title_holder = {
						holder = scope:slave_vassal
						change = scope:change
					}
				}
				scope:slave_vassal = {
					if = {
						limit = {
							NOT = {
								government_has_flag = government_is_oligarchy
							}
						}
						change_government = oligarchy_government
					}
					change_liege = {
						liege = scope:slave_leader
						change = scope:change 
					}
				}
			}
			resolve_title_and_vassal_change = scope:change
		}
	}
}

nurnoth.0003 = { #Option to subjugate Nurn, only available if someone Destroys Mordor
	title = nurnoth.0003.t
	desc = nurnoth.0003.desc
	theme = stewardship_duty_focus

	override_background = {     
		reference = lone_lands
	}

	right_portrait = {
		character = root
		animation = personality_honorable
	}

	left_portrait = {
		character = scope:slave_leader
		animation = personality_generous
	}
	

	immediate = {
	}

	option = {
		name = nurnoth.0003.a
		custom_tooltip = nurnoth.0003.a_tt
	}
	after = {
	}
}
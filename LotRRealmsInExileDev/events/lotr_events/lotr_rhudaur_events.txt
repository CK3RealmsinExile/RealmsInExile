namespace = rhudaur

# Events about Rhudaur and Trollshaws
#       rhudaur.1000-1004    Orc / Troll Hunting decision (for Imladris and Dunadan Rangers)
#       rhudaur.1005         Hillmen restoration of Rhudaur
#
# Angmar Start Date Events
#		rhudaur.2000-4999
#
#
# Akalabeth Start Date Events
#		rhudaur.5000 =<



## ORC / TROLL HUNTING (only Imladris and Dunadan Rangers)

rhudaur.1000 = { 
	content_source = realms_dlc
	type = character_event
	title = rhudaur.1000.t
	desc = rhudaur.1000.desc
	theme = stewardship_duty_focus
	
	override_background = {
		reference = rhudaur
	}
	left_portrait = {
		character = root
		animation = marshal
	}
	right_portrait = {
		character = scope:orc
		animation = marshal
	}
	
	lower_left_portrait = {
		trigger = { 
			exists = scope:companion1
		}
		character = scope:companion1
		animation = marshal
	}
	lower_right_portrait = {
		trigger = { 
			exists = scope:companion2
		}
		character = scope:companion2
		animation = marshal
	}
	
	immediate = {
		play_music_cue = lotr_cue_elves
		root = {
			random_in_list = {
				variable = potential_rhudaur_troll_orc_hunting_participants
				limit = {
					is_alive = yes
				}
				save_scope_as = companion1
			}
			random_in_list = {
				variable = potential_rhudaur_troll_orc_hunting_participants
				limit = {
					is_alive = yes
					NOT = {
						scope:companion1 = this
					}
				}
				save_scope_as = companion2
			}
		}
		random_county_in_region = {
			region = middleearth_west_arnor_rhudaur
			title_province = { save_scope_as = rhudaur_province }
		}
		
		create_character = { # Create a new orc
			culture = culture:uruk_ongmair
			faith = faith:way_of_strength
			gender_female_chance = 0
			location = scope:rhudaur_province
			save_scope_as = orc
		}
	}
	
	option = { # Companion 1 tries to tame the orc by force
		name = rhudaur.1000.a
		skill = martial
		trigger = { 
			exists = scope:companion1
		}
		scope:companion1 = {
			duel = {
				skill = martial 
				value = 14
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = rhudaur.1000.a.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:companion1
							title = rhudaur.1000.success.toast.t
							add_prestige = minor_prestige_gain
							add_martial_lifestyle_xp = minor_lifestyle_xp
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = rhudaur.1000.a.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:companion1
							title = rhudaur.1000.failure.toast.t
							scope:companion1 = {
								increase_wounds_effect = {
									REASON = fight
								}
							}
							add_prestige = medium_prestige_loss	
							stress_impact = {
								just = medium_stress_impact_gain
								wrathful = medium_stress_impact_gain
								vengeful = medium_stress_impact_gain
								sadistic = minor_stress_impact_gain							
							}
						}
					}					
				}
			}
		}
	}
	option = { # Companion 2 tries to tame the orc by force
		name = rhudaur.1000.b
		skill = martial
		trigger = { 
			exists = scope:companion1
		}
		scope:companion2 = {
			duel = {
				skill = martial 
				value = 14
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = rhudaur.1000.b.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:companion2
							title = rhudaur.1000.success.toast.t
							add_prestige = minor_prestige_gain
							add_martial_lifestyle_xp = minor_lifestyle_xp
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = rhudaur.1000.b.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:companion2
							title = rhudaur.1000.failure.toast.t							
							scope:companion1 = {
								increase_wounds_effect = {
									REASON = fight
								}
							}
							add_prestige = medium_prestige_loss	
							stress_impact = {
								just = medium_stress_impact_gain
								wrathful = medium_stress_impact_gain
								vengeful = medium_stress_impact_gain
								sadistic = minor_stress_impact_gain									
							}
						}
					}					
				}
			}
		}
	}
	option = { # You
		name = rhudaur.1000.c
		skill = martial
		root = {
			duel = {
				skill = martial 
				value = 14
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = rhudaur.1000.c.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							title = rhudaur.1000.success.toast.t
							add_prestige = minor_prestige_gain
							add_martial_lifestyle_xp = minor_lifestyle_xp
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = rhudaur.1000.c.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							title = rhudaur.1000.failure.toast.t							
							increase_wounds_effect = {
								REASON = fight
							}
							add_prestige = medium_prestige_loss	
							stress_impact = {
								just = medium_stress_impact_gain
								wrathful = medium_stress_impact_gain
								vengeful = medium_stress_impact_gain
								sadistic = minor_stress_impact_gain							
							}
						}
					}					
				}
			}
		}
	}
	after = {
		trigger_event = {
			id = rhudaur.1001
			days = 20
		}
		scope:orc = {
			silent_disappearance_effect = yes
		}
	}
}

rhudaur.1001 = { # Sabotage at the orc camp
	content_source = realms_dlc
	type = character_event
	title = rhudaur.1001.t
	desc = rhudaur.1001.desc
	theme = stewardship_duty_focus
	
	override_background = {
		reference = army_camp
	}
	left_portrait = {
		character = root
		animation = marshal
	}
	
	right_portrait = {
		character = scope:orc
		animation = marshal
	}
	
	lower_left_portrait = {
		trigger = { 
			exists = scope:companion1
		}
		character = scope:companion1
		animation = marshal
	}
	lower_right_portrait = {
		trigger = { 
			exists = scope:companion2
		}
		character = scope:companion2
		animation = marshal
	}

	immediate = {
		
		random_county_in_region = {
			region = middleearth_west_arnor_rhudaur
			title_province = { save_scope_as = rhudaur_province }
		}
		
		create_character = { # Create a new character to hold the title
			culture = culture:uruk_ongmair
			faith = faith:way_of_strength
			gender_female_chance = 0
			location = scope:rhudaur_province
			save_scope_as = orc
		}
	}
	
	option = { # Companion 1 tries to tame the orc by force
		name = rhudaur.1001.a
		skill = intrigue
		trigger = { 
			exists = scope:companion1
		}
		scope:companion1 = {
			duel = {
				skill = intrigue 
				value = 16
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = rhudaur.1001.a.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:companion1
							title = rhudaur.1001.success.toast.t
							add_prestige = minor_prestige_gain
							add_intrigue_lifestyle_xp = minor_lifestyle_xp
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = rhudaur.1001.a.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:companion1
							title = rhudaur.1001.failure.toast.t
							scope:companion1 = {
								increase_wounds_effect = {
									REASON = fight
								}
							}
							add_prestige = medium_prestige_loss	
							stress_impact = {
								just = medium_stress_impact_gain
								wrathful = medium_stress_impact_gain
								vengeful = medium_stress_impact_gain
								sadistic = minor_stress_impact_gain							
							}
						}
					}					
				}
			}
		}
	}
	option = { # Companion 2
		name = rhudaur.1001.b
		skill = intrigue
		trigger = { 
			exists = scope:companion1
		}
		scope:companion2 = {
			duel = {
				skill = intrigue 
				value = 16
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = rhudaur.1001.b.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:companion2
							title = rhudaur.1001.success.toast.t
							add_prestige = minor_prestige_gain
							add_intrigue_lifestyle_xp = minor_lifestyle_xp
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = rhudaur.1001.b.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:companion2
							title = rhudaur.1001.failure.toast.t							
							scope:companion1 = {
								increase_wounds_effect = {
									REASON = fight
								}
							}
							add_prestige = medium_prestige_loss	
							stress_impact = {
								just = medium_stress_impact_gain
								wrathful = medium_stress_impact_gain
								vengeful = medium_stress_impact_gain
								sadistic = minor_stress_impact_gain									
							}
						}
					}					
				}
			}
		}
	}
	option = { # You
		name = rhudaur.1001.c
		skill = intrigue
		root = {
			duel = {
				skill = intrigue 
				value = 16
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = rhudaur.1001.c.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							title = rhudaur.1001.success.toast.t
							add_prestige = minor_prestige_gain
							add_intrigue_lifestyle_xp = minor_lifestyle_xp
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = rhudaur.1001.c.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							title = rhudaur.1001.failure.toast.t							
							increase_wounds_effect = {
								REASON = fight
							}
							add_prestige = medium_prestige_loss	
							stress_impact = {
								just = medium_stress_impact_gain
								wrathful = medium_stress_impact_gain
								vengeful = medium_stress_impact_gain
								sadistic = minor_stress_impact_gain							
							}
						}
					}					
				}
			}
		}
	}
	 after = {
	 	trigger_event = {
	 		id = rhudaur.1002
			days = 20
		}
		scope:orc = {
			silent_disappearance_effect = yes
		}
	}
}

rhudaur.1002 = { # Troll parley
	content_source = realms_dlc
	type = character_event
	title = rhudaur.1002.t
	desc = rhudaur.1002.desc
	theme = stewardship_duty_focus
	
	override_background = {
		reference = trollshaws
	}
	lower_center_portrait = {
		character = root
		animation = thinking
	}
	right_portrait = {
		character = scope:troll
		animation = marshal
	}
	
	lower_left_portrait = {
		trigger = { 
			exists = scope:companion1
		}
		character = scope:companion1
		animation = eavesdrop
	}
	lower_right_portrait = {
		trigger = { 
			exists = scope:companion2
		}
		character = scope:companion2
		animation = scheme
	}
	
	immediate = {
		
		random_county_in_region = {
			region = middleearth_west_arnor_rhudaur
			title_province = { save_scope_as = rhudaur_province }
		}
		
		create_character = { # Create a new troll
			culture = culture:hill_troll
			faith = faith:way_of_strength
			gender_female_chance = 0
			location = scope:rhudaur_province
			save_scope_as = troll
		}
	}
	
	option = { # Companion 1
		name = rhudaur.1002.a
		skill = diplomacy
		trigger = { 
			exists = scope:companion1
		}
		scope:companion1 = {
			duel = {
				skill = diplomacy 
				value = 18
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = rhudaur.1002.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:companion1
							title = rhudaur.1002.success.toast.t
							add_prestige = minor_prestige_gain
							add_diplomacy_lifestyle_xp = minor_lifestyle_xp
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = rhudaur.1002.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:companion1
							title = rhudaur.1002.failure.toast.t
							scope:companion1 = {
								increase_wounds_effect = {
									REASON = fight
								}
							}
							add_prestige = medium_prestige_loss	
							stress_impact = {
								just = medium_stress_impact_gain
								wrathful = medium_stress_impact_gain
								vengeful = medium_stress_impact_gain
								sadistic = minor_stress_impact_gain							
							}
						}
					}					
				}
			}
		}
	}
	option = { # Companion 2
		name = rhudaur.1002.b
		skill = diplomacy
		trigger = { 
			exists = scope:companion1
		}
		scope:companion2 = {
			duel = {
				skill = diplomacy 
				value = 18
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = rhudaur.1002.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:companion2
							title = rhudaur.1002.success.toast.t
							add_prestige = minor_prestige_gain
							add_diplomacy_lifestyle_xp = minor_lifestyle_xp
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = rhudaur.1002.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:companion2
							title = rhudaur.1002.failure.toast.t							
							scope:companion1 = {
								increase_wounds_effect = {
									REASON = fight
								}
							}
							add_prestige = medium_prestige_loss	
							stress_impact = {
								just = medium_stress_impact_gain
								wrathful = medium_stress_impact_gain
								vengeful = medium_stress_impact_gain
								sadistic = minor_stress_impact_gain									
							}
						}
					}					
				}
			}
		}
	}
	option = { # You
		name = rhudaur.1002.c
		skill = diplomacy
		root = {
			duel = {
				skill = diplomacy 
				value = 18
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = rhudaur.1002.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							title = rhudaur.1002.success.toast.t
							add_prestige = minor_prestige_gain
							add_diplomacy_lifestyle_xp = minor_lifestyle_xp
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = rhudaur.1002.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							title = rhudaur.1002.failure.toast.t							
							increase_wounds_effect = {
								REASON = fight
							}
							add_prestige = medium_prestige_loss	
							stress_impact = {
								just = medium_stress_impact_gain
								wrathful = medium_stress_impact_gain
								vengeful = medium_stress_impact_gain
								sadistic = minor_stress_impact_gain							
							}
						}
					}					
				}
			}
		}
	}
	after = {
		trigger_event = {
	 		id = rhudaur.1003
	 		days = 20
	 	}
		scope:troll = {
			silent_disappearance_effect = yes
		}
	 }
}

rhudaur.1003 = { # Negotiations with the Trolls
	content_source = realms_dlc
	type = character_event
	title = rhudaur.1003.t
	desc = rhudaur.1003.desc
	theme = stewardship_duty_focus
	
	override_background = {
		reference = trollshaws
	}
	lower_center_portrait = {
		character = root
		animation = steward
	}
	right_portrait = {
		character = scope:troll
		animation = bold
	}
	
	lower_left_portrait = {
		trigger = { 
			exists = scope:companion1
		}
		character = scope:companion1
		animation = martial
	}
	lower_right_portrait = {
		trigger = { 
			exists = scope:companion2
		}
		character = scope:companion2
		animation = martial
	}

	immediate = {
		
		random_county_in_region = {
			region = middleearth_west_arnor_rhudaur
			title_province = { save_scope_as = rhudaur_province }
		}
		
		create_character = { # Create a new troll
			culture = culture:hill_troll
			faith = faith:way_of_strength
			gender_female_chance = 0
			location = scope:rhudaur_province
			save_scope_as = troll
		}
	}
	
	option = { # You try to bribe
		name = rhudaur.1003.a
		skill = stewardship
		root = {
			duel = {
				skill = stewardship 
				value = 20
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = rhudaur.1003.duel_success
					send_interface_toast = {
						left_icon = root
						title = rhudaur.1003.success.toast.t
						add_prestige = minor_prestige_gain
						add_stewardship_lifestyle_xp = minor_lifestyle_xp
						remove_short_term_gold = medium_gold_value
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = rhudaur.1003.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							title = rhudaur.1003.failure.toast.t
							increase_wounds_effect = {
								REASON = fight
							}
							add_prestige = medium_prestige_loss	
							remove_short_term_gold = medium_gold_value
							stress_impact = {
								just = medium_stress_impact_gain
								wrathful = medium_stress_impact_gain
								vengeful = medium_stress_impact_gain
								sadistic = minor_stress_impact_gain							
							}
						}
					}					
				}
			}
		}
	}
	option = { # Companion 1
		name = rhudaur.1003.b
		skill = prowess
		trigger = { 
			exists = scope:companion1
		}
		scope:companion1 = {
			duel = {
				skill = prowess 
				value = 20
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = rhudaur.1003.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:companion1
							title = rhudaur.1003.success.toast.t
							add_prestige = minor_prestige_gain
							add_prowess_skill = 1
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = rhudaur.1003.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:companion1
							title = rhudaur.1003.failure.toast.t							
							scope:companion1 = {
								increase_wounds_effect = {
									REASON = fight
								}
							}
							add_prestige = medium_prestige_loss	
							stress_impact = {
								just = medium_stress_impact_gain
								wrathful = medium_stress_impact_gain
								vengeful = medium_stress_impact_gain
								sadistic = minor_stress_impact_gain									
							}
						}
					}					
				}
			}
		}
	}
	option = { # Companion 2
		name = rhudaur.1003.c
		skill = prowess
		trigger = { 
			exists = scope:companion2
		}
		scope:companion2 = {
			duel = {
				skill = prowess 
				value = 20
				30 = { # Success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
						min = -10
					}
					desc = rhudaur.1003.duel_success
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:companion2
							title = rhudaur.1003.success.toast.t
							add_prestige = minor_prestige_gain
							add_prowess_skill = 1
						}
					}
				}
				30 = { # Failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -2
						min = -25
					}
					desc = rhudaur.1003.duel_failure
					root = {
						send_interface_toast = {
							left_icon = root
							right_icon = scope:companion2
							title = rhudaur.1003.failure.toast.t							
							scope:companion2 = {
								increase_wounds_effect = {
									REASON = fight
								}
							}
							add_prestige = medium_prestige_loss	
							stress_impact = {
								just = medium_stress_impact_gain
								wrathful = medium_stress_impact_gain
								vengeful = medium_stress_impact_gain
								sadistic = minor_stress_impact_gain									
							}
						}
					}					
				}
			}
		}
	}
	after = {
		trigger_event = {
	 		id = rhudaur.1004
	 		days = 20
	 	}
		scope:troll = {
			silent_disappearance_effect = yes
		}
	 }
}

rhudaur.1004 = { # End of the hunting decision
	content_source = realms_dlc
	type = character_event
	title = rhudaur.1004.t
	desc = rhudaur.1004.desc
	theme = stewardship_duty_focus
	override_background = {
		reference = trollshaws
	}
	left_portrait = {
		character = root
		animation = steward
	}
	
	right_portrait = {
		trigger = { 
			exists = scope:companion1
		}
		character = scope:companion1
		animation = steward
	}
	lower_center_portrait = {
		trigger = { 
			exists = scope:companion2
		}
		character = scope:companion2
		animation = steward
	}
	
	option = {
		name = rhudaur.1004.a
		root.capital_province = {
			add_province_modifier = {
				modifier = safe_rhudaur
				years = 5
			}
		}
	}
}

####### Restore rhudaur Decision ########

rhudaur.1005 = { # decision_restore_hillmen_rhudaur
	content_source = realms_dlc
	type = character_event
	title = rhudaur.1005.t
	desc = rhudaur.1005.desc
	theme = crown
	override_background = {
		reference = rhudaur
	}
	left_portrait = {
		character = root
		animation = personality_bold
	}

	option = {
		name = rhudaur.1005.a
	}
}



#####################################################
#####################################################
##############    Angmar start date    ##############
###############    Rhudaur.2000 =<    ###############
#####################################################
#####################################################

#### Hwaldar Event Chain #####

rhudaur.2000 = { # Intro
    content_source = realms_dlc
	type = character_event
	title = rhudaur.2000.t
	desc = rhudaur.2000.desc
	theme = stewardship_duty_focus
	override_background = {
		reference = throne_room
    }
	left_portrait = {
		character = root
		animation = personality_bold
	}
	immediate = {
		title:d_dor_en_egladil.holder = {
			save_scope_as = mellondir
		}
		character:linerhudaur7 = { save_scope_as = lastking } #King Aldor, slain by Hwaldar
		character:linebroccach = { #Set-up for Hwaldar's death & succession
			create_story = story_hwaldar_succession
		}
	}
    option = { 
		name = rhudaur.2000.a
		add_prestige = 100
	}
}

rhudaur.2001 = { # Argeleb asks for fealty
	type = letter_event
	sender = scope:sender
	opening = rhudaur.2001.opening
	desc = rhudaur.2001.desc
    
    on_trigger_fail = { #Trigger invitation again if it was blocked because the character was handling another invitation
		trigger_event = {
			id = rhudaur.2001
			days = 1
		}
	}

    immediate = {
		title:e_arthedain = {
			copy_title_history = title:k_arthedain
		}
		title:k_arthedain.holder = {
			save_scope_as = sender
		}
		ROOT = {
			save_scope_as = recipient
		}
		title:d_dor_en_egladil.holder = {
			save_scope_as = mellondir
		}
		character:nazgul1 = { save_scope_as = witchking }
	}

    option = {  # Swear fealty
		name = rhudaur.2001.a
        ai_chance = {
            base = 0 # It is allied to Angmar already
        }
		
		scope:sender = { #Argeleb gets empire title so he can vassalize a King
			create_title_and_vassal_change = {
				type = granted
				save_scope_as = title_change
				add_claim_on_loss = yes
			}
			title:e_arthedain = {
				change_title_holder = {
					holder = scope:sender
					change = scope:title_change
					take_baronies = yes
				}	
			}
			resolve_title_and_vassal_change = scope:title_change
		}
		
        scope:recipient = {
            # Vassalization
			create_title_and_vassal_change = {
				type = swear_fealty
				save_scope_as = change
				add_claim_on_loss = yes
			}
			change_liege = {
				liege = scope:sender
				change = scope:change
			}
			resolve_title_and_vassal_change = scope:change
			add_character_flag = hwaldar_swore_fealty
		}
		
		scope:mellondir = {
			create_title_and_vassal_change = {
				type = swear_fealty
				save_scope_as = liege_change
				add_claim_on_loss = yes
			}
			change_liege = {
				liege = scope:sender
				change = scope:liege_change
			}
			resolve_title_and_vassal_change = scope:liege_change

		}
		
		hidden_effect = {
			every_character_war = { #Make sure Hwaldar peaces out with Mellondir
				limit = { using_cb = angle_rhudaur_invasion_war }
				end_war = white_peace
			}
		}
		
		scope:witchking = {
			trigger_event = { #Witch-king gets angy about this
				id = angmar.0501
				days = 10
				}
		}
		
	}

    option = {  # Do not swear fealty
		name = rhudaur.2001.b
        ai_chance = {
            base = 100 # It is allied to Angmar already
        }
        scope:sender = {
            add_pressed_claim = scope:recipient.primary_title
        }
        scope:recipient = { add_prestige = 150 }
		scope:recipient = { add_legitimacy = 25 }
		#trigger_event = {
		# 	id = rhudaur.2003
		# 	days = { 60 180 }
		#}
	}
}

rhudaur.2002 = { # Witch-king is angry 
	content_source = realms_dlc
	type = character_event
	title = rhudaur.2002.t
	desc = rhudaur.2002.desc
	theme = witchcraft
	
	left_portrait = {
		character = root
		animation = fear
	}
	right_portrait = {
		character = scope:witchking
		animation = anger
	}
	immediate = {
		character:nazgul1 = { save_scope_as = witchking }
	}
	option = { #I will not break my word, gtfo
		name = rhudaur.2002.a
		scope:witchking = {
			trigger_event = angmar.0502 #Inform the Witch-king about Hwaldar's refusal
			start_war = {
				cb = invasion_war
				target = root
				target_title = title:k_rhudaur
			}
			add_prestige = 500
		}
		add_prestige = 200
		add_legitimacy = 50
		trigger_event = { # Info event about Hwaldar's succession
			id = rhudaur.2004
			days = 30
		}
	}
	option = { #F-forgive me! Master!
		name = rhudaur.2002.b
		custom_tooltip = event_arnor_06003_b
		custom_tooltip = event_arnor_06003_bb
		scope:witchking = {
			trigger_event = angmar.0503 #Inform the Witch-king of your surrender
		}
		trigger_event = { #Rhudaur gets vassalized by Angmar
			id = rhudaur.2503
			days = 1
		}
		add_prestige = -500
		trigger_event = { # Info event about Hwaldar's succession
			id = rhudaur.2004
			days = 30
		}
	}
}

rhudaur.2003 = { #Angmar demands tributary status
	content_source = realms_dlc
	type = character_event
	title = rhudaur.2003.t
	desc = rhudaur.2003.desc
	theme = vassal
	left_portrait = {
		character = root
		animation = disapproval
	}
	right_portrait = {
		character = scope:witchking
		animation = personality_vengeful
	}
	immediate = {
		character:nazgul1 = { save_scope_as = witchking }
		character:linebraighir33 = { save_scope_as = tull }
		title:k_arthedain.holder = {
			trigger_event = arnor.1201 # King of Arthedain receives the refugees from the Angle
		}
	}	
	option = { #As you wish, my Master
		name = rhudaur.2003.a
		custom_tooltip = event_arnor_06004_a
		ai_chance = {
            base = 100 # This is the canon option
        }
		scope:witchking = { #Witch-king gets empire title so he can make Hwaldar tributary
			trigger_event = angmar.0505 # give him the news
			create_title_and_vassal_change = {
				type = granted
				save_scope_as = title_change
				add_claim_on_loss = yes
			}
			title:e_angmar = {
				change_title_holder = {
					holder = scope:witchking
					change = scope:title_change
					take_baronies = yes
				}	
			}
			resolve_title_and_vassal_change = scope:title_change
		}
		make_tributary = {
			TYPE = tributary_permanent
			TRIBUTARY = root
			SUZERAIN = scope:witchking
		}	
		trigger_event = { # Info event about Hwaldar's succession
			id = rhudaur.2004
			days = 30
		}
	}
	option = { #I will rely on my own strength!
		name = rhudaur.2003.b
		ai_chance = {
            base = 50 # Hwaldar won't agree to become tributary b/c of his pride
        }
		scope:witchking = {
			add_opinion = {
				modifier = angry_opinion
				opinion = -50
				target = root
			}
			trigger_event = angmar.0506 # Tell the WK about this decision
		}
		every_powerful_vassal = {
				add_opinion = {
				modifier = angry_opinion
				opinion = -25
				target = root
			}
		}	
		scope:tull = {
			start_war = {
				cb = depose_war
				target = root
			}
			add_prestige = 500
			spawn_army = {
				name = angry_hillman_mob
				uses_supply = no
				inheritable = yes
				men_at_arms = {
					type = clan_axemen
					stacks = 5
					}
				men_at_arms = {
					type = hillmen_skirmishers
					stacks = 2
					}
				location = scope:tull.location
			} 
		}
		trigger_event = { # Info event about Hwaldar's succession 
		 	id = rhudaur.2004
			days = 30
		}
	}
}

rhudaur.2004 = { # I need a strong heir in order to keep my realm together!
	content_source = realms_dlc
	type = character_event
	title = rhudaur.2004.t
	desc = rhudaur.2004.desc
	theme = skull
	left_portrait = {
		character = root
		animation = personality_rational
	}
	option = { #Unlock "Secure my succession" decision
		name = rhudaur.2004.a
		custom_tooltip = event_rhudaur_2004_a
		add_character_flag = hwaldar_succession_uncertain
	}
}

rhudaur.2005 = { #If Hwaldar loses his invasion against Mellondir (also if white peace)
	content_source = realms_dlc
	type = character_event
	title = rhudaur.2005.t
	desc = rhudaur.2005.desc
	theme = witchcraft
	
	trigger = { #Don't trigger this event when the war gets whitepeaced by swearing fealty to Argeleb
		NOT = {
			has_character_flag = hwaldar_swore_fealty
		}
	}
	
	left_portrait = {
		character = root
		animation = fear 
	}
	right_portrait = {
		character = scope:witchking
		animation = personality_vengeful 
	}
	immediate = {
		character:nazgul1 = { save_scope_as = witchking }
		character:linebroccach = { save_scope_as = hwaldar }
	}
	option = {
		name = rhudaur.2005.a #How could I fail so spectacularly?
		custom_tooltip = event_rhudaur_2500_a #WK becomes your direct liege
		custom_tooltip = event_rhudaur_2500_a2 #You're demoted to high chieftain
		trigger_event = rhudaur.2503 #Balkanization of Rhudaur
		add_prestige = -150
	}
}

rhudaur.2006 = { #Hwaldar presents a capable heir
	content_source = realms_dlc
	type = character_event
	title = rhudaur.2006.t
	desc = rhudaur.2006.desc
	theme = realm
	
	left_portrait = {
		character = root
		animation = marshal 
	}
	right_portrait = {
		character = scope:hwaldar_heir
	}
	immediate = {
		root.player_heir = { save_scope_as = hwaldar_heir }
	}
	option = { #Look upon your future ruler!
		name = rhudaur.2006.a
		add_prestige = 50
		root.dynasty = {
			add_dynasty_prestige = 100
		}	
		scope:hwaldar_heir = {
			create_story = story_hwaldar_heir_death
		}
		add_character_flag = hwaldar_succession_secured
		remove_character_flag = hwaldar_succession_uncertain
	}
}

rhudaur.2007 = { #Hwaldar's heir died prematurely
	content_source = realms_dlc
	type = character_event
	title = rhudaur.2007.t
	desc = rhudaur.2007.desc
	theme = skull
	
	left_portrait = {
		character = root
		animation = anger 
	}
	immediate = {
		root.player_heir = { save_scope_as = hwaldar_heir }
	}
	option = { #Unlock "Secure my succession" decision again
		name = rhudaur.2007.a
		custom_tooltip = event_rhudaur_2004_a
		remove_character_flag = hwaldar_succession_secured
		add_character_flag = hwaldar_succession_uncertain
	}
}

rhudaur.2008 = { # In case Mellondir seeks refuge in Arthedain or Cardolan
	content_source = realms_dlc
	type = character_event
	title = rhudaur.2008.t
	desc = rhudaur.2008.desc
	theme = war
	left_portrait = {
		character = root
		animation = celebrate_sword 
	}
	right_portrait = {
		character = scope:mellondir
		animation = sadness
	}
	immediate = {
		character:linemelosse33 = { save_scope_as = mellondir }
	}
	option = { # The craven has fled! The Angle is mine, along with its spoils of war.
		custom_tooltip = event_rhudaur_2008_a
		add_prestige = 50
		add_legitimacy = 25
		add_gold = 50
	}
}

## Hwaldar's death ##

rhudaur.2500 = { #Rhudaur succession when Hwaldar dies - unworthy heir
	content_source = realms_dlc
	type = character_event
	title = rhudaur.2500.t
	desc = rhudaur.2500.desc
	theme = alliance
	
	left_portrait = {
		character = root
		animation = fear 
	}
	right_portrait = {
		character = scope:witchking
		animation = personality_vengeful 
	}
	immediate = {
		character:nazgul1 = { save_scope_as = witchking }
		character:linebroccach = { save_scope_as = hwaldar }
	}
	option = {
		name = rhudaur.2500.a #Why couldn't I be stronger?
		custom_tooltip = event_rhudaur_2500_a #WK becomes your direct liege
		custom_tooltip = event_rhudaur_2500_a2 #You're demoted to high chieftain
		trigger_event = rhudaur.2503 #Balkanization of Rhudaur
		add_prestige = -150
	}
}

rhudaur.2501 = { #Hwaldar's heir: Trial of Strength
	content_source = realms_dlc
	type = character_event
	title = rhudaur.2501.t
	desc = rhudaur.2501.desc
	theme = crown
	
	left_portrait = {
		character = root
		animation = marshal 
	}
	right_portrait = {
		character = scope:witchking
		animation = personality_vengeful 
	}
	immediate = {
		character:nazgul1 = { save_scope_as = witchking }
		character:linebroccach = { save_scope_as = hwaldar }
	}
	
	option = { # I will prove myself worthy!
		name = rhudaur.2501.a
		add_prestige = 100
		scope:witchking = {
			add_opinion = {
				modifier = angry_opinion
				opinion = -75
				target = root
			}
			add_pressed_claim = title:k_rhudaur
		}
	}
	option = { # No, I will submit
		name = rhudaur.2501.b
		custom_tooltip = event_arnor_06003_b #WK becomes your direct liege
		custom_tooltip = event_arnor_06003_bb #You're demoted to high chieftain
		add_prestige = -150
		trigger_event = {
			id = rhudaur.2503 #Balkanization of Rhudaur
		}
	}
}

rhudaur.2502 = { # Witch-king decides if he wants to enforce tributary status on Hwaldar
	hidden = yes
	immediate = {
		character:nazgul1 = { save_scope_as = witchking }
		scope:witchking = {
			trigger_event = angmar.0504
		}
	}
}

rhudaur.2503 = { #Rhudaur gets balkanized and vassalized by the Witch-king
	hidden = yes
	
	immediate = {
		character:nazgul1 = { save_scope_as = witchking }
		character:linebraighir33 = { save_scope_as = tull }
		
		destroy_title = title:k_rhudaur #boom
		
		title:d_dor_en_egladil.holder = { save_scope_as = dor_en_egladil }  
		title:d_dol_tiriamon.holder = { save_scope_as = dol_tiriamon }
		title:d_hithaeglir_forn.holder = { save_scope_as = hithaeglir_forn }
		title:d_cameth_brin.holder = { save_scope_as = cameth_brin }
		title:d_hithaeglir_harad.holder = { save_scope_as = hithaeglir_harad }
		
		scope:dor_en_egladil= {
			if = {
				prev = character:linemelosse33 #Mellondir II
				add_legitimacy = 50
			}
			else = {
				create_title_and_vassal_change = {
					type = swear_fealty
					save_scope_as = change
					add_claim_on_loss = yes
				}
				change_liege = {
					liege = scope:witchking
					change = scope:change
				}
				resolve_title_and_vassal_change = scope:change

			}
		}
		
		scope:dol_tiriamon = {
			create_title_and_vassal_change = {
				type = swear_fealty
				save_scope_as = secondchange
				add_claim_on_loss = yes
			}
			change_liege = {
				liege = scope:witchking
				change = scope:secondchange
			}
			resolve_title_and_vassal_change = scope:secondchange
		}
		
		scope:hithaeglir_forn = {
			create_title_and_vassal_change = {
				type = swear_fealty
				save_scope_as = thirdchange
				add_claim_on_loss = yes
			}
			change_liege = {
				liege = scope:witchking
				change = scope:thirdchange
			}
			resolve_title_and_vassal_change = scope:thirdchange
		}
		
		scope:cameth_brin = {
			create_title_and_vassal_change = {
				type = swear_fealty
				save_scope_as = fourthchange
				add_claim_on_loss = yes
			}
			change_liege = {
				liege = scope:witchking
				change = scope:fourthchange
			}
			resolve_title_and_vassal_change = scope:fourthchange
		}
		
		scope:hithaeglir_harad = {
			create_title_and_vassal_change = {
				type = swear_fealty
				save_scope_as = fifthchange
				add_claim_on_loss = yes
			}
			change_liege = {
				liege = scope:witchking
				change = scope:fifthchange
			}
			resolve_title_and_vassal_change = scope:fifthchange
		}

		scope:tull = {
			trigger_event = rhudaur.3050 #Chieftain Tull gets the claim to the throne of Rhudaur as WK's puppet
		}
	}
}

## Pro-angmar faction ## 

rhudaur.3000 = { # Intro event for Chieftain Tull
	content_source = realms_dlc
	type = character_event
	title = rhudaur.3000.t
	desc = rhudaur.3000.desc
	theme = witchcraft
	left_portrait = {
		character = root
		animation = personality_zealous
	}
	immediate = {
		character:nazgul1 = { save_scope_as = witchking }
		character:linebroccach = { save_scope_as = hwaldar }
	}
	option = { #I shall claim kingship for my master - and myself.
		name = rhudaur.3000.a
		add_prestige = 50
		trigger_event = {
			id = rhudaur.3001
			days = 10
		}
	}
}

rhudaur.3001 = { # Get an alliance or get a claim
	content_source = realms_dlc
	type = character_event
	title = rhudaur.3001.t
	desc = rhudaur.3001.desc
	theme = alliance
	left_portrait = {
		character = root
		animation = personality_rational
	}
	immediate = {
		character:nazgul1 = { save_scope_as = witchking }
		character:linedeirach20 = { save_scope_as = delgnat } #your sister
		character:linedeirach19 = { save_scope_as = bratach } #bratach
	}
	option = { # I will strengthen my bonds with my kin (get an alliance with Bratach)
		name = rhudaur.3001.a
		custom_tooltip = event_rhudaur_3001_a
		create_alliance = { target = scope:bratach allied_through_owner = scope:bratach allied_through_target = scope:delgnat }
		scope:bratach = {
			add_opinion = {
				modifier = pleased_opinion
				opinion = 50
				target = root
			}
		}
	}
	option = { # I have no need for such weak allies
		name = rhudaur.3001.b
		add_prestige = 200
		add_pressed_claim = title:d_hithaeglir_forn
	}
}

rhudaur.3050 = { # In case Hwaldar loses Rhudaur or dies without a strong heir
	content_source = realms_dlc
	type = character_event
	title = rhudaur.3050.t
	desc = rhudaur.3050.desc
	theme = alliance
	left_portrait = {
		character = root
		animation = schadenfreude
	}
	right_portrait = {
		character = scope:witchking
		animation = disgust
	}
	immediate = {
		character:linebroccach = { save_scope_as = hwaldar }
		character:nazgul1 = { save_scope_as = witchking }
	}
	option = { # The fool is dead. I will secure his realm for myself!
		name = rhudaur.3050.a
		add_pressed_claim = title:k_rhudaur
		add_prestige = 150
		add_legitimacy = 50
	}
}
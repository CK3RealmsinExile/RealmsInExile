namespace = elven_hope

#######################
## ELVEN HOPE EVENTS ##
#######################

### Entering the Situation ###

elven_hope.0001 = { # Fullscreen event when the situation starts
	content_source = realms_dlc
	type = character_event
	window = fullscreen_event
	title = elven_hope.0001.t
	desc = elven_hope.0001.desc
	theme = realm
	trigger = { # we need to prevent this from firing for all players when a new player joins in MP
		is_ai = no
		NOT = { has_variable = elven_hope_0001_var }
		faith_is_evil = no
 	}
	override_background = { reference = elven_situation_fullscreen }
	override_sound = { reference = "event:/DLC/FP2/SFX/UI/fp2_struggle_ui_intro_animate" }

	cooldown = { years = 500 }

	widgets = {
		widget = {
 			gui = "event_window_widget_situation_info_elven_hope"
 			container = "dynamic_content_widget"
 			controller = situation_info
 			setup_scope = { situation:elven_hope_situation = { save_scope_as = situation } }
		}
	}
	immediate = {
		set_variable = elven_hope_0001_var
		save_scope_value_as = {
			name = start
			value = yes
		}
	}
	option = {
		name = elven_hope.0001.a
		clicksound = "event:/DLC/FP2/SFX/UI/fp2_struggle_start_select"
		if = {
			limit = { is_ai = no }
			trigger_event = elven_hope.0031 # Reset all variables to 0 in case you load in from main menu
		}
	}
}

elven_hope.0002 = { # Apply initial hope modifiers
	hidden = yes 
	immediate = {
		if = {
			limit = {
				any_character_situation = {
					any_situation_sub_region = {
						sub_region_current_phase = situation_elven_fading
						situation_sub_region_has_county = root.capital_county
					}
				}
			}
			add_character_modifier = elven_hope_fading_modifier
		}
		else_if = {
			limit = {
				any_character_situation = {
					any_situation_sub_region = {
						sub_region_current_phase = situation_elven_waning
						situation_sub_region_has_county = root.capital_county
					}
				}
			}
			add_character_modifier = elven_hope_waning_modifier
		}
		else_if = {
			limit = {
				any_character_situation = {
					any_situation_sub_region = {
						sub_region_current_phase = situation_elven_enduring
						situation_sub_region_has_county = root.capital_county
					}
				}
			}
			add_character_modifier = elven_hope_enduring_modifier
		}
		else_if = {
			limit = {
				any_character_situation = {
					any_situation_sub_region = {
						sub_region_current_phase = situation_elven_renewing
						situation_sub_region_has_county = root.capital_county
					}
				}
			}
			add_character_modifier = elven_hope_renewing_modifier
		}
		else_if = {
			limit = {
				any_character_situation = {
					any_situation_sub_region = {
						sub_region_current_phase = situation_elven_thriving
						situation_sub_region_has_county = root.capital_county
					}
				}
			}
			add_character_modifier = elven_hope_thriving_modifier
		}
	}
}

### Entering a new phase ###

elven_hope.0008 = { # Remove all character modifiers 
	hidden = yes 
	immediate = {
		remove_character_modifier = elven_hope_fading_modifier
		remove_character_modifier = elven_hope_waning_modifier
		remove_character_modifier = elven_hope_enduring_modifier
		remove_character_modifier = elven_hope_renewing_modifier
		remove_character_modifier = elven_hope_thriving_modifier
		trigger_event = elven_hope.0009
	}
}

elven_hope.0009 = { # Updating character flags
	hidden = yes 
	immediate = {
		if = {
			limit = {
				any_character_situation = {
					any_situation_sub_region = {
						sub_region_current_phase = situation_elven_fading
						situation_sub_region_has_county = root.capital_county
					}
				}
			}
			add_character_modifier = elven_hope_fading_modifier
			trigger_event = elven_hope.0010
		}
		else_if = {
			limit = {
				any_character_situation = {
					any_situation_sub_region = {
						sub_region_current_phase = situation_elven_waning
						situation_sub_region_has_county = root.capital_county
					}
				}
			}
			add_character_modifier = elven_hope_waning_modifier
			trigger_event = elven_hope.0011
		}
		else_if = {
			limit = {
				any_character_situation = {
					any_situation_sub_region = {
						sub_region_current_phase = situation_elven_enduring
						situation_sub_region_has_county = root.capital_county
					}
				}
			}
			add_character_modifier = elven_hope_enduring_modifier
			trigger_event = elven_hope.0012
		}
		else_if = {
			limit = {
				any_character_situation = {
					any_situation_sub_region = {
						sub_region_current_phase = situation_elven_renewing
						situation_sub_region_has_county = root.capital_county
					}
				}
			}
			add_character_modifier = elven_hope_renewing_modifier
			trigger_event = elven_hope.0013
		}
		else_if = {
			limit = {
				any_character_situation = {
					any_situation_sub_region = {
						sub_region_current_phase = situation_elven_thriving
						situation_sub_region_has_county = root.capital_county
					}
				}
			}
			add_character_modifier = elven_hope_thriving_modifier
			trigger_event = elven_hope.0014
		}
	}
}
	
elven_hope.0010 = { # Fading phase
	type = character_event
	title = elven_hope.0010.t
	desc = elven_hope.0010.desc
	theme = elven
	override_background = { reference = docks_elven }
	trigger = { # Does not need to trigger when the phase remains the same
		NOT = { has_character_flag = elven_hope_fading_flag }
		faith_is_evil = no
	}
	# widgets = { # TO DO: Make phase effects show up here
		# widget = {
 			# gui = "event_window_widget_situation_info_elven_hope"
 			# container = "dynamic_content_widget"
 			# controller = situation_info
 			# setup_scope = { situation:lotr_elven_hope_situation = { save_scope_as = situation } }
		# }
	# }
	cooldown = { days = 31 }
	left_portrait = {
		character = root
		animation = crying
	}
	immediate = {
		custom_tooltip = elven_hope.0010.tt
		remove_character_flag = elven_hope_fading_flag
		remove_character_flag = elven_hope_waning_flag
		remove_character_flag = elven_hope_enduring_flag
		remove_character_flag = elven_hope_renewing_flag
		remove_character_flag = elven_hope_thriving_flag
	}
	option = {
		name = elven_hope.0010.a
		add_character_flag = elven_hope_fading_flag
	}
}

elven_hope.0011 = { # Waning phase
	type = character_event
	title = elven_hope.0011.t
	desc = elven_hope.0011.desc
	theme = elven
	override_background = { reference = grey_havens }
	trigger = { # Does not need to trigger when the phase remains the same
		NOT = { has_character_flag = elven_hope_waning_flag}
		faith_is_evil = no
	}
	# widgets = { # TO DO: Make phase effects show up here
		# widget = {
 			# gui = "event_window_widget_situation_info_elven_hope"
 			# container = "dynamic_content_widget"
 			# controller = situation_info
 			# setup_scope = { situation:lotr_elven_hope_situation = { save_scope_as = situation } }
		# }
	# }
	cooldown = { days = 31 }
	left_portrait = {
		character = root
		animation = worry
	}
	immediate = {
		custom_tooltip = elven_hope.0011.tt
		remove_character_flag = elven_hope_fading_flag
		remove_character_flag = elven_hope_waning_flag
		remove_character_flag = elven_hope_enduring_flag
		remove_character_flag = elven_hope_renewing_flag
		remove_character_flag = elven_hope_thriving_flag
	}
	option = {
		name = elven_hope.0011.a
		add_character_flag = elven_hope_waning_flag
	}
}

elven_hope.0012 = { # Enduring phase
	type = character_event
	title = elven_hope.0012.t
	desc = elven_hope.0012.desc
	theme = elven
	override_background = { reference = amon_lanc }
	trigger = { # Does not need to trigger when the phase remains the same
		NOT = { has_character_flag = elven_hope_enduring_flag }
		faith_is_evil = no
	}
	# widgets = { # TO DO: Make phase effects show up here
		# widget = {
 			# gui = "event_window_widget_situation_info_elven_hope"
 			# container = "dynamic_content_widget"
 			# controller = situation_info
 			# setup_scope = { situation:lotr_elven_hope_situation = { save_scope_as = situation } }
		# }
	# }
	cooldown = { days = 31 }
	left_portrait = {
		character = root
		animation = personality_rational
	}
	immediate = {
		custom_tooltip = elven_hope.0012.tt
		remove_character_flag = elven_hope_fading_flag
		remove_character_flag = elven_hope_waning_flag
		remove_character_flag = elven_hope_enduring_flag
		remove_character_flag = elven_hope_renewing_flag
		remove_character_flag = elven_hope_thriving_flag
	}
	option = {
		name = elven_hope.0012.a
		add_character_flag = elven_hope_enduring_flag
	}
}

elven_hope.0013 = { # Renewing phase
	type = character_event
	title = elven_hope.0013.t
	desc = elven_hope.0013.desc
	theme = elven
	override_background = { reference = imladris }
	trigger = { # Does not need to trigger when the phase remains the same
		NOT = { has_character_flag = elven_hope_renewing_flag }
		faith_is_evil = no
	}
	# widgets = { # TO DO: Make phase effects show up here
		# widget = {
 			# gui = "event_window_widget_situation_info_elven_hope"
 			# container = "dynamic_content_widget"
 			# controller = situation_info
 			# setup_scope = { situation:lotr_elven_hope_situation = { save_scope_as = situation } }
		# }
	# }
	cooldown = { days = 31 }
	left_portrait = {
		character = root
		animation = personality_compassionate
	}
	immediate = {
		custom_tooltip = elven_hope.0013.tt
		remove_character_flag = elven_hope_fading_flag
		remove_character_flag = elven_hope_waning_flag
		remove_character_flag = elven_hope_enduring_flag
		remove_character_flag = elven_hope_renewing_flag
		remove_character_flag = elven_hope_thriving_flag
	}
	option = {
		name = elven_hope.0013.a
		add_character_flag = elven_hope_renewing_flag
	}
}

elven_hope.0014 = { # Thriving phase
	type = character_event
	title = elven_hope.0014.t
	desc = elven_hope.0014.desc
	theme = elven
	override_background = { reference = gondolin }
	trigger = { # Does not need to trigger when the phase remains the same
		NOT = { has_character_flag = elven_hope_thriving_flag }
		faith_is_evil = no
	}
	# widgets = { # TO DO: Make phase effects show up here
		# widget = {
 			# gui = "event_window_widget_situation_info_elven_hope"
 			# container = "dynamic_content_widget"
 			# controller = situation_info
 			# setup_scope = { situation:lotr_elven_hope_situation = { save_scope_as = situation } }
		# }
	# }
	cooldown = { days = 31 }
	left_portrait = {
		character = root
		animation = happiness
	}
	immediate = {
		custom_tooltip = elven_hope.0014.tt
		remove_character_flag = elven_hope_fading_flag
		remove_character_flag = elven_hope_waning_flag
		remove_character_flag = elven_hope_enduring_flag
		remove_character_flag = elven_hope_renewing_flag
		remove_character_flag = elven_hope_thriving_flag
	}
	option = {
		name = elven_hope.0014.a
		add_character_flag = elven_hope_thriving_flag
	}
}

### Reduce Development in Low Hope ###

elven_hope.0020 = { # Check phase and reduce dev at random
	hidden = yes 
	immediate = {
		# Make a list of all counties 
		every_realm_county = {
			every_county_province = {
				add_to_list = counties_with_secondary_holdings
			}
		}
		
		# Grab the holder of the Grey Havens 
		title:c_mithrhulond.holder = { save_scope_as = mithlondholder }
	
		# First, let's check the current situation phase and dish out random development reductions across the realm
		if = {
			limit = {
				any_character_situation = {
					any_situation_sub_region = {
						sub_region_current_phase = situation_elven_fading
						situation_sub_region_has_county = root.capital_county
					}
				}
			}
			every_realm_county = {
				limit = { 
					title_province = { has_holding_type = elven_holding }
					NOT = { this = root.capital_county }
				}
				save_scope_as = county_to_lose_dev
				random_list = {
					5 = {
						change_development_level = -1
						root = {
							send_interface_toast = {
								type = event_toast_effect_bad
								title = elven_county_lost_dev_toast
								custom_tooltip = elven_county_lost_dev_toast_desc
							}
						}
						scope:mithlondholder = {
							if = { 
								limit = { is_elf = yes } 
								add_elven_hope_effect = { VALUE = miniscule_elven_hope_loss HOPE_EFFECT = effect_elven_hope_elves_sailed_west }
							}
						}
					}
					5 = {
						change_development_level = -2
						root = {
							send_interface_toast = {
								type = event_toast_effect_bad
								title = elven_county_lost_dev_toast
								custom_tooltip = elven_county_lost_dev_toast_desc
							}
						}
						scope:mithlondholder = {
							if = { 
								limit = { is_elf = yes } 
								add_elven_hope_effect = { VALUE = minimal_elven_hope_loss HOPE_EFFECT = effect_elven_hope_elves_sailed_west }
							}
						}
					}
					90 = {
					}
				}
			}
		}
		else_if = {
			limit = {
				any_character_situation = {
					any_situation_sub_region = {
						sub_region_current_phase = situation_elven_waning
						situation_sub_region_has_county = root.capital_county
					}
				}
			}
			every_realm_county = {
				limit = { 
					title_province = { has_holding_type = elven_holding }
					NOT = { this = root.capital_county }
				}
				save_scope_as = county_to_lose_dev
				random_list = {
					5 = {
						change_development_level = -1
						root = {
							send_interface_toast = {
								type = event_toast_effect_bad
								title = elven_county_lost_dev_toast
								custom_tooltip = elven_county_lost_dev_toast_desc
							}
						}
						scope:mithlondholder = {
							if = { 
								limit = { is_elf = yes } 
								add_elven_hope_effect = { VALUE = miniscule_elven_hope_loss HOPE_EFFECT = effect_elven_hope_elves_sailed_west }
							}
						}
					}
					95 = {
					}
				}
			}
		}
		else_if = {
			limit = {
				any_character_situation = {
					any_situation_sub_region = {
						sub_region_current_phase = situation_elven_enduring
						situation_sub_region_has_county = root.capital_county
					}
				}
			}
			every_realm_county = {
				limit = { 
					title_province = { has_holding_type = elven_holding }
					NOT = { this = root.capital_county }
				}
				save_scope_as = county_to_lose_dev
				random_list = {
					2 = {
						change_development_level = -1
						root = {
							send_interface_toast = {
								type = event_toast_effect_bad
								title = elven_county_lost_dev_toast
								custom_tooltip = elven_county_lost_dev_toast_desc
							}
						}
						scope:mithlondholder = {
							if = { 
								limit = { is_elf = yes } 
								add_elven_hope_effect = { VALUE = miniscule_elven_hope_loss HOPE_EFFECT = effect_elven_hope_elves_sailed_west }
							}
						}
					}
					98 = {
					}
				}
			}
		}
		else_if = {
			limit = {
				any_character_situation = {
					any_situation_sub_region = {
						sub_region_current_phase = situation_elven_renewing
						situation_sub_region_has_county = root.capital_county
					}
				}
			}
			every_realm_county = {
				limit = { 
					title_province = { has_holding_type = elven_holding }
					NOT = { this = root.capital_county }
				}
				save_scope_as = county_to_lose_dev
				random_list = {
					1 = {
						change_development_level = -1
						root = {
							send_interface_toast = {
								type = event_toast_effect_bad
								title = elven_county_lost_dev_toast
								custom_tooltip = elven_county_lost_dev_toast_desc
							}
						}
						scope:mithlondholder = {
							if = { 
								limit = { is_elf = yes } 
								add_elven_hope_effect = { VALUE = miniscule_elven_hope_loss HOPE_EFFECT = effect_elven_hope_elves_sailed_west }
							}
						}
					}
					99 = {
					}
				}
			}
		}

		# Then, we check for any county that has zero development and remove its holdings, if it has any.
		every_realm_county = {
			limit = {
				development_level = 0
				any_county_province = {
					has_holding = yes
					has_holding_type = elven_holding
					is_county_capital = no
				}
			}
			every_county_province = {
				#add_to_list = counties_with_secondary_holdings
				limit = {
					has_holding = yes
					is_county_capital = no
					has_holding_type = elven_holding
				}
				random = {
					chance = 20 # 20
					save_scope_as = province_to_lose_holding
					remove_holding = yes
					root = {
						send_interface_toast = {
							type = event_toast_effect_bad
							title = elven_county_lost_holding_toast
							custom_tooltip = elven_county_lost_holding_toast_desc
						}
					}
					scope:mithlondholder = {
						if = { 
							limit = { is_elf = yes } 
							add_elven_hope_effect = { VALUE = minimal_elven_hope_loss HOPE_EFFECT = effect_elven_hope_elves_sailed_west }
						}
					}
				}
			}
		}
		# Lastly, check if any counties have zero development and no other holdings. Chance to make it wastelands.
		every_realm_county = { 
			limit = {
				development_level = 0
				title_province = { has_holding_type = elven_holding }
				NOT = { is_in_list = counties_with_secondary_holdings }
			}
			save_scope_as = abandoned_county
			random = {
				chance = 15 # 20?
				add_county_modifier = elves_are_leaving_modifier
				if = {
					limit = { this.holder = { is_ai = no } }
					this.holder = { trigger_event = elven_hope.0021 } # Chance to convince people to stay
				}
				else_if = {
					limit = { this.holder.liege = { is_ai = no } }
					this.holder.liege = { trigger_event = elven_hope.0022 } # Chance to convince holder to stay
				}
				else = {
					this.holder.top_liege = { trigger_event = elven_hope.0022 } # Chance to convince holder to stay (AI and Player)
				}
			}
		}
	}
}

elven_hope.0021 = { # Chance to convince the populace of your held county to stay
	type = character_event
	title = elven_hope.0021.t
	desc = elven_hope.0021.desc
	theme = travel_sea
	override_background = { reference = docks_elven }
	
	left_portrait = {
		character = root 
		animation = pondering
	}
	right_portrait = {
		character = scope:leaving_elf 
		animation = war_over_loss
	}
	immediate = {
		random_held_county = {
			limit = { has_county_modifier = elves_are_leaving_modifier }
			save_scope_as = county_being_abandoned 
		}
		random_courtier = { save_scope_as = leaving_elf }
	}
	option = { # I have to try and convince them to stay 
		name = elven_hope.0021.a 
		custom_tooltip = elven_hope.0021.a.tt
		hidden_effect = {
			random_list = {
				20 = { # Diplo duel 
					duel = {
						skill = diplomacy
						value = 11
						50 = {
							compare_modifier = {
								value = scope:duel_value
								multiplier = 1
								max = 10
							}
							send_interface_toast = {
								title = elven_hope.0021.a.success
								left_icon = root 
								add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_convinced_to_stay }
								scope:county_being_abandoned = { change_development_level = 2 }
							}
						}
						50 = {
							compare_modifier = {
								value = scope:duel_value
								multiplier = -1
								min = -10
							}
							send_interface_toast = {
								title = elven_hope.0021.a.failure
								left_icon = root 
								add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_character_sailed_west }
							}
							add_stress = 20
							make_settlement_county_wilderness = { COUNTY = scope:county_being_abandoned }
							every_liege_or_above = {
								send_interface_toast = {
									type = event_toast_effect_bad
									title = elven_hope.0020.tt
								}
							}
						}
					}
				}
				20 = { # Stewardshipo duel 
					duel = {
						skill = stewardship
						value = 11
						50 = {
							compare_modifier = {
								value = scope:duel_value
								multiplier = 1
								max = 10
							}
							send_interface_toast = {
								title = elven_hope.0021.a.success
								left_icon = root 
								add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_convinced_to_stay }
								scope:county_being_abandoned = { change_development_level = 2 }
							}
						}
						50 = {
							compare_modifier = {
								value = scope:duel_value
								multiplier = -1
								min = -10
							}
							send_interface_toast = {
								title = elven_hope.0021.a.failure
								left_icon = root 
								add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_character_sailed_west }
							}
							add_stress = 20
							make_settlement_county_wilderness = { COUNTY = scope:county_being_abandoned }
							every_liege_or_above = {
								send_interface_toast = {
									type = event_toast_effect_bad
									title = elven_hope.0020.tt
								}
							}
						}
					}
				}
				20 = { # Martial duel 
					duel = {
						skill = martial
						value = 11
						50 = {
							compare_modifier = {
								value = scope:duel_value
								multiplier = 1
								max = 10
							}
							send_interface_toast = {
								title = elven_hope.0021.a.success
								left_icon = root 
								add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_convinced_to_stay }
								scope:county_being_abandoned = { change_development_level = 2 }
							}
						}
						50 = {
							compare_modifier = {
								value = scope:duel_value
								multiplier = -1
								min = -10
							}
							send_interface_toast = {
								title = elven_hope.0021.a.failure
								left_icon = root 
								add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_character_sailed_west }
							}
							add_stress = 20
							make_settlement_county_wilderness = { COUNTY = scope:county_being_abandoned }
							every_liege_or_above = {
								send_interface_toast = {
									type = event_toast_effect_bad
									title = elven_hope.0020.tt
								}
							}
						}
					}
				}
				20 = { # Intrigue duel 
					duel = {
						skill = intrigue
						value = 11
						50 = {
							compare_modifier = {
								value = scope:duel_value
								multiplier = 1
								max = 10
							}
							send_interface_toast = {
								title = elven_hope.0021.a.success
								left_icon = root 
								add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_convinced_to_stay }
								scope:county_being_abandoned = { change_development_level = 2 }
							}
						}
						50 = {
							compare_modifier = {
								value = scope:duel_value
								multiplier = -1
								min = -10
							}
							send_interface_toast = {
								title = elven_hope.0021.a.failure
								left_icon = root 
								add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_character_sailed_west }
							}
							add_stress = 20
							make_settlement_county_wilderness = { COUNTY = scope:county_being_abandoned }
							every_liege_or_above = {
								send_interface_toast = {
									type = event_toast_effect_bad
									title = elven_hope.0020.tt
								}
							}
						}
					}
				}
				20 = { # Learning duel 
					duel = {
						skill = learning
						value = 11
						50 = {
							compare_modifier = {
								value = scope:duel_value
								multiplier = 1
								max = 10
							}
							send_interface_toast = {
								title = elven_hope.0021.a.success
								left_icon = root 
								add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_convinced_to_stay }
								scope:county_being_abandoned = { change_development_level = 2 }
							}
						}
						50 = {
							compare_modifier = {
								value = scope:duel_value
								multiplier = -1
								min = -10
							}
							send_interface_toast = {
								title = elven_hope.0021.a.failure
								left_icon = root 
								add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_character_sailed_west }
							}
							add_stress = 20
							make_settlement_county_wilderness = { COUNTY = scope:county_being_abandoned }
							every_liege_or_above = {
								send_interface_toast = {
									type = event_toast_effect_bad
									title = elven_hope.0020.tt
								}
							}
						}
					}
				}
			}
		}
	}
	after = {
		scope:county_being_abandoned = {
			remove_county_modifier = elves_are_leaving_modifier
		}
	}
}

elven_hope.0022 = { # Chance to convince the holder of a county to stay
	type = character_event
	title = elven_hope.0022.t
	desc = elven_hope.0022.desc
	theme = travel_sea
	override_background = { reference = docks_elven }
	
	left_portrait = {
		character = root 
		animation = worry
	}
	right_portrait = {
		character = scope:leaving_vassal
		animation = holding_staff
	}
	immediate = {
		random_realm_county = {
			limit = { has_county_modifier = elves_are_leaving_modifier }
			save_scope_as = county_being_abandoned 
			this.holder = { save_scope_as = leaving_vassal }
		}
	}
	option = { # I have to try and convince them to stay 
		name = elven_hope.0022.a 
		custom_tooltip = elven_hope.0022.a.tt
		hidden_effect = {
			random_list = {
				20 = { # Diplo duel 
					duel = {
						skill = diplomacy
						target = scope:leaving_vassal
						50 = {
							compare_modifier = {
								value = scope:duel_value
								multiplier = 1
								max = 10
							}
							send_interface_toast = {
								title = elven_hope.0022.a.success
								left_icon = root 
								add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_convinced_to_stay }
								scope:county_being_abandoned = { change_development_level = 2 }
							}
						}
						50 = {
							compare_modifier = {
								value = scope:duel_value
								multiplier = -1
								min = -10
							}
							send_interface_toast = {
								title = elven_hope.0022.a.failure
								left_icon = root 
								type = event_toast_effect_bad
								add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_character_sailed_west }
							}
							add_stress = 20
							every_liege_or_above = {
								send_interface_toast = {
									type = event_toast_effect_bad
									title = elven_hope.0020.tt
								}
							}
							add_character_flag = failed_to_convince_elf
							
							hidden_effect = {
								scope:leaving_vassal = { save_scope_as = elf_trying_to_depart }
								send_interface_toast = {
									type = event_toast_effect_bad
									title = sail_to_valinor_toast
									left_icon = root
									right_icon = scope:elf_trying_to_depart
									custom_tooltip = sail_to_valinor_toast_desc
								}
							}
							scope:leaving_vassal = {
								make_settlement_county_wilderness = { COUNTY = scope:county_being_abandoned }
								every_held_title = {
									create_title_and_vassal_change = {
										type = granted
										save_scope_as = change
									}
									change_title_holder = {
										holder = root
										change = scope:change
										take_baronies = yes
									}
									resolve_title_and_vassal_change = scope:change
								}
								hidden_effect = {
									every_claim = {
										root = { remove_claim = prev }
									}
								}
								add_trait = sailed_west
								hidden_effect = {
									set_employer = title:k_tirion.holder
								}
							}
						}
					}
				}
				20 = { # Stewardshipo duel 
					duel = {
						skill = stewardship
						target = scope:leaving_vassal
						50 = {
							compare_modifier = {
								value = scope:duel_value
								multiplier = 1
								max = 10
							}
							send_interface_toast = {
								title = elven_hope.0022.a.success
								left_icon = root 
								add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_convinced_to_stay }
								scope:county_being_abandoned = { change_development_level = 2 }
							}
						}
						50 = {
							compare_modifier = {
								value = scope:duel_value
								multiplier = -1
								min = -10
							}
							send_interface_toast = {
								title = elven_hope.0022.a.failure
								left_icon = root 
								type = event_toast_effect_bad
								add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_character_sailed_west }
							}
							add_stress = 20
							every_liege_or_above = {
								send_interface_toast = {
									type = event_toast_effect_bad
									title = elven_hope.0020.tt
								}
							}
							add_character_flag = failed_to_convince_elf
							
							hidden_effect = {
								scope:leaving_vassal = { save_scope_as = elf_trying_to_depart }
								send_interface_toast = {
									type = event_toast_effect_bad
									title = sail_to_valinor_toast
									left_icon = root
									right_icon = scope:elf_trying_to_depart
									custom_tooltip = sail_to_valinor_toast_desc
								}
							}
							scope:leaving_vassal = {
								make_settlement_county_wilderness = { COUNTY = scope:county_being_abandoned }
								every_held_title = {
									create_title_and_vassal_change = {
										type = granted
										save_scope_as = change
									}
									change_title_holder = {
										holder = root
										change = scope:change
										take_baronies = yes
									}
									resolve_title_and_vassal_change = scope:change
								}
								hidden_effect = {
									every_claim = {
										root = { remove_claim = prev }
									}
								}
								add_trait = sailed_west
								hidden_effect = {
									set_employer = title:k_tirion.holder
								}
							}
						}
					}
				}
				20 = { # Martial duel 
					duel = {
						skill = martial
						target = scope:leaving_vassal
						50 = {
							compare_modifier = {
								value = scope:duel_value
								multiplier = 1
								max = 10
							}
							send_interface_toast = {
								title = elven_hope.0022.a.success
								left_icon = root 
								add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_convinced_to_stay }
								scope:county_being_abandoned = { change_development_level = 2 }
							}
						}
						50 = {
							compare_modifier = {
								value = scope:duel_value
								multiplier = -1
								min = -10
							}
							send_interface_toast = {
								title = elven_hope.0022.a.failure
								left_icon = root 
								type = event_toast_effect_bad
								add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_character_sailed_west }
							}
							add_stress = 20
							every_liege_or_above = {
								send_interface_toast = {
									type = event_toast_effect_bad
									title = elven_hope.0020.tt
								}
							}
							add_character_flag = failed_to_convince_elf
							
							hidden_effect = {
								scope:leaving_vassal = { save_scope_as = elf_trying_to_depart }
								send_interface_toast = {
									type = event_toast_effect_bad
									title = sail_to_valinor_toast
									left_icon = root
									right_icon = scope:elf_trying_to_depart
									custom_tooltip = sail_to_valinor_toast_desc
								}
							}
							scope:leaving_vassal = {
								make_settlement_county_wilderness = { COUNTY = scope:county_being_abandoned }
								every_held_title = {
									create_title_and_vassal_change = {
										type = granted
										save_scope_as = change
									}
									change_title_holder = {
										holder = root
										change = scope:change
										take_baronies = yes
									}
									resolve_title_and_vassal_change = scope:change
								}
								hidden_effect = {
									every_claim = {
										root = { remove_claim = prev }
									}
								}
								add_trait = sailed_west
								hidden_effect = {
									set_employer = title:k_tirion.holder
								}
							}
						}
					}
				}
				20 = { # Intrigue duel 
					duel = {
						skill = intrigue
						target = scope:leaving_vassal
						50 = {
							compare_modifier = {
								value = scope:duel_value
								multiplier = 1
								max = 10
							}
							send_interface_toast = {
								title = elven_hope.0022.a.success
								left_icon = root 
								add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_convinced_to_stay }
								scope:county_being_abandoned = { change_development_level = 2 }
							}
						}
						50 = {
							compare_modifier = {
								value = scope:duel_value
								multiplier = -1
								min = -10
							}
							send_interface_toast = {
								title = elven_hope.0022.a.failure
								left_icon = root 
								type = event_toast_effect_bad
								add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_character_sailed_west }
							}
							add_stress = 20
							every_liege_or_above = {
								send_interface_toast = {
									type = event_toast_effect_bad
									title = elven_hope.0020.tt
								}
							}
							add_character_flag = failed_to_convince_elf
							
							hidden_effect = {
								scope:leaving_vassal = { save_scope_as = elf_trying_to_depart }
								send_interface_toast = {
									type = event_toast_effect_bad
									title = sail_to_valinor_toast
									left_icon = root
									right_icon = scope:elf_trying_to_depart
									custom_tooltip = sail_to_valinor_toast_desc
								}
							}
							scope:leaving_vassal = {
								make_settlement_county_wilderness = { COUNTY = scope:county_being_abandoned }
								every_held_title = {
									create_title_and_vassal_change = {
										type = granted
										save_scope_as = change
									}
									change_title_holder = {
										holder = root
										change = scope:change
										take_baronies = yes
									}
									resolve_title_and_vassal_change = scope:change
								}
								hidden_effect = {
									every_claim = {
										root = { remove_claim = prev }
									}
								}
								add_trait = sailed_west
								hidden_effect = {
									set_employer = title:k_tirion.holder
								}
							}
						}
					}
				}
				20 = { # Learning duel 
					duel = {
						skill = learning
						target = scope:leaving_vassal
						50 = {
							compare_modifier = {
								value = scope:duel_value
								multiplier = 1
								max = 10
							}
							send_interface_toast = {
								title = elven_hope.0022.a.success
								left_icon = root 
								add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_convinced_to_stay }
								scope:county_being_abandoned = { change_development_level = 2 }
							}
						}
						50 = {
							compare_modifier = {
								value = scope:duel_value
								multiplier = -1
								min = -10
							}
							send_interface_toast = {
								title = elven_hope.0022.a.failure
								left_icon = root 
								type = event_toast_effect_bad
								add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_character_sailed_west }
							}
							add_stress = 20
							every_liege_or_above = {
								send_interface_toast = {
									type = event_toast_effect_bad
									title = elven_hope.0020.tt
								}
							}
							add_character_flag = failed_to_convince_elf
							
							hidden_effect = {
								scope:leaving_vassal = { save_scope_as = elf_trying_to_depart }
								send_interface_toast = {
									type = event_toast_effect_bad
									title = sail_to_valinor_toast
									left_icon = root
									right_icon = scope:elf_trying_to_depart
									custom_tooltip = sail_to_valinor_toast_desc
								}
							}
							scope:leaving_vassal = {
								make_settlement_county_wilderness = { COUNTY = scope:county_being_abandoned }
								every_held_title = {
									create_title_and_vassal_change = {
										type = granted
										save_scope_as = change
									}
									change_title_holder = {
										holder = root
										change = scope:change
										take_baronies = yes
									}
									resolve_title_and_vassal_change = scope:change
								}
								hidden_effect = {
									every_claim = {
										root = { remove_claim = prev }
									}
								}
								add_trait = sailed_west
								hidden_effect = {
									set_employer = title:k_tirion.holder
								}
							}
						}
					}
				}
			}
		}
	}
	after = {
		hidden_effect = {
			scope:county_being_abandoned = {
				remove_county_modifier = elves_are_leaving_modifier
			}
		}
		if = {
			limit = { has_character_flag = failed_to_convince_elf }
			remove_character_flag = failed_to_convince_elf
			scope:county_being_abandoned = { # Make sure Tom is the holder
				create_title_and_vassal_change = {
					type = granted
					save_scope_as = change
				}
				change_title_holder = {
					holder = character:k_wastelands_holder
					change = scope:change
					take_baronies = yes
				}
				resolve_title_and_vassal_change = scope:change
			}
		}
	}
}

### Display evil rulers in a subregion ###

elven_hope.0030 = { # Show the amount of evil rulers 
	type = character_event
	title = elven_hope.0030.t
	desc = elven_hope.0030.desc
	theme = orcs

	cooldown = { years = 10 }
	
	left_portrait = {
		character = root 
		animation = worry 
	}
	
	immediate = { # Time for some MATH 
		situation:elven_hope_situation ?= {
			every_situation_sub_region = {
				limit = {
					any_situation_sub_region_participant_group = {
						participant_group_type = elven_rulers_capital
						participant_group_has_character = root
					}
				}
				save_scope_as = my_elven_subregion
			}
		}
		# root = { # For every count, lose 1 hope
			# set_variable = {
				# name = evil_counts_in_my_subregion
				# value = scope:my_elven_subregion.var:evil_counts_in_subregion
			# }
		# }
		# root = {
			# set_variable = {
				# name = evil_dukes_in_my_subregion
				# value = scope:my_elven_subregion.var:evil_dukes_in_subregion
			# }
		# }
		# root = { # For every duke, lose 2 hope
			# change_variable = {
				# name = evil_dukes_in_my_subregion
				# multiply = 2
			# }
		# }
		# root = {
			# set_variable = {
				# name = evil_kings_in_my_subregion
				# value = scope:my_elven_subregion.var:evil_kings_in_subregion
			# }
		# }
		# root = { # For every king, lose 3 hope
			# change_variable = {
				# name = evil_kings_in_my_subregion
				# multiply = 3
			# }
		# }
		# root = {
			# set_variable = {
				# name = evil_emperors_in_my_subregion
				# value = scope:my_elven_subregion.var:evil_emperors_in_subregion
			# }
		# }
		# root = { # For every emperor, lose 4 hope
			# change_variable = {
				# name = evil_emperors_in_my_subregion
				# multiply = 4
			# }
		# }
		# root = {
			# set_variable = {
				# name = evil_hegemons_in_my_subregion
				# value = scope:my_elven_subregion.var:evil_hegemons_in_subregion
			# }
		# }
		# root = { # For every hegemon, lose 5 hope
			# change_variable = {
				# name = evil_hegemons_in_my_subregion
				# multiply = 5
			# }
		# }
		root = { # Set variable for total calculation
			set_variable = {
				name = evil_counties_in_my_subregion
				value = 0
			}
		}
		root = { # Add no. of counties 
			change_variable = {
				name = evil_counties_in_my_subregion
				add = scope:my_elven_subregion.var:evil_counties_per_subregion
				# add = { # Halve the value if balancing requires it
					# add = scope:my_elven_subregion.var:evil_counties_per_subregion
					# divide = 2
					# round = yes 
				# }
			}
		}
		# root = { # Add counts 
			# change_variable = {
				# name = evil_rulers_in_my_subregion
				# add = root.var:evil_counts_in_my_subregion
			# }
		# }
		# root = { # Add dukes 
			# change_variable = {
				# name = evil_rulers_in_my_subregion
				# add = root.var:evil_dukes_in_my_subregion
			# }
		# }
		# root = { # Add kings 
			# change_variable = {
				# name = evil_rulers_in_my_subregion
				# add = root.var:evil_kings_in_my_subregion
			# }
		# }
		# root = { # Add emperors 
			# change_variable = {
				# name = evil_rulers_in_my_subregion
				# add = root.var:evil_emperors_in_my_subregion
			# }
		# }
		# root = { # Add hegemons 
			# change_variable = {
				# name = evil_rulers_in_my_subregion
				# add = root.var:evil_hegemons_in_my_subregion
			# }
		# }
		root = { # Flip the final value to negative 
			change_variable = {
				name = evil_counties_in_my_subregion
				multiply = -1
			}
		}
	}
	
	option = { # Drop hope according to the calculation
		name = elven_hope.0030.a 
		add_elven_hope_effect = { VALUE = root.var:evil_counties_in_my_subregion HOPE_EFFECT = effect_elven_evil_rulers }
	}
}

elven_hope.0031 = { # Set all subregion values back to zero 
	hidden = yes 
	# orphan = yes # Might not be needed atm
	# type = character_event
	# title = elven_hope.0031.t
	# desc = elven_hope.0031.desc
	# theme = orcs
	
	# left_portrait = {
		# character = root 
		# animation = happiness 
	# }
	immediate = {
		situation:elven_hope_situation ?= {
			situation_sub_region:rivendell_lorien = { #Rivendell-Lorien
				set_variable = {
					name = evil_rulers_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_counts_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_dukes_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_kings_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_emperors_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_hegemons_in_subregion
					value = 0
				}
			}
			situation_sub_region:lindon = { #Lindon
				set_variable = {
					name = evil_rulers_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_counts_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_dukes_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_kings_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_emperors_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_hegemons_in_subregion
					value = 0
				}
			}
			situation_sub_region:lasgalen = { #Greenwood
				set_variable = {
					name = evil_rulers_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_counts_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_dukes_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_kings_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_emperors_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_hegemons_in_subregion
					value = 0
				}
			}
			situation_sub_region:nelornieth = {
				set_variable = {
					name = evil_rulers_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_counts_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_dukes_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_kings_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_emperors_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_hegemons_in_subregion
					value = 0
				}
			}
			situation_sub_region:thani_hazad = {
				set_variable = {
					name = evil_rulers_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_counts_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_dukes_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_kings_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_emperors_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_hegemons_in_subregion
					value = 0
				}
			}
			situation_sub_region:utter_south = {
				set_variable = {
					name = evil_rulers_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_counts_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_dukes_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_kings_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_emperors_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_hegemons_in_subregion
					value = 0
				}
			}
			#situation_sub_region:western_rhovanion = {
			#	set_variable = {
			#		name = evil_rulers_in_subregion
			#		value = 0
			#	}
			#	set_variable = {
			#		name = evil_counts_in_subregion
			#		value = 0
			#	}
			#	set_variable = {
			#		name = evil_dukes_in_subregion
			#		value = 0
			#	}
			#	set_variable = {
			#		name = evil_kings_in_subregion
			#		value = 0
			#	}
			#	set_variable = {
			#		name = evil_emperors_in_subregion
			#		value = 0
			#	}
			#	set_variable = {
			#		name = evil_hegemons_in_subregion
			#		value = 0
			#	}
			#}
			situation_sub_region:eriador = {
				set_variable = {
					name = evil_rulers_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_counts_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_dukes_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_kings_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_emperors_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_hegemons_in_subregion
					value = 0
				}
			}
			situation_sub_region:eastern_rhovanion = {
				set_variable = {
					name = evil_rulers_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_counts_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_dukes_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_kings_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_emperors_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_hegemons_in_subregion
					value = 0
				}
			}
			situation_sub_region:gondor = {
				set_variable = {
					name = evil_rulers_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_counts_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_dukes_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_kings_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_emperors_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_hegemons_in_subregion
					value = 0
				}
			}
			situation_sub_region:bay_of_ormal = {
				set_variable = {
					name = evil_rulers_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_counts_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_dukes_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_kings_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_emperors_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_hegemons_in_subregion
					value = 0
				}
			}
			situation_sub_region:bay_of_tulwang = {
				set_variable = {
					name = evil_rulers_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_counts_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_dukes_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_kings_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_emperors_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_hegemons_in_subregion
					value = 0
				}
			}
			situation_sub_region:haradwaith = {
				set_variable = {
					name = evil_rulers_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_counts_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_dukes_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_kings_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_emperors_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_hegemons_in_subregion
					value = 0
				}
			}
			situation_sub_region:mordor = {
				set_variable = {
					name = evil_rulers_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_counts_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_dukes_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_kings_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_emperors_in_subregion
					value = 0
				}
				set_variable = {
					name = evil_hegemons_in_subregion
					value = 0
				}
			}
			# every_situation_sub_region = {
				# limit = {
					# any_situation_sub_region_participant = {
						# this = root
					# }
				# }
				# save_scope_as = my_elven_subregion
			# }
		}
	}
	# option = { # Okay
		# name = elven_hope.0031.a
	# }
}

# elven_hope.0032 = { # Small trickle of passive hope gain for Lindon // not needed atm, reactivate if need be
	# hidden = yes 
	# cooldown = { years = 5 }
	# immediate = {
		# add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
	# }
# }

### Random Pulse Events ###

elven_hope.0100 = { # Dreams of the Sea
	type = character_event
	title = elven_hope.0100.t
	desc = elven_hope.0100.desc
	theme = elven
	override_background = { reference = grey_havens }

	cooldown = { months = 7 }
	
	trigger = {
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}
	
	left_portrait = {
		character = root
		animation = worry
	}
	immediate = {
		add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
	}
	option = { # One day, all of us will sail
		name = elven_hope.0100.a
		add_stress = -40
	}
	option = { # I shall sing a song of hope 
		name = elven_hope.0100.b 
		add_stress = 20
		duel = {
			skill = diplomacy
			value = 12
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					max = 10
				}
				send_interface_toast = {
					title = elven_hope.0100.b.success
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -10
				}
				send_interface_toast = {
					title = elven_hope.0100.b.failure
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
				}
				add_stress = 20
			}
		}
	}
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}

elven_hope.0101 = { # The Trees Do Not Sing
	type = character_event
	title = elven_hope.0101.t
	desc = elven_hope.0101.desc
	theme = elven
	override_background = { reference = wilderness_forest_pine }
	trigger = {
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}
	cooldown = { months = 7 }
	left_portrait = {
		character = root
		animation = survey_staff
	}
	immediate = {
		add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
	}
	option = { # Their songs will return with the changing of the season
		name = elven_hope.0101.a
		add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
	}
	option = { # I shall investigate this matter
		name = elven_hope.0101.b 
		duel = {
			skill = learning 
			value = 12
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					max = 10
				}
				send_interface_toast = {
					title = elven_hope.0101.b.success
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -10
				}
				send_interface_toast = {
					title = elven_hope.0101.b.failure
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
				}
				add_stress = 20
			}
		}
	}
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}

elven_hope.0102 = { # Child of Spring
	type = character_event
	title = elven_hope.0102.t
	desc = elven_hope.0102.desc
	theme = elven
	override_background = { reference = relaxing_room }

	cooldown = { years = 30 }
	trigger = {
		any_courtier = {
			is_female = yes 
			is_married = yes 
			is_elf = yes
			NOR = {
				primary_spouse = root 
				has_character_modifier = elf_child_limit_modifier # No, Galadriel, bad girl!
			}
		}
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:new_mother
		animation = newborn 
	}
	immediate = {
		random_courtier = {
			limit = {
				is_female = yes 
				is_married = yes 
				is_elf = yes
				NOR = {
					primary_spouse = root 
					has_character_modifier = elf_child_limit_modifier # No, Galadriel, bad girl!
				}
			}
			save_scope_as = new_mother 
		}
		create_character = {
			mother = scope:new_mother
			father = scope:new_mother.primary_spouse
			employer = root
			culture = root.culture
			faith = root.faith
			dynasty_house = scope:new_mother.primary_spouse.house
			gender_female_chance = 50
			age = 0 
			save_scope_as = child_of_spring
		}
		add_elven_hope_effect = { VALUE = major_elven_hope_gain HOPE_EFFECT = effect_elven_hope_child_has_been_born }
	}
	option = { # What hopeful news! Praise their union!
		name = elven_hope.0102.a
		add_prestige = minor_prestige_gain
		every_courtier = {
			limit = { NOT = { this = scope:new_mother } }
			add_opinion = {
				target = scope:new_mother
				modifier = friendliness_opinion
				opinion = 15
			}
		}
	}
	option = { # Let mother and child rest.
		name = elven_hope.0102.b
		add_stress = -20 
		add_piety = minor_piety_gain
	}
	option = { # We shall celebrate this 
		name = elven_hope.0102.c
		remove_short_term_gold = medium_gold_value 
		add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_inspired_by_sight }
	}
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}

elven_hope.0103 = { # A Nightly Departure
	type = character_event
	title = elven_hope.0103.t
	desc = elven_hope.0103.desc
	theme = elven
	override_background = { reference = docks_elven }
	trigger = {
		any_realm_province = { is_coastal = yes }
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}

	immediate = {
		add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
	}

	cooldown = { months = 7 }
	left_portrait = {
		character = root
		animation = lantern
	}
	option = { # They are free to sail
		name = elven_hope.0103.a
		add_piety = medium_piety_gain 
		add_legitimacy = medium_legitimacy_gain
	}
	option = { # Convince them to say farewell
		name = elven_hope.0103.b 
		remove_short_term_gold = miniscule_gold_value
		add_legitimacy = minor_legitimacy_loss
		duel = {
			skill = diplomacy
			value = 12
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					max = 10
				}
				send_interface_toast = {
					title = elven_hope.0103.b.success
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -10
				}
				send_interface_toast = {
					title = elven_hope.0103.b.failure
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
				}
				add_stress = 20
			}
		}
	}
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}

elven_hope.0104 = { # The Lay of Kin Long Lost
	type = character_event
	title = elven_hope.0104.t
	desc = elven_hope.0104.desc
	theme = elven
	override_background = { reference = wilderness_forest_deep }
	trigger = {
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}
	cooldown = { months = 7 }
	left_portrait = {
		character = root
		animation = interested
	}
	right_portrait = {
		character = scope:elder_courtier
		animation = storyteller
	}
	immediate = {
		random_courtier = { 
			limit = {
				is_elf = yes
				is_lotr_adult = yes 
			}
			save_scope_as = elder_courtier
		}
		add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_inspired_by_sight }
	}
	option = { # The past is lost to us
		name = elven_hope.0104.a
		add_prestige = medium_prestige_gain
		add_legitimacy = minor_legitimacy_gain
	}
	option = { # Let the memory strengthen our resolve
		name = elven_hope.0104.b 
		add_piety = minor_piety_gain
		add_stress = -20
	}
	option = { # Commission the lay to be sung often
		name = elven_hope.0104.c
		remove_short_term_gold = minor_gold_value
		duel = {
			skill = stewardship
			value = 12
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					max = 10
				}
				send_interface_toast = {
					title = elven_hope.0104.c.success
					left_icon = root 
					add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -10
				}
				send_interface_toast = {
					title = elven_hope.0104.c.failure
					left_icon = root 
					add_elven_hope_effect = { VALUE = minimal_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
				}
				add_stress = 20
			}
		}
	}
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}

elven_hope.0105 = { # A World Marred by Evil
	type = character_event
	title = elven_hope.0105.t
	desc = elven_hope.0105.desc
	theme = elven
	override_background = { reference = wilderness }
	trigger = {
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}
	cooldown = { months = 7 }
	left_portrait = {
		character = root
		animation = throne_room_two_handed_passive_shield
	}
	immediate = {
		add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
	}
	option = { # We are an island in the sea of darkness
		name = elven_hope.0105.a
		add_prestige = major_prestige_gain
		add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
	}
	option = { # Even so, we have endured
		name = elven_hope.0105.b
		duel = {
			skill = martial
			value = 12
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					max = 10
				}
				send_interface_toast = {
					title = elven_hope.0105.b.success
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -10
				}
				send_interface_toast = {
					title = elven_hope.0105.b.failure
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
				}
				add_stress = 20
			}
		}
	}
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}

elven_hope.0106 = { # The Waning of Light
	type = character_event
	title = elven_hope.0106.t
	desc = elven_hope.0106.desc
	theme = elven
	override_background = { reference = ep2_forest_managed }
	trigger = {
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}
	cooldown = { months = 7 }
	left_portrait = {
		character = root
		animation = disappointed
	}
	immediate = {
		add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
	}
	option = { # All things must fade
		name = elven_hope.0106.a
		add_learning_lifestyle_xp = 200
	}
	option = { # We shall plant new seeds, and tend them with care
		name = elven_hope.0106.b 
		duel = {
			skill = stewardship
			value = 12
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					max = 10
				}
				send_interface_toast = {
					title = elven_hope.0106.b.success
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -10
				}
				send_interface_toast = {
					title = elven_hope.0106.b.failure
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
				}
				add_stress = 20
			}
		}
	}
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}

elven_hope.0107 = { # A Shattered Statue
	type = character_event
	title = elven_hope.0107.t
	desc = elven_hope.0107.desc
	theme = elven
	override_background = { reference = throne_room }
	trigger = {
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}
	cooldown = { months = 9 }
	left_portrait = {
		character = root
		animation = personality_rational
	}

	immediate = {
		add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
	}

	option = { # Rebuild it
		name = elven_hope.0107.a
		remove_short_term_gold = minor_gold_value 
		duel = {
			skill = stewardship
			value = 12
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					max = 10
				}
				send_interface_toast = {
					title = elven_hope.0107.a.success
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -10
				}
				send_interface_toast = {
					title = elven_hope.0107.a.failure
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
				}
				add_stress = 20
			}
		}
	}
	option = { # Not all things can be remade
		name = elven_hope.0107.b  
		trigger = { NOT = { has_trait = zealous } }
		random = {
			chance = 10 
			if = {
				limit = { has_trait = cynical }
				remove_trait = cynical 
			}
			add_trait = zealous 
		}
	}
	option = { # Distribute the broken pieces
		name = elven_hope.0107.c  
		add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
		add_prestige = minor_prestige_loss
	}
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}

elven_hope.0108 = { # Merriment Beneath the Stars
	type = character_event
	title = elven_hope.0108.t
	desc = elven_hope.0108.desc
	theme = elven
	override_background = { reference = relaxing_room }
	trigger = {
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}
	cooldown = { months = 7 }
	immediate = {
		random_courtier = { 
			limit = {
				is_elf = yes
				is_lotr_adult = yes 
			}
			save_scope_as = dancing_courtier
		}
		add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
	}
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:dancing_courtier
		animation = lute_active
	}

	option = { # Let the feast continue into the dawn
		name = elven_hope.0108.a
		add_legitimacy = minor_legitimacy_gain
		every_courtier = {
			add_opinion = {
				target = root
				modifier = friendliness_opinion
				opinion = 5
			}
		}
	}
	option = { # I'll join the festivities
		name = elven_hope.0108.b  
		duel = {
			skill = diplomacy
			value = 12
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					max = 10
				}
				send_interface_toast = {
					title = elven_hope.0108.b.success
					left_icon = root 
					add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -10
				}
				send_interface_toast = {
					title = elven_hope.0108.b.failure
					left_icon = root 
					add_elven_hope_effect = { VALUE = minimal_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
				}
				add_stress = 20
			}
		}
	}
	option = { # We cannot be distracted from our work
		name = elven_hope.0108.c
		trigger = { exists = capital_province }
		capital_province.county = {
			change_development_progress_with_overflow = 200
		}
	}
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}

elven_hope.0109 = { # A Good Harvest
	type = character_event
	title = elven_hope.0109.t
	desc = elven_hope.0109.desc
	theme = elven
	override_background = { reference = throne_room }
	trigger = {
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}
	cooldown = { months = 7 }
	immediate = {
		random_courtier = { 
			limit = {
				is_elf = yes
				is_lotr_adult = yes 
			}
			save_scope_as = happy_courtier
		}
		add_elven_hope_effect = { VALUE = medium_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
	}
	left_portrait = {
		character = root
		animation = personality_compassionate
	}
	right_portrait = {
		character = scope:happy_courtier
		animation = storyteller
	}
	option = { # Distribute it among my lands
		name = elven_hope.0109.a
		every_realm_county = {
			limit = { holder = root }
			add_county_modifier = {
				modifier = ep3_governance_harvest
				years = 10
			}
		}
	}
	option = { # Let the season be blessed
		name = elven_hope.0109.b  
		add_piety = medium_piety_gain
		duel = {
			skill = learning
			value = 12
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					max = 10
				}
				send_interface_toast = {
					title = elven_hope.0109.b.success
					left_icon = root 
					add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -10
				}
				send_interface_toast = {
					title = elven_hope.0109.b.failure
					left_icon = root 
					add_elven_hope_effect = { VALUE = minimal_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
				}
				add_stress = 20
			}
		}
	}
	option = { # This will aid trade and commerce
		name = elven_hope.0109.c  
		add_short_term_gold = minor_gold_value
	}
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}

elven_hope.0110 = { # A Bustling Colony
	type = character_event
	title = elven_hope.0110.t
	desc = elven_hope.0110.desc
	theme = elven
	override_background = { reference = ep2_forest_managed }

	cooldown = { years = 10 }
	trigger = { 
		any_held_county = { title_province = { has_holding_type = settlement_holding } } 
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}
	immediate = {
		random_courtier = { 
			limit = {
				is_elf = yes
				is_lotr_adult = yes 
			}
			save_scope_as = colonist_courtier
		}
		random_directly_owned_province = {
			limit = { 
				has_holding_type = settlement_holding
			}
			save_scope_as = colony_province
			county = { save_scope_as = colony_county }
		}
		add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
	}
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:colonist_courtier
		animation = personality_compassionate
	}
	option = { # Let the good work continue!
		name = elven_hope.0110.a
		scope:colony_province = {
			set_holding_type = elven_holding
		}
		hidden_effect = {
			if = {
				limit = { 
					has_variable = num_settled_wilderness 
					var:num_settled_wilderness > 0
				}
				decrease_variable = {
					NAME = num_settled_wilderness
					AMOUNT = 1
				}
				remove_wastelands_tracker_variable = yes
			}
			scope:colony_county = {
				change_development_level = 3
			}
		}
	}
	option = { # These good news should be celebrated
		name = elven_hope.0110.b 
		duel = {
			skill = diplomacy
			value = 12
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					max = 10
				}
				send_interface_toast = {
					title = elven_hope.0110.b.success
					left_icon = root 
					add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -10
				}
				send_interface_toast = {
					title = elven_hope.0110.b.failure
					left_icon = root 
					add_elven_hope_effect = { VALUE = minimal_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
				}
				add_stress = 20
			}
		}
		scope:colony_county = {
			change_development_level = 7
		}
	}
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}

elven_hope.0111 = { # A Polluted Stream
	type = character_event
	title = elven_hope.0111.t
	desc = elven_hope.0111.desc
	theme = elven
	override_background = { reference = bp3_riverside }
	trigger = {
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}
	cooldown = { months = 7 }
	left_portrait = {
		character = root
		animation = survey_staff
	}

	immediate = {
		random_county = {
			limit = {
				any_neighboring_county = {
					holder ?= { is_wastelands = no }
					NOT = { holder.top_liege = root.top_liege }
				}
			}
			save_scope_as = border_county
		}
		add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_positive_event_choice }
	}

	option = { # Time will heal the stream
		name = elven_hope.0111.a
		add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
		stress_impact = {
			patient = medium_stress_impact_loss
			impatient = major_stress_impact_gain
			lazy = medium_stress_impact_loss
			diligent = major_stress_impact_gain
		}
	}

	option = { # We shall restore it ourselves
		name = elven_hope.0111.b 
		stress_impact = {
			patient = major_stress_impact_gain
			impatient = medium_stress_impact_loss
			lazy = major_stress_impact_gain
			diligent = medium_stress_impact_loss
		}
		duel = {
			skill = stewardship
			value = 12
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					max = 10
				}
				send_interface_toast = {
					title = elven_hope.0111.b.success
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -10
				}
				send_interface_toast = {
					title = elven_hope.0111.b.failure
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
				}
				add_stress = 20
			}
		}
	}
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}

elven_hope.0112 = { # A Bad Harvest
	type = character_event
	title = elven_hope.0112.t
	desc = elven_hope.0112.desc
	theme = elven
	override_background = { reference = throne_room }
	cooldown = { months = 9 }

	left_portrait = {
		character = root
		animation = worry
	}

	trigger = {
		NOT = {
			any_character_artifact = {
				has_variable = elven_ring
			}
		}
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}

	immediate = {
		add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
	}

	option = { # Aw shucks
		name = elven_hope.0112.a
		add_stress = 50
		add_legitimacy = minor_legitimacy_gain
		stress_impact = {
			just = major_stress_impact_gain
			temperate = medium_stress_impact_loss
			generous = major_stress_impact_gain
			compassionate = major_stress_impact_gain
			gregarious = major_stress_impact_gain
			sadistic = medium_stress_impact_loss
		}
	}	
	option = { # If my subjects cannot feast, then neither shall I
		name = elven_hope.0112.b  
		add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
		add_piety = medium_piety_gain
		add_prestige = medium_prestige_loss
		stress_impact = {
			greedy = major_stress_impact_gain
			temperate = medium_stress_impact_loss
			arrogant = major_stress_impact_gain
			callous = major_stress_impact_gain
			sadistic = major_stress_impact_gain
			compassionate = medium_stress_impact_loss
			gluttonous = major_stress_impact_gain
			zealous = medium_stress_impact_loss
			just = medium_stress_impact_loss
		}
	}
	option = { # I shall feed my subjects at my own cost
		name = elven_hope.0112.c  
		remove_short_term_gold = minor_gold_value
		duel = {
			skill = stewardship
			value = 12
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					max = 10
				}
				send_interface_toast = {
					title = elven_hope.0112.c.success
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -10
				}
				send_interface_toast = {
					title = elven_hope.0112.c.failure
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
				}
				add_stress = 20
			}
		}
		stress_impact = {
			greedy = major_stress_impact_gain
			generous = medium_stress_impact_loss
			arrogant = major_stress_impact_gain
			callous = major_stress_impact_gain
			sadistic = major_stress_impact_gain
			diligent = medium_stress_impact_loss
			compassionate = medium_stress_impact_loss
			gregarious = medium_stress_impact_loss
			just = medium_stress_impact_loss
		}
	}
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}

elven_hope.0113 = { # Murmuration over holding
	type = character_event
	content_source = realms_dlc
	title = elven_hope.0113.t
	desc = elven_hope.0113.desc
	theme = elven
	override_background = {
		reference = market_elven
	}
	cooldown = { months = 9 }
	trigger = {
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}
	left_portrait = {
		character = root
		animation = personality_compassionate
	}
	right_portrait = {
		character = scope:happy_courtier
		animation = ecstasy
	}

	immediate = {
		random_courtier = { 
			limit = {
				is_elf = yes
				is_lotr_adult = yes 
			}
			save_scope_as = happy_courtier
		}
		add_elven_hope_effect = { VALUE = minimal_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
	}

	option = { # Just enjoy the sight
		name = elven_hope.0113.a 
		add_stress = -20
		random = {
			chance = 25
			if = {
				limit = { has_trait = lifestyle_poet }
				add_diplomacy_lifestyle_xp = 100
			}
			else = { add_trait = lifestyle_poet }
		}
		stress_impact = {
			humble = medium_stress_impact_loss
			gregarious = medium_stress_impact_loss
			lazy = medium_stress_impact_loss
			compassionate = medium_stress_impact_loss
			humble = medium_stress_impact_loss
		}
	}

	option = { # I will sing to them
		name = elven_hope.0113.b 
		duel = {
			skill = intrigue
			value = 12
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					max = 10
				}
				send_interface_toast = {
					title = elven_hope.0113.b.success
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -10
				}
				send_interface_toast = {
					title = elven_hope.0113.b.failure
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
				}
				add_stress = 20
			}
		}
		add_learning_lifestyle_xp = 250
		stress_impact = {
			lazy = major_stress_impact_gain
			diligent = medium_stress_impact_loss
		}
	}

	option = { # I've got better things to do
		name = elven_hope.0113.c
		add_legitimacy = minor_legitimacy_gain
		add_stress = 20
		stress_impact = {
			arrogant = medium_stress_impact_loss
			humble = major_stress_impact_gain
		}
	}
	
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}

elven_hope.0114 = { # Dreary winter
	type = character_event
	content_source = realms_dlc
	title = elven_hope.0114.t
	desc = elven_hope.0114.desc
	theme = elven 
	override_background = { reference = throne_room }
	cooldown = { months = 9 }
	left_portrait = {
		character = root
		animation = shiver
	}

	trigger = {
		NOT = {
			any_character_artifact = {
				has_variable = elven_ring
			}
		}
		OR = {
			current_month = 1
			current_month = 2
			current_month = 11
			current_month = 12
		}
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}

	immediate = {
		add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
	}

	option = { # Brrrr...
		name =  elven_hope.0114.a
	}
	option = { # Try to cheer people up
		name = elven_hope.0114.b 
		duel = {
			skill = intrigue
			value = 12
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					max = 10
				}
				send_interface_toast = {
					title = elven_hope.0114.b.success
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -10
				}
				send_interface_toast = {
					title = elven_hope.0114.b.failure
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
				}
				add_stress = 20
			}
		}
	}
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}

elven_hope.0115 = { # Sweltering Summer
	type = character_event
	content_source = realms_dlc
	title = elven_hope.0115.t
	desc = elven_hope.0115.desc
	theme = elven 
	override_background = { reference = throne_room }
	cooldown = { months = 9 }
	left_portrait = {
		character = root
		animation = pain
	}
	trigger = {
		NOT = {
			any_character_artifact = {
				has_variable = elven_ring
			}
		}
		OR = {
			current_month = 5
			current_month = 6
			current_month = 7
		}
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}

	immediate = {
		add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
	}

	option = { # I'm sweating
		name =  elven_hope.0115.a
	}
	option = { # Try to cheer people up
		name = elven_hope.0115.b 
		duel = {
			skill = diplomacy
			value = 12
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					max = 10
				}
				send_interface_toast = {
					title = elven_hope.0115.b.success
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -10
				}
				send_interface_toast = {
					title = elven_hope.0115.b.failure
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
				}
				add_stress = 20
			}
		}
	}
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}

elven_hope.0116 = { # Elf starts a garden - mini-event chain beginning
	type = character_event
	content_source = realms_dlc
	title = elven_hope.0116.t
	desc = elven_hope.0116.desc
	theme = elven 
	override_background = {
		reference = garden
	}
	left_portrait = {
		character = root
		animation = thinking
	}
	cooldown = { months = 9 }
	trigger = {
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}
	option = { #Nah 
		name = elven_hope.0116.a 
		add_stress = -5
		stress_impact = {
			impatient = medium_stress_impact_loss
			lazy = medium_stress_impact_loss
			diligent = major_stress_impact_gain
		}
	}
	option = {
		name = elven_hope.0116.b 
		remove_short_term_gold = miniscule_gold_value
		add_character_flag = elf_started_garden_hope_event_flag
		random = {
			chance = 25
			if = {
				limit = { has_trait = lifestyle_gardener }
				add_learning_lifestyle_xp = 100
			}
			else = { add_trait = lifestyle_gardener }
		}
		stress_impact = {
			impatient = major_stress_impact_gain
			humble = medium_stress_impact_loss
			lazy = major_stress_impact_gain
			diligent = medium_stress_impact_loss
			greedy = major_stress_impact_gain
		}
	}
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}

elven_hope.0117 = { # Elf has a thriving garden
	type = character_event
	content_source = realms_dlc
	title = elven_hope.0117.t
	desc = elven_hope.0117.desc
	theme = elven 
	override_background = {
		reference = garden
	}
	left_portrait = {
		character = root
		animation = happiness
	}
	trigger = {
		root = { has_character_flag = elf_started_garden_hope_event_flag }
	}
	cooldown = { months = 9 }
	immediate = {
		add_elven_hope_effect = { VALUE = medium_elven_hope_gain HOPE_EFFECT = effect_elven_hope_inspired_by_sight }
	}

	option = { # Woohoo!
		name = elven_hope.0117.a 
		add_prestige = minor_prestige_gain
		remove_character_flag = elf_started_garden_hope_event_flag
	}
}

elven_hope.0118 = { # Elf's garden starts to wither
	type = character_event
	content_source = realms_dlc
	title = elven_hope.0118.t
	desc = elven_hope.0118.desc
	theme = elven 
	override_background = {
		reference = garden
	}
	left_portrait = {
		character = root
		animation = worry
	}
	trigger = {
		root = { has_character_flag = elf_started_garden_hope_event_flag }
		NOT = {
			any_character_artifact = {
				has_variable = elven_ring
			}
		}
	}
	immediate = {
		add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
	}
	cooldown = { months = 9 }

	option = { #Oh no...
		name = elven_hope.0118.a 
		# add_elven_hope_effect = { VALUE = medium_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
		stress_impact = {
			compassionate = major_stress_impact_gain
			lazy = medium_stress_impact_loss
			diligent = major_stress_impact_gain
		}
	}

	option = { #I'll restore it
		name = elven_hope.0118.b 
		remove_short_term_gold = miniscule_gold_value
		duel = {
			skill = learning
			value = 12
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					max = 10
				}
				send_interface_toast = {
					title = elven_hope.0118.b.success
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
				}
				add_learning_lifestyle_xp = 200
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -10
				}
				send_interface_toast = {
					title = elven_hope.0118.b.failure
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
				}
				add_stress = 20
			}
		}
		stress_impact = {
			impatient = major_stress_impact_gain
			generous = medium_stress_impact_loss
			lazy = major_stress_impact_gain
			diligent = medium_stress_impact_loss
			greedy = major_stress_impact_gain
		}
	}
	
	after = { # Remove le flag 
		remove_character_flag = elf_started_garden_hope_event_flag
	}
}

elven_hope.0119 = { # Lighting strike causes a big tree to catch fire
	type = character_event
	content_source = realms_dlc
	title = elven_hope.0119.t
	desc = elven_hope.0119.desc
	theme = elven 
	override_background = {
		reference = bp1_bonfire
	}
	left_portrait = {
		character = root 
		animation = shock
	}
	trigger = {
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}
	immediate = {
		add_elven_hope_effect = { VALUE = minimal_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
	}
	cooldown = { months = 9 }

	option = { # So sad...
		name = elven_hope.0119.a
		add_piety = minor_piety_gain
		stress_impact = {
			brave = major_stress_impact_gain
			zealous = minor_stress_impact_gain
			diligent = major_stress_impact_gain
			compassionate = major_stress_impact_gain
		}
	}
	option = { # I must save it!
		name = elven_hope.0119.b
		add_piety = medium_piety_gain
		duel = {
			skill = prowess
			value = 12
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					max = 10
				}
				send_interface_toast = {
					title = elven_hope.0119.b.success
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
				}
				add_legitimacy = minor_legitimacy_gain
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -10
				}
				send_interface_toast = {
					title = elven_hope.0119.b.failure
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
				}
				increase_wounds_no_death_effect = { REASON = burned }
				add_stress = 20
			}
		}
		stress_impact = {
			brave = major_stress_impact_loss
			zealous = minor_stress_impact_loss
			diligent = major_stress_impact_loss
			craven = major_stress_impact_gain
			lazy = major_stress_impact_gain
		}
	}
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}

elven_hope.0120 = { # Character dreams of Valinor
	type = character_event
	content_source = realms_dlc
	title = elven_hope.0120.t
	desc = elven_hope.0120.desc
	theme = elven 
	override_background = {
		reference = grey_havens
	}
	left_portrait = {
		character = root
		animation = personality_content
	}
	immediate = {
		add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_sea_longing }
		root.capital_county = { save_scope_as = elven_capital }
	}
	cooldown = { months = 9 }
	trigger = {
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}
	option = { # It is all our fates!
		name = elven_hope.0120.a
		add_piety = minor_piety_gain
	}
	option = { # No! Middle-earth is my abode, for good or ill.
		name = elven_hope.0120.b
		duel = {
			skill = intrigue
			value = 12
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					max = 10
				}
				send_interface_toast = {
					title = elven_hope.0120.b.success
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_positive_event_choice }
				}
				add_legitimacy = minor_legitimacy_gain
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -10
				}
				send_interface_toast = {
					title = elven_hope.0120.b.failure
					left_icon = root 
					add_elven_hope_effect = { VALUE = minor_elven_hope_loss HOPE_EFFECT = effect_elven_hope_negative_event_choice }
				}
				add_stress = 20
			}
		}
	}
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}

elven_hope.0121 = { # A valorous inspiration
	type = character_event
	content_source = realms_dlc
	title = elven_hope.0121.t
	desc = elven_hope.0121.desc
	theme = elven 
	override_background = {
		reference = market_elven
	}
	trigger = {
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}
	cooldown = { months = 9 }
	left_portrait = {
		character = root
		animation = personality_compassionate
	}
	right_portrait = {
		character = scope:mighty_courtier 
		animation = throne_room_two_handed_passive_shield
	}
	immediate = {
		root.capital_county = { save_scope_as = my_capital_county }
		random_knight = { 
			limit = { is_elf = yes }
			save_scope_as = mighty_courtier 
		}
		add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_inspired_by_sight }
	}

	option = { # It's so cool that we still have impressive guys like you around
		name = elven_hope.0121.a 
		add_prestige = minor_prestige_gain
	}
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}

elven_hope.0122 = { # Hopeful Music
	type = character_event
	content_source = realms_dlc
	title = elven_hope.0122.t
	desc = elven_hope.0122.desc
	theme = elven 
	override_background = {
		reference = garden
	}
	trigger = {
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}
	cooldown = { months = 9 }
	left_portrait = {
		character = root
		animation = interested
	}
	right_portrait = {
		character = scope:musical_courtier
		animation = lute_active
	}
	immediate = {
		root.capital_county = { save_scope_as = my_capital_county }
		random_courtier = { save_scope_as = musical_courtier }
		add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_inspired_by_sight }
	}

	option = { # This reminds me of the songs of old
		name = elven_hope.0122.a 
		add_prestige = minor_piety_gain
	}
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}

elven_hope.0123 = { # An inspired painting
	type = character_event
	content_source = realms_dlc
	title = elven_hope.0123.t
	desc = elven_hope.0123.desc
	theme = elven 
	override_background = {
		reference = relaxing_room
	}
	trigger = {
		NOT = { has_character_flag = had_yearly_elven_hope_event }
	}
	cooldown = { months = 9 }
	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:painting_courtier
		animation = writing
	}
	immediate = {
		root.capital_county = { save_scope_as = my_capital_county }
		random_courtier = { save_scope_as = painting_courtier }
		add_elven_hope_effect = { VALUE = minor_elven_hope_gain HOPE_EFFECT = effect_elven_hope_inspired_by_sight }
	}

	option = { # Man what a masterpiece
		name = elven_hope.0123.a 
		add_prestige = minor_piety_gain
	}
	after = {
		add_character_flag = {
			flag = had_yearly_elven_hope_event
			months = 18
		}
	}
}
namespace = tgp_japan_yearly_events

##########################################################
# Japan Yearly Events
# tgp_japan_yearly_events - 1000-1999
# by Ariana Tranumn
##########################################################

##########################################################
# 1000 - You see some Onibi, follow them or no?
# 1010 - Two buddhist sects are fighting, and ask you to pick a side
# 1020 - Your senses are playing tricks on you, and you encounter a new Yokai
# 1030 - Praying at a shrine for future success
# 1040 - You come across a red bridge
# 1050 - You are accused of violating a dumb rule
# 1060 - A prisoner requests to be mercy killed
# 1070 - A temple in your realm has burned down
# 1080 - Someone is fishing in the tsuri-dono
# 1090 - Growing old with no heir
# 1100 - You become guilty after killing some people
# 1110 - An animal is seen near the shrine of a God
# 1120 - You meet a warrior monk
# 1130 - Your daughter expresses an interest in poetry
# 1140 - You are stopped in Soryo lands as a Ritsuryo ruler
# 1150 - The Emperor is passing through your realm, chance to gain favor or be mean
# 1160 - You are offered a concubine from a rival house
# 1170 - The prose that you're reading is of an unknown language
# 1180 - You've been gifted a Bonsai tree for your garden
# 1190 - You have a bad trait and you're making some decisions at night
# 1220 - You've witnessed a miracle made by a Buddhist monk
# 1230 - Fear of a low durability artifact coming to life (Yokai)
# 1240 - A traveler poet visits court and can't read from right to left
# 1250 - Being gifted a Kakejiku scroll (Wedding)
##########################################################

# You see some Onibi, follow them or no?
tgp_japan_yearly_events.1000 = {
	type = character_event
	title = tgp_japan_yearly_events.1000.t
	desc = tgp_japan_yearly_events.1000.desc
	theme = travel
    cooldown = { years = 10 }
	override_effect_2d = {
		reference = rain
	}
	override_background = {
		reference = wilderness
	}
	left_portrait = {
		character = root
		animation = interested
	}
	right_portrait = {
		trigger = { exists = scope:chaplain }
		character = scope:chaplain
	}

	trigger = {
		has_tgp_dlc_trigger = yes
		is_available_travelling_adult = yes
		is_location_valid_for_travel_event_on_land = yes
		# is_valid_for_japan_events_trigger = yes
		location = {
			OR = {
				terrain = forest
				terrain = taiga
				terrain = mountains
			}
		}
	}

	immediate = {
		current_travel_plan = {
			random_entourage_character = {
				limit = {
					NOT = {
						has_trait = cynical
					}
					OR = {
						has_council_position = councillor_court_chaplain
						has_court_position = travel_leader_court_position
					}
				}
				save_scope_as = chaplain
			}
		}
	}

    weight_multiplier = {
		base = 10
		modifier = {
			add = 20
			OR = {
                current_season_spring = yes
                current_season_summer = yes
            }
		}
        modifier = {
			add = 5
			short_term_gold <= minor_gold_value
		}
	}

    #Option A) Follow the Onibi!
    option = {
        name = tgp_japan_yearly_events.1000.a

		current_travel_plan = {
			delay_travel_plan = { days = 7 }
		}

		random_list = {
			50 = {
				show_chance = no
				desc = tgp_japan_yearly_events.1000.a.tt.success
				send_interface_toast = {
					type = event_toast_effect_good
					title = tgp_japan_yearly_events.1000.a.tt.success
					left_icon = root
                    add_short_term_gold = minor_gold_value
				}
			}
			50 = {
				show_chance = no
				desc = tgp_japan_yearly_events.1000.a.tt.failure
				send_interface_toast = {
					type = event_toast_effect_bad
					title = tgp_japan_yearly_events.1000.a.tt.failure
					left_icon = root
					add_stress = minor_stress_impact_gain
                    random = {
                        chance = 20
                        increase_wounds_no_death_effect = { REASON = lost_in_the_forest }
                    }
				}
			}
		}

		stress_impact = {
			paranoid = minor_stress_impact_gain
            craven = minor_stress_impact_gain
            brave = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_rationality = -1
			}
            modifier = {
                factor = 0
                OR = {
                    has_trait = craven
                    has_trait = paranoid
                }
            }
		}
    }

    #Option B) Talk about Onibi!
    option = {
        name = tgp_japan_yearly_events.1000.b
		trigger = {
			exists = scope:chaplain
		}
		current_travel_plan = {
			delay_travel_plan = { days = 3 }
		}
		add_learning_lifestyle_xp = minor_lifestyle_xp
		scope:chaplain = {
			duel = {
				skills = { diplomacy learning }
				value = decent_skill_rating
				70 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 3.5
					}
					desc = tgp_japan_yearly_events.1000.b.tt.success
					root = {
						send_interface_toast = {
							type = event_toast_effect_good
							title = tgp_japan_yearly_events.1000.b.tt.success
							left_icon = root
							right_icon = scope:chaplain
							add_character_modifier = {
								modifier = tgp_learned_from_onibi_modifier
								years = 3
							}
						}
					}
				}
				30 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -3.5
					}
					desc = tgp_japan_yearly_events.1000.b.tt.failure
					min = 20
					max = 90
					root = {
						send_interface_toast = {
							type = event_toast_effect_bad
							title = tgp_japan_yearly_events.1000.b.tt.failure
							left_icon = root
							right_icon = scope:chaplain
							add_stress = minor_stress_gain
						}
					}
				}
			}
		}
		stress_impact = {
			paranoid = minor_stress_impact_loss
            craven = minor_stress_impact_loss
            impatient = minor_stress_impact_loss
			lazy = minor_stress_impact_gain
		}
		ai_chance = {
			base = 150
			ai_value_modifier = {
				ai_rationality = 1
			}
			modifier = {
                factor = 0
                OR = {
                    has_trait = lazy
                }
            }
		}
    }

    # Leave them be
    option = {
        name = tgp_japan_yearly_events.1000.c

        stress_impact = {
			paranoid = minor_stress_impact_loss
            craven = minor_stress_impact_loss
			lazy = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_rationality = 1
			}
            modifier = {
                factor = 0
                has_trait = brave
            }
		}
    }
}

# Two buddhist sects are fighting, and ask you to pick a side
tgp_japan_yearly_events.1010 = {
	type = character_event
	title = tgp_japan_yearly_events.1010.t
	desc = tgp_japan_yearly_events.1010.desc
	theme = faith
    cooldown = { years = 10 }

	left_portrait = {
		character = root
		animation = chaplain
	}
	right_portrait = {
		character = scope:buddhist_councillor_1
		animation = debating
	}

	lower_center_portrait = {
		character = scope:buddhist_councillor_2
	}

	trigger = {
		has_tgp_dlc_trigger = yes
		is_available_adult = yes
		exists = cp:councillor_court_chaplain
		#find a councilor
		any_councillor = {
			faith = {
				# religion = religion:buddhism_religion
				save_temporary_scope_as = buddhist_sect
			}
		}
		#find a councilor of a different sect
		any_councillor = {
			faith = {
				# religion = religion:buddhism_religion
				this != scope:buddhist_sect
			}
		}
		always = no #LotR TODO - Find a religion with conflicting sects
	}
	#probably more interesting if you are Buddhist yourself
	weight_multiplier = {
		base = 10
        # modifier = {
		# 	add = 10
		# 	faith.religion = religion:buddhism_religion
		# }
	}

	immediate = {
		#find chaplain to get mad if you do nothing
		cp:councillor_court_chaplain = { save_scope_as = chaplain }
		#find a councilor
		random_councillor = {
			limit = {
				faith = {
					# religion = religion:buddhism_religion
				}
			}
			save_scope_as = buddhist_councillor_1
		}

		random_councillor = {
			limit = {
				faith = {
					this != scope:buddhist_councillor_1.faith
					# religion = religion:buddhism_religion
				}
			}
			save_scope_as = buddhist_councillor_2
		}
	}

	# Option A) Sect A is correct
	option = {
		name = tgp_japan_yearly_events.1010.a
		if = {
			limit = {
				faith = scope:buddhist_councillor_1.faith
			}
			add_piety = medium_piety_gain
		}
		else = {
			custom_tooltip = tgp_japan_yearly_events.1010.a_discount
			set_variable = {
				name = japan_1010_discount
				value = scope:buddhist_councillor_1.faith
			}
		}

		every_vassal = {
			limit = {
				faith = scope:buddhist_councillor_1.faith
			}
			custom = every_buddhist_sect_1_vassal
			add_opinion = {
				modifier = pleased_opinion
				target = root
				opinion = 15
			}
		}

		every_vassal = {
			limit = {
				faith = scope:buddhist_councillor_2.faith
			}
			custom = every_buddhist_sect_2_vassal
			add_opinion = {
				modifier = disappointed_opinion
				target = root
				opinion = -15
			}
		}

		scope:buddhist_councillor_2.faith = {
			change_fervor = {
				value = 1
				desc = fervor_gain_persecuted
			}
		}

		stress_impact = {
			cynical = minor_stress_impact_gain
		}

		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				faith = scope:buddhist_councillor_2.faith
			}
			modifier = {
				factor = 2
				AND = {
					faith = scope:buddhist_councillor_1.faith
					NOT = { has_trait = cynical }
				}
			}
		}
	}

	# Option B) Sect B is correct
	option = {
		name = tgp_japan_yearly_events.1010.b
		if = {
			limit = {
				faith = scope:buddhist_councillor_2.faith
			}
			add_piety = medium_piety_gain
		}
		else = {
			custom_tooltip = tgp_japan_yearly_events.1010.b_discount
			set_variable = {
				name = japan_1010_discount
				value = scope:buddhist_councillor_2.faith
			}
		}

		every_vassal = {
			limit = {
				faith = scope:buddhist_councillor_2.faith
			}
			custom = every_buddhist_sect_2_vassal
			add_opinion = {
				modifier = pleased_opinion
				target = root
				opinion = 15
			}
		}

		every_vassal = {
			limit = {
				faith = scope:buddhist_councillor_1.faith
			}
			custom = every_buddhist_sect_1_vassal
			add_opinion = {
				modifier = disappointed_opinion
				target = root
				opinion = -15
			}
		}

		scope:buddhist_councillor_1.faith = {
			change_fervor = {
				value = 1
				desc = fervor_gain_persecuted
			}
		}

		stress_impact = {
			cynical = minor_stress_impact_gain
		}

		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				faith = scope:buddhist_councillor_1.faith
			}
			modifier = {
				factor = 2
				AND = {
					faith = scope:buddhist_councillor_2.faith
					NOT = { has_trait = cynical }
				}
			}
		}
	}

	# Option C) Let them fight, I don't care
	option = {
		name = tgp_japan_yearly_events.1010.c

		random = {
			chance = 50
			send_interface_toast = {
				type = event_toast_effect_bad
				title = tgp_japan_yearly_events.1010.c.tt
				left_icon = root
				right_icon = scope:chaplain
				add_character_modifier = {
					modifier = tgp_buddhist_fighting_modifier
					years = 5
				}
			}
		}

		scope:chaplain = {
			add_opinion = {
				modifier = disappointed_opinion
				target = root
				opinion = -15
			}
		}

		stress_impact = {
			zealous = minor_stress_impact_gain
			cynical = minor_stress_impact_loss
			lazy = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			modifier = {
				factor = 2
				has_trait = cynical
			}
			modifier = {
				factor = 0
				AND = {
					OR = {
						faith = scope:buddhist_councillor_2.faith
						faith = scope:buddhist_councillor_1.faith
					}
					has_trait = zealous
				}
			}
			modifier = {
				factor = 1.5
				has_trait = lazy
			}
		}
	}
}

# Your senses are playing tricks on you, and you encounter a new Yokai
tgp_japan_yearly_events.1020 = {
	type = character_event
	title = {
		desc = {
			first_valid = {
				triggered_desc = {
					trigger = {
						scope:yokai_legend = flag:siren
					}
					desc = tgp_japan_yearly_events.1020.t_siren
				}
				triggered_desc = {
					trigger = {
						scope:yokai_legend = flag:garden
					}
					desc = tgp_japan_yearly_events.1020.t_garden
				}
				triggered_desc = {
					trigger = {
						scope:yokai_legend = flag:shadow
					}
					desc = tgp_japan_yearly_events.1020.t_shadow
				}
			}
		}
	}
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:yokai_legend = flag:siren
				}
				desc = tgp_japan_yearly_events.1020.desc_siren
			}
			triggered_desc = {
				trigger = {
					scope:yokai_legend = flag:garden
				}
				desc = tgp_japan_yearly_events.1020.desc_garden
			}
			triggered_desc = {
				trigger = {
					scope:yokai_legend = flag:shadow
				}
				desc = tgp_japan_yearly_events.1020.desc_shadow
			}
		}
		desc = tgp_japan_yearly_events.1020.desc_end
	}
	theme = unfriendly
    cooldown = { years = 25 }

	override_background = {
		trigger = { scope:yokai_legend = flag:garden }
		reference = garden
	}

	override_background = {
		trigger = { scope:yokai_legend = flag:siren }
		reference = bedchamber
	}

	override_background = {
		trigger = { scope:yokai_legend = flag:shadow }
		reference = alley_night
	}

	left_portrait = {
		character = root
		animation = disbelief
	}

	trigger = {
		has_tgp_dlc_trigger = yes
		is_available_adult = yes
		# is_valid_for_japan_events_trigger = yes #LotR
		#LotR
		is_orc = no
		is_nazgul = no
	}

	weight_multiplier = {
		base = 10
		modifier = {
			add = 10
			OR = {
				has_trait = possessed
				has_trait = lunatic
				has_trait = witch
			}
		}
		modifier = {
			add = 5
			stress_level >= 1
		}
		modifier = {
			add = 10
			stress_level >= 3
		}
		modifier = {
			add = 5
			has_character_modifier = tgp_burned_yokai_modifier
		}
	}

	immediate = {
		# Choose Yokai
		random_list = {
			10 = { # Siren
				modifier = {
					add = 3
					OR = {
						has_trait = lifestyle_poet
						has_trait = lustful
					}
				}
				modifier = {
					add = 3
					has_focus_diplomacy = yes
				}
				save_scope_value_as = {
					name = yokai_legend
					value = flag:siren
				}
			}
			10 = { # Garden
				modifier = {
					add = 3
					OR = {
						has_trait = lifestyle_gardener
						has_trait = lifestyle_herbalist
						has_trait = lifestyle_mystic
					}
				}
				modifier = {
					add = 3
					OR = {
						has_focus_learning = yes
						has_focus_stewardship = yes
					}
				}
				save_scope_value_as = {
					name = yokai_legend
					value = flag:garden
				}
			}
			10 = { # Shadow
				modifier = {
					add = 3
					OR = {
						has_trait = possessed
						has_trait = depressed_1
						has_trait = lunatic
					}
				}
				modifier = {
					add = 3
					OR = {
						has_focus_intrigue = yes
						has_focus_martial = yes
					}
				}
				save_scope_value_as = {
					name = yokai_legend
					value = flag:shadow
				}
			}
		}
	}

	# Option 1
	option = {
		name = {
			text = {
				first_valid = {
					triggered_desc = {
						trigger = {
							scope:yokai_legend = flag:siren
						}
						desc = tgp_japan_yearly_events.1020.a_siren
					}
					triggered_desc = {
						trigger = {
							scope:yokai_legend = flag:garden
						}
						desc = tgp_japan_yearly_events.1020.a_garden
					}
					triggered_desc = {
						trigger = {
							scope:yokai_legend = flag:shadow
						}
						desc = tgp_japan_yearly_events.1020.a_shadow
					}
				}
			}
		}

		switch = {
			trigger = scope:yokai_legend
			flag:siren = {
				add_character_modifier = {
					modifier = tgp_siren_yokai_love_modifier
					years = 5
				}
				stress_impact = {
					lustful = minor_stress_impact_loss
				}
			}
			flag:garden = {
				add_character_modifier = {
					modifier = tgp_garden_yokai_bloom_modifier
					years = 5
				}

				if = {
					limit = {
						NOT = { has_trait = lifestyle_gardener }
					}
					random = {
						chance = 25
						add_trait = lifestyle_gardener
					}
				}


				stress_impact = {
					lifestyle_gardener = minor_stress_impact_loss
					lifestyle_herbalist = minor_stress_impact_loss
					lifestyle_mystic = minor_stress_impact_loss
				}
			}
			flag:shadow = {
				add_character_modifier = {
					modifier = tgp_shadow_yokai_imitation_modifier
					years = 5
				}
				stress_impact = {
					arrogant = minor_stress_impact_loss
					callous = minor_stress_impact_loss
				}
			}
		}

		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				AND = {
					scope:yokai_legend = flag:siren
					has_trait = chaste
				}
			}
			modifier = {
				factor = 2
				AND = {
					scope:yokai_legend = flag:siren
					has_trait = lustful
				}
			}
			modifier = {
				factor = 2
				AND = {
					scope:yokai_legend = flag:garden
					OR = {
						has_trait = lifestyle_gardener
						has_focus_learning = yes
					}
				}
			}
			modifier = {
				factor = 2
				AND = {
					scope:yokai_legend = flag:shadow
					OR = {
						has_trait = callous
						has_trait = arrogant
						has_focus_martial = yes
					}
				}
			}
		}
	}

	# Option 2
	option = {
		name = {
			text = {
				first_valid = {
					triggered_desc = {
						trigger = {
							scope:yokai_legend = flag:siren
						}
						desc = tgp_japan_yearly_events.1020.b_siren
					}
					triggered_desc = {
						trigger = {
							scope:yokai_legend = flag:garden
						}
						desc = tgp_japan_yearly_events.1020.b_garden
					}
					triggered_desc = {
						trigger = {
							scope:yokai_legend = flag:shadow
						}
						desc = tgp_japan_yearly_events.1020.b_shadow
					}
				}
			}
		}

		switch = {
			trigger = scope:yokai_legend
			flag:siren = {
				add_character_modifier = {
					modifier = tgp_siren_yokai_prose_modifier
					years = 5
				}
				if = {
					limit = {
						NOT = { has_trait = lifestyle_poet }
					}
					random = {
						chance = 25
						add_trait = lifestyle_poet
					}
				}
				else = {
					add_trait_xp = {
						trait = lifestyle_poet
						value = 10
					}
				}
			}
			flag:garden = {
				add_character_modifier = {
					modifier = tgp_garden_yokai_building_modifier
					years = 5
				}

				stress_impact = {
					architect = minor_stress_impact_loss
					diligent = minor_stress_impact_loss
				}
			}
			flag:shadow = {
				add_character_modifier = {
					modifier = tgp_shadow_yokai_torch_modifier
					years = 5
				}
				stress_impact = {
					paranoid = minor_stress_impact_loss
				}
			}
		}

		ai_chance = {
			base = 100
			modifier = {
				factor = 2
				AND = {
					scope:yokai_legend = flag:siren
					has_focus_diplomacy = yes
				}
			}
			modifier = {
				factor = 2
				AND = {
					scope:yokai_legend = flag:garden
					OR = {
						has_trait = architect
						has_trait = diligent
						has_focus_stewardship = yes
					}
				}
			}
			modifier = {
				factor = 2
				AND = {
					scope:yokai_legend = flag:shadow
					OR = {
						has_trait = paranoid
						has_focus_intrigue = yes
					}
				}
			}
		}
	}

	# Ignore it
	option = {
		name = tgp_japan_yearly_events.1020.c

		add_piety = major_piety_gain

		stress_impact = {
			base = miniscule_stress_impact_gain
			paranoid = minor_stress_impact_gain
			craven = minor_stress_impact_loss
		}

		ai_chance = {
			base = 0
		}
	}
}

# You pray at a shrine for future success
tgp_japan_yearly_events.1030 = {
	type = character_event
	title = tgp_japan_yearly_events.1030.t
	desc = tgp_japan_yearly_events.1030.desc
	theme = faith
    cooldown = { years = 15 }

	left_portrait = {
		character = root
		# triggered_animation = {
		# 	trigger = {
		# 		faith.religion ?= religion:christianity_religion
		# 	}
		# 	animation = prayer
		# }
		# triggered_animation = {
			# trigger = {
			# 	NOT = { faith.religion ?= religion:christianity_religion }
			# }
			animation = personality_zealous
		# }
	}

	trigger = {
		has_tgp_dlc_trigger = yes
		is_available_adult = yes
	}

	# Pray for your health
	option = {
		name = tgp_japan_yearly_events.1030.a

		add_character_modifier = {
			modifier = tgp_shrine_health_modifier
			years = 5
		}

		if = {
			limit = {
				has_trait = wounded
			}
			random = {
				chance = 25
				if = {
					limit = { has_trait = wounded_1 }
					remove_trait = wounded_1
				}
				else_if = {
					limit = { has_trait = wounded_2 }
					remove_trait = wounded_2
					add_trait = wounded_1
				}
				else_if = {
					limit = { has_trait = wounded_3 }
					remove_trait = wounded_3
					add_trait = wounded_2
				}
			}
		}

		stress_impact = {
			base = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			modifier = {
				factor = 2
				has_trait = wounded
			}
		}
	}

	# Pray for your heirs/dynasty
	option = {
		name = tgp_japan_yearly_events.1030.b

		add_character_modifier = {
			modifier = tgp_shrine_heir_modifier
			years = 5
		}

		stress_impact = {
			family_first = minor_stress_impact_loss
			cynical = minor_stress_impact_gain
		}

		ai_chance = {
			base = 100
			modifier = {
				factor = 2
				has_trait = family_first
			}
		}
	}

	# Pray for wealth
	option = {
		name = tgp_japan_yearly_events.1030.c

		add_character_modifier = {
			modifier = tgp_shrine_wealth_modifier
			years = 5
		}

		stress_impact = {
			greedy = minor_stress_impact_loss
			cynical = minor_stress_impact_gain
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_greed = 1
			}
			modifier = {
				factor = 2
				short_term_gold <= minor_gold_value
			}
		}
	}

	# Pray for X Gods favor
	option = {
		name = tgp_japan_yearly_events.1030.d

		add_character_modifier = {
			modifier = tgp_shrine_piety_modifier
			years = 5
		}
		add_piety = minor_piety_gain


		stress_impact = {
			zealous = minor_stress_impact_loss
			cynical = minor_stress_impact_gain
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_zeal = 1
			}
		}
	}

	option = {
		name = tgp_japan_yearly_events.1030.e
		trigger = { has_trait = cynical }

		stress_impact = {
			cynical = medium_stress_impact_loss
		}

		add_prestige = minor_prestige_gain

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_zeal = -1
			}
		}
	}
}

# You come across a red bridge
tgp_japan_yearly_events.1040 = {
	type = character_event
	title = tgp_japan_yearly_events.1040.t
	desc = tgp_japan_yearly_events.1040.desc
	theme = travel
    cooldown = { years = 20 }

	left_portrait = {
		character = root
		animation = interested
	}

	override_background = { reference = bp3_riverside }

	trigger = {
		has_tgp_dlc_trigger = yes
		is_available_travelling_adult = yes
		is_location_valid_for_travel_event_on_land = yes
		location = {
			# geographical_region = world_asia_japan
			is_riverside_province = yes
			county = { is_elf = yes } #LotR
		}
		always = no # LotR - TODO: adapt event for Elves
	}

	# Treat it as a sacred place
	option = {
		name = tgp_japan_yearly_events.1040.a

		if = {
			limit = {
				OR = {
					# religion = religion:shintoism_religion
					faith = { has_doctrine = special_doctrine_immaterial_harmony }
				}
			}
			add_piety = minor_piety_gain
		}
		else = {
			custom_tooltip = tgp_japan_yearly_events.1040.discount
			add_character_flag = tgp_japan_1040_discount
		}

		if = {
			limit = {
				has_trait = lifestyle_mystic
			}
			add_trait_xp = {
				trait = lifestyle_mystic
				value = 5
			}
		}

		stress_impact = {
			base = minor_stress_impact_loss
			zealous = minor_stress_impact_loss
			cynical = minor_stress_impact_gain
		}

		current_travel_plan = {
			delay_travel_plan = { days = 7 }
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_zeal = 1
			}
		}
	}

	# Forbid anyone from crossing before you
	option = {
		name = tgp_japan_yearly_events.1040.b

		add_prestige = minor_prestige_gain
		add_dread = minor_dread_gain

		current_travel_plan = {
			delay_travel_plan = { days = 14 }
		}

		stress_impact = {
			arrogant = medium_stress_impact_loss
			callous = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			modifier = {
				factor = 2
				has_trait = arrogant
			}
		}
	}

	# Go around it
	option = {
		name = tgp_japan_yearly_events.1040.c

		current_travel_plan = {
			delay_travel_plan = { days = 30 }
		}

		add_character_modifier = {
			modifier = tgp_traveling_safe_modifier
			years = 3
		}

		stress_impact = {
			paranoid = medium_stress_impact_loss
			craven = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			modifier = {
				factor = 2
				OR = {
					has_trait = craven
					has_trait = paranoid
				}
			}
		}
	}
}

# You are accused of violating a dumb rule
tgp_japan_yearly_events.1050 = {
	type = letter_event
	opening = { desc = tgp_japan_yearly_events.1050.opening }
	desc = {
		desc = tgp_japan_yearly_events.1050.desc
		random_valid = {
			desc = tgp_japan_yearly_events.1050.desc.a
			desc = tgp_japan_yearly_events.1050.desc.b
			desc = tgp_japan_yearly_events.1050.desc.c
		}
		desc = tgp_japan_yearly_events.1050.desc.outro
	}
	sender = scope:messenger

	cooldown = { years = 25 }

	trigger = {
		has_tgp_dlc_trigger = yes
		# location = { geographical_region = world_asia_japan }
		always = no #LotR - TODO
		is_independent_ruler = no
		short_term_gold >= minor_gold_value
	}

	immediate = {
		if = {
			limit = {
				exists = liege.cp:councillor_chancellor
			 	liege.cp:councillor_chancellor != root
			}
			liege.cp:councillor_chancellor = { save_scope_as = messenger }
		}
		else_if = {
			limit = {
				liege = { any_councillor = { count >=1 this != root } }
			}
			liege = {
				ordered_councillor = { limit = { this != root } order_by = diplomacy save_scope_as = messenger }
			}
		}
		else = {
			liege = {
				ordered_courtier = { order_by = diplomacy save_scope_as = messenger }
			}
		}
	}

	# Okay I guess
	option = {
		name = tgp_japan_yearly_events.1050.a

		pay_short_term_gold = {
			target = liege
			gold = minor_gold_value
		}

		add_character_modifier = {
			modifier = tgp_rule_follower_modifier
			years = 3
		}

		liege = {
			add_opinion = {
				modifier = pleased_opinion
				target = root
				opinion = 15
			}
		}

		stress_impact = {
			generous = medium_stress_impact_loss
			greedy = medium_stress_impact_gain
			craven = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_greed = -1
				ai_rationality = -0.5
			}
		}
	}

	# This rule doesn't even make sense
	option = {
		name = tgp_japan_yearly_events.1050.b
		duel = {
			skill = diplomacy
			target = scope:messenger
			desc = tgp_japan_yearly_events.1050.b.tt
			100 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
				}
				desc = tgp_japan_yearly_events.1050.tt.success
				send_interface_toast = {
					type = event_toast_effect_good
					title = tgp_japan_yearly_events.1050.tt.success
					left_icon = root
					right_icon = scope:messenger
					stress_impact = {
						base = minor_stress_impact_loss
						greedy = minor_stress_impact_loss
					}
					add_prestige = minor_prestige_gain
				}
			}
			35 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
				}
				desc = tgp_japan_yearly_events.1050.tt.failure
				send_interface_toast = {
					type = event_toast_effect_bad
					title = tgp_japan_yearly_events.1050.tt.failure
					left_icon = root
					right_icon = scope:messenger
					pay_short_term_gold = {
						target = liege
						gold = minor_gold_value
					}
					stress_impact = {
						greedy = minor_stress_impact_gain
					}
				}
			}
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_rationality = 1
			}
			modifier = {
				factor = 2
				highest_skill = diplomacy
			}
		}
	}

	# Don't care not paying
	option = {
		name = tgp_japan_yearly_events.1050.c

		liege = {
			add_opinion = {
				modifier = angry_opinion
				target = root
				opinion = -15
			}
		}

		random = {
			chance = 50
			liege = {
				add_hook = {
					type = favor_hook
					target = root
				}
			}
		}

		stress_impact = {
			greedy = minor_stress_impact_loss
			brave = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_boldness = 1
			}
		}
	}
}

# A prisoner requests to be mercy killed
tgp_japan_yearly_events.1060 = {
	type = character_event
	title = tgp_japan_yearly_events.1060.t
	desc = {
		desc = tgp_japan_yearly_events.1060.desc
		random_valid = {
			desc = tgp_japan_yearly_events.1060.desc_generic
			triggered_desc = {
				trigger = { scope:prisoner = { age >= 50 } }
				desc = tgp_japan_yearly_events.1060.desc_old
			}
			triggered_desc = {
				trigger = { scope:prisoner = { age <= 18 } }
				desc = tgp_japan_yearly_events.1060.desc_young
			}
			triggered_desc = {
				trigger = { scope:prisoner = { days_in_prison >= 400 } }
				desc = tgp_japan_yearly_events.1060.desc_young
			}
			triggered_desc = {
				trigger = {
					scope:prisoner = {
						OR = {
							has_character_modifier = recently_tortured
							has_trait = wounded
						}
					}
				}
				desc = tgp_japan_yearly_events.1060.desc_injured
			}
		}
		desc = tgp_japan_yearly_events.1060.desc_outro
	}
	theme = prison
    cooldown = { years = 30 }
	override_background = {
		trigger = { scope:prisoner = { is_in_prison_type = house_arrest } }
		reference = sitting_room
	}
	override_background = {
		trigger = { scope:prisoner = { is_in_prison_type = dungeon } }
		reference = dungeon
	}
	left_portrait = {
		character = scope:prisoner
		triggered_animation = {
			trigger = { scope:prisoner = { is_in_prison_type = house_arrest } }
			animation = prisonhouse
		}
		triggered_outfit = {
			trigger = { scope:prisoner = { is_in_prison_type = dungeon } }
			outfit_tags = { beggar_rags }
		}
	}
	right_portrait = {
		character = root
		animation = interested
	}

	trigger = {
		has_tgp_dlc_trigger = yes
		# location = { geographical_region = world_asia_japan }
		any_prisoner = {
			age >= 14
			is_ruler = no
			#LotR
			is_elf = no
			cannot_be_killed = no
		}
	}

	immediate = {
		random_prisoner = {
			limit = {
				age >= 14
				is_ruler = no
				#LotR
				is_elf = no
				cannot_be_killed = no
			}
			weight = {
				base = 10
				modifier = {
					add = 15
					age >= 50
				}
				modifier = {
					add = 10
					has_character_modifier = recently_tortured
				}
				modifier = {
					add = 5
					days_in_prison >= 400
				}
				modifier = {
					add = -5
					has_trait = patient
				}
				modifier = {
					add = -15
					has_trait = brave
				}
			}
			save_scope_as = prisoner
		}
	}

	# Just kill them
	option = {
		name = tgp_japan_yearly_events.1060.a

		add_piety = minor_piety_gain

		scope:prisoner = { death = { death_reason = death_execution killer = root } }

		stress_impact = {
			base = minor_stress_impact_loss
			callous = minor_stress_impact_gain
			calm = minor_stress_impact_gain
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = 0.5
				ai_zeal = 1
			}
		}
	}

	# Do something nice for them
	option = {
		name = tgp_japan_yearly_events.1060.b

		if = {
			limit = {
				scope:prisoner = { is_in_prison_type = dungeon }
			}
			scope:prisoner = { change_prison_type = house_arrest }
		}

		add_prestige = minor_prestige_gain

		scope:prisoner = {
			add_character_modifier = {
				modifier = tgp_attentive_care_modifier
				years = 5
			}
		}

		stress_impact = {
			compassionate = minor_stress_impact_loss
			forgiving = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = 1
			}
		}
	}

	# Do something mean to them
	option = {
		name = tgp_japan_yearly_events.1060.c

		if = {
			limit = {
				scope:prisoner = { is_in_prison_type = house_arrest }
			}
			scope:prisoner = { change_prison_type = dungeon }
		}

		add_dread = minor_dread_gain

		scope:prisoner = {
			add_character_modifier = {
				modifier = tgp_neglected_modifier
				years = 5
			}
		}

		stress_impact = {
			callous = minor_stress_impact_loss
			sadistic = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = -1
			}
		}
	}

	# Simply ignore their request
	option = {
		name = tgp_japan_yearly_events.1060.d

		add_character_modifier = {
			modifier = tgp_law_defender
			years = 3
		}

		scope:prisoner = {
			add_opinion = {
				modifier = disappointed_opinion
				target = root
				opinion = -15
			}
		}

		stress_impact = {
			just = minor_stress_impact_loss
			lazy = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_rationality = 1
			}
		}
	}
}

# A temple in your realm has burned down
tgp_japan_yearly_events.1070 = {
	type = character_event
	title = tgp_japan_yearly_events.1070.t
	desc = tgp_japan_yearly_events.1070.desc
	theme = faith
	override_background = { reference = burning_building }
	cooldown = { years = 10 }

	left_portrait = {
		character = root
	}
	right_portrait = {
		character = scope:messenger
	}

	trigger = {
		has_tgp_dlc_trigger = yes
		# is_valid_for_japan_events_trigger = yes
		any_sub_realm_county = {
			any_county_province = {
				has_building_or_higher = temple_01
			}
		}
	}

	immediate = {
		if = {
			limit = {
				exists = cp:councillor_court_chaplain
			}
			cp:councillor_court_chaplain = { save_scope_as = messenger }
		}
		else_if = {
			limit = {
				exists = cp:councillor_chancellor
			}
			cp:councillor_chancellor = { save_scope_as = messenger }
		}
		else = {
			random_courtier = { save_scope_as = messenger }
		}

		random_sub_realm_county = {
			limit = {
				any_county_province = { has_building_or_higher = temple_01 }
			}
			random_county_province = {
				limit = { has_building_or_higher = temple_01 }
				save_scope_as = province
			}
		}
	}

	option = {
		name = tgp_japan_yearly_events.1070.a

		remove_short_term_gold = major_gold_value
		scope:province = { add_next_temple_tier_effect = yes }
		add_piety = minor_piety_gain
		add_character_modifier = { modifier = tgp_temple_builder_modifier years = 3 }

		stress_impact = {
			just = minor_stress_impact_loss
			zealous = medium_stress_impact_loss
			cynical = minor_stress_impact_gain
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_zeal = 1
			}
		}
	}

	option = {
		name = tgp_japan_yearly_events.1070.b

		scope:messenger = {
			add_opinion = {
				modifier = disappointed_opinion
				target = root
				opinion = -15
			}
		}
		add_character_modifier = { modifier = tgp_rebuilder_modifier years = 3 }

		stress_impact = {
			lazy = minor_stress_impact_loss
			zealous = medium_stress_impact_gain
			cynical = medium_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_zeal = -1
			}
		}
	}

	option = {
		name = tgp_japan_yearly_events.1070.c
		trigger = {
			OR = {
				probably_superstitious = yes
				has_trait = just
				has_focus_intrigue = yes
				intrigue >= high_skill_rating
			}
		}
		custom_tooltip = tgp_japan_yearly_events.1070.c_tt

		trigger_event = {
			id = tgp_japan_yearly_events.1071
			days = { 25 35 }
		}

		stress_impact = {
			paranoid = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_rationality = 1
			}
		}
	}
}

# Follow up event
tgp_japan_yearly_events.1071 = {
	type = character_event
	title = tgp_japan_yearly_events.1070.t
	desc = {
		desc = tgp_japan_yearly_events.1071.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:burn_reason = flag:yokai
				}
				desc = tgp_japan_yearly_events.1071.desc_yokai
			}
			triggered_desc = {
				trigger = {
					scope:burn_reason = flag:heretics
				}
				desc = tgp_japan_yearly_events.1071.desc_heretics
			}
			triggered_desc = {
				trigger = {
					scope:burn_reason = flag:rival
				}
				desc = tgp_japan_yearly_events.1071.desc_rival
			}
			triggered_desc = {
				trigger = {
					scope:burn_reason = flag:weather
				}
				desc = tgp_japan_yearly_events.1071.desc_weather
			}
		}
	}
	theme = realm

	left_portrait = {
		character = root
		animation = disbelief
	}

	right_portrait = {
		character = scope:messenger
		animation = storyteller
	}

	immediate = {
		random_list = {
			10 = {
				save_scope_value_as = { name = burn_reason value = flag:yokai }
			}
			10 = {
				save_scope_value_as = { name = burn_reason value = flag:heretics }
			}
			10 = {
				trigger = {
					any_relation = { type = rival }
				}
				save_scope_value_as = { name = burn_reason value = flag:rival }
				random_relation = {
					type = rival
					save_scope_as = rival
				}
			}
			10 = {
				save_scope_value_as = { name = burn_reason value = flag:weather }
			}
		}
	}

	# Do something
	option = {
		name = tgp_japan_yearly_events.1071.a

		remove_short_term_gold = minor_gold_value

		switch = {
			trigger = scope:burn_reason
			flag:yokai = {
				add_character_modifier = {
					modifier = tgp_burned_yokai_modifier
					years = 5
				}
				stress_impact = {
					paranoid = minor_stress_impact_loss
				}
			}
			flag:weather = {
				add_character_modifier = {
					modifier = tgp_burned_weather_modifier
					years = 5
				}
				stress_impact = {
					diligent = minor_stress_impact_loss
				}
			}
			flag:heretics = {
				add_character_modifier = {
					modifier = tgp_faith_defender_modifier
					years = 5
				}
				stress_impact = {
					zealous = minor_stress_impact_loss
				}
			}
			flag:rival = {
				custom_tooltip = 1071_rival_tt
				set_variable = {
					name = tgp_1071_bonus
					value = scope:rival
					years = 2
				}
				stress_impact = {
					vengeful = minor_stress_impact_loss
				}
			}
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_rationality = 1
			}
			modifier = {
				factor = 2
				AND = {
					has_trait = paranoid
					scope:burn_reason = flag:yokai
				}
			}
			modifier = {
				factor = 2
				AND = {
					has_trait = zealous
					scope:burn_reason = flag:heretics
				}
			}
		}
	}

	# Do nothing
	option = {
		name = tgp_japan_yearly_events.1071.b

		stress_impact = {
			lazy = minor_stress_impact_loss
			calm = minor_stress_impact_loss
			diligent = minor_stress_impact_gain
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_energy = -1
			}
		}
	}
}

# Someone is fishing in the tsuri-dono
tgp_japan_yearly_events.1080 = {
	type = character_event
	title = tgp_japan_yearly_events.1080.t
	desc = tgp_japan_yearly_events.1080.desc
	theme = court
    cooldown = { years = 10 }

	override_background = {
		reference = garden
	}

	left_portrait = {
		character = root
		animation = interested
	}

	right_portrait = {
		character = scope:fisherman
		animation = survey
	}

	trigger = {
		has_tgp_dlc_trigger = yes
		is_available_adult = yes
		# location = {
		# 	geographical_region = world_asia_japan
		# }
		is_elf = yes #LotR
		is_landed = yes
		any_courtier_or_guest = {
			NOR = {
				is_close_or_extended_family_of = root
				has_any_bad_relationship_with_character_trigger = { CHARACTER = root }
			}
			is_available_adult = yes
		}
	}

	immediate = {
		random_courtier_or_guest = {
			limit = {
				is_available_adult = yes
				NOR = {
					is_close_or_extended_family_of = root
					has_any_bad_relationship_with_character_trigger = { CHARACTER = root }
				}
			}
			weight = {
				base = 10
				modifier = {
					add = 15
					intrigue >= decent_skill_rating
				}
			}
			save_scope_as = fisherman
		}
	}

	# Fish with them
	option = {
		name = tgp_japan_yearly_events.1080.a

		scope:fisherman = {
			add_opinion = {
				modifier = pleased_opinion
				target = root
				opinion = 15
			}
		}

		add_character_modifier =  {
			modifier = tgp_people_mingler_modifier
			years = 3
		}

		stress_impact = {
			compassionate = minor_stress_impact_loss
			gregarious = medium_stress_impact_loss
			calm = medium_stress_impact_loss
			callous = minor_stress_impact_gain
			arrogant = minor_stress_impact_gain
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_sociability = 1
				ai_compassion = 0.5
			}
		}
	}

	# Seems odd?
	option = {
		name = tgp_japan_yearly_events.1080.b

		duel = {
			skill = intrigue
			target = scope:fisherman
			desc = tgp_japan_yearly_events.1080.b.tt
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
				}
				desc = tgp_japan_yearly_events.1080.tt.success
				send_interface_toast = {
					type = event_toast_effect_good
					title = tgp_japan_yearly_events.1080.tt.success
					left_icon = root
					right_icon = scope:fisherman
					stress_impact = {
						paranoid = minor_stress_impact_loss
					}
					if = {
						limit = {
							any_courtier = {
								any_secret = {
									NOT = { is_known_by = root }
								}
							}
						}
						custom_tooltip = {
							text = tgp_japan_yearly_events.1080.tt_secret
							random_courtier = {
								limit = {
									any_secret = {
										NOT = { is_known_by = root }
									}
								}
								random_secret = {
									limit = { NOT = { is_known_by = root } }
									reveal_to = root
								}
							}
						}
					}
					else = {
						add_character_modifier = {
							modifier = tgp_scheme_wary_modifier
							years = 3
						}
						custom_tooltip = {
							text = tgp_japan_yearly_events.1080.tt_family
							every_close_family_member = {
								limit = {
									is_courtier_of = root
								}
								add_character_modifier = {
									modifier = tgp_scheme_wary_modifier
									years = 3
								}
							}
						}
					}
				}
			}
			59 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
				}
				desc = tgp_japan_yearly_events.1080.tt.failure
				send_interface_toast = {
					type = event_toast_effect_bad
					title = tgp_japan_yearly_events.1080.tt.failure
					left_icon = root
					right_icon = scope:fisherman
					add_prestige = minor_prestige_loss
					scope:fisherman = {
						add_opinion = {
							modifier = insulted_opinion
							target = root
							opinion = -15
						}
					}
					stress_impact = {
						paranoid = minor_stress_impact_gain
					}
				}
			}
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_rationality = 1
			}
			modifier = {
				factor = 2
				has_trait = paranoid
			}
		}
	}

	# Go away!
	option = {
		name = tgp_japan_yearly_events.1080.c

		if = {
			limit = { has_royal_court = yes }
			change_current_court_grandeur = medium_court_grandeur_gain
		}
		else = {
			add_dread = minor_dread_gain
		}

		scope:fisherman = {
			add_opinion = {
				modifier = annoyed_opinion
				target = root
				opinion = -15
			}
		}

		every_vassal_or_below = {
			vassal_stance = courtly
			custom = every_courtly_vassal
			add_opinion = {
				modifier = impressed_opinion
				target = root
				opinion = 15
			}
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_boldness = 1
				ai_compassion = -0.5
			}
			modifier = {
				factor = 2
				has_trait = arrogant
			}
		}
	}
}

# Growing old with no heir
tgp_japan_yearly_events.1090 = {
	type = character_event
	title = tgp_japan_yearly_events.1090.t
	desc = {
		desc = tgp_japan_yearly_events.1090.desc_intro
		first_valid = {
			triggered_desc = { # Children are dead
				trigger = {
					any_child = {
						even_if_dead = yes
						is_alive = no
					}
				}
				desc = tgp_japan_yearly_events.1090.desc_intro_dead
			}
			triggered_desc = { # No children
				trigger = {
					NOT = {
						any_child = { even_if_dead = yes }
					}
				}
				desc = tgp_japan_yearly_events.1090.desc_intro_none
			}
		}
		desc = tgp_japan_yearly_events.1090.desc
	}
	theme = court
    cooldown = { years = 25 }

	left_portrait = {
		character = root
		animation = disbelief
	}

	right_portrait = {
		character = scope:informer
		animation = stress
	}

	trigger = {
		has_tgp_dlc_trigger = yes
		is_available_adult = yes
		# location = {
		# 	geographical_region = world_asia_japan
		# }
		is_ruler = yes
		trigger_if = {
			limit = { is_female = no }
			age >= old_age #LotR
		}
		trigger_else = { fertility_age_equivalent >= 45 } 
		# any_held_title = { #LotR
			# is_noble_family_title = yes
		primary_title = {
			any_title_heir = {
				NOT = { is_close_family_of = root }
			}
		}
		#LotR
		is_orc = no
		cannot_be_killed = no
	}

	immediate = {
		# random_held_title = { #LotR
		# 	limit = {
		# 		is_noble_family_title = yes
		# 		any_title_heir = {
		# 			NOT = { is_close_family_of = root }
		# 		}
		# 	}
		primary_title = {
			save_scope_as = target_title
		}
		if = {
			limit = {
				exists = primary_spouse
			}
			primary_spouse = { save_scope_as = informer }
		}
		else_if = {
			limit = { exists = cp:councillor_chancellor }
			cp:councillor_chancellor = { save_scope_as = informer }
		}
		else = {
			random_courtier = { save_scope_as = informer }
		}
		if = {
			limit = {
				allowed_more_concubines = yes
				is_male = yes
			}
			create_character = {
				template = tgp_concubine_template
				location = root.location
				save_scope_as = new_concubine
			}
		}
	}

	weight_multiplier = {
		base = 10
		modifier = {
			add = 15
			is_female = yes
		}
	}

	# Try and make one?
	option = {
		name = tgp_japan_yearly_events.1090.a
		trigger = {
			is_male = yes
		}

		add_character_modifier = {
			modifier = tgp_fertility_boost_modifier
			years = 5
		}

		if = {
			limit = {
				allowed_more_concubines = yes
			}
			random = {
				chance = 50
				custom_tooltip = tgp_japan_yearly_events.1090.a_tt
				send_interface_toast = {
					type = event_toast_effect_good
					title = tgp_japan_yearly_events.1090.a_tt
					left_icon = root
					right_icon = scope:new_concubine
					hidden_effect = { make_concubine = scope:new_concubine }
				}
			}
		}


		ai_chance = {
			base = 50
			ai_value_modifier = {
				ai_rationality = 1
			}
			modifier = {
				factor = 2
				fertility <= low_fertility
			}
		}
	}

	# adopt an heir
	option = {
		name = tgp_japan_yearly_events.1090.b

		custom_tooltip = tgp_japan_yearly_events.1090.b_tt
		trigger = {
			NOT = {
				culture = {
					has_cultural_parameter = allows_adoption
				}
			}
		}
		if = {
			limit = {
				has_legitimacy = yes
			}
			add_legitimacy = medium_legitimacy_loss
		}
		else = {
			add_prestige = medium_prestige_loss
		}

		set_variable = {
			name = seeks_an_heir
			value = yes
		}

		ai_chance = {
			base = 0
		}
	}

	# Rule as long as possible
	option = {
		name = {
			text = {
				first_valid = {
					triggered_desc = {
						trigger = {
							OR = {
								has_trait = lazy
								has_trait = arrogant
								has_trait = cynical
							}
						}
						desc = tgp_japan_yearly_events.1090.c_uncaring
					}
					desc = tgp_japan_yearly_events.1090.c
				}
			}
		}

		add_prestige = minor_prestige_loss

		add_character_modifier = {
			modifier = tgp_longer_life_modifier
			years = 10
		}

		stress_impact = {
			base = minor_stress_impact_loss
			lazy = minor_stress_impact_loss
			cynical = minor_stress_impact_loss
		}

		ai_chance = {
			base = 25
			ai_value_modifier = {
				ai_energy = -0.5
			}
			modifier = {
				factor = 1.5
				has_trait = cynical
			}
			modifier = {
				factor = 2
				health <= poor_health
			}
		}
	}

	after = {
		scope:new_concubine ?= {
			silent_disappearance_ai_effect = yes
		}
	}
}

# You become guilty after killing some people
tgp_japan_yearly_events.1100 = {
	type = character_event
	title = tgp_japan_yearly_events.1100.t
	desc = {
		desc = tgp_japan_yearly_events.1100.desc
		triggered_desc = {
			trigger = {
				exists = scope:victim_2
			}
			desc = tgp_japan_yearly_events.1100.desc_2
		}
		triggered_desc = {
			trigger = {
				exists = scope:victim_2
			}
			desc = tgp_japan_yearly_events.1100.desc_3
		}
		desc = tgp_japan_yearly_events.1100.desc_outro
	}

	theme = court
    cooldown = { years = 25 }

	left_portrait = {
		character = root
		animation = stress
	}

	right_portrait = {
		character = scope:victim
	}

	lower_center_portrait = {
		trigger = {
			exists = scope:victim_2
			NOT = { exists = scope:victim_3 }
		}
		character = scope:victim_2
	}

	lower_left_portrait = {
		trigger = {
			exists = scope:victim_2
			exists = scope:victim_3
		}
		character = scope:victim_2
	}

	lower_right_portrait = {
		trigger = { exists = scope:victim_3 }
		character = scope:victim_3
	}

	weight_multiplier = {
		base = 10
		modifier = {
			add = 25
			any_secret = {
				type = secret_murder
				can_be_exposed_by = root
				count > 1
			}
		}
	}

	trigger = {
		has_tgp_dlc_trigger = yes
		is_available_adult = yes
		# location = {
		# 	geographical_region = world_asia_japan
		# }
		NOT = { has_trait = callous }
		any_secret = {
			type = secret_murder
			can_be_exposed_by = root
		}
		#LotR
		is_orc = no
		is_nazgul = no
		is_sauron = no
	}

	immediate = {
		random_secret = {
			type = secret_murder
			limit = { can_be_exposed_by = root }
			secret_target = { save_scope_as = victim }
		}
		random_secret = {
			type = secret_murder
			limit = {
				can_be_exposed_by = root
				NOT = { secret_target = scope:victim }
			}
			secret_target = { save_scope_as = victim_2 }
		}
		random_secret = {
			type = secret_murder
			limit = {
				can_be_exposed_by = root
				NOR = {
					secret_target = scope:victim
					secret_target = scope:victim_2
				}
			}
			secret_target = { save_scope_as = victim_3 }
		}
	}

	# Confess your sins
	option = {
		name = tgp_japan_yearly_events.1100.a

		custom_tooltip = {
			text = tgp_japan_yearly_events.1100.a_tt
			every_secret = {
				type = secret_murder
				expose_secret = root
			}
		}

		stress_impact = {
			base = major_stress_impact_loss
			just = minor_stress_impact_loss
			honest = minor_stress_impact_loss
			compassionate = minor_stress_impact_loss
			deceitful = minor_stress_impact_gain
		}

		ai_chance = {
			base = 50
			ai_value_modifier = {
				ai_honor = 1
			}
			modifier = {
				factor = 2
				has_trait = honest
			}
		}
	}

	# I can't let anyone know this
	option = {
		name = tgp_japan_yearly_events.1100.b
		custom_tooltip = tgp_japan_yearly_events.1100.b_tt
		add_character_flag = {
			flag = guilt_fever_murder_cd
			years = 5
		}

		add_character_modifier = {
			modifier = tgp_guilt_fever_modifier
			years = 5
		}

		stress_impact = {
			base = medium_stress_impact_gain
			deceitful = minor_stress_impact_loss
			paranoid = minor_stress_impact_loss
			just = minor_stress_impact_gain
			honest = minor_stress_impact_gain
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_honor = -0.5
			}
			modifier = {
				factor = 2
				has_trait = paranoid
			}
		}
	}
}

# An animal is seen near the shrine of a God
tgp_japan_yearly_events.1110 = {
	type = character_event
	title = tgp_japan_yearly_events.1110.t
	desc = tgp_japan_yearly_events.1110.desc
	theme = faith
    cooldown = { years = 10 }

	left_portrait = {
		character = root
		animation = admiration
	}

	trigger = {
		has_tgp_dlc_trigger = yes
		is_available_adult = yes
		# religion = religion:shintoism_religion
		# location.religion = religion:shintoism_religion
		is_elf = yes #LotR
	}

	immediate = {
		create_artifact_animal_hide_effect = {
			OWNER = root
			HUNTER = root
			LEGENDARY = no
			ANIMAL = flag:stag
		}
	}

	# This is a sign to reflect
	option = {
		name = tgp_japan_yearly_events.1110.a

		add_character_modifier = {
			modifier = tgp_reflection_modifier
			years = 5
		}

		stress_impact = {
			base = minor_stress_impact_gain
			zealous = minor_stress_impact_loss
			cynical = minor_stress_impact_gain
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_zeal = 1
			}
			modifier = {
				factor = 2
				has_focus_learning = yes
			}
		}
	}

	# This is a sign of good fortune
	option = {
		name = tgp_japan_yearly_events.1110.b

		stress_impact = {
			base = miniscule_stress_impact_loss
			zealous = minor_stress_impact_loss
			cynical = minor_stress_impact_gain
		}

		random = {
			chance = 50
			send_interface_toast = {
				type = event_toast_effect_good
				title = tgp_japan_yearly_events.1110.b.tt
				left_icon = root
                add_short_term_gold = medium_gold_value
			}
		}

		stress_impact = {
			greedy = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_greed = 1
			}
		}
	}

	# Capture it as a trophy
	option = {
		name = tgp_japan_yearly_events.1110.c

		duel = {
			skill = prowess
			value = decent_skill_rating
			desc = tgp_japan_yearly_events.1110.c.tt
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
				}
				desc = tgp_japan_yearly_events.1110.tt.success
				send_interface_toast = {
					type = event_toast_effect_good
					title = tgp_japan_yearly_events.1110.tt.success
					left_icon = root
					scope:newly_created_artifact = { set_owner = root }
					add_piety = minor_piety_loss
				}
			}
			59 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
				}
				desc = tgp_japan_yearly_events.1110.tt.failure
				send_interface_toast = {
					type = event_toast_effect_bad
					title = tgp_japan_yearly_events.1110.tt.failure
					left_icon = root
					add_prestige = minor_prestige_loss
				}
			}
		}

		stress_impact = {
			craven = minor_stress_impact_gain
			zealous = minor_stress_impact_gain
			compassionate = minor_stress_impact_gain
			cynical = minor_stress_impact_loss
			greedy = minor_stress_impact_loss
			brave = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_greed = 1
				ai_honor = -1
			}
		}
	}
}

# You come across a warrior in your travels
tgp_japan_yearly_events.1120 = {
	type = character_event
	title = tgp_japan_yearly_events.1120.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					location.county = { is_riverside_county = yes }
				}
				desc = tgp_japan_yearly_events.1120.desc_intro_river
			}
			desc = tgp_japan_yearly_events.1120.desc_intro
		}
		desc = tgp_japan_yearly_events.1120.desc
	}
	theme = travel
    cooldown = { years = 100 }

	left_portrait = {
		character = scope:strong_leader
		animation = rage
	}

	right_portrait = {
		character = scope:warrior_monk
		animation = aggressive_sword
	}

	trigger = {
		has_tgp_dlc_trigger = yes
		is_available_travelling_adult = yes
		is_location_valid_for_travel_event_on_land = yes

		location = {
			OR = {
				#anywhere with warrior monks, this is currently only Japan, but hopefully elsewhere going forward.
				county.culture = {
					OR = { #LotR
						has_cultural_tradition = tradition_tgp_warrior_monks
						has_cultural_tradition = tradition_warrior_culture
						has_cultural_tradition = tradition_martial_admiration
						has_cultural_tradition = tradition_belfalathrim_chivalry
						has_cultural_tradition = tradition_tales_of_great_deeds
						has_cultural_tradition = tradition_riders_of_the_mark
						has_cultural_tradition = tradition_chivalry
					}
				}
				# geographical_region = world_asia_japan
			}
		}
		# has_government = japan_feudal_government
	}

	immediate = {
		save_scope_as = strong_leader
		create_character = {
			template = tgp_warrior_monk_template
			location = root.location
			save_scope_as = warrior_monk
			after_creation = {
				random = {
					chance = 50
					add_trait = giant
				}
			}
		}
	}

	# Accept their challenge
	option = {
		trigger = { lotr_can_host_courtier = { CHARACTER = scope:warrior_monk } } #LotR
		name = {
			text = {
				first_valid = {
					triggered_desc = {
						trigger = {
							martial >= decent_skill_rating
						}
						desc = tgp_japan_yearly_events.1120.a_warrior
					}
					desc = tgp_japan_yearly_events.1120.a
				}
			}
		}

		add_prestige = minor_prestige_gain
		custom_tooltip = ep3_laamps.6001.b.two.tt

		configure_start_single_combat_effect = {
			SC_INITIATOR = scope:warrior_monk
			SC_ATTACKER = scope:warrior_monk
			SC_DEFENDER = root
			FATALITY = no
			FIXED = no
			LOCALE = terrain_scope
			OUTPUT_EVENT = tgp_japan_yearly_events.1121
			INVALIDATION_EVENT = single_combat.1006
		}

		stress_impact = {
			craven = medium_stress_impact_gain
			arrogant = minor_stress_impact_loss
			brave = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_energy = 1
			}
			modifier = {
				has_trait = craven
				factor = 0
			}
		}
	}

	# Just join me, I'm super cool
	option = {
		trigger = { lotr_can_host_courtier = { CHARACTER = scope:warrior_monk } } #LotR
		name = tgp_japan_yearly_events.1120.b

		duel = {
			skill = diplomacy
			value = decent_skill_rating
			desc = tgp_japan_yearly_events.1120.b.tt
			35 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
				}
				min = 2
				desc = tgp_japan_yearly_events.1120.tt.success
				send_interface_toast = {
					type = event_toast_effect_good
					title = tgp_japan_yearly_events.1120.tt.success
					left_icon = root
					add_courtier = scope:warrior_monk
				}
			}
			65 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
				}
				min = 2
				desc = tgp_japan_yearly_events.1120.tt.failure
				send_interface_toast = {
					type = event_toast_effect_bad
					title = tgp_japan_yearly_events.1120.tt.failure
					left_icon = root
					add_prestige = minor_prestige_loss
				}
			}
		}

		stress_impact = {
			calm = minor_stress_impact_loss
			compassionate = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_honor = 1
			}
		}
	}

	# Guards, deal with him!
	option = {
		name = tgp_japan_yearly_events.1120.c
		trigger = {
			current_travel_plan = {
				has_travel_option = hire_experienced_mercenaries_option
			}
		}
		custom_tooltip = tgp_japan_yearly_events.1120.c_tt
		add_prestige = minor_prestige_loss
		add_dread = minor_dread_gain

		random = {
			chance = 50
			scope:warrior_monk = {
				increase_wounds_no_death_effect = { REASON = fight }
			}
		}

		stress_impact = {
			impatient = minor_stress_impact_loss
			irritable = minor_stress_impact_loss
			callous = minor_stress_impact_loss
			arbitrary = minor_stress_impact_loss
			compassionate = minor_stress_impact_gain
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = -1
			}
			modifier = {
				has_trait = compassionate
				factor = 0
			}
		}
	}

	# No thx
	option = {
		name = tgp_japan_yearly_events.1120.d

		current_travel_plan = {
			delay_travel_plan = { days = 60 }
		}

		stress_impact = {
			brave = minor_stress_impact_gain
		}

		ai_chance = {
			base = 75
			ai_value_modifier = {
				ai_energy = -1
			}
		}
	}

	after = {
		scope:warrior_monk ?= {
			silent_disappearance_ai_effect = yes
		}
	}
}

# Outcome of the battle
tgp_japan_yearly_events.1121 = {
	hidden = yes
	immediate = {
		if = {
			limit = {
				scope:sc_victor = scope:strong_leader
			}
			scope:strong_leader = {
				send_interface_toast = {
					type = event_toast_effect_good
					title = tgp_japan_yearly_events.1120.tt.success
					left_icon = scope:strong_leader
					right_icon = scope:warrior_monk
					scope:warrior_monk = { add_trait = loyal }
                    add_courtier = scope:warrior_monk
				}
			}
		}
	}
}

scripted_trigger valid_child_1130 = {
	any_spouse = { count = 0 }
	OR = {
		diplomacy >= decent_skill_rating
		learning >= decent_skill_rating
		has_trait = education_diplomacy_3
		has_trait = education_diplomacy_4
		has_trait = education_diplomacy_5
		has_trait = education_learning_3
		has_trait = education_learning_4
		has_trait = education_learning_5
	}
	is_female = yes
	NOT = { has_trait = lifestyle_poet }
	age >= 13
	age <= young_age #LotR
	is_available = yes
}

# Your daughter expresses an interest in poetry
tgp_japan_yearly_events.1130 = {
	type = character_event
	title = tgp_japan_yearly_events.1130.t
	desc = tgp_japan_yearly_events.1130.desc
	theme = learning
    cooldown = { years = 15 }

	left_portrait = {
		character = root
		animation = interested
	}

	right_portrait = {
		character = scope:poet_daughter
		animation = storyteller
	}

	trigger = {
		has_tgp_dlc_trigger = yes
		is_available_adult = yes
		# location = {
		# 	geographical_region = world_asia_japan
		# }
		# has_government = japan_administrative_government
		any_child = { valid_child_1130 = yes }
		is_orc = no #LotR
	}

	immediate = {
		random_child = {
			limit = { valid_child_1130 = yes }
			weight = {
				base = 10
				modifier = {
					add = 15
					intrigue >= decent_skill_rating
				}
				modifier = {
					add = 5
					OR = {
						has_trait = shy
						has_trait = chaste
						has_trait = ambitious
					}
				}
			}
			save_scope_as = poet_daughter
		}
		scope:poet_daughter = {
			add_trait = inappetetic
		}
	}


	# Encourage her writing
	option = {
		name = tgp_japan_yearly_events.1130.a

		add_prestige = minor_prestige_gain

		scope:poet_daughter = {
			add_stress = minor_stress_loss
			add_opinion = {
				modifier = grateful_opinion
				target = root
				opinion = 15
			}
			duel = {
				skills = { diplomacy learning }
				value = decent_skill_rating
				desc = tgp_japan_yearly_events.1130.a.tt
				10 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 2
					}
					desc = tgp_japan_yearly_events.1130.poet_critical
					root = {
						send_interface_toast = {
							type = event_toast_effect_good
							title = tgp_japan_yearly_events.1130.poet_critical
							left_icon = root
							right_icon = scope:poet_daughter
							scope:poet_daughter = {
								add_trait = lifestyle_poet
								remove_trait = inappetetic
							}
						}
					}
				}
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 3.5
					}
					desc = tgp_japan_yearly_events.1130.poet
					root = {
						send_interface_toast = {
							type = event_toast_effect_good
							title = tgp_japan_yearly_events.1130.poet
							left_icon = root
							right_icon = scope:poet_daughter
							scope:poet_daughter = { add_trait = lifestyle_poet }
						}
					}
				}
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -3.5
					}
					desc = tgp_japan_yearly_events.1130.nice_try
					send_interface_toast = {
						type = event_toast_effect_neutral
						title = tgp_japan_yearly_events.1130.nice_try
						left_icon = root
						right_icon = scope:poet_daughter
						scope:poet_daughter = { add_learning_skill = 3 }
					}
				}
			}
			add_character_modifier = {
				modifier = tgp_learning_poetry_modifier
				years = 5
			}
		}

		if = {
			limit = {
				has_trait = lifestyle_poet
			}
			add_trait_xp = {
				trait = lifestyle_poet
				value = 5
			}
		}

		stress_impact = {
			compassionate = minor_stress_impact_loss
			lifestyle_poet = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = 1
			}
			opinion_modifier = {
				opinion_target = scope:poet_daughter
				multiplier = 2
			}
			modifier = {
				has_trait = lifestyle_poet
				factor = 2
			}
		}
	}

	# This is so dumb she needs to be doing court stuff instead
	option = {
		name = tgp_japan_yearly_events.1130.b

		if = {
			limit = {
				has_royal_court = yes
			}
			change_current_court_grandeur = minor_court_grandeur_gain
		}
		else = {
			add_prestige = minor_prestige_gain
		}

		every_vassal_or_below = {
			vassal_stance = courtly
			custom = every_courtly_vassal
			add_opinion = {
				modifier = approval_opinion
				target = root
				opinion = 15
			}
		}

		scope:poet_daughter = {
			add_stress = minor_stress_gain
			add_opinion = {
				modifier = disappointed_opinion
				target = root
				opinion = -15
			}
			remove_trait = inappetetic
			add_diplomacy_skill = 1
		}

		stress_impact = {
			diligent = minor_stress_impact_loss
			callous = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			opinion_modifier = {
				opinion_target = scope:poet_daughter
				multiplier = -2
			}
		}
	}
}

# You are stopped in Soryo lands as a Ritsuryo ruler
tgp_japan_yearly_events.1140 = {
	type = character_event
	title = tgp_japan_yearly_events.1140.t
	desc = tgp_japan_yearly_events.1140.desc
	theme = travel
    cooldown = { years = 15 }

	left_portrait = {
		character = root
		animation = worry
	}

	right_portrait = {
		character = scope:toll_warrior
		animation = war_defender
	}

	lower_center_portrait = scope:local_ruler

	trigger = {
		has_tgp_dlc_trigger = yes
		is_available_travelling_adult = yes
		is_location_valid_for_travel_event_on_land = yes
		location = {
			# geographical_region = world_asia_japan
			county.holder = {
				has_government = japan_feudal_government
				any_knight = { is_available = yes count >= 1 }
			}
		}
		has_government = japan_administrative_government
		short_term_gold >= minor_gold_value
		OR = {
			house.house_head = root
			prestige_level >= 2
		}
		# title:e_japan.holder != root
	}

	immediate = {
		location.county = {
			save_scope_as = local_county
			holder = {
				save_scope_as = local_ruler
				random_knight = {
					limit = { is_available = yes }
					save_scope_as = toll_warrior
				}
			}
		}
	}

	weight_multiplier = {
		base = 10
		modifier = {
			add = 20
			scope:local_ruler.house.house_head = scope:local_ruler
		}
	}

	# Pay the toll, but remember their names
	option = {
		name = tgp_japan_yearly_events.1140.a

		pay_short_term_gold = {
			target = scope:local_ruler
			gold = minor_gold_value
		}

		house = { 
			change_house_relation_effect = {
				HOUSE = scope:local_ruler.house
				VALUE = house_relation_damage_minor_value
				REASON = conflict
				CHAR = root
				TARGET_CHAR = scope:local_ruler
				TITLE = scope:dummy_gender
			}
		}

		stress_impact = {
			calm = minor_stress_impact_loss
			honest = minor_stress_impact_loss
			just = minor_stress_impact_loss
			generous = minor_stress_impact_loss
			greedy = minor_stress_impact_gain
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_honor = 1
			}
		}
	}

	# Gaslight the guard
	option = {
		name = tgp_japan_yearly_events.1140.b

		duel = {
			skills = { diplomacy intrigue }
			target = scope:toll_warrior
			desc = tgp_japan_yearly_events.1140.b.tt
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
				}
				desc = tgp_japan_yearly_events.1140.tt.success
				send_interface_toast = {
					type = event_toast_effect_good
					title = tgp_japan_yearly_events.1140.tt.success
					left_icon = root
					add_prestige = medium_prestige_gain
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
				}
				desc = tgp_japan_yearly_events.1140.tt.failure
				send_interface_toast = {
					type = event_toast_effect_bad
					title = tgp_japan_yearly_events.1140.tt.failure
					left_icon = root
					add_prestige = minor_prestige_loss
					current_travel_plan = {
						delay_travel_plan = { days = 45 }
					}
				}
			}
		}

		stress_impact = {
			greedy = minor_stress_impact_loss
			humble = minor_stress_impact_gain
			stubborn = minor_stress_impact_loss
		}

		ai_chance = {
			base = 75
			ai_value_modifier = {
				ai_honor = -1
			}
			modifier = {
				factor = 2
				has_trait = deceitful
			}
		}
	}

	# Refuse to pay
	option = {
		name = tgp_japan_yearly_events.1140.c

		current_travel_plan = {
			delay_travel_plan = { days = 60 }
		}

		scope:local_ruler = {
			add_opinion = {
				modifier = angry_opinion
				target = root
				opinion = -15
			}
		}

		house = {
			decrease_house_relation_level_effect = {
				HOUSE = scope:local_ruler.house
				REASON = conflict
			}
		}

		stress_impact = {
			arrogant = minor_stress_impact_loss
			greedy = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_greed = 1
			}
			opinion_modifier = {
				opinion_target = scope:local_ruler
				multiplier = -2
			}
		}
	}
}

# The ruler of Japan is passing in your lands
tgp_japan_yearly_events.1150 = {
	type = character_event
	title = tgp_japan_yearly_events.1150.t
	desc = tgp_japan_yearly_events.1150.desc
	theme = court
    cooldown = { years = 25 }
    override_background = terrain
	left_portrait = {
		character = root
		animation = survey
		camera = camera_event_center_away
	}

	lower_center_portrait = scope:emperor
	trigger = {
		has_tgp_dlc_trigger = yes
		is_available_adult = yes
		# location = {
		# 	geographical_region = world_asia_japan
		# }
		always = no #LotR - TODO

		# title:e_japan.holder = {
		# 	has_realm_law = japanese_bureaucracy_0
		# 	this != root
		# }

		any_held_title = {
			tier = tier_county
			# title:e_japan.holder.location.county = this
		}
	}

	immediate = {
		# title:e_japan.holder = {
		# 	save_scope_as = emperor
		# 	location.county = { save_scope_as = emperor_location }
		# }
		save_scope_as = local_ruler
	}

	# Option A) Send him some gold
	option = {
		name = tgp_japan_yearly_events.1150.a
		save_scope_value_as = { name = ruler_choice value = flag:gift }
		pay_short_term_gold = {
			target = scope:emperor
			gold = minor_gold_value
		}
		scope:emperor = {
			add_opinion = {
				modifier = pleased_opinion
				target = root
				opinion = 20
			}
		}

		stress_impact = {
			generous = minor_stress_impact_loss
			greedy = minor_stress_impact_gain
		}
		ai_chance = {
			base = 75
			ai_value_modifier = {
				ai_compassion = 1
				ai_greed = -1
			}
			opinion_modifier = {
				opinion_target = scope:emperor
				multiplier = 2
			}
			modifier = {
				short_term_gold <= minor_gold_value
				factor = 0
			}

		}
	}

	# Option B) Extend my hospitality
	option = {
		name = tgp_japan_yearly_events.1150.b
		flavor = tgp_japan_yearly_events.1150.b.flavor
		save_scope_value_as = { name = ruler_choice value = flag:hospitality  }
		pay_short_term_gold = {
			target = scope:emperor
			gold = medium_gold_value
		}
		change_influence = minor_influence_gain
		add_prestige = minor_prestige_gain

		scope:emperor = {
			add_opinion = {
				modifier = pleased_opinion
				target = root
				opinion = 35
			}
		}
		#Improve house relations
		house = { 
			change_house_relation_effect = {
				HOUSE = scope:emperor.house
				VALUE =  house_relation_improve_medium_value
				REASON = friend
				CHAR = root
				TARGET_CHAR = scope:emperor
				TITLE = scope:dummy_gender
			}
		}

		stress_impact = {
			gregarious = minor_stress_impact_loss
			generous = minor_stress_impact_loss
			greedy = minor_stress_impact_gain
			shy = minor_stress_impact_gain
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = 1
				ai_greed = -1
			}
			opinion_modifier = {
				opinion_target = scope:emperor
				multiplier = 2
			}
			modifier = {
				short_term_gold <= medium_gold_value
				factor = 0
			}
		}
	}

	#Option F) Slander him
	option = {
		name = tgp_japan_yearly_events.1150.f
		flavor = tgp_japan_yearly_events.1150.f.flavor
		add_intrigue_lifestyle_xp = medium_lifestyle_experience
		add_prestige = minor_prestige_loss
		#No need to see this if you're on good terms with the emperor
		trigger = {
			can_start_scheme = {
				type = slander
				target_character = scope:emperor
			}
			dislikes_character_trigger = { CHARACTER = scope:emperor }
		}
		save_scope_value_as = { name = ruler_choice value = flag:slander}
		if = {
			limit = {
				NOT = {
					any_scheme = {
						scheme_type = slander
						scheme_target_character = scope:emperor
					}
				}
			}
			#If we don't have a scheme, let's scheme with a boost
			start_scheme = {
				type = slander
				target_character = scope:emperor
			}
		}

		custom_tooltip = {
			text = tgp_japan_yearly_events.1150.f.tt
			random_scheme = {
				limit = {
					scheme_type = slander
					scheme_target_character = scope:emperor
				}
				add_scheme_modifier = {  type = bided_my_time }
			}
		}
		stress_impact = {
			compassionate = minor_stress_impact_gain
			generous = minor_stress_impact_gain
			patient = minor_stress_impact_loss
			vengeful = medium_stress_impact_loss
			ambitious = minor_stress_impact_loss
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_compassion = -1
				ai_greed = -1
			}
		}
	}

	# Option C) Write him a poem!
	option = {
		name = tgp_japan_yearly_events.1150.c
		trigger = { has_trait = lifestyle_poet }

		save_scope_value_as = { name = ruler_choice value = flag:poem }
		scope:emperor = {
			add_opinion = {
				modifier = pleased_opinion
				target = root
				opinion = 20
			}
		}
		add_trait_xp = {
			trait = lifestyle_poet
			value = 10
		}
		add_character_modifier = {
			modifier = tgp_japan_poetic_to_the_powerful_modifier
			years = { 10 20 }
		}
		stress_impact = {
			compassionate = minor_stress_impact_loss
			gregarious = minor_stress_impact_loss
			lifestyle_poet = minor_stress_impact_loss
		}

		ai_chance = {
			base = 150
			ai_value_modifier = {
				ai_compassion = 1
			}
			opinion_modifier = {
				opinion_target = scope:emperor
				multiplier = 2
			}
		}
	}

	# Option D) Send some men to mug him
	option = {
		name = tgp_japan_yearly_events.1150.d
		flavor = tgp_japan_yearly_events.1150.d.flavor

		save_scope_value_as = { name = ruler_choice value = flag:bandits }

		show_as_tooltip = {
			duel = {
				skill = martial
				value = decent_skill_rating
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 3.5
						min = 20
						max = 90
					}
					desc = japan_yearly_1151_bandits_win
					scope:local_ruler = {
						send_interface_toast = {
							title = japan_yearly_1151_success
							left_icon = scope:emperor
							right_icon = scope:local_ruler
							scope:emperor = {
								pay_short_term_gold = {
									GOLD = medium_gold_value
									TARGET = scope:local_ruler
								}
							}
							add_martial_lifestyle_xp = medium_lifestyle_xp
						}
					}
				}
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -3.5
						min = 20
						max = 90
					}
					desc = japan_yearly_1151_bandits_lose
					scope:local_ruler = {
						send_interface_toast = {
							title = japan_yearly_1151_fails
							left_icon = scope:emperor
							right_icon = scope:local_ruler
							add_prestige = medium_prestige_loss
						}
					}
				}
			}
			#Emperor will maybe become rival
			scope:emperor = {
				#If possible it progresses rivalry
				if = {
					limit = {
						can_set_relation_rival_trigger = { CHARACTER = scope:local_ruler }
					}
					progress_towards_rival_effect = {
						REASON = rival_robbed_me
						CHARACTER = scope:local_ruler
						OPINION = default_rival_opinion
					}
				}
				#otherwise it makes them like you less
				else = {
					add_opinion = {
						target = scope:local_ruler
						modifier = humbled_opinion
						opinion = -40
					}
				}
			}
			#This will cause strife with his house
			scope:local_ruler.house = {
				change_house_relation_effect = {
					HOUSE = scope:emperor.house
					VALUE = house_relation_damage_major_value
					REASON = conflict
					CHAR = scope:local_ruler
					TARGET_CHAR = scope:emperor
					TITLE = scope:dummy_gender
				}
			}
		}

		stress_impact = {
			compassionate = minor_stress_impact_gain
			callous = minor_stress_impact_loss
			greedy = minor_stress_impact_loss
		}

		ai_chance = {
			base = 50
			ai_value_modifier = {
				ai_honor = -1
			}
			opinion_modifier = {
				opinion_target = scope:emperor
				multiplier = -2
			}
		}
	}

	after = {
		scope:emperor = {
			if = {
				limit = {
					scope:ruler_choice ?= {
						this != flag:slander
					}
				}
				trigger_event = {
					id = tgp_japan_yearly_events.1151
					days = 1
				}
			}
		}
	}
}

# Response for the Emperor
tgp_japan_yearly_events.1151 = {
	type = character_event
	theme = travel
	title = tgp_japan_yearly_events.1151.t
	desc = {
		desc = tgp_japan_yearly_events.1151.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:ruler_choice = flag:bandits
				}
				desc = tgp_japan_yearly_events.1151.desc_bandits
			}
			triggered_desc = {
				trigger = {
					scope:ruler_choice = flag:hospitality
				}
				desc = tgp_japan_yearly_events.1151.desc_hospitality
			}
			triggered_desc = {
				trigger = {
					scope:ruler_choice = flag:poem
				}
				desc = tgp_japan_yearly_events.1151.desc_poem
			}
			triggered_desc = {
				trigger = {
					scope:ruler_choice = flag:gift
				}
				desc = tgp_japan_yearly_events.1151.desc_gift
			}
		}
	}
	left_portrait = {
		character = root
		triggered_animation = {
			trigger = {
				scope:ruler_choice = flag:bandits
			}
			animation = anger
		}
		animation = thinking
	}

	right_portrait = {
		character = scope:messenger
		triggered_animation = {
			trigger = {
				scope:ruler_choice = flag:bandits
			}
			animation = aggressive_sword
		}
		animation = storyteller
	}

	lower_center_portrait = scope:local_ruler

	immediate = {
		scope:local_ruler = {
			random_courtier = {
				limit = {
					is_available_adult = yes
				}
				save_scope_as = messenger
			}
		}
		if = {
			limit = {
				scope:ruler_choice = flag:gift
			}
			show_as_tooltip = {
				scope:local_ruler = {
					pay_short_term_gold = {
						target = scope:emperor
						gold = minor_gold_value
					}
				}
			}
		}
	}

	#Option A) Gesture is impressive!
	option = {
		name = tgp_japan_yearly_events.1151.a
		trigger = {
			OR = {
				scope:ruler_choice ?= flag:poem
				scope:ruler_choice ?= flag:hospitality
				scope:ruler_choice ?= flag:gift
			}
		}

		add_prestige = minor_prestige_gain
		add_stress = minor_stress_loss
		#If you enjoy hospitality it takes time
		if = {
			limit = {
				scope:ruler_choice ?= flag:hospitality
			}
			current_travel_plan = {
				delay_travel_plan = { days = 14 }
			}
		}

		scope:local_ruler = {
			send_interface_toast = {
				type = event_toast_effect_good
				title = tgp_japan_yearly_events.1151.tt_good.success
				left_icon = scope:local_ruler
				right_icon = scope:emperor
				add_prestige = medium_prestige_gain
				if = {
					limit = {
						OR = {
							house.house_head = this
							prestige_level >= 2
						}
						house != scope:emperor.house
					}
					house = {
						increase_house_relation_level_effect = {
							HOUSE = scope:emperor.house
							REASON = gift
						}
					}
				}

				else = {
					progress_towards_friend_effect = {
						REASON = friend_nice_gesture
						CHARACTER = scope:emperor
						OPINION = 0
					}
				}
			}
		}
		stress_impact = {
			arrogant = minor_stress_impact_gain
			callous = minor_stress_impact_gain
			fickle = minor_stress_impact_gain
			generous = minor_stress_impact_loss
			humble = minor_stress_impact_loss
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_energy = 1
			}
			modifier = {
				factor = 0
				has_trait = arrogant
				has_trait = callous
				has_trait = fickle
			}
		}
	}

	#Option B) Poem / Gesture is not that good
	option = {
		name = tgp_japan_yearly_events.1151.b
		trigger = {
			OR = {
				scope:ruler_choice ?= flag:poem
				scope:ruler_choice ?= flag:hospitality
				scope:ruler_choice ?= flag:gift
			}
		}
		add_prestige = miniscule_prestige_gain
		scope:local_ruler = {
			send_interface_toast = {
				type = event_toast_effect_neutral
				title = tgp_japan_yearly_events.1151.tt_good.failure
				left_icon = scope:local_ruler
				right_icon = scope:emperor
				add_prestige = miniscule_prestige_gain
			}
		}
		stress_impact = {
			arrogant = minor_stress_impact_loss
			callous = minor_stress_impact_loss
			fickle = minor_stress_impact_loss
			generous = minor_stress_impact_gain
			humble = minor_stress_impact_gain
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_energy = 1
			}
			modifier = {
				factor = 0
				has_trait = generous
				has_trait = humble
			}
		}
	}

	#Option C) Fight off the bandits / don't fall for the intimidation
	option = {
		name = tgp_japan_yearly_events.1151.c_bandits
		trigger = {
			scope:ruler_choice = flag:bandits
		}
		duel = {
			skill = martial
			value = decent_skill_rating
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = 20
					max = 90
				}
				desc = japan_yearly_1151_bandits_win
				scope:local_ruler = {
					send_interface_toast = {
						title = japan_yearly_1151_success
						left_icon = scope:emperor
						right_icon = scope:local_ruler
						scope:emperor = {
							pay_short_term_gold = {
								GOLD = medium_gold_value
								TARGET = scope:local_ruler
							}
						}
						add_martial_lifestyle_xp = medium_lifestyle_xp
					}
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = 20
					max = 90
				}
				desc = japan_yearly_1151_bandits_lose
				scope:local_ruler = {
					send_interface_toast = {
						title = japan_yearly_1151_fails
						left_icon = scope:emperor
						right_icon = scope:local_ruler
						add_prestige = medium_prestige_loss
					}
				}
			}
		}
		stress_impact = {
			brave = minor_stress_impact_loss
			vengeful = minor_stress_impact_loss
			craven = minor_stress_impact_gain
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_energy = 1
			}
			opinion_modifier = {
				opinion_target = scope:local_ruler
				multiplier = -2
			}
			modifier = {
				factor = 0
				has_trait = craven
			}
		}
	}

	#Option C) Just give the bandits some gold / walk away to avoid conflict
	option = {
		name = tgp_japan_yearly_events.1151.d_bandits

		trigger = {
			scope:ruler_choice = flag:bandits
		}
		add_prestige = minor_prestige_loss
		if = {
			limit = {
				scope:ruler_choice = flag:bandits
			}
			scope:local_ruler = {
				send_interface_toast = {
					type = event_toast_effect_good
					title = japan_yearly_1151_success
					left_icon = scope:local_ruler
					right_icon = scope:emperor
					scope:emperor = {
						pay_short_term_gold = {
							target = scope:local_ruler
							gold = minor_gold_value
						}
					}
				}
			}
		}
		else = {
			scope:local_ruler = {
				send_interface_toast = {
					type = event_toast_effect_good
					title = japan_yearly_1151_success
					left_icon = scope:local_ruler
					right_icon = scope:emperor
					add_dread = miniscule_dread_gain
				}
			}
			current_travel_plan = {
				delay_travel_plan = { days = 14 }
			}
		}

		stress_impact = {
			brave = minor_stress_impact_gain
			calm = minor_stress_impact_loss
			craven = minor_stress_impact_loss
			lazy = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_energy = -1
			}
			modifier = {
				factor = 2
				has_trait = craven
			}
		}
	}
	after = {
		if = {
			limit = {
				scope:ruler_choice = flag:bandits
			}
			#Emperor will maybe become rival
			scope:emperor = {
				#If possible it progresses rivalry
				if = {
					limit = {
						can_set_relation_rival_trigger = { CHARACTER = scope:local_ruler }
					}
					progress_towards_rival_effect = {
						REASON = rival_robbed_me
						CHARACTER = scope:local_ruler
						OPINION = default_rival_opinion
					}
				}
				#otherwise it makes them like you less
				else = {
					add_opinion = {
						target = scope:local_ruler
						modifier = humbled_opinion
						opinion = -40
					}
				}
			}
			if = {
				limit = {
					OR = {
						scope:ruler_choice = flag:bandits
						scope:ruler_choice = flag:slander
					}
				}
				#This will cause strife with his house
				scope:local_ruler.house = {
					change_house_relation_effect = {
						HOUSE = scope:emperor.house
						VALUE = house_relation_damage_major_value
						REASON = conflict
						CHAR = scope:local_ruler
						TARGET_CHAR = scope:emperor
						TITLE = scope:dummy_gender
					}
				}
			}
		}
	}
}

scripted_trigger is_suitable_spouse_or_concubine_tgp_japan_1160 = {
	top_liege = house.house_head
	liege = {
		is_ai = yes # sanity check so as to not yeet a player's courtier
	}
	is_available_ai_adult = yes
	is_house_head = no # this would be weird otherwise
	is_ruler = no # this would be weirder otherwise
	OR = {
		can_marry_character_trigger = { CHARACTER = root }
		can_become_concubine_of_character_trigger = { CHARACTER = root }
	}
	root = {
		is_attracted_to_gender_of = prev
	}
}

# You are offered a spouse/concubine to mend house relations
tgp_japan_yearly_events.1160 = {
	type = character_event
	title = {
		first_valid = {
			triggered_desc = {
				trigger = {
					OR = {
						has_trait = cannibal
						any_secret = { type = secret_cannibal }
					}
				}
				desc = tgp_japan_yearly_events.cannibal.1160.t
			}
			desc = tgp_japan_yearly_events.1160.t
		}
	}

	desc = tgp_japan_yearly_events.1160.desc
	theme = court
    cooldown = { years = 15 }

	left_portrait = {
		character = root
		animation = personality_honorable
		camera = camera_event_center_pointing_forward
	}

	right_portrait = {
		character = scope:new_concubine
		animation = flirtation
	}

	lower_center_portrait = scope:feuding_house.house_head

	trigger = {
		has_tgp_dlc_trigger = yes
		is_available_adult = yes
		is_at_war = no
		exists = house
		house.house_head = root
		house = {
			any_house_relation = {
				OR = {
					has_house_relation_level = feud
					has_house_relation_level = rivalry
					has_house_relation_level = quarrel
				}
				any_relation_house = {
					this != root.house
					house_head = {
						is_available_ai_adult = yes
						is_at_war = no
						opinion = {
							target = root
							value >= 0 # there should be at least some reason they want to improve relations
						}
					}
					any_house_member = {
						is_suitable_spouse_or_concubine_tgp_japan_1160 = yes
					}
				}
			}
		}
		OR = {
			allowed_more_spouses = yes
			allowed_more_concubines = yes
		}
		#LotR
		is_nubile = yes
		is_elf = no
		cannot_be_killed = no
	}

	immediate = {
		house = {
			random_house_relation = {
				limit = {
					OR = {
						has_house_relation_level = feud
						has_house_relation_level = rivalry
						has_house_relation_level = quarrel
					}
					any_relation_house = {
						this != root.house
						house_head = {
							is_available_ai_adult = yes
							is_at_war = no
							opinion = {
								target = root
								value >= 0 # there should be at least some reason they want to improve relations
							}
						}
						any_house_member = {
							is_suitable_spouse_or_concubine_tgp_japan_1160 = yes
						}
					}
				}
				random_relation_house = {
					limit = {
						this != root.house
						house_head = {
							is_available_ai_adult = yes
							is_at_war = no
							opinion = {
								target = root
								value >= 0
							}
						}
						any_house_member = {
							is_suitable_spouse_or_concubine_tgp_japan_1160 = yes
						}
					}
					save_scope_as = feuding_house
				}
			}
		}
		scope:feuding_house = {
			random_house_member = {
				limit = {
					is_suitable_spouse_or_concubine_tgp_japan_1160 = yes
				}
				save_scope_as = new_concubine
			}
		}
	}

	# I'll take her
	option = {
		name = tgp_japan_yearly_events.1160.a

		if = {
			limit = {
				allowed_more_spouses = yes
			}
			marry = scope:new_concubine
		}
		else_if = {
			limit = {
				allowed_more_concubines = yes
			}
			make_concubine = scope:new_concubine
		}

		scope:feuding_house = {
			change_house_relation_effect = {
				HOUSE = root.house
				VALUE = house_relation_improve_medium_value
				REASON = gift
				CHAR = scope:feuding_house.house_head
				TARGET_CHAR = root
				TITLE = scope:dummy_gender
			}
		}

		stress_impact = {
			paranoid = minor_stress_impact_gain
			vengeful = minor_stress_impact_gain
			calm = minor_stress_impact_loss
			lustful = minor_stress_impact_loss
			forgiving = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_rationality = 1
			}
			modifier = {
				factor = 2
				OR = {
					has_trait = forgiving
					has_trait = lustful
				}
			}
			modifier = {
				factor = 0
				has_trait = paranoid
			}
		}
	}

	# send her back
	option = {
		name = tgp_japan_yearly_events.1160.b

		add_prestige = minor_prestige_gain

		scope:feuding_house.house_head = {
			add_opinion = {
				modifier = insulted_opinion
				target = root
				opinion = -15
			}
		}
		ai_chance = {
			base = 100
		}
	}

	# This is a spy, kill her!
	option = {
		name = tgp_japan_yearly_events.1160.c
		trigger = {
			has_trait_malicious_trigger = yes
			NOR = {
				has_trait = cannibal
				any_secret = { type = secret_cannibal }
			}
		}
		scope:new_concubine = {
			death = {
				death_reason = death_execution
				killer = root
			}
		}

		house ?= {
			change_house_relation_effect = {
				HOUSE = scope:feuding_house
				VALUE = house_relation_damage_medium_value
				REASON = killed
				CHAR = root
				TARGET_CHAR = scope:new_concubine
				TITLE = scope:dummy_gender
			}
		}

		scope:feuding_house.house_head = {
			add_opinion = {
				modifier = insulted_opinion
				target = root
				opinion = -30
			}
		}

		stress_impact = {
			paranoid = minor_stress_impact_loss
			callous = medium_stress_impact_loss
			vengeful = major_stress_impact_loss
			just = minor_stress_impact_gain
			calm = medium_stress_impact_gain
			compassionate = major_stress_impact_gain
		}

		ai_chance = {
			base = 50
			ai_value_modifier = {
				ai_rationality = -1
				ai_compassion = -1
			}
		}
	}

	# This is a spy, eat her! (Cannibal option)
	option = {
		name = tgp_japan_yearly_events.1160.d
		trigger = {
			OR = {
				has_trait = cannibal
				any_secret = { type = secret_cannibal }
			}
		}

		add_character_modifier = {
			modifier = feast_good_food_modifier
			years = 10
		}

		unknown_cannibal_murder_effect = {
			VICTIM = scope:new_concubine
			MURDERER = root
		}

		stress_impact = {
			base = major_stress_impact_loss
			paranoid = minor_stress_impact_loss
			callous = medium_stress_impact_loss
			vengeful = major_stress_impact_loss
			just = minor_stress_impact_gain
			calm = medium_stress_impact_gain
			compassionate = medium_stress_impact_gain
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_rationality = -1
			}
		}
	}
}

# The poetry you're reading is in a language you're unfamiliar with
tgp_japan_yearly_events.1170 = {
	type = character_event
	title = tgp_japan_yearly_events.1170.t
	desc = tgp_japan_yearly_events.1170.desc
	theme = diplomacy
    cooldown = { years = 15 }
	override_background = {
		reference = study
	}

	left_portrait = {
		character = root
		animation = reading
	}

	lower_center_portrait = scope:foreign_ruler

	trigger = {
		has_tgp_dlc_trigger = yes
		is_available_adult = yes
		# location = {
		# 	geographical_region = world_asia_japan
		# }
		# knows_language = language_japonic
		#Find a country lead by a Chinese or Korean speaker and confirm you don't speak the language in question
		any_neighboring_and_across_water_top_liege_realm_owner = {
			OR = {
				# AND = {
				# 	knows_language = language_chinese
				# 	root = {
				# 		NOT = {
				# 			knows_language = language_chinese
				# 		}
				# 	}
				# }
				# AND = {
				# 	knows_language = language_korean
				# 	root = {
				# 		NOT = {
				# 			knows_language = language_korean
				# 		}
				# 	}
				# }
				#LotR
				AND = {
					knows_language = language_sindarin
					root = {
						NOT = {
							knows_language = language_sindarin
						}
					}
				}
				AND = {
					knows_language = language_quenya
					root = {
						NOT = {
							knows_language = language_quenya
						}
					}
				}
			}
		}
	}

	immediate = {
	#Find a country lead by a Chinese or Korean speaker and confirm you don't speak the language in question
		random_neighboring_and_across_water_top_liege_realm_owner = {
			limit = {
				trigger_if = {
					limit = {
						root = {
							NOT = {
								# knows_language = language_chinese
								knows_language = language_sindarin #LotR
							}
						}
					}
					# knows_language = language_chinese
					knows_language = language_sindarin #LotR
				}
				trigger_else = {
					# knows_language = language_korean
					knows_language = language_quenya #LotR
				}
			}
			save_scope_as = foreign_ruler
		}
	}

	weight_multiplier = {
		base = 10
        modifier = {
			add = 5
			has_trait = lifestyle_poet
		}
		modifier = {
			add = 5
			has_trait = lifestyle_mystic
		}
		modifier = {
			add = 10
			has_focus_learning = yes
		}
	}


	# Option A) Learn the language
	option = {
		name = tgp_japan_yearly_events.1170.a
		trigger = {
			can_start_scheme = {
				type = learn_language
				target_character = scope:foreign_ruler
			}
		}

		start_scheme = {
			target_character = scope:foreign_ruler
			type = learn_language
		}
		custom_tooltip = diplomacy_family.2250.b.tt

		hidden_effect = {
			random_scheme = {
				type = learn_language
				limit = {
					scheme_target_character = scope:foreign_ruler
				}
				add_scheme_modifier = {
					type = extra_success_chance_modifier
				}
			}
		}

		stress_impact = {
			calm = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_rationality = 1
			}
		}
	}

	# Option B) Tell this guy his poets are bad
	option = {
		name = tgp_japan_yearly_events.1170.b

		add_prestige = minor_prestige_gain

		scope:foreign_ruler.culture = {
			change_cultural_acceptance = {
				target = root.culture
				value = minor_cultural_acceptance_loss
				desc = cultural_acceptance_loss_event
			}
		}

		stress_impact = {
			impatient = minor_stress_impact_loss
			irritable = minor_stress_impact_loss
			arrogant = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_boldness = 0.5
			}
			opinion_modifier = {
				opinion_target = scope:foreign_ruler
				multiplier = -2
			}
		}
	}

	# Option C) This was a pleasant diversion!
	option = {
		name = tgp_japan_yearly_events.1170.c

		if = {
			limit = {
				has_trait = lifestyle_mystic
			}
			add_trait_xp = {
				trait = lifestyle_mystic
				value = 5
			}
		}

		add_learning_lifestyle_xp = minor_lifestyle_xp

		stress_impact = {
			lifestyle_poet = minor_stress_impact_loss
			calm = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_rationality = -1
			}
		}
	}
}

# You've been gifted a Bonsai tree for your garden
tgp_japan_yearly_events.1180 = {
	type = character_event
	title = tgp_japan_yearly_events.1180.t
	desc = tgp_japan_yearly_events.1180.desc
	theme = court
    cooldown = { years = 15 }
	override_background = {
		reference = garden
	}

	left_portrait = {
		character = root
		animation = schadenfreude
	}

	right_portrait = {
		character = scope:gardener
		animation = schadenfreude
	}

	trigger = {
		has_tgp_dlc_trigger = yes
		is_available_adult = yes
		is_valid_for_japan_events_trigger = yes
		any_courtier = {
			has_court_position = court_gardener_court_position
		}
	}

	immediate =	{
		#Find your gardener
		random_courtier = {
			limit = {
				has_court_position = court_gardener_court_position
			}
			save_scope_as = gardener
		}
	}

	# This tree represents stability!
	option = {
		name = tgp_japan_yearly_events.1180.a

		add_stress = minor_stress_loss

		add_character_modifier = {
			modifier = tgp_stability_tree_modifier
			years = 10
		}

		ai_chance = {
			base = 100
		}
	}

	# It has spiritual value
	option = {
		name = tgp_japan_yearly_events.1180.b

		add_piety = minor_piety_gain
		pay_short_term_gold = {
			target = scope:gardener
			gold = miniscule_gold_value
		}
		add_character_flag = {
			flag = had_bonsai_tree_event
			years = 10
		}

		ai_chance = {
			base = 100
			ai_value_modifier = { ai_zeal = 1 }
		}
	}

	# I want to shape it myself
	option = {
		name = tgp_japan_yearly_events.1180.c

		if = {
			limit = {
				has_trait = lifestyle_gardener
			}
			add_trait_xp = {
				trait = lifestyle_gardener
				value = 2
			}
		}
		else = { add_trait = lifestyle_gardener }

		ai_chance = {
			base = 100
		}
	}
}

# You have a bad trait and you're making some decisions at night
tgp_japan_yearly_events.1190 = {
	type = character_event
	title = tgp_japan_yearly_events.1190.t
	desc = {
		random_valid = {
			triggered_desc = {
				trigger = {
					OR = {
						has_trait = irritable
						has_trait = impatient
					}
				}
				desc = tgp_japan_yearly_events.1190.desc_annoyed
			}
			triggered_desc = {
				trigger = {
					has_trait = drunkard
				}
				desc = tgp_japan_yearly_events.1020.desc_drunk
			}
			triggered_desc = {
				trigger = {
					learning <= low_skill_rating
				}
				desc = tgp_japan_yearly_events.1020.desc_dumb
			}
		}
		desc = tgp_japan_yearly_events.1190.desc
	}
	theme = court
    cooldown = { years = 15 }
	override_background = {
		reference = bedchamber
	}

	left_portrait = {
		character = root
		animation = wedding_drunk
	}

	trigger = {
		has_tgp_dlc_trigger = yes
		is_landed = yes
		is_available_adult = yes
		OR = {
			has_trait = irritable
			has_trait = impatient
			has_trait = drunkard
			learning <= low_skill_rating
		}
		NOR = {
			has_trait = temperate
			has_trait = diligent
			learning >= high_skill_rating
		}
		any_held_title = {
			title_tier = county
			this != root.capital_county
		}
	}

	weight_multiplier = {
		base = 10
		modifier = {
			add = 5
			stress_level >= 1
		}
		modifier = {
			add = 10
			stress_level >= 2
		}
		modifier = {
			add = 15
			stress_level >= 3
		}
	}

	# Ok i gotta stop this for real
	option = {
		name = tgp_japan_yearly_events.1190.a

		stress_impact = {
			base = major_stress_impact_gain
			lazy = minor_stress_impact_gain
		}

		random = {
			chance = 50
			add_prestige = minor_prestige_gain
			if = {
				limit = { has_trait = irritable }
				remove_trait = irritable
			}
			else_if = {
				limit = { has_trait = impatient }
				remove_trait = impatient
			}
			else_if = {
				limit = { has_trait = drunkard }
				remove_trait = drunkard
			}
			else_if = {
				limit = { learning <= low_skill_rating }
				add_learning_skill = 5
			}
		}

		ai_chance = {
			base = 100
			ai_value_modifier = { ai_rationality = 1 }
		}
	}

	# I should probably offload my responsibilities
	option = {
		name = tgp_japan_yearly_events.1190.b

		stress_impact = {
			base = medium_stress_impact_loss
			arrogant = minor_stress_impact_gain
			lazy = minor_stress_impact_loss
		}

		random_list = {
			1 = {
				trigger = { exists = cp:councillor_chancellor }
				cp:councillor_chancellor = { add_diplomacy_skill = 2 }
			}
			1 = {
				trigger = { exists = cp:councillor_court_chaplain }
				cp:councillor_court_chaplain = { add_learning_skill = 2 }
			}
			1 = {
				trigger = { exists = cp:councillor_marshal }
				cp:councillor_marshal = { add_martial_skill = 2 }
			}
			1 = {
				trigger = { exists = cp:councillor_steward }
				cp:councillor_steward = { add_stewardship_skill = 2 }
			}
			1 = {
				trigger = { exists = cp:councillor_spymaster }
				cp:councillor_spymaster = { add_intrigue_skill = 2 }
			}
		}

		add_prestige = minor_prestige_loss
		add_dread = medium_dread_loss

		ai_chance = {
			base = 100
			ai_value_modifier = { ai_boldness = 1 }
		}
	}

	# I don't care about my vices
	option = {
		name = tgp_japan_yearly_events.1190.c

		stress_impact = {
			base = major_stress_impact_loss
			lazy = minor_stress_impact_loss
		}

		random = {
			chance = 50
			custom_tooltip = tgp_japan_yearly_events.1190.c_tt
			hidden_effect = {
				random_held_title = {
					title_tier = county
					limit = { this != root.capital_county }
					change_county_control = {
						value = medium_county_control_loss
					}
				}
			}
		}

		ai_chance = {
			base = 100
			ai_value_modifier = { ai_honor = 1 }
		}
	}
}

# A courtier has witnessed a miracle
tgp_japan_yearly_events.1220 = {
	type = character_event
	title = tgp_japan_yearly_events.1220.t
	desc = {
		desc = tgp_japan_yearly_events.1220.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:miracle = flag:wealth
				}
				desc = tgp_japan_yearly_events.1220.desc_wealth
			}
			triggered_desc = {
				trigger = {
					scope:miracle = flag:health
				}
				desc = tgp_japan_yearly_events.1220.desc_health
			}
			triggered_desc = {
				trigger = {
					scope:miracle = flag:knowledge
				}
				desc = tgp_japan_yearly_events.1220.desc_knowledge
			}
		}
	}
	theme = faith
    cooldown = { years = 10 }
	override_background = {
		trigger = { scope:miracle = flag:knowledge }
		reference = study
	}
	override_background = {
		trigger = { scope:miracle = flag:health }
		reference = bedchamber
	}

	left_portrait = {
		character = root
		animation = interested
	}

	right_portrait = {
		character = scope:miracle_recipient
		animation = admiration
	}

	lower_center_portrait = scope:monk

	trigger = {
		has_tgp_dlc_trigger = yes
		is_available_adult = yes
		# faith = { religion = religion:buddhism_religion }
		# location = {
		# 	faith = { religion = religion:buddhism_religion }
		# }
		always = no #LotR - TODO
		learning_lifestyle_unlockable_perks >= 1
		any_courtier_or_guest = {
			is_of_major_or_minor_interest_trigger = { CHARACTER = root }
			is_available_adult = yes
			NOT = {
				has_trait = cynical
			}
		}
	}

	immediate = {
		random_list = { # Fortified Health
			10 = {
				save_scope_value_as = { name = miracle value = flag:health }
				random_courtier_or_guest = {
					limit = {
						has_any_illness = yes
						is_available_adult = yes
						NOT = {
							has_trait = cynical
						}
						is_of_major_or_minor_interest_trigger = { CHARACTER = root }
					}
					save_scope_as = miracle_recipient
					random_character_trait = {
						limit = {
							has_trait_flag = illness
						}
						save_scope_as = target_trait
					}
					remove_trait = scope:target_trait
				}
			}
			10 = { # Miracle of Wealth
				save_scope_value_as = { name = miracle value = flag:wealth }
				random_courtier_or_guest = {
					limit = {
						is_of_major_or_minor_interest_trigger = { CHARACTER = root }
						is_available_adult = yes
						NOT = {
							has_trait = cynical
						}
					}

					weight = {
						base = 10
						modifier = {
							add = 10
							short_term_gold > minor_gold_value
						}
					}
					save_scope_as = miracle_recipient
					add_short_term_gold = massive_gold_value
				}
			}
			10 = { # Miracle of Knowledge
				save_scope_value_as = { name = miracle value = flag:knowledge }
				random_courtier_or_guest = {
					limit = {
						is_of_major_or_minor_interest_trigger = { CHARACTER = root }
						is_available_adult = yes
						NOT = {
							has_trait = cynical
						}
					}
					weight = {
						base = 10
						modifier = {
							add = 10
							learning > low_skill_rating
						}
					}
					save_scope_as = miracle_recipient
					add_learning_skill = 8
				}
			}
		}
		create_character = {
			template = monk_character_template
			location = root.location
			save_scope_as = monk
		}
	}

	weight_multiplier = {
		base = 10
		modifier = {
			add = 10
			any_courtier_or_guest = { has_any_illness = yes }
		}
		modifier = {
			add = 10
			short_term_gold > minor_gold_value
		}
		modifier = {
			add = 25
			has_focus_learning = yes
		}
	}

	# Option A) Seek out the monk
	option = {
		name = tgp_japan_yearly_events.1220.a

		add_piety = minor_piety_loss

		if = {
			limit = {
				scope:miracle = flag:wealth
			}
			custom_tooltip = tgp_japan_yearly_events.1220.tt_wealth
		}


		switch = {
			trigger = scope:miracle
			flag:wealth = {
				send_interface_toast = {
					type = event_toast_effect_good
					title = tgp_japan_yearly_events.1220.tt
					left_icon = root
					add_short_term_gold = minor_gold_value
				}
			}
			flag:knowledge = {
				send_interface_toast = {
					type = event_toast_effect_good
					title = tgp_japan_yearly_events.1220.tt
					left_icon = root
					add_learning_skill = 1
				}
			}
			flag:health = {
				if = {
					limit = {
						has_any_illness = yes
					}
					random_character_trait = {
						limit = {
							has_trait_flag = illness
						}
						save_scope_as = target_trait
					}
					remove_trait = scope:target_trait
				}
				else = {
					add_character_modifier = {
						modifier = tgp_health_resistance_modifier
						years = 3
					}
				}
			}
		}
		ai_chance = {
			base = 100
			ai_value_modifier = { ai_zeal = 1 }
		}
	}

	# Option B) You seek out a logical explanation
	option = {
		name = tgp_japan_yearly_events.1220.b

		if = {
			limit = {
				has_trait = lifestyle_mystic
			}
			add_trait_xp = {
				trait = lifestyle_mystic
				value = 5
			}
		}
		else = {
			random = {
				chance = 50
				add_trait = lifestyle_mystic
			}
		}

		stress_impact = {
			cynical = medium_stress_impact_loss
			zealous = minor_stress_impact_gain
		}

		ai_chance = {
			base = 100
			ai_value_modifier = { ai_zeal = -1 }
		}
	}

	# Option C) I must learn his ways
	option = {
		name = tgp_japan_yearly_events.1220.c

		stress_impact = {
			cynical = minor_stress_impact_loss
			zealous = minor_stress_impact_gain
		}

		duel = {
			skill = learning
			value = decent_skill_rating
			desc = tgp_japan_yearly_events.1220.c.tt
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
				}
				desc = tgp_japan_yearly_events.1220.tt_win
				send_interface_toast = {
					type = event_toast_effect_good
					title = tgp_japan_yearly_events.1220.tt_win
					left_icon = root
					right_icon = scope:monk
					add_learning_lifestyle_perk_points = 1
				}
			}
			59 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
				}
				desc = tgp_japan_yearly_events.1220.tt_lose
				send_interface_toast = {
					type = event_toast_effect_bad
					title = tgp_japan_yearly_events.1220.tt_lose
					left_icon = root
					right_icon = scope:monk
					stress_impact = {
						base = minor_stress_impact_gain
					}
					add_learning_lifestyle_xp = 150
				}
			}
		}

		ai_chance = {
			base = 50
			ai_value_modifier = {
				ai_zeal = -1
				ai_rationality = 1
			}
			modifier = {
				add = -5
				stress_level >= 1
			}
			modifier = {
				add = -10
				stress_level >= 2
			}
			modifier = {
				add = -15
				stress_level >= 3
			}
		}
	}

	after = {
		scope:monk = {
			silent_disappearance_ai_effect = yes
		}
	}
}

# Fear of a low durability artifact coming to life (Yokai)
# Chance to repair artifact for low price
tgp_japan_yearly_events.1230 = {
	type = character_event
	title = tgp_japan_yearly_events.1230.t
	desc = tgp_japan_yearly_events.1230.desc
	theme = court
    cooldown = { years = 10 }

	left_portrait = {
		character = root
		animation = fear
	}

	artifact = {
		target = scope:cursed_artifact
		position = lower_right_portrait
	}

	trigger = {
		has_tgp_dlc_trigger = yes
		is_available_adult = yes
		is_valid_for_japan_events_trigger = yes
		any_character_artifact = {
			artifact_durability <= 20
		}
	}

	immediate = {
		random_character_artifact = {
			limit = {
				artifact_durability <= 20
			}
			save_scope_as = cursed_artifact
		}
	}

	# Mend it, immediately.
	option = {
		name = tgp_japan_yearly_events.1230.a
		trigger = {
			short_term_gold >= minor_gold_value
		}
		show_as_unavailable = { always = yes }

		stress_impact = {
			paranoid = minor_stress_impact_gain
			zealous = minor_stress_impact_loss
		}

		remove_short_term_gold = minor_gold_value

		scope:cursed_artifact = {
			add_durability = {
				value = {
					add = artifact_max_durability
					subtract = artifact_durability
				}
			}
		}

		ai_chance = {
			base = 100
			ai_value_modifier = { ai_zeal = 1 }
			modifier = {
				has_trait = paranoid
				factor = 0
			}
		}
	}

	# Just burn it honestly
	option = {
		name = tgp_japan_yearly_events.1230.b

		add_dread = minor_dread_loss
		add_prestige = medium_prestige_loss

		destroy_artifact = scope:cursed_artifact

		stress_impact = {
			base = miniscule_stress_impact_loss
			paranoid = minor_stress_impact_loss
			lifestyle_mystic = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			modifier = {
				has_trait = paranoid
				factor = 2
			}
		}
	}

	# Ok?
	option = {
		name = {
			text = {
				first_valid = {
					triggered_desc = {
						trigger = { has_trait = cynical }
						desc = tgp_japan_yearly_events.1230.c_cynical
					}
					desc = tgp_japan_yearly_events.1230.c
				}
			}
		}

		stress_impact = {
			base = minor_stress_impact_gain
			paranoid = medium_stress_impact_gain
			cynical = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = { ai_rationality = 1 }
			modifier = {
				has_trait = cynical
				factor = 2
			}
			modifier = {
				has_trait = paranoid
				factor = 0
			}
		}
	}
}

scripted_trigger is_valid_ruler_1220 = {
	NOT = { this = root }
	culture = {
		save_temporary_scope_as = culture_temp
		NOR = { # no languages that have vertical script
			# has_cultural_pillar = language_japonic
			# has_cultural_pillar = language_chinese
			# has_cultural_pillar = language_korean
			# has_cultural_pillar = language_mongolic
			# has_cultural_pillar = language_vietnamese
			# has_cultural_pillar = language_khitan
			is_dwarf = yes
			has_cultural_pillar = language_khuzdul
			root = { knows_language = language_khuzdul }
		}
	}
	in_diplomatic_range = root
	lotr_race_and_alignment_compatibility_trigger = { CHARACTER = root } #LotR
}

# 1240 - A traveler poet visits court and can't read from right to left
tgp_japan_yearly_events.1240 = {
	type = character_event
	title = tgp_japan_yearly_events.1240.t
	desc = tgp_japan_yearly_events.1240.desc
	theme = court
    cooldown = { years = 15 }

	left_portrait = {
		character = root
		animation = interested
	}

	right_portrait = {
		character = scope:traveler
		animation = page_flipping
	}

	trigger = {
		has_tgp_dlc_trigger = yes
		is_available_adult = yes
		is_dwarf = yes #LotR
		# OR = { #LotR
		# 	knows_language = language_japonic
		# 	knows_language = language_chinese
		# }
		any_independent_ruler = { is_valid_ruler_1220 = yes }
	}

	immediate = {
		# Get a random county that isn't of chinese/japanese/korean
		random_independent_ruler = {
			limit = { is_valid_ruler_1220 = yes }
			save_scope_as = ref_ruler
		}
		create_character = {
			template = travel_messenger
			culture = scope:ref_ruler.culture
			faith = scope:ref_ruler.faith
			location = root.location
			save_scope_as = traveler
			after_creation = { add_trait = lifestyle_poet }
		}
	}

	# Teach him how to read properly please
	option = {
		name = tgp_japan_yearly_events.1240.a

		add_prestige = minor_prestige_gain

		scope:traveler = {
			learn_language_of_culture = root.culture
		}

		add_courtier = scope:traveler

		scope:traveler = {
			add_opinion = {
				modifier = grateful_opinion
				target = root
				opinion = 15
			}
		}

		stress_impact = {
			greedy = minor_stress_impact_gain
			lifestyle_poet = minor_stress_impact_loss
			compassionate = minor_stress_impact_loss
			gregarious = minor_stress_impact_loss
		}

		ai_chance = {
			base = 75
			ai_value_modifier = { ai_compassion = 1 ai_greed = -1 }
		}
	}

	# Make fun of him
	option = {
		name = tgp_japan_yearly_events.1240.b

		scope:traveler = {
			add_opinion = {
				modifier = disappointed_opinion
				target = root
				opinion = -15
			}
		}

		stress_impact = {
			base = medium_stress_impact_loss
			compassionate = minor_stress_impact_gain
			callous = minor_stress_impact_loss
		}

		ai_chance = {
			base = 100
			ai_value_modifier = { ai_compassion = -1 }
			modifier = {
				add = 15
				stress_level >= 1
			}
			modifier = {
				add = 25
				stress_level >= 2
			}
			modifier = {
				add = 50
				stress_level >= 3
			}
		}
	}

	# Try to learn his language
	option = {
		name = tgp_japan_yearly_events.1240.c
		trigger = {
			learning >= decent_skill_rating
		}
		show_as_unavailable = { always = yes }

		learn_language_of_culture = scope:traveler.culture

		scope:traveler.culture = {
			change_cultural_acceptance = {
				target = root.culture
				value = minor_cultural_acceptance_gain
				desc = cultural_acceptance_gain_event
			}
		}

		stress_impact = {
			base = medium_stress_impact_gain
			lifestyle_poet = minor_stress_impact_loss
			patient = minor_stress_impact_loss
		}

		add_character_modifier = {
			modifier = tgp_cultural_appreciation_modifier
			years = 10
		}

		ai_chance = {
			base = 150
			modifier = {
				add = -15
				stress_level >= 1
			}
			modifier = {
				add = -25
				stress_level >= 2
			}
			modifier = {
				add = -50
				stress_level >= 3
			}
		}
	}

	after = {
		scope:traveler = {
			silent_disappearance_ai_effect = yes
		}
	}
}

# 1250 - Being gifted a Kakejiku scroll (Wedding)
tgp_japan_yearly_events.1250 = {
	type = activity_event
	title = tgp_japan_yearly_events.1250.t
	desc = tgp_japan_yearly_events.1250.desc
	theme = wedding_ceremony_activity

	cooldown = { years = 15 }

	trigger = {
		is_valid_for_japan_events_trigger = yes
		#DLC check.
		has_ep2_dlc_trigger = yes
		has_tgp_dlc_trigger = yes
		location = involved_activity.activity_location
		OR = {
			involved_activity.special_guest:spouse_1 = root
			involved_activity.special_guest:spouse_2 = root
		}
	}

	left_portrait = {
		character = involved_activity.special_guest:spouse_1
		animation = love
	}

	right_portrait = {
		character = scope:scroll_gifter
		animation = obsequious_bow
	}

	center_portrait = {
		character = involved_activity.special_guest:spouse_2
		animation = interested
	}

	artifact = {
		target = scope:artifact_scroll
		position = lower_right_portrait
	}

	weight_multiplier = {
		base = 10
		modifier = {
			add = 20
			has_trait = lifestyle_poet
		}
	}

	immediate = {
		add_character_flag = busy_in_wgathering_event

		involved_activity = {
			random_attending_character = {
				weight = {
					base = 5
					modifier = {
						add = 25
						has_relation_friend = root
					}
					modifier = {
						add = 25
						is_close_family_of = root
					}
					modifier = {
						factor = 2
						OR = {
							has_trait = compassionate
							has_trait = generous
						}
					}
				}
				save_scope_as = scroll_gifter
				add_character_flag = busy_in_wgathering_event
			}
		}

		progress_towards_friend_effect = {
			CHARACTER = scope:scroll_gifter
			OPINION = 15
			REASON = friend_supportive_at_wedding
		}

		create_artifact = {
			name = artifact_kakejiku_scroll_name
			description = placeholder
			modifier = artifact_placeholder_modifier
			type = miscellaneous
			visuals = scroll
			wealth = 65
			quality = 65
			save_scope_as = artifact_scroll
			history = {
				type = created_before_history
			}
		}

		random_list = {
			50 = { # The Crane
				modifier = {
					add = 10
					OR = {
						has_trait = calm
						has_trait = content
						has_trait = chaste
					}
				}
				save_scope_value_as = { name = scroll_story value = flag:crane }
			}
			50 = { # The Friends
				modifier = {
					add = 25
					OR = {
						has_trait = gregarious
						has_trait = zealous
					}
				}
				save_scope_value_as = { name = scroll_story value = flag:friends }
			}
			50 = { # The Sword
				modifier = {
					add = 25
					OR = {
						has_trait = just
						has_trait = vengeful
					}
				}
				save_scope_value_as = { name = scroll_story value = flag:sword }
			}
		}

		scope:artifact_scroll = {
			add_artifact_history = {
				type = given
				actor = scope:scroll_gifter
				recipient = root
			}
			set_owner = root
			hidden_effect = { remove_artifact_modifier = artifact_placeholder_modifier }
			switch = {
				trigger = scope:scroll_story
				flag:sword = {
					set_artifact_description = artifact_kakejiku_scroll_sword_desc
					add_artifact_modifier = artifact_martial_2_modifier
					add_artifact_modifier = artifact_monthly_tyranny_2_modifier
					add_artifact_modifier = artifact_prowess_2_modifier
				}
				flag:friends = {
					set_artifact_description = artifact_kakejiku_scroll_friends_desc
					add_artifact_modifier = artifact_diplomacy_3_modifier
					add_artifact_modifier = artifact_monthly_prestige_add_3_modifier
					add_artifact_modifier = artifact_owned_personal_scheme_success_chance_add_1_modifier
				}
				flag:crane = {
					set_artifact_description = artifact_kakejiku_scroll_crane_desc
					add_artifact_modifier = artifact_learning_3_modifier
					add_artifact_modifier = artifact_health_gain_2_modifier
					add_artifact_modifier = artifact_stress_gain_4_modifier
				}
			}
		}
	}

	# Hang it in our chambers
	option = {
		name = tgp_japan_yearly_events.1250.a
		scope:artifact_scroll = { add_artifact_modifier = artifact_fertility_gain_2_modifier }
		ai_chance = {
			base = 100
			ai_value_modifier = { ai_rationality = 1 }
			modifier = {
				factor = 1.5
				OR = {
					has_trait = lustful
					has_trait = shy
				}
			}
		}
	}

	# Place it where everyone can see
	option = {
		name = tgp_japan_yearly_events.1250.b
		scope:artifact_scroll = { add_artifact_modifier = artifact_powerful_vassal_opinion_5_modifier }
		ai_chance = {
			base = 100
			ai_value_modifier = { ai_boldness = 1 }
			modifier = {
				factor = 1.5
				OR = {
					has_trait = gregarious
					has_trait = arrogant
				}
			}
		}
	}

	# Keep it safe in a box
	option = {
		name = tgp_japan_yearly_events.1250.c
		scope:artifact_scroll = { add_artifact_modifier = artifact_monthly_prestige_add_3_modifier }
		ai_chance = {
			base = 100
			ai_value_modifier = { ai_honor = 1 }
		}
	}
}

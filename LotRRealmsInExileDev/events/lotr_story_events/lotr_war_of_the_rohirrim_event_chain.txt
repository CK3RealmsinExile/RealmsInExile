namespace = war_of_the_rohirrim

## Introductory Event Chain
# Freca: A Call to Council
war_of_the_rohirrim.0100 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0100.t
	desc =  war_of_the_rohirrim.0100.desc
	theme = realm
	override_background = {
		reference = edoras
	}
	left_portrait = {
		character = root
		animation = scheme
	}
	right_portrait = {
		character = scope:helm
		animation = anger
	}
	lower_left_portrait = scope:wulf
	lower_right_portrait = scope:freawine

	immediate = {
		play_music_cue = lotr_cue_rohan
		character:lineofeorl9 = { save_scope_as = helm }
		character:lineoffreca3 = { save_scope_as = wulf }
		character:linegeanmar9 = { save_scope_as = targg }
		character:lineofeorl5 = { save_scope_as = freawine }
		hidden_effect = {
			create_character = {
				template = foreign_architect_template
				employer = root
				save_scope_as = caravan_master
			}
			if = {
				limit = { NOT = { employs_court_position = travel_leader_court_position } }
				appoint_court_position = {
					recipient = scope:caravan_master
					court_position = travel_leader_court_position
				}
			}
		}
	}

	option = {
		name =  war_of_the_rohirrim.0100.a
		set_variable = cannot_cancel_travel
		custom_tooltip = war_of_the_rohirrim.0100.a.effects
		add_prestige = 150
		stress_impact = {
			arrogant = minor_stress_impact_loss
			ambitious = minor_stress_impact_loss
		}
		custom_tooltip = war_of_the_rohirrim.0100.a.effects2
		save_scope_as = bold_approach
		set_variable = cannot_cancel_travel
		set_variable = no_return_event
		start_travel_plan = {
			destination = title:c_kingstead.title_province
			companion = scope:wulf
			companion = scope:targg
			on_arrival_event = war_of_the_rohirrim.0101
			return_trip = yes
			players_use_planner = no
			on_arrival_destinations = all_but_last
		}
		ai_chance = {
			base = 100
		}
	}

	option = {
		name =  war_of_the_rohirrim.0100.b
		set_variable = cannot_cancel_travel
		custom_tooltip = war_of_the_rohirrim.0100.b.effects
		add_prestige = -150
		stress_impact = {
			arrogant = medium_stress_impact_gain
		}
		custom_tooltip = war_of_the_rohirrim.0100.b.effects2
		save_scope_as = calm_approach
		set_variable = cannot_cancel_travel
		set_variable = no_return_event
		start_travel_plan = {
			destination = title:c_kingstead.title_province
			companion = scope:wulf
			on_arrival_event = war_of_the_rohirrim.0101
			return_trip = yes
			players_use_planner = no
			on_arrival_destinations = all_but_last
		}
		ai_chance = {
			base = 0
		}
	}

	option = {
		name =  war_of_the_rohirrim.0100.c
		# Trigger refusal event for Helm
		custom_tooltip = freca_helm_opt_out_of_story_content
		add_prestige = 100
		stress_impact = {
			arrogant = minor_stress_impact_loss
		}
		scope:helm = {
			custom_tooltip =  war_of_the_rohirrim.0100.c.effects
			add_opinion = {
				target = root
				modifier = rebellious_vassal_opinion
			}
			set_relation_rival = { reason = rival_age_old_rivalry target = root }
		}
		scope:wulf = { # If you opt out of narrative content, can marry Wulf normally
			remove_trait = cannot_marry
		}
		ai_chance = {
			base = 0
		}
	}
}

# Freca: Freca's Proposal
war_of_the_rohirrim.0101 = {
	type = character_event
	title = war_of_the_rohirrim.0101.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					exists = scope:calm_approach
				}
				desc = war_of_the_rohirrim.0101.desc.calm
			}
			desc = war_of_the_rohirrim.0101.desc.bold
		}
	}
	theme = realm
	override_background = { reference = throne_room_hadorim }
	
	left_portrait = {
		character = root
		triggered_animation = {
			trigger = {
				exists = scope:calm_approach
			}
			animation = debating
		}
		animation = anger
	}

	right_portrait = {
		character = scope:helm
		animation = disapproval
	}

	lower_left_portrait = scope:wulf
	lower_right_portrait = scope:hera

	immediate = {
		remove_variable = cannot_cancel_travel
	}
	
	option = { 
		name = war_of_the_rohirrim.0101.a
		custom_tooltip = war_of_the_rohirrim.0101.a.effect
		character:lineofeorl9 = { 
			trigger_event = {
				id = war_of_the_rohirrim.0102
				days = { 1 2 }
			}
		}
	}

	after = {
		remove_variable = no_return_event
	}
	
}

# Helm: Freca makes his proposal
war_of_the_rohirrim.0102 = {
	type = character_event
	title = war_of_the_rohirrim.0102.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					exists = scope:calm_approach
				}
				desc = war_of_the_rohirrim.0102.desc.calm
			}
			desc = war_of_the_rohirrim.0102.desc.bold
		}
	}
	theme = realm
	
	left_portrait = {
		character = root
		animation = disapproval
	}
	
	right_portrait = {
		character = scope:freca
		triggered_animation = {
			trigger = {
				exists = scope:calm_approach
			}
			animation = debating
		}
		animation = anger
	}

	lower_left_portrait = scope:hera
	lower_center_portrait = scope:frealaf
	lower_right_portrait = scope:wulf

	immediate = {
		character:6000010 = { save_scope_as = frealaf }
	}
	
	option = { 
		name = war_of_the_rohirrim.0102.a
		custom_tooltip = war_of_the_rohirrim.0102.a.effects
		scope:freca = { 
			trigger_event = war_of_the_rohirrim.0103
		}
		ai_chance = {
			base = 100
	   }
	}
	option = { 
		name = war_of_the_rohirrim.0102.b
		custom_tooltip = freca_helm_opt_out_of_story_content
		scope:hera = {
			hidden_effect = {
				remove_trait = cannot_marry
			}
			marry = scope:wulf
		}
		scope:wulf = {
			add_pressed_claim = title:k_rohan
			hidden_effect = {
				remove_trait = cannot_marry
			}
		}
		create_alliance = {			
			target = scope:freca		
			allied_through_owner = scope:wulf
			allied_through_target = scope:hera
		}
		ai_chance = {
			base = 0
	   }
	}
	
}

# Freca: The Fight
war_of_the_rohirrim.0103 = {
	type = character_event
	title = war_of_the_rohirrim.0103.t
	desc = war_of_the_rohirrim.0103.desc
	theme = martial
	
	left_portrait = {
		character = root
		animation = rage
	}
	right_portrait = {
		character = scope:helm
		animation = anger
	}

	lower_center_portrait = scope:frealaf

	override_background = {
		reference = alley_night
	}

	override_effect_2d = {
		reference = rain
	}
	
	option = {
		name = war_of_the_rohirrim.0103.a
		custom_tooltip = war_of_the_rohirrim.0103.a.effects
		scope:helm = {
			trigger_event = war_of_the_rohirrim.0104
		}
		ai_chance = {
 			base = 100
		}
	}
	
}

# Helm: The Punch
war_of_the_rohirrim.0104 = {
	type = character_event
	title = war_of_the_rohirrim.0104.t
	desc = war_of_the_rohirrim.0104.desc
	theme = martial
	
	left_portrait = {
		character = root
		animation = rage
	}
	right_portrait = {
		character = scope:freca
		animation = anger
	}

	override_background = {
		reference = alley_night
	}

	override_effect_2d = {
		reference = rain
	}
	
	option = { 
		name = war_of_the_rohirrim.0104.a
		scope:freca = {
			trigger_event = war_of_the_rohirrim.0105
		}
		ai_chance = {
			base = 100
		}
	}
	
}

# Freca: The Death of Freca
war_of_the_rohirrim.0105 = {
	type = character_event
	title = war_of_the_rohirrim.0105.t
	desc = war_of_the_rohirrim.0105.desc
	theme = death
	
	left_portrait = {
		character = root
		animation = pain
	}
	
	right_portrait = {
		character = scope:wulf
		animation = grief
	}

	override_background = {
		reference = alley_night
	}

	override_effect_2d = {
		reference = rain
	}

	immediate = {
		hidden_effect = {
			add_trait = wounded_3
		}
	}
	
	option = { 
		name = war_of_the_rohirrim.0105.a
		death = {
			killer = scope:helm
			death_reason = death_one_punched
		}
		scope:helm = {
			trigger_event = war_of_the_rohirrim.0106
		}
		ai_chance = {
			base = 100
		}
	}
	
}

# Helm: The Banishment of Wulf
war_of_the_rohirrim.0106 = {
	type = character_event
	title = war_of_the_rohirrim.0106.t
	desc = war_of_the_rohirrim.0106.desc
	theme = martial
	
	left_portrait = {
		character = root
		animation = disgust
	}
	
	right_portrait = {
		character = scope:wulf
		animation = rage
	}

	lower_center_portrait = scope:freca

	override_background = {
		reference = alley_night
	}

	override_effect_2d = {
		reference = rain
	}

	immediate = {
		show_as_tooltip = {
			scope:freca = {
				death = {
					killer = root
					death_reason = death_one_punched
				}
			}
		}
	}
	
	option = { 
		name = war_of_the_rohirrim.0106.a
		scope:wulf = {
			trigger_event = war_of_the_rohirrim.0107
			show_as_tooltip = {
				set_relation_nemesis = { reason = rival_killed_parent target = scope:helm }
				add_pressed_claim = title:k_rohan
				create_title_and_vassal_change = {
					type = granted
					save_scope_as = change
				}
				title:c_tormcaladach = {
					change_title_holder = {
						holder = root
						change = scope:change
					}
				}
				resolve_title_and_vassal_change = scope:change
				create_title_and_vassal_change = {
					type = revoked
					save_scope_as = change2
					add_claim_on_loss = yes
				}
				every_held_title = {
					limit = {
						tier >= tier_county
						OR = {
							kingdom = title:k_rohan
							duchy = title:d_westmarches
							duchy = title:d_drulad
						}
					}
					change_title_holder = {
						holder = scope:helm
						change = scope:change2
					}
				}
				scope:targg = {
					if = {
						limit = {
							is_ai = yes
						}
						every_held_title = {
							limit = {
								tier >= tier_county
								OR = {
									kingdom = title:k_rohan
									duchy = title:d_westmarches
									duchy = title:d_drulad
								}
							}
							change_title_holder = {
								holder = scope:helm
								change = scope:change2
							}
						}
					}
				}
				resolve_title_and_vassal_change = scope:change2
				create_title_and_vassal_change = {
					type = swear_fealty
					save_scope_as = change3
				}
				change_liege = {
					liege = character:lineurthain52
					change = scope:change3
				}
				resolve_title_and_vassal_change = scope:change3
			}
		}
		ai_chance = {
			base = 100
		}
	}
	
}

# Wulf: Banished
war_of_the_rohirrim.0107 = {
	type = character_event
	title = war_of_the_rohirrim.0107.t
	desc = war_of_the_rohirrim.0107.desc
	theme = martial
	
	left_portrait = {
		character = root
		animation = rage
	}
	
	right_portrait = {
		character = scope:helm
		animation = disgust
	}

	lower_left_portrait = scope:freca
	lower_right_portrait = scope:cerith

	override_background = {
		reference = alley_night
	}

	override_effect_2d = {
		reference = rain
	}

	immediate = {
		character:lineurthain52 = { save_scope_as = cerith }
	}
	
	option = { 
		name = war_of_the_rohirrim.0107.a
		scope:helm = { set_relation_nemesis = { reason = rival_killed_parent target = root } }
		add_pressed_claim = title:k_rohan
		add_pressed_claim = title:c_kingstead
		create_title_and_vassal_change = {
			type = granted
			save_scope_as = change
		}
		title:c_tormcaladach = {
			change_title_holder = {
				holder = root
				change = scope:change
			}
		}
		resolve_title_and_vassal_change = scope:change
		create_title_and_vassal_change = {
			type = revoked
			save_scope_as = change2
			add_claim_on_loss = yes
		}
		every_held_title = {
			limit = {
				tier >= tier_county
				OR = {
					kingdom = title:k_rohan
					duchy = title:d_westmarches
					duchy = title:d_drulad
				}
			}
			change_title_holder = {
				holder = scope:helm
				change = scope:change2
			}
		}
		scope:targg = {
			if = {
				limit = {
					is_ai = yes
				}
				every_held_title = {
					limit = {
						tier >= tier_county
						OR = {
							kingdom = title:k_rohan
							duchy = title:d_westmarches
							duchy = title:d_drulad
						}
					}
					change_title_holder = {
						holder = scope:helm
						change = scope:change2
					}
				}
			}
		}
		resolve_title_and_vassal_change = scope:change2
		ai_chance = {
			base = 100
		}
	}

	after = {
		create_title_and_vassal_change = {
			type = swear_fealty
			save_scope_as = change3
		}
		change_liege = {
			liege = scope:cerith
			change = scope:change3
		}
		resolve_title_and_vassal_change = scope:change3
		scope:targg = {
			set_employer = root
		}
		scope:helm = {
			trigger_event = {
				id = war_of_the_rohirrim.0108
				days = 6
			}
		}
		trigger_event = {
			id = war_of_the_rohirrim.0109
			days = 7
		}
	}
	
}

# Helm: The Aftermath
war_of_the_rohirrim.0108 = {
	type = character_event
	title = war_of_the_rohirrim.0108.t
	desc = war_of_the_rohirrim.0108.desc
	theme = realm
	
	right_portrait = {
		character = root
		animation = personality_honorable
	}

	immediate = {
		give_nickname = nick_hammerhand
        add_character_flag = {
			flag = had_nickname_event
		}
	}
	
	option = { 
		name = war_of_the_rohirrim.0108.a
		add_truce_one_way = {
			character = character:lineoffreca3
			years = 10
			name = TRUCE_GONDOR_MORDOR
		}
		ai_chance = {
			base = 100
		}
	}
	
}

# Wulf: A Life in Exile
war_of_the_rohirrim.0109 = {
	type = character_event
	title = war_of_the_rohirrim.0109.t
	desc = war_of_the_rohirrim.0109.desc
	theme = feast_activity
	
	left_portrait = {
		character = root
		animation = personality_honorable
	}
	
	right_portrait = {
		character = scope:cerith
		animation = debating
	}

	lower_left_portrait = scope:targg
	lower_right_portrait = root.mother

	immediate = {
		show_as_tooltip = {
			scope:helm ?= {
				give_nickname = nick_hammerhand
			}
		}
	}
	
	option = { 
		name = war_of_the_rohirrim.0109.a
		add_character_flag = wulf_in_exile
		if = {
			limit = {
				is_ai = yes
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 5
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 5
				}
				men_at_arms = {
					type = mangonel
					stacks = 2
				}
				uses_supply = no
				levies = 1000
				inheritable = yes
				location = root.location
				name = frecas_men
			}
			if = {
				limit = {
					NOT = {
						has_perk = befriend_perk
					}
				}
				add_perk = befriend_perk
			}
			create_story = story_cycle_wulf_war_of_the_rohirrim
			execute_decision = decision_wulf_marriage_dunlending
			execute_decision = decision_wulf_conversion
			trigger_event = {
				id = war_of_the_rohirrim.0150
				days = { 100 200 }
			}
		}
		else_if = {
			limit = {
				exists = scope:calm_approach
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 1
				}
				inheritable = yes
				location = root.location
				name = frecas_men
			}
		}
		else = {
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 2
				}
				inheritable = yes
				location = root.location
				name = frecas_men
			}
		}
		ai_chance = {
			base = 100
		}
	}
	
}

# War for Rohan - Wulf Repeating Event to Nudge AI to Reunification and building war
war_of_the_rohirrim.0150 = {
	hidden = yes
	scope = none
	
	trigger = {
		NOT = { has_character_flag = wulf_taken_rohan_war_decision }
	}

	immediate = {
		random_list = {
			1 = { # If not at war, go to war!
				trigger = {
					is_at_war = no
					NOT = { has_character_flag = wulf_taken_rohan_war_decision }
					title:k_dunland = {
						any_de_jure_top_liege = {
							NOR = {
								custom_tooltip = {
									text = is_wulf
									this = root
								}
								custom_tooltip = {
									text = is_friendly_with_wulf
									OR = {
										opinion = {
											target = root
											value > 70
										}
										AND = {
											has_diarchy_type = regency
											diarch = { 
												opinion = {
													target = root
													value > 70
												}
											}
										}
									}
								}
								custom_tooltip = {
									text = is_friends_with_wulf
									OR = {
										has_relation_friend = root
										AND = {
											has_diarchy_type = regency
											diarch = { has_relation_friend = root }
										}
									}
								}
								custom_tooltip = {
									text = is_lovers_with_wulf
									OR = {
										has_relation_lover = root
										AND = {
											has_diarchy_type = regency
											diarch = { has_relation_lover = root }
										}
									}
								}
								custom_tooltip = {
									text = is_an_ally_of_wulf
									OR = {
										any_ally = {
											this = root
										}
										AND = {
											has_diarchy_type = regency
											diarch = { 
												any_ally = {
													this = root
												} 
											}
										}
									}
								}
								custom_tooltip = {
									text = is_hooked_by_wulf
									OR = {
										root = {
											has_hook = prev
										}
										AND = {
											has_diarchy_type = regency
											diarch = { 
												root = {
													has_hook = prev
												}
											}
										}
									}
								}
								custom_tooltip = {
									text = is_a_tributary_of_wulf
									root = {
										OR = {
											is_target_in_variable_list = { name = non_permanent_tributaries target = prev }
											is_target_in_variable_list = { name = permanent_tributaries target = prev }
										}
									}
								}
								custom_tooltip = {
									text = is_not_daen_lintis
									culture = {
										NOT = { has_cultural_pillar = heritage_daen_lintis }
									}
								}
							}
						}
					}
				}
				title:k_dunland = {
					ordered_de_jure_top_liege = {
						limit = {
							NOR = {
								custom_tooltip = {
									text = is_wulf
									this = root
								}
								custom_tooltip = {
									text = is_friendly_with_wulf
									OR = {
										opinion = {
											target = root
											value > 70
										}
										AND = {
											has_diarchy_type = regency
											diarch = { 
												opinion = {
													target = root
													value > 70
												}
											}
										}
									}
								}
								custom_tooltip = {
									text = is_friends_with_wulf
									OR = {
										has_relation_friend = root
										AND = {
											has_diarchy_type = regency
											diarch = { has_relation_friend = root }
										}
									}
								}
								custom_tooltip = {
									text = is_lovers_with_wulf
									OR = {
										has_relation_lover = root
										AND = {
											has_diarchy_type = regency
											diarch = { has_relation_lover = root }
										}
									}
								}
								custom_tooltip = {
									text = is_an_ally_of_wulf
									OR = {
										any_ally = {
											this = root
										}
										AND = {
											has_diarchy_type = regency
											diarch = { 
												any_ally = {
													this = root
												} 
											}
										}
									}
								}
								custom_tooltip = {
									text = is_hooked_by_wulf
									OR = {
										root = {
											has_hook = prev
										}
										AND = {
											has_diarchy_type = regency
											diarch = { 
												root = {
													has_hook = prev
												}
											}
										}
									}
								}
								custom_tooltip = {
									text = is_a_tributary_of_wulf
									root = {
										OR = {
											is_target_in_variable_list = { name = non_permanent_tributaries target = prev }
											is_target_in_variable_list = { name = permanent_tributaries target = prev }
										}
									}
								}
								custom_tooltip = {
									text = is_not_daen_lintis
									culture = {
										NOT = { has_cultural_pillar = heritage_daen_lintis }
									}
								}
							}
						}
						order_by = current_military_strength
						save_scope_as = war_target
					}
				}
				scope:war_target = {
					random_held_title = {
						limit = {
							tier = tier_county
							kingdom = title:k_dunland
						}
						duchy = {
							save_scope_as = war_target_title
						}
					}
				}
				start_war = {
					casus_belli = duchy_conquest_cb 
					target = scope:war_target
					target_title = scope:war_target_title
				}
			}
			2 = { # If you're not friends, make friends!
				trigger = {
					NOT = { has_character_flag = wulf_taken_rohan_war_decision }
					title:k_dunland = {
						any_de_jure_top_liege = {
							NOR = {
								is_at_war_with = root
								custom_tooltip = {
									text = is_wulf
									this = root
								}
								custom_tooltip = {
									text = is_friendly_with_wulf
									OR = {
										opinion = {
											target = root
											value > 70
										}
										AND = {
											has_diarchy_type = regency
											diarch = { 
												opinion = {
													target = root
													value > 70
												}
											}
										}
									}
								}
								custom_tooltip = {
									text = is_friends_with_wulf
									OR = {
										has_relation_friend = root
										AND = {
											has_diarchy_type = regency
											diarch = { has_relation_friend = root }
										}
									}
								}
								custom_tooltip = {
									text = is_lovers_with_wulf
									OR = {
										has_relation_lover = root
										AND = {
											has_diarchy_type = regency
											diarch = { has_relation_lover = root }
										}
									}
								}
								custom_tooltip = {
									text = is_an_ally_of_wulf
									OR = {
										any_ally = {
											this = root
										}
										AND = {
											has_diarchy_type = regency
											diarch = { 
												any_ally = {
													this = root
												} 
											}
										}
									}
								}
								custom_tooltip = {
									text = is_hooked_by_wulf
									OR = {
										root = {
											has_hook = prev
										}
										AND = {
											has_diarchy_type = regency
											diarch = { 
												root = {
													has_hook = prev
												}
											}
										}
									}
								}
								custom_tooltip = {
									text = is_a_tributary_of_wulf
									root = {
										OR = {
											is_target_in_variable_list = { name = non_permanent_tributaries target = prev }
											is_target_in_variable_list = { name = permanent_tributaries target = prev }
										}
									}
								}
								custom_tooltip = {
									text = is_not_daen_lintis
									culture = {
										NOT = { has_cultural_pillar = heritage_daen_lintis }
									}
								}
							}
						}
					}
				}
				title:k_dunland = {
					ordered_de_jure_top_liege = {
						limit = {
							NOR = {
								is_at_war_with = root
								custom_tooltip = {
									text = is_wulf
									this = root
								}
								custom_tooltip = {
									text = is_friendly_with_wulf
									OR = {
										opinion = {
											target = root
											value > 70
										}
										AND = {
											has_diarchy_type = regency
											diarch = { 
												opinion = {
													target = root
													value > 70
												}
											}
										}
									}
								}
								custom_tooltip = {
									text = is_friends_with_wulf
									OR = {
										has_relation_friend = root
										AND = {
											has_diarchy_type = regency
											diarch = { has_relation_friend = root }
										}
									}
								}
								custom_tooltip = {
									text = is_lovers_with_wulf
									OR = {
										has_relation_lover = root
										AND = {
											has_diarchy_type = regency
											diarch = { has_relation_lover = root }
										}
									}
								}
								custom_tooltip = {
									text = is_an_ally_of_wulf
									OR = {
										any_ally = {
											this = root
										}
										AND = {
											has_diarchy_type = regency
											diarch = { 
												any_ally = {
													this = root
												} 
											}
										}
									}
								}
								custom_tooltip = {
									text = is_hooked_by_wulf
									OR = {
										root = {
											has_hook = prev
										}
										AND = {
											has_diarchy_type = regency
											diarch = { 
												root = {
													has_hook = prev
												}
											}
										}
									}
								}
								custom_tooltip = {
									text = is_a_tributary_of_wulf
									root = {
										OR = {
											is_target_in_variable_list = { name = non_permanent_tributaries target = prev }
											is_target_in_variable_list = { name = permanent_tributaries target = prev }
										}
									}
								}
								custom_tooltip = {
									text = is_not_daen_lintis
									culture = {
										NOT = { has_cultural_pillar = heritage_daen_lintis }
									}
								}
							}
						}
						order_by = "reverse_opinion(root)"
						save_scope_as = friend_target
					}
				}
				set_random_friendship_reason = { TARGET = scope:friend_target }
			}
			2 = { # If your military strength is low, arm up!
				trigger = {
					current_military_strength < 8000 
				}
				random_list = {
					1 = {
						spawn_army = {
							men_at_arms = {
								type = dunlending_huscarl
								stacks = 2
							}
							uses_supply = no
							levies = 300
							inheritable = yes
							location = root.location
							name = wulfs_men
						}
					}
					1 = {
						spawn_army = {
							men_at_arms = {
								type = dunlending_axe_hunters
								stacks = 3
							}
							uses_supply = no
							levies = 300
							inheritable = yes
							location = root.location
							name = wulfs_men
						}
					}
					1 = {
						spawn_army = {
							men_at_arms = {
								type = dunlending_outriders
								stacks = 2
							}
							uses_supply = no
							levies = 300
							inheritable = yes
							location = root.location
							name = wulfs_men
						}
					}
					1 = {
						spawn_army = {
							men_at_arms = {
								type = mangonel
								stacks = 2
							}
							uses_supply = no
							levies = 300
							inheritable = yes
							location = root.location
							name = wulfs_men
						}
					}
				}
			}
		}
		trigger_event = {
			id = war_of_the_rohirrim.0150
			days = { 100 200 }
		}
	}

}

# Wulf Conversion Decision - Turthalis - Lead Up
war_of_the_rohirrim.0210 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0210.t
	desc =  war_of_the_rohirrim.0210.desc
	theme = faith
	
	left_portrait = {
		character = root
		animation = personality_honorable
	}

	override_background = {
		reference = fp1_runestone_circle
	}

	immediate = {
		add_character_flag = wulf_faith_question_resolved
	}

	option = {
		name =  war_of_the_rohirrim.0210.a
		trigger_event = war_of_the_rohirrim.0211
	}
}

# Wulf Conversion Decision - Turthalis - Trial
war_of_the_rohirrim.0211 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0211.t
	desc =  war_of_the_rohirrim.0211.desc
	theme = faith
	
	left_portrait = {
		character = root
		animation = paranoia
	}

	override_background = {
		reference = on_river
	}

	override_effect_2d = {
		reference = fog
	}

	immediate = {
	}

	option = {
		name =  war_of_the_rohirrim.0211.a
		trigger_event = war_of_the_rohirrim.0212
	}
}

# Wulf Conversion Decision - Turthalis - Triumph
war_of_the_rohirrim.0212 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0212.t
	desc =  war_of_the_rohirrim.0212.desc
	theme = faith
	
	left_portrait = {
		character = root
		animation = happiness
	}

	override_background = {
		reference = ep2_hunt_foggy_forest
	}

	immediate = {
	}

	option = {
		name =  war_of_the_rohirrim.0212.a
		set_character_faith_with_conversion = faith:faith_dunlending_turthalis
		if = {
			limit = {
				NOT = {
					has_perk = befriend_perk
				}
			}
			add_perk = befriend_perk
		}
		add_character_modifier = {
			modifier = wulf_diplomatic_faith_character_modifier
			years = 10
		}
		if = {
			limit = {
				character:lineurthain52 = {
					is_alive = yes
					NOT = { has_relation_friend = root }
				}
			}
			character:lineurthain52 = { set_relation_friend = { reason = friend_bond_at_ceremony target = root province = province:133 } }
		}
		else_if = {
			limit = {
				title:k_dunland = {
					any_de_jure_top_liege = {
						count > 0
						NOT = { this = root }
						NOT = { has_relation_friend = root }
						NOT = {
							any_ally = {
								this = root
							}
						}
						NOT = {
							root = {
								has_hook = prev
							}
						}
						has_faith = faith:faith_dunlending_turthalis
						NOT = { this = character:lineurthain52 }
					}
				}
			}
			title:k_dunland = {
				random_de_jure_top_liege = {
					limit = {
						NOT = { this = root }
						NOT = { has_relation_friend = root }
						NOT = {
							any_ally = {
								this = root
							}
						}
						NOT = {
							root = {
								has_hook = prev
							}
						}
						faith = faith:faith_dunlending_turthalis
						NOT = { this = character:lineurthain52 }
					}
					set_relation_friend = { reason = friend_bond_at_ceremony target = root province = province:133 }
				}
			}
		}
	}
}

# Wulf Conversion Decision - Khrabnazerh - Lead Up
war_of_the_rohirrim.0213 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0213.t
	desc =  war_of_the_rohirrim.0213.desc
	theme = faith
	
	left_portrait = {
		character = root
		animation = personality_bold
	}

	override_background = {
		reference = fp1_runestone_circle
	}

	override_effect_2d = {
		reference = smoke
	}

	immediate = {
		add_character_flag = wulf_faith_question_resolved
	}

	option = {
		name =  war_of_the_rohirrim.0213.a
		trigger_event = war_of_the_rohirrim.0214
	}
}

# Wulf Conversion Decision - Khrabnazerh - Trial
war_of_the_rohirrim.0214 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0214.t
	desc =  war_of_the_rohirrim.0214.desc
	theme = faith
	
	left_portrait = {
		character = root
		animation = wrestling_yield_start
	}

	override_background = {
		reference = fp1_runestone
	}

	override_effect_2d = {
		reference = smoke
	}

	immediate = {
		increase_wounds_effect = { REASON = fight }
	}

	option = {
		name =  war_of_the_rohirrim.0214.a
		trigger_event = war_of_the_rohirrim.0215
	}
}

# Wulf Conversion Decision - Khrabnazerh - Triumph
war_of_the_rohirrim.0215 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0215.t
	desc =  war_of_the_rohirrim.0215.desc
	theme = faith
	
	left_portrait = {
		character = root
		animation = wedding_drunk
	}

	override_background = {
		reference = fp1_runestone
	}

	override_effect_2d = {
		reference = smoke
	}

	immediate = {
	}

	option = {
		name =  war_of_the_rohirrim.0215.a
		set_character_faith_with_conversion = faith:faith_dunlending_khrabnazerh
		spawn_army = {
			men_at_arms = {
				type = dunlending_axe_hunters
				stacks = 1
			}
			inheritable = yes
			uses_supply = yes
			location = capital_province
			name = raven_guard
		}
		add_character_modifier = {
			modifier = wulf_martial_faith_character_modifier
			years = 10
		}
		if = {
			limit = {
				title:k_dunland = {
					any_de_jure_top_liege = {
						count > 0
						NOT = { this = root }
						NOT = { has_relation_friend = root }
						NOT = {
							any_ally = {
								this = root
							}
						}
						NOT = {
							root = {
								has_hook = prev
							}
						}
						has_faith = faith:faith_dunlending_khrabnazerh
						NOT = { this = character:linefrigad7 }
						NOT = { this = character:linemeoridh3 }
					}
				}
				always = yes
			}
			title:k_dunland = {
				random_de_jure_top_liege = {
					limit = {
						NOT = { this = root }
						NOT = { has_relation_friend = root }
						NOT = {
							any_ally = {
								this = root
							}
						}
						NOT = {
							root = {
								has_hook = prev
							}
						}
						faith = faith:faith_dunlending_khrabnazerh
						NOT = { this = character:linefrigad7 }
						NOT = { this = character:linemeoridh3 }
					}
					set_relation_friend = { reason = friend_bond_at_ceremony target = root province = province:133 }
				}
			}
		}
		if = {
			limit = {
				character:lineurthain52 = {
					is_alive = yes
					NOT = { faith = faith:faith_dunlending_khrabnazerh }
				}
			}
			character:lineurthain52 = { 
				add_opinion = {
					target = root
					modifier = disappointed_opinion
					opinion = -30
				}
			}
		}
	}
}

# Wulf Conversion Decision - Rohirric - A Quiet Resolve
war_of_the_rohirrim.0216 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0216.t
	desc =  war_of_the_rohirrim.0216.desc
	theme = faith
	
	left_portrait = {
		character = root
		animation = holding_staff
	}

	override_background = {
		reference = fp1_runestone
	}

	immediate = {
		add_character_flag = wulf_faith_question_resolved
	}

	option = {
		name =  war_of_the_rohirrim.0216.a
		add_character_modifier = {
			modifier = wulf_middle_ground_faith_character_modifier
			years = 10
		}
	}
}

# Wulf Saralain Marriage Decision - Initial
war_of_the_rohirrim.0300 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0300.t
	desc =  war_of_the_rohirrim.0300.desc
	theme = martial
	
	left_portrait = {
		character = root
		animation = war_attacker
	}

	right_portrait = {
		character = scope:pedrogh
		animation = marshal_mace
	}

	lower_center_portrait = scope:guin

	override_background = {
		reference = wilderness
	}

	immediate = {
		character:lineofmorcad2 = {
			save_scope_as = pedrogh
		}
		character:lineofmorcad3sister = {
			save_scope_as = guin
		}
	}

	option = {
		name = war_of_the_rohirrim.0300.a
		character:lineofmorcad2 = {
			every_character_war = {
				add_attacker = root
			}
		}
		trigger_event = {
			id = war_of_the_rohirrim.0301
			days = 7
		}
	}
}

# Wulf Saralain Marriage Decision - Ongoing war maintenance checks
war_of_the_rohirrim.0301 = {
	hidden = yes
	scope = none
	
	immediate = {
		if = { # If I'm still in a war alongside Pedrogh, check again in a week.
			limit = { any_war_ally = { this = scope:pedrogh } }
			trigger_event = {
				id = war_of_the_rohirrim.0301
				days = 7
			}
		}
		else_if = { # If wars are over and Pedrogh has the 3 duchy counties in his realm, trigger success event
			limit = {
				scope:pedrogh = {
					any_realm_county = {
						count = 3
						OR = {
							this = title:c_lond_daer
							this = title:c_fadairigh
							this = title:c_colgrin
						}
					}
				}
			}
			trigger_event = war_of_the_rohirrim.0302
		}
		else = { # Otherwise trigger failure event
			trigger_event = war_of_the_rohirrim.0303
		}
	}
}

# Wulf Saralain Marriage Decision - Success
war_of_the_rohirrim.0302 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0302.t
	desc =  war_of_the_rohirrim.0302.desc
	theme = marriage
	
	left_portrait = {
		character = root
		animation = flirtation
	}

	right_portrait = {
		character = scope:guin
		animation = personality_content
	}

	lower_center_portrait = scope:pedrogh

	immediate = {
		create_title_and_vassal_change = {
			type = created
			save_scope_as = change
		}
		title:d_nen_gwathlo = {
			change_title_holder = {
				holder = scope:pedrogh
				change = scope:change
			}
		}
		resolve_title_and_vassal_change = scope:change
	}

	option = { # Marry her and secure the alliance
		name = war_of_the_rohirrim.0302.a
		trigger = {
			is_married = no
			is_betrothed = no
		}
		marry = scope:guin
		hidden_effect = {
			character:lineofmorcad3sister = {
				remove_trait = cannot_marry
			}
			character:linethorne7 = {
				remove_trait = cannot_marry
			}
			character:linefrigad7sister = {
				remove_trait = cannot_marry
			}
			character:herahelm = {
				remove_trait = cannot_marry
			}
			character:lineoffreca3 = {
				remove_trait = cannot_marry
			}
		}
		custom_tooltip = {
			text = war_of_the_rohirrim.0302.a.effect
			create_alliance = {			
				target = scope:pedrogh	
				allied_through_owner = root
				allied_through_target = scope:guin
			}
		}
		ai_chance = {
			base = 100
		}
	}

	option = { # On second thoughts, can you thank me in some other way?
		name = war_of_the_rohirrim.0302.b
		add_gold = 200
		scope:pedrogh = {
			remove_short_term_gold = 200
			add_opinion = {
				target = root
				modifier = insulted_family_opinion
				opinion = -50
			}
		}
		hidden_effect = {
			character:lineofmorcad3sister = {
				remove_trait = cannot_marry
			}
		}
		ai_chance = {
			base = 0
		}
	}

	after = {
		remove_character_flag = decision_wulf_marriage_pursuing_goal
	}
}

# Wulf Saralain Marriage Decision - Failure
war_of_the_rohirrim.0303 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0303.t
	desc =  war_of_the_rohirrim.0303.desc
	theme = diplomacy
	
	left_portrait = {
		character = root
		animation = war_over_loss
	}

	right_portrait = {
		character = scope:guin
		animation = personality_forgiving
	}

	lower_center_portrait = scope:pedrogh

	override_background = {
		reference = throne_room_tribal
	}

	option = { # Well shit.
		name = war_of_the_rohirrim.0303.a
		add_gold = 50
		add_prestige = -50
		scope:pedrogh = {
			remove_short_term_gold = 50
			add_opinion = {
				target = root
				modifier = disappointed_opinion
				opinion = -20
			}
		}
		hidden_effect = {
			character:lineofmorcad3sister = {
				remove_trait = cannot_marry
			}
		}
	}

	after = {
		remove_character_flag = decision_wulf_marriage_pursuing_goal
	}

}

# Wulf Eredrim Marriage Decision - Initial
war_of_the_rohirrim.0310 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0310.t
	desc =  war_of_the_rohirrim.0310.desc
	theme = marriage
	
	left_portrait = {
		character = root
		animation = war_attacker
	}

	right_portrait = {
		character = scope:targg
		animation = worry
	}

	lower_left_portrait = scope:mountainfather
	lower_right_portrait = scope:betrothed

	override_background = {
		reference = wilderness
	}

	immediate = {
		hidden_effect = {
			if = {
				limit = { NOT = { employs_court_position = travel_leader_court_position } }
				create_character = {
					template = foreign_architect_template
					employer = root
					save_scope_as = caravan_master
				}
				appoint_court_position = {
					recipient = scope:caravan_master
					court_position = travel_leader_court_position
				}
			}
		}
		character:lineofarelaidh1 = {
			save_scope_as = mountainfather
		}
		character:lineofarelaidh1b1 = {
			save_scope_as = betrothed
		}
		character:linegeanmar9 = { 
			save_scope_as = targg
		}
	}

	option = {
		name = war_of_the_rohirrim.0310.a
		custom_tooltip = war_of_the_rohirrim.0310.a.effects
		set_variable = cannot_cancel_travel
		set_variable = no_return_event
		start_travel_plan = {
			destination = scope:mountainfather.capital_province
			companion = scope:targg
			on_arrival_event = war_of_the_rohirrim.0311
			return_trip = yes
			players_use_planner = no
			on_arrival_destinations = all_but_last
		}
		add_stress = 5
		ai_chance = {
			base = 100
		}
	}

	option = {
		name = war_of_the_rohirrim.0310.b
		custom_tooltip = war_of_the_rohirrim.0310.b.effects
		add_stress = -5
		ai_chance = {
			base = 0
		}
	}
}

# Wulf Eredrim Marriage Decision - Arrival
war_of_the_rohirrim.0311 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0311.t
	desc =  war_of_the_rohirrim.0311.desc
	theme = marriage
	
	left_portrait = {
		character = root
		animation = disbelief
	}

	right_portrait = {
		character = scope:mountainfather
		animation = eccentric
	}

	lower_center_portrait = scope:betrothed

	override_background = {
		reference = fp1_viking_feast
	}

	immediate = {
		remove_variable = cannot_cancel_travel
	}

	option = {
		name = war_of_the_rohirrim.0311.a
		add_internal_flag = dangerous
		custom_tooltip = war_of_the_rohirrim.0311.a.warning
		random_list = {
			1 = {
				desc = war_of_the_rohirrim.0311.a.success
				modifier = {	
					add = health.mult10
					add = -100
					factor = -1
				}
				custom_tooltip = war_of_the_rohirrim.0311.a.success.effect
				trigger_event = war_of_the_rohirrim.0312
			}
			1 = {
				desc = war_of_the_rohirrim.0311.a.failure
				modifier = {	
					add = health.mult10
				}
				custom_tooltip = war_of_the_rohirrim.0311.a.failure.effect
				hidden_effect = {
					random_list = {
						9 = { # Failure
							trigger_event = war_of_the_rohirrim.0313
						}
						1 = { # Critical Failure
							trigger = {
								is_ai = no
							}
							trigger_event = war_of_the_rohirrim.0314
						}
					}
				}
			}
		}
		ai_chance = {
			base = 100
		}
	}

	option = {
		name = war_of_the_rohirrim.0311.b
		scope:mountainfather = {
			add_opinion = {
				target = root
				modifier = disappointed_opinion
				opinion = -30
			}
		}
		remove_character_flag = decision_wulf_marriage_pursuing_goal
		ai_chance = {
			base = 0
		}
	}

	after = {
		remove_variable = no_return_event
	}
}

# Wulf Eredrim Marriage Decision - Mountain Challenge Success
war_of_the_rohirrim.0312 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0312.t
	desc =  war_of_the_rohirrim.0312.desc
	theme = marriage
	
	left_portrait = {
		character = root
		animation = shiver
	}

	override_background = {
		reference = wilderness_mountains
	}

	widget = {
		gui = "event_window_widget_vfx_snow"
		container = "foreground_shader_vfx_container"
	}

	immediate = {
		add_character_flag = should_be_topless
		add_character_flag = no_hat
	}

	option = {
		name = war_of_the_rohirrim.0312.a
		trigger_event = war_of_the_rohirrim.0315
	}

}

# Wulf Eredrim Marriage Decision - Mountain Challenge Failure
war_of_the_rohirrim.0313 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0313.t
	desc =  war_of_the_rohirrim.0313.desc
	theme = marriage
	
	left_portrait = {
		character = root
		animation = sick
	}

	override_background = {
		reference = wilderness_mountains
	}

	widget = {
		gui = "event_window_widget_vfx_snow"
		container = "foreground_shader_vfx_container"
	}

	immediate = {
		add_trait = ill
		add_character_flag = should_be_topless
		add_character_flag = no_hat
	}

	option = {
		name = war_of_the_rohirrim.0313.a
		random_list = {
			1 = {
				add_character_modifier = {
					modifier = ep3_laamp_flavour_ewan_4041_hypothermia_t3_modifier
					years = 5
				}
			}
			2 = {
				add_character_modifier = {
					modifier = ep3_laamp_flavour_ewan_4041_hypothermia_t2_modifier
					years = 5
				}
			}
			3 = {
				add_character_modifier = {
					modifier = ep3_laamp_flavour_ewan_4041_hypothermia_t1_modifier
					years = 5
				}
			}
		}
		trigger_event = war_of_the_rohirrim.0316
		stress_impact = {
			stubborn = minor_stress_impact_gain
		}
	}

}

# Wulf Eredrim Marriage Decision - Mountain Challenge Critical Failure
war_of_the_rohirrim.0314 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0314.t
	desc =  war_of_the_rohirrim.0314.desc
	theme = marriage
	
	left_portrait = {
		character = root
		animation = sick
	}

	right_portrait = {
		character = scope:helm
		animation = laugh
	}

	lower_center_portrait = root.real_father

	override_background = {
		reference = wilderness_mountains
	}

	widget = {
		gui = "event_window_widget_vfx_snow"
		container = "foreground_shader_vfx_container"
	}

	immediate = {
		add_character_flag = should_be_topless
		add_character_flag = no_hat
		add_trait = ill
		add_character_modifier = ep3_laamp_flavour_ewan_4041_hypothermia_t3_modifier
		character:lineofeorl9 = {
			save_scope_as = helm
		}
	}

	option = {
		name = war_of_the_rohirrim.0314.a
		death = {
			death_reason = death_froze
		}
	}
}

# Wulf Eredrim Marriage Decision - Mountain Challenge Success - Claim Prize
war_of_the_rohirrim.0315 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0315.t
	desc =  war_of_the_rohirrim.0315.desc
	theme = marriage
	
	left_portrait = {
		character = root
		animation = wrestling_victory
	}

	right_portrait = {
		character = scope:mountainfather
		animation = toast_goblet
	}

	lower_center_portrait = scope:betrothed

	override_background = {
		reference = fp1_viking_feast
	}

	immediate = {
		add_prestige = 250
	}

	option = {
		name = war_of_the_rohirrim.0315.a
		create_betrothal = scope:betrothed
		hidden_effect = {
			character:lineofmorcad3sister = {
				remove_trait = cannot_marry
			}
			character:linethorne7 = {
				remove_trait = cannot_marry
			}
			character:linefrigad7sister = {
				remove_trait = cannot_marry
			}
			character:herahelm = {
				remove_trait = cannot_marry
			}
			character:lineoffreca3 = {
				remove_trait = cannot_marry
			}
		}
		custom_tooltip = {
			text = war_of_the_rohirrim.0317.a.effect
			create_alliance = {
				target = scope:mountainfather	
				allied_through_owner = root
				allied_through_target = scope:betrothed
			}
		}
		spawn_army = {
			men_at_arms = {
				type = clan_swordsmen
				stacks = 2
			}
			inheritable = yes
			location = root.location
			name = adorns_men
		}
		stress_impact = {
			ambitious = medium_stress_loss
		}
		ai_chance = {
			base = 100
		}
	}

	option = {
		name = war_of_the_rohirrim.0315.b
		spawn_army = {
			men_at_arms = {
				type = clan_swordsmen
				stacks = 2
			}
			inheritable = yes
			location = root.location
			name = adorns_men
		}
		stress_impact = {
			ambitious = minor_stress_loss
		}
		ai_chance = {
			base = 0
		}
	}

	after = {
		custom_tooltip = war_of_the_rohirrim.0315.leave
		remove_character_flag = should_be_topless
		remove_character_flag = no_hat
		remove_character_flag = decision_wulf_marriage_pursuing_goal
	}
}

# Wulf Eredrim Marriage Decision - Mountain Challenge Failure - Return to Halls
war_of_the_rohirrim.0316 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0316.t
	desc =  war_of_the_rohirrim.0316.desc
	theme = marriage
	
	left_portrait = {
		character = root
		animation = sick
	}

	right_portrait = {
		character = scope:mountainfather
		animation = laugh
	}

	lower_center_portrait = scope:betrothed

	override_background = {
		reference = fp1_viking_feast
	}

	option = {
		name = war_of_the_rohirrim.0316.a
		add_internal_flag = dangerous
		custom_tooltip = war_of_the_rohirrim.0311.a.warning
		duel = {
			skill = prowess
			target = scope:mountainfather
			10 = { #You win
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1
					min = -9
				}
				desc = war_of_the_rohirrim.0316.a.success
				trigger_event = war_of_the_rohirrim.0317
				show_as_tooltip = {
					add_martial_lifestyle_xp = medium_lifestyle_experience
					add_prestige = 200
					scope:mountainfather = {
						increase_wounds_effect = { REASON = duel }
					}
				}
				create_character_memory = {
					type = won_duel
					participants = {
						duel_loser = scope:mountainfather
					}
				}
			}
			20 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1
					min = -19
				}
				desc = war_of_the_rohirrim.0316.a.failure
				hidden_effect = {
					random_list = {
						1 = {
							trigger = {
								is_ai = no
							}
							trigger_event = war_of_the_rohirrim.0319
						}
						3 = {
							trigger_event = war_of_the_rohirrim.0318
						}
					}
				}
				show_as_tooltip = {
					increase_wounds_effect = { REASON = duel }
					add_prestige = -250
				}
			}
		}
		ai_chance = {
			base = 20
		}
	}

	option = {
		name = war_of_the_rohirrim.0316.b
		add_prestige = -250
		set_relation_grudge = scope:mountainfather
		stress_impact = {
			stubborn = medium_stress_gain
		}
		custom_tooltip = war_of_the_rohirrim.0315.leave
		remove_character_flag = should_be_topless
		remove_character_flag = no_hat
		remove_character_flag = decision_wulf_marriage_pursuing_goal
		ai_chance = {
			base = 80
		}
	}

}

# Wulf Eredrim Marriage Decision - Duel Challenge Success
war_of_the_rohirrim.0317 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0317.t
	desc =  war_of_the_rohirrim.0317.desc
	theme = marriage
	
	left_portrait = {
		character = root
		animation = wrestling_victory
	}

	right_portrait = {
		character = scope:mountainfather
		animation = wrestling_yield_start
	}

	lower_center_portrait = scope:betrothed

	override_background = {
		reference = fp1_viking_feast
	}

	immediate = {
		add_martial_lifestyle_xp = medium_lifestyle_experience
		add_prestige = 200
		scope:mountainfather = {
			increase_wounds_effect = { REASON = duel }
		}
	}

	option = {
		name = war_of_the_rohirrim.0317.a
		create_betrothal = scope:betrothed
		hidden_effect = {
			character:lineofmorcad3sister = {
				remove_trait = cannot_marry
			}
			character:linethorne7 = {
				remove_trait = cannot_marry
			}
			character:linefrigad7sister = {
				remove_trait = cannot_marry
			}
			character:herahelm = {
				remove_trait = cannot_marry
			}
			character:lineoffreca3 = {
				remove_trait = cannot_marry
			}
		}
		custom_tooltip = {
			text = war_of_the_rohirrim.0317.a.effect
			create_alliance = {
				target = scope:mountainfather	
				allied_through_owner = root
				allied_through_target = scope:betrothed
			}
		}
		spawn_army = {
			men_at_arms = {
				type = clan_swordsmen
				stacks = 2
			}
			inheritable = yes
			location = root.location
			name = adorns_men
		}
		stress_impact = {
			ambitious = medium_stress_loss
		}
		ai_chance = {
			base = 100
		}
	}

	option = {
		name = war_of_the_rohirrim.0317.b
		spawn_army = {
			men_at_arms = {
				type = clan_swordsmen
				stacks = 2
			}
			inheritable = yes
			location = root.location
			name = adorns_men
		}
		stress_impact = {
			ambitious = minor_stress_loss
		}
		ai_chance = {
			base = 0
		}
	}

	after = {
		custom_tooltip = war_of_the_rohirrim.0315.leave
		remove_character_flag = should_be_topless
		remove_character_flag = no_hat
		remove_character_flag = decision_wulf_marriage_pursuing_goal
	}
	
}

# Wulf Eredrim Marriage Decision - Duel Challenge Failure
war_of_the_rohirrim.0318 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0318.t
	desc =  war_of_the_rohirrim.0318.desc
	theme = martial
	
	left_portrait = {
		character = root
		animation = wrestling_yield_start
	}

	right_portrait = {
		character = scope:mountainfather
		animation = wrestling_victory
	}

	lower_center_portrait = scope:betrothed

	override_background = {
		reference = fp1_viking_feast
	}

	immediate = {
		increase_wounds_effect = { REASON = duel }
		add_prestige = -250
		stress_impact = {
			ambitious = minor_stress_impact_gain
		}
	}

	option = {
		name = war_of_the_rohirrim.0318.a
		set_relation_grudge = scope:mountainfather
	}

	after = {
		custom_tooltip = war_of_the_rohirrim.0315.leave
		remove_character_flag = should_be_topless
		remove_character_flag = no_hat
		remove_character_flag = decision_wulf_marriage_pursuing_goal
	}
}

# Wulf Eredrim Marriage Decision - Duel Challenge Critical Failure
war_of_the_rohirrim.0319 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0319.t
	desc =  war_of_the_rohirrim.0319.desc
	theme = death
	
	left_portrait = {
		character = root
		animation = severelywounded
	}

	right_portrait = {
		character = scope:mountainfather
		animation = laugh
	}

	lower_center_portrait = root.real_father

	override_background = {
		reference = fp1_viking_feast
	}

	immediate = {
		add_prestige = -250
		hidden_effect = {
			add_trait = wounded_3
		}
	}

	option = {
		name = war_of_the_rohirrim.0319.a
		death = {
			death_reason = death_duel
			killer = scope:mountainfather
		}
	}
}

# Wulf Hera Marriage Decision - Holding out for Hera
war_of_the_rohirrim.0320 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0320.t
	desc =  war_of_the_rohirrim.0320.desc
	theme = love
	
	left_portrait = {
		character = root
		animation = map_love
	}

	right_portrait = {
		character = scope:hera
		animation = hunting_falcon
	}

	override_background = {
		reference = wilderness
	}

	immediate = {
		hidden_effect = {
			character:lineofmorcad3sister = {
				remove_trait = cannot_marry
			}
			character:linethorne7 = {
				remove_trait = cannot_marry
			}
			character:linefrigad7sister = {
				remove_trait = cannot_marry
			}
		}
		character:herahelm = {
			save_scope_as = hera
		}
	}

	option = {
		name = war_of_the_rohirrim.0320.a
		#add_trait = cannot_marry
	}

	after = {
		remove_character_flag = decision_wulf_marriage_pursuing_goal
	}
}

# Wulf Dunlending Marriage Decision - Initial
war_of_the_rohirrim.0330 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0330.t
	desc =  war_of_the_rohirrim.0330.desc
	theme = martial
	
	left_portrait = {
		character = root
		animation = war_attacker
	}

	right_portrait = {
		character = scope:eira
		animation = toast_goblet
	}

	lower_left_portrait = scope:ansovald
	lower_center_portrait = scope:brina
	lower_right_portrait = scope:haed

	override_background = {
		reference = fp1_viking_feast
	}

	immediate = {
		character:linefrigad6 = {
			save_scope_as = eira
		}
		character:linefrigad7 = {
			save_scope_as = ansovald
		}
		character:linefrigad7sister = {
			save_scope_as = brina
		}
		character:linemeoridh3 = {
			save_scope_as = haed
		}
	}

	option = {
		name = war_of_the_rohirrim.0330.a
		character:linefrigad7 = {
			random_character_war = {
				limit = {
					primary_defender = scope:haed
				}
				add_attacker = root
			}
		}
		trigger_event = {
			id = war_of_the_rohirrim.0331
			days = 7
		}
	}
}

# Wulf Dunlending Marriage Decision - Ongoing war maintenance checks
war_of_the_rohirrim.0331 = {
	hidden = yes
	scope = none
	
	immediate = {
		if = { # If I'm still in a war alongside Pedrogh, check again in a week.
			limit = { any_war_ally = { this = scope:ansovald } }
			trigger_event = {
				id = war_of_the_rohirrim.0331
				days = 7
			}
		}
		else_if = { # If wars is over and Ansovald has the counties in his realm, trigger success event
			limit = {
				scope:ansovald = {
					any_realm_county = {
						OR = {
							this = title:c_riverwatch
							this = title:c_isengard
						}
					}
				}
			}
			trigger_event = war_of_the_rohirrim.0332
		}
		else = { # Otherwise trigger failure event
			trigger_event = war_of_the_rohirrim.0333
		}
	}
}

# Wulf Dunlending Marriage Decision - Success
war_of_the_rohirrim.0332 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0332.t
	desc =  war_of_the_rohirrim.0332.desc
	theme = marriage
	
	left_portrait = {
		character = root
		animation = celebrate_axe
	}

	right_portrait = {
		character = scope:brina
		animation = personality_content
	}

	lower_left_portrait = scope:ansovald
	lower_center_portrait = scope:haed
	lower_right_portrait = scope:eira

	override_background = {
		reference = fp1_viking_feast
	}

	immediate = {
		scope:haed = {
			if = {
				limit = {
					is_alive = yes
				}
				hidden_effect = {
					add_trait = wounded_3
				}
				death = {
					death_reason = death_decapitated
					killer = root
				}
			}
		}
		scope:ansovald = {
			if = {
				limit = {
					any_realm_county = {
						this = title:c_isengard
					}
				}
				create_title_and_vassal_change = {
					type = granted
					save_scope_as = change
				}
				title:c_isengard = {
					change_title_holder = {
						holder = root
						change = scope:change
					}
				}
				title:d_isengard = {
					change_title_holder = {
						holder = root
						change = scope:change
					}
				}
				resolve_title_and_vassal_change = scope:change
			}
		}
		set_realm_capital = title:c_isengard
	}

	option = { # Marry her and secure the alliance
		name = war_of_the_rohirrim.0332.a
		trigger = {
			is_married = no
			is_betrothed = no
		}
		marry = scope:brina
		hidden_effect = {
			character:lineofmorcad3sister = {
				remove_trait = cannot_marry
			}
			character:linethorne7 = {
				remove_trait = cannot_marry
			}
			character:linefrigad7sister = {
				remove_trait = cannot_marry
			}
			character:herahelm = {
				remove_trait = cannot_marry
			}
			character:lineoffreca3 = {
				remove_trait = cannot_marry
			}
		}
		custom_tooltip = {
			text = war_of_the_rohirrim.0332.a.effect
			create_alliance = {			
				target = scope:ansovald	
				allied_through_owner = root
				allied_through_target = scope:brina
			}
		}
		set_relation_friend = { reason = friend_common_ground target = scope:eira }
	}

	after = {
		remove_character_flag = decision_wulf_marriage_pursuing_goal
	}
}

# Wulf Dunlending Marriage Decision - Failure
war_of_the_rohirrim.0333 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0333.t
	desc =  war_of_the_rohirrim.0333.desc
	theme = diplomacy
	
	left_portrait = {
		character = root
		animation = war_over_loss
	}

	right_portrait = {
		character = scope:eira
		animation = worry
	}

	lower_center_portrait = scope:brina

	override_background = {
		reference = throne_room_tribal
	}

	option = { # Well shit.
		name = war_of_the_rohirrim.0333.a
		scope:eira = {
			add_opinion = {
				target = root
				modifier = disappointed_opinion
				opinion = -20
			}
		}
		hidden_effect = {
			scope:brina = {
				remove_trait = cannot_marry
			}
		}
		scope:haed = {
			set_relation_grudge = root
			set_relation_grudge = scope:ansovald
			add_opinion = {
				target = root
				modifier = outraged_opinion
				opinion = -30
			}
		}
	}

	after = {
		remove_character_flag = decision_wulf_marriage_pursuing_goal
	}

}

# Wulf Rohan Marriage Decision - Initial
war_of_the_rohirrim.0340 = {
	content_source = realms_dlc
	type = character_event
	title = war_of_the_rohirrim.0340.t
	desc = war_of_the_rohirrim.0340.desc
	theme = diplomacy
	
	left_portrait = {
		character = root
		animation = personality_dishonorable
	}

	right_portrait = {
		character = scope:thorne
		animation = personality_cynical
	}

	override_background = {
		reference = on_river
	}

	immediate = {
		character:linethorne5 = {
			save_scope_as = thorne
		}
		character:linethorne7 = {
			save_scope_as = leofwyn
		}
	}

	option = {
		name = war_of_the_rohirrim.0340.a
		trigger_event = war_of_the_rohirrim.0341
	}
}

# Wulf Rohan Marriage Decision - Negotiation - Main Window
war_of_the_rohirrim.0341 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0341.t
	desc =  war_of_the_rohirrim.0341.desc
	theme = diplomacy
	
	left_portrait = {
		character = root
		animation = debating
	}

	right_portrait = {
		character = scope:thorne
		animation = scheme
	}

	override_background = {
		reference = on_river
	}

	option = {
		name = war_of_the_rohirrim.0341.a
		trigger = {
			is_ai = no
		}
		custom_tooltip = war_of_the_rohirrim.0341.a.effect
		trigger_event = war_of_the_rohirrim.0342
	}

	option = {
		name = war_of_the_rohirrim.0341.b
		trigger = {
			is_ai = no
		}
		add_internal_flag = special
		wulf_negotiation_duel_effect = yes
	}

	option = {
		name = war_of_the_rohirrim.0341.b
		trigger = {
			is_ai = yes
		}
		random = {
			chance = 80
			add_character_flag = wulf_rohan_promise_land
		}
		random = {
			chance = 40
			add_character_flag = wulf_rohan_promise_hook
		}
		random = {
			chance = 10
			add_character_flag = wulf_rohan_promise_co_monarch
		}
		trigger_event = war_of_the_rohirrim.0343
	}
}

# Wulf Rohan Marriage Decision - Negotiation - Terms Menu
war_of_the_rohirrim.0342 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0342.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					NOT = { exists = var:wulf_negotiation_choice }
				}
				desc = war_of_the_rohirrim.0342.desc
			}
			random_valid = {
				triggered_desc = {
					trigger = {
						is_reconsidering_negotion = yes
					}
					desc = war_of_the_rohirrim.0342.desc.take_your_time.1
				}
				triggered_desc = {
					trigger = {
						is_reconsidering_negotion = yes
					}
					desc = war_of_the_rohirrim.0342.desc.take_your_time.2
				}
				triggered_desc = {
					trigger = {
						is_reconsidering_negotion = yes
					}
					desc = war_of_the_rohirrim.0342.desc.take_your_time.3
				}
				triggered_desc = {
					trigger = {
						is_reconsidering_negotion = yes
					}
					desc = war_of_the_rohirrim.0342.desc.take_your_time.4
				}
				triggered_desc = {
					trigger = {
						is_reconsidering_negotion = yes
					}
					desc = war_of_the_rohirrim.0342.desc.take_your_time.5
				}
			}
			triggered_desc = {
				trigger = {
					var:wulf_negotiation_choice = 1
					has_character_flag = wulf_rohan_promise_pat_marriage
				}
				desc = war_of_the_rohirrim.0342.desc.suggested_pat_mar
			}
			triggered_desc = {
				trigger = {
					var:wulf_negotiation_choice = 2
					has_character_flag = wulf_rohan_promise_mat_marriage
				}
				desc = war_of_the_rohirrim.0342.desc.suggested_mat_mar
			}
			triggered_desc = {
				trigger = {
					var:wulf_negotiation_choice = 3
					has_character_flag = wulf_rohan_promise_land
				}
				desc = war_of_the_rohirrim.0342.desc.suggested_land
			}
			triggered_desc = {
				trigger = {
					var:wulf_negotiation_choice = 4
					has_character_flag = wulf_rohan_promise_vassal_contract
				}
				desc = war_of_the_rohirrim.0342.desc.suggested_vassal_contract
			}
			triggered_desc = {
				trigger = {
					var:wulf_negotiation_choice = 5
					has_character_flag = wulf_rohan_promise_hook
				}
				desc = war_of_the_rohirrim.0342.desc.suggested_hook
			}
			triggered_desc = {
				trigger = {
					var:wulf_negotiation_choice = 6
					has_character_flag = wulf_rohan_promise_co_monarch
				}
				desc = war_of_the_rohirrim.0342.desc.suggested_co_monarch
			}
			triggered_desc = {
				trigger = {
					var:wulf_negotiation_choice = 7
					has_character_flag = wulf_rohan_promise_independence
				}
				desc = war_of_the_rohirrim.0342.desc.suggested_independence
			}
			desc = war_of_the_rohirrim.0342.desc
		}
	}
	theme = diplomacy
	
	left_portrait = {
		character = root
		animation = debating
	}

	right_portrait = {
		character = scope:thorne
		animation = scheme
	}

	lower_center_portrait = scope:leofwyn

	override_background = {
		reference = on_river
	}

	option = { # Patrilineal Marriage to his Daughter
		trigger = {
			is_married = no
			is_betrothed = no
			custom_description = {
				text = war_of_the_rohirrim_mat_marriage_promised
				NOT = { has_character_flag = wulf_rohan_promise_mat_marriage }
			}
			custom_description = {
				text = war_of_the_rohirrim_hera_marriage_promised
				NOT = { has_character_flag = wulf_hera_marriage_opportunity_taken }
			}
		}
		show_as_unavailable = {
			OR = {
				is_married = yes
				is_betrothed = yes
				has_character_flag = wulf_rohan_promise_mat_marriage
				has_character_flag = wulf_hera_marriage_opportunity_taken
			}
		}
		name = {
			trigger = { NOT = { has_character_flag = wulf_rohan_promise_pat_marriage } }
			text = war_of_the_rohirrim.0342.a
		}
		name = {
			trigger = { has_character_flag = wulf_rohan_promise_pat_marriage }
			text = war_of_the_rohirrim.0342.a.cancel
		}
		if = {
			limit = {
				has_character_flag = wulf_rohan_promise_pat_marriage
			}
			custom_tooltip = war_of_the_rohirrim.0342.a.effect.cancel
		}
		else = {
			custom_tooltip = war_of_the_rohirrim.0342.a.effect
		}
		custom_tooltip = war_of_the_rohirrim.0342.click_to_see_updated_odds
		trigger_event = war_of_the_rohirrim.0342
		if = {
			limit = {
				has_character_flag = wulf_rohan_promise_pat_marriage
			}
			remove_character_flag = wulf_rohan_promise_pat_marriage
		}
		else = {
			add_character_flag = wulf_rohan_promise_pat_marriage
		}
		set_variable = {
			name = wulf_negotiation_choice
			value = 1
		}
	}

	option = {
		trigger = {
			is_married = no
			is_betrothed = no
			custom_description = {
				text = war_of_the_rohirrim_pat_marriage_promised
				NOT = { has_character_flag = wulf_rohan_promise_pat_marriage }
			}
			custom_description = {
				text = war_of_the_rohirrim_hera_marriage_promised
				NOT = { has_character_flag = wulf_hera_marriage_opportunity_taken }
			}
		}
		show_as_unavailable = {
			OR = {
				is_married = yes
				is_betrothed = yes
				has_character_flag = wulf_rohan_promise_pat_marriage
				has_character_flag = wulf_hera_marriage_opportunity_taken
			}
		}
		name = {
			trigger = { NOT = { has_character_flag = wulf_rohan_promise_mat_marriage } }
			text = war_of_the_rohirrim.0342.b
		}
		name = {
			trigger = { has_character_flag = wulf_rohan_promise_mat_marriage }
			text = war_of_the_rohirrim.0342.b.cancel
		}
		if = {
			limit = {
				has_character_flag = wulf_rohan_promise_mat_marriage
			}
			custom_tooltip = war_of_the_rohirrim.0342.b.effect.cancel
		}
		else = {
			custom_tooltip = war_of_the_rohirrim.0342.b.effect
		}
		custom_tooltip = war_of_the_rohirrim.0342.click_to_see_updated_odds
		trigger_event = war_of_the_rohirrim.0342
		if = {
			limit = {
				has_character_flag = wulf_rohan_promise_mat_marriage
			}
			remove_character_flag = wulf_rohan_promise_mat_marriage
		}
		else = {
			add_character_flag = wulf_rohan_promise_mat_marriage
		}
		set_variable = {
			name = wulf_negotiation_choice
			value = 2
		}
	}

	option = {
		name = {
			trigger = { NOT = { has_character_flag = wulf_rohan_promise_land } }
			text = war_of_the_rohirrim.0342.c
		}
		name = {
			trigger = { has_character_flag = wulf_rohan_promise_land }
			text = war_of_the_rohirrim.0342.c.cancel
		}
		if = {
			limit = {
				has_character_flag = wulf_rohan_promise_land
			}
			custom_tooltip = war_of_the_rohirrim.0342.c.effect.cancel
		}
		else = {
			custom_tooltip = war_of_the_rohirrim.0342.c.effect
		}
		custom_tooltip = war_of_the_rohirrim.0342.click_to_see_updated_odds
		trigger_event = war_of_the_rohirrim.0342
		if = {
			limit = {
				has_character_flag = wulf_rohan_promise_land
			}
			remove_character_flag = wulf_rohan_promise_land
		}
		else = {
			add_character_flag = wulf_rohan_promise_land
		}
		set_variable = {
			name = wulf_negotiation_choice
			value = 3
		}
	}

	option = {
		trigger = {
			custom_description = {
				text = war_of_the_rohirrim_independence_promised
				NOT = { has_character_flag = wulf_rohan_promise_independence }
			}
		}
		show_as_unavailable = {
			has_character_flag = wulf_rohan_promise_independence
		}
		name = {
			trigger = { NOT = { has_character_flag = wulf_rohan_promise_vassal_contract } }
			text = war_of_the_rohirrim.0342.d
		}
		name = {
			trigger = { has_character_flag = wulf_rohan_promise_vassal_contract }
			text = war_of_the_rohirrim.0342.d.cancel
		}
		if = {
			limit = {
				has_character_flag = wulf_rohan_promise_vassal_contract
			}
			custom_tooltip = war_of_the_rohirrim.0342.d.effect.cancel
		}
		else = {
			custom_tooltip = war_of_the_rohirrim.0342.d.effect
		}
		custom_tooltip = war_of_the_rohirrim.0342.click_to_see_updated_odds
		trigger_event = war_of_the_rohirrim.0342
		if = {
			limit = {
				has_character_flag = wulf_rohan_promise_vassal_contract
			}
			remove_character_flag = wulf_rohan_promise_vassal_contract
		}
		else = {
			add_character_flag = wulf_rohan_promise_vassal_contract
		}
		set_variable = {
			name = wulf_negotiation_choice
			value = 4
		}
	}

	option = {
		name = {
			trigger = { NOT = { has_character_flag = wulf_rohan_promise_hook } }
			text = war_of_the_rohirrim.0342.e
		}
		name = {
			trigger = { has_character_flag = wulf_rohan_promise_hook }
			text = war_of_the_rohirrim.0342.e.cancel
		}
		if = {
			limit = {
				has_character_flag = wulf_rohan_promise_hook
			}
			custom_tooltip = war_of_the_rohirrim.0342.e.effect.cancel
		}
		else = {
			custom_tooltip = war_of_the_rohirrim.0342.e.effect
		}
		custom_tooltip = war_of_the_rohirrim.0342.click_to_see_updated_odds
		trigger_event = war_of_the_rohirrim.0342
		if = {
			limit = {
				has_character_flag = wulf_rohan_promise_hook
			}
			remove_character_flag = wulf_rohan_promise_hook
		}
		else = {
			add_character_flag = wulf_rohan_promise_hook
		}
		set_variable = {
			name = wulf_negotiation_choice
			value = 5
		}
	}

	option = {
		trigger = {
			custom_description = {
				text = war_of_the_rohirrim_independence_promised
				NOT = { has_character_flag = wulf_rohan_promise_independence }
			}
		}
		show_as_unavailable = {
			has_character_flag = wulf_rohan_promise_independence
		}
		name = {
			trigger = { NOT = { has_character_flag = wulf_rohan_promise_co_monarch } }
			text = war_of_the_rohirrim.0342.f
		}
		name = {
			trigger = { has_character_flag = wulf_rohan_promise_co_monarch }
			text = war_of_the_rohirrim.0342.f.cancel
		}
		if = {
			limit = {
				has_character_flag = wulf_rohan_promise_co_monarch
			}
			custom_tooltip = war_of_the_rohirrim.0342.f.effect.cancel
		}
		else = {
			custom_tooltip = war_of_the_rohirrim.0342.f.effect
		}
		custom_tooltip = war_of_the_rohirrim.0342.click_to_see_updated_odds
		trigger_event = war_of_the_rohirrim.0342
		if = {
			limit = {
				has_character_flag = wulf_rohan_promise_co_monarch
			}
			remove_character_flag = wulf_rohan_promise_co_monarch
		}
		else = {
			add_character_flag = wulf_rohan_promise_co_monarch
		}
		set_variable = {
			name = wulf_negotiation_choice
			value = 6
		}
	}

	option = {
		trigger = {
			custom_description = {
				text = war_of_the_rohirrim_vassal_contract_promised
				NOT = { has_character_flag = wulf_rohan_promise_vassal_contract }
			}
			custom_description = {
				text = war_of_the_rohirrim_co_monarch_promised
				NOT = { has_character_flag = wulf_rohan_promise_co_monarch }
			}
		}
		show_as_unavailable = {
			OR = {
				has_character_flag = wulf_rohan_promise_vassal_contract
				has_character_flag = wulf_rohan_promise_co_monarch
			}
		}
		name = {
			trigger = { NOT = { has_character_flag = wulf_rohan_promise_independence } }
			text = war_of_the_rohirrim.0342.g
		}
		name = {
			trigger = { has_character_flag = wulf_rohan_promise_independence }
			text = war_of_the_rohirrim.0342.g.cancel
		}
		if = {
			limit = {
				has_character_flag = wulf_rohan_promise_independence
			}
			custom_tooltip = war_of_the_rohirrim.0342.g.effect.cancel
		}
		else = {
			custom_tooltip = war_of_the_rohirrim.0342.g.effect
		}
		custom_tooltip = war_of_the_rohirrim.0342.click_to_see_updated_odds
		trigger_event = war_of_the_rohirrim.0342
		if = {
			limit = {
				has_character_flag = wulf_rohan_promise_independence
			}
			remove_character_flag = wulf_rohan_promise_independence
		}
		else = {
			add_character_flag = wulf_rohan_promise_independence
		}
		set_variable = {
			name = wulf_negotiation_choice
			value = 7
		}
	}

	option = {
		name = war_of_the_rohirrim.0342.h
		custom_tooltip = war_of_the_rohirrim.0342.final_deal
		show_as_tooltip = {
			wulf_negotiation_duel_effect = yes
		}
		trigger_event = war_of_the_rohirrim.0341
		add_internal_flag = special
		set_variable = {
			name = wulf_negotiation_choice
			value = 8
		}
	}
}

# Wulf Rohan Marriage Decision - An Agreement Made
war_of_the_rohirrim.0343 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0343.t
	desc =  war_of_the_rohirrim.0343.desc
	theme = diplomacy
	
	left_portrait = {
		character = root
		animation = personality_bold
	}

	right_portrait = {
		character = scope:thorne
		animation = personality_greedy
	}

	override_background = {
		reference = on_river
	}

	option = {
		name = war_of_the_rohirrim.0343.a
		if = {
			limit = {
				OR = {
					has_character_flag = wulf_rohan_promise_pat_marriage
					has_character_flag = wulf_rohan_promise_mat_marriage
				}
			}
			add_trait = cannot_marry
		}
		custom_tooltip = war_of_the_rohirrim.0341.success.effect
			if = {
				limit = {
					has_character_flag = wulf_rohan_promise_pat_marriage
				}
				custom_tooltip = war_of_the_rohirrim.0342.a.effect
			}
			if = {
				limit = {
					has_character_flag = wulf_rohan_promise_mat_marriage
				}
				custom_tooltip = war_of_the_rohirrim.0342.b.effect
			}
			if = {
				limit = {
					has_character_flag = wulf_rohan_promise_land
				}
				custom_tooltip = war_of_the_rohirrim.0342.c.effect
			}
			if = {
				limit = {
					has_character_flag = wulf_rohan_promise_vassal_contract
				}
				custom_tooltip = war_of_the_rohirrim.0342.d.effect
			}
			if = {
				limit = {
					has_character_flag = wulf_rohan_promise_hook
				}
				custom_tooltip = war_of_the_rohirrim.0342.e.effect
			}
			if = {
				limit = {
					has_character_flag = wulf_rohan_promise_co_monarch
				}
				custom_tooltip = war_of_the_rohirrim.0342.f.effect
			}
			if = {
				limit = {
					has_character_flag = wulf_rohan_promise_independence
				}
				custom_tooltip = war_of_the_rohirrim.0342.g.effect
			}
			if = {
				limit = {
					NOR = {
						has_character_flag = wulf_rohan_promise_pat_marriage
						has_character_flag = wulf_rohan_promise_mat_marriage
						has_character_flag = wulf_rohan_promise_land
						has_character_flag = wulf_rohan_promise_vassal_contract
						has_character_flag = wulf_rohan_promise_hook
						has_character_flag = wulf_rohan_promise_co_monarch
						has_character_flag = wulf_rohan_promise_independence
					}
				}
				custom_tooltip = war_of_the_rohirrim.0342.no_promises
			}
	}

	after = {
		remove_character_flag = decision_wulf_marriage_pursuing_goal
	}

}

# Wulf Rohan Marriage Decision - No Agreement
war_of_the_rohirrim.0344 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0344.t
	desc =  war_of_the_rohirrim.0344.desc
	theme = diplomacy
	
	left_portrait = {
		character = root
		animation = anger
	}

	right_portrait = {
		character = scope:thorne
		animation = dismissal
	}

	override_background = {
		reference = on_river
	}

	immediate = {
		remove_character_flag = wulf_rohan_promise_pat_marriage
		remove_character_flag = wulf_rohan_promise_mat_marriage
		remove_character_flag = wulf_rohan_promise_land
		remove_character_flag = wulf_rohan_promise_vassal_contract
		remove_character_flag = wulf_rohan_promise_hook
		remove_character_flag = wulf_rohan_promise_co_monarch
		remove_character_flag = wulf_rohan_promise_independence
	}

	option = {
		name = war_of_the_rohirrim.0344.a
		custom_tooltip = war_of_the_rohirrim.0344.a.effect
		custom_tooltip = war_of_the_rohirrim.0344.a.effect2
		remove_character_flag = decision_wulf_marriage_pursuing_goal
		hidden_effect = {
			random = {
				chance = 50
				trigger_event = war_of_the_rohirrim.0349
			}
		}
	}

	option = {
		name = war_of_the_rohirrim.0344.b
		add_internal_flag = dangerous
		duel = {
			skill = prowess
			target = scope:thorne
			50 = {
				desc = war_of_the_rohirrim.0344.b.success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				show_as_tooltip = {
					random = {
						chance = 33
						increase_wounds_effect = { REASON = fight }
					}
					scope:thorne = {
						death = {
							death_reason = death_murder
							killer = root
						}
					}
				}
				trigger_event = war_of_the_rohirrim.0345
			}
			50 = {
				desc = war_of_the_rohirrim.0344.b.failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1.5
					min = -49
				}
				show_as_tooltip = {
					scope:thorne = {
						random = {
							chance = 33
							increase_wounds_effect = { REASON = fight }
						}
					}
					death = {
						death_reason = death_duel
						killer = scope:thorne
					}
				}
				trigger_event = war_of_the_rohirrim.0346
			}
		}
	}

}

# Wulf Rohan Marriage Decision - Thorne Murdered
war_of_the_rohirrim.0345 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0345.t
	desc =  war_of_the_rohirrim.0345.desc
	theme = diplomacy
	
	left_portrait = {
		character = root
		animation = aggressive_axe
	}

	right_portrait = {
		character = scope:thorne
		animation = severelywounded
	}

	override_background = {
		reference = on_river
	}

	immediate = {
		scope:thorne = {
			add_trait = wounded_3
		}
		random = {
			chance = 33
			increase_wounds_effect = { REASON = fight }
		}
	}

	option = {
		name = war_of_the_rohirrim.0345.a
		scope:thorne = {
			death = {
				death_reason = death_murder
				killer = root
			}
		}
	}

	after = {
		remove_character_flag = decision_wulf_marriage_pursuing_goal
	}

}

# Wulf Rohan Marriage Decision - Wulf Killed by Thorne
war_of_the_rohirrim.0346 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0346.t
	desc =  war_of_the_rohirrim.0346.desc
	theme = death
	
	left_portrait = {
		character = root
		animation = severelywounded
	}

	right_portrait = {
		character = scope:thorne
		animation = hunting_knife_start
	}

	override_background = {
		reference = on_river
	}

	immediate = {
		add_trait = wounded_3
		scope:thorne = {
			random = {
				chance = 33
				increase_wounds_effect = { REASON = fight }
			}
		}
	}

	option = {
		name = war_of_the_rohirrim.0346.a
		death = {
			death_reason = death_duel
			killer = scope:thorne
		}
	}

	after = {
		remove_character_flag = decision_wulf_marriage_pursuing_goal
	}

}

# Wulf Rohan Marriage Decision - Make Thorne Join War
war_of_the_rohirrim.0347 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0347.t
	desc =  war_of_the_rohirrim.0347.desc
	theme = martial
	
	left_portrait = {
		character = root
		animation = aggressive_axe
	}

	right_portrait = {
		character = scope:defender
		animation = anger
	}

	lower_center_portrait = scope:thorne

	immediate = {
		character:linethorne5 = {
			save_scope_as = thorne
		}
	}

	option = {
		name = war_of_the_rohirrim.0347.a
		every_character_war = {
			limit = {
				primary_defender = title:k_rohan.holder
			}
			add_attacker = character:linethorne5
		}
	}
}

# Wulf Rohan Marriage Decision - Enforce Terms after War
war_of_the_rohirrim.0348 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0348.t
	desc =  war_of_the_rohirrim.0348.desc
	theme = realm
	
	left_portrait = {
		character = root
		animation = debating
	}

	right_portrait = {
		character = character:linethorne5
		animation = schadenfreude
	}

	trigger = { character:linethorne5 = { is_alive= yes} }

	option = {
		name = war_of_the_rohirrim.0348.a
		wulf_rohan_victory_thorne_commitments_effect = yes
	}

}

# Wulf Rohan Marriage Decision - Failed Negotiation - Thorne Lives and Tells the King
war_of_the_rohirrim.0349 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0349.t
	desc =  war_of_the_rohirrim.0349.desc
	theme = realm
	
	left_portrait = {
		character = root
		animation = personality_bold
	}

	right_portrait = {
		character = character:linethorne5
		animation = personality_honorable
	}

	option = {
		name = war_of_the_rohirrim.0349.a
		add_character_modifier = {
			modifier = helm_bracing_for_war_character_modifier
		}
		character:linethorne5 = {
			add_hook = {
				type = favor_hook
				target = root
			}
		}
	}

}

# Wulf Unite Dunlendings Decision - Confirmation Event
war_of_the_rohirrim.0350 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0350.t
	desc =  war_of_the_rohirrim.0350.desc
	theme = realm
	
	left_portrait = {
		character = root
		animation = personality_bold
	}

	option = {
		name = war_of_the_rohirrim.0350.a
	}

	after = {
		trigger_event = {
			id = war_of_the_rohirrim.0371
			days = { 30 210 }
		}
		if = {
			limit = {
				current_month = 1
			}
			trigger_event = {
				id = long_winter.0001
				months = 7
			}
		}
		else_if = {
			limit = {
				current_month = 2
			}
			trigger_event = {
				id = long_winter.0001
				months = 6
			}
		}
		else_if = {
			limit = {
				current_month = 3
			}
			trigger_event = {
				id = long_winter.0001
				months = 5
			}
		}
		else_if = {
			limit = {
				current_month = 4
			}
			trigger_event = {
				id = long_winter.0001
				months = 4
			}
		}
		else_if = {
			limit = {
				current_month = 5
			}
			trigger_event = {
				id = long_winter.0001
				months = 3
			}
		}
		else_if = {
			limit = {
				current_month = 6
			}
			trigger_event = {
				id = long_winter.0001
				months = 2
			}
		}
		else_if = {
			limit = {
				current_month = 7
			}
			trigger_event = {
				id = long_winter.0001
				months = 1
			}
		}
		else_if = {
			limit = {
				current_month = 8
			}
			trigger_event = {
				id = long_winter.0001
				months = 12
			}
		}
		else_if = {
			limit = {
				current_month = 9
			}
			trigger_event = {
				id = long_winter.0001
				months = 11
			}
		}
		else_if = {
			limit = {
				current_month = 10
			}
			trigger_event = {
				id = long_winter.0001
				months = 10
			}
		}
		else_if = {
			limit = {
				current_month = 11
			}
			trigger_event = {
				id = long_winter.0001
				months = 9
			}
		}
		else = {
			trigger_event = {
				id = long_winter.0001
				months = 8
			}
		}
	}

}

# Wulf Oathsworn Decision - Follow on event
war_of_the_rohirrim.0360 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0360.t
	desc =  war_of_the_rohirrim.0360.desc
	theme = martial
	
	left_portrait = {
		character = root
		animation = war_over_win
	}

	right_portrait = {
		character = scope:represented_vassal
		animation = marshal_axe
	}

	override_background = {
		reference = fp1_runestone
	}

	override_effect_2d = {
		reference = smoke
	}

	immediate = {
		ordered_vassal = {
			limit = {
				culture = {
					has_cultural_pillar = heritage_daen_lintis
				}
				OR = {
					has_title = title:d_dunlandfells
					has_title = title:d_dunfearan
					has_title = title:d_dathabha
				}
			}
			order_by = prowess
			position = 0
			save_scope_as = represented_vassal
		}
		set_variable = {
			name = oathsworn_composition_logic
			value = 0
		}
		if = {
			limit = {
				any_vassal = {
					culture = {
						has_cultural_pillar = heritage_daen_lintis
					}
					has_title = title:d_dunlandfells
				}
			}
			if = {
				limit = {
					title:d_dunlandfells.holder = {
						opinion = {
							target = root
							value < 0
						}
					}
				}
				change_variable = {
					name = oathsworn_composition_logic
					add = 100
				}
			}
			else_if = {
				limit = {
					title:d_dunlandfells.holder = {
						opinion = {
							target = root
							value < 50
						}
					}
				}
				change_variable = {
					name = oathsworn_composition_logic
					add = 200
				}
			}
			else = {
				change_variable = {
					name = oathsworn_composition_logic
					add = 300
				}
			}
		}
		if = {
			limit = {
				any_vassal = {
					culture = {
						has_cultural_pillar = heritage_daen_lintis
					}
					has_title = title:d_dunfearan
				}
			}
			if = {
				limit = {
					title:d_dunfearan.holder = {
						opinion = {
							target = root
							value < 0
						}
					}
				}
				change_variable = {
					name = oathsworn_composition_logic
					add = 10
				}
			}
			else_if = {
				limit = {
					title:d_dunfearan.holder = {
						opinion = {
							target = root
							value < 50
						}
					}
				}
				change_variable = {
					name = oathsworn_composition_logic
					add = 20
				}
			}
			else = {
				change_variable = {
					name = oathsworn_composition_logic
					add = 30
				}
			}
		}
		if = {
			limit = {
				any_vassal = {
					culture = {
						has_cultural_pillar = heritage_daen_lintis
					}
					has_title = title:d_dathabha
				}
			}
			if = {
				limit = {
					title:d_dathabha.holder = {
						opinion = {
							target = root
							value < 0
						}
					}
				}
				change_variable = {
					name = oathsworn_composition_logic
					add = 1
				}
			}
			else_if = {
				limit = {
					title:d_dathabha.holder = {
						opinion = {
							target = root
							value < 50
						}
					}
				}
				change_variable = {
					name = oathsworn_composition_logic
					add = 2
				}
			}
			else = {
				change_variable = {
					name = oathsworn_composition_logic
					add = 3
				}
			}
		}
	}

	option = {
		name = war_of_the_rohirrim.0348.a
		if = {
			limit = {
				var:oathsworn_composition_logic = 1
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_outriders
					stacks = 1
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 2
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_outriders
					stacks = 2
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 3
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_outriders
					stacks = 3
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 10
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 1
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 11
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 1
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 12
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 2
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 13
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 3
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 20
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 2
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 21
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 1
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 22
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 2
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 23
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 3
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 30
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 3
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 31
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 1
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 32
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 2
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 33
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 3
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 100
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 1
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 101
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 1
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 102
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 2
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 103
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 3
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 110
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 1
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 111
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 1
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 112
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 2
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 113
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 3
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 120
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 2
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 121
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 1
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 122
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 2
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 123
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 3
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 130
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 3
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 131
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 1
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 132
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 2
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 133
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 3
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 200
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 2
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 201
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 1
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 202
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 2
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 203
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 3
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 210
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 1
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 211
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 1
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 212
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 2
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 213
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 3
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 220
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 2
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 221
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 1
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 222
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 2
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 223
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 3
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 230
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 3
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 231
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 1
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 232
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 2
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 233
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 3
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 300
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 3
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 301
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 1
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 302
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 2
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 303
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 3
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 310
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 1
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 311
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 1
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 312
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 2
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 313
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 1
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 3
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 320
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 2
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 321
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 1
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 322
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 2
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 323
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 2
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 3
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 330
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 3
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 331
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 1
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 332
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 2
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		else_if = {
			limit = {
				var:oathsworn_composition_logic = 333
			}
			spawn_army = {
				men_at_arms = {
					type = dunlending_huscarl
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_axe_hunters
					stacks = 3
				}
				men_at_arms = {
					type = dunlending_outriders
					stacks = 3
				}
				levies = 0
				inheritable = yes
				location = capital_province
				uses_supply = no
				name = wulfs_oathsworn
			}
		}
		if = {
			limit = {
				any_vassal = {
					culture = {
						has_cultural_pillar = heritage_daen_lintis
					}
					has_title = title:d_dunlandfells
				}
			}
			if = {
				limit = {
					title:d_dunlandfells.holder = {
						opinion = {
							target = root
							value < 0
						}
					}
				}
				custom_tooltip = war_of_the_rohirrim.0360.huscarl1
			}
			else_if = {
				limit = {
					title:d_dunlandfells.holder = {
						opinion = {
							target = root
							value < 50
						}
					}
				}
				custom_tooltip = war_of_the_rohirrim.0360.huscarl2
			}
			else = {
				custom_tooltip = war_of_the_rohirrim.0360.huscarl3
			}
		}
		if = {
			limit = {
				any_vassal = {
					culture = {
						has_cultural_pillar = heritage_daen_lintis
					}
					has_title = title:d_dunfearan
				}
			}
			if = {
				limit = {
					title:d_dunfearan.holder = {
						opinion = {
							target = root
							value < 0
						}
					}
				}
				custom_tooltip = war_of_the_rohirrim.0360.axemen1
			}
			else_if = {
				limit = {
					title:d_dunfearan.holder = {
						opinion = {
							target = root
							value < 50
						}
					}
				}
				custom_tooltip = war_of_the_rohirrim.0360.axemen2
			}
			else = {
				custom_tooltip = war_of_the_rohirrim.0360.axemen3
			}
		}
		if = {
			limit = {
				any_vassal = {
					culture = {
						has_cultural_pillar = heritage_daen_lintis
					}
					has_title = title:d_dathabha
				}
			}
			if = {
				limit = {
					title:d_dathabha.holder = {
						opinion = {
							target = root
							value < 0
						}
					}
				}
				custom_tooltip = war_of_the_rohirrim.0360.outriders1
			}
			else_if = {
				limit = {
					title:d_dathabha.holder = {
						opinion = {
							target = root
							value < 50
						}
					}
				}
				custom_tooltip = war_of_the_rohirrim.0360.outriders2
			}
			else = {
				custom_tooltip = war_of_the_rohirrim.0360.outriders3
			}
		}
	}

	after = {
		remove_variable = oathsworn_composition_logic
	}

}

# Wulf Post Unification Random Events - Southrons on the Isen
war_of_the_rohirrim.0370 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0370.t
	desc =  war_of_the_rohirrim.0370.desc
	theme = realm
	
	left_portrait = {
		character = root
		animation = shock
	}

	right_portrait = {
		character = scope:mumak_tamer
		animation = marshal
	}

	override_background = {
		reference = on_river
	}

	immediate = {
		create_character = {
			location = province:172
			template = saharan_clan_leader_character
			culture = culture:haruze
			gender_female_chance = 0
			faith = faith:faith_haruze
			save_scope_as = mumak_tamer
		}
		scope:mumak_tamer = { 
			add_character_flag = wear_armor
			add_character_flag = no_headgear
		}
	}

	option = {
		name = war_of_the_rohirrim.0370.a
		custom_tooltip = war_of_the_rohirrim.0370.a.effect
		scope:mumak_tamer = { set_employer = root }
		spawn_army = {
			men_at_arms = {
				type = abrazanim_helberdiers
				stacks = 2
			}
			men_at_arms = {
				type = corsair_warriors
				stacks = 2
			}
			men_at_arms = {
				type = haradrim_radiers
				stacks = 3
			}
			men_at_arms = {
				type = war_mumak
				stacks = 1
			}
			levies = 0
			inheritable = no
			location = capital_province
			uses_supply = no
			name = wulfs_southron_army
		}
		custom_tooltip = war_of_the_rohirrim.0370.a.detail1
		custom_tooltip = war_of_the_rohirrim.0370.a.detail2
		custom_tooltip = war_of_the_rohirrim.0370.a.detail3
		custom_tooltip = war_of_the_rohirrim.0370.a.detail4
		add_character_flag = wulf_sought_help_from_southrons
		ai_chance = {
			base = 100
		}
	}

	option = {
		name = war_of_the_rohirrim.0370.b
		custom_tooltip = war_of_the_rohirrim.0370.b.effect
		ai_chance = {
			base = 0
		}
	}

}

# Wulf Post Unification Random Events - AI Harwan Declares on Gondor
war_of_the_rohirrim.0371 = {
	hidden = yes
	scope = none
	
	immediate = {
		title:e_haradwaith.holder = {
			if = {
				limit = {
					is_ai = yes
				}
				add_character_flag = bypass_gondor_war_requirements
				execute_decision = decision_harrying_of_the_coasts
			}
		}
		character:lineoffreca3 = {
			trigger_event = {
				id = war_of_the_rohirrim.0370
				days = { 30 60 }
			}
			trigger_event = {
				id = war_of_the_rohirrim.0372
				days = { 90 120 }
			}
		}
	}
}

# Wulf Post Unification Random Events - AI Easterling Attacks Rohan
war_of_the_rohirrim.0372 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0372.t
	desc =  war_of_the_rohirrim.0372.desc
	theme = war

	left_portrait = {
		character = scope:employer
		animation = aggressive_spear
	}

	right_portrait = {
		character = title:k_rohan.holder
		animation = marshal
	}
	
	immediate = {
		title:k_rohan.holder ?= { save_scope_as = war_target }
		title:k_south_rhovanion = {
			ordered_de_jure_county = {
				limit = {
					is_wastelands = no
					culture = { has_cultural_pillar = heritage_ioriag }
					holder = { highest_held_title_tier > tier_county }
					holder = { is_at_war = no }
					holder = { is_ai = yes }
				}
				order_by = holder.current_military_strength
				holder = { save_scope_as = employer }
			}
			if = {
				limit = { NOT = { exists = scope:employer } }
				ordered_de_jure_county = {
					limit = {
						is_wastelands = no
						culture = { has_cultural_pillar = heritage_ioriag }
						holder = { highest_held_title_tier > tier_barony }
						holder = { is_at_war = no }
						holder = { is_ai = yes }
					}
					order_by = holder.current_military_strength
					holder = { save_scope_as = employer }
				}
			}
		}
		scope:employer = {
			start_war = {
				casus_belli = raid_for_captives_cb
				target = scope:war_target
				target_title = scope:war_target.primary_title
			}
			hidden_effect = {
				spawn_army = {
					levies = 2000
					men_at_arms = {
						type = easterling_kataphrakt
						stacks = 4
					}
					inheritable = yes
					location = scope:employer.location
					name = Raiders
				}
			}
		}
	}

	option = {
		name = war_of_the_rohirrim.0372.a
	}
}

# War for Rohan - Starting Event for Wulf - no Thorne Alliance
war_of_the_rohirrim.0400 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0400.t
	desc =  war_of_the_rohirrim.0400.desc
	theme = war
	
	left_portrait = {
		character = root
		animation = aggressive_axe
	}

	right_portrait = {
		character = scope:defender
		animation = anger
	}

	option = {
		name = war_of_the_rohirrim.0400.a
	}

}

# War for Rohan - Starting Event for Helm - Traitor Thorne
war_of_the_rohirrim.0401 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0401.t
	desc =  war_of_the_rohirrim.0401.desc
	theme = war
	
	left_portrait = {
		character = root
		animation = anger
	}

	right_portrait = {
		character = scope:attacker
		animation = aggressive_axe
	}
	
	lower_center_portrait = scope:thorne

	immediate = {
		character:linethorne5 = {
			save_scope_as = thorne
		}
	}

	option = {
		name = war_of_the_rohirrim.0401.a
	}

}

# War for Rohan - Starting Event for Helm - no Traitor Thorne
war_of_the_rohirrim.0402 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0402.t
	desc =  war_of_the_rohirrim.0402.desc
	theme = war
	
	left_portrait = {
		character = root
		animation = anger
	}

	right_portrait = {
		character = scope:attacker
		animation = aggressive_axe
	}

	option = {
		name = war_of_the_rohirrim.0402.a
	}

}

# War for Rohan - Repeating Event for Thorne to give chance to betray his king
war_of_the_rohirrim.0403 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0403.t
	desc =  war_of_the_rohirrim.0403.desc
	theme = martial
	
	left_portrait = {
		character = scope:attacker
		animation = aggressive_axe
	}

	right_portrait = {
		character = scope:defender
		animation = anger
	}

	lower_center_portrait = root

	trigger = {
		scope:attacker = {
			any_character_war = {
				primary_defender = title:k_rohan.holder
			}
		}
	}

	option = {
		name = war_of_the_rohirrim.0403.a
		scope:war = {
			add_attacker = root
		}
		scope:defender = {
			set_relation_grudge = root
		}
		scope:attacker = {
			trigger_event = {
				id = war_of_the_rohirrim.0404
				days = 1
			}
		}
		scope:defender = {
			trigger_event = {
				id = war_of_the_rohirrim.0405
				days = 1
			}
		}
		ai_chance = {
			base = 0
			modifier = {
				add = scope:war.attacker_war_score
			}
			modifier = {
				add = -30
			}
		}
	}

	option = {
		name = war_of_the_rohirrim.0403.b
		custom_tooltip = war_of_the_rohirrim.0403.b.effect
		trigger_event = {
			id = war_of_the_rohirrim.0403
			months = 1
		}
		ai_chance = {
			base = 0
			modifier = {
				add = scope:war.attacker_war_score
			}
			modifier = {
				add = -30
			}
			modifier = {
				factor = -1
			}
			modifier = {
				add = 100
			}
		}
	}

	option = {
		name = war_of_the_rohirrim.0403.c
		custom_tooltip = war_of_the_rohirrim.0403.c.effect
		trigger_event = {
			id = war_of_the_rohirrim.0403
			months = 6
		}
		ai_chance = {
			base = 0 
		}
	}

	option = {
		name = war_of_the_rohirrim.0403.d
		custom_tooltip = war_of_the_rohirrim.0403.d.effect
		if = {
			limit = {
				has_trait = disloyal
			}
			random = {
				chance = 50
				remove_trait = disloyal
			}
		}
		ai_chance = {
			base = 0 
		}
	}

}

# War for Rohan - Notification for Wulf that Thorne has turned
war_of_the_rohirrim.0404 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0404.t
	desc =  war_of_the_rohirrim.0404.desc
	theme = war
	
	left_portrait = {
		character = root
		animation = celebrate_axe
	}

	right_portrait = {
		character = character:linethorne5
		animation = scheme
	}

	immediate = {
		show_as_tooltip = {
			scope:war = {
				add_attacker = character:linethorne5
			}
			scope:defender = {
				set_relation_grudge = character:linethorne5
			}
		}	
	}

	option = {
		name = war_of_the_rohirrim.0404.a
	}

}

# War for Rohan - Notification for Helm that Thorne has turned
war_of_the_rohirrim.0405 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0405.t
	desc =  war_of_the_rohirrim.0405.desc
	theme = war
	
	left_portrait = {
		character = root
		animation = anger
	}

	right_portrait = {
		character = character:linethorne5
		animation = scheme
	}

	immediate = {
		show_as_tooltip = {
			scope:war = {
				add_attacker = character:linethorne5
			}
			scope:defender = {
				set_relation_grudge = character:linethorne5
			}
		}	
	}

	option = {
		name = war_of_the_rohirrim.0405.a
	}

}

# War for Rohan - Helm Victory - Event for Helm
war_of_the_rohirrim.0410 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0410.t
	desc =  war_of_the_rohirrim.0410.desc
	theme = prison
	
	left_portrait = {
		character = root
		animation = war_over_win
	}

	right_portrait = {
		character = scope:attacker
		animation = prisondungeon
	}

	immediate = {
		destroy_title = title:k_dunland
	}

	option = { # Execute 
		name = war_of_the_rohirrim.0410.a
		show_as_tooltip = {
			scope:attacker = {
				death = {
					death_reason = death_execution
					killer = root
				}
			}
		}
		save_scope_as = helm_decision_execute
		ai_chance = {
			base = 75
		}
	}

	option = { # Imprison 
		name = war_of_the_rohirrim.0410.b
		show_as_tooltip = {
			imprison = {
				target = scope:attacker
				type = dungeon
			}
		}
		save_scope_as = helm_decision_imprison
		ai_chance = {
			base = 0
		}
	}

	option = { # Release 
		name = war_of_the_rohirrim.0410.c
		trigger = {
			scope:attacker = {
				OR = {
					is_ai = yes
					has_dlc_feature = landless_playable
				}
			}
		}
		show_as_tooltip = {
			scope:attacker = {
				release_from_prison = yes
				create_landless_adventurer_title_effect = {
					REASON = flag:exile
					FLAVOR_CHAR = root
				}
			}
		}
		save_scope_as = helm_decision_release
		ai_chance = {
			base = 25
		}
	}

	after = {
		scope:attacker = {
			trigger_event = war_of_the_rohirrim.0411
		}
	}

}

# War for Rohan - Helm Victory - Event for Wulf
war_of_the_rohirrim.0411 = {
	content_source = realms_dlc
	type = character_event
	title =  {
		first_valid = {
			triggered_desc = {
				trigger = {
					exists = scope:helm_decision_execute
				}
				desc = war_of_the_rohirrim.0411.t.killed
			}
			triggered_desc = {
				trigger = {
					exists = scope:helm_decision_imprison
				}
				desc = war_of_the_rohirrim.0411.t.imprisoned
			}
			desc = war_of_the_rohirrim.0411.t.released
		}
	}
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					exists = scope:helm_decision_execute
				}
				desc = war_of_the_rohirrim.0411.desc.killed
			}
			triggered_desc = {
				trigger = {
					exists = scope:helm_decision_imprison
				}
				desc = war_of_the_rohirrim.0411.desc.imprisoned
			}
			desc = war_of_the_rohirrim.0411.desc.released
		}
	}
	theme = prison
	
	left_portrait = {
		character = root
		animation = prisondungeon
	}

	right_portrait = {
		character = scope:defender
		animation = war_over_win
	}

	immediate = {
		remove_claim = title:k_rohan
	}

	option = { # Execute 
		name = war_of_the_rohirrim.0411.a
		death = {
			death_reason = death_execution
			killer = scope:defender
		}
		trigger = {
			exists = scope:helm_decision_execute
		}
	}

	option = { # Imprison 
		name = war_of_the_rohirrim.0411.b
		trigger = {
			exists = scope:helm_decision_imprison
		}
		show_as_tooltip = {
			scope:defender = {
				imprison = {
					target = root
					type = dungeon
				}
			}
		}
	}

	option = { # Release 
		name = war_of_the_rohirrim.0411.c
		trigger = {
			exists = scope:helm_decision_release
		}
		release_from_prison = yes
		depose = yes
		create_landless_adventurer_title_effect = {
			REASON = flag:exile
			FLAVOR_CHAR = scope:defender
		}
	}

}

# War for Rohan - Wulf Victory - Event for Wulf
war_of_the_rohirrim.0420 = {
	content_source = realms_dlc
	type = character_event
	title =  war_of_the_rohirrim.0420.t
	desc =  war_of_the_rohirrim.0420.desc
	theme = prison
	
	left_portrait = {
		character = root
		animation = war_over_win
	}

	right_portrait = {
		character = scope:defender
		animation = prisondungeon
	}

	option = { # Execute 
		name = war_of_the_rohirrim.0420.a
		show_as_tooltip = {
			scope:defender = {
				death = {
					death_reason = death_execution
					killer = root
				}
			}
		}
		save_scope_as = wulf_decision_execute
		ai_chance = {
			base = 75
		}
	}

	option = { # Imprison 
		name = war_of_the_rohirrim.0420.b
		show_as_tooltip = {
			imprison = {
				target = scope:defender
				type = dungeon
			}
		}
		save_scope_as = wulf_decision_imprison
		stress_impact = {
			vengeful = minor_stress_impact_gain
		}
		ai_chance = {
			base = 0
		}
	}

	option = { # Release 
		name = war_of_the_rohirrim.0420.c
		trigger = {
			scope:defender = {
				OR = {
					is_ai = yes
					has_dlc_feature = landless_playable
				}
			}
		}
		add_character_modifier = {
			modifier = wulf_the_merciful_character_modifier
			years = 10
		}
		if = {
			limit = {
				has_any_nickname = no
			}
			give_nickname = nick_the_merciful
		}
		show_as_tooltip = {
			scope:defender = {
				release_from_prison = yes
				create_landless_adventurer_title_effect = {
					REASON = flag:exile
					FLAVOR_CHAR = root
				}
				add_realm_law = camp_purpose_legitimists
			}
		}
		save_scope_as = wulf_decision_release
		stress_impact = {
			vengeful = massive_stress_impact_gain
		}
		ai_chance = {
			base = 25
		}
	}

	after = {
		scope:defender = {
			trigger_event = war_of_the_rohirrim.0421
		}
	}

}

# War for Rohan - Wulf Victory - Event for Helm
war_of_the_rohirrim.0421 = {
	content_source = realms_dlc
	type = character_event
	title =  {
		first_valid = {
			triggered_desc = {
				trigger = {
					exists = scope:helm_decision_execute
				}
				desc = war_of_the_rohirrim.0421.t.killed
			}
			triggered_desc = {
				trigger = {
					exists = scope:helm_decision_imprison
				}
				desc = war_of_the_rohirrim.0421.t.imprisoned
			}
			desc = war_of_the_rohirrim.0421.t.released
		}
	}
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					exists = scope:helm_decision_execute
				}
				desc = war_of_the_rohirrim.0421.desc.killed
			}
			triggered_desc = {
				trigger = {
					exists = scope:helm_decision_imprison
				}
				desc = war_of_the_rohirrim.0421.desc.imprisoned
			}
			desc = war_of_the_rohirrim.0421.desc.released
		}
	}
	theme = prison
	
	left_portrait = {
		character = scope:attacker
		animation = war_over_win
	}

	right_portrait = {
		character = root
		animation = prisondungeon
	}

	option = { # Execute 
		name = war_of_the_rohirrim.0421.a
		death = {
			death_reason = death_execution
			killer = scope:attacker
		}
		trigger = {
			exists = scope:wulf_decision_execute
		}
	}

	option = { # Imprison 
		name = war_of_the_rohirrim.0421.b
		trigger = {
			exists = scope:wulf_decision_imprison
		}
		show_as_tooltip = {
			scope:attacker = {
				imprison = {
					target = root
					type = dungeon
				}
			}
		}
	}

	option = { # Release 
		name = war_of_the_rohirrim.0421.c
		trigger = {
			exists = scope:wulf_decision_release
		}
		release_from_prison = yes
		depose = yes
		create_landless_adventurer_title_effect = {
			REASON = flag:exile
			FLAVOR_CHAR = scope:attacker
		}
		add_realm_law = camp_purpose_legitimists
	}

	after = {
		scope:attacker = {
			if = {
				limit = {
					any_vassal_or_below = {
						dynasty = dynasty:dynasty_eorl
						NOT = { this = scope:defender }
						OR = {
							is_ai = yes
							has_dlc_feature = landless_playable
						}
					}
				}
				trigger_event = war_of_the_rohirrim.0450
			}
		}
	}

}

# War for Rohan - Wulf Victory - Held Out for Hera - Asking the Question
war_of_the_rohirrim.0430 = {
	content_source = realms_dlc
	type = character_event
	title = war_of_the_rohirrim.0430.t
	desc = war_of_the_rohirrim.0430.desc
	theme = love
	
	left_portrait = {
		character = root
		animation = flirtation
	}

	right_portrait = {
		character = scope:hera
		animation = personality_cynical
	}

	immediate = {
		character:herahelm = { save_scope_as = hera }
		remove_trait = cannot_marry
		scope:hera = {
			remove_trait = cannot_marry
		}
	}

	option = { # Ask Hera once more
		name = war_of_the_rohirrim.0430.a
		random_list = {
			35 = {
				desc = war_of_the_rohirrim.0430.a.success
				trigger_event = war_of_the_rohirrim.0431
				show_as_tooltip = {
					marry = scope:hera
					add_legitimacy = 250
				}
				modifier = { # Hera will despise Wulf for killing anyone in her close family
					any_killed_character = {
						is_close_family_of = scope:hera
					}
					add = -35
				}
				modifier = { # Hera will dislike Wulf for imprisoning anyone in her close family
					scope:hera = {
						any_close_family_member = {
							is_imprisoned_by = root
						}
					}
					add = -15
				}
				modifier = { # Hera will frown upon Wulf making secret deals with Thorne
					OR = {
						has_character_flag = wulf_rohan_promise_pat_marriage
						has_character_flag = wulf_rohan_promise_mat_marriage
						has_character_flag = wulf_rohan_promise_land
						has_character_flag = wulf_rohan_promise_vassal_contract
						has_character_flag = wulf_rohan_promise_hook
						has_character_flag = wulf_rohan_promise_co_monarch
						has_character_flag = wulf_rohan_promise_independence
					}
					add = -10
				}
				modifier = { # Hera will distrust Wulf for adopting another faith
					NOT = { has_faith = faith:faith_rohirric }
					add = -5
				}
				if = {
					limit = {
						has_faith = faith:faith_rohirric
					}
					custom_tooltip = war_of_the_rohirrim.0430.a.rohirric_faith
				}
				modifier = { # Hera will value Wulf retaining his Rohirric faith
					has_faith = faith:faith_rohirric
					add = 10
				}
				if = {
					limit = {
						scope:hera.father = { 
							NOR = { 
								is_imprisoned_by = root
								is_alive = no
								root = {
									any_killed_character = {
										this = scope:hera.father
									}
								}
							}
						}
					}
					custom_tooltip = war_of_the_rohirrim.0430.a.freed_father
				}
				modifier = { # Hera will value Wulf freeing her father
					scope:hera.father = { 
						NOR = { 
							is_imprisoned_by = root
							is_alive = no
							root = {
								any_killed_character = {
									this = scope:hera.father
								}
							}
						}
					}
					add = 30
				}
				min = 1
			}
			65 = {
				desc = war_of_the_rohirrim.0430.a.failure
				trigger_event = war_of_the_rohirrim.0432
				show_as_tooltip = {
					set_relation_grudge = scope:hera
					scope:hera = { 
						set_relation_grudge = root
						add_opinion = {
							modifier = annoyed_opinion
							opinion = -50
							target = root
						}
					}
				}
				if = {
					limit = {
						any_killed_character = {
							is_close_family_of = scope:hera
						}
					}
					custom_tooltip = war_of_the_rohirrim.0430.a.killed_close_family
				}
				modifier = { # Hera will despise Wulf for killing anyone in her close family
					any_killed_character = {
						is_close_family_of = scope:hera
					}
					add = 35
				}
				if = {
					limit = {
						scope:hera = {
							any_close_family_member = {
								is_imprisoned_by = root
							}
						}
					}
					custom_tooltip = war_of_the_rohirrim.0430.a.imprisoned_close_family
				}
				modifier = { # Hera will dislike Wulf for imprisoning anyone in her close family
					scope:hera = {
						any_close_family_member = {
							is_imprisoned_by = root
						}
					}
					add = 15
				}
				if = {
					limit = {
						OR = {
							has_character_flag = wulf_rohan_promise_pat_marriage
							has_character_flag = wulf_rohan_promise_mat_marriage
							has_character_flag = wulf_rohan_promise_land
							has_character_flag = wulf_rohan_promise_vassal_contract
							has_character_flag = wulf_rohan_promise_hook
							has_character_flag = wulf_rohan_promise_co_monarch
							has_character_flag = wulf_rohan_promise_independence
						}
					}
					custom_tooltip = war_of_the_rohirrim.0430.a.deal_with_thorne
				}
				modifier = { # Hera will frown upon Wulf making secret deals with Thorne
					OR = {
						has_character_flag = wulf_rohan_promise_pat_marriage
						has_character_flag = wulf_rohan_promise_mat_marriage
						has_character_flag = wulf_rohan_promise_land
						has_character_flag = wulf_rohan_promise_vassal_contract
						has_character_flag = wulf_rohan_promise_hook
						has_character_flag = wulf_rohan_promise_co_monarch
						has_character_flag = wulf_rohan_promise_independence
					}
					add = 10
				}
				if = {
					limit = {
						NOT = { has_faith = faith:faith_rohirric }
					}
					custom_tooltip = war_of_the_rohirrim.0430.a.abandoned_faith
				}
				modifier = { # Hera will distrust Wulf for adopting another faith
					NOT = { has_faith = faith:faith_rohirric }
					add = 5
				}
				modifier = { # Hera will value Wulf retaining his Rohirric faith
					has_faith = faith:faith_rohirric
					add = -10
				}
				modifier = { # Hera will value Wulf freeing her father
					scope:hera.father = { 
						NOR = { 
							is_imprisoned_by = root
							is_alive = no
							root = {
								any_killed_character = {
									this = scope:hera.father
								}
							}
						}
					}
					add = -30
				}
				max = 99
			}
		}
		ai_chance = {
			base = 20
		}
	}

	option = { # Forcibly wed
		name = war_of_the_rohirrim.0430.b
		trigger_event = war_of_the_rohirrim.0433
		show_as_tooltip = {
			add_tyranny = 20
			marry = scope:hera
			scope:hera = { 
				set_relation_grudge = root
				add_opinion = {
					modifier = angry_opinion
					opinion = -100
					target = root
				}
			}
			add_legitimacy = 100
		}
		ai_chance = {
			base = 80
		}
	}

}

# War for Rohan - Wulf Victory - Held Out for Hera - Hera Accepts
war_of_the_rohirrim.0431 = {
	content_source = realms_dlc
	type = character_event
	title = war_of_the_rohirrim.0431.t
	desc = war_of_the_rohirrim.0431.desc
	theme = marriage
	
	left_portrait = {
		character = root
		animation = sad
	}

	right_portrait = {
		character = scope:hera
		animation = personality_content
	}

	option = {
		name = war_of_the_rohirrim.0431.a
		marry = scope:hera
		add_legitimacy = 250
	}

}

# War for Rohan - Wulf Victory - Held Out for Hera - Hera Rejects
war_of_the_rohirrim.0432 = {
	content_source = realms_dlc
	type = character_event
	title = war_of_the_rohirrim.0432.t
	desc = war_of_the_rohirrim.0432.desc
	theme = unfriendly
	
	left_portrait = {
		character = root
		animation = sadness
	}

	right_portrait = {
		character = scope:hera
		animation = anger
	}

	option = {
		name = war_of_the_rohirrim.0432.a
		set_relation_grudge = scope:hera
		scope:hera = { 
			set_relation_grudge = root
			add_opinion = {
				modifier = annoyed_opinion
				opinion = -50
				target = root
			}
		}
	}

}

# War for Rohan - Wulf Victory - Held Out for Hera - Hera is Forced
war_of_the_rohirrim.0433 = {
	content_source = realms_dlc
	type = character_event
	title = war_of_the_rohirrim.0433.t
	desc = war_of_the_rohirrim.0433.desc
	theme = marriage
	
	left_portrait = {
		character = root
		animation = dismissal
	}

	right_portrait = {
		character = character:herahelm
		animation = disapproval
	}

	immediate = {
		character:herahelm = {
			add_character_flag = wedding_outfit
		}
	}

	option = {
		name = war_of_the_rohirrim.0433.a
		add_tyranny = 20
		marry = character:herahelm
		character:herahelm = { 
			set_relation_grudge = root
			add_opinion = {
				modifier = angry_opinion
				opinion = -100
				target = root
			}
		}
		add_legitimacy = 100
	}

	after = {
		character:herahelm = {
			remove_character_flag = wedding_outfit
		}
	}

}

# War for Rohan - Wulf Victory - Event for Gondor - Vetting Wulf
war_of_the_rohirrim.0440 = {
	content_source = realms_dlc
	type = character_event
	title = war_of_the_rohirrim.0440.t
	desc = war_of_the_rohirrim.0440.desc
	theme = diplomacy
	
	left_portrait = {
		character = root
		animation = thinking
	}

	right_portrait = {
		character = scope:attacker
		animation = personality_bold
	}

	lower_center_portrait = scope:defender

	immediate = {
		add_character_flag = considering_wulf
		save_scope_as = gondor_ruler
	}

	option = { # Send a delegation to Edoras
		name = war_of_the_rohirrim.0440.a
		custom_tooltip = war_of_the_rohirrim.0440.a.effect
		scope:attacker = {
			trigger_event = {
				id = war_of_the_rohirrim.0441
				months = 4
			}
		}
		ai_chance = {
			base = 100
		}
	}

	option = { # Do not bother
		name = war_of_the_rohirrim.0440.b
		ai_chance = {
			base = 0
		}
		remove_character_flag = considering_wulf
		ai_chance = {
			base = 0
		}
	}

}

# War for Rohan - Wulf Victory - Oath of Cirion - Gondorian Delegation Arrives
war_of_the_rohirrim.0441 = {
	content_source = realms_dlc
	type = character_event
	title = war_of_the_rohirrim.0441.t
	desc = war_of_the_rohirrim.0441.desc
	theme = diplomacy
	
	left_portrait = {
		character = root
		animation = personality_honorable
	}

	right_portrait = {
		character = scope:envoy
		animation = personality_rational
	}

	lower_center_portrait = scope:gondor_ruler

	immediate = {
		scope:gondor_ruler = {
			ordered_knight = {
				order_by = diplomacy
				save_scope_as = envoy
			}
		}
	}

	option = {
		name = war_of_the_rohirrim.0441.a
		dynasty = { add_dynasty_prestige = 800 }
		if = {
			limit = {
				scope:gondor_ruler = { is_ai = yes }
				is_ai = no
			}
			random_list = {
				60 = {
					desc = war_of_the_rohirrim.0441.a.success
					trigger_event = war_of_the_rohirrim.0442
					show_as_tooltip = {
						custom_tooltip = war_of_the_rohirrim.0441.a.success.effect1
						add_legitimacy = 100
						add_opinion = {
							modifier = pleased_opinion
							opinion = 20
							target = scope:gondor_ruler
						}
					}
					# Faith Hostility
					modifier = { # Righteous
						scope:gondor_ruler.faith = {
							faith_hostility_level = {
								target = root.faith
								value = 0
							}
						}
						add = 10
					}
					if = {
						limit = {
							is_married = yes
							primary_spouse = character:herahelm
						}
						custom_tooltip = war_of_the_rohirrim.0441.a.faith_righteous
					}
					modifier = { # Astray
						scope:gondor_ruler.faith = {
							faith_hostility_level = {
								target = root.faith
								value = 1
							}
						}
						add = -10
					}
					modifier = { # Hostile
						scope:gondor_ruler.faith = {
							faith_hostility_level = {
								target = root.faith
								value = 2
							}
						}
						add = -20
					}
					modifier = { # Evil
						scope:gondor_ruler.faith = {
							faith_hostility_level = {
								target = root.faith
								value = 3
							}
						}
						add = -50
					}
					# Got help from the Southrons
					modifier = {
						has_character_flag = wulf_sought_help_from_southrons
						add = -30
					}
					# Made a deal with Thorne
					modifier = {
						OR = {
							has_character_flag = wulf_rohan_promise_pat_marriage
							has_character_flag = wulf_rohan_promise_mat_marriage
							has_character_flag = wulf_rohan_promise_land
							has_character_flag = wulf_rohan_promise_vassal_contract
							has_character_flag = wulf_rohan_promise_hook
							has_character_flag = wulf_rohan_promise_co_monarch
							has_character_flag = wulf_rohan_promise_independence
						}
						add = -10
					}
					# Released Helm
					modifier = {
						character:herahelm.father = { 
							NOR = { 
								is_imprisoned_by = root
								is_alive = no
								root = {
									any_killed_character = {
										this = character:herahelm.father
									}
								}
							}
						}
						add = 20
					}
					if = {
						limit = {
							character:herahelm.father = { 
								NOR = { 
									is_imprisoned_by = root
									is_alive = no
									root = {
										any_killed_character = {
											this = character:herahelm.father
										}
									}
								}
							}
						}
						custom_tooltip = war_of_the_rohirrim.0441.a.released_helm
					}
					# Married Hera
					modifier = {
						is_married = yes
						primary_spouse = character:herahelm
						add = 15
					}
					if = {
						limit = {
							is_married = yes
							primary_spouse ?= character:herahelm
						}
						custom_tooltip = war_of_the_rohirrim.0441.a.married_hera
					}
					# Married a Rohirrim
					modifier = {
						is_married = yes
						primary_spouse = {
							NOT = { this = character:herahelm }
							culture = culture:rohirrim
						}
						add = 5
					}
					if = {
						limit = {
							is_married = yes
							primary_spouse = {
								NOT = { this = character:herahelm }
								culture = culture:rohirrim
							}
						}
						custom_tooltip = war_of_the_rohirrim.0441.a.married_rohirrim
					}
					# Wulf killed Helm's Family Members
					modifier = {
						any_killed_character = {
							is_close_family_of = character:herahelm
						}
						add = -10
					}
					# Wulf imprisoned Helm's Family Members
					modifier = {
						character:herahelm = {
							any_close_family_member = {
								is_imprisoned_by = root
							}
						}
						add = -5
					}
					# Wulf's Diplomacy is Poor
					modifier = {
						diplomacy < 9
						add = -5
					}
					# Wulf's Diplomacy is Good
					modifier = {
						diplomacy > 12
						diplomacy < 17
						add = 5
					}
					if = {
						limit = {
							diplomacy > 12
							diplomacy < 17
						}
						custom_tooltip = war_of_the_rohirrim.0441.a.good_diplomacy
					}
					# Wulf's Diplomacy is Excellent
					modifier = {
						diplomacy > 16
						add = 10
					}
					if = {
						limit = {
							diplomacy > 16
						}
						custom_tooltip = war_of_the_rohirrim.0441.a.excellent_diplomacy
					}
					min = 1
				}
				40 = {
					desc = war_of_the_rohirrim.0441.a.failure
					trigger_event = war_of_the_rohirrim.0443
					show_as_tooltip = {
						custom_tooltip = war_of_the_rohirrim.0441.a.failure.effect
						add_legitimacy = -50
						add_opinion = {
							modifier = disappointed_opinion
							opinion = -20
							target = scope:gondor_ruler
						}
					}
					# Faith Hostility
					modifier = { # Righteous
						scope:gondor_ruler.faith = {
							faith_hostility_level = {
								target = root.faith
								value = 0
							}
						}
						add = -10
					}
					modifier = { # Astray
						scope:gondor_ruler.faith = {
							faith_hostility_level = {
								target = root.faith
								value = 1
							}
						}
						add = 10
					}
					if = {
						limit = {
							scope:gondor_ruler.faith = {
								faith_hostility_level = {
									target = root.faith
									value = 1
								}
							}
						}
						custom_tooltip = war_of_the_rohirrim.0441.a.faith_astray
					}
					modifier = { # Hostile
						scope:gondor_ruler.faith = {
							faith_hostility_level = {
								target = root.faith
								value = 2
							}
						}
						add = 20
					}
					if = {
						limit = {
							scope:gondor_ruler.faith = {
								faith_hostility_level = {
									target = root.faith
									value = 2
								}
							}
						}
						custom_tooltip = war_of_the_rohirrim.0441.a.faith_hostile
					}
					modifier = { # Evil
						scope:gondor_ruler.faith = {
							faith_hostility_level = {
								target = root.faith
								value = 3
							}
						}
						add = 50
					}
					if = {
						limit = {
							scope:gondor_ruler.faith = {
								faith_hostility_level = {
									target = root.faith
									value = 3
								}
							}
						}
						custom_tooltip = war_of_the_rohirrim.0441.a.faith_evil
					}
					# Got help from the Southrons
					modifier = {
						has_character_flag = wulf_sought_help_from_southrons
						add = 30
					}
					if = {
						limit = {
							has_character_flag = wulf_sought_help_from_southrons
						}
						custom_tooltip = war_of_the_rohirrim.0441.a.aided_by_enemies
					}
					# Made a deal with Thorne
					modifier = {
						OR = {
							has_character_flag = wulf_rohan_promise_pat_marriage
							has_character_flag = wulf_rohan_promise_mat_marriage
							has_character_flag = wulf_rohan_promise_land
							has_character_flag = wulf_rohan_promise_vassal_contract
							has_character_flag = wulf_rohan_promise_hook
							has_character_flag = wulf_rohan_promise_co_monarch
							has_character_flag = wulf_rohan_promise_independence
						}
						add = 10
					}
					if = {
						limit = {
							has_character_flag = wulf_sought_help_from_southrons
						}
						custom_tooltip = war_of_the_rohirrim.0441.a.deal_with_thorne
					}
					# Released Helm
					modifier = {
						character:herahelm.father = { 
							NOR = { 
								is_imprisoned_by = root
								is_alive = no
								root = {
									any_killed_character = {
										this = character:herahelm.father
									}
								}
							}
						}
						add = -20
					}
					# Married Hera
					modifier = {
						is_married = yes
						primary_spouse = character:herahelm
						add = -15
					}
					# Married a Rohirrim
					modifier = {
						is_married = yes
						primary_spouse = character:herahelm
						add = -5
					}
					# Wulf killed Helm's Family Members
					modifier = {
						any_killed_character = {
							is_close_family_of = character:herahelm
						}
						add = 10
					}
					if = {
						limit = {
							any_killed_character = {
								is_close_family_of = character:herahelm
							}
						}
						custom_tooltip = war_of_the_rohirrim.0441.a.killed_eorlings
					}
					# Wulf imprisoned Helm's Family Members
					modifier = {
						character:herahelm = {
							any_close_family_member = {
								is_imprisoned_by = root
							}
						}
						add = 5
					}
					if = {
						limit = {
							character:herahelm = {
								any_close_family_member = {
									is_imprisoned_by = root
								}
							}
						}
						custom_tooltip = war_of_the_rohirrim.0441.a.imprisoned_eorlings
					}
					# Wulf's Diplomacy is Poor
					modifier = {
						diplomacy < 9
						add = -5
					}
					if = {
						limit = {
							diplomacy < 9
						}
						custom_tooltip = war_of_the_rohirrim.0441.a.poor_diplomacy
					}
					# Wulf's Diplomacy is Good
					modifier = {
						diplomacy > 12
						diplomacy < 17
						add = 5
					}
					# Wulf's Diplomacy is Excellent
					modifier = {
						diplomacy > 16
						add = 10
					}
					max = 99
				}
			}
		}
		else = {
			scope:gondor_ruler = { trigger_event = war_of_the_rohirrim.0444 }
		}
		add_character_modifier = {
			modifier = wulf_oathkeeper_character_modifier
			years = 10
		}
		ai_chance = {
			base = 100
		}
	}
	option = {
		name = war_of_the_rohirrim.0441.b
		add_legitimacy = -50
		scope:gondor_ruler = {
			trigger_event = war_of_the_rohirrim.0445
		}
		show_as_tooltip = {
			scope:gondor_ruler = {
				add_opinion = {
					modifier = annoyed_opinion
					opinion = -40
					target = scope:attacker
				}
			}
		}
		add_character_modifier = {
			modifier = wulf_defier_of_the_white_city_character_modifier
			years = 10
		}
		ai_chance = {
			base = 0
		}
	}

}

# War for Rohan - Wulf Victory - Oath of Cirion - Wulf Proves his Loyalty
war_of_the_rohirrim.0442 = {
	content_source = realms_dlc
	type = character_event
	title = war_of_the_rohirrim.0442.t
	desc = war_of_the_rohirrim.0442.desc
	theme = diplomacy
	
	left_portrait = {
		character = root
		animation = happiness
	}

	right_portrait = {
		character = scope:envoy
		animation = personality_honorable
	}

	lower_center_portrait = scope:gondor_ruler

	option = {
		name = war_of_the_rohirrim.0442.a
		custom_tooltip = war_of_the_rohirrim.0441.a.success.effect1
		add_legitimacy = 100
		add_opinion = {
			modifier = pleased_opinion
			opinion = 20
			target = scope:gondor_ruler
		}
		set_global_variable = {
			name = gondor_approves_of_wulf
			value = yes
		}
	}

	after = {
		scope:gondor_ruler = {
			remove_character_flag = considering_wulf
		}
	}

}

# War for Rohan - Wulf Victory - Oath of Cirion - Wulf Fails to prove his Loyalty
war_of_the_rohirrim.0443 = {
	content_source = realms_dlc
	type = character_event
	title = war_of_the_rohirrim.0443.t
	desc = war_of_the_rohirrim.0443.desc
	theme = diplomacy
	
	left_portrait = {
		character = root
		animation = anger
	}

	right_portrait = {
		character = scope:envoy
		animation = disapproval
	}

	lower_center_portrait = scope:gondor_ruler

	option = {
		name = war_of_the_rohirrim.0443.a
		custom_tooltip = war_of_the_rohirrim.0441.a.failure.effect
		add_legitimacy = -50
		add_opinion = {
			modifier = disappointed_opinion
			opinion = -20
			target = scope:gondor_ruler
		}
	}

	after = {
		scope:gondor_ruler = {
			remove_character_flag = considering_wulf
		}
	}

}

# War for Rohan - Wulf Victory - Oath of Cirion - Human Gondor Decision
war_of_the_rohirrim.0444 = {
	content_source = realms_dlc
	type = character_event
	title = war_of_the_rohirrim.0444.t
	desc = war_of_the_rohirrim.0444.desc
	theme = diplomacy
	
	left_portrait = {
		character = root
		animation = thinking
	}

	right_portrait = {
		character = scope:attacker
		animation = personality_bold
	}

	option = {
		name = war_of_the_rohirrim.0444.a
		custom_tooltip = war_of_the_rohirrim.0441.a.success.effect2
		custom_tooltip = war_of_the_rohirrim.0441.a.success.effect3
		custom_tooltip = war_of_the_rohirrim.0441.a.success.effect4
		scope:attacker = {
			trigger_event = war_of_the_rohirrim.0442
			add_opinion = {
				modifier = pleased_opinion
				opinion = 20
				target = root
			}
		}
		ai_chance = {
			base = 50
		}
	}

	option = {
		name = war_of_the_rohirrim.0444.a
		scope:attacker = {
			trigger_event = war_of_the_rohirrim.0443
			add_opinion = {
				modifier = disappointed_opinion
				opinion = -20
				target = root
			}
		}
		ai_chance = {
			base = 50
		}
	}

	after = {
		scope:gondor_ruler = {
			remove_character_flag = considering_wulf
		}
	}

}

# War for Rohan - Wulf Victory - Oath of Cirion - Gondor - Envoys Sent Home
war_of_the_rohirrim.0445 = {
	content_source = realms_dlc
	type = character_event
	title = war_of_the_rohirrim.0445.t
	desc = war_of_the_rohirrim.0445.desc
	theme = diplomacy
	
	left_portrait = {
		character = root
		animation = thinking
	}

	right_portrait = {
		character = scope:attacker
		animation = personality_bold
	}

	option = {
		name = war_of_the_rohirrim.0445.a
		scope:gondor_ruler = {
			remove_character_flag = considering_wulf
		}
		add_opinion = {
			modifier = annoyed_opinion
			opinion = -40
			target = scope:attacker
		}
	}

}

# War for Rohan - Wulf Victory - What to do with these damned Eorlings?
war_of_the_rohirrim.0450 = {
	content_source = realms_dlc
	type = character_event
	title = war_of_the_rohirrim.0450.t
	desc = war_of_the_rohirrim.0450.desc
	theme = realm
	
	left_portrait = {
		character = root
		animation = personality_cynical
	}

	right_portrait = {
		character = scope:eorling
		animation = personality_callous
	}

	override_background = {
		reference = bedchamber
	}

	immediate = {
		ordered_vassal_or_below = {
			limit = {
				dynasty = dynasty:dynasty_eorl
				NOT = { this = scope:defender }
				OR = {
					is_ai = yes
					has_dlc_feature = landless_playable
				}
			}
			order_by = current_military_strength
			save_scope_as = eorling
		}
	}

	option = { # Let them keep their titles
		name = war_of_the_rohirrim.0450.a
		add_legitimacy = 50
		ai_chance = {
			base = 20
		}
	}

	option = { # Banish them from the realm
		name = war_of_the_rohirrim.0450.b
		add_legitimacy = -150
		every_vassal_or_below = {
			limit = {
				dynasty = dynasty:dynasty_eorl
				NOT = { this = scope:defender }
				OR = {
					is_ai = yes
					has_dlc_feature = landless_playable
				}
			}
			create_title_and_vassal_change = {
				type = revoked
				save_scope_as = change
			}
			every_held_title = {
				change_title_holder = {
					holder = root
					change = scope:change
				}
			}
			resolve_title_and_vassal_change = scope:change
			create_landless_adventurer_title_effect = {
				REASON = flag:exile
				FLAVOR_CHAR = scope:attacker
			}
			add_realm_law = camp_purpose_legitimists
		}
		ai_chance = {
			base = 60
		}
	}

	option = { # Kill them all
		name = war_of_the_rohirrim.0450.c
		add_legitimacy = -300
		add_tyranny = 50
		every_courtier = {
			limit = {
				dynasty = dynasty:dynasty_eorl
				NOT = { this = scope:defender }
				is_ai = yes
			}
			death = {
				death_reason = death_execution
				killer = root
			}
		}
		every_vassal_or_below = {
			every_courtier = {
				limit = {
					dynasty = dynasty:dynasty_eorl
					NOT = { this = scope:defender }
					is_ai = yes
				}
				death = {
					death_reason = death_execution
					killer = root
				}
			}
		}
		every_vassal_or_below = {
			limit = {
				dynasty = dynasty:dynasty_eorl
				NOT = { this = scope:defender }
				is_ai = yes
			}
			create_title_and_vassal_change = {
				type = revoked
				save_scope_as = change
			}
			every_held_title = {
				change_title_holder = {
					holder = root
					change = scope:change
				}
			}
			resolve_title_and_vassal_change = scope:change
			death = {
				death_reason = death_execution
				killer = root
			}
		}
		ai_chance = {
			base = 20
		}
	}

}

# Affirm Descent from Freawine Decision Event
war_of_the_rohirrim.0500 = {
	content_source = realms_dlc
	type = character_event
	title = war_of_the_rohirrim.0500.t
	desc = war_of_the_rohirrim.0500.desc
	theme = dynasty
	
	left_portrait = {
		character = root
		animation = personality_bold
	}

	right_portrait = {
		character = character:lineofeorl5
		animation = personality_honorable
	}

	immediate = {
		character:lineprefreca2 = {
			set_father = character:lineofeorl5
			remove_trait = disputed_heritage
		}
		add_legitimacy = 250
	}

	option = { # Adopt the Eorl Dynasty
		name = war_of_the_rohirrim.0500.a
		character:lineprefreca2 = {
			add_trait_force_tooltip = legitimized_bastard
		}
		## EVERY FRECALING BECOMES EORLING
		every_ancestor = { #5 generations deep
			even_if_dead = yes
			limit = {
				NOT = { house = character:lineofeorl9.house }
				dynasty = root.dynasty
			}
			set_house = character:lineofeorl9.house
			every_ancestor = { #10 generations deep
				even_if_dead = yes
				limit = {
					NOT = { house = character:lineofeorl9.house }
					dynasty = root.dynasty
				}
				set_house = character:lineofeorl9.house
				every_ancestor = { #15 generations deep
					even_if_dead = yes
					limit = {
						NOT = { house = character:lineofeorl9.house }
						dynasty = root.dynasty
					}
					set_house = character:lineofeorl9.house
				}
			}
		}
		dynasty = { # Current alive members #Do NOT use .dynasty! It throws errors in the error.log
			every_dynasty_member = {
				limit = { NOT = { house = title:k_rohan.holder.house } }
				set_house = character:lineofeorl9.house
				every_ancestor = { #5 generations deep
					even_if_dead = yes
					limit = {
						NOT = { house = character:lineofeorl9.house }
						dynasty = root.dynasty
					}
					set_house = character:lineofeorl9.house
					every_ancestor = { #10 generations deep
						even_if_dead = yes
						limit = {
							NOT = { house = character:lineofeorl9.house }
							dynasty = root.dynasty
						}
						set_house = character:lineofeorl9.house
						every_ancestor = { #15 generations deep
							even_if_dead = yes
							limit = {
								NOT = { house = character:lineofeorl9.house }
								dynasty = root.dynasty
							}
							set_house = character:lineofeorl9.house
						}
					}
				}
			}
		}
		set_house = character:lineofeorl9.house
		ai_chance = {
			base = 100
		}
	}

	option = { # Keep the Frecaling Dynasty
		name = war_of_the_rohirrim.0500.b
		character:lineprefreca2 = {
			add_trait_force_tooltip = bastard
		}
		dynasty = {
			add_dynasty_prestige = 500
		}
		ai_chance = {
			base = 0
		}
	}

}

# Grant Saruman the Keys to Isengard Decision Event
war_of_the_rohirrim.0510 = {
	content_source = realms_dlc
	type = character_event
	title = war_of_the_rohirrim.0510.t
	desc = war_of_the_rohirrim.0510.desc
	theme = diplomacy
	
	left_portrait = {
		character = root
		animation = personality_honorable
	}

	right_portrait = {
		character = character:lineofsaruman
		animation = personality_zealous
	}

	override_background = {
		reference = throne_room_orthanc
	}

	option = {
		name = war_of_the_rohirrim.0510.a
		create_title_and_vassal_change = {
			type = granted
			save_scope_as = change
		}
		if = {
			limit = {
				root = { has_title = title:d_isengard }
			}
			title:d_isengard = {
				change_title_holder = {
					holder = character:lineofsaruman
					change = scope:change
				}
			}
		}
		title:c_isengard = {
			change_title_holder = {
				holder = character:lineofsaruman
				change = scope:change
			}
		}
		character:lineofsaruman = {
			change_liege = {
				liege = root
				change = scope:change
			}
		}
		resolve_title_and_vassal_change = scope:change
		
		set_relation_friend = {
			reason = friend_upgrade_generic
			target = character:lineofsaruman
		}
		add_hook = {
			target = character:lineofsaruman
			type = favor_hook
	    }
		add_piety = 100
	}
	after = { 
		character:lineofsaruman = { trigger_event = { id = war_of_the_rohirrim.0511 days = 1} }
	}
}

war_of_the_rohirrim.0511 = {
	hidden = yes

	immediate = {
		title:c_isengard.holder = {
			vassal_contract_set_obligation_level = {
				type = title_revocation_rights
				level = 1
			}
			vassal_contract_set_obligation_level = { 
				type = feudal_government_taxes 
				level = 0
			}
			vassal_contract_set_obligation_level = { 
				type = feudal_government_levies 
				level = 0
			}
			vassal_contract_set_obligation_level = {
				type = fortification_rights
				level = 1
			}
		}
	}
}


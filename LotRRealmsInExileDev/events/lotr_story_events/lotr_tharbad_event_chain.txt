namespace = tharbad_story

tharbad_story.0001 = { # Gurnow Intro
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0001.t
	desc = tharbad_story.0001.desc
	theme = realm

	right_portrait = {
		character = root
		animation = marshal
	}
	
	left_portrait = {
		character = character:lineofgunrnow3wife
		animation = spymaster
	}
	
	override_background = {
		reference = tharbad
	}
	
	immediate = { 
		set_global_variable = tharbad_story_active
		add_character_flag = { 
			flag = tharbad_leader_lw_trigger
			years = 100
		}
		save_scope_as = tharbad_leader
		
		
	}

	option = { 
		name = tharbad_story.0001.a
		
		character:tombrass = {
			save_scope_as = tharbad_guard
			set_knight_status = force
		}
		character:lineofgwilleth1 = {
			save_scope_as = tharbad_ranger
			
		}
		appoint_court_position = {
			recipient = character:lineofgwilleth1
			court_position = travel_leader_court_position
		}
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

tharbad_story.0002 = { # LW reaches Tharbad
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0002.t
	desc = tharbad_story.0002.desc
	theme = death

	trigger = { # This is the set of requirements necessary for this event to enable (a gigant IF statement for the event itself)
		exists = global_var:tharbad_story_active
		
	}
	
	right_portrait = {
		character = root
		animation = personality_greedy
	}
	
	
	
	override_background = {
		reference = forodwaith
	}
	
	
	
	immediate = { 
		
	}

	option = { 
		name = tharbad_story.0002.a
		add_legitimacy = -100
		trigger_event = { id = tharbad_story.0003 days = 3 }
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	
	option = { 
		name = tharbad_story.0002.b
		
		set_global_variable = tharbad_dodge_lw
		
		custom_tooltip = {
			text = lw_mitagation
			every_sub_realm_county = {
				every_county_province  = {
					add_province_modifier = { modifier = lw_mediation_modifier months = 6 }
				}
			}
		}
		remove_short_term_gold = 200
		trigger_event = { id = tharbad_story.0006 months = 3 }
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 0
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 30
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	
	

	
}

tharbad_story.0003 = { # palace coup
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0003.t
	desc = tharbad_story.0003.desc
	theme = war

	trigger = { # This is the set of requirements necessary for this event to enable (a gigant IF statement for the event itself)
		exists = global_var:tharbad_story_active
		
	}
	
	right_portrait = {
		character = character:lineofgwilleth1
		animation = marshal
	}
	
	left_portrait = {
		character = character:tombrass
		animation = marshal
	}
	
	override_background = {
		reference = battlefield_dunedain
	}
	
	
	
	immediate = { 
		character:tombrass = {
			save_scope_as = tharbad_guard
			
		}
		character:lineofgwilleth1 = {
			save_scope_as = tharbad_ranger
			
		}
		set_global_variable = tharbad_coup
	}

	option = { 
		name = tharbad_story.0003.a
		hidden_effect = {
			character:lineofgunrnow3wife = {
				save_scope_as = adventurer
				if = {
					limit = {
						player_heir ?= {
							NOT = { this = root }
							is_adult = yes
						}
					}
					player_heir = {
						save_scope_as = laamp_heir
						save_scope_as = laamp_inheritor
					
					}
				}
				else_if = {
					limit = { is_independent_ruler = no }
					liege = {
						save_scope_as = laamp_liege
						save_scope_as = laamp_inheritor
					
					}
				}
				else = {
					custom_tooltip = become_landless_adventurer_decision_title_created_tt
					if = {
						limit = {
							NOT = { exists = scope:laamp_inheritor }
						}
						hidden_effect_new_object = {
							create_character = {
								template = laamp_inheritor_template
								culture = root.capital_county.culture
								faith = root.capital_county.faith
								dynasty = generate
								location = root.capital_province
								after_creation = {
									save_scope_as = laamp_inheritor
									add_character_flag = new_laamp_inheritor
								}
							}
						}
					}
				}
				create_landless_adventurer_title_tooltip_effect = yes
			
			
			
			
				trigger_event = { id = tharbad_story.0007 }
			
		
		
			}
		}
		
		character:lineofgwilleth1 = {
			save_scope_as = newleader
			trigger_event = { id = tharbad_story.0004 days = 1 }
		}
		
		create_title_and_vassal_change = {
			type = usurped
			save_scope_as = title_change
			add_claim_on_loss = no
		}

		every_held_title = {
			change_title_holder = {
				holder = scope:newleader
				change = scope:title_change
			}
		}
		
		set_player_character = scope:newleader

		resolve_title_and_vassal_change = scope:title_change
		
		death = {
			killer = scope:newleader
			death_reason = death_duel
		}
		
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 0
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 50
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	
	option = { 
		name = tharbad_story.0003.b
		
		hidden_effect = {
			character:lineofgunrnow3wife = {
				save_scope_as = adventurer
				if = {
					limit = {
						player_heir ?= {
							NOT = { this = root }
							is_adult = yes
						}
					}
					player_heir = {
						save_scope_as = laamp_heir
						save_scope_as = laamp_inheritor
					
					}
				}
				else_if = {
					limit = { is_independent_ruler = no }
					liege = {
						save_scope_as = laamp_liege
						save_scope_as = laamp_inheritor
					
					}
				}
				else = {
					custom_tooltip = become_landless_adventurer_decision_title_created_tt
					if = {
						limit = {
							NOT = { exists = scope:laamp_inheritor }
						}
						hidden_effect_new_object = {
							create_character = {
								template = laamp_inheritor_template
								culture = root.capital_county.culture
								faith = root.capital_county.faith
								dynasty = generate
								location = root.capital_province
								after_creation = {
									save_scope_as = laamp_inheritor
									add_character_flag = new_laamp_inheritor
								}
							}
						}
					}
				}
				create_landless_adventurer_title_tooltip_effect = yes
			
			
			
			
				trigger_event = { id = tharbad_story.0007 }
			
		
		
			}
		}
		
		character:tombrass = {
			save_scope_as = newleader
			trigger_event = { id = tharbad_story.0004 days = 1 }
		}
		
		create_title_and_vassal_change = {
			type = usurped
			save_scope_as = title_change
			add_claim_on_loss = no
		}

		every_held_title = {
			change_title_holder = {
				holder = scope:newleader
				change = scope:title_change
			}
		}
		
		set_player_character = scope:newleader

		resolve_title_and_vassal_change = scope:title_change
		
		death = {
			killer = scope:newleader
			death_reason = death_duel
		}
		
		
		
		character:lineofgunrnow3wife = {
			save_scope_as = adventurer
			if = {
				limit = {
					player_heir ?= {
						NOT = { this = root }
						is_adult = yes
					}
				}
				player_heir = {
					save_scope_as = laamp_heir
					save_scope_as = laamp_inheritor
					
				}
			}
			else_if = {
				limit = { is_independent_ruler = no }
				liege = {
					save_scope_as = laamp_liege
					save_scope_as = laamp_inheritor
					
				}
			}
			else = {
				custom_tooltip = become_landless_adventurer_decision_title_created_tt
				if = {
					limit = {
						NOT = { exists = scope:laamp_inheritor }
					}
					hidden_effect_new_object = {
						create_character = {
							template = laamp_inheritor_template
							culture = root.capital_county.culture
							faith = root.capital_county.faith
							dynasty = generate
							location = root.capital_province
							after_creation = {
								save_scope_as = laamp_inheritor
								add_character_flag = new_laamp_inheritor
							}
						}
					}
				}
			}
			create_landless_adventurer_title_tooltip_effect = yes
			
			
			
			
			trigger_event = { id = tharbad_story.0007 }
			
		
		
		}
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 0
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 50
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	
	option = {
		name = tharbad_story.0003.c
		
		character:lineofgunrnow3wife = {
			save_scope_as = adventurer
			if = {
				limit = {
					player_heir ?= {
						NOT = { this = root }
						is_adult = yes
					}
				}
				player_heir = {
					save_scope_as = laamp_heir
					save_scope_as = laamp_inheritor
					
				}
			}
			else_if = {
				limit = { is_independent_ruler = no }
				liege = {
					save_scope_as = laamp_liege
					save_scope_as = laamp_inheritor
					
				}
			}
			else = {
				custom_tooltip = become_landless_adventurer_decision_title_created_tt
				if = {
					limit = {
						NOT = { exists = scope:laamp_inheritor }
					}
					hidden_effect_new_object = {
						create_character = {
							template = laamp_inheritor_template
							culture = root.capital_county.culture
							faith = root.capital_county.faith
							dynasty = generate
							location = root.capital_province
							after_creation = {
								save_scope_as = laamp_inheritor
								add_character_flag = new_laamp_inheritor
							}
						}
					}
				}
			}
			create_landless_adventurer_title_tooltip_effect = yes
			
			
			
			
			trigger_event = { id = tharbad_story.0007 }
			
		
		
		}
		
		set_player_character = character:lineofgunrnow3wife
		
		random_list = {
			75 = {
				root = {
					character:tombrass = {
						save_scope_as = newleader
						trigger_event = { id = tharbad_story.0004 days = 1 }
					}
		
					create_title_and_vassal_change = {
						type = usurped
						save_scope_as = title_change
						add_claim_on_loss = no
					}

					every_held_title = {
						change_title_holder = {
							holder = scope:newleader
							change = scope:title_change
						}
					}
		
				

					resolve_title_and_vassal_change = scope:title_change
		
				
					death = {
						killer = scope:newleader
						death_reason = death_duel
					}
				}
			}
			25 = {
				root = {
					character:lineofgwilleth1 = {
						save_scope_as = newleader
						trigger_event = { id = tharbad_story.0004 days = 1 }
					}
		
					create_title_and_vassal_change = {
						type = usurped
						save_scope_as = title_change
						add_claim_on_loss = no
					}

					every_held_title = {
						change_title_holder = {
							holder = scope:newleader
							change = scope:title_change
						}
					}
		
				

					resolve_title_and_vassal_change = scope:title_change
				
				
					death = {
						killer = scope:newleader
						death_reason = death_duel
					}
				}
			}
		}
	}
	
	after = {
		hidden_effect = {
			title:d_tharbad_titular.holder = {
				change_government = oligarchy_government
				add_realm_law_skip_effects = equal_law
				add_realm_law_skip_effects = partition_succession_law
			}
		}
	}
	
}

tharbad_story.0004 = { # post coup Intro
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0004.t
	desc = tharbad_story.0004.desc
	theme = stewardship_duty_focus

	right_portrait = {
		character = root
		animation = marshal
	}
	
	
	override_background = {
		reference = tharbad
	}
	
	immediate = { 
		
	}

	option = { 
		name = tharbad_story.0004.a
		
		add_legitimacy = 250
		add_short_term_gold = 50
		add_trait = populist_leader
		every_sub_realm_county = {
			change_county_control = -50
		}
		
		set_realm_capital = title:c_tharbad
		
		trigger_event = { id = tharbad_story.0005 months = 6 }
		
		hidden_effect = {
			if = {
				limit = {
					scope:tharbad_guard = {
						is_landed = no
					}
				}
				add_courtier = scope:tharbad_guard
			}
			if = {
				limit = {
					scope:tharbad_ranger = {
						is_landed = no
					}
				}
				add_courtier = scope:tharbad_ranger
			}
			
			create_character = {
				location = root.location
				template = lotr_dunedain_traveler_template
				save_temporary_scope_as = newchar
			}
			add_courtier = scope:newchar
			create_character = {
				location = root.location
				template = priest_character_template
				save_temporary_scope_as = newchar				
			}
			add_courtier = scope:newchar
			create_character = {
				location = root.location
				template = royal_architect_court_position_template	
				save_temporary_scope_as = newchar
			}
			add_courtier = scope:newchar
			
			
		}
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

tharbad_story.0005 = { # Rangers Arrive - End of Ahistorical path
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0005.t
	desc = tharbad_story.0005.desc
	theme = diplomacy

	right_portrait = {
		character = title:d_northern_dunedain.holder
		
		animation = marshal
	}
	
	left_portrait = {
		character = root
		animation = happiness
	}
	
	override_background = {
		reference = throne_room
	}
	
	immediate = { 
		title:d_northern_dunedain.holder = {
			save_scope_as = ranger_leader
		}
		title:d_tharbad_titular.previous_holder = {
			save_scope_as = overthrown
		}
	}

	option = { 
		name = tharbad_story.0005.a
		
		scope:ranger_leader = {
			add_opinion = {
					target = root
					modifier = impressed_modifier
					opinion = 50
				}
		}
		
		root = {
			spawn_army = {
				men_at_arms = { 
					type = dunedain_rangers
					stacks = 2
				}
			location = province:4537
			name = dunedain_rangers_army
			}
		}
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

tharbad_story.0006 = { # Revolution fizzles out
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0006.t
	desc = tharbad_story.0006.desc
	theme = realm

	right_portrait = {
		character = character:lineofgunrnow3wife
		animation = happiness
	}
	
	left_portrait = {
		character = root
		animation = happiness
	}
	
	override_background = {
		reference = forodwaith
	}
	
	immediate = { 
		
	}

	option = { 
		name = tharbad_story.0006.a
		add_legitimacy = 100
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

tharbad_story.0007 = {
	type = character_event
	window = fullscreen_event
	title = ep3_laamps.0030.t
	desc = {
		desc = ep3_laamps.0030.desc
		first_valid = {
			triggered_desc = {
				trigger = { exists = scope:laamp_heir }
				desc = ep3_laamps.0030.heir
			}
			triggered_desc = {
				trigger = { exists = scope:laamp_liege }
				desc = ep3_laamps.0030.liege
			}
			desc = ep3_laamps.0030.new
		}
	}
	theme = realm
	left_portrait = {
		character = root
		animation = marshal
	}
	lower_right_portrait = scope:laamp_inheritor
	override_background = { reference = ep3_fullscreen_adventurer_positive }
	cooldown = { days = 5 }

	trigger = { exists = scope:laamp_inheritor }

	immediate = {
		
		# Create Adventurer
		create_landless_adventurer_title_effect = {
			REASON = flag:voluntary
			FLAVOR_CHAR = scope:laamp_inheritor
		}
		scope:laamp_inheritor = {
			# Tooltip for player
			custom_tooltip = become_landless_adventurer_decision_title_scope_tt
			# Create a loving family so inheritance isn't so borked
			if = {
				limit = { has_character_flag = new_laamp_inheritor }
				trigger_event = game_rule.1001
				remove_character_flag = new_laamp_inheritor
			}
		}
		
		
		
		trigger_event = { id = tharbad_story.0008 }
	}

	option = {
		name = ep3_laamps.0030.a
		create_landless_adventurer_title_tooltip_effect = yes
		add_prestige = medium_prestige_gain
		add_character_modifier = {
			modifier = ep3_voluntary_laamp_character_modifier
			years = 5
		}
	}
}

tharbad_story.0008 = { # Almarien start
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0008.t
	desc = tharbad_story.0008.desc
	theme = mental_break

	
	left_portrait = {
		character = root
		animation = happiness
	}
	
	override_background = {
		reference = wilderness_forest
	}
	
	immediate = { 
		title:d_tharbad_titular.previous_holder = {
			save_scope_as = overthrown
		}
		
	}

	option = { 
		name = tharbad_story.0008.a
		
		add_short_term_gold = 50
		
		every_child = {
			limit = {
				is_at_location = title:c_tharbad.title_province
			}
			save_scope_as = almarien_kid
			root = {
				add_courtier = scope:almarien_kid
			}
		}
		primary_title = {
			set_title_name = almarien_laamp
			set_coa = title:d_tharbad_titular
		}
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}


### Foreign Aid Event Chain ###

tharbad_story.0101 = { # Foreign Aid Prompt.
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0101.t
	desc = tharbad_story.0101.desc
	theme = diplomacy

	right_portrait = {
		character = root
		animation = chancellor
	}
	
	
	
	override_background = {
		reference = docks
	}
	
	immediate = { 
		
		title:d_northern_dunedain.holder = {
			save_scope_as = ranger_leader
		}
		title:k_dunland.holder = {
			save_scope_as = dunland_leader
		}
		
	}

	option = { 
		name = tharbad_story.0101.a
		
		trigger = {
			exists = title:e_gondor_steward.holder
			NOT = {
				exists = global_var:tharbad_gondor_no
			}
		}
		
		start_travel_plan = {
			destination = title:e_gondor_steward.title_province
			on_arrival_event = tharbad_story.0116
			return_trip = yes
			players_use_planner = no
			on_arrival_destinations = all_but_last
		}
		
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	
	option = { 
		name = tharbad_story.0101.b
		
		start_travel_plan = {
			destination = title:d_northern_dunedain.title_province
			on_arrival_event = tharbad_story.0120
			return_trip = yes
			players_use_planner = no
			on_arrival_destinations = all_but_last
		}
		
		trigger = {
			exists = title:d_northern_dunedain.holder
			NOT = {
				exists = global_var:tharbad_rangers_no
			}
		}
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	
	option = { 
		name = tharbad_story.0101.c
		
		trigger = {
			exists = title:k_saralain.holder
			NOT = {
				exists = global_var:tharbad_sarlain_no
			}
		}
		
		start_travel_plan = {
			destination = title:k_saralain.title_province
			on_arrival_event = tharbad_story.0130
			return_trip = yes
			players_use_planner = no
			on_arrival_destinations = all_but_last
		}
		
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	
	option = { 
		name = tharbad_story.0101.d
		
		trigger = {
			exists = title:k_dunland.holder
			character:lineoffreca3 = {
				has_title = title:k_dunland
				# is_at_war = no
			}
			NOT = {
				exists = global_var:tharbad_dunland_no
			}
		}
		
		start_travel_plan = {
			destination = title:k_dunland.title_province
			on_arrival_event = tharbad_story.0140
			return_trip = yes
			players_use_planner = no
			on_arrival_destinations = all_but_last
		}
		
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	option = { 
		name = tharbad_story.0101.e
		
		
		
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
}

tharbad_story.0110 = { # Gondor gets the request.
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0110.t
	desc = tharbad_story.0110.desc
	theme = diplomacy

	right_portrait = {
		character = root
		animation = chancellor
	}
	
	left_portrait = {
		character = title:d_tharbad_titular.holder
		animation = beg
	}
	
	
	
	
	immediate = { 
		
		title:d_tharbad_titular.holder = {
			save_scope_as = tharbad_leader
		}
		
	}

	option = { 
		name = tharbad_story.0110.a
		
		title:d_tharbad_titular.holder = {
			trigger_event = { id = tharbad_story.0111 days = 1 }
		}
		remove_short_term_gold = 100
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 50
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 33
			}
		}
	}
	
	option = { 
		name = tharbad_story.0110.b
		
		title:d_tharbad_titular.holder = {
			trigger_event = { id = tharbad_story.0112 days = 1 }
		}
		remove_short_term_gold = 200
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 0
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 20
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 33
			}
		}
	}
	
	option = { 
		name = tharbad_story.0110.c
		
		title:d_tharbad_titular.holder = {
			trigger_event = { id = tharbad_story.0113 days = 1 }
		}
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 30
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 30
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 34
			}
		}
	}

	
}

tharbad_story.0111 = { # Tharbad lesser aid - Gondor
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0111.t
	desc = tharbad_story.0111.desc
	theme = diplomacy

	right_portrait = {
		character = root
		animation = happiness
	}
	left_portrait = {
		character = title:e_gondor_steward.holder
		animation = scepter
	}
	
	
	override_background = {
		reference = throne_room_dunedain
	}
	
	immediate = { 
		
		title:e_gondor_steward.holder = {
			save_scope_as = gondor_leader
		}
		
	}

	option = { 
		name = tharbad_story.0111.a
		
		start_tributary_interaction_effect = {
			TRIBUTARY = root
			SUZERAIN = title:e_gondor_steward.holder
			
		}
		
		title:c_tharbad = {
			
			title_province = {
				
				if = {
					limit = {
						OR = {
							has_building_or_higher = common_tradeport_01
							building_slots > 0
						}
					}
					add_next_building_tier_effect = { BUILDING = common_tradeport }
				}
				else = {
					root = {
						add_short_term_gold = 100
					}
				}
			
			
			}
			add_county_modifier = { modifier = tharbad_gondor_investment_modifier years = 50 }
		}
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

tharbad_story.0112 = { # Tharbad greater aid - Gondor
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0112.t
	desc = tharbad_story.0112.desc
	theme = diplomacy

	right_portrait = {
		character = root
		animation = happiness
	}
	left_portrait = {
		character = title:e_gondor_steward.holder
		animation = scepter
	}
	
	
	override_background = {
		reference = throne_room_dunedain
	}
	
	immediate = { 
		
		title:e_gondor_steward.holder = {
			save_scope_as = gondor_leader
		}
		
	}

	option = { 
		name = tharbad_story.0112.a
		
		title:e_gondor_steward.holder = {
			trigger_event = { id = tharbad_story.0114 days = 1 }
		}
		
		create_title_and_vassal_change = {
			type = granted
			save_scope_as = change
			add_claim_on_loss = no
		}
		root = {
			change_liege = {
				liege = title:e_gondor_steward.holder
				change = scope:change
			}
		}
		resolve_title_and_vassal_change = scope:change
		
		title:c_tharbad = {
			title_province = {
				if = {
					limit = {
						OR = {
							has_building_or_higher = common_tradeport_01
							building_slots > 0
						}
					}
					add_next_building_tier_effect = { BUILDING = common_tradeport }
				}
				else = {
					root = {
						add_short_term_gold = 100
					}
				}		
			}
			title_province = {
				if = {
					limit = {
						OR = {
							has_building_or_higher = farm_estates_01
							building_slots > 0
						}
					}
					add_next_building_tier_effect = { BUILDING = farm_estates }
				}
				else = {
					root = {
						add_short_term_gold = 100
					}
				}		
			}
			add_county_modifier = { modifier = tharbad_gondor_investment_modifier years = 50 }
		}
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	
	option = { 
		name = tharbad_story.0112.b
		
		title:e_gondor_steward.holder = {
			trigger_event = { id = tharbad_story.0115 days = 1 }
		}
		
		start_tributary_interaction_effect = {
			TRIBUTARY = root
			SUZERAIN = title:e_gondor_steward.holder
			
		}
		
		title:c_tharbad = {
			
			title_province = {
				
				if = {
					limit = {
						OR = {
							has_building_or_higher = common_tradeport_01
							building_slots > 0
						}
					}
					add_next_building_tier_effect = { BUILDING = common_tradeport }
				}
				else = {
					root = {
						add_short_term_gold = 100
					}
				}
				
			
			
			}
			add_county_modifier = { modifier = tharbad_gondor_investment_modifier years = 50 }
		}
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

tharbad_story.0113 = { # Gondor can't send aid.
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0113.t
	desc = tharbad_story.0113.desc
	theme = diplomacy

	right_portrait = {
		character = root
		animation = disapproval
	}
	
	
	
	override_background = {
		reference = throne_room_dunedain
	}
	
	immediate = { 
		
		set_global_variable = tharbad_gondor_no
		
	}

	option = { 
		name = tharbad_story.0113.a
		
		
			trigger_event = { id = tharbad_story.0101 days = 1 }
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

tharbad_story.0114 = { # Tharbad Accepts Counter Offer
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0114.t
	desc = tharbad_story.0114.desc
	theme = diplomacy

	right_portrait = {
		character = root
		animation = war_over_win
	}
	
	left_portrait = {
		character = title:d_tharbad_titular.holder
		animation = acknowledging
	}
	
	
	override_background = {
		reference = throne_room_dunedain
	}
	
	immediate = { 
		
		
		
	}

	option = { 
		name = tharbad_story.0114.a
		
		
			
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

tharbad_story.0115 = { # Tharbad Rejects Counter Offer
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0115.t
	desc = tharbad_story.0115.desc
	theme = diplomacy

	right_portrait = {
		character = root
		animation = disapproval
	}
	
	left_portrait = {
		character = title:d_tharbad_titular.holder
		animation = acknowledging
	}
	
	
	override_background = {
		reference = throne_room_dunedain
	}
	
	immediate = { 
		
		
		
	}

	option = { 
		name = tharbad_story.0115.a
		
		
			
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

tharbad_story.0116 = { # Arrival at Minas Tirith
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0116.t
	desc = tharbad_story.0116.desc
	theme = diplomacy

	right_portrait = {
		character = root
		animation = beg
	}
	
	left_portrait = {
		character = title:e_gondor_steward.holder
		animation = acknowledging
	}
	
	
	override_background = {
		reference = throne_room_dunedain
	}
	
	immediate = { 
		
		title:e_gondor_steward.holder = {
			save_scope_as = gondor_leader
		}
		
	}

	option = { 
		name = tharbad_story.0116.a
		
		title:e_gondor_steward.holder = {
			trigger_event = { id = tharbad_story.0110 days = 1 }
		}
			
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

tharbad_story.0120 = { # Arrival with Rangers.
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0120.t
	desc = tharbad_story.0120.desc
	theme = diplomacy

	right_portrait = {
		character = root
		animation = beg
	}
	
	left_portrait = {
		character = title:d_northern_dunedain.holder
		animation = acknowledging
	}
	
	
	override_background = {
		reference = wilderness_forest_deep
	}
	
	immediate = { 
		
		title:d_northern_dunedain.holder = {
			save_scope_as = ranger_leader
		}
		
	}

	option = { 
		name = tharbad_story.0120.a
		
		title:d_northern_dunedain.holder = {
			trigger_event = { id = tharbad_story.0121 days = 1 }
		}
			
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

tharbad_story.0121 = { # Rangers get the request.
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0121.t
	desc = tharbad_story.0121.desc
	theme = diplomacy

	right_portrait = {
		character = root
		animation = chancellor
	}
	
	left_portrait = {
		character = title:d_tharbad_titular.holder
		animation = beg
	}
	
	override_background = {
		reference = wilderness_forest_deep
	}
	
	
	immediate = { 
		
		title:d_tharbad_titular.holder = {
			save_scope_as = tharbad_leader
		}
		
	}

	option = { 
		name = tharbad_story.0121.a
		
		title:d_tharbad_titular.holder = {
			trigger_event = { id = tharbad_story.0122 days = 1 }
		}
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 50
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 33
			}
		}
	}
	
	option = { 
		name = tharbad_story.0121.b
		
		title:d_tharbad_titular.holder = {
			trigger_event = { id = tharbad_story.0123 days = 1 }
		}
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 0
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 20
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 33
			}
		}
	}
	
	

	
}

tharbad_story.0122 = { # Yes - Rangers
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0122.t
	desc = tharbad_story.0122.desc
	theme = diplomacy

	right_portrait = {
		character = root
		animation = happiness
	}
	
	left_portrait = {
		character = title:d_northern_dunedain.holder
		animation = happiness
	}
	
	
	override_background = {
		reference = wilderness_forest_deep
	}
	
	immediate = { 
		
		title:d_northern_dunedain.holder = {
			save_scope_as = ranger_leader
		}
		
	}

	option = { 
		name = tharbad_story.0122.a
		
		custom_tooltip = {
			text = alliance_rangers
			create_alliance = {
				target = scope:ranger_leader
				allied_through_owner = root
				allied_through_target = scope:ranger_leader
			}
		}
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

tharbad_story.0123 = { # No - Rangers
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0123.t
	desc = tharbad_story.0123.desc
	theme = diplomacy

	right_portrait = {
		character = root
		animation = disappointed
	}
	
	left_portrait = {
		character = title:d_northern_dunedain.holder
		animation = idle
	}
	
	
	override_background = {
		reference = wilderness_forest_deep
	}
	
	immediate = { 
		
		title:d_northern_dunedain.holder = {
			save_scope_as = ranger_leader
		}
		set_global_variable = tharbad_rangers_no
	}

	option = { 
		name = tharbad_story.0123.a
		
		trigger_event = { id = tharbad_story.0101 days = 1 }
			
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

tharbad_story.0130 = { # Arrival with Saralain.
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0130.t
	desc = tharbad_story.0130.desc
	theme = diplomacy

	right_portrait = {
		character = root
		animation = beg
	}
	
	left_portrait = {
		character = title:k_saralain.holder
		animation = acknowledging
	}
	
	
	override_background = {
		reference = docks_tribal
	}
	
	immediate = { 
		
		title:k_saralain.holder = {
			save_scope_as = saralain_leader
		}
		
	}

	option = { 
		name = tharbad_story.0130.a
		
		title:k_saralain.holder = {
			trigger_event = { id = tharbad_story.0131 days = 1 }
		}
			
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

tharbad_story.0131 = { # Saralain get the request.
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0131.t
	desc = tharbad_story.0131.desc
	theme = diplomacy

	right_portrait = {
		character = root
		animation = chancellor
	}
	
	left_portrait = {
		character = title:d_tharbad_titular.holder
		animation = beg
	}
	
	override_background = {
		reference = docks_tribal
	}
	
	
	immediate = { 
		
		title:d_tharbad_titular.holder = {
			save_scope_as = tharbad_leader
		}
		
	}

	option = { 
		name = tharbad_story.0131.a
		
		title:d_tharbad_titular.holder = {
			trigger_event = { id = tharbad_story.0132 days = 1 }
		}
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 50
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 33
			}
		}
	}
	
	option = { 
		name = tharbad_story.0131.b
		
		title:d_tharbad_titular.holder = {
			trigger_event = { id = tharbad_story.0133 days = 1 }
		}
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 0
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 30
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 33
			}
		}
	}
	
	

	
}

tharbad_story.0132 = { # Yes - Saralain
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0132.t
	desc = tharbad_story.0132.desc
	theme = diplomacy

	right_portrait = {
		character = root
		animation = happiness
	}
	
	left_portrait = {
		character = title:k_saralain.holder
		animation = happiness
	}
	
	
	override_background = {
		reference = docks_tribal
	}
	
	immediate = { 
		
		title:k_saralain.holder = {
			save_scope_as = saralain_leader
		}
		
	}

	option = { 
		name = tharbad_story.0132.a
		
		start_tributary_interaction_effect = {
			TRIBUTARY = root
			SUZERAIN = title:k_saralain.holder
			
		}
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

tharbad_story.0133 = { # No - Saralain
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0133.t
	desc = tharbad_story.0133.desc
	theme = diplomacy

	right_portrait = {
		character = root
		animation = disappointed
	}
	
	left_portrait = {
		character = title:k_saralain.holder
		animation = idle
	}
	
	
	override_background = {
		reference = docks_tribal
	}
	
	immediate = { 
		
		title:k_saralain.holder = {
			save_scope_as = saralain_leader
		}
		set_global_variable = tharbad_sarlain_no
	}

	option = { 
		name = tharbad_story.0133.a
		
		trigger_event = { id = tharbad_story.0101 days = 1 }
			
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

tharbad_story.0140 = { # Arrival with Dunland.
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0140.t
	desc = tharbad_story.0140.desc
	theme = diplomacy

	right_portrait = {
		character = root
		animation = beg
	}
	
	left_portrait = {
		character = title:k_dunland.holder
		animation = acknowledging
	}
	
	
	override_background = {
		reference = daen_tavern
	}
	
	immediate = { 
		
		title:k_dunland.holder = {
			save_scope_as = dunland_leader
		}
		
	}

	option = { 
		name = tharbad_story.0140.a
		
		title:k_dunland.holder = {
			trigger_event = { id = tharbad_story.0141 days = 1 }
		}
			
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

tharbad_story.0141 = { # dunland get the request.
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0141.t
	desc = tharbad_story.0141.desc
	theme = diplomacy

	right_portrait = {
		character = root
		animation = chancellor
	}
	
	left_portrait = {
		character = title:d_tharbad_titular.holder
		animation = beg
	}
	
	override_background = {
		reference = daen_tavern
	}
	
	
	immediate = { 
		
		title:d_tharbad_titular.holder = {
			save_scope_as = tharbad_leader
		}
		
	}

	option = { 
		name = tharbad_story.0141.a
		
		title:d_tharbad_titular.holder = {
			trigger_event = { id = tharbad_story.0142 days = 1 }
		}
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 50
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 33
			}
		}
	}
	
	option = { 
		name = tharbad_story.0141.b
		
		title:d_tharbad_titular.holder = {
			trigger_event = { id = tharbad_story.0143 days = 1 }
		}
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 0
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 30
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 33
			}
		}
	}
	
	

	
}

tharbad_story.0142 = { # Yes - dunland
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0142.t
	desc = tharbad_story.0142.desc
	theme = diplomacy

	right_portrait = {
		character = root
		animation = happiness
	}
	
	left_portrait = {
		character = title:k_dunland.holder
		animation = happiness
	}
	
	
	override_background = {
		reference = daen_tavern
	}
	
	immediate = { 
		
		title:k_dunland.holder = {
			save_scope_as = dunland_leader
		}
		
	}

	option = { 
		name = tharbad_story.0142.a
		
		start_tributary_interaction_effect = {
			TRIBUTARY = root
			SUZERAIN = title:k_dunland.holder
			
		}
		
		title:c_tharbad = {
			add_county_modifier = { modifier = tharbad_dunland_investment_modifier years = 50 }
		}
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

tharbad_story.0143 = { # No - dunland
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0143.t
	desc = tharbad_story.0143.desc
	theme = diplomacy

	right_portrait = {
		character = root
		animation = disappointed
	}
	
	left_portrait = {
		character = title:k_dunland.holder
		animation = idle
	}
	
	
	override_background = {
		reference = daen_tavern
	}
	
	immediate = { 
		
		title:k_dunland.holder = {
			save_scope_as = dunland_leader
		}
		set_global_variable = tharbad_dunland_no
	}

	option = { 
		name = tharbad_story.0143.a
		
		trigger_event = { id = tharbad_story.0101 days = 1 }
			
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

### Ruin Survey ###

tharbad_story.0200 = { # Start Ruins Survey
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0200.t
	desc = tharbad_story.0200.desc
	theme = realm

	right_portrait = {
		character = root
		animation = steward
	}
	
	
	
	override_background = {
		reference = city_north
	}
	
	immediate = { 
		
		
		
	}

	option = { 
		name = tharbad_story.0200.a
		
		skill = stewardship
		
		trigger_event = { id = tharbad_story.0201 years = 1 }
		add_character_modifier = { modifier = tharbad_survey_modifier years = 1 }
		
		show_as_tooltip = {
			custom_tooltip = {
				text = tharbad_story.0200.effect
			}
			duel = {
				skill = stewardship
				value = high_skill_rating
				5 = {
					desc = tharbad_story.0200.success2
					compare_modifier = {
						value = scope:duel_value
						multiplier = 1
						min = -49
					}
					root = {
						send_interface_toast = {
							title = tharbad_story.0200.success2
							left_icon = root
							root = { add_character_modifier = { modifier = tharbad_ruins_modifier_2 years = 10 } }
						}
					}
					min = 1
				}
				15 = {
					desc = tharbad_story.0200.success1
					
					compare_modifier = {
						value = scope:duel_value
						multiplier = -3.5
						min = -49
					}
					root = {
						send_interface_toast = {
							title = tharbad_story.0200.success1
							left_icon = root
							root = {
								add_character_modifier = { modifier = tharbad_ruins_modifier_1 years = 10 }
							}
						}
					}
					min = 3
				}
				10 = {
					desc = tharbad_story.0200.failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -3.5
						min = -49
					}
					root = {
						send_interface_toast = {
							title = tharbad_story.0200.failure
							left_icon = root
							root = {
								
							}
						}
					}
					min = 2
					
				}
			}
		}
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

tharbad_story.0201 = { # End Survey
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0201.t
	desc = tharbad_story.0201.desc
	theme = realm

	right_portrait = {
		character = root
		animation = happiness
	}
	
	
	
	override_background = {
		reference = study
	}
	
	immediate = { 
		
		
		
	}

	option = { 
		name = tharbad_story.0201.a
		
		skill = stewardship
		
		
		
			duel = {
				skill = stewardship
				value = high_skill_rating
				5 = {
					desc = tharbad_story.0200.success2
					compare_modifier = {
						value = scope:duel_value
						multiplier = 1
						min = -49
					}
					root = {
						send_interface_toast = {
							title = tharbad_story.0200.success2
							left_icon = root
							root = { add_character_modifier = { modifier = tharbad_ruins_modifier_2 years = 10 } }
						}
					}
					min = 1
				}
				15 = {
					desc = tharbad_story.0200.success1
					
					compare_modifier = {
						value = scope:duel_value
						multiplier = -3.5
						min = -49
					}
					root = {
						send_interface_toast = {
							title = tharbad_story.0200.success1
							left_icon = root
							root = {
								add_character_modifier = { modifier = tharbad_ruins_modifier_1 years = 10 }
							}
						}
					}
					min = 3
				}
				10 = {
					desc = tharbad_story.0200.failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -3.5
						min = -49
					}
					root = {
						send_interface_toast = {
							title = tharbad_story.0200.failure
							left_icon = root
							root = {
								
							}
						}
					}
					min = 2
					
				}
			}
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

### Title Establishment ###

tharbad_story.1000 = { # Free City of Tharbad
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.1000.t
	desc = tharbad_story.1000.desc
	theme = crown

	right_portrait = {
		character = root
		animation = happiness
	}
	
	
	
	override_background = {
		reference = tharbad
	}
	
	immediate = { 
		
		
		
	}

	option = { 
		name = tharbad_story.1000.a
		
	
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

tharbad_story.1001 = { # Kingdom of Greyflood
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.1001.t
	desc = tharbad_story.1001.desc
	theme = crown

	right_portrait = {
		character = root
		animation = happiness
	}
	
	
	
	override_background = {
		reference = docks
	}
	
	immediate = { 
		
		
		
	}

	option = { 
		name = tharbad_story.1001.a
		
	
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}

tharbad_story.0300 = { # Crown a King
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0300.t
	desc = tharbad_story.0300.desc
	theme = crown

	right_portrait = {
		character = root
		animation = happiness
	}
	
	
	
	override_background = {
		reference = docks
	}
	
	immediate = { 
		
		house:house_isildur.house_head = {
			save_scope_as = new_king
		}
		
	}

	option = { 
		name = tharbad_story.0300.a
		
		trigger = {
			NOT = {
				exists = global_var:tharbad_no_king
			}
		}
		
		house:house_isildur.house_head = {
			trigger_event = { id = tharbad_story.0301 days = 1 }
		}
	
		
		
		ai_chance = {
			base = 100 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	option = { 
		name = tharbad_story.0300.b
		
		change_government = feudal_government
	
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	option = { 
		name = tharbad_story.0300.c
		
		
	
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	
}

tharbad_story.0301 = { # Kingdom of Greyflood
	content_source = realms_dlc
	type = character_event
	title = tharbad_story.0301.t
	desc = tharbad_story.0301.desc
	theme = crown

	right_portrait = {
		character = root
		animation = happiness
	}
	
	left_portrait = {
		character = title:k_cardolan.holder
		animation = acknowledging
	}
	
	
	
	immediate = { 
		
		title:k_cardolan.holder = {
			save_scope_as = cardolan_restorer
		}
		
	}

	option = { 
		name = tharbad_story.0301.a
		
		
		
		create_title_and_vassal_change = {
			type = swear_fealty
			save_scope_as = title_change
			add_claim_on_loss = no
		}
		
		title:k_cardolan.holder = {
			every_vassal = {
				change_liege = {
					liege = root
					change = scope:title_change
				}
			}
			change_liege = {
				liege = root
				change = scope:title_change
			}
		}	
		
		get_title = title:k_cardolan
		resolve_title_and_vassal_change = scope:title_change
		
		
		ai_chance = {
			base = 0 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 0
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 30
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}
	
	option = { 
		name = tharbad_story.0301.b
		
		set_global_variable = tharbad_no_king
		
		title:k_cardolan.holder = {
			trigger_event = { id = tharbad_story.0300 days = 1 }
		}
		
		
		
		ai_chance = {
			base = 100 # LotR: This should be tied to WotR mode.
			modifier = { # Game Rule
				has_game_rule = default_ai_behavior
				add = 100
			}
			modifier = { # Game Rule
				has_game_rule = weighted_ai_behavior
				add = 70
			}
			modifier = { # Game Rule
				has_game_rule = random_ai_behavior
				add = 50
			}
		}
	}

	
}
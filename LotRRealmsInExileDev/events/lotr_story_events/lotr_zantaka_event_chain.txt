namespace = zantaka_event_chain

zantaka_event_chain.0101 = { # The City Council Kneels
	content_source = realms_dlc
	type = character_event
	theme = realm
	title =	zantaka_event_chain.0101.t
	desc = zantaka_event_chain.0101.desc
	override_background = throne_room
	
	left_portrait = {
		character = root
		animation = personality_dishonorable
	}
	
	right_portrait = {
		character = scope:council_leader
		animation = disbelief
	}
	
	immediate = {
		character:serpentlord19 = { save_scope_as = mother}
		title:b_melynar.holder = { save_scope_as = council_leader }
		title:b_phariel.holder = { save_scope_as = council_chancellor }
		character:lineofelynda93 = { save_scope_as = council_steward }
		character:lineofmurnakor71 = { save_scope_as = council_spymaster }
		hidden_effect = {			
			assign_councillor_type = {
				type = councillor_spymaster
				target = scope:council_spymaster
				remove_existing_councillor = yes
			}
			assign_councillor_type = {
				type = councillor_chancellor
				target = scope:council_chancellor
				remove_existing_councillor = yes
			}
			assign_councillor_type = {
				type = councillor_steward
				target = scope:council_steward
				remove_existing_councillor = yes
			}
			assign_councillor_type = {
				type = councillor_marshal
				target = scope:council_leader
				remove_existing_councillor = yes
			}
			scope:council_steward = {
				add_secret = {type = secret_non_believer}
			}
			scope:council_spymaster = {
				add_secret = {type = secret_non_believer}
			}
			scope:council_chancellor = {
				add_secret = {type = secret_non_believer}
			}
			scope:council_leader = {
				add_secret = {type = secret_homosexual}
			}
			scope:council_steward = {
				every_secret = {
					reveal_to = root
				}
			}
			scope:council_chancellor = {
				every_secret = {
					reveal_to = root
				}
			}
			scope:council_spymaster = {
				every_secret = {
					reveal_to = root
				}
			}	
			scope:council_leader = {
				every_secret = {
					reveal_to = root
				}
			}																													
		}

	}
	
	option = {
		name = zantaka_event_chain.0101.a
		trigger_event = {
			id = zantaka_event_chain.0102
			days = 5
		}
		add_hook = {
			type = favor_hook
			target = scope:council_steward
		}		
		add_hook = {
			type = favor_hook
			target = scope:council_spymaster
		}
		add_hook = {
			type = favor_hook
			target = scope:council_chancellor
		}
		add_hook = {
			type = favor_hook
			target = scope:council_leader
		}
		ai_chance = {
			base = 100
		}
	}
}

zantaka_event_chain.0102 = { # Strife
	content_source = realms_dlc
	type = character_event
	theme = realm
	title =	zantaka_event_chain.0102.t
	desc = zantaka_event_chain.0102.desc
	override_background = alley_day
	
	left_portrait = {
		character = root
		animation = disapproval
	}
	
	immediate = {
		character:serpentlord19 = { save_scope_as = mother}
		title:b_melynar.holder = { save_scope_as = council_leader }
		add_character_modifier = {
			modifier = zantaka_bad_reputation
			years = 3
		}
		add_legitimacy = -500
		add_prestige_level = -1
		every_sub_realm_county = {
			change_county_control = -60
		}		
	}	
	
	option = {
		name = zantaka_event_chain.0102.a	
		custom_tooltip = zantaka_strife_begins
		ai_chance = {
			base = 100
		}
	}
}